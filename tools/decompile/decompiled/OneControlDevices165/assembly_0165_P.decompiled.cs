using System;
using System.Collections;
using System.Collections.Concurrent;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.ComponentModel;
using System.Diagnostics;
using System.IO;
using System.Linq;
using System.Reactive.Disposables;
using System.Reactive.Linq;
using System.Reflection;
using System.Runtime.CompilerServices;
using System.Runtime.ExceptionServices;
using System.Runtime.InteropServices;
using System.Text;
using System.Text.Json.Serialization;
using System.Threading;
using System.Threading.Tasks;
using System.Threading.Tasks.Sources;
using DynamicData;
using IDS.Core;
using IDS.Core.IDS_CAN;
using IDS.Core.Types;
using IDS.Portable.Common;
using IDS.Portable.Common.Color;
using IDS.Portable.Common.Extensions;
using IDS.Portable.LogicalDevice;
using IDS.Portable.LogicalDevice.FirmwareUpdate;
using IDS.Portable.LogicalDevice.Json;
using IDS.Portable.LogicalDevice.LogicalDevice;
using IDS.Portable.LogicalDevice.LogicalDeviceSource;
using IDS.Portable.LogicalDevice.Tag;
using IDS.Portable.LogicalDevices;
using Microsoft.CodeAnalysis;
using Newtonsoft.Json;
using OneControl.Devices.AccessoryGateway;
using OneControl.Devices.AwningSensor;
using OneControl.Devices.BatteryMonitor;
using OneControl.Devices.BatteryMonitor.PidProxy;
using OneControl.Devices.BluetoothGateway;
using OneControl.Devices.BootLoader;
using OneControl.Devices.BrakeMotorController;
using OneControl.Devices.BrakingSystem;
using OneControl.Devices.ChassisInfo;
using OneControl.Devices.DoorLock;
using OneControl.Devices.EchoBrakeControl;
using OneControl.Devices.Fan;
using OneControl.Devices.FlicButton;
using OneControl.Devices.GenericSensor;
using OneControl.Devices.Hvac;
using OneControl.Devices.Interfaces;
using OneControl.Devices.Leveler;
using OneControl.Devices.Leveler.Type3;
using OneControl.Devices.Leveler.Type3.CommandRunners;
using OneControl.Devices.Leveler.Type3.CommandRunners.SimTest;
using OneControl.Devices.Leveler.Type3.State;
using OneControl.Devices.Leveler.Type4;
using OneControl.Devices.Leveler.Type5;
using OneControl.Devices.LightRgb;
using OneControl.Devices.OneControlTouchPanel;
using OneControl.Devices.RelayBasic.Remote;
using OneControl.Devices.RelayHBridge.Type2;
using OneControl.Devices.Remote;
using OneControl.Devices.TPMS;
using OneControl.Devices.TankSensor;
using OneControl.Devices.TemperatureSensor;
using OneControl.Devices.TextDevice;
using Serilog;
using ids.portable.common;

[assembly: CompilationRelaxations(8)]
[assembly: RuntimeCompatibility(WrapNonExceptionThrows = true)]
[assembly: Debuggable(/*Could not decode attribute arguments.*/)]
[assembly: AssemblyCompany("OneControl.Devices")]
[assembly: AssemblyConfiguration("Release")]
[assembly: AssemblyFileVersion("3.7.2.0")]
[assembly: AssemblyInformationalVersion("3.7.2+a75e7fd5a3a65426e9d0e28d6a0ef91b3e09a282")]
[assembly: AssemblyProduct("OneControl.Devices")]
[assembly: AssemblyTitle("OneControl.Devices")]
[assembly: AssemblyMetadata("RepositoryUrl", "https://github.com/lci-ids/onecontrol.devices")]
[assembly: AssemblyVersion("3.7.2.0")]
[module: RefSafetyRules(11)]
namespace Microsoft.CodeAnalysis
{
	[CompilerGenerated]
	[Embedded]
	internal sealed class EmbeddedAttribute : Attribute
	{
	}
}
namespace System.Runtime.CompilerServices
{
	[CompilerGenerated]
	[Embedded]
	internal sealed class IsReadOnlyAttribute : Attribute
	{
	}
	[CompilerGenerated]
	[Embedded]
	[AttributeUsage(/*Could not decode attribute arguments.*/)]
	internal sealed class NullableAttribute : Attribute
	{
		public readonly byte[] NullableFlags;

		public NullableAttribute(byte P_0)
		{
			NullableFlags = (byte[])(object)new Byte[1] { P_0 };
		}

		public NullableAttribute(byte[] P_0)
		{
			NullableFlags = P_0;
		}
	}
	[CompilerGenerated]
	[Embedded]
	[AttributeUsage(/*Could not decode attribute arguments.*/)]
	internal sealed class NullableContextAttribute : Attribute
	{
		public readonly byte Flag;

		public NullableContextAttribute(byte P_0)
		{
			Flag = P_0;
		}
	}
	[CompilerGenerated]
	[Embedded]
	[AttributeUsage(/*Could not decode attribute arguments.*/)]
	internal sealed class RefSafetyRulesAttribute : Attribute
	{
		public readonly int Version;

		public RefSafetyRulesAttribute(int P_0)
		{
			Version = P_0;
		}
	}
}
namespace IDS.Portable.LogicalDevice.Tag
{
	[JsonObject(/*Could not decode attribute arguments.*/)]
	internal record LogicalDeviceTagLeveler5SetPoints : Object, ILogicalDeviceSnapshotTag, ILogicalDeviceTag, IEquatable<ILogicalDeviceTag>, IJsonSerializerClass
	{
		[CompilerGenerated]
		protected virtual Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceTagLeveler5SetPoints);
			}
		}

		[JsonProperty]
		public virtual string SerializerClass => ((MemberInfo)((Object)this).GetType()).Name;

		[JsonProperty]
		public LevelerAutoOperationSetPoint SelectedSetPoint
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		}

		[JsonProperty]
		public ConcurrentDictionary<LevelerAutoOperationSetPoint, string>? CustomSetPointNames
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		}

		[JsonIgnore]
		private LevelerAutoOperationSetPoint DefaultSelectedSetPoint;

		[JsonConstructor]
		public LogicalDeviceTagLeveler5SetPoints(Nullable<LevelerAutoOperationSetPoint> selectedSetPoint, ConcurrentDictionary<LevelerAutoOperationSetPoint, string>? customSetPointNames)
		{
			SelectedSetPoint = ((!selectedSetPoint.HasValue) ? DefaultSelectedSetPoint : selectedSetPoint.Value);
			CustomSetPointNames = customSetPointNames;
		}

		public virtual bool Equals(ILogicalDeviceTag other)
		{
			return ((Object)this).Equals((object)other);
		}

		static LogicalDeviceTagLeveler5SetPoints()
		{
			Type declaringType = ((MemberInfo)MethodBase.GetCurrentMethod()).DeclaringType;
			TypeRegistry.Register(((MemberInfo)declaringType).Name, declaringType);
		}

		public override string ToString()
		{
			return String.Format("SelectedSetPoint: {0}, CustomSetPointNames {1}", (object)SelectedSetPoint, (object)CustomSetPointNames);
		}

		public static LogicalDeviceTagLeveler5SetPoints? GetTag(ILogicalDeviceLevelerType5 logicalDevice)
		{
			return Enumerable.FirstOrDefault<LogicalDeviceTagLeveler5SetPoints>(((ILogicalDevice)logicalDevice).DeviceService.DeviceManager.TagManager.GetTags<LogicalDeviceTagLeveler5SetPoints>((ILogicalDevice)logicalDevice));
		}

		public static void RemoveTag(ILogicalDeviceLevelerType5 logicalDevice, LogicalDeviceTagLeveler5SetPoints tag)
		{
			((ILogicalDevice)logicalDevice).DeviceService.DeviceManager.TagManager.RemoveTag((ILogicalDeviceTag)(object)tag, (ILogicalDevice)logicalDevice);
		}

		public static void SetTag(ILogicalDeviceLevelerType5 logicalDevice, LogicalDeviceTagLeveler5SetPoints tag)
		{
			LogicalDeviceTagManager tagManager = ((ILogicalDevice)logicalDevice).DeviceService.DeviceManager.TagManager;
			LogicalDeviceTagLeveler5SetPoints tag2 = GetTag(logicalDevice);
			if ((object)tag != tag2)
			{
				if ((object)tag2 != null)
				{
					tagManager.RemoveTag((ILogicalDeviceTag)(object)tag2, (ILogicalDevice)logicalDevice);
				}
				tagManager.AddTag((ILogicalDeviceTag)(object)tag, (ILogicalDevice)logicalDevice);
			}
		}

		public bool IsCustomTagAvailable(LogicalDeviceTagLeveler5SetPoints tag, LevelerAutoOperationSetPoint setPoint)
		{
			if (tag.CustomSetPointNames == null || !tag.CustomSetPointNames.ContainsKey(setPoint))
			{
				return false;
			}
			return true;
		}

		[CompilerGenerated]
		protected virtual bool PrintMembers(StringBuilder builder)
		{
			RuntimeHelpers.EnsureSufficientExecutionStack();
			builder.Append("SerializerClass = ");
			builder.Append((object)SerializerClass);
			builder.Append(", SelectedSetPoint = ");
			builder.Append(((Object)SelectedSetPoint/*cast due to .constrained prefix*/).ToString());
			builder.Append(", CustomSetPointNames = ");
			builder.Append((object)CustomSetPointNames);
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return ((EqualityComparer<Type>.Default.GetHashCode(EqualityContract) * -1521134295 + EqualityComparer<LevelerAutoOperationSetPoint>.Default.GetHashCode(DefaultSelectedSetPoint)) * -1521134295 + EqualityComparer<LevelerAutoOperationSetPoint>.Default.GetHashCode(SelectedSetPoint)) * -1521134295 + EqualityComparer<ConcurrentDictionary<LevelerAutoOperationSetPoint, string>>.Default.GetHashCode(CustomSetPointNames);
		}

		[CompilerGenerated]
		public virtual bool Equals(LogicalDeviceTagLeveler5SetPoints? other)
		{
			if ((object)this != other)
			{
				if ((object)other != null && EqualityContract == other.EqualityContract && EqualityComparer<LevelerAutoOperationSetPoint>.Default.Equals(DefaultSelectedSetPoint, other.DefaultSelectedSetPoint) && EqualityComparer<LevelerAutoOperationSetPoint>.Default.Equals(SelectedSetPoint, other.SelectedSetPoint))
				{
					return EqualityComparer<ConcurrentDictionary<LevelerAutoOperationSetPoint, string>>.Default.Equals(CustomSetPointNames, other.CustomSetPointNames);
				}
				return false;
			}
			return true;
		}

		[CompilerGenerated]
		protected LogicalDeviceTagLeveler5SetPoints(LogicalDeviceTagLeveler5SetPoints original)
		{
			DefaultSelectedSetPoint = original.DefaultSelectedSetPoint;
			SelectedSetPoint = original.SelectedSetPoint;
			CustomSetPointNames = original.CustomSetPointNames;
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	internal record LogicalDeviceTagTpms : Object, ILogicalDeviceSnapshotTag, ILogicalDeviceTag, IEquatable<ILogicalDeviceTag>, IJsonSerializerClass
	{
		[CompilerGenerated]
		protected virtual Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceTagTpms);
			}
		}

		[JsonProperty]
		public virtual string SerializerClass => ((MemberInfo)((Object)this).GetType()).Name;

		[JsonProperty]
		public TpmsGroupId ActiveTrailer
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		}

		[JsonIgnore]
		private const TpmsGroupId DefaultGroupId = TpmsGroupId.GroupId0;

		[JsonConstructor]
		public LogicalDeviceTagTpms(Nullable<TpmsGroupId> selectedTrailer)
		{
			ActiveTrailer = selectedTrailer.GetValueOrDefault();
		}

		public virtual bool Equals(ILogicalDeviceTag other)
		{
			return ((Object)this).Equals((object)other);
		}

		static LogicalDeviceTagTpms()
		{
			Type declaringType = ((MemberInfo)MethodBase.GetCurrentMethod()).DeclaringType;
			TypeRegistry.Register(((MemberInfo)declaringType).Name, declaringType);
		}

		public override string ToString()
		{
			return String.Format("ActiveTrailer: {0}", (object)ActiveTrailer);
		}

		public static LogicalDeviceTagTpms? GetTag(ILogicalDeviceTpms logicalDevice)
		{
			return Enumerable.FirstOrDefault<LogicalDeviceTagTpms>(((ILogicalDevice)logicalDevice).DeviceService.DeviceManager.TagManager.GetTags<LogicalDeviceTagTpms>((ILogicalDevice)logicalDevice));
		}

		public static void RemoveTag(ILogicalDeviceTpms logicalDevice, LogicalDeviceTagTpms tag)
		{
			((ILogicalDevice)logicalDevice).DeviceService.DeviceManager.TagManager.RemoveTag((ILogicalDeviceTag)(object)tag, (ILogicalDevice)logicalDevice);
		}

		public static void SetTag(ILogicalDeviceTpms logicalDevice, LogicalDeviceTagTpms tag)
		{
			LogicalDeviceTagManager tagManager = ((ILogicalDevice)logicalDevice).DeviceService.DeviceManager.TagManager;
			LogicalDeviceTagTpms tag2 = GetTag(logicalDevice);
			if ((object)tag != tag2)
			{
				if ((object)tag2 != null)
				{
					tagManager.RemoveTag((ILogicalDeviceTag)(object)tag2, (ILogicalDevice)logicalDevice);
				}
				tagManager.AddTag((ILogicalDeviceTag)(object)tag, (ILogicalDevice)logicalDevice);
			}
		}

		[CompilerGenerated]
		protected virtual bool PrintMembers(StringBuilder builder)
		{
			RuntimeHelpers.EnsureSufficientExecutionStack();
			builder.Append("SerializerClass = ");
			builder.Append((object)SerializerClass);
			builder.Append(", ActiveTrailer = ");
			builder.Append(((Object)ActiveTrailer/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return EqualityComparer<Type>.Default.GetHashCode(EqualityContract) * -1521134295 + EqualityComparer<TpmsGroupId>.Default.GetHashCode(ActiveTrailer);
		}

		[CompilerGenerated]
		public virtual bool Equals(LogicalDeviceTagTpms? other)
		{
			if ((object)this != other)
			{
				if ((object)other != null && EqualityContract == other.EqualityContract)
				{
					return EqualityComparer<TpmsGroupId>.Default.Equals(ActiveTrailer, other.ActiveTrailer);
				}
				return false;
			}
			return true;
		}

		[CompilerGenerated]
		protected LogicalDeviceTagTpms(LogicalDeviceTagTpms original)
		{
			ActiveTrailer = original.ActiveTrailer;
		}
	}
}
namespace OneControl.Devices
{
	public enum AllLightsGroupBehaviorCapability : Enum
	{
		FeatureNotSupported,
		Undefined,
		FeatureSupportedAndDisabled,
		FeatureSupportedAndEnabled
	}
	public static class AllLightsGroupBehaviorCapabilityExtensions : Object
	{
		private static readonly ConcurrentDictionary<AllLightsGroupBehaviorCapability, LogicalDeviceCapabilitySerializable> _capabilitySerializableCache = new ConcurrentDictionary<AllLightsGroupBehaviorCapability, LogicalDeviceCapabilitySerializable>();

		public static bool IsKnownAndSupported(this AllLightsGroupBehaviorCapability instance)
		{
			if (instance != AllLightsGroupBehaviorCapability.FeatureNotSupported)
			{
				return instance != AllLightsGroupBehaviorCapability.Undefined;
			}
			return false;
		}

		public static LogicalDeviceCapabilitySerializable ToCapabilitySerializable(this AllLightsGroupBehaviorCapability instance)
		{
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_002c: Expected O, but got Unknown
			LogicalDeviceCapabilitySerializable result = default(LogicalDeviceCapabilitySerializable);
			if (_capabilitySerializableCache.TryGetValue(instance, ref result))
			{
				return result;
			}
			result = new LogicalDeviceCapabilitySerializable(String.Format("{0}-{1}", (object)"AllLightsGroupBehaviorCapability", (object)instance));
			_capabilitySerializableCache[instance] = result;
			return result;
		}
	}
	public enum PhysicalSwitchTypeCapability : Enum
	{
		None = 0,
		Dimmable = 1,
		Toggle = 2,
		Momentary = 3,
		Unknown = 255
	}
	public static class PhysicalSwitchTypeCapabilityExtensions : Object
	{
		private static readonly ConcurrentDictionary<PhysicalSwitchTypeCapability, LogicalDeviceCapabilitySerializable> _capabilitySerializableCache = new ConcurrentDictionary<PhysicalSwitchTypeCapability, LogicalDeviceCapabilitySerializable>();

		public static bool IsKnownAndSupported(this PhysicalSwitchTypeCapability instance)
		{
			if (instance != PhysicalSwitchTypeCapability.None)
			{
				return instance != PhysicalSwitchTypeCapability.Unknown;
			}
			return false;
		}

		public static LogicalDeviceCapabilitySerializable ToCapabilitySerializable(this PhysicalSwitchTypeCapability instance)
		{
			//IL_0034: Unknown result type (might be due to invalid IL or missing references)
			//IL_003a: Expected O, but got Unknown
			//IL_0055: Unknown result type (might be due to invalid IL or missing references)
			//IL_005b: Expected O, but got Unknown
			LogicalDeviceCapabilitySerializable result = default(LogicalDeviceCapabilitySerializable);
			if (_capabilitySerializableCache.TryGetValue(instance, ref result))
			{
				return result;
			}
			switch (instance)
			{
			case PhysicalSwitchTypeCapability.None:
			case PhysicalSwitchTypeCapability.Dimmable:
			case PhysicalSwitchTypeCapability.Toggle:
			case PhysicalSwitchTypeCapability.Momentary:
				result = new LogicalDeviceCapabilitySerializable(String.Format("{0}-{1}", (object)"PhysicalSwitchTypeCapability", (object)instance));
				break;
			default:
				result = new LogicalDeviceCapabilitySerializable(String.Format("{0}-{1}", (object)"PhysicalSwitchTypeCapability", (object)PhysicalSwitchTypeCapability.Unknown));
				break;
			}
			_capabilitySerializableCache[instance] = result;
			return result;
		}
	}
	public enum SimulatedOnOffStyleLightCapability : Enum
	{
		NotSupported = 0,
		Undefined = 1,
		Disabled = 2,
		Enabled = 3,
		Unknown = 255
	}
	public static class SimulatedOnOffStyleLightCapabilityExtension : Object
	{
		private static readonly ConcurrentDictionary<SimulatedOnOffStyleLightCapability, LogicalDeviceCapabilitySerializable> _capabilitySerializableCache = new ConcurrentDictionary<SimulatedOnOffStyleLightCapability, LogicalDeviceCapabilitySerializable>();

		public static LogicalDeviceCapabilitySerializable ToCapabilitySerializable(this SimulatedOnOffStyleLightCapability instance)
		{
			//IL_0034: Unknown result type (might be due to invalid IL or missing references)
			//IL_003a: Expected O, but got Unknown
			//IL_0055: Unknown result type (might be due to invalid IL or missing references)
			//IL_005b: Expected O, but got Unknown
			LogicalDeviceCapabilitySerializable result = default(LogicalDeviceCapabilitySerializable);
			if (_capabilitySerializableCache.TryGetValue(instance, ref result))
			{
				return result;
			}
			switch (instance)
			{
			case SimulatedOnOffStyleLightCapability.NotSupported:
			case SimulatedOnOffStyleLightCapability.Undefined:
			case SimulatedOnOffStyleLightCapability.Disabled:
			case SimulatedOnOffStyleLightCapability.Enabled:
				result = new LogicalDeviceCapabilitySerializable(String.Format("{0}-{1}", (object)"SimulatedOnOffStyleLightCapability", (object)instance));
				break;
			default:
				result = new LogicalDeviceCapabilitySerializable(String.Format("{0}-{1}", (object)"SimulatedOnOffStyleLightCapability", (object)PhysicalSwitchTypeCapability.Unknown));
				break;
			}
			_capabilitySerializableCache[instance] = result;
			return result;
		}
	}
	public interface IChassisInfo : IDevicesCommon, INotifyPropertyChanged
	{
		ParkBrake ParkBreak { get; }

		IgnitionPowerSignal IgnitionPowerSignal { get; }
	}
	public class LogicalDeviceChassisInfo : LogicalDevice<LogicalDeviceChassisInfoStatus, ILogicalDeviceCapability>, IChassisInfo, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceMyRvLink
	{
		private ILogicalDevicePidFixedPoint _batteryVoltagePidCan;

		public ParkBrake ParkBreak => ((LogicalDevice<LogicalDeviceChassisInfoStatus, ILogicalDeviceCapability>)this).DeviceStatus.ParkBreak;

		public IgnitionPowerSignal IgnitionPowerSignal => ((LogicalDevice<LogicalDeviceChassisInfoStatus, ILogicalDeviceCapability>)this).DeviceStatus.IgnitionPowerSignal;

		public virtual LogicalDeviceExScope VoltageMeasurementBatteryPidScope => (LogicalDeviceExScope)2;

		public virtual ILogicalDevicePidFixedPoint VoltageMeasurementBatteryPid
		{
			get
			{
				//IL_0014: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Expected O, but got Unknown
				//IL_0020: Expected O, but got Unknown
				ILogicalDevicePidFixedPoint obj = _batteryVoltagePidCan;
				if (obj == null)
				{
					LogicalDevicePidFixedPoint val = new LogicalDevicePidFixedPoint((FixedPointType)1, (ILogicalDevice)(object)this, PID.BATTERY_VOLTAGE, (LogicalDeviceSessionType)0, (Func<ulong, bool>)null);
					ILogicalDevicePidFixedPoint val2 = (ILogicalDevicePidFixedPoint)val;
					_batteryVoltagePidCan = (ILogicalDevicePidFixedPoint)val;
					obj = val2;
				}
				return obj;
			}
		}

		public bool IsVoltagePidReadSupported => true;

		public LogicalDeviceChassisInfo(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceChassisInfoStatus(), (ILogicalDeviceCapability)new LogicalDeviceCapability(), service, isFunctionClassChangeable)
		{
		}//IL_0007: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Expected O, but got Unknown


		public override void OnDeviceStatusChanged()
		{
			base.OnDeviceStatusChanged();
			Log.Information<ILogicalDeviceId, ParkBrake, IgnitionPowerSignal>("Data Changed {LogicalId}: ParkBreak = {ParkBreak}, IgnitionPowerSignal = {IgnitionPowerSignal}", ((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId, ((LogicalDevice<LogicalDeviceChassisInfoStatus, ILogicalDeviceCapability>)this).DeviceStatus.ParkBreak, ((LogicalDevice<LogicalDeviceChassisInfoStatus, ILogicalDeviceCapability>)this).DeviceStatus.IgnitionPowerSignal);
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("ParkBreak");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("IgnitionPowerSignal");
		}

		public Task<float> ReadVoltageMeasurementAsync(CancellationToken cancellationToken)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return LogicalDeviceVoltageExtension.ReadVoltageMeasurementAsync(VoltageMeasurementBatteryPid, cancellationToken);
		}
	}
	public class LogicalDeviceChassisInfoFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 39)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceChassisInfo(logicalDeviceId, service);
		}
	}
	public enum ParkBrake : Enum
	{
		Unknown,
		Released,
		Engaged,
		Reserved
	}
	public enum IgnitionPowerSignal : Enum
	{
		Unknown,
		On,
		Off,
		Reserved
	}
	public enum TowableSignalLightState : Enum
	{
		Unknown,
		On,
		Off,
		Reserved
	}
	public class LogicalDeviceChassisInfoStatus : LogicalDeviceStatusPacketMutable, ILogicalDeviceStatus<LogicalDeviceChassisInfoStatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		private const int MinimumStatusPacketSize = 4;

		private const float VoltageConversionFactor = 16f;

		private const int ChassisInfoIndex = 0;

		private const int TowableInfoIndex = 1;

		private const int TowableBatteryVoltageIndex = 2;

		private const int TowableBrakeVoltageIndex = 3;

		public const int UnknownVoltageRaw = 255;

		public const float UnknownVoltage = -1f;

		private static readonly BitPositionValue ParkBrakeBitPosition = new BitPositionValue(3u, 0, 1);

		private static readonly BitPositionValue IgnitionPowerSignalBitPosition = new BitPositionValue(12u, 0, 1);

		private static readonly BitPositionValue TowableLeftTurnSignalBitPosition = new BitPositionValue(3u, 1, 1);

		private static readonly BitPositionValue TowableRightTurnSignalBitPosition = new BitPositionValue(12u, 1, 1);

		private static readonly BitPositionValue TowableRunningLightsSignalBitPosition = new BitPositionValue(48u, 1, 1);

		private static readonly BitPositionValue TowableBackupLightsSignalBitPosition = new BitPositionValue(192u, 1, 1);

		public ParkBrake ParkBreak => (ParkBrake)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(ParkBrakeBitPosition);

		public IgnitionPowerSignal IgnitionPowerSignal => (IgnitionPowerSignal)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(IgnitionPowerSignalBitPosition);

		public TowableSignalLightState TowableLeftTurnSignal
		{
			get
			{
				//IL_000a: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Size > 1)
				{
					return (TowableSignalLightState)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(TowableLeftTurnSignalBitPosition);
				}
				return TowableSignalLightState.Unknown;
			}
		}

		public TowableSignalLightState TowableRightTurnSignal
		{
			get
			{
				//IL_000a: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Size > 1)
				{
					return (TowableSignalLightState)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(TowableRightTurnSignalBitPosition);
				}
				return TowableSignalLightState.Unknown;
			}
		}

		public TowableSignalLightState TowableRunningLightsSignal
		{
			get
			{
				//IL_000a: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Size > 1)
				{
					return (TowableSignalLightState)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(TowableRunningLightsSignalBitPosition);
				}
				return TowableSignalLightState.Unknown;
			}
		}

		public TowableSignalLightState TowableBackupLightsSignal
		{
			get
			{
				//IL_000a: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Size > 1)
				{
					return (TowableSignalLightState)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(TowableBackupLightsSignalBitPosition);
				}
				return TowableSignalLightState.Unknown;
			}
		}

		public bool IsTowableBatteryVoltageValid
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Size > 2)
				{
					return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[2] != 255;
				}
				return false;
			}
		}

		public float TowableBatteryVoltage
		{
			get
			{
				if (!IsTowableBatteryVoltageValid)
				{
					return -1f;
				}
				return (float)(int)((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[2] / 16f;
			}
		}

		public bool IsTowableBrakeVoltageValid
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Size > 3)
				{
					return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3] != 255;
				}
				return false;
			}
		}

		public float TowableBrakeVoltageVoltage
		{
			get
			{
				if (!IsTowableBrakeVoltageValid)
				{
					return -1f;
				}
				return (float)(int)((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3] / 16f;
			}
		}

		public void SetParkBreak(ParkBrake parkBrake)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)parkBrake, ParkBrakeBitPosition);
		}

		public void SetIgnitionPowerSignal(IgnitionPowerSignal ignitionPowerSignal)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)ignitionPowerSignal, IgnitionPowerSignalBitPosition);
		}

		public void SetTowableLeftTurnSignal(TowableSignalLightState lightState)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)lightState, TowableLeftTurnSignalBitPosition);
		}

		public void SetTowableRightTurnSignal(TowableSignalLightState lightState)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)lightState, TowableRightTurnSignalBitPosition);
		}

		public void SetTowableRunningLightsSignal(TowableSignalLightState lightState)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)lightState, TowableRunningLightsSignalBitPosition);
		}

		public void SetTowableBackupLightsSignal(TowableSignalLightState lightState)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)lightState, TowableBackupLightsSignalBitPosition);
		}

		public void SetBatteryVoltage(float voltage)
		{
			byte b = (byte)(voltage * 16f);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b, 2);
		}

		public void SetBrakeVoltage(float voltage)
		{
			byte b = (byte)(voltage * 16f);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b, 3);
		}

		public LogicalDeviceChassisInfoStatus()
			: base(4u)
		{
		}

		public LogicalDeviceChassisInfoStatus(byte rawStatus, byte rawTowableStatus, byte rawTowableBatteryVoltage, byte rawTowableBrakeVoltage)
			: base(4u)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0] = rawStatus;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[1] = rawTowableStatus;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[2] = rawTowableBatteryVoltage;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3] = rawTowableBrakeVoltage;
		}

		public LogicalDeviceChassisInfoStatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceChassisInfoStatusSerializable(this);
		}
	}
	public interface ICloudGateway
	{
	}
	public interface ILogicalDeviceCloudGateway : ICloudGateway, ILogicalDeviceWithStatus<LogicalDeviceCloudGatewayStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceCloudGatewayStatus>, ILogicalDeviceMyRvLink, ILogicalDeviceIdsCan
	{
		SoftwareUpdateState SoftwareUpdateState { get; }

		Task<CommandResult> SendSoftwareUpdateAuthorizationAsync(CancellationToken cancelToken);
	}
	public interface ILogicalDeviceRemoteCloudGateway : ILogicalDeviceCloudGateway, ICloudGateway, ILogicalDeviceWithStatus<LogicalDeviceCloudGatewayStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceCloudGatewayStatus>, ILogicalDeviceMyRvLink, ILogicalDeviceIdsCan, ILogicalDeviceRemote
	{
	}
	public class LogicalDeviceCloudGateway : LogicalDevice<LogicalDeviceCloudGatewayStatus, ILogicalDeviceCapability>, ILogicalDeviceRemoteCloudGateway, ILogicalDeviceCloudGateway, ICloudGateway, ILogicalDeviceWithStatus<LogicalDeviceCloudGatewayStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceCloudGatewayStatus>, ILogicalDeviceMyRvLink, ILogicalDeviceIdsCan, ILogicalDeviceRemote, ILogicalDeviceSoftwareUpdateStatus
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ReadGatewayAssetId>d__13 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<string> <>t__builder;

			public LogicalDeviceCloudGateway <>4__this;

			public CancellationToken cancellationToken;

			private Task<string> <assetIdPart1>5__2;

			private Task<string> <assetIdPart2>5__3;

			private Task<string> <assetIdPart3>5__4;

			private TaskAwaiter<string[]> <>u__1;

			private void MoveNext()
			{
				//IL_0167: Expected O, but got Unknown
				//IL_018d: Expected O, but got Unknown
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Invalid comparison between Unknown and I4
				//IL_010c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0111: Unknown result type (might be due to invalid IL or missing references)
				//IL_0119: Unknown result type (might be due to invalid IL or missing references)
				//IL_007c: Unknown result type (might be due to invalid IL or missing references)
				//IL_008f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dc: Unknown result type (might be due to invalid IL or missing references)
				//IL_004c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Expected O, but got Unknown
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Expected O, but got Unknown
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0072: Expected O, but got Unknown
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_003a: Invalid comparison between Unknown and I4
				//IL_00f1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f3: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceCloudGateway logicalDeviceCloudGateway = <>4__this;
				string result;
				try
				{
					if (num == 0)
					{
						goto IL_0073;
					}
					LogicalDevicePidText val = default(LogicalDevicePidText);
					LogicalDevicePidText val2 = default(LogicalDevicePidText);
					LogicalDevicePidText val3 = default(LogicalDevicePidText);
					if (!String.IsNullOrEmpty(logicalDeviceCloudGateway.CachedAssetId))
					{
						result = logicalDeviceCloudGateway.CachedAssetId;
					}
					else
					{
						if ((int)((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceCloudGateway).ActiveConnection == 1 || (int)((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceCloudGateway).ActiveConnection == 3)
						{
							val = new LogicalDevicePidText((ILogicalDevice)(object)logicalDeviceCloudGateway, PID.CLOUD_GATEWAY_ASSET_ID_PART_1, (LogicalDeviceSessionType)0, (LogicalDevicePidTextEncoding)0, (Func<ulong, bool>)null);
							val2 = new LogicalDevicePidText((ILogicalDevice)(object)logicalDeviceCloudGateway, PID.CLOUD_GATEWAY_ASSET_ID_PART_2, (LogicalDeviceSessionType)0, (LogicalDevicePidTextEncoding)0, (Func<ulong, bool>)null);
							val3 = new LogicalDevicePidText((ILogicalDevice)(object)logicalDeviceCloudGateway, PID.CLOUD_GATEWAY_ASSET_ID_PART_3, (LogicalDeviceSessionType)0, (LogicalDevicePidTextEncoding)0, (Func<ulong, bool>)null);
							goto IL_0073;
						}
						result = null;
					}
					goto end_IL_000e;
					IL_0073:
					try
					{
						TaskAwaiter<string[]> val4;
						if (num != 0)
						{
							<assetIdPart1>5__2 = val.ReadTextAsync(cancellationToken);
							<assetIdPart2>5__3 = val2.ReadTextAsync(cancellationToken);
							<assetIdPart3>5__4 = val3.ReadTextAsync(cancellationToken);
							val4 = Task.WhenAll<string>(new Task<string>[3] { <assetIdPart1>5__2, <assetIdPart2>5__3, <assetIdPart3>5__4 }).GetAwaiter();
							if (!val4.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val4;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<string[]>, <ReadGatewayAssetId>d__13>(ref val4, ref this);
								return;
							}
						}
						else
						{
							val4 = <>u__1;
							<>u__1 = default(TaskAwaiter<string[]>);
							num = (<>1__state = -1);
						}
						val4.GetResult();
						result = (logicalDeviceCloudGateway.CachedAssetId = String.Concat(<assetIdPart1>5__2.Result, <assetIdPart2>5__3.Result, <assetIdPart3>5__4.Result));
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Error("LogicalDeviceCloudGateway", String.Concat("Unable to read K-Code ", ex2.Message), Array.Empty<object>());
						result = null;
					}
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceCloudGateway";

		protected string CachedAssetId;

		[field: CompilerGenerated]
		public RemoteOnline RemoteOnline
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteSoftwareUpdate RemoteSoftwareUpdate
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public override bool IsRemoteAccessAvailable
		{
			get
			{
				ILogicalDeviceRemoteManager remoteManager = ((LogicalDevice<ILogicalDeviceCapability>)(object)this).DeviceService.RemoteManager;
				if (remoteManager == null)
				{
					return false;
				}
				return remoteManager.IsRemoteAccessAvailable((ILogicalDeviceRemote)(object)this);
			}
		}

		public IRemoteChannelDefOnline RemoteOnlineChannel => RemoteOnline?.Channel;

		public SoftwareUpdateState SoftwareUpdateState
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_0006: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Expected I4, but got Unknown
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				LogicalDeviceActiveConnection activeConnection = ((LogicalDevice<ILogicalDeviceCapability>)(object)this).ActiveConnection;
				switch ((int)activeConnection)
				{
				case 1:
				case 3:
					return ((ILogicalProductStatus)((LogicalDevice<ILogicalDeviceCapability>)(object)this).Product).SoftwareUpdateStateLastKnown;
				case 2:
					return RemoteSoftwareUpdate.SoftwareUpdateState;
				default:
					return (SoftwareUpdateState)255;
				}
			}
		}

		public LogicalDeviceCloudGateway(ILogicalDeviceId logicalDeviceId, LogicalDeviceCloudGatewayStatus status, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, status, (ILogicalDeviceCapability)new LogicalDeviceCapability(), service, isFunctionClassChangeable)
		{
			//IL_0003: Unknown result type (might be due to invalid IL or missing references)
			//IL_0010: Expected O, but got Unknown
			RemoteOnline = new RemoteOnline((ILogicalDeviceRemote)(object)this, ((LogicalDevice<ILogicalDeviceCapability>)(object)this).RemoteChannels);
			RemoteSoftwareUpdate = new RemoteSoftwareUpdate((ILogicalDeviceRemote)(object)this, ((LogicalDevice<ILogicalDeviceCapability>)(object)this).RemoteChannels);
		}

		public LogicalDeviceCloudGateway(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: this(logicalDeviceId, new LogicalDeviceCloudGatewayStatus(), service, isFunctionClassChangeable)
		{
		}

		public override void OnDeviceOnlineChanged()
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0023: Expected I4, but got Unknown
			((LogicalDevice<ILogicalDeviceCapability>)(object)this).OnDeviceOnlineChanged();
			LogicalDeviceActiveConnection activeConnection = ((LogicalDevice<ILogicalDeviceCapability>)(object)this).ActiveConnection;
			switch ((int)activeConnection)
			{
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<string> ReadGatewayAssetId(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ReadGatewayAssetId>d__13 <ReadGatewayAssetId>d__ = default(<ReadGatewayAssetId>d__13);
			<ReadGatewayAssetId>d__.<>t__builder = AsyncTaskMethodBuilder<string>.Create();
			<ReadGatewayAssetId>d__.<>4__this = this;
			<ReadGatewayAssetId>d__.cancellationToken = cancellationToken;
			<ReadGatewayAssetId>d__.<>1__state = -1;
			<ReadGatewayAssetId>d__.<>t__builder.Start<<ReadGatewayAssetId>d__13>(ref <ReadGatewayAssetId>d__);
			return <ReadGatewayAssetId>d__.<>t__builder.Task;
		}

		public Task<CommandResult> SendSoftwareUpdateAuthorizationAsync(CancellationToken cancelToken)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001d: Expected I4, but got Unknown
			//IL_0025: Unknown result type (might be due to invalid IL or missing references)
			//IL_0032: Unknown result type (might be due to invalid IL or missing references)
			LogicalDeviceActiveConnection activeConnection = ((LogicalDevice<ILogicalDeviceCapability>)(object)this).ActiveConnection;
			switch ((int)activeConnection)
			{
			case 1:
			case 3:
				return ((LogicalDevice<ILogicalDeviceCapability>)(object)this).Product.SendSoftwareUpdateAuthorizationAsync(cancelToken);
			case 2:
				return RemoteSoftwareUpdate.SendSoftwareUpdateAuthorizationAsync(cancelToken);
			case 0:
				return Task.FromResult<CommandResult>((CommandResult)6);
			default:
				return Task.FromResult<CommandResult>((CommandResult)7);
			}
		}

		public override void Dispose(bool disposing)
		{
			RemoteOnline remoteOnline = RemoteOnline;
			if (remoteOnline != null)
			{
				((CommonDisposable)remoteOnline).TryDispose();
			}
			RemoteOnline = null;
			RemoteSoftwareUpdate remoteSoftwareUpdate = RemoteSoftwareUpdate;
			if (remoteSoftwareUpdate != null)
			{
				((CommonDisposable)remoteSoftwareUpdate).TryDispose();
			}
			RemoteSoftwareUpdate = null;
			base.Dispose(disposing);
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceCapability>)(object)this).LastReceivedNetworkStatus;
		}

		TRemoteChannelDef ILogicalDeviceRemote.GetRemoteChannelForChannelId<TRemoteChannelDef>(string channelId)
		{
			return ((LogicalDevice<ILogicalDeviceCapability>)(object)this).GetRemoteChannelForChannelId<TRemoteChannelDef>(channelId);
		}
	}
	public class LogicalDeviceCloudGatewayFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 29)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceCloudGateway(logicalDeviceId, service);
		}
	}
	public enum CloudConnectionStatus : Enum
	{
		NotConnected,
		Connected,
		Reading,
		Controlling
	}
	public class LogicalDeviceCloudGatewayStatus : LogicalDeviceStatusPacketMutable
	{
		private const BasicBitMask LanOnlineBitMask = (BasicBitMask)1;

		private const BasicBitMask InternetDetectedBitmask = (BasicBitMask)2;

		private static readonly BitPositionValue ConnectStatusBitPosition = new BitPositionValue(12u, 0, 1);

		public const int MinimumStatusPacketSize = 1;

		public const uint StatusByteIndex = 0u;

		private const int ConnectionStatusShift = 2;

		public bool IsCloudConnectedToLan => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)1);

		public bool IsCloudConnectedToWan => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)2);

		public CloudConnectionStatus CloudConnectionStatus => (CloudConnectionStatus)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(ConnectStatusBitPosition);

		public LogicalDeviceCloudGatewayStatus()
			: base(1u)
		{
		}

		internal void SetCloudConnectionStatus(CloudConnectionStatus cloudConnectionStatus)
		{
			//IL_0009: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0], ConnectStatusBitPosition);
		}

		internal void SetCloudConnectedToLan(bool connectedToLan)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)1, connectedToLan);
		}

		internal void SetCloudConnectedToWan(bool connectedToWan)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)2, connectedToWan);
		}
	}
	public sealed class DeviceCategory : Object, IEquatable<DeviceCategory>, IComparable<DeviceCategory>
	{
		public enum AppType : Enum
		{
			App,
			Awning,
			BedLift,
			Doors,
			DoorLock,
			Fan,
			Generator,
			Hvac,
			IrRemote,
			LandingGear,
			Leveler,
			Light,
			Router,
			Slide,
			Stabilizer,
			Tank,
			TireMonitor,
			TvLift,
			VentCover,
			MonitorPanel,
			Camera,
			PowerMonitor,
			TemperatureSensor,
			AwningSensor,
			LiquidPropane,
			SafetySystems,
			NetworkBridges,
			TextDevices,
			Unknown
		}

		public enum AppFunction : Enum
		{
			App,
			Fan,
			Hvac,
			IrRemote,
			Leveler,
			Light,
			RelayHBridge,
			Router,
			TankMonitor,
			TireMonitor,
			MonitorPanel,
			Camera,
			PowerMonitor,
			TemperatureSensor,
			AwningSensor,
			LiquidPropane,
			SafetySystems,
			NetworkBridges,
			TextDevices,
			DoorLock,
			Unknown
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass65_0 : Object
		{
			public string name;

			public Func<DeviceCategory, bool> <>9__0;

			internal bool <GetDeviceCategory>b__0(DeviceCategory category)
			{
				return category.Name.Equals(name);
			}
		}

		private readonly string _rawName;

		public static readonly DeviceCategory Awning = new DeviceCategory(AppType.Awning, AppFunction.RelayHBridge, (FUNCTION_CLASS)2, (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)2));

		public static readonly DeviceCategory Fan = new DeviceCategory(AppType.Fan, AppFunction.Fan, (FUNCTION_CLASS)28, (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => ((Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)13) || Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)28)) && IsRelayBasicLatching(deviceType)) || DEVICE_TYPE.op_Implicit(deviceType) == 37);

		public static readonly DeviceCategory Bedlift = new DeviceCategory(AppType.BedLift, AppFunction.RelayHBridge, "Bed Lifts", (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)12) && functionName.Name.Contains("Bed") && IsRelayHBridgeMomentary(deviceType));

		public static readonly DeviceCategory MonitorPanel = new DeviceCategory(AppType.MonitorPanel, AppFunction.MonitorPanel, (FUNCTION_CLASS)31, (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)31));

		public static readonly DeviceCategory Camera = new DeviceCategory(AppType.Camera, AppFunction.Camera, (FUNCTION_CLASS)32, (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)32));

		public static readonly DeviceCategory PowerMonitor = new DeviceCategory(AppType.PowerMonitor, AppFunction.PowerMonitor, (FUNCTION_CLASS)26, IsPowerMonitor);

		public static readonly DeviceCategory TemperatureSensor = new DeviceCategory(AppType.TemperatureSensor, AppFunction.TemperatureSensor, (FUNCTION_CLASS)25, (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => IsTemperatureSensor(deviceType));

		public static readonly DeviceCategory AwningSensor = new DeviceCategory(AppType.AwningSensor, AppFunction.AwningSensor, (FUNCTION_CLASS)33, (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => IsAwningSensor(deviceType));

		public static readonly DeviceCategory Doors = new DeviceCategory(AppType.Doors, AppFunction.RelayHBridge, (FUNCTION_CLASS)27, (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => (Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)27) || Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)3)) && IsRelayHBridgeMomentary(deviceType));

		public static readonly DeviceCategory DoorLock = new DeviceCategory(AppType.DoorLock, AppFunction.DoorLock, (FUNCTION_CLASS)3, (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)3) && IsDoorLock(deviceType));

		public static readonly DeviceCategory Generator = new DeviceCategory(AppType.Generator, AppFunction.RelayHBridge, (FUNCTION_CLASS)5, (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)5) && (IsRelayHBridgeMomentary(deviceType) || DEVICE_TYPE.op_Implicit(deviceType) == 24));

		public static readonly DeviceCategory Hvac = new DeviceCategory(AppType.Hvac, AppFunction.Hvac, (FUNCTION_CLASS)20, (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)20));

		public static readonly DeviceCategory IrRemote = new DeviceCategory(AppType.IrRemote, AppFunction.IrRemote, (FUNCTION_CLASS)19, (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)19) && Platform.IsPackageInstalled(IrRemotePackage));

		public static readonly DeviceCategory LandingGear = new DeviceCategory(AppType.LandingGear, AppFunction.RelayHBridge, (FUNCTION_CLASS)6, (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)6) && IsRelayHBridgeMomentary(deviceType));

		public static readonly DeviceCategory Leveler = new DeviceCategory(AppType.Leveler, AppFunction.Leveler, "Leveling", (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)7) && (DEVICE_TYPE.op_Implicit(deviceType) == 7 || DEVICE_TYPE.op_Implicit(deviceType) == 17 || DEVICE_TYPE.op_Implicit(deviceType) == 40 || DEVICE_TYPE.op_Implicit(deviceType) == 56));

		public static readonly DeviceCategory Light = new DeviceCategory(AppType.Light, AppFunction.Light, "Lighting", delegate(DEVICE_TYPE deviceType, FUNCTION_NAME functionName)
		{
			if (DEVICE_TYPE.op_Implicit(deviceType) == 13 || DEVICE_TYPE.op_Implicit(deviceType) == 20)
			{
				return true;
			}
			return IsRelayBasicLatching(deviceType) && Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)8);
		});

		public static readonly DeviceCategory MyRV = new DeviceCategory(AppType.App, AppFunction.App, "MyRV", (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => false);

		public static readonly DeviceCategory Slide = new DeviceCategory(AppType.Slide, AppFunction.RelayHBridge, "Slides", (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)10) || (Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)12) && FUNCTION_NAME.op_Implicit(functionName) == 316 && IsRelayHBridgeMomentary(deviceType)));

		public static readonly DeviceCategory Stabilizer = new DeviceCategory(AppType.Stabilizer, AppFunction.RelayHBridge, "Stabilizers", (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)24) && IsRelayHBridgeMomentary(deviceType));

		public static readonly DeviceCategory Tank = new DeviceCategory(AppType.Tank, AppFunction.TankMonitor, (FUNCTION_CLASS)31, (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)15) || Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)4) || Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)9) || (Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)21) && IsRelayBasicLatching(deviceType)) || (Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)11) && DEVICE_TYPE.op_Implicit(deviceType) == 10));

		public static readonly DeviceCategory TvLift = new DeviceCategory(AppType.TvLift, AppFunction.RelayHBridge, "TV Lifts", (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)12) && functionName.Name.Contains("TV") && IsRelayHBridgeMomentary(deviceType));

		public static readonly DeviceCategory Unknown = new DeviceCategory(AppType.Unknown, AppFunction.Unknown, "Unknown", (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)0) || Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)1) || DEVICE_TYPE.op_Implicit(deviceType) == 0);

		public static readonly DeviceCategory VentCover = new DeviceCategory(AppType.VentCover, AppFunction.RelayHBridge, "Vent Covers", (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => Enumerable.Contains<FUNCTION_CLASS>(FunctionNameExtension.GetFunctionClasses(functionName), (FUNCTION_CLASS)14) && IsRelayHBridgeMomentary(deviceType));

		public static readonly DeviceCategory Router = new DeviceCategory(AppType.Router, AppFunction.Router, "Router", (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => (int)FunctionClassExtension.Get(deviceType, functionName) == 29);

		public static readonly DeviceCategory LiquidPropane = new DeviceCategory(AppType.LiquidPropane, AppFunction.LiquidPropane, (FUNCTION_CLASS)35, (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => DEVICE_TYPE.op_Implicit(deviceType) == 10 && (int)FunctionClassExtension.Get(deviceType, functionName) == 35);

		public static readonly DeviceCategory SafetySystems = new DeviceCategory(AppType.SafetySystems, AppFunction.SafetySystems, (FUNCTION_CLASS)34, (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => (DEVICE_TYPE.op_Implicit(deviceType) == 48 && (int)FunctionClassExtension.Get(deviceType, functionName) == 34) || (DEVICE_TYPE.op_Implicit(deviceType) == 42 && (int)FunctionClassExtension.Get(deviceType, functionName) == 30));

		public static readonly DeviceCategory NetworkBridges = new DeviceCategory(AppType.NetworkBridges, AppFunction.NetworkBridges, (FUNCTION_CLASS)22, (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => (int)FunctionClassExtension.Get(deviceType, functionName) == 22);

		public static readonly DeviceCategory TextDevices = new DeviceCategory(AppType.TextDevices, AppFunction.TextDevices, (FUNCTION_CLASS)36, (DEVICE_TYPE deviceType, FUNCTION_NAME functionName) => (int)FunctionClassExtension.Get(deviceType, functionName) == 36);

		public static string IrRemotePackage => "com.idselectronics.linctab.app_remote";

		public static string MyRVPackage => "com.idselectronics.linctab.my_rv";

		[field: CompilerGenerated]
		public AppType Type
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public AppFunction Function
		{
			[CompilerGenerated]
			get;
		}

		public string Name => CommonLocalization.Localize(_rawName);

		[field: CompilerGenerated]
		public Func<DEVICE_TYPE, FUNCTION_NAME, bool> IsDeviceCategory
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			private set;
		}

		[field: CompilerGenerated]
		public string Icon
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public static List<DeviceCategory> SupportedApps
		{
			[CompilerGenerated]
			get;
		}

		private DeviceCategory(AppType type, AppFunction function, FUNCTION_CLASS functionClass, Func<DEVICE_TYPE, FUNCTION_NAME, bool> predicate)
			: this(type, function, FunctionClassExtension.GetName(functionClass), predicate)
		{
		}//IL_0003: Unknown result type (might be due to invalid IL or missing references)


		private DeviceCategory(AppType type, AppFunction function, string name, Func<DEVICE_TYPE, FUNCTION_NAME, bool> predicate)
		{
			Type = type;
			Function = function;
			_rawName = name;
			IsDeviceCategory = predicate;
			Icon = String.Concat("ic_app_", Name.ToLower().Replace(" ", "_"));
		}

		public static AppType GetSupportedDeepLinkAppType(AppType appType)
		{
			return appType switch
			{
				AppType.TireMonitor => AppType.SafetySystems, 
				AppType.Tank => AppType.LiquidPropane, 
				_ => appType, 
			};
		}

		private static bool IsPowerMonitor(DEVICE_TYPE deviceType, FUNCTION_NAME functionName)
		{
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_001d: Invalid comparison between Unknown and I4
			if (DEVICE_TYPE.op_Implicit(deviceType) != 46 && DEVICE_TYPE.op_Implicit(deviceType) != 49)
			{
				return (int)FunctionClassExtension.Get(deviceType, functionName) == 26;
			}
			return true;
		}

		public static bool IsTemperatureSensor(DEVICE_TYPE deviceType)
		{
			return DEVICE_TYPE.op_Implicit(deviceType) == 25;
		}

		public static bool IsAwningSensor(DEVICE_TYPE deviceType)
		{
			return DEVICE_TYPE.op_Implicit(deviceType) == 47;
		}

		public static bool IsRelayHBridgeMomentary(DEVICE_TYPE deviceType)
		{
			if (DEVICE_TYPE.op_Implicit(deviceType) != 6)
			{
				return DEVICE_TYPE.op_Implicit(deviceType) == 33;
			}
			return true;
		}

		public static bool IsDoorLock(DEVICE_TYPE deviceType)
		{
			return DEVICE_TYPE.op_Implicit(deviceType) == 51;
		}

		public static bool IsRelayBasicLatching(DEVICE_TYPE deviceType)
		{
			if (DEVICE_TYPE.op_Implicit(deviceType) != 3)
			{
				return DEVICE_TYPE.op_Implicit(deviceType) == 30;
			}
			return true;
		}

		public static DeviceCategory GetDeviceCategory(IDevice device)
		{
			//IL_0005: Unknown result type (might be due to invalid IL or missing references)
			//IL_000a: Unknown result type (might be due to invalid IL or missing references)
			Enumerator<DeviceCategory> enumerator = SupportedApps.GetEnumerator();
			try
			{
				while (enumerator.MoveNext())
				{
					DeviceCategory current = enumerator.Current;
					if (current.IsDeviceCategory.Invoke(((IUniqueDeviceInfo)device).DeviceType, device.FunctionName))
					{
						return current;
					}
				}
			}
			finally
			{
				((IDisposable)enumerator/*cast due to .constrained prefix*/).Dispose();
			}
			return Unknown;
		}

		public static DeviceCategory GetDeviceCategory(DEVICE_ID deviceId)
		{
			//IL_0005: Unknown result type (might be due to invalid IL or missing references)
			//IL_000a: Unknown result type (might be due to invalid IL or missing references)
			//IL_001b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0021: Unknown result type (might be due to invalid IL or missing references)
			Enumerator<DeviceCategory> enumerator = SupportedApps.GetEnumerator();
			try
			{
				while (enumerator.MoveNext())
				{
					DeviceCategory current = enumerator.Current;
					if (current.IsDeviceCategory.Invoke(deviceId.DeviceType, deviceId.FunctionName))
					{
						return current;
					}
				}
			}
			finally
			{
				((IDisposable)enumerator/*cast due to .constrained prefix*/).Dispose();
			}
			return Unknown;
		}

		public static DeviceCategory GetDeviceCategory(ILogicalDeviceId? logicalDeviceId)
		{
			//IL_000e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0013: Unknown result type (might be due to invalid IL or missing references)
			if (logicalDeviceId == null)
			{
				return Unknown;
			}
			Enumerator<DeviceCategory> enumerator = SupportedApps.GetEnumerator();
			try
			{
				while (enumerator.MoveNext())
				{
					DeviceCategory current = enumerator.Current;
					if (current.IsDeviceCategory.Invoke(logicalDeviceId.DeviceType, logicalDeviceId.FunctionName))
					{
						return current;
					}
				}
			}
			finally
			{
				((IDisposable)enumerator/*cast due to .constrained prefix*/).Dispose();
			}
			return Unknown;
		}

		public static DeviceCategory? GetDeviceCategory(string name)
		{
			<>c__DisplayClass65_0 CS$<>8__locals2 = new <>c__DisplayClass65_0();
			CS$<>8__locals2.name = name;
			IEnumerator<DeviceCategory> enumerator = Enumerable.Where<DeviceCategory>((IEnumerable<DeviceCategory>)(object)SupportedApps, (Func<DeviceCategory, bool>)((DeviceCategory category) => category.Name.Equals(CS$<>8__locals2.name))).GetEnumerator();
			try
			{
				if (((IEnumerator)enumerator).MoveNext())
				{
					return enumerator.Current;
				}
			}
			finally
			{
				if (enumerator != null)
				{
					((IDisposable)enumerator).Dispose();
				}
			}
			return Unknown;
		}

		public bool Equals(DeviceCategory other)
		{
			return Name == other.Name;
		}

		public int CompareTo(DeviceCategory other)
		{
			if (Name.Contains("MyRV") && !other.Name.Contains("MyRV"))
			{
				return -1;
			}
			if (other.Name.Contains("MyRV") && !Name.Contains("MyRV"))
			{
				return 1;
			}
			return String.Compare(Name, other.Name, (StringComparison)4);
		}

		static DeviceCategory()
		{
			List<DeviceCategory> obj = new List<DeviceCategory>();
			obj.Add(Awning);
			obj.Add(Bedlift);
			obj.Add(Doors);
			obj.Add(DoorLock);
			obj.Add(Fan);
			obj.Add(Generator);
			obj.Add(Hvac);
			obj.Add(IrRemote);
			obj.Add(LandingGear);
			obj.Add(Leveler);
			obj.Add(Light);
			obj.Add(MyRV);
			obj.Add(Router);
			obj.Add(Slide);
			obj.Add(Stabilizer);
			obj.Add(Tank);
			obj.Add(TvLift);
			obj.Add(VentCover);
			obj.Add(MonitorPanel);
			obj.Add(Camera);
			obj.Add(PowerMonitor);
			obj.Add(TemperatureSensor);
			obj.Add(AwningSensor);
			obj.Add(LiquidPropane);
			obj.Add(SafetySystems);
			obj.Add(NetworkBridges);
			obj.Add(TextDevices);
			SupportedApps = obj;
		}
	}
	public class EmbeddedVersion : Object
	{
		private const string LogTag = "EmbeddedVersion";

		private const int ExpectedStringSize = 7;

		private const int ExpectedVersionNumberSize = 5;

		private const char Deliminator = '-';

		private const int DeliminatorIndex = 0;

		private const int RevisionIndexWithDeliminator = 1;

		private const int RevisionIndexWithMinor = 0;

		private const int MinorRevisionIndex = 1;

		private const int DefaultVersionNumber = -1;

		private const char DefaultRevision = ' ';

		[field: CompilerGenerated]
		public int VersionNumber
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		}

		[field: CompilerGenerated]
		public char Revision
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		}

		[field: CompilerGenerated]
		public Nullable<char> MinorRevision
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		}

		[field: CompilerGenerated]
		public bool IsDefault
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		}

		public EmbeddedVersion()
		{
			//IL_0018: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			VersionNumber = -1;
			Revision = ' ';
			MinorRevision = default(Nullable<char>);
			IsDefault = true;
		}

		public EmbeddedVersion(int versionNumber, char revision, Nullable<char> revisionMinor = default(Nullable<char>))
		{
			//IL_0015: Unknown result type (might be due to invalid IL or missing references)
			VersionNumber = versionNumber;
			Revision = revision;
			MinorRevision = revisionMinor;
			IsDefault = false;
		}

		public static bool TryParse(byte[] bytes, out EmbeddedVersion embeddedVersion)
		{
			return TryParse(Encoding.ASCII.GetString(bytes), out embeddedVersion);
		}

		public static bool TryParse(string stringToParse, out EmbeddedVersion embeddedVersion)
		{
			//IL_00b2: Unknown result type (might be due to invalid IL or missing references)
			embeddedVersion = new EmbeddedVersion();
			try
			{
				stringToParse = stringToParse.Substring(0, 7);
			}
			catch (Object)
			{
				TaggedLog.Information("EmbeddedVersion", String.Format("Unable to parse embedded version, there aren't {0} valid characters", (object)7), Array.Empty<object>());
				return false;
			}
			try
			{
				int versionNumber = default(int);
				if (!Int32.TryParse(stringToParse.Substring(0, 5), ref versionNumber))
				{
					TaggedLog.Information("EmbeddedVersion", String.Format("Unable to parse embedded version, the first {0} characters aren't a valid int", (object)5), Array.Empty<object>());
					return false;
				}
				embeddedVersion.VersionNumber = versionNumber;
				string text = stringToParse.Substring(5, 2);
				if (text[0] == '-')
				{
					embeddedVersion.Revision = text[1];
				}
				else
				{
					embeddedVersion.Revision = text[0];
					embeddedVersion.MinorRevision = new Nullable<char>(text[1]);
				}
			}
			catch (Object)
			{
				TaggedLog.Information("EmbeddedVersion", "Unable to parse embedded version, an unexpected error occurred.", Array.Empty<object>());
				return false;
			}
			embeddedVersion.IsDefault = false;
			return true;
		}

		public override string ToString()
		{
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0014: Unknown result type (might be due to invalid IL or missing references)
			//IL_003a: Unknown result type (might be due to invalid IL or missing references)
			if (IsDefault)
			{
				return String.Empty;
			}
			if (MinorRevision.HasValue)
			{
				return String.Format("{0}{1}{2}", (object)VersionNumber, (object)Revision, (object)MinorRevision);
			}
			return String.Format("{0}{1}{2}", (object)VersionNumber, (object)(Char)45, (object)Revision);
		}
	}
	public static class LogicalDeviceServiceExtension : Object
	{
		[CompilerGenerated]
		private static class <>O : Object
		{
			public static LogicalDeviceExFactory <0>__LogicalDeviceExFactory;

			public static LogicalDeviceExFactory <1>__LogicalDeviceExFactory;

			public static LogicalDeviceExFactory <2>__LogicalDeviceExFactory;

			public static LogicalDeviceExFactory <3>__LogicalDeviceExFactory;
		}

		public static void RegisterAllLogicalDeviceFactories(this ILogicalDeviceService deviceService)
		{
			//IL_0150: Unknown result type (might be due to invalid IL or missing references)
			//IL_0155: Unknown result type (might be due to invalid IL or missing references)
			//IL_015b: Expected O, but got Unknown
			//IL_0171: Unknown result type (might be due to invalid IL or missing references)
			//IL_0176: Unknown result type (might be due to invalid IL or missing references)
			//IL_017c: Expected O, but got Unknown
			//IL_0192: Unknown result type (might be due to invalid IL or missing references)
			//IL_0197: Unknown result type (might be due to invalid IL or missing references)
			//IL_019d: Expected O, but got Unknown
			//IL_01b3: Unknown result type (might be due to invalid IL or missing references)
			//IL_01b8: Unknown result type (might be due to invalid IL or missing references)
			//IL_01be: Expected O, but got Unknown
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceUnknownRemoteFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceTextFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceOneControlTouchPanelFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceBrakingSystemFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceFanFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceCloudGatewayFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceBluetoothGatewayFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceTemperatureSensorFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceAwningSensorFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceAccessoryGatewayFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceChassisInfoFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceMonitorPanelFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceHourMeterFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceGeneratorGenieFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceLevelerFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceClimateZoneFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceLightDimmableFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceLightRgbFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceTankSensorFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceRelayHBridgeFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceRelayBasicFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceLightFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceRelayGeneratorFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceBatteryMonitorFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceDoorLockFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceEchoBrakeControlFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceReflashBootLoaderFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceLeveler5TouchpadFactory());
			deviceService.RegisterLogicalDeviceFactory((ILogicalDeviceFactory)(object)new LogicalDeviceFlicButtonFactory());
			object obj = <>O.<0>__LogicalDeviceExFactory;
			if (obj == null)
			{
				LogicalDeviceExFactory val = LogicalDeviceLightMasterSwitchControllableIdsCanEx.LogicalDeviceExFactory;
				<>O.<0>__LogicalDeviceExFactory = val;
				obj = (object)val;
			}
			deviceService.RegisterLogicalDeviceExFactory((LogicalDeviceExFactory)obj);
			object obj2 = <>O.<1>__LogicalDeviceExFactory;
			if (obj2 == null)
			{
				LogicalDeviceExFactory val2 = LogicalDeviceLightMasterSwitchControllableMyRvLinkEx.LogicalDeviceExFactory;
				<>O.<1>__LogicalDeviceExFactory = val2;
				obj2 = (object)val2;
			}
			deviceService.RegisterLogicalDeviceExFactory((LogicalDeviceExFactory)obj2);
			object obj3 = <>O.<2>__LogicalDeviceExFactory;
			if (obj3 == null)
			{
				LogicalDeviceExFactory val3 = LogicalDeviceRvKindEx.LogicalDeviceExFactory;
				<>O.<2>__LogicalDeviceExFactory = val3;
				obj3 = (object)val3;
			}
			deviceService.RegisterLogicalDeviceExFactory((LogicalDeviceExFactory)obj3);
			object obj4 = <>O.<3>__LogicalDeviceExFactory;
			if (obj4 == null)
			{
				LogicalDeviceExFactory val4 = LogicalDeviceExManifest.LogicalDeviceExFactory;
				<>O.<3>__LogicalDeviceExFactory = val4;
				obj4 = (object)val4;
			}
			deviceService.RegisterLogicalDeviceExFactory((LogicalDeviceExFactory)obj4);
			JsonSerializer.AutoRegisterJsonSerializersFromAssembly(Assembly.GetExecutingAssembly());
		}
	}
	public class FirmwareUpdateSim : Object
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <UpdateFirmwareAsync>d__16 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public IReadOnlyList<byte> data;

			public Func<ILogicalDeviceTransferProgress, bool> progressAck;

			public FirmwareUpdateSim <>4__this;

			public CancellationToken cancellationToken;

			public Dictionary<FirmwareUpdateOption, object> options;

			private Stopwatch <timer>5__2;

			private Random <random>5__3;

			private TaskAwaiter<FirmwareUpdateSupport> <>u__1;

			private TaskAwaiter <>u__2;

			private int <bytesSent>5__4;

			private void MoveNext()
			{
				//IL_036c: Expected O, but got Unknown
				//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00de: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e5: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c0: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c5: Unknown result type (might be due to invalid IL or missing references)
				//IL_01cd: Unknown result type (might be due to invalid IL or missing references)
				//IL_029d: Unknown result type (might be due to invalid IL or missing references)
				//IL_02a2: Unknown result type (might be due to invalid IL or missing references)
				//IL_02aa: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fc: Unknown result type (might be due to invalid IL or missing references)
				//IL_002d: Unknown result type (might be due to invalid IL or missing references)
				//IL_010a: Unknown result type (might be due to invalid IL or missing references)
				//IL_010c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				//IL_0171: Unknown result type (might be due to invalid IL or missing references)
				//IL_017b: Expected O, but got Unknown
				//IL_0181: Unknown result type (might be due to invalid IL or missing references)
				//IL_018b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0190: Unknown result type (might be due to invalid IL or missing references)
				//IL_0325: Unknown result type (might be due to invalid IL or missing references)
				//IL_0330: Unknown result type (might be due to invalid IL or missing references)
				//IL_033b: Unknown result type (might be due to invalid IL or missing references)
				//IL_034c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0351: Unknown result type (might be due to invalid IL or missing references)
				//IL_020d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0218: Unknown result type (might be due to invalid IL or missing references)
				//IL_0223: Unknown result type (might be due to invalid IL or missing references)
				//IL_0234: Unknown result type (might be due to invalid IL or missing references)
				//IL_0244: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a7: Unknown result type (might be due to invalid IL or missing references)
				//IL_0137: Unknown result type (might be due to invalid IL or missing references)
				//IL_0362: Unknown result type (might be due to invalid IL or missing references)
				//IL_025e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0268: Unknown result type (might be due to invalid IL or missing references)
				//IL_026d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0252: Unknown result type (might be due to invalid IL or missing references)
				//IL_009c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ab: Unknown result type (might be due to invalid IL or missing references)
				//IL_0094: Unknown result type (might be due to invalid IL or missing references)
				//IL_0282: Unknown result type (might be due to invalid IL or missing references)
				//IL_0284: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0154: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				FirmwareUpdateSim firmwareUpdateSim = <>4__this;
				try
				{
					TaskAwaiter<FirmwareUpdateSupport> val2;
					TaskAwaiter val;
					LogicalDeviceTransferProgress val3 = default(LogicalDeviceTransferProgress);
					int num2;
					FirmwareUpdateSupport result;
					switch (num)
					{
					default:
						if (data == null)
						{
							throw new ArgumentNullException("data");
						}
						if (progressAck == null)
						{
							throw new ArgumentNullException("progressAck");
						}
						if (((IReadOnlyCollection<byte>)(object)data).Count < 1024)
						{
							throw new FirmwareUpdateTooSmallException(firmwareUpdateSim.LogicalDevice, ((IReadOnlyCollection<byte>)(object)data).Count, (Exception)null);
						}
						if (((IReadOnlyCollection<byte>)(object)data).Count >= 2097152)
						{
							throw new FirmwareUpdateTooBigException(firmwareUpdateSim.LogicalDevice, ((IReadOnlyCollection<byte>)(object)data).Count, (Exception)null);
						}
						val2 = firmwareUpdateSim.TryGetFirmwareUpdateSupportAsync(cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<FirmwareUpdateSupport>, <UpdateFirmwareAsync>d__16>(ref val2, ref this);
							return;
						}
						goto IL_00f4;
					case 0:
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<FirmwareUpdateSupport>);
						num = (<>1__state = -1);
						goto IL_00f4;
					case 1:
						val = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_01dc;
					case 2:
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter);
							num = (<>1__state = -1);
							goto IL_02b9;
						}
						IL_02fe:
						if (<bytesSent>5__4 >= ((IReadOnlyCollection<byte>)(object)data).Count)
						{
							if (!progressAck.Invoke((ILogicalDeviceTransferProgress)(object)new LogicalDeviceTransferProgress((UInt48)((IReadOnlyCollection<byte>)(object)data).Count, (UInt48)firmwareUpdateSim._totalRetryCount, (UInt48)firmwareUpdateSim._currentCommandRetryCount, TimeSpan.FromMilliseconds((double)<timer>5__2.ElapsedMilliseconds))))
							{
								throw new OperationCanceledException();
							}
							break;
						}
						goto IL_01ef;
						IL_01ef:
						if (firmwareUpdateSim._currentCommandRetryCount != 0)
						{
							firmwareUpdateSim._totalRetryCount++;
						}
						((LogicalDeviceTransferProgress)(ref val3))..ctor((UInt48)<bytesSent>5__4, (UInt48)firmwareUpdateSim._totalRetryCount, (UInt48)firmwareUpdateSim._currentCommandRetryCount, TimeSpan.FromMilliseconds((double)<timer>5__2.ElapsedMilliseconds));
						if (!progressAck.Invoke((ILogicalDeviceTransferProgress)(object)val3))
						{
							throw new OperationCanceledException();
						}
						val = Task.Delay(200, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__2 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <UpdateFirmwareAsync>d__16>(ref val, ref this);
							return;
						}
						goto IL_02b9;
						IL_02b9:
						((TaskAwaiter)(ref val)).GetResult();
						num2 = <random>5__3.Next(100);
						firmwareUpdateSim._currentCommandRetryCount++;
						if (num2 <= 5)
						{
							goto IL_01ef;
						}
						firmwareUpdateSim._currentCommandRetryCount = 0;
						<bytesSent>5__4 += 2048;
						goto IL_02fe;
						IL_01dc:
						((TaskAwaiter)(ref val)).GetResult();
						<bytesSent>5__4 = 0;
						goto IL_02fe;
						IL_00f4:
						result = val2.GetResult();
						if (!FirmwareUpdateSupportEx.IsSupported(result))
						{
							throw new FirmwareUpdateNotSupportedException(firmwareUpdateSim.LogicalDevice, result, (Exception)null);
						}
						if (firmwareUpdateSim.RequireStartAddress)
						{
							if (options == null || options.Count == 0)
							{
								throw new FirmwareUpdateMissingRequiredOptionException(firmwareUpdateSim.LogicalDevice, (FirmwareUpdateOption)1, (Exception)null);
							}
							uint num3 = default(uint);
							if (!FirmwareUpdateOptionExtension.TryGetStartAddress((IReadOnlyDictionary<FirmwareUpdateOption, object>)(object)options, ref num3))
							{
								throw new FirmwareUpdateInvalidOptionException(firmwareUpdateSim.LogicalDevice, (FirmwareUpdateOption)1, (Exception)null);
							}
						}
						((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
						<timer>5__2 = Stopwatch.StartNew();
						<random>5__3 = new Random();
						val = Task.Delay(200, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <UpdateFirmwareAsync>d__16>(ref val, ref this);
							return;
						}
						goto IL_01dc;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<timer>5__2 = null;
					<random>5__3 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<timer>5__2 = null;
				<random>5__3 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private int _totalRetryCount;

		private int _currentCommandRetryCount;

		public const int SimBlockSize = 2048;

		public const int SimSendDelayTimeMs = 200;

		public const int SimMinBufferSize = 1024;

		public const int SimMaxBufferSize = 2097152;

		private const int ResendPercent = 5;

		[field: CompilerGenerated]
		public ILogicalDevice LogicalDevice
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public bool RequireStartAddress
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		} = true;

		public FirmwareUpdateSim(ILogicalDevice logicalDevice)
		{
			LogicalDevice = logicalDevice;
		}

		public Task<FirmwareUpdateSupport> TryGetFirmwareUpdateSupportAsync(CancellationToken cancelToken)
		{
			return Task.FromResult<FirmwareUpdateSupport>((FirmwareUpdateSupport)1);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task UpdateFirmwareAsync(IReadOnlyList<byte> data, Func<ILogicalDeviceTransferProgress, bool> progressAck, CancellationToken cancellationToken, Dictionary<FirmwareUpdateOption, object>? options = null)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<UpdateFirmwareAsync>d__16 <UpdateFirmwareAsync>d__ = default(<UpdateFirmwareAsync>d__16);
			<UpdateFirmwareAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<UpdateFirmwareAsync>d__.<>4__this = this;
			<UpdateFirmwareAsync>d__.data = data;
			<UpdateFirmwareAsync>d__.progressAck = progressAck;
			<UpdateFirmwareAsync>d__.cancellationToken = cancellationToken;
			<UpdateFirmwareAsync>d__.options = options;
			<UpdateFirmwareAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Start<<UpdateFirmwareAsync>d__16>(ref <UpdateFirmwareAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Task;
		}
	}
	public struct AutoStartDurationMode : ValueType
	{
		private readonly int value;

		public static AutoStartDurationMode Thirty = 30;

		public static AutoStartDurationMode Sixty = 60;

		public static AutoStartDurationMode Ninety = 90;

		public static AutoStartDurationMode OneHundredAndTwenty = 120;

		public static AutoStartDurationMode OneHundredAndEighty = 180;

		public AutoStartDurationMode(int givenValue)
		{
			value = givenValue;
		}

		public AutoStartDurationMode(AutoStartDurationMode givenValue)
		{
			value = givenValue.value;
		}

		public static implicit operator AutoStartDurationMode(int givenValue)
		{
			return new AutoStartDurationMode(givenValue);
		}

		public static implicit operator int(AutoStartDurationMode givenValue)
		{
			return givenValue.value;
		}

		public override string ToString()
		{
			return String.Format("{0} minutes", (object)(int)this);
		}

		public override bool Equals(object obj)
		{
			//IL_0009: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Expected I4, but got Unknown
			//IL_0022: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			if (obj is Int32)
			{
				int num = (int)(Int32)obj;
				return num == value;
			}
			if (obj is TimeSpan val)
			{
				return ((TimeSpan)(ref val)).TotalMinutes == (double)value;
			}
			return ((ValueType)(object)this).Equals(obj);
		}
	}
	public struct AutoStartLowVoltageMode : ValueType
	{
		private readonly float value;

		public static AutoStartLowVoltageMode Off = 0f;

		public static AutoStartLowVoltageMode Thirteen = 13f;

		public static AutoStartLowVoltageMode TwelvePointFive = 12.5f;

		public static AutoStartLowVoltageMode Twelve = 12f;

		public static AutoStartLowVoltageMode ElevenPointSeven = 11.7f;

		public static AutoStartLowVoltageMode ElevenPointFive = 11.5f;

		public static AutoStartLowVoltageMode Eleven = 11f;

		public static AutoStartLowVoltageMode TenPointFive = 10.5f;

		public AutoStartLowVoltageMode(float givenValue)
		{
			value = givenValue;
		}

		public AutoStartLowVoltageMode(AutoStartLowVoltageMode givenValue)
		{
			value = givenValue.value;
		}

		public static implicit operator AutoStartLowVoltageMode(float givenValue)
		{
			return new AutoStartLowVoltageMode(givenValue);
		}

		public static implicit operator float(AutoStartLowVoltageMode givenValue)
		{
			return givenValue.value;
		}

		public override string ToString()
		{
			return String.Format("{0} volts", (object)(float)this);
		}

		public override bool Equals(object obj)
		{
			//IL_0009: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Expected F4, but got Unknown
			if (obj is Single)
			{
				float num = (float)(Single)obj;
				return (double)Math.Abs(num - value) < 0.01;
			}
			return ((ValueType)(object)this).Equals(obj);
		}
	}
	public struct AutoStartOffTimeMode : ValueType
	{
		private readonly int value;

		public static AutoStartOffTimeMode Thirty = 30;

		public static AutoStartOffTimeMode Sixty = 60;

		public static AutoStartOffTimeMode Ninety = 90;

		public static AutoStartOffTimeMode OneHundredAndTwenty = 120;

		public static AutoStartOffTimeMode OneHundredAndEighty = 180;

		public AutoStartOffTimeMode(int givenValue)
		{
			value = givenValue;
		}

		public AutoStartOffTimeMode(AutoStartOffTimeMode givenValue)
		{
			value = givenValue.value;
		}

		public static implicit operator AutoStartOffTimeMode(int givenValue)
		{
			return new AutoStartOffTimeMode(givenValue);
		}

		public static implicit operator int(AutoStartOffTimeMode givenValue)
		{
			return givenValue.value;
		}

		public override string ToString()
		{
			return String.Format("{0} minutes", (object)(int)this);
		}

		public override bool Equals(object obj)
		{
			//IL_0009: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Expected I4, but got Unknown
			//IL_0022: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			if (obj is Int32)
			{
				int num = (int)(Int32)obj;
				return num == value;
			}
			if (obj is TimeSpan val)
			{
				return Math.Abs(((TimeSpan)(ref val)).TotalMinutes - (double)value) < 5E-324;
			}
			return ((ValueType)(object)this).Equals(obj);
		}
	}
	public class LogicalDeviceGeneratorGenie : LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>, ILogicalDeviceGeneratorGenieDirect, ILogicalDeviceGeneratorGenie, ILogicalDeviceGenerator, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IGenerator, IHourMeter, ILogicalDeviceWithCapability<ILogicalDeviceGeneratorGenieCapability>, ILogicalDeviceWithStatus<LogicalDeviceGeneratorGenieStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceGeneratorGenieStatus>, ILogicalDeviceCommandable<AutoStartLowVoltageMode>, ILogicalDeviceCommandable, ICommandable<AutoStartLowVoltageMode>, ILogicalDeviceCommandable<AutoStartDurationMode>, ICommandable<AutoStartDurationMode>, ILogicalDeviceCommandable<AutoStartOffTimeMode>, ICommandable<AutoStartOffTimeMode>, ILogicalDeviceSwitchable, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink, ILogicalDeviceGeneratorGenieRemote, ILogicalDeviceRemote, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement
	{
		[Serializable]
		[CompilerGenerated]
		private sealed class <>c : Object
		{
			public static readonly <>c <>9 = new <>c();

			public static Func<ILogicalDeviceClimateZone, bool> <>9__60_0;

			public static ValueToBool <>9__99_0;

			public static ValueFromBool <>9__99_1;

			public static Func<Task<CommandResult>, bool> <>9__156_0;

			public static Func<Task<CommandResult>, bool> <>9__157_0;

			internal bool <get_IsAutoRunOnTempAvailable>b__60_0(ILogicalDeviceClimateZone logicalDevice)
			{
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Invalid comparison between Unknown and I4
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Invalid comparison between Unknown and I4
				if (((ILogicalDevice)logicalDevice).LogicalId.FunctionName == FUNCTION_NAME.UNKNOWN || ((int)((IDevicesCommon)logicalDevice).ActiveConnection != 1 && (int)((IDevicesCommon)logicalDevice).ActiveConnection != 3))
				{
					return false;
				}
				return true;
			}

			internal bool <.ctor>b__99_0(FixedPointType fpConversion, ulong ulongValue)
			{
				ulong num = ulongValue & 0xFFFFFFFFu;
				bool flag = ((num != 0L && num != 2147483648u) ? true : false);
				Log.Debug(String.Format("PID Value of '{0:x}' converted to {1}", (object)num, (object)flag));
				return flag;
			}

			internal ulong <.ctor>b__99_1(FixedPointType fpConversion, bool boolValue)
			{
				//IL_000b: Unknown result type (might be due to invalid IL or missing references)
				ulong num = (boolValue ? FixedFloatExtension.ToFixedPointAsULong(fpConversion, 3f) : 2147483648u);
				Log.Debug(String.Format("PID Value of {0} converted to '{1:x}' ", (object)boolValue, (object)num));
				return num;
			}

			internal bool <TurnOnAsync>b__156_0(Task<CommandResult> t)
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Invalid comparison between Unknown and I4
				return (int)t.Result == 0;
			}

			internal bool <TurnOffAsync>b__157_0(Task<CommandResult> t)
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Invalid comparison between Unknown and I4
				return (int)t.Result == 0;
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass141_0 : Object
		{
			public LogicalDeviceGeneratorGenie <>4__this;

			public AutoStartLowVoltageMode option;

			internal Task <PerformCommand>b__0()
			{
				//IL_0016: Unknown result type (might be due to invalid IL or missing references)
				return <>4__this.GeneratorAutoStartLowVoltagePid.WriteFloatAsync((float)option, CancellationToken.None);
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass142_0 : Object
		{
			public LogicalDeviceGeneratorGenie <>4__this;

			public AutoStartDurationMode option;

			internal Task <PerformCommand>b__0()
			{
				//IL_0017: Unknown result type (might be due to invalid IL or missing references)
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				return ((ILogicalDevicePid<TimeSpan>)(object)<>4__this.GeneratorAutoRunDurationMinutesPid).WriteAsync(TimeSpan.FromMinutes((double)(int)option), CancellationToken.None);
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass143_0 : Object
		{
			public LogicalDeviceGeneratorGenie <>4__this;

			public AutoStartOffTimeMode option;

			internal Task <PerformCommand>b__0()
			{
				//IL_0017: Unknown result type (might be due to invalid IL or missing references)
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				return ((ILogicalDevicePid<TimeSpan>)(object)<>4__this.GeneratorAutoRunMinOffTimeMinutesPid).WriteAsync(TimeSpan.FromMinutes((double)(int)option), CancellationToken.None);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformCommand>d__141 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceGeneratorGenie <>4__this;

			public AutoStartLowVoltageMode option;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_009b: Expected O, but got Unknown
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				//IL_0091: Unknown result type (might be due to invalid IL or missing references)
				//IL_0096: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_005d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c0: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceGeneratorGenie logicalDeviceGeneratorGenie = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceGeneratorGenie.TryWritePid(new <>c__DisplayClass141_0
						{
							<>4__this = <>4__this,
							option = option
						}.<PerformCommand>b__0).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <PerformCommand>d__141>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformCommand>d__142 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceGeneratorGenie <>4__this;

			public AutoStartDurationMode option;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_009b: Expected O, but got Unknown
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				//IL_0091: Unknown result type (might be due to invalid IL or missing references)
				//IL_0096: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_005d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c0: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceGeneratorGenie logicalDeviceGeneratorGenie = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceGeneratorGenie.TryWritePid(new <>c__DisplayClass142_0
						{
							<>4__this = <>4__this,
							option = option
						}.<PerformCommand>b__0).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <PerformCommand>d__142>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformCommand>d__143 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceGeneratorGenie <>4__this;

			public AutoStartOffTimeMode option;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_009b: Expected O, but got Unknown
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				//IL_0091: Unknown result type (might be due to invalid IL or missing references)
				//IL_0096: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_005d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c0: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceGeneratorGenie logicalDeviceGeneratorGenie = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceGeneratorGenie.TryWritePid(new <>c__DisplayClass143_0
						{
							<>4__this = <>4__this,
							option = option
						}.<PerformCommand>b__0).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <PerformCommand>d__143>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendGeneratorOnePressOffCommandAsync>d__130 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceGeneratorGenie <>4__this;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0149: Expected O, but got Unknown
				//IL_0090: Unknown result type (might be due to invalid IL or missing references)
				//IL_0095: Unknown result type (might be due to invalid IL or missing references)
				//IL_009d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ae: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_011c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0121: Unknown result type (might be due to invalid IL or missing references)
				//IL_0129: Unknown result type (might be due to invalid IL or missing references)
				//IL_016e: Unknown result type (might be due to invalid IL or missing references)
				//IL_013a: Unknown result type (might be due to invalid IL or missing references)
				//IL_013f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0047: Unknown result type (might be due to invalid IL or missing references)
				//IL_004d: Invalid comparison between Unknown and I4
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0060: Unknown result type (might be due to invalid IL or missing references)
				//IL_0144: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ea: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ef: Unknown result type (might be due to invalid IL or missing references)
				//IL_0075: Unknown result type (might be due to invalid IL or missing references)
				//IL_0077: Unknown result type (might be due to invalid IL or missing references)
				//IL_0104: Unknown result type (might be due to invalid IL or missing references)
				//IL_0106: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceGeneratorGenie logicalDeviceGeneratorGenie = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_00ac;
					}
					if (num == 1)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_0138;
					}
					if (((CommonDisposableNotifyPropertyChanged)logicalDeviceGeneratorGenie).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceGeneratorGenie", String.Concat(((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)logicalDeviceGeneratorGenie).DeviceName, " Generator ExecuteCommand ignored as relay has been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else
					{
						if ((int)((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)logicalDeviceGeneratorGenie).ActiveConnection == 2)
						{
							val = logicalDeviceGeneratorGenie.RemoteOnePressSwitch.SendCommandSetSwitch(value: false).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendGeneratorOnePressOffCommandAsync>d__130>(ref val, ref this);
								return;
							}
							goto IL_00ac;
						}
						LogicalDeviceGeneratorGenieCommand logicalDeviceGeneratorGenieCommand = new LogicalDeviceGeneratorGenieCommand(GeneratorGenieCommand.Off);
						if (((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)logicalDeviceGeneratorGenie).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceGeneratorGenie) is IDirectCommandGeneratorGenie directCommandGeneratorGenie)
						{
							val = directCommandGeneratorGenie.SendDirectCommandGeneratorGenie(logicalDeviceGeneratorGenie, logicalDeviceGeneratorGenieCommand.ToGeneratorGenieCommand, CancellationToken.None).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendGeneratorOnePressOffCommandAsync>d__130>(ref val, ref this);
								return;
							}
							goto IL_0138;
						}
						result = (CommandResult)10;
					}
					goto end_IL_000e;
					IL_0138:
					result = val.GetResult();
					goto end_IL_000e;
					IL_00ac:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendGeneratorOnePressOnCommandAsync>d__129 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceGeneratorGenie <>4__this;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0149: Expected O, but got Unknown
				//IL_0090: Unknown result type (might be due to invalid IL or missing references)
				//IL_0095: Unknown result type (might be due to invalid IL or missing references)
				//IL_009d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ae: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_011c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0121: Unknown result type (might be due to invalid IL or missing references)
				//IL_0129: Unknown result type (might be due to invalid IL or missing references)
				//IL_016e: Unknown result type (might be due to invalid IL or missing references)
				//IL_013a: Unknown result type (might be due to invalid IL or missing references)
				//IL_013f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0047: Unknown result type (might be due to invalid IL or missing references)
				//IL_004d: Invalid comparison between Unknown and I4
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0060: Unknown result type (might be due to invalid IL or missing references)
				//IL_0144: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ea: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ef: Unknown result type (might be due to invalid IL or missing references)
				//IL_0075: Unknown result type (might be due to invalid IL or missing references)
				//IL_0077: Unknown result type (might be due to invalid IL or missing references)
				//IL_0104: Unknown result type (might be due to invalid IL or missing references)
				//IL_0106: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceGeneratorGenie logicalDeviceGeneratorGenie = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_00ac;
					}
					if (num == 1)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_0138;
					}
					if (((CommonDisposableNotifyPropertyChanged)logicalDeviceGeneratorGenie).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceGeneratorGenie", String.Concat(((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)logicalDeviceGeneratorGenie).DeviceName, " Generator ExecuteCommand ignored as relay has been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else
					{
						if ((int)((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)logicalDeviceGeneratorGenie).ActiveConnection == 2)
						{
							val = logicalDeviceGeneratorGenie.RemoteOnePressSwitch.SendCommandSetSwitch(value: true).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendGeneratorOnePressOnCommandAsync>d__129>(ref val, ref this);
								return;
							}
							goto IL_00ac;
						}
						LogicalDeviceGeneratorGenieCommand logicalDeviceGeneratorGenieCommand = new LogicalDeviceGeneratorGenieCommand(GeneratorGenieCommand.On);
						if (((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)logicalDeviceGeneratorGenie).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceGeneratorGenie) is IDirectCommandGeneratorGenie directCommandGeneratorGenie)
						{
							val = directCommandGeneratorGenie.SendDirectCommandGeneratorGenie(logicalDeviceGeneratorGenie, logicalDeviceGeneratorGenieCommand.ToGeneratorGenieCommand, CancellationToken.None).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendGeneratorOnePressOnCommandAsync>d__129>(ref val, ref this);
								return;
							}
							goto IL_0138;
						}
						result = (CommandResult)10;
					}
					goto end_IL_000e;
					IL_0138:
					result = val.GetResult();
					goto end_IL_000e;
					IL_00ac:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryWritePid>d__144 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public Func<Task> writePidFuncAsync;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_009d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ac: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b5: Expected O, but got Unknown
				//IL_00da: Unknown result type (might be due to invalid IL or missing references)
				//IL_004b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0050: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_0018: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b0: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				CommandResult result;
				try
				{
					try
					{
						TaskAwaiter val;
						if (num != 0)
						{
							val = writePidFuncAsync.Invoke().GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <TryWritePid>d__144>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val)).GetResult();
					}
					catch (PhysicalDeviceNotFoundException)
					{
						result = (CommandResult)6;
						goto end_IL_0007;
					}
					catch (object obj) when (((Func<bool>)delegate
					{
						// Could not convert BlockContainer to single expression
						object obj2 = ((obj is LogicalDevicePidException) ? obj : null);
						System.Runtime.CompilerServices.Unsafe.SkipInit(out int result2);
						if (obj2 == null)
						{
							result2 = 0;
						}
						else
						{
							LogicalDevicePidException ex2 = (LogicalDevicePidException)obj2;
							result2 = ((ex2 is LogicalDevicePidValueWriteNotSupportedException || ex2 is LogicalDevicePidNotSupportedException) ? 1 : 0);
						}
						return (byte)result2 != 0;
					}).Invoke())
					{
						result = (CommandResult)10;
						goto end_IL_0007;
					}
					catch (LogicalDevicePidCanceledException)
					{
						result = (CommandResult)1;
						goto end_IL_0007;
					}
					catch (LogicalDevicePidTimeoutException)
					{
						result = (CommandResult)5;
						goto end_IL_0007;
					}
					catch (Exception)
					{
						result = (CommandResult)7;
						goto end_IL_0007;
					}
					result = (CommandResult)0;
					end_IL_0007:;
				}
				catch (Exception ex6)
				{
					Exception exception = ex6;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceGeneratorGenie";

		protected RemoteCommandControl RemoteCommandControl = new RemoteCommandControl();

		private CancellationTokenSource _commandCancelSource = new CancellationTokenSource();

		public const ulong GeneratorAutoStartHiTempCelsiusFixedPointValueBitmask = 4294967295uL;

		public const ulong GeneratorAutoStartHiTempCelsiusDisabled = 2147483648uL;

		public const float GeneratorAutoStartHiTempCelsiusDefaultDifferental = 3f;

		private const uint DebugUpdateDeviceStatusChangedThrottleTimeMs = 20000u;

		private readonly Stopwatch _debugUpdateDeviceStatusChangedThrottleTimer = Stopwatch.StartNew();

		private uint _debugUpdateDeviceStatusChangedThrottleCount;

		private const string HourMeterNotifyPropertySourceKey = "HourMeterPropertySource";

		private IHourMeter _hourMeter;

		private NotifyPropertyChangedProxySource _hourMeterPropertyChangedSource;

		private ILogicalDevicePidFixedPoint _batteryVoltagePidCan;

		[field: CompilerGenerated]
		public RemoteOnline RemoteOnline
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteGeneratorState RemoteState
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteGeneratorOnePressSwitch RemoteOnePressSwitch
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteGeneratorTemperatureFahrenheit RemoteTemperature
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteGeneratorVoltage RemoteVoltage
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteGeneratorQuietHoursActive RemoteQuietHoursActive
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public bool IsTemperatureSupported => ((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.IsTemperatureSupported;

		public bool IsTemperatureSensorValid => ((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.IsTemperatureSensorValid;

		public float TemperatureFahrenheit => ((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.TemperatureFahrenheit;

		public bool IsBatteryVoltageSupported => true;

		public float BatteryVoltage => ((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.BatteryVoltage;

		public bool IsVoltagePidReadSupported => true;

		public bool IsQuietHoursSupported => true;

		public bool QuietHoursActive => ((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.QuietHoursActive;

		[field: CompilerGenerated]
		public ILogicalDevicePidBool GeneratorQuietHoursEnable
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan GeneratorQuietHoursStartTimePid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan GeneratorQuietHoursEndTimePid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public bool IsAutoRunSupported => true;

		public bool IsAutoRunOnTempSupported => ((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).DeviceCapability.IsAutoStartOnTempDifferentalSupported;

		public bool IsAutoRunOnTempAvailable
		{
			get
			{
				if (!IsAutoRunOnTempSupported)
				{
					return false;
				}
				ILogicalDeviceManager deviceManager = ((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).DeviceService.DeviceManager;
				if (deviceManager == null)
				{
					return false;
				}
				if (deviceManager.FindLogicalDevices<ILogicalDeviceClimateZone>((Func<ILogicalDeviceClimateZone, bool>)((ILogicalDeviceClimateZone logicalDevice) => (((ILogicalDevice)logicalDevice).LogicalId.FunctionName != FUNCTION_NAME.UNKNOWN && ((int)((IDevicesCommon)logicalDevice).ActiveConnection == 1 || (int)((IDevicesCommon)logicalDevice).ActiveConnection == 3)) ? true : false)).Count <= 0)
				{
					return false;
				}
				return IsAutoRunOnTempSupported;
			}
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidFixedPoint GeneratorAutoStartLowVoltagePid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan GeneratorAutoRunDurationMinutesPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan GeneratorAutoRunMinOffTimeMinutesPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidFixedPointBool GeneratorAutoStartHiTempCelicusPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan HourMeterLastMaintenanceTimePid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan HourMeterMaintenancePeriodSecPid
		{
			[CompilerGenerated]
			get;
		}

		public ILogicalDevicePidMap<string> CumminsOnanGeneratorFaultCode
		{
			get
			{
				if (((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).DeviceCapability.GeneratorType != GeneratorType.CumminsOnan)
				{
					return CumminsOnanGeneratorFaultCodeStub;
				}
				return CumminsOnanGeneratorFaultCodeReal;
			}
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidMap<string> CumminsOnanGeneratorFaultCodeReal
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidMap<string> CumminsOnanGeneratorFaultCodeStub
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public GeneratorType GeneratorType => ((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).DeviceCapability.GeneratorType;

		[NotifyPropertyChangedProxy("HourMeterPropertySource", "ActiveConnection", "HasHourMeter")]
		public bool HasHourMeter
		{
			get
			{
				//IL_000d: Unknown result type (might be due to invalid IL or missing references)
				IHourMeter hourMeter = GetHourMeter();
				return hourMeter != null && (int)((IDevicesCommon)hourMeter).ActiveConnection != 0;
			}
		}

		[NotifyPropertyChangedProxy("HourMeterPropertySource", "Error")]
		public bool Error => GetHourMeter()?.Error ?? false;

		[NotifyPropertyChangedProxy("HourMeterPropertySource", "MaintenancePastDue")]
		public bool MaintenancePastDue => GetHourMeter()?.MaintenancePastDue ?? false;

		[NotifyPropertyChangedProxy("HourMeterPropertySource", "MaintenanceDue")]
		public bool MaintenanceDue => GetHourMeter()?.MaintenanceDue ?? false;

		[NotifyPropertyChangedProxy("HourMeterPropertySource", "Running")]
		public bool Running => GetHourMeter()?.Running ?? false;

		[NotifyPropertyChangedProxy("HourMeterPropertySource", "OperatingSeconds")]
		public ulong OperatingSeconds => GetHourMeter()?.OperatingSeconds ?? 0;

		public bool IsHourMeterSupported => true;

		public GeneratorState GeneratorCurrentState
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if ((int)((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).ActiveConnection == 0)
				{
					return GeneratorState.Offline;
				}
				return ((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.State;
			}
		}

		public bool IsGeneratorOnePressCommandsSupported => true;

		public LogicalDeviceExScope VoltageMeasurementBatteryPidScope => (LogicalDeviceExScope)2;

		public virtual ILogicalDevicePidFixedPoint VoltageMeasurementBatteryPid
		{
			get
			{
				//IL_0014: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Expected O, but got Unknown
				//IL_0020: Expected O, but got Unknown
				ILogicalDevicePidFixedPoint obj = _batteryVoltagePidCan;
				if (obj == null)
				{
					LogicalDevicePidFixedPoint val = new LogicalDevicePidFixedPoint((FixedPointType)1, (ILogicalDevice)(object)this, PID.BATTERY_VOLTAGE, (LogicalDeviceSessionType)0, (Func<ulong, bool>)null);
					ILogicalDevicePidFixedPoint val2 = (ILogicalDevicePidFixedPoint)val;
					_batteryVoltagePidCan = (ILogicalDevicePidFixedPoint)val;
					obj = val2;
				}
				return obj;
			}
		}

		public override bool IsRemoteAccessAvailable
		{
			get
			{
				ILogicalDeviceRemoteManager remoteManager = ((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).DeviceService.RemoteManager;
				if (remoteManager == null)
				{
					return false;
				}
				return remoteManager.IsRemoteAccessAvailable((ILogicalDeviceRemote)(object)this, (IRemoteChannelDef)(object)RemoteOnline?.Channel);
			}
		}

		public IRemoteChannelDefOnline RemoteOnlineChannel => RemoteOnline?.Channel;

		public bool On => GeneratorCurrentState != GeneratorState.Off;

		public bool IsCurrentlyOn
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus).HasData)
				{
					return ((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.State != GeneratorState.Off;
				}
				return false;
			}
		}

		public bool IsMasterSwitchControllable => false;

		public SwitchTransition SwitchInTransition => SwitchTransition.Unknown;

		public SwitchUsage UsedFor => SwitchUsage.Generator;

		protected string GeneratorFaultCodeMapToString(ulong code)
		{
			if (((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).DeviceCapability.GeneratorType == GeneratorType.CumminsOnan)
			{
				if (code <= 58)
				{
					switch (code)
					{
					case 2uL:
						return "Oil pressure cutoff switch did not open. Add oil if low, drain oil if high.";
					case 4uL:
						return "Cranking exceeded 30 seconds without engine starting. Check fuel, LPG, spark plug, air filter, fuel fittings, replace oil.";
					}
					ulong num = code - 12;
					if (num <= 46)
					{
						switch (num)
						{
						case 0uL:
							return "Generator is unable to maintain rated voltage. See dealer for service.";
						case 1uL:
							return "Generator is unable to maintain rated voltage. Reduce load to resolve.";
						case 2uL:
							return "Engine governor is unable to maintain rated frequency. See dealer for service.";
						case 3uL:
							return "Engine governor is unable to maintain rated frequency. Reduce load to resolve.";
						case 7uL:
							return "Sensed an open or shorted circuit. See dealer for service.";
						case 10uL:
							return "Duration of operation is near full - duty cycle beyond design limit. Reduce load, check air filter, and check exhaust system.";
						case 15uL:
							return "Unable to sense output voltage. See dealer for service.";
						case 17uL:
							return "Voltage across the battery system is greater than 19V. Check battery.";
						case 19uL:
							return "Engine Speed is > 3400 RPM. See dealer for service.";
						case 20uL:
							return "Cranking speed is < 180RPM for more than 2 seconds.  Check battery and replace engine oil.";
						case 23uL:
							return "EEPROM error occurred during self test. See dealer for service.";
						case 24uL:
							return "Engine stopped without receiving a command.  Check fuel, LPG, Spark Plugs, Air Filter, Mechanical Damage.";
						case 25uL:
							return "The Frequency / RPM ratio is wrong. See dealer for service.";
						case 26uL:
							return "Low power factor loads  Reduce load and check appliances";
						case 29uL:
							return "Unable to sense field or output voltage. See dealer for service.";
						case 30uL:
							return "ROM error occurred during self - test. See dealer for service.";
						case 31uL:
							return "RAM error occurred during self - test. See dealer for service.";
						case 33uL:
							return "Unable to sense quadrature frequency. See dealer for service.";
						case 35uL:
							return "Unable to sense ignition. See dealer for service.";
						case 36uL:
							return "Unable to sense field voltage. See dealer for service.";
						case 39uL:
							return "General Microprocessor malfunction. See dealer for service.";
						case 40uL:
							return "Open or short circuit in the fuel injector. See dealer for service.";
						case 42uL:
							return "Open or short circuit in the MAT sender. See dealer for service.";
						case 44uL:
							return "Open or short circuit in the MAP sender. See dealer for service.";
						case 45uL:
							return "Priming exceeded 3 minutes  Check control switch";
						case 46uL:
							return "Exhaust Gas Temperature(EGT) reached 650C(1202F) for 2 seconds when the generator was running. See dealer for service.";
						}
					}
				}
				else
				{
					switch (code)
					{
					case 81uL:
						return "EGT fell below 60C(140F) for 2 minutes when the generator was running or the EGT is not above 60C(140F) within 2 minutes of starting. See dealer for service.";
					case 82uL:
						return "EGT reads 1000C(1832F) for 1 second when the generator was running or during startup. See dealer for service.";
					case 65534uL:
						return "Generator circuit breaker is OFF, or tripped due to short circuit or overload. Check breaker";
					case 65535uL:
						return "Generator is operating in Engine Run Only(ERO) mode due to a faulty generator. See dealer for service.";
					}
				}
				return "";
			}
			return "";
		}

		public LogicalDeviceGeneratorGenie(ILogicalDeviceId logicalDeviceId, ILogicalDeviceGeneratorGenieCapability generatorGenieCapability, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceGeneratorGenieStatus(), generatorGenieCapability, service, isFunctionClassChangeable)
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Expected O, but got Unknown
			//IL_003b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0045: Expected O, but got Unknown
			//IL_004f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0059: Expected O, but got Unknown
			//IL_0111: Unknown result type (might be due to invalid IL or missing references)
			//IL_011b: Expected O, but got Unknown
			//IL_0125: Unknown result type (might be due to invalid IL or missing references)
			//IL_012f: Expected O, but got Unknown
			//IL_0139: Unknown result type (might be due to invalid IL or missing references)
			//IL_0143: Expected O, but got Unknown
			//IL_014d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0157: Expected O, but got Unknown
			//IL_0161: Unknown result type (might be due to invalid IL or missing references)
			//IL_016b: Expected O, but got Unknown
			//IL_0175: Unknown result type (might be due to invalid IL or missing references)
			//IL_017f: Expected O, but got Unknown
			//IL_019c: Unknown result type (might be due to invalid IL or missing references)
			//IL_01a1: Unknown result type (might be due to invalid IL or missing references)
			//IL_01a7: Expected O, but got Unknown
			//IL_01c7: Unknown result type (might be due to invalid IL or missing references)
			//IL_01d1: Expected O, but got Unknown
			//IL_01bb: Unknown result type (might be due to invalid IL or missing references)
			//IL_01c0: Unknown result type (might be due to invalid IL or missing references)
			//IL_01c6: Expected O, but got Unknown
			HourMeterLastMaintenanceTimePid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidTimeSpan((LogicalDevicePidTimeSpanPrecision)2, (ILogicalDevice)(object)this, PID.LAST_MAINTENANCE_TIME_SEC, (LogicalDeviceSessionType)2, (Func<ulong, bool>)null);
			HourMeterMaintenancePeriodSecPid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidTimeSpan((LogicalDevicePidTimeSpanPrecision)2, (ILogicalDevice)(object)this, PID.MAINTENANCE_PERIOD_SEC, (LogicalDeviceSessionType)2, (Func<ulong, bool>)null);
			RemoteOnline = new RemoteOnline((ILogicalDeviceRemote)(object)this, ((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).RemoteChannels);
			RemoteState = new RemoteGeneratorState(this, ((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).RemoteChannels);
			RemoteOnePressSwitch = new RemoteGeneratorOnePressSwitch(this, RemoteCommandControl, ((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).RemoteChannels);
			RemoteTemperature = new RemoteGeneratorTemperatureFahrenheit(this, ((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).RemoteChannels);
			RemoteVoltage = new RemoteGeneratorVoltage(this, ((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).RemoteChannels);
			RemoteQuietHoursActive = new RemoteGeneratorQuietHoursActive(this, ((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).RemoteChannels);
			CumminsOnanGeneratorFaultCodeReal = (ILogicalDevicePidMap<string>)(object)new LogicalDevicePidMap<string>((Func<ulong, string>)GeneratorFaultCodeMapToString, (ILogicalDevice)(object)this, PID.CUMMINS_ONAN_GENERATOR_FAULT_CODE, (LogicalDeviceSessionType)0, (Func<ulong, bool>)null);
			CumminsOnanGeneratorFaultCodeStub = (ILogicalDevicePidMap<string>)(object)new LogicalDevicePidMapStub<string>(0uL, (Func<ulong, string>)GeneratorFaultCodeMapToString, (ILogicalDevice)(object)this, PID.CUMMINS_ONAN_GENERATOR_FAULT_CODE);
			GeneratorQuietHoursEnable = (ILogicalDevicePidBool)new LogicalDevicePidBool((ILogicalDevice)(object)this, PID.GENERATOR_QUIET_HOURS_ENABLED, (LogicalDeviceSessionType)2);
			GeneratorQuietHoursStartTimePid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidTimeSpan((LogicalDevicePidTimeSpanPrecision)0, (ILogicalDevice)(object)this, PID.GENERATOR_QUIET_HOURS_START_TIME, (LogicalDeviceSessionType)2, (Func<ulong, bool>)null);
			GeneratorQuietHoursEndTimePid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidTimeSpan((LogicalDevicePidTimeSpanPrecision)0, (ILogicalDevice)(object)this, PID.GENERATOR_QUIET_HOURS_END_TIME, (LogicalDeviceSessionType)2, (Func<ulong, bool>)null);
			GeneratorAutoStartLowVoltagePid = (ILogicalDevicePidFixedPoint)new LogicalDevicePidFixedPoint((FixedPointType)1, (ILogicalDevice)(object)this, PID.GENERATOR_AUTO_START_LOW_VOLTAGE, (LogicalDeviceSessionType)2, (Func<ulong, bool>)null);
			GeneratorAutoRunDurationMinutesPid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidTimeSpan((LogicalDevicePidTimeSpanPrecision)1, (ILogicalDevice)(object)this, PID.GENERATOR_AUTO_RUN_DURATION_MINUTES, (LogicalDeviceSessionType)2, (Func<ulong, bool>)null);
			GeneratorAutoRunMinOffTimeMinutesPid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidTimeSpan((LogicalDevicePidTimeSpanPrecision)1, (ILogicalDevice)(object)this, PID.GENERATOR_AUTO_RUN_MIN_OFF_TIME_MINUTES, (LogicalDeviceSessionType)2, (Func<ulong, bool>)null);
			PID gENERATOR_AUTO_START_HI_TEMP_C = PID.GENERATOR_AUTO_START_HI_TEMP_C;
			object obj = <>c.<>9__99_0;
			if (obj == null)
			{
				ValueToBool val = delegate(FixedPointType fpConversion, ulong ulongValue)
				{
					ulong num = ulongValue & 0xFFFFFFFFu;
					bool flag = ((num != 0L && num != 2147483648u) ? true : false);
					Log.Debug(String.Format("PID Value of '{0:x}' converted to {1}", (object)num, (object)flag));
					return flag;
				};
				<>c.<>9__99_0 = val;
				obj = (object)val;
			}
			object obj2 = <>c.<>9__99_1;
			if (obj2 == null)
			{
				ValueFromBool val2 = delegate(FixedPointType fpConversion, bool boolValue)
				{
					//IL_000b: Unknown result type (might be due to invalid IL or missing references)
					ulong num = (boolValue ? FixedFloatExtension.ToFixedPointAsULong(fpConversion, 3f) : 2147483648u);
					Log.Debug(String.Format("PID Value of {0} converted to '{1:x}' ", (object)boolValue, (object)num));
					return num;
				};
				<>c.<>9__99_1 = val2;
				obj2 = (object)val2;
			}
			GeneratorAutoStartHiTempCelicusPid = (ILogicalDevicePidFixedPointBool)new LogicalDevicePidFixedPointBool((FixedPointType)1, (ILogicalDevice)(object)this, gENERATOR_AUTO_START_HI_TEMP_C, (LogicalDeviceSessionType)2, (ValueToBool)obj, (ValueFromBool)obj2, (Func<ulong, bool>)null);
		}

		public override void OnDeviceStatusChanged()
		{
			base.OnDeviceStatusChanged();
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("GeneratorCurrentState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("IsTemperatureSupported");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("IsTemperatureSensorValid");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("TemperatureFahrenheit");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("IsBatteryVoltageSupported");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("BatteryVoltage");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("QuietHoursActive");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("On");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("IsCurrentlyOn");
		}

		protected override void DebugUpdateDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, uint dataLength, string optionalText = "")
		{
			if (_debugUpdateDeviceStatusChangedThrottleCount != 0 && _debugUpdateDeviceStatusChangedThrottleTimer.ElapsedMilliseconds < 20000)
			{
				_debugUpdateDeviceStatusChangedThrottleCount++;
				return;
			}
			base.DebugUpdateDeviceStatusChanged(oldStatusData, statusData, dataLength, String.Format(" found {0} changes over {1}ms", (object)_debugUpdateDeviceStatusChangedThrottleCount, (object)(UInt32)20000));
			_debugUpdateDeviceStatusChangedThrottleTimer.Restart();
			_debugUpdateDeviceStatusChangedThrottleCount = 1u;
		}

		public override void OnDeviceOnlineChanged()
		{
			((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).OnDeviceOnlineChanged();
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("GeneratorCurrentState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("IsAutoRunOnTempAvailable");
		}

		public IHourMeter GetHourMeter()
		{
			//IL_005f: Unknown result type (might be due to invalid IL or missing references)
			//IL_006f: Expected O, but got Unknown
			//IL_006a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0074: Expected O, but got Unknown
			if (_hourMeter != null)
			{
				return _hourMeter;
			}
			NotifyPropertyChangedProxySource hourMeterPropertyChangedSource = _hourMeterPropertyChangedSource;
			if (hourMeterPropertyChangedSource != null)
			{
				((CommonDisposable)hourMeterPropertyChangedSource).Dispose();
			}
			_hourMeterPropertyChangedSource = null;
			_hourMeter = LogicalDeviceHourMeter.FindAssociatedHourMeter((ILogicalDevice)(object)this);
			if (_hourMeter != null)
			{
				Log.Debug(String.Format("{0} with hour meter {1}", (object)this, (object)_hourMeter));
				_hourMeterPropertyChangedSource = new NotifyPropertyChangedProxySource((INotifyPropertyChanged)_hourMeter, new ProxyOnPropertyChanged(((CommonNotifyPropertyChanged)this).OnPropertyChanged), (INotifyPropertyChanged)(object)this, "HourMeterPropertySource");
			}
			return _hourMeter;
		}

		public override void Dispose(bool disposing)
		{
			RemoteOnline remoteOnline = RemoteOnline;
			if (remoteOnline != null)
			{
				((CommonDisposable)remoteOnline).TryDispose();
			}
			RemoteOnline = null;
			RemoteGeneratorState remoteState = RemoteState;
			if (remoteState != null)
			{
				((CommonDisposable)remoteState).TryDispose();
			}
			RemoteState = null;
			RemoteGeneratorOnePressSwitch remoteOnePressSwitch = RemoteOnePressSwitch;
			if (remoteOnePressSwitch != null)
			{
				((CommonDisposable)remoteOnePressSwitch).TryDispose();
			}
			RemoteOnePressSwitch = null;
			RemoteGeneratorTemperatureFahrenheit remoteTemperature = RemoteTemperature;
			if (remoteTemperature != null)
			{
				((CommonDisposable)remoteTemperature).TryDispose();
			}
			RemoteTemperature = null;
			RemoteGeneratorVoltage remoteVoltage = RemoteVoltage;
			if (remoteVoltage != null)
			{
				((CommonDisposable)remoteVoltage).TryDispose();
			}
			RemoteVoltage = null;
			RemoteGeneratorQuietHoursActive remoteQuietHoursActive = RemoteQuietHoursActive;
			if (remoteQuietHoursActive != null)
			{
				((CommonDisposable)remoteQuietHoursActive).TryDispose();
			}
			RemoteQuietHoursActive = null;
			CancellationTokenSource commandCancelSource = _commandCancelSource;
			if (commandCancelSource != null)
			{
				CancellationTokenSourceExtension.CancelAndDispose(commandCancelSource);
			}
			_commandCancelSource = null;
			try
			{
				NotifyPropertyChangedProxySource hourMeterPropertyChangedSource = _hourMeterPropertyChangedSource;
				if (hourMeterPropertyChangedSource != null)
				{
					((CommonDisposable)hourMeterPropertyChangedSource).Dispose();
				}
			}
			catch (Object)
			{
			}
			_hourMeterPropertyChangedSource = null;
			base.Dispose(disposing);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendGeneratorOnePressOnCommandAsync()
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendGeneratorOnePressOnCommandAsync>d__129 <SendGeneratorOnePressOnCommandAsync>d__ = default(<SendGeneratorOnePressOnCommandAsync>d__129);
			<SendGeneratorOnePressOnCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendGeneratorOnePressOnCommandAsync>d__.<>4__this = this;
			<SendGeneratorOnePressOnCommandAsync>d__.<>1__state = -1;
			<SendGeneratorOnePressOnCommandAsync>d__.<>t__builder.Start<<SendGeneratorOnePressOnCommandAsync>d__129>(ref <SendGeneratorOnePressOnCommandAsync>d__);
			return <SendGeneratorOnePressOnCommandAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendGeneratorOnePressOffCommandAsync()
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendGeneratorOnePressOffCommandAsync>d__130 <SendGeneratorOnePressOffCommandAsync>d__ = default(<SendGeneratorOnePressOffCommandAsync>d__130);
			<SendGeneratorOnePressOffCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendGeneratorOnePressOffCommandAsync>d__.<>4__this = this;
			<SendGeneratorOnePressOffCommandAsync>d__.<>1__state = -1;
			<SendGeneratorOnePressOffCommandAsync>d__.<>t__builder.Start<<SendGeneratorOnePressOffCommandAsync>d__130>(ref <SendGeneratorOnePressOffCommandAsync>d__);
			return <SendGeneratorOnePressOffCommandAsync>d__.<>t__builder.Task;
		}

		public Task<float> ReadVoltageMeasurementAsync(CancellationToken cancellationToken)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return LogicalDeviceVoltageExtension.ReadVoltageMeasurementAsync(VoltageMeasurementBatteryPid, cancellationToken);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> PerformCommand(AutoStartLowVoltageMode option)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<PerformCommand>d__141 <PerformCommand>d__ = default(<PerformCommand>d__141);
			<PerformCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<PerformCommand>d__.<>4__this = this;
			<PerformCommand>d__.option = option;
			<PerformCommand>d__.<>1__state = -1;
			<PerformCommand>d__.<>t__builder.Start<<PerformCommand>d__141>(ref <PerformCommand>d__);
			return <PerformCommand>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> PerformCommand(AutoStartDurationMode option)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<PerformCommand>d__142 <PerformCommand>d__ = default(<PerformCommand>d__142);
			<PerformCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<PerformCommand>d__.<>4__this = this;
			<PerformCommand>d__.option = option;
			<PerformCommand>d__.<>1__state = -1;
			<PerformCommand>d__.<>t__builder.Start<<PerformCommand>d__142>(ref <PerformCommand>d__);
			return <PerformCommand>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> PerformCommand(AutoStartOffTimeMode option)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<PerformCommand>d__143 <PerformCommand>d__ = default(<PerformCommand>d__143);
			<PerformCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<PerformCommand>d__.<>4__this = this;
			<PerformCommand>d__.option = option;
			<PerformCommand>d__.<>1__state = -1;
			<PerformCommand>d__.<>t__builder.Start<<PerformCommand>d__143>(ref <PerformCommand>d__);
			return <PerformCommand>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task<CommandResult> TryWritePid(Func<Task> writePidFuncAsync)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<TryWritePid>d__144 <TryWritePid>d__ = default(<TryWritePid>d__144);
			<TryWritePid>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<TryWritePid>d__.writePidFuncAsync = writePidFuncAsync;
			<TryWritePid>d__.<>1__state = -1;
			<TryWritePid>d__.<>t__builder.Start<<TryWritePid>d__144>(ref <TryWritePid>d__);
			return <TryWritePid>d__.<>t__builder.Task;
		}

		public Task<bool> ToggleAsync(bool restore)
		{
			if (On)
			{
				return TurnOffAsync();
			}
			return TurnOnAsync(restore);
		}

		public Task<bool> TurnOnAsync(bool restore)
		{
			return SendGeneratorOnePressOnCommandAsync().ContinueWith<bool>((Func<Task<CommandResult>, bool>)((Task<CommandResult> t) => (int)t.Result == 0));
		}

		public Task<bool> TurnOffAsync()
		{
			return SendGeneratorOnePressOffCommandAsync().ContinueWith<bool>((Func<Task<CommandResult>, bool>)((Task<CommandResult> t) => (int)t.Result == 0));
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).LastReceivedNetworkStatus;
		}

		TRemoteChannelDef ILogicalDeviceRemote.GetRemoteChannelForChannelId<TRemoteChannelDef>(string channelId)
		{
			return ((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).GetRemoteChannelForChannelId<TRemoteChannelDef>(channelId);
		}
	}
	public enum GeneratorType : Enum
	{
		Generic,
		CumminsOnan
	}
	[Flags]
	public enum GeneratorGenieCapabilityFlag : Enum
	{
		None = 0,
		SupportsAutoStartOnTempDifferental = 1,
		CumminsOnanGeneratorDetected = 2
	}
	public interface ILogicalDeviceGeneratorGenieCapability : ILogicalDeviceCapability, INotifyPropertyChanged
	{
		bool IsAutoStartOnTempDifferentalSupported { get; }

		GeneratorType GeneratorType { get; }
	}
	public class LogicalDeviceGeneratorGenieCapability : LogicalDeviceCapability, ILogicalDeviceGeneratorGenieCapability, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		private GeneratorGenieCapabilityFlag CapabilityFlag => (GeneratorGenieCapabilityFlag)base.RawValue;

		public bool IsAutoStartOnTempDifferentalSupported => ((Enum)(object)CapabilityFlag).HasFlag((Enum)(object)GeneratorGenieCapabilityFlag.SupportsAutoStartOnTempDifferental);

		public GeneratorType GeneratorType
		{
			get
			{
				if (!((Enum)(object)CapabilityFlag).HasFlag((Enum)(object)GeneratorGenieCapabilityFlag.CumminsOnanGeneratorDetected))
				{
					return GeneratorType.Generic;
				}
				return GeneratorType.CumminsOnan;
			}
		}

		public LogicalDeviceGeneratorGenieCapability(Nullable<byte> rawCapability)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(rawCapability);
		}

		public LogicalDeviceGeneratorGenieCapability(ClimateZoneCapabilityFlag capabilityFlags)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(new Nullable<byte>((byte)capabilityFlags));
		}

		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsAutoStartOnTempDifferentalSupported");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}
	}
	public enum GeneratorGenieCommand : Enum
	{
		Off = 1,
		On
	}
	public class LogicalDeviceGeneratorGenieCommand : LogicalDeviceCommandPacket
	{
		private const byte OffCommandCode = 1;

		private const byte OnCommandCode = 2;

		public bool IsOffCommand => ((LogicalDeviceCommandPacket)this).Data[0] == 1;

		public bool IsOnCommand => ((LogicalDeviceCommandPacket)this).Data[0] == 2;

		public GeneratorGenieCommand ToGeneratorGenieCommand
		{
			get
			{
				if (!IsOnCommand)
				{
					return GeneratorGenieCommand.Off;
				}
				return GeneratorGenieCommand.On;
			}
		}

		public LogicalDeviceGeneratorGenieCommand(GeneratorGenieCommand command)
			: base((byte)0, (byte)0, 200)
		{
			//IL_0030: Unknown result type (might be due to invalid IL or missing references)
			switch (command)
			{
			case GeneratorGenieCommand.Off:
				((LogicalDeviceCommandPacket)this).Data[0] = 1;
				break;
			case GeneratorGenieCommand.On:
				((LogicalDeviceCommandPacket)this).Data[0] = 2;
				break;
			default:
				throw new ArgumentException("Unknown command");
			}
		}

		public static LogicalDeviceGeneratorGenieCommand MakeOnCommand()
		{
			return new LogicalDeviceGeneratorGenieCommand(GeneratorGenieCommand.On);
		}

		public static LogicalDeviceGeneratorGenieCommand MakeOffCommand()
		{
			return new LogicalDeviceGeneratorGenieCommand(GeneratorGenieCommand.Off);
		}

		public LogicalDeviceGeneratorGenieCommand(byte data)
			: base((byte)0, data, 200)
		{
		}
	}
	public class LogicalDeviceGeneratorGenieFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 24)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceGeneratorGenie(logicalDeviceId, new LogicalDeviceGeneratorGenieCapability(rawCapability), service);
		}
	}
	public sealed class LogicalDeviceGeneratorGenieSim : LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>, ILogicalDeviceGeneratorGenie, ILogicalDeviceGenerator, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IGenerator, IHourMeter, ILogicalDeviceWithCapability<ILogicalDeviceGeneratorGenieCapability>, ILogicalDeviceWithStatus<LogicalDeviceGeneratorGenieStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceGeneratorGenieStatus>, ILogicalDeviceCommandable<AutoStartLowVoltageMode>, ILogicalDeviceCommandable, ICommandable<AutoStartLowVoltageMode>, ILogicalDeviceCommandable<AutoStartDurationMode>, ICommandable<AutoStartDurationMode>, ILogicalDeviceCommandable<AutoStartOffTimeMode>, ICommandable<AutoStartOffTimeMode>, ILogicalDeviceSwitchable, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceSimulated
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformCommand>d__102 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceGeneratorGenieSim <>4__this;

			public AutoStartLowVoltageMode option;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0084: Expected O, but got Unknown
				//IL_005c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_002c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceGeneratorGenieSim logicalDeviceGeneratorGenieSim = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						val = logicalDeviceGeneratorGenieSim.GeneratorAutoStartLowVoltagePid.WriteFloatAsync((float)option, CancellationToken.None).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <PerformCommand>d__102>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
					result = (CommandResult)0;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformCommand>d__103 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceGeneratorGenieSim <>4__this;

			public AutoStartDurationMode option;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_008a: Expected O, but got Unknown
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				//IL_0085: Unknown result type (might be due to invalid IL or missing references)
				//IL_004b: Unknown result type (might be due to invalid IL or missing references)
				//IL_004c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00af: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceGeneratorGenieSim logicalDeviceGeneratorGenieSim = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						val = ((ILogicalDevicePid<TimeSpan>)(object)logicalDeviceGeneratorGenieSim.GeneratorAutoRunDurationMinutesPid).WriteAsync(TimeSpan.FromMinutes((double)(int)option), CancellationToken.None).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <PerformCommand>d__103>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
					result = (CommandResult)0;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformCommand>d__104 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceGeneratorGenieSim <>4__this;

			public AutoStartOffTimeMode option;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_008a: Expected O, but got Unknown
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				//IL_0085: Unknown result type (might be due to invalid IL or missing references)
				//IL_004b: Unknown result type (might be due to invalid IL or missing references)
				//IL_004c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00af: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceGeneratorGenieSim logicalDeviceGeneratorGenieSim = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						val = ((ILogicalDevicePid<TimeSpan>)(object)logicalDeviceGeneratorGenieSim.GeneratorAutoRunMinOffTimeMinutesPid).WriteAsync(TimeSpan.FromMinutes((double)(int)option), CancellationToken.None).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <PerformCommand>d__104>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
					result = (CommandResult)0;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendGeneratorOnePressOffCommandAsync>d__89 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceGeneratorGenieSim <>4__this;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_00be: Expected O, but got Unknown
				//IL_008f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0094: Unknown result type (might be due to invalid IL or missing references)
				//IL_009b: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0039: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e3: Unknown result type (might be due to invalid IL or missing references)
				//IL_005f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0079: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceGeneratorGenieSim logicalDeviceGeneratorGenieSim = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_00aa;
					}
					if (((CommonDisposableNotifyPropertyChanged)logicalDeviceGeneratorGenieSim).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceGeneratorGenieSim", String.Concat(((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)logicalDeviceGeneratorGenieSim).DeviceName, " Generator ExecuteCommand ignored as relay has been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else
					{
						if (logicalDeviceGeneratorGenieSim.GeneratorCurrentState != GeneratorState.Off)
						{
							logicalDeviceGeneratorGenieSim.SetGeneratorState(GeneratorState.Stopping);
							val = Task.Delay(1000).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SendGeneratorOnePressOffCommandAsync>d__89>(ref val, ref this);
								return;
							}
							goto IL_00aa;
						}
						result = (CommandResult)0;
					}
					goto end_IL_000e;
					IL_00aa:
					((TaskAwaiter)(ref val)).GetResult();
					logicalDeviceGeneratorGenieSim.SetGeneratorState(GeneratorState.Off);
					result = (CommandResult)0;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendGeneratorOnePressOnCommandAsync>d__88 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceGeneratorGenieSim <>4__this;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_013e: Expected O, but got Unknown
				//IL_009c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0107: Unknown result type (might be due to invalid IL or missing references)
				//IL_010c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0113: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dc: Unknown result type (might be due to invalid IL or missing references)
				//IL_0043: Unknown result type (might be due to invalid IL or missing references)
				//IL_0139: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0069: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0163: Unknown result type (might be due to invalid IL or missing references)
				//IL_0082: Unknown result type (might be due to invalid IL or missing references)
				//IL_0083: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceGeneratorGenieSim logicalDeviceGeneratorGenieSim = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_00b7;
					}
					if (num == 1)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_0122;
					}
					if (((CommonDisposableNotifyPropertyChanged)logicalDeviceGeneratorGenieSim).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceGeneratorGenieSim", String.Concat(((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)logicalDeviceGeneratorGenieSim).DeviceName, " Generator ExecuteCommand ignored as relay has been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else
					{
						if (logicalDeviceGeneratorGenieSim.GeneratorCurrentState == GeneratorState.Off)
						{
							logicalDeviceGeneratorGenieSim.SetGeneratorState(GeneratorState.Priming);
							val = Task.Delay(2000).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SendGeneratorOnePressOnCommandAsync>d__88>(ref val, ref this);
								return;
							}
							goto IL_00b7;
						}
						result = (CommandResult)7;
					}
					goto end_IL_000e;
					IL_0122:
					((TaskAwaiter)(ref val)).GetResult();
					goto IL_0129;
					IL_0129:
					if (logicalDeviceGeneratorGenieSim.GeneratorCurrentState != GeneratorState.Off)
					{
						logicalDeviceGeneratorGenieSim.SetGeneratorState(GeneratorState.Running);
					}
					result = (CommandResult)0;
					goto end_IL_000e;
					IL_00b7:
					((TaskAwaiter)(ref val)).GetResult();
					if (logicalDeviceGeneratorGenieSim.GeneratorCurrentState != GeneratorState.Off)
					{
						logicalDeviceGeneratorGenieSim.SetGeneratorState(GeneratorState.Starting);
						val = Task.Delay(500).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SendGeneratorOnePressOnCommandAsync>d__88>(ref val, ref this);
							return;
						}
						goto IL_0122;
					}
					goto IL_0129;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceGeneratorGenieSim";

		private const int operatingIncrementingSeconds = 60;

		private const int timerCallbackPeriod = 60000;

		private bool generatorRunning;

		private Timer operatingSecondsSimulationTimer;

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public override bool ActiveSession => CommandSessionActivated;

		public bool IsTemperatureSupported => true;

		public bool IsTemperatureSensorValid => ((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.IsTemperatureSensorValid;

		public float TemperatureFahrenheit => ((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.TemperatureFahrenheit;

		public bool IsBatteryVoltageSupported => true;

		public float BatteryVoltage => ((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.BatteryVoltage;

		public bool IsVoltagePidReadSupported => true;

		public bool IsQuietHoursSupported => true;

		public bool QuietHoursActive => false;

		[field: CompilerGenerated]
		public ILogicalDevicePidBool GeneratorQuietHoursEnable
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan GeneratorQuietHoursStartTimePid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan GeneratorQuietHoursEndTimePid
		{
			[CompilerGenerated]
			get;
		}

		public bool IsAutoRunSupported => true;

		public bool IsAutoRunOnTempSupported => true;

		public bool IsAutoRunOnTempAvailable
		{
			get
			{
				if (!IsAutoRunOnTempSupported)
				{
					return false;
				}
				ILogicalDeviceManager deviceManager = ((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).DeviceService.DeviceManager;
				if (deviceManager == null)
				{
					return false;
				}
				if (deviceManager.FindLogicalDevices<ILogicalDeviceClimateZone>((Func<ILogicalDeviceClimateZone, bool>)((ILogicalDeviceClimateZone logicalDevice) => (((ILogicalDevice)logicalDevice).LogicalId.FunctionName != FUNCTION_NAME.UNKNOWN && (int)((IDevicesCommon)logicalDevice).ActiveConnection == 1) ? true : false)).Count <= 0)
				{
					return false;
				}
				return IsAutoRunOnTempSupported;
			}
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidFixedPoint GeneratorAutoStartLowVoltagePid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidFixedPointBool GeneratorAutoStartHiTempCelicusPid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan GeneratorAutoRunDurationMinutesPid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan GeneratorAutoRunMinOffTimeMinutesPid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidMap<string> CumminsOnanGeneratorFaultCode
		{
			[CompilerGenerated]
			get;
		}

		public GeneratorType GeneratorType => GeneratorType.Generic;

		public bool HasHourMeter => true;

		public bool Error => false;

		public bool MaintenancePastDue => false;

		public bool MaintenanceDue => false;

		public bool Running => ((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.State == GeneratorState.Running;

		[field: CompilerGenerated]
		public ulong OperatingSeconds
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		} = 9000uL;

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan HourMeterMaintenancePeriodSecPid
		{
			[CompilerGenerated]
			get;
		} = (ILogicalDevicePidTimeSpan)new LogicalDevicePidSimTimeSpan((LogicalDevicePidTimeSpanPrecision)2, PID.MAINTENANCE_PERIOD_SEC, 0uL);

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan HourMeterLastMaintenanceTimePid
		{
			[CompilerGenerated]
			get;
		} = (ILogicalDevicePidTimeSpan)new LogicalDevicePidSimTimeSpan((LogicalDevicePidTimeSpanPrecision)2, PID.LAST_MAINTENANCE_TIME_SEC, 0uL);

		public bool IsHourMeterSupported => true;

		public GeneratorState GeneratorCurrentState => ((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.State;

		public bool IsGeneratorOnePressCommandsSupported => true;

		public LogicalDeviceExScope VoltageMeasurementBatteryPidScope => (LogicalDeviceExScope)2;

		[field: CompilerGenerated]
		public ILogicalDevicePidFixedPoint VoltageMeasurementBatteryPid
		{
			[CompilerGenerated]
			get;
		} = (ILogicalDevicePidFixedPoint)new LogicalDevicePidSimFixedPoint((FixedPointType)1, PID.BATTERY_VOLTAGE, 13f);

		[field: CompilerGenerated]
		public bool CommandSessionActivated
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			private set;
		}

		public bool On => GeneratorCurrentState != GeneratorState.Off;

		public bool IsCurrentlyOn
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus).HasData)
				{
					return ((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.State != GeneratorState.Off;
				}
				return false;
			}
		}

		public bool IsMasterSwitchControllable => false;

		public SwitchTransition SwitchInTransition => SwitchTransition.Unknown;

		public SwitchUsage UsedFor => SwitchUsage.Generator;

		private static string GeneratorFaultCodeMapToString(ulong code)
		{
			return "";
		}

		public LogicalDeviceGeneratorGenieSim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service)
			: base(logicalDeviceId, new LogicalDeviceGeneratorGenieStatus(), (ILogicalDeviceGeneratorGenieCapability)new LogicalDeviceGeneratorGenieCapability(ClimateZoneCapabilityFlag.GasFurnace | ClimateZoneCapabilityFlag.AirConditioner | ClimateZoneCapabilityFlag.MultiSpeedFan), service, false)
		{
			//IL_0015: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Expected O, but got Unknown
			//IL_0028: Unknown result type (might be due to invalid IL or missing references)
			//IL_0032: Expected O, but got Unknown
			//IL_003e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0048: Expected O, but got Unknown
			//IL_0092: Unknown result type (might be due to invalid IL or missing references)
			//IL_009c: Expected O, but got Unknown
			//IL_00a5: Unknown result type (might be due to invalid IL or missing references)
			//IL_00af: Expected O, but got Unknown
			//IL_00b8: Unknown result type (might be due to invalid IL or missing references)
			//IL_00c2: Expected O, but got Unknown
			//IL_00cb: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d5: Expected O, but got Unknown
			//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e7: Expected O, but got Unknown
			//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
			//IL_00fa: Expected O, but got Unknown
			//IL_0103: Unknown result type (might be due to invalid IL or missing references)
			//IL_010d: Expected O, but got Unknown
			//IL_0141: Unknown result type (might be due to invalid IL or missing references)
			//IL_0152: Expected O, but got Unknown
			//IL_014d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0157: Expected O, but got Unknown
			CumminsOnanGeneratorFaultCode = (ILogicalDevicePidMap<string>)(object)new LogicalDevicePidMapStub<string>(0uL, (Func<ulong, string>)GeneratorFaultCodeMapToString, (ILogicalDevice)(object)this, PID.CUMMINS_ONAN_GENERATOR_FAULT_CODE);
			GeneratorQuietHoursEnable = (ILogicalDevicePidBool)new LogicalDevicePidSimBool(PID.GENERATOR_QUIET_HOURS_ENABLED, false);
			GeneratorQuietHoursStartTimePid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidSimTimeSpan((LogicalDevicePidTimeSpanPrecision)0, PID.GENERATOR_QUIET_HOURS_START_TIME, 0uL);
			GeneratorQuietHoursEndTimePid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidSimTimeSpan((LogicalDevicePidTimeSpanPrecision)0, PID.GENERATOR_QUIET_HOURS_END_TIME, 0uL);
			GeneratorAutoStartLowVoltagePid = (ILogicalDevicePidFixedPoint)new LogicalDevicePidSimFixedPoint((FixedPointType)3, PID.GENERATOR_AUTO_START_LOW_VOLTAGE, 0uL);
			GeneratorAutoStartHiTempCelicusPid = (ILogicalDevicePidFixedPointBool)new LogicalDevicePidSimFixedPointBool((FixedPointType)1, PID.GENERATOR_AUTO_START_HI_TEMP_C, false);
			GeneratorAutoRunDurationMinutesPid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidSimTimeSpan((LogicalDevicePidTimeSpanPrecision)1, PID.GENERATOR_AUTO_RUN_DURATION_MINUTES, 0uL);
			GeneratorAutoRunMinOffTimeMinutesPid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidSimTimeSpan((LogicalDevicePidTimeSpanPrecision)1, PID.GENERATOR_AUTO_RUN_MIN_OFF_TIME_MINUTES, 0uL);
			((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.SetBatteryVoltage(12.2f);
			((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.SetTemperature(71.5f);
			((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.SetState(GeneratorState.Off);
			operatingSecondsSimulationTimer = new Timer((TimerCallback)([CompilerGenerated] (object o) =>
			{
				if (generatorRunning)
				{
					OperatingSeconds += 60uL;
					((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).OnDeviceStatusChanged();
				}
			}), (object)null, 0, 60000);
		}

		public override void OnDeviceStatusChanged()
		{
			base.OnDeviceStatusChanged();
			Log.Information(String.Format("Data Changed {0}: Generator = {1}", (object)((LogicalDevice<ILogicalDeviceGeneratorGenieCapability>)(object)this).LogicalId, (object)((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.State));
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("Running");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("GeneratorCurrentState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("IsTemperatureSupported");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("IsTemperatureSensorValid");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("TemperatureFahrenheit");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("IsBatteryVoltageSupported");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("BatteryVoltage");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("OperatingSeconds");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("On");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("IsCurrentlyOn");
		}

		public override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
			Timer obj = operatingSecondsSimulationTimer;
			if (obj != null)
			{
				IDisposableExtensions.TryDispose((IDisposable)(object)obj);
			}
			operatingSecondsSimulationTimer = null;
		}

		private void SetGeneratorState(GeneratorState state)
		{
			((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).DeviceStatus.SetState(state);
			((LogicalDevice<LogicalDeviceGeneratorGenieStatus, ILogicalDeviceGeneratorGenieCapability>)this).OnDeviceStatusChanged();
			if (state == GeneratorState.Running)
			{
				generatorRunning = true;
			}
			else
			{
				generatorRunning = false;
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendGeneratorOnePressOnCommandAsync()
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendGeneratorOnePressOnCommandAsync>d__88 <SendGeneratorOnePressOnCommandAsync>d__ = default(<SendGeneratorOnePressOnCommandAsync>d__88);
			<SendGeneratorOnePressOnCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendGeneratorOnePressOnCommandAsync>d__.<>4__this = this;
			<SendGeneratorOnePressOnCommandAsync>d__.<>1__state = -1;
			<SendGeneratorOnePressOnCommandAsync>d__.<>t__builder.Start<<SendGeneratorOnePressOnCommandAsync>d__88>(ref <SendGeneratorOnePressOnCommandAsync>d__);
			return <SendGeneratorOnePressOnCommandAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendGeneratorOnePressOffCommandAsync()
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendGeneratorOnePressOffCommandAsync>d__89 <SendGeneratorOnePressOffCommandAsync>d__ = default(<SendGeneratorOnePressOffCommandAsync>d__89);
			<SendGeneratorOnePressOffCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendGeneratorOnePressOffCommandAsync>d__.<>4__this = this;
			<SendGeneratorOnePressOffCommandAsync>d__.<>1__state = -1;
			<SendGeneratorOnePressOffCommandAsync>d__.<>t__builder.Start<<SendGeneratorOnePressOffCommandAsync>d__89>(ref <SendGeneratorOnePressOffCommandAsync>d__);
			return <SendGeneratorOnePressOffCommandAsync>d__.<>t__builder.Task;
		}

		public Task<float> ReadVoltageMeasurementAsync(CancellationToken cancellationToken)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return LogicalDeviceVoltageExtension.ReadVoltageMeasurementAsync(VoltageMeasurementBatteryPid, cancellationToken);
		}

		public Task ActivateSession(CancellationToken cancelToken)
		{
			CommandSessionActivated = true;
			return (Task)(object)Task.FromResult<int>(0);
		}

		public void DeactivateSession()
		{
			CommandSessionActivated = false;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> PerformCommand(AutoStartLowVoltageMode option)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<PerformCommand>d__102 <PerformCommand>d__ = default(<PerformCommand>d__102);
			<PerformCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<PerformCommand>d__.<>4__this = this;
			<PerformCommand>d__.option = option;
			<PerformCommand>d__.<>1__state = -1;
			<PerformCommand>d__.<>t__builder.Start<<PerformCommand>d__102>(ref <PerformCommand>d__);
			return <PerformCommand>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> PerformCommand(AutoStartDurationMode option)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<PerformCommand>d__103 <PerformCommand>d__ = default(<PerformCommand>d__103);
			<PerformCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<PerformCommand>d__.<>4__this = this;
			<PerformCommand>d__.option = option;
			<PerformCommand>d__.<>1__state = -1;
			<PerformCommand>d__.<>t__builder.Start<<PerformCommand>d__103>(ref <PerformCommand>d__);
			return <PerformCommand>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> PerformCommand(AutoStartOffTimeMode option)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<PerformCommand>d__104 <PerformCommand>d__ = default(<PerformCommand>d__104);
			<PerformCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<PerformCommand>d__.<>4__this = this;
			<PerformCommand>d__.option = option;
			<PerformCommand>d__.<>1__state = -1;
			<PerformCommand>d__.<>t__builder.Start<<PerformCommand>d__104>(ref <PerformCommand>d__);
			return <PerformCommand>d__.<>t__builder.Task;
		}

		public Task<bool> ToggleAsync(bool restore)
		{
			if (On)
			{
				return TurnOffAsync();
			}
			return TurnOnAsync(restore);
		}

		public Task<bool> TurnOnAsync(bool restore)
		{
			return SendGeneratorOnePressOnCommandAsync().ContinueWith<bool>((Func<Task<CommandResult>, bool>)((Task<CommandResult> t) => (int)t.Result == 0));
		}

		public Task<bool> TurnOffAsync()
		{
			return SendGeneratorOnePressOffCommandAsync().ContinueWith<bool>((Func<Task<CommandResult>, bool>)((Task<CommandResult> t) => (int)t.Result == 0));
		}
	}
	public class LogicalDeviceGeneratorGenieStatus : LogicalDeviceStatusPacketMutable, ILogicalDeviceStatus<LogicalDeviceGeneratorGenieStatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		private const int MinimumStatusPacketSize = 5;

		public const byte StateBitMask = 7;

		public const BasicBitMask QuietHoursBitMask = (BasicBitMask)128;

		public const uint StatusByteIndex = 0u;

		public const uint BatteryVoltageStartingIndex = 1u;

		public const uint TemperatureStartingIndex = 3u;

		public const ushort TemperatureSensorInvalidValue = 32767;

		public const ushort TemperatureSensorNotSupportedValue = 32768;

		public GeneratorState State => (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0] & 7) switch
		{
			0 => GeneratorState.Off, 
			1 => GeneratorState.Priming, 
			2 => GeneratorState.Starting, 
			3 => GeneratorState.Running, 
			4 => GeneratorState.Stopping, 
			_ => GeneratorState.Unknown, 
		};

		public bool QuietHoursActive => (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0] & 0x80) != 0;

		public float BatteryVoltage => FixedPointUnsignedBigEndian8X8.ToFloat(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 1u);

		public bool IsTemperatureSupported => (ushort)FixedPointSignedBigEndian8X8.ToFixedPoint(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 3u) != 32768;

		public bool IsTemperatureSensorValid
		{
			get
			{
				if (IsTemperatureSupported)
				{
					return FixedPointUnsignedBigEndian8X8.ToFixedPoint(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 3u) != 32767;
				}
				return false;
			}
		}

		public float TemperatureFahrenheit => FixedPointSignedBigEndian8X8.ToFloat(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 3u);

		public void SetState(GeneratorState state)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)7, (byte)state, 0);
		}

		public void SetQuietHoursActive(bool active)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)128, active);
		}

		public void SetBatteryVoltage(float voltage)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetFixedPoint((FixedPointType)0, voltage, 1u);
		}

		public void SetTemperature(float temperature)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetFixedPoint((FixedPointType)2, temperature, 3u);
		}

		public LogicalDeviceGeneratorGenieStatus()
			: base(5u)
		{
		}

		public LogicalDeviceGeneratorGenieStatus(LogicalDeviceGeneratorGenieStatus originalStatus)
		{
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalStatus).Data;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(data, data.Length, false);
		}

		public LogicalDeviceGeneratorGenieStatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceGeneratorGenieStatusSerializable(State, QuietHoursActive, BatteryVoltage, TemperatureFahrenheit);
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceGeneratorGenieStatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceGeneratorGenieStatusSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceGeneratorGenieStatusSerializable);
			}
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public GeneratorState State
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool QuietHoursActive
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public float BatteryVoltage
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public float TemperatureFahrenheit
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceGeneratorGenieStatusSerializable(GeneratorState state, bool quietHoursActive, float batteryVoltage, float temperatureFahrenheit)
		{
			State = state;
			QuietHoursActive = quietHoursActive;
			BatteryVoltage = batteryVoltage;
			TemperatureFahrenheit = temperatureFahrenheit;
		}

		public LogicalDeviceGeneratorGenieStatusSerializable(LogicalDeviceGeneratorGenieStatus status)
			: this(status.State, status.QuietHoursActive, status.BatteryVoltage, status.TemperatureFahrenheit)
		{
		}

		public override byte[] MakeRawData()
		{
			LogicalDeviceGeneratorGenieStatus logicalDeviceGeneratorGenieStatus = new LogicalDeviceGeneratorGenieStatus();
			logicalDeviceGeneratorGenieStatus.SetState(State);
			logicalDeviceGeneratorGenieStatus.SetBatteryVoltage(BatteryVoltage);
			logicalDeviceGeneratorGenieStatus.SetQuietHoursActive(QuietHoursActive);
			logicalDeviceGeneratorGenieStatus.SetTemperature(TemperatureFahrenheit);
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceGeneratorGenieStatus).CopyCurrentData();
		}

		public static LogicalDeviceGeneratorGenieStatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceGeneratorGenieStatus logicalDeviceGeneratorGenieStatus = new LogicalDeviceGeneratorGenieStatus();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceGeneratorGenieStatus).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceGeneratorGenieStatus).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceGeneratorGenieStatus).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceGeneratorGenieStatus).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceGeneratorGenieStatus).Update(rawData, rawData.Length, false);
			return new LogicalDeviceGeneratorGenieStatusSerializable(logicalDeviceGeneratorGenieStatus.State, logicalDeviceGeneratorGenieStatus.QuietHoursActive, logicalDeviceGeneratorGenieStatus.BatteryVoltage, logicalDeviceGeneratorGenieStatus.TemperatureFahrenheit);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceGeneratorGenieStatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceGeneratorGenieStatusSerializable>)(object)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("State = ");
			builder.Append(((Object)State/*cast due to .constrained prefix*/).ToString());
			builder.Append(", QuietHoursActive = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref QuietHoursActive)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", BatteryVoltage = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref BatteryVoltage)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TemperatureFahrenheit = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref TemperatureFahrenheit)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return (((base.GetHashCode() * -1521134295 + EqualityComparer<GeneratorState>.Default.GetHashCode(State)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(QuietHoursActive)) * -1521134295 + EqualityComparer<float>.Default.GetHashCode(BatteryVoltage)) * -1521134295 + EqualityComparer<float>.Default.GetHashCode(TemperatureFahrenheit);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceGeneratorGenieStatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceGeneratorGenieStatusSerializable(LogicalDeviceGeneratorGenieStatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceGeneratorGenieStatusSerializable>)(object)original)
		{
			State = original.State;
			QuietHoursActive = original.QuietHoursActive;
			BatteryVoltage = original.BatteryVoltage;
			TemperatureFahrenheit = original.TemperatureFahrenheit;
		}
	}
	public enum GeneratorState : Enum
	{
		Off = 0,
		Priming = 1,
		Starting = 2,
		Running = 3,
		Stopping = 4,
		Unknown = 257,
		Offline = 256
	}
	public interface IGenerator : IHourMeter, IDevicesCommon, INotifyPropertyChanged
	{
		bool IsTemperatureSupported { get; }

		bool IsTemperatureSensorValid { get; }

		float TemperatureFahrenheit { get; }

		bool IsBatteryVoltageSupported { get; }

		float BatteryVoltage { get; }

		bool IsQuietHoursSupported { get; }

		bool QuietHoursActive { get; }

		ILogicalDevicePidTimeSpan GeneratorQuietHoursStartTimePid { get; }

		ILogicalDevicePidTimeSpan GeneratorQuietHoursEndTimePid { get; }

		bool IsAutoRunSupported { get; }

		bool IsAutoRunOnTempSupported { get; }

		bool IsAutoRunOnTempAvailable { get; }

		ILogicalDevicePidBool GeneratorQuietHoursEnable { get; }

		ILogicalDevicePidFixedPoint GeneratorAutoStartLowVoltagePid { get; }

		ILogicalDevicePidTimeSpan GeneratorAutoRunDurationMinutesPid { get; }

		ILogicalDevicePidTimeSpan GeneratorAutoRunMinOffTimeMinutesPid { get; }

		ILogicalDevicePidFixedPointBool GeneratorAutoStartHiTempCelicusPid { get; }

		bool IsHourMeterSupported { get; }

		bool HasHourMeter { get; }

		GeneratorState GeneratorCurrentState { get; }

		bool IsGeneratorOnePressCommandsSupported { get; }

		GeneratorType GeneratorType { get; }

		ILogicalDevicePidMap<string> CumminsOnanGeneratorFaultCode { get; }

		Task<CommandResult> SendGeneratorOnePressOnCommandAsync();

		Task<CommandResult> SendGeneratorOnePressOffCommandAsync();
	}
	public interface ILogicalDeviceGenerator : ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IGenerator, IHourMeter
	{
	}
	public interface ILogicalDeviceGeneratorRelay : ILogicalDeviceGenerator, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IGenerator, IHourMeter
	{
	}
	public interface ILogicalDeviceGeneratorGenie : ILogicalDeviceGenerator, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IGenerator, IHourMeter, ILogicalDeviceWithCapability<ILogicalDeviceGeneratorGenieCapability>, ILogicalDeviceWithStatus<LogicalDeviceGeneratorGenieStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceGeneratorGenieStatus>, ILogicalDeviceCommandable<AutoStartLowVoltageMode>, ILogicalDeviceCommandable, ICommandable<AutoStartLowVoltageMode>, ILogicalDeviceCommandable<AutoStartDurationMode>, ICommandable<AutoStartDurationMode>, ILogicalDeviceCommandable<AutoStartOffTimeMode>, ICommandable<AutoStartOffTimeMode>, ILogicalDeviceSwitchable, ISwitchableDevice, ILogicalDeviceSwitchableReadonly
	{
	}
	public interface ILogicalDeviceGeneratorGenieDirect : ILogicalDeviceGeneratorGenie, ILogicalDeviceGenerator, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IGenerator, IHourMeter, ILogicalDeviceWithCapability<ILogicalDeviceGeneratorGenieCapability>, ILogicalDeviceWithStatus<LogicalDeviceGeneratorGenieStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceGeneratorGenieStatus>, ILogicalDeviceCommandable<AutoStartLowVoltageMode>, ILogicalDeviceCommandable, ICommandable<AutoStartLowVoltageMode>, ILogicalDeviceCommandable<AutoStartDurationMode>, ICommandable<AutoStartDurationMode>, ILogicalDeviceCommandable<AutoStartOffTimeMode>, ICommandable<AutoStartOffTimeMode>, ILogicalDeviceSwitchable, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public interface ILogicalDeviceGeneratorGenieRemote : ILogicalDeviceGeneratorGenie, ILogicalDeviceGenerator, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IGenerator, IHourMeter, ILogicalDeviceWithCapability<ILogicalDeviceGeneratorGenieCapability>, ILogicalDeviceWithStatus<LogicalDeviceGeneratorGenieStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceGeneratorGenieStatus>, ILogicalDeviceCommandable<AutoStartLowVoltageMode>, ILogicalDeviceCommandable, ICommandable<AutoStartLowVoltageMode>, ILogicalDeviceCommandable<AutoStartDurationMode>, ICommandable<AutoStartDurationMode>, ILogicalDeviceCommandable<AutoStartOffTimeMode>, ICommandable<AutoStartOffTimeMode>, ILogicalDeviceSwitchable, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceRemote
	{
	}
	public interface IDirectCommandGeneratorGenie : ILogicalDeviceSourceDirect, ILogicalDeviceSource
	{
		Task<CommandResult> SendDirectCommandGeneratorGenie(ILogicalDeviceGeneratorGenie logicalDevice, GeneratorGenieCommand command, CancellationToken cancelToken);
	}
	public class LogicalDeviceRelayGeneratorType1 : LogicalDeviceRelayGenerator<LogicalDeviceRelayHBridgeStatusType1, LogicalDeviceRelayHBridgeCommandFactoryMomentaryType1, LogicalDeviceRelayCapabilityType1>
	{
		public LogicalDeviceRelayGeneratorType1(ILogicalDeviceId logicalDeviceId, LogicalDeviceRelayCapabilityType1 capability, ILogicalDeviceService service = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, capability, service, isFunctionClassChangeable)
		{
		}
	}
	public class LogicalDeviceRelayGeneratorType2 : LogicalDeviceRelayGenerator<LogicalDeviceRelayHBridgeStatusType2, LogicalDeviceRelayHBridgeCommandFactoryMomentaryType2, LogicalDeviceRelayCapabilityType2>
	{
		public LogicalDeviceRelayGeneratorType2(ILogicalDeviceId logicalDeviceId, LogicalDeviceRelayCapabilityType2 capability, ILogicalDeviceService service = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, capability, service, isFunctionClassChangeable)
		{
		}
	}
	public class LogicalDeviceRelayGenerator<TRelayBasicStatus, TRelayCommandFactory, TCapability> : LogicalDeviceRelayHBridgeMomentary<TRelayBasicStatus, TRelayCommandFactory, TCapability>, ILogicalDeviceGeneratorRelay, ILogicalDeviceGenerator, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IGenerator, IHourMeter where TRelayBasicStatus : class, ILogicalDeviceRelayHBridgeStatus, new() where TRelayCommandFactory : ILogicalDeviceRelayHBridgeCommandFactory, new() where TCapability : ILogicalDeviceRelayCapability
	{
		private const string RelayNotifyPropertySourceKey = "RelayPropertySource";

		private NotifyPropertyChangedProxySource _relayPropertyChangedSource;

		private const string HourMeterNotifyPropertySourceKey = "HourMeterPropertySource";

		private IHourMeter _hourMeter;

		private NotifyPropertyChangedProxySource _hourMeterPropertyChangedSource;

		private readonly LogicalDevicePidProxyTimeSpan _hourMeterMaintenancePeriodSecPid = new LogicalDevicePidProxyTimeSpan((ILogicalDevicePidTimeSpan)null);

		private readonly LogicalDevicePidProxyTimeSpan _hourMeterLastMaintenanceTimePid = new LogicalDevicePidProxyTimeSpan((ILogicalDevicePidTimeSpan)null);

		public bool IsTemperatureSupported => false;

		public bool IsTemperatureSensorValid => false;

		public float TemperatureFahrenheit => FixedPointUnsignedBigEndian8X8.ToFloat((ushort)32768);

		public bool IsBatteryVoltageSupported => false;

		public float BatteryVoltage => 0f;

		public bool IsQuietHoursSupported => false;

		public bool QuietHoursActive => false;

		public ILogicalDevicePidBool GeneratorQuietHoursEnable
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public ILogicalDevicePidTimeSpan GeneratorQuietHoursStartTimePid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public ILogicalDevicePidTimeSpan GeneratorQuietHoursEndTimePid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public bool IsAutoRunSupported => false;

		public bool IsAutoRunOnTempSupported => false;

		public bool IsAutoRunOnTempAvailable => false;

		public ILogicalDevicePidFixedPoint GeneratorAutoStartLowVoltagePid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public ILogicalDevicePidFixedPointBool GeneratorAutoStartHiTempCelicusPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public ILogicalDevicePidTimeSpan GeneratorAutoRunDurationMinutesPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public ILogicalDevicePidTimeSpan GeneratorAutoRunMinOffTimeMinutesPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public bool IsHourMeterSupported => true;

		[NotifyPropertyChangedProxy("HourMeterPropertySource", "ActiveConnection", "HasHourMeter")]
		public bool HasHourMeter
		{
			get
			{
				//IL_000e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0014: Invalid comparison between Unknown and I4
				if (GetHourMeter() != null)
				{
					return (int)((IDevicesCommon)GetHourMeter()).ActiveConnection > 0;
				}
				return false;
			}
		}

		[NotifyPropertyChangedProxy("HourMeterPropertySource", "Error")]
		public bool Error => GetHourMeter()?.Error ?? false;

		[NotifyPropertyChangedProxy("HourMeterPropertySource", "MaintenancePastDue")]
		public bool MaintenancePastDue => GetHourMeter()?.MaintenancePastDue ?? false;

		[NotifyPropertyChangedProxy("HourMeterPropertySource", "MaintenanceDue")]
		public bool MaintenanceDue => GetHourMeter()?.MaintenanceDue ?? false;

		[NotifyPropertyChangedProxy("HourMeterPropertySource", "Running")]
		public bool Running => GetHourMeter()?.Running ?? false;

		[NotifyPropertyChangedProxy("HourMeterPropertySource", "OperatingSeconds")]
		public ulong OperatingSeconds => GetHourMeter()?.OperatingSeconds ?? 0;

		public ILogicalDevicePidTimeSpan HourMeterMaintenancePeriodSecPid
		{
			get
			{
				GetHourMeter();
				return (ILogicalDevicePidTimeSpan)(object)_hourMeterMaintenancePeriodSecPid;
			}
		}

		public ILogicalDevicePidTimeSpan HourMeterLastMaintenanceTimePid
		{
			get
			{
				GetHourMeter();
				return (ILogicalDevicePidTimeSpan)(object)_hourMeterLastMaintenanceTimePid;
			}
		}

		public ILogicalDevicePidMap<string> CumminsOnanGeneratorFaultCode
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public GeneratorType GeneratorType => GeneratorType.Generic;

		[NotifyPropertyChangedProxy("RelayPropertySource", "RelayEnergized", "GeneratorCurrentState")]
		[NotifyPropertyChangedProxy("RelayPropertySource", "ActiveConnection", "GeneratorCurrentState")]
		[NotifyPropertyChangedProxy("HourMeterPropertySource", "Running", "GeneratorCurrentState")]
		public GeneratorState GeneratorCurrentState
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if ((int)((LogicalDevice<?>)(object)this).ActiveConnection == 0)
				{
					return GeneratorState.Offline;
				}
				IHourMeter hourMeter = GetHourMeter();
				if (hourMeter == null)
				{
					if (base.RelayEnergized != RelayHBridgeEnergized.Relay2)
					{
						return GeneratorState.Off;
					}
					return GeneratorState.Running;
				}
				if (hourMeter.Running)
				{
					if (base.RelayEnergized != RelayHBridgeEnergized.Relay1)
					{
						return GeneratorState.Running;
					}
					return GeneratorState.Stopping;
				}
				if (base.RelayEnergized != RelayHBridgeEnergized.Relay2)
				{
					return GeneratorState.Off;
				}
				return GeneratorState.Starting;
			}
		}

		public bool IsGeneratorOnePressCommandsSupported => false;

		public LogicalDeviceRelayGenerator(ILogicalDeviceId logicalDeviceId, TCapability capability, ILogicalDeviceService service = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, capability, service, isFunctionClassChangeable)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_000c: Expected O, but got Unknown
			//IL_000e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0018: Expected O, but got Unknown
			//IL_005a: Unknown result type (might be due to invalid IL or missing references)
			//IL_006a: Expected O, but got Unknown
			//IL_0065: Unknown result type (might be due to invalid IL or missing references)
			//IL_006f: Expected O, but got Unknown
			//IL_0078: Unknown result type (might be due to invalid IL or missing references)
			//IL_0082: Expected O, but got Unknown
			//IL_008b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0095: Expected O, but got Unknown
			//IL_009e: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a8: Expected O, but got Unknown
			//IL_00b1: Unknown result type (might be due to invalid IL or missing references)
			//IL_00bb: Expected O, but got Unknown
			//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ce: Expected O, but got Unknown
			//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e1: Expected O, but got Unknown
			//IL_00ea: Unknown result type (might be due to invalid IL or missing references)
			//IL_00f4: Expected O, but got Unknown
			CumminsOnanGeneratorFaultCode = (ILogicalDevicePidMap<string>)(object)new LogicalDevicePidMapStub<string>(0uL, (Func<ulong, string>)GeneratorFaultCodeMapToString, (ILogicalDevice)(object)this, PID.CUMMINS_ONAN_GENERATOR_FAULT_CODE);
			_relayPropertyChangedSource = new NotifyPropertyChangedProxySource((INotifyPropertyChanged)(object)this, new ProxyOnPropertyChanged(((CommonNotifyPropertyChanged)this).OnPropertyChanged), (INotifyPropertyChanged)(object)this, "RelayPropertySource");
			GeneratorQuietHoursEnable = (ILogicalDevicePidBool)new LogicalDevicePidStub((ILogicalDevice)(object)this, PID.GENERATOR_QUIET_HOURS_ENABLED, 2uL);
			GeneratorQuietHoursStartTimePid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidStub((ILogicalDevice)(object)this, PID.GENERATOR_QUIET_HOURS_START_TIME, 0uL);
			GeneratorQuietHoursEndTimePid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidStub((ILogicalDevice)(object)this, PID.GENERATOR_QUIET_HOURS_END_TIME, 0uL);
			GeneratorAutoStartLowVoltagePid = (ILogicalDevicePidFixedPoint)new LogicalDevicePidStub((ILogicalDevice)(object)this, PID.GENERATOR_AUTO_START_LOW_VOLTAGE, 0uL);
			GeneratorAutoStartHiTempCelicusPid = (ILogicalDevicePidFixedPointBool)new LogicalDevicePidStub((ILogicalDevice)(object)this, PID.GENERATOR_AUTO_START_HI_TEMP_C, 0uL);
			GeneratorAutoRunDurationMinutesPid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidStub((ILogicalDevice)(object)this, PID.GENERATOR_AUTO_RUN_DURATION_MINUTES, 0uL);
			GeneratorAutoRunMinOffTimeMinutesPid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidStub((ILogicalDevice)(object)this, PID.GENERATOR_AUTO_RUN_MIN_OFF_TIME_MINUTES, 0uL);
		}

		public IHourMeter GetHourMeter()
		{
			//IL_005a: Unknown result type (might be due to invalid IL or missing references)
			//IL_006a: Expected O, but got Unknown
			//IL_0065: Unknown result type (might be due to invalid IL or missing references)
			//IL_006f: Expected O, but got Unknown
			if (_hourMeter != null)
			{
				return _hourMeter;
			}
			NotifyPropertyChangedProxySource hourMeterPropertyChangedSource = _hourMeterPropertyChangedSource;
			if (hourMeterPropertyChangedSource != null)
			{
				((CommonDisposable)hourMeterPropertyChangedSource).Dispose();
			}
			_hourMeterPropertyChangedSource = null;
			_hourMeter = LogicalDeviceHourMeter.FindAssociatedHourMeter((ILogicalDevice)(object)this);
			if (_hourMeter != null)
			{
				Log.Debug<LogicalDeviceRelayGenerator<TRelayBasicStatus, TRelayCommandFactory, TCapability>, IHourMeter>("{LogicalDeviceRelayGenerator} with hour meter {_hourMeter}", this, _hourMeter);
				_hourMeterPropertyChangedSource = new NotifyPropertyChangedProxySource((INotifyPropertyChanged)_hourMeter, new ProxyOnPropertyChanged(((CommonNotifyPropertyChanged)this).OnPropertyChanged), (INotifyPropertyChanged)(object)this, "HourMeterPropertySource");
			}
			if (((LogicalDevicePidProxy<ILogicalDevicePidTimeSpan>)(object)_hourMeterMaintenancePeriodSecPid).DevicePid != _hourMeter?.HourMeterMaintenancePeriodSecPid)
			{
				((LogicalDevicePidProxy<ILogicalDevicePidTimeSpan>)(object)_hourMeterMaintenancePeriodSecPid).DevicePid = _hourMeter?.HourMeterMaintenancePeriodSecPid;
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("HourMeterMaintenancePeriodSecPid", true);
			}
			if (((LogicalDevicePidProxy<ILogicalDevicePidTimeSpan>)(object)_hourMeterLastMaintenanceTimePid).DevicePid != _hourMeter?.HourMeterLastMaintenanceTimePid)
			{
				((LogicalDevicePidProxy<ILogicalDevicePidTimeSpan>)(object)_hourMeterLastMaintenanceTimePid).DevicePid = _hourMeter?.HourMeterLastMaintenanceTimePid;
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("HourMeterLastMaintenanceTimePid", true);
			}
			return _hourMeter;
		}

		protected static string GeneratorFaultCodeMapToString(ulong code)
		{
			return "";
		}

		public override void Dispose(bool disposing)
		{
			((CommonDisposableNotifyPropertyChanged)_hourMeterMaintenancePeriodSecPid).TryDispose();
			((CommonDisposableNotifyPropertyChanged)_hourMeterLastMaintenanceTimePid).TryDispose();
			try
			{
				NotifyPropertyChangedProxySource hourMeterPropertyChangedSource = _hourMeterPropertyChangedSource;
				if (hourMeterPropertyChangedSource != null)
				{
					((CommonDisposable)hourMeterPropertyChangedSource).Dispose();
				}
			}
			catch (Object)
			{
			}
			_hourMeterPropertyChangedSource = null;
			try
			{
				NotifyPropertyChangedProxySource relayPropertyChangedSource = _relayPropertyChangedSource;
				if (relayPropertyChangedSource != null)
				{
					((CommonDisposable)relayPropertyChangedSource).Dispose();
				}
			}
			catch (Object)
			{
			}
			_relayPropertyChangedSource = null;
			base.Dispose(disposing);
		}

		public Task<CommandResult> SendGeneratorOnePressOnCommandAsync()
		{
			return Task.FromResult<CommandResult>((CommandResult)7);
		}

		public Task<CommandResult> SendGeneratorOnePressOffCommandAsync()
		{
			return Task.FromResult<CommandResult>((CommandResult)7);
		}
	}
	internal class LogicalDeviceRelayGeneratorFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_0039: Unknown result type (might be due to invalid IL or missing references)
			//IL_0059: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DeviceCategory.GetDeviceCategory(logicalDeviceId) != DeviceCategory.Generator)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) == 6)
			{
				LogicalDeviceRelayCapabilityType1 capability = new LogicalDeviceRelayCapabilityType1(rawCapability);
				return (ILogicalDevice)(object)new LogicalDeviceRelayGeneratorType1(logicalDeviceId, capability, service);
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) == 33)
			{
				LogicalDeviceRelayCapabilityType2 capability2 = new LogicalDeviceRelayCapabilityType2(rawCapability);
				return (ILogicalDevice)(object)new LogicalDeviceRelayGeneratorType2(logicalDeviceId, capability2, service);
			}
			return null;
		}
	}
	public class LogicalDeviceRelayGeneratorType1Sim : LogicalDeviceRelayHBridgeMomentaryType1Sim, ILogicalDeviceGeneratorRelay, ILogicalDeviceGenerator, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IGenerator, IHourMeter, ILogicalDeviceSimulated
	{
		private const string RelayNotifyPropertySourceKey = "RelayPropertySource";

		private NotifyPropertyChangedProxySource _relayPropertyChangedSource;

		public bool IsTemperatureSupported => false;

		public bool IsTemperatureSensorValid => false;

		public float TemperatureFahrenheit => FixedPointUnsignedBigEndian8X8.ToFloat((ushort)32768);

		public bool IsBatteryVoltageSupported => false;

		public float BatteryVoltage => 0f;

		public bool IsQuietHoursSupported => false;

		public bool QuietHoursActive => false;

		[field: CompilerGenerated]
		public ILogicalDevicePidBool GeneratorQuietHoursEnable
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan GeneratorQuietHoursStartTimePid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan GeneratorQuietHoursEndTimePid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public bool IsAutoRunSupported => false;

		public bool IsAutoRunOnTempSupported => false;

		public bool IsAutoRunOnTempAvailable => false;

		[field: CompilerGenerated]
		public ILogicalDevicePidFixedPoint GeneratorAutoStartLowVoltagePid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidFixedPointBool GeneratorAutoStartHiTempCelicusPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan GeneratorAutoRunDurationMinutesPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan GeneratorAutoRunMinOffTimeMinutesPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public bool IsHourMeterSupported
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public bool HasHourMeter
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public bool Error => false;

		public bool MaintenancePastDue => false;

		public bool MaintenanceDue => false;

		public bool Running
		{
			get
			{
				if (!HasHourMeter || base.RelayEnergized != RelayHBridgeEnergized.Relay2)
				{
					return false;
				}
				return true;
			}
		}

		public ulong OperatingSeconds
		{
			get
			{
				if (!HasHourMeter)
				{
					return 0uL;
				}
				return 15120uL;
			}
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan HourMeterMaintenancePeriodSecPid
		{
			[CompilerGenerated]
			get;
		} = (ILogicalDevicePidTimeSpan)new LogicalDevicePidSimTimeSpan((LogicalDevicePidTimeSpanPrecision)2, PID.MAINTENANCE_PERIOD_SEC, 0uL);

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan HourMeterLastMaintenanceTimePid
		{
			[CompilerGenerated]
			get;
		} = (ILogicalDevicePidTimeSpan)new LogicalDevicePidSimTimeSpan((LogicalDevicePidTimeSpanPrecision)2, PID.LAST_MAINTENANCE_TIME_SEC, 0uL);

		[field: CompilerGenerated]
		public ILogicalDevicePidMap<string> CumminsOnanGeneratorFaultCode
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public GeneratorType GeneratorType => GeneratorType.Generic;

		[NotifyPropertyChangedProxy("RelayPropertySource", "RelayEnergized", "GeneratorCurrentState")]
		public GeneratorState GeneratorCurrentState
		{
			get
			{
				if (Running)
				{
					if (base.RelayEnergized != RelayHBridgeEnergized.Relay1)
					{
						return GeneratorState.Running;
					}
					return GeneratorState.Stopping;
				}
				if (base.RelayEnergized != RelayHBridgeEnergized.Relay2)
				{
					return GeneratorState.Off;
				}
				return GeneratorState.Starting;
			}
		}

		public bool IsGeneratorOnePressCommandsSupported => false;

		public LogicalDeviceRelayGeneratorType1Sim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service, bool hasHourMeter)
			: base(logicalDeviceId, service)
		{
			//IL_0009: Unknown result type (might be due to invalid IL or missing references)
			//IL_0013: Expected O, but got Unknown
			//IL_001c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Expected O, but got Unknown
			//IL_0073: Unknown result type (might be due to invalid IL or missing references)
			//IL_0083: Expected O, but got Unknown
			//IL_007e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0088: Expected O, but got Unknown
			//IL_0091: Unknown result type (might be due to invalid IL or missing references)
			//IL_009b: Expected O, but got Unknown
			//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ae: Expected O, but got Unknown
			//IL_00b7: Unknown result type (might be due to invalid IL or missing references)
			//IL_00c1: Expected O, but got Unknown
			//IL_00ca: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d4: Expected O, but got Unknown
			//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e7: Expected O, but got Unknown
			//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
			//IL_00fa: Expected O, but got Unknown
			//IL_0103: Unknown result type (might be due to invalid IL or missing references)
			//IL_010d: Expected O, but got Unknown
			IsHourMeterSupported = hasHourMeter;
			HasHourMeter = hasHourMeter;
			CumminsOnanGeneratorFaultCode = (ILogicalDevicePidMap<string>)(object)new LogicalDevicePidMapStub<string>(0uL, (Func<ulong, string>)GeneratorFaultCodeMapToString, (ILogicalDevice)(object)this, PID.CUMMINS_ONAN_GENERATOR_FAULT_CODE);
			_relayPropertyChangedSource = new NotifyPropertyChangedProxySource((INotifyPropertyChanged)(object)this, new ProxyOnPropertyChanged(((CommonNotifyPropertyChanged)this).OnPropertyChanged), (INotifyPropertyChanged)(object)this, "RelayPropertySource");
			GeneratorQuietHoursEnable = (ILogicalDevicePidBool)new LogicalDevicePidStub((ILogicalDevice)(object)this, PID.GENERATOR_QUIET_HOURS_ENABLED, 2uL);
			GeneratorQuietHoursStartTimePid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidStub((ILogicalDevice)(object)this, PID.GENERATOR_QUIET_HOURS_START_TIME, 0uL);
			GeneratorQuietHoursEndTimePid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidStub((ILogicalDevice)(object)this, PID.GENERATOR_QUIET_HOURS_END_TIME, 0uL);
			GeneratorAutoStartLowVoltagePid = (ILogicalDevicePidFixedPoint)new LogicalDevicePidStub((ILogicalDevice)(object)this, PID.GENERATOR_AUTO_START_LOW_VOLTAGE, 0uL);
			GeneratorAutoStartHiTempCelicusPid = (ILogicalDevicePidFixedPointBool)new LogicalDevicePidStub((ILogicalDevice)(object)this, PID.GENERATOR_AUTO_START_HI_TEMP_C, 0uL);
			GeneratorAutoRunDurationMinutesPid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidStub((ILogicalDevice)(object)this, PID.GENERATOR_AUTO_RUN_DURATION_MINUTES, 0uL);
			GeneratorAutoRunMinOffTimeMinutesPid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidStub((ILogicalDevice)(object)this, PID.GENERATOR_AUTO_RUN_MIN_OFF_TIME_MINUTES, 0uL);
		}

		protected static string GeneratorFaultCodeMapToString(ulong code)
		{
			return "";
		}

		public override void Dispose(bool disposing)
		{
			try
			{
				NotifyPropertyChangedProxySource relayPropertyChangedSource = _relayPropertyChangedSource;
				if (relayPropertyChangedSource != null)
				{
					((CommonDisposable)relayPropertyChangedSource).Dispose();
				}
			}
			catch (Object)
			{
			}
			_relayPropertyChangedSource = null;
			base.Dispose(disposing);
		}

		public Task<CommandResult> SendGeneratorOnePressOnCommandAsync()
		{
			return Task.FromResult<CommandResult>((CommandResult)7);
		}

		public Task<CommandResult> SendGeneratorOnePressOffCommandAsync()
		{
			return Task.FromResult<CommandResult>((CommandResult)7);
		}
	}
	public interface ILogicalDeviceGenericSensor : ILogicalDeviceWithStatus<LogicalDeviceGenericSensorStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceGenericSensorStatus>, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
		void UpdateAlert(byte[] alertData);
	}
	public class LogicalDeviceGenericSensor : LogicalDevice<LogicalDeviceGenericSensorStatus, ILogicalDeviceCapability>
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass4_0 : Object
		{
			public LogicalDeviceGenericSensor <>4__this;

			public LogicalDeviceAlert newAlert;

			internal void <UpdateAlert>b__0(ILogicalDeviceExAlertChanged logicalDeviceEx)
			{
				logicalDeviceEx.LogicalDeviceAlertChanged((ILogicalDevice)(object)<>4__this, (ILogicalDeviceAlert)null, (ILogicalDeviceAlert)(object)newAlert);
			}
		}

		public override bool IsLegacyDeviceHazardous => false;

		public LogicalDeviceGenericSensor(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService deviceService = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceGenericSensorStatus(), (ILogicalDeviceCapability)new LogicalDeviceCapability(), deviceService, isFunctionClassChangeable)
		{
		}//IL_0007: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Expected O, but got Unknown


		public override void OnDeviceStatusChanged()
		{
			base.OnDeviceStatusChanged();
		}

		public void UpdateAlert(byte[] alertData)
		{
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_002c: Unknown result type (might be due to invalid IL or missing references)
			//IL_002d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0037: Expected O, but got Unknown
			<>c__DisplayClass4_0 CS$<>8__locals4 = new <>c__DisplayClass4_0();
			CS$<>8__locals4.<>4__this = this;
			CS$<>8__locals4.newAlert = new LogicalDeviceAlert(String.Concat("Alert Data: ", BitConverter.ToString(alertData).Trim()), true, default(Nullable<int>));
			((LogicalDevice<ILogicalDeviceCapability>)(object)this).PerformLogicalDeviceExAction<ILogicalDeviceExAlertChanged>((Action<ILogicalDeviceExAlertChanged>)delegate(ILogicalDeviceExAlertChanged logicalDeviceEx)
			{
				logicalDeviceEx.LogicalDeviceAlertChanged((ILogicalDevice)(object)CS$<>8__locals4.<>4__this, (ILogicalDeviceAlert)null, (ILogicalDeviceAlert)(object)CS$<>8__locals4.newAlert);
			});
		}
	}
	public interface IHourMeter : IDevicesCommon, INotifyPropertyChanged
	{
		bool Error { get; }

		bool MaintenancePastDue { get; }

		bool MaintenanceDue { get; }

		bool Running { get; }

		ulong OperatingSeconds { get; }

		ILogicalDevicePidTimeSpan HourMeterLastMaintenanceTimePid { get; }

		ILogicalDevicePidTimeSpan HourMeterMaintenancePeriodSecPid { get; }
	}
	public interface ILogicalDeviceHourMeter : IHourMeter, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatus<LogicalDeviceHourMeterStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceWithStatusUpdate<LogicalDeviceHourMeterStatus>
	{
	}
	public interface ILogicalDeviceHourMeterDirect : ILogicalDeviceHourMeter, IHourMeter, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatus<LogicalDeviceHourMeterStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceWithStatusUpdate<LogicalDeviceHourMeterStatus>, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public interface ILogicalDeviceHourMeterRemote : ILogicalDeviceHourMeter, IHourMeter, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatus<LogicalDeviceHourMeterStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceWithStatusUpdate<LogicalDeviceHourMeterStatus>, ILogicalDeviceRemote
	{
	}
	public class LogicalDeviceHourMeter : LogicalDevice<LogicalDeviceHourMeterStatus, ILogicalDeviceCapability>, ILogicalDeviceHourMeterDirect, ILogicalDeviceHourMeter, IHourMeter, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatus<LogicalDeviceHourMeterStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceWithStatusUpdate<LogicalDeviceHourMeterStatus>, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink, ILogicalDeviceHourMeterRemote, ILogicalDeviceRemote
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass26_0 : Object
		{
			public PRODUCT_ID productId;

			public MAC macAddress;

			internal bool <FindAssociatedHourMeter>b__0(ILogicalDeviceHourMeter foundLogicalDevice)
			{
				return ((ILogicalDevice)foundLogicalDevice).LogicalId.IsMatchingPhysicalHardware(productId, DEVICE_TYPE.op_Implicit((byte)12), 0, macAddress);
			}
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan HourMeterLastMaintenanceTimePid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidTimeSpan HourMeterMaintenancePeriodSecPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteOnline RemoteOnline
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public override bool IsLegacyDeviceHazardous => false;

		public bool Error => ((LogicalDevice<LogicalDeviceHourMeterStatus, ILogicalDeviceCapability>)this).DeviceStatus.Error;

		public bool MaintenancePastDue => ((LogicalDevice<LogicalDeviceHourMeterStatus, ILogicalDeviceCapability>)this).DeviceStatus.MaintenancePastDue;

		public bool MaintenanceDue => ((LogicalDevice<LogicalDeviceHourMeterStatus, ILogicalDeviceCapability>)this).DeviceStatus.MaintenanceDue;

		public bool Running => ((LogicalDevice<LogicalDeviceHourMeterStatus, ILogicalDeviceCapability>)this).DeviceStatus.Running;

		public ulong OperatingSeconds => ((LogicalDevice<LogicalDeviceHourMeterStatus, ILogicalDeviceCapability>)this).DeviceStatus.OperatingSeconds;

		public override bool IsRemoteAccessAvailable
		{
			get
			{
				ILogicalDeviceRemoteManager remoteManager = ((LogicalDevice<ILogicalDeviceCapability>)(object)this).DeviceService.RemoteManager;
				if (remoteManager == null)
				{
					return false;
				}
				return remoteManager.IsRemoteAccessAvailable((ILogicalDeviceRemote)(object)this, (IRemoteChannelDef)(object)RemoteOnline?.Channel);
			}
		}

		public IRemoteChannelDefOnline RemoteOnlineChannel => RemoteOnline?.Channel;

		public LogicalDeviceHourMeter(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceHourMeterStatus(), (ILogicalDeviceCapability)new LogicalDeviceCapability(), service, isFunctionClassChangeable)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0013: Expected O, but got Unknown
			//IL_002f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0039: Expected O, but got Unknown
			//IL_0043: Unknown result type (might be due to invalid IL or missing references)
			//IL_004d: Expected O, but got Unknown
			RemoteOnline = new RemoteOnline((ILogicalDeviceRemote)(object)this, ((LogicalDevice<ILogicalDeviceCapability>)(object)this).RemoteChannels);
			HourMeterLastMaintenanceTimePid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidTimeSpan((LogicalDevicePidTimeSpanPrecision)2, (ILogicalDevice)(object)this, PID.LAST_MAINTENANCE_TIME_SEC, (LogicalDeviceSessionType)2, (Func<ulong, bool>)null);
			HourMeterMaintenancePeriodSecPid = (ILogicalDevicePidTimeSpan)new LogicalDevicePidTimeSpan((LogicalDevicePidTimeSpanPrecision)2, (ILogicalDevice)(object)this, PID.MAINTENANCE_PERIOD_SEC, (LogicalDeviceSessionType)2, (Func<ulong, bool>)null);
		}

		public override void OnDeviceStatusChanged()
		{
			base.OnDeviceStatusChanged();
			Log.Information("Data Changed {LogicalId}: Running = {Running}, Stopping = {Stopping}, Error = {Error}, OperatingSec = {OperatingSeconds}", (object[])(object)new Object[5]
			{
				(Object)((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId,
				(object)((LogicalDevice<LogicalDeviceHourMeterStatus, ILogicalDeviceCapability>)this).DeviceStatus.Running,
				(object)((LogicalDevice<LogicalDeviceHourMeterStatus, ILogicalDeviceCapability>)this).DeviceStatus.Stopping,
				(object)((LogicalDevice<LogicalDeviceHourMeterStatus, ILogicalDeviceCapability>)this).DeviceStatus.Error,
				(object)((LogicalDevice<LogicalDeviceHourMeterStatus, ILogicalDeviceCapability>)this).DeviceStatus.OperatingSeconds
			});
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("Error");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("MaintenancePastDue");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("MaintenanceDue");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("Running");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("OperatingSeconds");
		}

		public static IHourMeter FindAssociatedHourMeter(ILogicalDevice parentLogicalDevice)
		{
			//IL_0089: Unknown result type (might be due to invalid IL or missing references)
			//IL_008e: Unknown result type (might be due to invalid IL or missing references)
			//IL_009d: Unknown result type (might be due to invalid IL or missing references)
			<>c__DisplayClass26_0 CS$<>8__locals4 = new <>c__DisplayClass26_0();
			ILogicalDeviceService deviceService = parentLogicalDevice.DeviceService;
			if (deviceService == null)
			{
				return null;
			}
			CS$<>8__locals4.productId = parentLogicalDevice.LogicalId.ProductId;
			CS$<>8__locals4.macAddress = parentLogicalDevice.LogicalId.ProductMacAddress;
			ILogicalDeviceManager deviceManager = deviceService.DeviceManager;
			List<ILogicalDeviceHourMeter> val = ((deviceManager != null) ? deviceManager.FindLogicalDevices<ILogicalDeviceHourMeter>((Func<ILogicalDeviceHourMeter, bool>)((ILogicalDeviceHourMeter foundLogicalDevice) => ((ILogicalDevice)foundLogicalDevice).LogicalId.IsMatchingPhysicalHardware(CS$<>8__locals4.productId, DEVICE_TYPE.op_Implicit((byte)12), 0, CS$<>8__locals4.macAddress))) : null);
			if (val == null || val.Count == 0)
			{
				Log.Debug<ILogicalDevice>("{ParentLogicalDevice} found no HourMeter", parentLogicalDevice);
				return null;
			}
			if (val.Count == 1)
			{
				return Enumerable.First<ILogicalDeviceHourMeter>((IEnumerable<ILogicalDeviceHourMeter>)(object)val);
			}
			Log.Debug<ILogicalDevice>("{ParentLogicalDevice} found multiple potential HourMeters", parentLogicalDevice);
			IHourMeter hourMeter = null;
			Enumerator<ILogicalDeviceHourMeter> enumerator = val.GetEnumerator();
			try
			{
				while (enumerator.MoveNext())
				{
					ILogicalDeviceHourMeter current = enumerator.Current;
					if ((int)((IDevicesCommon)current).ActiveConnection != 0)
					{
						return current;
					}
					if (hourMeter == null)
					{
						hourMeter = current;
					}
				}
				return hourMeter;
			}
			finally
			{
				((IDisposable)enumerator/*cast due to .constrained prefix*/).Dispose();
			}
		}

		public override void Dispose(bool disposing)
		{
			RemoteOnline remoteOnline = RemoteOnline;
			if (remoteOnline != null)
			{
				((CommonDisposable)remoteOnline).TryDispose();
			}
			RemoteOnline = null;
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceCapability>)(object)this).LastReceivedNetworkStatus;
		}

		TRemoteChannelDef ILogicalDeviceRemote.GetRemoteChannelForChannelId<TRemoteChannelDef>(string channelId)
		{
			return ((LogicalDevice<ILogicalDeviceCapability>)(object)this).GetRemoteChannelForChannelId<TRemoteChannelDef>(channelId);
		}
	}
	public class LogicalDeviceHourMeterFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 12)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceHourMeter(logicalDeviceId, service);
		}
	}
	public interface IReadOnlyLogicalDeviceHourMeterStatus
	{
		bool Running { get; }

		bool MaintenanceDue { get; }

		bool MaintenancePastDue { get; }

		bool Stopping { get; }

		bool Starting { get; }

		bool Error { get; }

		bool IsHourMeterValid { get; }

		uint OperatingSeconds { get; }
	}
	public class LogicalDeviceHourMeterStatus : LogicalDeviceStatusPacketMutable, IReadOnlyLogicalDeviceHourMeterStatus
	{
		private const int MinimumStatusPacketSize = 5;

		public const BasicBitMask RunningStateBit = (BasicBitMask)1;

		public const BasicBitMask MaintenanceDueStateBit = (BasicBitMask)2;

		public const BasicBitMask MaintenancePastDueStateBit = (BasicBitMask)4;

		public const BasicBitMask StoppingStateBit = (BasicBitMask)8;

		public const BasicBitMask StartingStateBit = (BasicBitMask)16;

		public const BasicBitMask ErrorStateBit = (BasicBitMask)32;

		public const BasicBitMask HourMeterInvalidBit = (BasicBitMask)128;

		public const int OperatingSecondsIndex = 0;

		public const int StatusByteIndex = 4;

		public bool Running => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)1, 4);

		public bool MaintenanceDue => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)2, 4);

		public bool MaintenancePastDue => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)4, 4);

		public bool Stopping => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)8, 4);

		public bool Starting => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)16, 4);

		public bool Error => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)32, 4);

		public bool IsHourMeterValid => !((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)128, 4);

		public uint OperatingSeconds
		{
			get
			{
				byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data;
				if (data == null || data.Length < 5)
				{
					return 0u;
				}
				return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetUInt32(0u);
			}
		}

		public LogicalDeviceHourMeterStatus()
			: base(5u)
		{
		}

		public void SetRunning(bool isRunning)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)1, isRunning);
		}

		public void SetMaintenanceDue(bool isMaintenanceDue)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)2, isMaintenanceDue);
		}

		public void SetMaintenancePastDue(bool isMaintenancePastDue)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)4, isMaintenancePastDue);
		}

		public void SetStopping(bool isStopping)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)8, isStopping);
		}

		public void SetStarting(bool isStarting)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)16, isStarting);
		}

		public void SetError(bool isError)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)32, isError);
		}

		public void SetHourMeterValid(bool isValid)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)128, !isValid);
		}

		public void SetOperatingSeconds(uint cycleTime)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt32(cycleTime, 0);
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceHourMeterStatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceHourMeterStatusSerializable>, IReadOnlyLogicalDeviceHourMeterStatus
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceHourMeterStatusSerializable);
			}
		}

		[JsonProperty]
		public bool Running
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool MaintenanceDue
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool MaintenancePastDue
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool Stopping
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool Starting
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool Error
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool IsHourMeterValid
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public uint OperatingSeconds
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceHourMeterStatusSerializable(bool running, bool maintenanceDue, bool maintenancePastDue, bool stopping, bool starting, bool error, bool isHourMeterValid, uint operatingSeconds)
		{
			Running = running;
			MaintenanceDue = maintenanceDue;
			MaintenancePastDue = maintenancePastDue;
			Stopping = stopping;
			Starting = starting;
			Error = error;
			IsHourMeterValid = isHourMeterValid;
			OperatingSeconds = operatingSeconds;
		}

		public LogicalDeviceHourMeterStatusSerializable(LogicalDeviceHourMeterStatus status)
			: this(status.Running, status.MaintenanceDue, status.MaintenancePastDue, status.Stopping, status.Starting, status.Error, status.IsHourMeterValid, status.OperatingSeconds)
		{
		}

		public override byte[] MakeRawData()
		{
			LogicalDeviceHourMeterStatus logicalDeviceHourMeterStatus = new LogicalDeviceHourMeterStatus();
			logicalDeviceHourMeterStatus.SetRunning(Running);
			logicalDeviceHourMeterStatus.SetMaintenanceDue(MaintenanceDue);
			logicalDeviceHourMeterStatus.SetStopping(Stopping);
			logicalDeviceHourMeterStatus.SetStarting(Starting);
			logicalDeviceHourMeterStatus.SetError(Error);
			logicalDeviceHourMeterStatus.SetHourMeterValid(IsHourMeterValid);
			logicalDeviceHourMeterStatus.SetOperatingSeconds(OperatingSeconds);
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceHourMeterStatus).CopyCurrentData();
		}

		public static LogicalDeviceHourMeterStatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceHourMeterStatus logicalDeviceHourMeterStatus = new LogicalDeviceHourMeterStatus();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceHourMeterStatus).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceHourMeterStatus).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceHourMeterStatus).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceHourMeterStatus).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceHourMeterStatus).Update(rawData, rawData.Length, false);
			return new LogicalDeviceHourMeterStatusSerializable(logicalDeviceHourMeterStatus.Running, logicalDeviceHourMeterStatus.MaintenanceDue, logicalDeviceHourMeterStatus.MaintenancePastDue, logicalDeviceHourMeterStatus.Stopping, logicalDeviceHourMeterStatus.Starting, logicalDeviceHourMeterStatus.Error, logicalDeviceHourMeterStatus.IsHourMeterValid, logicalDeviceHourMeterStatus.OperatingSeconds);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceHourMeterStatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceHourMeterStatusSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("Running = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref Running)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", MaintenanceDue = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref MaintenanceDue)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", MaintenancePastDue = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref MaintenancePastDue)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Stopping = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref Stopping)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Starting = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref Starting)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Error = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref Error)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IsHourMeterValid = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsHourMeterValid)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", OperatingSeconds = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<uint, UInt32>(ref OperatingSeconds)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return (((((((base.GetHashCode() * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(Running)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(MaintenanceDue)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(MaintenancePastDue)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(Stopping)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(Starting)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(Error)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsHourMeterValid)) * -1521134295 + EqualityComparer<uint>.Default.GetHashCode(OperatingSeconds);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceHourMeterStatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceHourMeterStatusSerializable(LogicalDeviceHourMeterStatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceHourMeterStatusSerializable>)original)
		{
			Running = original.Running;
			MaintenanceDue = original.MaintenanceDue;
			MaintenancePastDue = original.MaintenancePastDue;
			Stopping = original.Stopping;
			Starting = original.Starting;
			Error = original.Error;
			IsHourMeterValid = original.IsHourMeterValid;
			OperatingSeconds = original.OperatingSeconds;
		}
	}
	[Flags]
	public enum ClimateZoneCommandOptions : Enum
	{
		None = 0,
		AutoAdjustToSupportedConfiguration = 1
	}
	public interface ILogicalDeviceClimateZone : IDevicesActivation, ILogicalDeviceWithStatus<LogicalDeviceClimateZoneStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceClimateZoneStatus>, ILogicalDeviceTemperatureMeasurementInside, ILogicalDeviceTemperatureMeasurement, ILogicalDeviceTemperatureMeasurementOutside, ILogicalDeviceCommandable<ClimateZoneHeatMode>, ILogicalDeviceCommandable, ICommandable<ClimateZoneHeatMode>, ILogicalDeviceCommandable<ClimateZoneFanMode>, ICommandable<ClimateZoneFanMode>, ILogicalDeviceCommandable<ClimateZoneHeatSource>, ICommandable<ClimateZoneHeatSource>
	{
		bool IsRunningCommands { get; }

		ILogicalDeviceClimateZoneCapability DeviceCapability { get; }

		ClimateZoneHeatMode HeatMode { get; }

		ClimateZoneHeatSource HeatSource { get; }

		ClimateZoneFanMode FanMode { get; }

		byte TemperatureSetpointMinimum { get; }

		byte TemperatureSetpointMaximum { get; }

		Task<CommandResult> SendCommandAsync(ClimateZoneHeatMode heatMode, ClimateZoneHeatSource heatSource, ClimateZoneFanMode fanMode, byte lowTripTemperatureFahrenheit, byte highTripTemperatureFahrenheit, ClimateZoneCommandOptions commandOptions = ClimateZoneCommandOptions.AutoAdjustToSupportedConfiguration);
	}
	public interface ILogicalDeviceClimateZoneDirect : ILogicalDeviceClimateZone, IDevicesActivation, ILogicalDeviceWithStatus<LogicalDeviceClimateZoneStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceClimateZoneStatus>, ILogicalDeviceTemperatureMeasurementInside, ILogicalDeviceTemperatureMeasurement, ILogicalDeviceTemperatureMeasurementOutside, ILogicalDeviceCommandable<ClimateZoneHeatMode>, ILogicalDeviceCommandable, ICommandable<ClimateZoneHeatMode>, ILogicalDeviceCommandable<ClimateZoneFanMode>, ICommandable<ClimateZoneFanMode>, ILogicalDeviceCommandable<ClimateZoneHeatSource>, ICommandable<ClimateZoneHeatSource>, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public interface ILogicalDeviceClimateZoneRemote : ILogicalDeviceClimateZone, IDevicesActivation, ILogicalDeviceWithStatus<LogicalDeviceClimateZoneStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceClimateZoneStatus>, ILogicalDeviceTemperatureMeasurementInside, ILogicalDeviceTemperatureMeasurement, ILogicalDeviceTemperatureMeasurementOutside, ILogicalDeviceCommandable<ClimateZoneHeatMode>, ILogicalDeviceCommandable, ICommandable<ClimateZoneHeatMode>, ILogicalDeviceCommandable<ClimateZoneFanMode>, ICommandable<ClimateZoneFanMode>, ILogicalDeviceCommandable<ClimateZoneHeatSource>, ICommandable<ClimateZoneHeatSource>, ILogicalDeviceRemote
	{
	}
	public interface IDirectCommandClimateZone : ILogicalDeviceSourceDirect, ILogicalDeviceSource
	{
		Task<CommandResult> SendDirectCommandClimateZoneAsync(ILogicalDeviceClimateZone logicalDevice, LogicalDeviceClimateZoneCommand command, CancellationToken cancelToken);
	}
	public class LogicalDeviceClimateZone : LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>, ILogicalDeviceClimateZoneDirect, ILogicalDeviceClimateZone, IDevicesActivation, ILogicalDeviceWithStatus<LogicalDeviceClimateZoneStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceClimateZoneStatus>, ILogicalDeviceTemperatureMeasurementInside, ILogicalDeviceTemperatureMeasurement, ILogicalDeviceTemperatureMeasurementOutside, ILogicalDeviceCommandable<ClimateZoneHeatMode>, ILogicalDeviceCommandable, ICommandable<ClimateZoneHeatMode>, ILogicalDeviceCommandable<ClimateZoneFanMode>, ICommandable<ClimateZoneFanMode>, ILogicalDeviceCommandable<ClimateZoneHeatSource>, ICommandable<ClimateZoneHeatSource>, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink, ILogicalDeviceClimateZoneRemote, ILogicalDeviceRemote
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass79_0 : Object
		{
			public LogicalDeviceClimateZone <>4__this;

			public LogicalDeviceClimateZoneCommand command;

			public byte lowTripTemperatureFahrenheit;

			public byte highTripTemperatureFahrenheit;

			internal CommandControl <SendCommandAsync>b__0(ILogicalDevice device)
			{
				if ((byte)((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)<>4__this).DeviceStatus.ProgramedCommand == (byte)command.Command)
				{
					if (((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)<>4__this).DeviceStatus.LowTripTemperatureFahrenheit == lowTripTemperatureFahrenheit)
					{
						if (((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)<>4__this).DeviceStatus.HighTripTemperatureFahrenheit == highTripTemperatureFahrenheit)
						{
							return (CommandControl)0;
						}
						return (CommandControl)1;
					}
					return (CommandControl)1;
				}
				return (CommandControl)1;
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ActivateSession>d__74 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceClimateZone <>4__this;

			public CancellationToken cancelToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_007e: Expected O, but got Unknown
				//IL_00af: Expected O, but got Unknown
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0026: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceClimateZone logicalDeviceClimateZone = <>4__this;
				try
				{
					try
					{
						TaskAwaiter val;
						if (num != 0)
						{
							val = logicalDeviceClimateZone.IdsCanCommandRunner.CommandActivateSession(cancelToken, true).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <ActivateSession>d__74>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val)).GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Error("LogicalDeviceClimateZone", String.Format("Unable to ActiveSession for {0} with error ${1}\n{2}", (object)((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)logicalDeviceClimateZone).LogicalId, (object)ex2.Message, (object)ex2.StackTrace), Array.Empty<object>());
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformCommand>d__100 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceClimateZone <>4__this;

			public ClimateZoneFanMode option;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_012e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0133: Unknown result type (might be due to invalid IL or missing references)
				//IL_0138: Unknown result type (might be due to invalid IL or missing references)
				//IL_013d: Expected O, but got Unknown
				//IL_0162: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0106: Unknown result type (might be due to invalid IL or missing references)
				//IL_010b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0113: Unknown result type (might be due to invalid IL or missing references)
				//IL_002a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_0039: Unknown result type (might be due to invalid IL or missing references)
				//IL_0124: Unknown result type (might be due to invalid IL or missing references)
				//IL_0129: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_004e: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceClimateZone logicalDeviceClimateZone = <>4__this;
				CommandResult result;
				try
				{
					_ = 1;
					try
					{
						TaskAwaiter<CommandResult> val;
						TaskAwaiter val2;
						if (num != 0)
						{
							if (num == 1)
							{
								val = <>u__2;
								<>u__2 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								goto IL_0122;
							}
							val2 = ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).WaitForDeviceStatusToHaveDataAsync((int)logicalDeviceClimateZone.MSCommandTimeout, logicalDeviceClimateZone._commandCancelSource.Token).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <PerformCommand>d__100>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
						val = logicalDeviceClimateZone.SendCommandAsync(((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.ProgramedCommand.HeatMode, ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.ProgramedCommand.HeatSource, option, ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.LowTripTemperatureFahrenheit, ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.HighTripTemperatureFahrenheit).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <PerformCommand>d__100>(ref val, ref this);
							return;
						}
						goto IL_0122;
						IL_0122:
						result = val.GetResult();
					}
					catch (TimeoutException)
					{
						result = (CommandResult)5;
					}
					catch (OperationCanceledException)
					{
						result = (CommandResult)1;
					}
					catch (Object)
					{
						result = (CommandResult)7;
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformCommand>d__101 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceClimateZone <>4__this;

			public ClimateZoneHeatSource option;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_012e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0133: Unknown result type (might be due to invalid IL or missing references)
				//IL_0138: Unknown result type (might be due to invalid IL or missing references)
				//IL_013d: Expected O, but got Unknown
				//IL_0162: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0106: Unknown result type (might be due to invalid IL or missing references)
				//IL_010b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0113: Unknown result type (might be due to invalid IL or missing references)
				//IL_002a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_0039: Unknown result type (might be due to invalid IL or missing references)
				//IL_0124: Unknown result type (might be due to invalid IL or missing references)
				//IL_0129: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_004e: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceClimateZone logicalDeviceClimateZone = <>4__this;
				CommandResult result;
				try
				{
					_ = 1;
					try
					{
						TaskAwaiter<CommandResult> val;
						TaskAwaiter val2;
						if (num != 0)
						{
							if (num == 1)
							{
								val = <>u__2;
								<>u__2 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								goto IL_0122;
							}
							val2 = ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).WaitForDeviceStatusToHaveDataAsync((int)logicalDeviceClimateZone.MSCommandTimeout, logicalDeviceClimateZone._commandCancelSource.Token).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <PerformCommand>d__101>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
						val = logicalDeviceClimateZone.SendCommandAsync(((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.ProgramedCommand.HeatMode, option, ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.ProgramedCommand.FanMode, ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.LowTripTemperatureFahrenheit, ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.HighTripTemperatureFahrenheit).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <PerformCommand>d__101>(ref val, ref this);
							return;
						}
						goto IL_0122;
						IL_0122:
						result = val.GetResult();
					}
					catch (TimeoutException)
					{
						result = (CommandResult)5;
					}
					catch (OperationCanceledException)
					{
						result = (CommandResult)1;
					}
					catch (Object)
					{
						result = (CommandResult)7;
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformCommand>d__99 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceClimateZone <>4__this;

			public ClimateZoneHeatMode option;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_012e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0133: Unknown result type (might be due to invalid IL or missing references)
				//IL_0138: Unknown result type (might be due to invalid IL or missing references)
				//IL_013d: Expected O, but got Unknown
				//IL_0162: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0106: Unknown result type (might be due to invalid IL or missing references)
				//IL_010b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0113: Unknown result type (might be due to invalid IL or missing references)
				//IL_002a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_0039: Unknown result type (might be due to invalid IL or missing references)
				//IL_0124: Unknown result type (might be due to invalid IL or missing references)
				//IL_0129: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_004e: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceClimateZone logicalDeviceClimateZone = <>4__this;
				CommandResult result;
				try
				{
					_ = 1;
					try
					{
						TaskAwaiter<CommandResult> val;
						TaskAwaiter val2;
						if (num != 0)
						{
							if (num == 1)
							{
								val = <>u__2;
								<>u__2 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								goto IL_0122;
							}
							val2 = ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).WaitForDeviceStatusToHaveDataAsync((int)logicalDeviceClimateZone.MSCommandTimeout, logicalDeviceClimateZone._commandCancelSource.Token).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <PerformCommand>d__99>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
						val = logicalDeviceClimateZone.SendCommandAsync(option, ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.ProgramedCommand.HeatSource, ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.ProgramedCommand.FanMode, ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.LowTripTemperatureFahrenheit, ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.HighTripTemperatureFahrenheit).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <PerformCommand>d__99>(ref val, ref this);
							return;
						}
						goto IL_0122;
						IL_0122:
						result = val.GetResult();
					}
					catch (TimeoutException)
					{
						result = (CommandResult)5;
					}
					catch (OperationCanceledException)
					{
						result = (CommandResult)1;
					}
					catch (Object)
					{
						result = (CommandResult)7;
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandAsync>d__79 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceClimateZone <>4__this;

			public byte lowTripTemperatureFahrenheit;

			public byte highTripTemperatureFahrenheit;

			public ClimateZoneCommandOptions commandOptions;

			public ClimateZoneHeatSource heatSource;

			public ClimateZoneHeatMode heatMode;

			public ClimateZoneFanMode fanMode;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_02c1: Expected O, but got Unknown
				//IL_0107: Unknown result type (might be due to invalid IL or missing references)
				//IL_010c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0114: Unknown result type (might be due to invalid IL or missing references)
				//IL_0215: Unknown result type (might be due to invalid IL or missing references)
				//IL_021a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0222: Unknown result type (might be due to invalid IL or missing references)
				//IL_0299: Unknown result type (might be due to invalid IL or missing references)
				//IL_029e: Unknown result type (might be due to invalid IL or missing references)
				//IL_02a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0125: Unknown result type (might be due to invalid IL or missing references)
				//IL_012a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0233: Unknown result type (might be due to invalid IL or missing references)
				//IL_0238: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_02bc: Unknown result type (might be due to invalid IL or missing references)
				//IL_0072: Unknown result type (might be due to invalid IL or missing references)
				//IL_02e6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Invalid comparison between Unknown and I4
				//IL_00d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_0250: Unknown result type (might be due to invalid IL or missing references)
				//IL_0267: Unknown result type (might be due to invalid IL or missing references)
				//IL_026c: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e0: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_0281: Unknown result type (might be due to invalid IL or missing references)
				//IL_0283: Unknown result type (might be due to invalid IL or missing references)
				//IL_01fa: Unknown result type (might be due to invalid IL or missing references)
				//IL_01fc: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceClimateZone logicalDeviceClimateZone = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					switch (num)
					{
					default:
					{
						<>c__DisplayClass79_0 CS$<>8__locals16 = new <>c__DisplayClass79_0
						{
							<>4__this = <>4__this,
							lowTripTemperatureFahrenheit = lowTripTemperatureFahrenheit,
							highTripTemperatureFahrenheit = highTripTemperatureFahrenheit
						};
						if (!((CommonDisposableNotifyPropertyChanged)logicalDeviceClimateZone).IsDisposed)
						{
							if (((Enum)(object)commandOptions).HasFlag((Enum)(object)ClimateZoneCommandOptions.AutoAdjustToSupportedConfiguration))
							{
								heatSource = logicalDeviceClimateZone.MakeSupportedHeatSource(heatSource);
							}
							if ((int)((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)logicalDeviceClimateZone).ActiveConnection == 2)
							{
								val = logicalDeviceClimateZone.SendRemoteCommandAsync(heatMode, heatSource, fanMode, CS$<>8__locals16.lowTripTemperatureFahrenheit, CS$<>8__locals16.highTripTemperatureFahrenheit).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 0);
									<>u__1 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandAsync>d__79>(ref val, ref this);
									return;
								}
								goto IL_0123;
							}
							CS$<>8__locals16.command = new LogicalDeviceClimateZoneCommand(heatMode, heatSource, fanMode, CS$<>8__locals16.lowTripTemperatureFahrenheit, CS$<>8__locals16.highTripTemperatureFahrenheit);
							TaggedLog.Debug("LogicalDeviceClimateZone", String.Format("{0} SendCommandAsync Command: {1}, low temp = {2}, high temp = {3}", (object[])(object)new Object[4]
							{
								(Object)((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)logicalDeviceClimateZone).DeviceName,
								(object)CS$<>8__locals16.command.Command,
								(object)CS$<>8__locals16.lowTripTemperatureFahrenheit,
								(object)CS$<>8__locals16.highTripTemperatureFahrenheit
							}), Array.Empty<object>());
							if (((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)logicalDeviceClimateZone).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceClimateZone) is IDirectCommandClimateZone directCommandClimateZone)
							{
								val = directCommandClimateZone.SendDirectCommandClimateZoneAsync(logicalDeviceClimateZone, CS$<>8__locals16.command, logicalDeviceClimateZone._commandCancelSource.Token).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 1);
									<>u__1 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandAsync>d__79>(ref val, ref this);
									return;
								}
								goto IL_0231;
							}
							val = logicalDeviceClimateZone.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)(object)CS$<>8__locals16.command, logicalDeviceClimateZone._commandCancelSource.Token, (Func<ILogicalDevice, CommandControl>)((ILogicalDevice device) => ((byte)((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)CS$<>8__locals16.<>4__this).DeviceStatus.ProgramedCommand == (byte)CS$<>8__locals16.command.Command) ? ((((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)CS$<>8__locals16.<>4__this).DeviceStatus.LowTripTemperatureFahrenheit == CS$<>8__locals16.lowTripTemperatureFahrenheit) ? ((((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)CS$<>8__locals16.<>4__this).DeviceStatus.HighTripTemperatureFahrenheit == CS$<>8__locals16.highTripTemperatureFahrenheit) ? ((CommandControl)0) : ((CommandControl)1)) : ((CommandControl)1)) : ((CommandControl)1)), (CommandSendOption)1).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 2);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandAsync>d__79>(ref val, ref this);
								return;
							}
							break;
						}
						TaggedLog.Debug("LogicalDeviceClimateZone", String.Concat(((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)logicalDeviceClimateZone).DeviceName, " Generator ExecuteCommand ignored as relay has been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
						goto end_IL_000e;
					}
					case 0:
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_0123;
					case 1:
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_0231;
					case 2:
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							break;
						}
						IL_0231:
						result = val.GetResult();
						goto end_IL_000e;
						IL_0123:
						result = val.GetResult();
						goto end_IL_000e;
					}
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendRemoteCommandAsync>d__83 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceClimateZone <>4__this;

			public ClimateZoneHeatMode heatMode;

			public ClimateZoneHeatSource heatSource;

			public ClimateZoneFanMode fanMode;

			public byte lowTripTemperatureFahrenheit;

			public byte highTripTemperatureFahrenheit;

			private CommandResult <result>5__2;

			private CancellationToken <cancellationToken>5__3;

			private RemoteHvacHeatMode <remoteHeatMode>5__4;

			private TaskAwaiter<bool> <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_06c2: Expected O, but got Unknown
				//IL_0662: Unknown result type (might be due to invalid IL or missing references)
				//IL_0024: Unknown result type (might be due to invalid IL or missing references)
				//IL_0121: Unknown result type (might be due to invalid IL or missing references)
				//IL_0126: Unknown result type (might be due to invalid IL or missing references)
				//IL_012e: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01df: Unknown result type (might be due to invalid IL or missing references)
				//IL_0273: Unknown result type (might be due to invalid IL or missing references)
				//IL_0278: Unknown result type (might be due to invalid IL or missing references)
				//IL_0280: Unknown result type (might be due to invalid IL or missing references)
				//IL_0323: Unknown result type (might be due to invalid IL or missing references)
				//IL_0328: Unknown result type (might be due to invalid IL or missing references)
				//IL_0330: Unknown result type (might be due to invalid IL or missing references)
				//IL_03d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_03d8: Unknown result type (might be due to invalid IL or missing references)
				//IL_03e0: Unknown result type (might be due to invalid IL or missing references)
				//IL_047a: Unknown result type (might be due to invalid IL or missing references)
				//IL_047f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0487: Unknown result type (might be due to invalid IL or missing references)
				//IL_0524: Unknown result type (might be due to invalid IL or missing references)
				//IL_0529: Unknown result type (might be due to invalid IL or missing references)
				//IL_0531: Unknown result type (might be due to invalid IL or missing references)
				//IL_0612: Unknown result type (might be due to invalid IL or missing references)
				//IL_0617: Unknown result type (might be due to invalid IL or missing references)
				//IL_061f: Unknown result type (might be due to invalid IL or missing references)
				//IL_06f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_002c: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Invalid comparison between Unknown and I4
				//IL_0678: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0291: Unknown result type (might be due to invalid IL or missing references)
				//IL_0296: Unknown result type (might be due to invalid IL or missing references)
				//IL_0299: Unknown result type (might be due to invalid IL or missing references)
				//IL_029b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0341: Unknown result type (might be due to invalid IL or missing references)
				//IL_0346: Unknown result type (might be due to invalid IL or missing references)
				//IL_0349: Unknown result type (might be due to invalid IL or missing references)
				//IL_034b: Unknown result type (might be due to invalid IL or missing references)
				//IL_03f1: Unknown result type (might be due to invalid IL or missing references)
				//IL_03f6: Unknown result type (might be due to invalid IL or missing references)
				//IL_03f9: Unknown result type (might be due to invalid IL or missing references)
				//IL_03fb: Unknown result type (might be due to invalid IL or missing references)
				//IL_0498: Unknown result type (might be due to invalid IL or missing references)
				//IL_049d: Unknown result type (might be due to invalid IL or missing references)
				//IL_04a0: Unknown result type (might be due to invalid IL or missing references)
				//IL_04a2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0542: Unknown result type (might be due to invalid IL or missing references)
				//IL_0547: Unknown result type (might be due to invalid IL or missing references)
				//IL_054a: Unknown result type (might be due to invalid IL or missing references)
				//IL_054c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0050: Unknown result type (might be due to invalid IL or missing references)
				//IL_0637: Unknown result type (might be due to invalid IL or missing references)
				//IL_02a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0351: Unknown result type (might be due to invalid IL or missing references)
				//IL_0401: Unknown result type (might be due to invalid IL or missing references)
				//IL_04a8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0193: Unknown result type (might be due to invalid IL or missing references)
				//IL_019d: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0163: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ba: Expected O, but got Unknown
				//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0234: Unknown result type (might be due to invalid IL or missing references)
				//IL_023e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0243: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b9: Unknown result type (might be due to invalid IL or missing references)
				//IL_06b8: Unknown result type (might be due to invalid IL or missing references)
				//IL_06bd: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0258: Unknown result type (might be due to invalid IL or missing references)
				//IL_025a: Unknown result type (might be due to invalid IL or missing references)
				//IL_05d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_05dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_05e2: Unknown result type (might be due to invalid IL or missing references)
				//IL_02e4: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_02f3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0394: Unknown result type (might be due to invalid IL or missing references)
				//IL_039e: Unknown result type (might be due to invalid IL or missing references)
				//IL_03a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_043b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0445: Unknown result type (might be due to invalid IL or missing references)
				//IL_044a: Unknown result type (might be due to invalid IL or missing references)
				//IL_04e5: Unknown result type (might be due to invalid IL or missing references)
				//IL_04ef: Unknown result type (might be due to invalid IL or missing references)
				//IL_04f4: Unknown result type (might be due to invalid IL or missing references)
				//IL_0106: Unknown result type (might be due to invalid IL or missing references)
				//IL_0108: Unknown result type (might be due to invalid IL or missing references)
				//IL_05f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_05f9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0308: Unknown result type (might be due to invalid IL or missing references)
				//IL_030a: Unknown result type (might be due to invalid IL or missing references)
				//IL_03b8: Unknown result type (might be due to invalid IL or missing references)
				//IL_03ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_045f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0461: Unknown result type (might be due to invalid IL or missing references)
				//IL_0509: Unknown result type (might be due to invalid IL or missing references)
				//IL_050b: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceClimateZone logicalDeviceClimateZone = <>4__this;
				CommandResult result;
				try
				{
					if ((uint)num <= 7u)
					{
						goto IL_0057;
					}
					if (!((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)logicalDeviceClimateZone).IsRemoteAccessAvailable || ((CommonDisposableNotifyPropertyChanged)logicalDeviceClimateZone).IsDisposed)
					{
						result = (CommandResult)9;
					}
					else
					{
						<result>5__2 = (CommandResult)0;
						<remoteHeatMode>5__4 = logicalDeviceClimateZone.RemoteHeatMode;
						if ((int)((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)logicalDeviceClimateZone).ActiveConnection == 2 && <remoteHeatMode>5__4 != null)
						{
							goto IL_0057;
						}
						result = (CommandResult)9;
					}
					goto end_IL_000e;
					IL_0057:
					try
					{
						TaskAwaiter<CommandResult> val2;
						TaskAwaiter<bool> val;
						CommandResult result2;
						switch (num)
						{
						default:
						{
							LogicalDeviceClimateZone logicalDeviceClimateZone2 = logicalDeviceClimateZone;
							bool flag = false;
							try
							{
								Monitor.Enter((object)logicalDeviceClimateZone2, ref flag);
								logicalDeviceClimateZone._remoteCommandRunningCount++;
								CancellationTokenSource remoteCommandCancellationTokenSource = logicalDeviceClimateZone._remoteCommandCancellationTokenSource;
								if (remoteCommandCancellationTokenSource != null)
								{
									CancellationTokenSourceExtension.TryCancel(remoteCommandCancellationTokenSource);
								}
								logicalDeviceClimateZone._remoteCommandCancellationTokenSource = new CancellationTokenSource((int)logicalDeviceClimateZone.MSCommandTimeout);
								<cancellationToken>5__3 = logicalDeviceClimateZone._remoteCommandCancellationTokenSource.Token;
							}
							finally
							{
								if (num < 0 && flag)
								{
									Monitor.Exit((object)logicalDeviceClimateZone2);
								}
							}
							val = TaskExtension.TryDelay(500, <cancellationToken>5__3).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SendRemoteCommandAsync>d__83>(ref val, ref this);
								return;
							}
							goto IL_013d;
						}
						case 0:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_013d;
						case 1:
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_01ee;
						case 2:
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_028f;
						case 3:
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_033f;
						case 4:
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_03ef;
						case 5:
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0496;
						case 6:
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0540;
						case 7:
							{
								val = <>u__1;
								<>u__1 = default(TaskAwaiter<bool>);
								num = (<>1__state = -1);
								goto IL_062e;
							}
							IL_02a0:
							if ((int)<result>5__2 == 0 && !((CancellationToken)(ref <cancellationToken>5__3)).IsCancellationRequested && heatSource != ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.ProgramedCommand.HeatSource)
							{
								val2 = logicalDeviceClimateZone.RemoteHeatSource.SendHeatSourceCommand(heatSource, <cancellationToken>5__3).GetAwaiter();
								if (!val2.IsCompleted)
								{
									num = (<>1__state = 3);
									<>u__2 = val2;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__83>(ref val2, ref this);
									return;
								}
								goto IL_033f;
							}
							goto IL_0350;
							IL_0496:
							result2 = val2.GetResult();
							<result>5__2 = result2;
							goto IL_04a7;
							IL_013d:
							val.GetResult();
							if (<remoteHeatMode>5__4.IsCommandOneShotSupported)
							{
								if (((CancellationToken)(ref <cancellationToken>5__3)).IsCancellationRequested)
								{
									result = (CommandResult)1;
									break;
								}
								val2 = <remoteHeatMode>5__4.SendRemoteCommandAsync(new LogicalDeviceClimateZoneCommand(heatMode, heatSource, fanMode, lowTripTemperatureFahrenheit, highTripTemperatureFahrenheit), <cancellationToken>5__3).GetAwaiter();
								if (!val2.IsCompleted)
								{
									num = (<>1__state = 1);
									<>u__2 = val2;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__83>(ref val2, ref this);
									return;
								}
								goto IL_01ee;
							}
							if (!((CancellationToken)(ref <cancellationToken>5__3)).IsCancellationRequested && heatMode != ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.ProgramedCommand.HeatMode)
							{
								val2 = logicalDeviceClimateZone.RemoteHeatMode.SendHeatModeCommand(heatMode, <cancellationToken>5__3).GetAwaiter();
								if (!val2.IsCompleted)
								{
									num = (<>1__state = 2);
									<>u__2 = val2;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__83>(ref val2, ref this);
									return;
								}
								goto IL_028f;
							}
							goto IL_02a0;
							IL_03ef:
							result2 = val2.GetResult();
							<result>5__2 = result2;
							goto IL_0400;
							IL_04a7:
							if ((int)<result>5__2 == 0 && !((CancellationToken)(ref <cancellationToken>5__3)).IsCancellationRequested && highTripTemperatureFahrenheit != ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.HighTripTemperatureFahrenheit)
							{
								val2 = logicalDeviceClimateZone.RemoteTemperatureControlHigh.SendSetTemperatureCommand(highTripTemperatureFahrenheit, <cancellationToken>5__3).GetAwaiter();
								if (!val2.IsCompleted)
								{
									num = (<>1__state = 6);
									<>u__2 = val2;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__83>(ref val2, ref this);
									return;
								}
								goto IL_0540;
							}
							goto IL_0636;
							IL_033f:
							result2 = val2.GetResult();
							<result>5__2 = result2;
							goto IL_0350;
							IL_0350:
							if ((int)<result>5__2 == 0 && !((CancellationToken)(ref <cancellationToken>5__3)).IsCancellationRequested && fanMode != ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.ProgramedCommand.FanMode)
							{
								val2 = logicalDeviceClimateZone.RemoteFanMode.SendFanModeCommand(fanMode, <cancellationToken>5__3).GetAwaiter();
								if (!val2.IsCompleted)
								{
									num = (<>1__state = 4);
									<>u__2 = val2;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__83>(ref val2, ref this);
									return;
								}
								goto IL_03ef;
							}
							goto IL_0400;
							IL_01ee:
							val2.GetResult();
							goto IL_0636;
							IL_0400:
							if ((int)<result>5__2 == 0 && !((CancellationToken)(ref <cancellationToken>5__3)).IsCancellationRequested && lowTripTemperatureFahrenheit != ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.LowTripTemperatureFahrenheit)
							{
								val2 = logicalDeviceClimateZone.RemoteTemperatureControlLow.SendSetTemperatureCommand(lowTripTemperatureFahrenheit, <cancellationToken>5__3).GetAwaiter();
								if (!val2.IsCompleted)
								{
									num = (<>1__state = 5);
									<>u__2 = val2;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__83>(ref val2, ref this);
									return;
								}
								goto IL_0496;
							}
							goto IL_04a7;
							IL_062e:
							val.GetResult();
							goto IL_0636;
							IL_0540:
							result2 = val2.GetResult();
							<result>5__2 = result2;
							goto IL_0636;
							IL_0636:
							if ((int)<result>5__2 == 0 && !((CancellationToken)(ref <cancellationToken>5__3)).IsCancellationRequested && (((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.ProgramedCommand.HeatMode != heatMode || ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.ProgramedCommand.HeatSource != heatSource || ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.ProgramedCommand.FanMode != fanMode || ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.LowTripTemperatureFahrenheit != lowTripTemperatureFahrenheit || ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZone).DeviceStatus.HighTripTemperatureFahrenheit != highTripTemperatureFahrenheit))
							{
								val = TaskExtension.TryDelay(100, <cancellationToken>5__3).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 7);
									<>u__1 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SendRemoteCommandAsync>d__83>(ref val, ref this);
									return;
								}
								goto IL_062e;
							}
							goto end_IL_0057;
							IL_028f:
							result2 = val2.GetResult();
							<result>5__2 = result2;
							goto IL_02a0;
						}
						goto end_IL_000e;
						end_IL_0057:;
					}
					finally
					{
						if (num < 0)
						{
							LogicalDeviceClimateZone logicalDeviceClimateZone2 = logicalDeviceClimateZone;
							bool flag = false;
							try
							{
								Monitor.Enter((object)logicalDeviceClimateZone2, ref flag);
								if ((int)<result>5__2 == 0 && ((CancellationToken)(ref <cancellationToken>5__3)).IsCancellationRequested)
								{
									<result>5__2 = (CommandResult)5;
								}
								CancellationTokenSource remoteCommandCancellationTokenSource2 = logicalDeviceClimateZone._remoteCommandCancellationTokenSource;
								if (remoteCommandCancellationTokenSource2 != null)
								{
									CancellationTokenSourceExtension.TryCancelAndDispose(remoteCommandCancellationTokenSource2);
								}
								if (logicalDeviceClimateZone._remoteCommandRunningCount > 0)
								{
									logicalDeviceClimateZone._remoteCommandRunningCount--;
								}
							}
							finally
							{
								if (num < 0 && flag)
								{
									Monitor.Exit((object)logicalDeviceClimateZone2);
								}
							}
						}
					}
					result = <result>5__2;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<remoteHeatMode>5__4 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<remoteHeatMode>5__4 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceClimateZone";

		protected RemoteCommandControl RemoteCommandControl = new RemoteCommandControl();

		protected ILogicalDeviceCommandRunnerIdsCan IdsCanCommandRunner;

		private CancellationTokenSource _commandCancelSource = new CancellationTokenSource();

		private readonly LogicalDevicePidByte _temperatureSetpointMinimumPid;

		private readonly LogicalDevicePidByte _temperatureSetpointMaximumPid;

		private const byte TemperatureSetpointMinimumDefault = 47;

		private const byte TemperatureSetpointMaximumDefault = 92;

		private Nullable<byte> _temperatureSetpointMinimum;

		private Nullable<byte> _temperatureSetpointMaximum;

		public const int FixHeatSourceMinimumTimeMsBetweenAttempts = 4000;

		private long _fixHeatSourceLastAttemptedTimestampMs;

		private CancellationTokenSource _remoteCommandCancellationTokenSource;

		private int _remoteCommandRunningCount;

		public virtual uint MSCommandTimeout => 10000u;

		public virtual uint MSSessionTimeout => 15000u;

		public override bool IsLegacyDeviceHazardous => false;

		[field: CompilerGenerated]
		public RemoteOnline RemoteOnline
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteHvacTemperatureControlFahrenheit RemoteTemperatureControlHigh
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteHvacTemperatureControlFahrenheit RemoteTemperatureControlLow
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteHvacTemperatureFahrenheit RemoteTemperatureInside
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteHvacTemperatureFahrenheit RemoteTemperatureOutside
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteHvacHeatMode RemoteHeatMode
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteHvacFanMode RemoteFanMode
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteHvacHeatSource RemoteHeatSource
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteHvacZoneStatus RemoteZoneStatus
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public byte TemperatureSetpointMinimum
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_0006: Unknown result type (might be due to invalid IL or missing references)
				Nullable<byte> temperatureSetpointMinimum = _temperatureSetpointMinimum;
				if (temperatureSetpointMinimum.HasValue)
				{
					return _temperatureSetpointMinimum.Value;
				}
				return 47;
			}
			set
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				_temperatureSetpointMinimum = new Nullable<byte>(value);
			}
		}

		public byte TemperatureSetpointMaximum
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_0006: Unknown result type (might be due to invalid IL or missing references)
				Nullable<byte> temperatureSetpointMaximum = _temperatureSetpointMaximum;
				if (temperatureSetpointMaximum.HasValue)
				{
					return _temperatureSetpointMaximum.Value;
				}
				return 92;
			}
			set
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				_temperatureSetpointMaximum = new Nullable<byte>(value);
			}
		}

		public ClimateZoneHeatMode HeatMode => ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.ProgramedCommand.HeatMode;

		public ClimateZoneHeatSource HeatSource => ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.ProgramedCommand.HeatSource;

		public ClimateZoneFanMode FanMode => ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.ProgramedCommand.FanMode;

		public bool CommandSessionActivated => IdsCanCommandRunner.CommandSessionActivated;

		public bool IsRunningCommands
		{
			get
			{
				if (!IdsCanCommandRunner.IsRunningCommands)
				{
					return _remoteCommandRunningCount > 0;
				}
				return true;
			}
		}

		public override bool IsRemoteAccessAvailable
		{
			get
			{
				ILogicalDeviceRemoteManager remoteManager = ((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).DeviceService.RemoteManager;
				if (remoteManager == null)
				{
					return false;
				}
				return remoteManager.IsRemoteAccessAvailable((ILogicalDeviceRemote)(object)this, (IRemoteChannelDef)(object)RemoteOnline?.Channel);
			}
		}

		public IRemoteChannelDefOnline RemoteOnlineChannel => RemoteOnline?.Channel;

		[field: CompilerGenerated]
		public LogicalDeviceExScope TemperatureMeasurementInsideScope
		{
			[CompilerGenerated]
			get;
		} = (LogicalDeviceExScope)1;

		public ITemperatureMeasurement TemperatureMeasurementInside
		{
			get
			{
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_002e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				float indoorTemperatureFahrenheit = ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.IndoorTemperatureFahrenheit;
				if (!((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.IsIndoorTemperatureSensorValid || !((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus).HasData)
				{
					return (ITemperatureMeasurement)(object)default(TemperatureMeasurementUnknown);
				}
				return (ITemperatureMeasurement)(object)new TemperatureMeasurementFahrenheit(indoorTemperatureFahrenheit);
			}
		}

		[field: CompilerGenerated]
		public LogicalDeviceExScope TemperatureMeasurementOutsideScope
		{
			[CompilerGenerated]
			get;
		} = (LogicalDeviceExScope)2;

		public ITemperatureMeasurement TemperatureMeasurementOutside
		{
			get
			{
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_002e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				float outdoorTemperatureFahrenheit = ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.OutdoorTemperatureFahrenheit;
				if (!((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.IsOutdoorTemperatureSensorValid || !((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus).HasData)
				{
					return (ITemperatureMeasurement)(object)default(TemperatureMeasurementUnknown);
				}
				return (ITemperatureMeasurement)(object)new TemperatureMeasurementFahrenheit(outdoorTemperatureFahrenheit);
			}
		}

		public LogicalDeviceClimateZone(ILogicalDeviceId logicalDeviceId, ILogicalDeviceClimateZoneCapability climateZoneCapability, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceClimateZoneStatus(), climateZoneCapability, service, isFunctionClassChangeable)
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Expected O, but got Unknown
			//IL_0018: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0100: Unknown result type (might be due to invalid IL or missing references)
			//IL_010a: Expected O, but got Unknown
			//IL_0112: Unknown result type (might be due to invalid IL or missing references)
			//IL_011c: Expected O, but got Unknown
			//IL_011e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0123: Unknown result type (might be due to invalid IL or missing references)
			//IL_012f: Expected O, but got Unknown
			//IL_012f: Unknown result type (might be due to invalid IL or missing references)
			//IL_013b: Expected O, but got Unknown
			//IL_0140: Expected O, but got Unknown
			RemoteOnline = new RemoteOnline((ILogicalDeviceRemote)(object)this, ((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).RemoteChannels);
			RemoteTemperatureControlHigh = new RemoteHvacTemperatureControlFahrenheit(this, RemoteHvacTemperatureControlSelector.HighTripTemperatureFahrenheit, RemoteCommandControl, ((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).RemoteChannels);
			RemoteTemperatureControlLow = new RemoteHvacTemperatureControlFahrenheit(this, RemoteHvacTemperatureControlSelector.LowTripTemperatureFahrenheit, RemoteCommandControl, ((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).RemoteChannels);
			RemoteTemperatureInside = new RemoteHvacTemperatureFahrenheit(this, RemoteHvacTemperatureFahrenheitSelector.InsideTemperatureFahrenheit, ((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).RemoteChannels);
			RemoteTemperatureOutside = new RemoteHvacTemperatureFahrenheit(this, RemoteHvacTemperatureFahrenheitSelector.OutsideTemperatureFahrenheit, ((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).RemoteChannels);
			RemoteHeatMode = new RemoteHvacHeatMode(this, RemoteCommandControl, ((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).RemoteChannels);
			RemoteFanMode = new RemoteHvacFanMode(this, RemoteCommandControl, ((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).RemoteChannels);
			RemoteHeatSource = new RemoteHvacHeatSource(this, RemoteCommandControl, ((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).RemoteChannels);
			RemoteZoneStatus = new RemoteHvacZoneStatus(this, ((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).RemoteChannels);
			_temperatureSetpointMinimumPid = new LogicalDevicePidByte((ILogicalDevice)(object)this, PID.TEMPERATURE_SETPOINT_MINIMUM, (LogicalDeviceSessionType)2);
			_temperatureSetpointMaximumPid = new LogicalDevicePidByte((ILogicalDevice)(object)this, PID.TEMPERATURE_SETPOINT_MAXIMUM, (LogicalDeviceSessionType)2);
			LogicalDeviceCommandRunnerIdsCan val = new LogicalDeviceCommandRunnerIdsCan((ILogicalDevice)(object)this);
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).CommandProcessingTime = MSCommandTimeout;
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).SessionKeepAliveTime = MSSessionTimeout;
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)val;
		}

		protected override void UpdateDeviceStatusCompleted(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, int dataLength, int matchingDataLength)
		{
			base.UpdateDeviceStatusCompleted(oldStatusData, statusData, dataLength, matchingDataLength);
			FixHeatSourceIfNeededBasedOnActiveConfiguration(forceFixNow: false);
		}

		public override void OnDeviceStatusChanged()
		{
			base.OnDeviceStatusChanged();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("HeatMode", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("HeatSource", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("FanMode", true);
			TaggedLog.Information("LogicalDeviceClimateZone", String.Format("{0} Data Changed {1}: Status = {2}", (object)((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).DeviceName, (object)((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).LogicalId, (object)((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus), Array.Empty<object>());
		}

		public override void OnDeviceOnlineChanged()
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0014: Unknown result type (might be due to invalid IL or missing references)
			//IL_0046: Unknown result type (might be due to invalid IL or missing references)
			//IL_004b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0024: Unknown result type (might be due to invalid IL or missing references)
			//IL_005b: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).OnDeviceOnlineChanged();
			if ((int)((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).ActiveConnection == 0)
			{
				return;
			}
			Nullable<byte> temperatureSetpointMinimum = _temperatureSetpointMinimum;
			if (!temperatureSetpointMinimum.HasValue)
			{
				_temperatureSetpointMinimumPid.ReadAsync(CancellationToken.None).ContinueWith((Action<Task<byte>>)([CompilerGenerated] (Task<byte> task) =>
				{
					//IL_0007: Unknown result type (might be due to invalid IL or missing references)
					//IL_000c: Unknown result type (might be due to invalid IL or missing references)
					//IL_001c: Unknown result type (might be due to invalid IL or missing references)
					_temperatureSetpointMinimum = new Nullable<byte>(task.Result);
					TaggedLog.Debug("LogicalDeviceClimateZone", String.Format("Successfully read temperature minimum setpoint: {0}.", (object)_temperatureSetpointMinimum), Array.Empty<object>());
					((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("TemperatureSetpointMinimum", true);
				}), (TaskContinuationOptions)393216);
			}
			temperatureSetpointMinimum = _temperatureSetpointMaximum;
			if (!temperatureSetpointMinimum.HasValue)
			{
				_temperatureSetpointMaximumPid.ReadAsync(CancellationToken.None).ContinueWith((Action<Task<byte>>)([CompilerGenerated] (Task<byte> task) =>
				{
					//IL_0007: Unknown result type (might be due to invalid IL or missing references)
					//IL_000c: Unknown result type (might be due to invalid IL or missing references)
					//IL_001c: Unknown result type (might be due to invalid IL or missing references)
					_temperatureSetpointMaximum = new Nullable<byte>(task.Result);
					TaggedLog.Debug("LogicalDeviceClimateZone", String.Format("Successfully read temperature maximum setpoint: {0}.", (object)_temperatureSetpointMaximum), Array.Empty<object>());
					((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("TemperatureSetpointMaximum", true);
				}), (TaskContinuationOptions)393216);
			}
		}

		public override void OnDeviceCapabilityChanged()
		{
			((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).OnDeviceCapabilityChanged();
			FixHeatSourceIfNeededBasedOnActiveConfiguration(forceFixNow: true);
		}

		private void FixHeatSourceIfNeededBasedOnActiveConfiguration(bool forceFixNow)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Invalid comparison between Unknown and I4
			//IL_000a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0010: Invalid comparison between Unknown and I4
			if ((int)((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).ActiveConnection != 1 && (int)((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).ActiveConnection != 3)
			{
				return;
			}
			ClimateZoneHeatSource heatSource = ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.ProgramedCommand.HeatSource;
			ClimateZoneHeatSource climateZoneHeatSource = MakeSupportedHeatSource(heatSource);
			if (climateZoneHeatSource == heatSource)
			{
				return;
			}
			long num = LogicalDeviceFreeRunningTimer.ElapsedMilliseconds - _fixHeatSourceLastAttemptedTimestampMs;
			if (forceFixNow || num >= 4000)
			{
				TaggedLog.Debug("LogicalDeviceClimateZone", String.Format("{0} OnDeviceCapabilityChanged Fix Configuration using Command: {1} instead of {2}", (object)((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).DeviceName, (object)climateZoneHeatSource, (object)heatSource), Array.Empty<object>());
				_fixHeatSourceLastAttemptedTimestampMs = LogicalDeviceFreeRunningTimer.ElapsedMilliseconds;
				SendHeatSourceCommandAsync(climateZoneHeatSource, ClimateZoneCommandOptions.AutoAdjustToSupportedConfiguration).ContinueWith((Action<Task<CommandResult>>)([CompilerGenerated] (Task<CommandResult> result) =>
				{
					string deviceName = ((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).DeviceName;
					AggregateException exception = ((Task)result).Exception;
					TaggedLog.Debug("LogicalDeviceClimateZone", String.Concat(deviceName, " - Error OnDeviceCapabilityChanged ", (exception != null) ? ((Exception)exception).Message : null), Array.Empty<object>());
				}), (TaskContinuationOptions)327680);
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task ActivateSession(CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ActivateSession>d__74 <ActivateSession>d__ = default(<ActivateSession>d__74);
			<ActivateSession>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<ActivateSession>d__.<>4__this = this;
			<ActivateSession>d__.cancelToken = cancelToken;
			<ActivateSession>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Start<<ActivateSession>d__74>(ref <ActivateSession>d__);
			return ((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Task;
		}

		public void DeactivateSession()
		{
			IdsCanCommandRunner.CommandDeactivateSession(true);
		}

		public ClimateZoneHeatSource MakeSupportedHeatSource(ClimateZoneHeatSource desiredHeatSource)
		{
			switch (desiredHeatSource)
			{
			case ClimateZoneHeatSource.PreferGas:
				if (!((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).DeviceCapability.IsGasHeat && ((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).DeviceCapability.IsHeatPump)
				{
					return ClimateZoneHeatSource.PreferHeatPump;
				}
				break;
			case ClimateZoneHeatSource.PreferHeatPump:
				if (!((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).DeviceCapability.IsHeatPump && ((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).DeviceCapability.IsGasHeat)
				{
					return ClimateZoneHeatSource.PreferGas;
				}
				break;
			}
			return desiredHeatSource;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommandAsync(ClimateZoneHeatMode heatMode, ClimateZoneHeatSource heatSource, ClimateZoneFanMode fanMode, byte lowTripTemperatureFahrenheit, byte highTripTemperatureFahrenheit, ClimateZoneCommandOptions commandOptions = ClimateZoneCommandOptions.AutoAdjustToSupportedConfiguration)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandAsync>d__79 <SendCommandAsync>d__ = default(<SendCommandAsync>d__79);
			<SendCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandAsync>d__.<>4__this = this;
			<SendCommandAsync>d__.heatMode = heatMode;
			<SendCommandAsync>d__.heatSource = heatSource;
			<SendCommandAsync>d__.fanMode = fanMode;
			<SendCommandAsync>d__.lowTripTemperatureFahrenheit = lowTripTemperatureFahrenheit;
			<SendCommandAsync>d__.highTripTemperatureFahrenheit = highTripTemperatureFahrenheit;
			<SendCommandAsync>d__.commandOptions = commandOptions;
			<SendCommandAsync>d__.<>1__state = -1;
			<SendCommandAsync>d__.<>t__builder.Start<<SendCommandAsync>d__79>(ref <SendCommandAsync>d__);
			return <SendCommandAsync>d__.<>t__builder.Task;
		}

		protected Task<CommandResult> SendHeatSourceCommandAsync(ClimateZoneHeatSource heatSource, ClimateZoneCommandOptions commandOptions)
		{
			if (((CommonDisposableNotifyPropertyChanged)this).IsDisposed)
			{
				TaggedLog.Debug("LogicalDeviceClimateZone", String.Format("{0} HVAC SendHeatSourceCommandAsync {1} ignored it has been disposed", (object)((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).DeviceName, (object)heatSource), Array.Empty<object>());
				return Task.FromResult<CommandResult>((CommandResult)7);
			}
			return SendCommandAsync(((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.ProgramedCommand.HeatMode, heatSource, ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.ProgramedCommand.FanMode, ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.LowTripTemperatureFahrenheit, ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.HighTripTemperatureFahrenheit, commandOptions);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendRemoteCommandAsync(ClimateZoneHeatMode heatMode, ClimateZoneHeatSource heatSource, ClimateZoneFanMode fanMode, byte lowTripTemperatureFahrenheit, byte highTripTemperatureFahrenheit)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendRemoteCommandAsync>d__83 <SendRemoteCommandAsync>d__ = default(<SendRemoteCommandAsync>d__83);
			<SendRemoteCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendRemoteCommandAsync>d__.<>4__this = this;
			<SendRemoteCommandAsync>d__.heatMode = heatMode;
			<SendRemoteCommandAsync>d__.heatSource = heatSource;
			<SendRemoteCommandAsync>d__.fanMode = fanMode;
			<SendRemoteCommandAsync>d__.lowTripTemperatureFahrenheit = lowTripTemperatureFahrenheit;
			<SendRemoteCommandAsync>d__.highTripTemperatureFahrenheit = highTripTemperatureFahrenheit;
			<SendRemoteCommandAsync>d__.<>1__state = -1;
			<SendRemoteCommandAsync>d__.<>t__builder.Start<<SendRemoteCommandAsync>d__83>(ref <SendRemoteCommandAsync>d__);
			return <SendRemoteCommandAsync>d__.<>t__builder.Task;
		}

		public override void Dispose(bool disposing)
		{
			RemoteOnline remoteOnline = RemoteOnline;
			if (remoteOnline != null)
			{
				((CommonDisposable)remoteOnline).TryDispose();
			}
			RemoteOnline = null;
			RemoteHvacTemperatureControlFahrenheit remoteTemperatureControlHigh = RemoteTemperatureControlHigh;
			if (remoteTemperatureControlHigh != null)
			{
				((CommonDisposable)remoteTemperatureControlHigh).TryDispose();
			}
			RemoteTemperatureControlHigh = null;
			RemoteHvacTemperatureControlFahrenheit remoteTemperatureControlLow = RemoteTemperatureControlLow;
			if (remoteTemperatureControlLow != null)
			{
				((CommonDisposable)remoteTemperatureControlLow).TryDispose();
			}
			RemoteTemperatureControlLow = null;
			RemoteHvacTemperatureFahrenheit remoteTemperatureInside = RemoteTemperatureInside;
			if (remoteTemperatureInside != null)
			{
				((CommonDisposable)remoteTemperatureInside).TryDispose();
			}
			RemoteTemperatureInside = null;
			RemoteHvacTemperatureFahrenheit remoteTemperatureOutside = RemoteTemperatureOutside;
			if (remoteTemperatureOutside != null)
			{
				((CommonDisposable)remoteTemperatureOutside).TryDispose();
			}
			RemoteTemperatureOutside = null;
			RemoteHvacHeatMode remoteHeatMode = RemoteHeatMode;
			if (remoteHeatMode != null)
			{
				((CommonDisposable)remoteHeatMode).TryDispose();
			}
			RemoteHeatMode = null;
			RemoteHvacFanMode remoteFanMode = RemoteFanMode;
			if (remoteFanMode != null)
			{
				((CommonDisposable)remoteFanMode).TryDispose();
			}
			RemoteFanMode = null;
			RemoteHvacHeatSource remoteHeatSource = RemoteHeatSource;
			if (remoteHeatSource != null)
			{
				((CommonDisposable)remoteHeatSource).TryDispose();
			}
			RemoteHeatSource = null;
			RemoteHvacZoneStatus remoteZoneStatus = RemoteZoneStatus;
			if (remoteZoneStatus != null)
			{
				((CommonDisposable)remoteZoneStatus).TryDispose();
			}
			RemoteZoneStatus = null;
			CancellationTokenSource commandCancelSource = _commandCancelSource;
			if (commandCancelSource != null)
			{
				CancellationTokenSourceExtension.CancelAndDispose(commandCancelSource);
			}
			_commandCancelSource = null;
			RemoteCommandControl remoteCommandControl = RemoteCommandControl;
			if (remoteCommandControl != null)
			{
				((CommonDisposable)remoteCommandControl).TryDispose();
			}
			RemoteCommandControl = null;
			ILogicalDeviceCommandRunnerIdsCan idsCanCommandRunner = IdsCanCommandRunner;
			if (idsCanCommandRunner != null)
			{
				((ICommonDisposable)idsCanCommandRunner).TryDispose();
			}
			base.Dispose(disposing);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> PerformCommand(ClimateZoneHeatMode option)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<PerformCommand>d__99 <PerformCommand>d__ = default(<PerformCommand>d__99);
			<PerformCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<PerformCommand>d__.<>4__this = this;
			<PerformCommand>d__.option = option;
			<PerformCommand>d__.<>1__state = -1;
			<PerformCommand>d__.<>t__builder.Start<<PerformCommand>d__99>(ref <PerformCommand>d__);
			return <PerformCommand>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> PerformCommand(ClimateZoneFanMode option)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<PerformCommand>d__100 <PerformCommand>d__ = default(<PerformCommand>d__100);
			<PerformCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<PerformCommand>d__.<>4__this = this;
			<PerformCommand>d__.option = option;
			<PerformCommand>d__.<>1__state = -1;
			<PerformCommand>d__.<>t__builder.Start<<PerformCommand>d__100>(ref <PerformCommand>d__);
			return <PerformCommand>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> PerformCommand(ClimateZoneHeatSource option)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<PerformCommand>d__101 <PerformCommand>d__ = default(<PerformCommand>d__101);
			<PerformCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<PerformCommand>d__.<>4__this = this;
			<PerformCommand>d__.option = option;
			<PerformCommand>d__.<>1__state = -1;
			<PerformCommand>d__.<>t__builder.Start<<PerformCommand>d__101>(ref <PerformCommand>d__);
			return <PerformCommand>d__.<>t__builder.Task;
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).LastReceivedNetworkStatus;
		}

		TRemoteChannelDef ILogicalDeviceRemote.GetRemoteChannelForChannelId<TRemoteChannelDef>(string channelId)
		{
			return ((LogicalDevice<ILogicalDeviceClimateZoneCapability>)(object)this).GetRemoteChannelForChannelId<TRemoteChannelDef>(channelId);
		}
	}
	public class LogicalDeviceClimateZoneFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 16)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceClimateZone(logicalDeviceId, new LogicalDeviceClimateZoneCapability(rawCapability), service);
		}
	}
	[Flags]
	public enum ClimateZoneCapabilityFlag : Enum
	{
		None = 0,
		GasFurnace = 1,
		AirConditioner = 2,
		HeatPump = 4,
		MultiSpeedFan = 8,
		Reserved0 = 0x10,
		Reserved1 = 0x20,
		Reserved2 = 0x40,
		Reserved3 = 0x80
	}
	public interface ILogicalDeviceClimateZoneCapability : ILogicalDeviceCapability, INotifyPropertyChanged
	{
		bool HasAirConditioner { get; }

		bool HasHeatPump { get; }

		bool IsHeatPump { get; }

		bool IsGasHeat { get; }

		bool IsElectricHeat { get; }

		bool IsMultiSpeedFan { get; }

		bool IsValid { get; }
	}
	public class LogicalDeviceClimateZoneCapability : LogicalDeviceCapability, ILogicalDeviceClimateZoneCapability, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		private ClimateZoneCapabilityFlag _capabilityFlag => (ClimateZoneCapabilityFlag)base.RawValue;

		public bool HasAirConditioner => ((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)ClimateZoneCapabilityFlag.AirConditioner);

		public bool HasHeatPump
		{
			get
			{
				if (((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)ClimateZoneCapabilityFlag.HeatPump))
				{
					return HasAirConditioner;
				}
				return false;
			}
		}

		public bool IsHeatPump => ((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)ClimateZoneCapabilityFlag.HeatPump);

		public bool IsGasHeat => ((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)ClimateZoneCapabilityFlag.GasFurnace);

		public bool IsElectricHeat => false;

		public bool IsMultiSpeedFan => ((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)ClimateZoneCapabilityFlag.MultiSpeedFan);

		public bool IsValid => _capabilityFlag != ClimateZoneCapabilityFlag.None;

		public LogicalDeviceClimateZoneCapability(Nullable<byte> rawCapability)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(rawCapability);
		}

		public LogicalDeviceClimateZoneCapability(ClimateZoneCapabilityFlag capabilityFlags)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(new Nullable<byte>((byte)capabilityFlags));
		}

		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("HasAirConditioner");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("HasHeatPump");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsGasHeat");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsElectricHeat");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsMultiSpeedFan");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}
	}
	public enum ClimateZoneHeatMode : Enum
	{
		Off,
		Heating,
		Cooling,
		Both,
		RunSchedule,
		Reserved1,
		Reserved2,
		Reserved3
	}
	public enum ClimateZoneHeatSource : Enum
	{
		PreferGas,
		PreferHeatPump,
		Other,
		Reserved
	}
	public enum ClimateZoneFanMode : Enum
	{
		Auto,
		High,
		Low,
		Reserved
	}
	public struct ClimateZoneCommand : ValueType
	{
		private const byte HeatModeBitmask0 = 1;

		private const byte HeatModeBitmask1 = 2;

		private const byte HeatModeBitmask2 = 4;

		private const byte ReservedBitmask = 8;

		private const byte HeatSourceBitmask0 = 16;

		private const byte HeatSourceBitmask1 = 32;

		private const byte FanModeBitmask0 = 64;

		private const byte FanModeBitmask1 = 128;

		private const byte HeatModeBitmask = 7;

		private const byte HeatSourceBitmask = 48;

		private const byte FanModeBitmask = 192;

		private const byte HeatModeBitShift = 0;

		private const byte HeatSourceBitShift = 4;

		private const byte FanModeBitShift = 6;

		private readonly byte _command;

		public ClimateZoneHeatMode HeatMode => (ClimateZoneHeatMode)UnpackValueFromCommand(_command, 7, 0);

		public ClimateZoneHeatSource HeatSource => (ClimateZoneHeatSource)UnpackValueFromCommand(_command, 48, 4);

		public ClimateZoneFanMode FanMode => (ClimateZoneFanMode)UnpackValueFromCommand(_command, 192, 6);

		public ClimateZoneCommand(byte newCommand)
		{
			_command = newCommand;
		}

		public ClimateZoneCommand(ClimateZoneHeatMode heatMode, ClimateZoneHeatSource heatSource, ClimateZoneFanMode fanSetting)
		{
			byte command = 0;
			command = PackValueIntoCommand(command, 7, 0, (byte)heatMode);
			command = PackValueIntoCommand(command, 48, 4, (byte)heatSource);
			command = PackValueIntoCommand(command, 192, 6, (byte)fanSetting);
			_command = command;
		}

		public static implicit operator byte(ClimateZoneCommand newCommand)
		{
			return newCommand._command;
		}

		public static implicit operator ClimateZoneCommand(byte newCommand)
		{
			return new ClimateZoneCommand(newCommand);
		}

		private static byte UnpackValueFromCommand(byte command, byte commandBitmaskForValue, byte bitshift)
		{
			return (byte)((command & commandBitmaskForValue) >> (int)bitshift);
		}

		private static byte PackValueIntoCommand(byte command, byte commandBitmaskForValue, byte bitshift, byte value)
		{
			return (byte)((command & ~commandBitmaskForValue) | ((value << (int)bitshift) & commandBitmaskForValue));
		}

		public bool IsHeating()
		{
			if (HeatMode != ClimateZoneHeatMode.Both)
			{
				return HeatMode == ClimateZoneHeatMode.Heating;
			}
			return true;
		}

		public override string ToString()
		{
			return String.Format("[ClimateZoneCommand: FanMode={0}, HeatMode={1}, HeatSource={2}]", (object)FanMode, (object)HeatMode, (object)HeatSource);
		}
	}
	public class LogicalDeviceClimateZoneCommand : LogicalDeviceCommandPacket
	{
		private const int CommandPacketSize = 3;

		private const uint CommandByteIndex = 0u;

		private const uint LowTripTemperatureFahrenheitByteIndex = 1u;

		private const uint HighTripTemperatureFahrenheitByteIndex = 2u;

		public ClimateZoneCommand Command => ((LogicalDeviceCommandPacket)this).Data[0];

		public ClimateZoneHeatMode HeatMode => Command.HeatMode;

		public ClimateZoneHeatSource HeatSource => Command.HeatSource;

		public ClimateZoneFanMode FanMode => Command.FanMode;

		public byte LowTripTemperatureFahrenheit => ((LogicalDeviceCommandPacket)this).Data[1];

		public byte HighTripTemperatureFahrenheit => ((LogicalDeviceCommandPacket)this).Data[2];

		public IReadOnlyList<byte> DataMinimum => (IReadOnlyList<byte>)(object)new ArraySegment<byte>(((LogicalDeviceCommandPacket)this).Data, 0, 3);

		public bool IsHeating()
		{
			return Command.IsHeating();
		}

		public LogicalDeviceClimateZoneCommand(ClimateZoneCommand command, byte lowTripTemperatureFahrenheit, byte highTripTemperatureFahrenheit)
			: base((byte)0, (byte[])(object)new Byte[3], 200)
		{
			((LogicalDeviceCommandPacket)this).Data[0] = command;
			((LogicalDeviceCommandPacket)this).Data[1] = lowTripTemperatureFahrenheit;
			((LogicalDeviceCommandPacket)this).Data[2] = highTripTemperatureFahrenheit;
		}

		public LogicalDeviceClimateZoneCommand(ClimateZoneHeatMode heatMode, ClimateZoneHeatSource heatSource, ClimateZoneFanMode fanMode, byte lowTripTemperatureFahrenheit, byte highTripTemperatureFahrenheit)
			: this(new ClimateZoneCommand(heatMode, heatSource, fanMode), lowTripTemperatureFahrenheit, highTripTemperatureFahrenheit)
		{
		}

		public LogicalDeviceClimateZoneCommand(IReadOnlyList<byte> data)
			: base((byte)0, data, 200)
		{
			//IL_0049: Unknown result type (might be due to invalid IL or missing references)
			if (((IReadOnlyCollection<byte>)(object)data).Count != 3)
			{
				throw new ArgumentOutOfRangeException("data", String.Format("Buffer size is {0} when expecting {1}: {2}", (object)((IReadOnlyCollection<byte>)(object)data).Count, (object)3, (object)ArrayExtension.DebugDump(data, 0, ((IReadOnlyCollection<byte>)(object)data).Count, " ", false)));
			}
		}

		public override string ToString()
		{
			return String.Format("[ClimateZoneCommand: FanMode={0}, HeatMode={1}, HeatSource={2}, LowTrip={3} HighTrip={4}]", (object[])(object)new Object[5]
			{
				(object)FanMode,
				(object)HeatMode,
				(object)HeatSource,
				(object)LowTripTemperatureFahrenheit,
				(object)HighTripTemperatureFahrenheit
			});
		}
	}
	public class LogicalDeviceClimateZoneSim : LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>, ILogicalDeviceClimateZone, IDevicesActivation, ILogicalDeviceWithStatus<LogicalDeviceClimateZoneStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceClimateZoneStatus>, ILogicalDeviceTemperatureMeasurementInside, ILogicalDeviceTemperatureMeasurement, ILogicalDeviceTemperatureMeasurementOutside, ILogicalDeviceCommandable<ClimateZoneHeatMode>, ILogicalDeviceCommandable, ICommandable<ClimateZoneHeatMode>, ILogicalDeviceCommandable<ClimateZoneFanMode>, ICommandable<ClimateZoneFanMode>, ILogicalDeviceCommandable<ClimateZoneHeatSource>, ICommandable<ClimateZoneHeatSource>, ILogicalDeviceSimulated
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass40_0 : Object
		{
			public ClimateZoneHeatMode option;

			public LogicalDeviceClimateZoneSim <>4__this;

			internal CommandResult <PerformCommand>b__0()
			{
				ClimateZoneCommand commandStatus = new ClimateZoneCommand(option, ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)<>4__this).DeviceStatus.ProgramedCommand.HeatSource, ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)<>4__this).DeviceStatus.ProgramedCommand.FanMode);
				<>4__this._simStatus.SetCommandStatus(commandStatus);
				return (CommandResult)0;
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass41_0 : Object
		{
			public LogicalDeviceClimateZoneSim <>4__this;

			public ClimateZoneFanMode option;

			internal CommandResult <PerformCommand>b__0()
			{
				ClimateZoneCommand commandStatus = new ClimateZoneCommand(((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)<>4__this).DeviceStatus.ProgramedCommand.HeatMode, ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)<>4__this).DeviceStatus.ProgramedCommand.HeatSource, option);
				<>4__this._simStatus.SetCommandStatus(commandStatus);
				return (CommandResult)0;
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass42_0 : Object
		{
			public LogicalDeviceClimateZoneSim <>4__this;

			public ClimateZoneHeatSource option;

			internal CommandResult <PerformCommand>b__0()
			{
				ClimateZoneCommand commandStatus = new ClimateZoneCommand(((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)<>4__this).DeviceStatus.ProgramedCommand.HeatMode, option, ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)<>4__this).DeviceStatus.ProgramedCommand.FanMode);
				<>4__this._simStatus.SetCommandStatus(commandStatus);
				return (CommandResult)0;
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass9_0 : Object
		{
			[StructLayout((LayoutKind)3)]
			private struct <<-ctor>b__0>d : ValueType, IAsyncStateMachine
			{
				public int <>1__state;

				public AsyncTaskMethodBuilder <>t__builder;

				public <>c__DisplayClass9_0 <>4__this;

				private TaskAwaiter<bool> <>u__1;

				private void MoveNext()
				{
					//IL_00ee: Expected O, but got Unknown
					//IL_00b8: Unknown result type (might be due to invalid IL or missing references)
					//IL_00bd: Unknown result type (might be due to invalid IL or missing references)
					//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
					//IL_007e: Unknown result type (might be due to invalid IL or missing references)
					//IL_0088: Unknown result type (might be due to invalid IL or missing references)
					//IL_008d: Unknown result type (might be due to invalid IL or missing references)
					//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
					//IL_00a2: Unknown result type (might be due to invalid IL or missing references)
					int num = <>1__state;
					<>c__DisplayClass9_0 <>c__DisplayClass9_ = <>4__this;
					try
					{
						if (num != 0)
						{
							goto IL_00db;
						}
						TaskAwaiter<bool> val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_00d3;
						IL_00d3:
						val.GetResult();
						goto IL_00db;
						IL_00db:
						if (!((CancellationToken)(ref <>c__DisplayClass9_.simTaskCancelToken)).IsCancellationRequested)
						{
							((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)<>c__DisplayClass9_.<>4__this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)<>c__DisplayClass9_.<>4__this._simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)<>c__DisplayClass9_.<>4__this._simStatus).Size);
							((CommonNotifyPropertyChanged)<>c__DisplayClass9_.<>4__this).NotifyPropertyChanged("HeatMode", true);
							((CommonNotifyPropertyChanged)<>c__DisplayClass9_.<>4__this).NotifyPropertyChanged("HeatSource", true);
							((CommonNotifyPropertyChanged)<>c__DisplayClass9_.<>4__this).NotifyPropertyChanged("FanMode", true);
							val = TaskExtension.TryDelay(250, <>c__DisplayClass9_.simTaskCancelToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<-ctor>b__0>d>(ref val, ref this);
								return;
							}
							goto IL_00d3;
						}
					}
					catch (Exception ex)
					{
						Exception exception = ex;
						<>1__state = -2;
						((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
						return;
					}
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
				}

				[DebuggerHidden]
				private void SetStateMachine(IAsyncStateMachine stateMachine)
				{
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
				}
			}

			public LogicalDeviceClimateZoneSim <>4__this;

			public CancellationToken simTaskCancelToken;

			[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
			internal Task <.ctor>b__0()
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<-ctor>b__0>d <<-ctor>b__0>d = default(<<-ctor>b__0>d);
				<<-ctor>b__0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<-ctor>b__0>d.<>4__this = this;
				<<-ctor>b__0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<-ctor>b__0>d.<>t__builder)).Start<<<-ctor>b__0>d>(ref <<-ctor>b__0>d);
				return ((AsyncTaskMethodBuilder)(ref <<-ctor>b__0>d.<>t__builder)).Task;
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandAsync>d__22 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public ClimateZoneHeatMode heatMode;

			public ClimateZoneHeatSource heatSource;

			public ClimateZoneFanMode fanMode;

			public LogicalDeviceClimateZoneSim <>4__this;

			public byte lowTripTemperatureFahrenheit;

			public byte highTripTemperatureFahrenheit;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_00f2: Expected O, but got Unknown
				//IL_0050: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_005d: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0020: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ed: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				//IL_0117: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceClimateZoneSim logicalDeviceClimateZoneSim = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						val = Task.Delay(500).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SendCommandAsync>d__22>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
					ClimateZoneCommand commandStatus = new ClimateZoneCommand(heatMode, heatSource, fanMode);
					logicalDeviceClimateZoneSim._simStatus.SetCommandStatus(commandStatus);
					logicalDeviceClimateZoneSim._simStatus.SetLowTripTemperatureFahrenheit(lowTripTemperatureFahrenheit);
					logicalDeviceClimateZoneSim._simStatus.SetHighTripTemperatureFahrenheit(highTripTemperatureFahrenheit);
					Log.Debug(String.Format("LogicalDeviceClimateZoneSim (SendCommandAsync): {0} ", (object)logicalDeviceClimateZoneSim._simStatus));
					((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)logicalDeviceClimateZoneSim).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceClimateZoneSim._simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceClimateZoneSim._simStatus).Size);
					result = (CommandResult)0;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceClimateZoneSim";

		private readonly CancellationTokenSource _simTaskCancelSource = new CancellationTokenSource();

		private readonly LogicalDeviceClimateZoneStatus _simStatus = new LogicalDeviceClimateZoneStatus();

		public override bool IsLegacyDeviceHazardous => false;

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public override bool ActiveSession => CommandSessionActivated;

		public ClimateZoneHeatMode HeatMode => ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.ProgramedCommand.HeatMode;

		public ClimateZoneHeatSource HeatSource => ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.ProgramedCommand.HeatSource;

		public ClimateZoneFanMode FanMode => ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.ProgramedCommand.FanMode;

		public byte TemperatureSetpointMinimum => 50;

		public byte TemperatureSetpointMaximum => 90;

		public bool IsRunningCommands => false;

		[field: CompilerGenerated]
		public bool CommandSessionActivated
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public LogicalDeviceExScope TemperatureMeasurementInsideScope
		{
			[CompilerGenerated]
			get;
		} = (LogicalDeviceExScope)1;

		public ITemperatureMeasurement TemperatureMeasurementInside
		{
			get
			{
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_002e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				float indoorTemperatureFahrenheit = ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.IndoorTemperatureFahrenheit;
				if (!((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.IsIndoorTemperatureSensorValid || !((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus).HasData)
				{
					return (ITemperatureMeasurement)(object)default(TemperatureMeasurementUnknown);
				}
				return (ITemperatureMeasurement)(object)new TemperatureMeasurementFahrenheit(indoorTemperatureFahrenheit);
			}
		}

		[field: CompilerGenerated]
		public LogicalDeviceExScope TemperatureMeasurementOutsideScope
		{
			[CompilerGenerated]
			get;
		} = (LogicalDeviceExScope)2;

		public ITemperatureMeasurement TemperatureMeasurementOutside
		{
			get
			{
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_002e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				float outdoorTemperatureFahrenheit = ((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.OutdoorTemperatureFahrenheit;
				if (!((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus.IsOutdoorTemperatureSensorValid || !((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceClimateZoneStatus, ILogicalDeviceClimateZoneCapability>)this).DeviceStatus).HasData)
				{
					return (ITemperatureMeasurement)(object)default(TemperatureMeasurementUnknown);
				}
				return (ITemperatureMeasurement)(object)new TemperatureMeasurementFahrenheit(outdoorTemperatureFahrenheit);
			}
		}

		public LogicalDeviceClimateZoneSim(ILogicalDeviceId logicalDeviceId, LogicalDeviceClimateZoneStatus startingZoneStatus, ILogicalDeviceClimateZoneCapability climateZoneCapability, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_0018: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			//IL_005e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0063: Unknown result type (might be due to invalid IL or missing references)
			//IL_0075: Unknown result type (might be due to invalid IL or missing references)
			<>c__DisplayClass9_0 CS$<>8__locals4 = new <>c__DisplayClass9_0();
			base..ctor(logicalDeviceId, startingZoneStatus, climateZoneCapability, service, isFunctionClassChangeable);
			CS$<>8__locals4.<>4__this = this;
			((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Update(((LogicalDeviceDataPacketMutableDoubleBuffer)startingZoneStatus).Data, (int)((LogicalDeviceDataPacketMutableDoubleBuffer)startingZoneStatus).MaxSize, false);
			CS$<>8__locals4.simTaskCancelToken = _simTaskCancelSource.Token;
			Task.Run((Func<Task>)([AsyncStateMachine(/*Could not decode attribute arguments.*/)] () =>
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<>c__DisplayClass9_0.<<-ctor>b__0>d <<-ctor>b__0>d = default(<>c__DisplayClass9_0.<<-ctor>b__0>d);
				<<-ctor>b__0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<-ctor>b__0>d.<>4__this = CS$<>8__locals4;
				<<-ctor>b__0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<-ctor>b__0>d.<>t__builder)).Start<<>c__DisplayClass9_0.<<-ctor>b__0>d>(ref <<-ctor>b__0>d);
				return ((AsyncTaskMethodBuilder)(ref <<-ctor>b__0>d.<>t__builder)).Task;
			}), CS$<>8__locals4.simTaskCancelToken);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommandAsync(ClimateZoneHeatMode heatMode, ClimateZoneHeatSource heatSource, ClimateZoneFanMode fanMode, byte lowTripTemperatureFahrenheit, byte highTripTemperatureFahrenheit, ClimateZoneCommandOptions commandOptions = ClimateZoneCommandOptions.AutoAdjustToSupportedConfiguration)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandAsync>d__22 <SendCommandAsync>d__ = default(<SendCommandAsync>d__22);
			<SendCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandAsync>d__.<>4__this = this;
			<SendCommandAsync>d__.heatMode = heatMode;
			<SendCommandAsync>d__.heatSource = heatSource;
			<SendCommandAsync>d__.fanMode = fanMode;
			<SendCommandAsync>d__.lowTripTemperatureFahrenheit = lowTripTemperatureFahrenheit;
			<SendCommandAsync>d__.highTripTemperatureFahrenheit = highTripTemperatureFahrenheit;
			<SendCommandAsync>d__.<>1__state = -1;
			<SendCommandAsync>d__.<>t__builder.Start<<SendCommandAsync>d__22>(ref <SendCommandAsync>d__);
			return <SendCommandAsync>d__.<>t__builder.Task;
		}

		public Task ActivateSession(CancellationToken cancelToken)
		{
			CommandSessionActivated = true;
			return (Task)(object)Task.FromResult<int>(0);
		}

		public void DeactivateSession()
		{
			CommandSessionActivated = false;
		}

		public override void Dispose(bool disposing)
		{
			CancellationTokenSourceExtension.TryCancelAndDispose(_simTaskCancelSource);
			base.Dispose(disposing);
		}

		public Task<CommandResult> PerformCommand(ClimateZoneHeatMode option)
		{
			return Task.Run<CommandResult>((Func<CommandResult>)new <>c__DisplayClass40_0
			{
				option = option,
				<>4__this = this
			}.<PerformCommand>b__0);
		}

		public Task<CommandResult> PerformCommand(ClimateZoneFanMode option)
		{
			return Task.Run<CommandResult>((Func<CommandResult>)new <>c__DisplayClass41_0
			{
				<>4__this = this,
				option = option
			}.<PerformCommand>b__0);
		}

		public Task<CommandResult> PerformCommand(ClimateZoneHeatSource option)
		{
			return Task.Run<CommandResult>((Func<CommandResult>)new <>c__DisplayClass42_0
			{
				<>4__this = this,
				option = option
			}.<PerformCommand>b__0);
		}
	}
	public enum ClimateZoneStatus : Enum
	{
		Off = 0,
		Idle = 1,
		Cooling = 2,
		HeatingWithHeatPump = 3,
		HeatingWithElectric = 4,
		HeatingWithGasFurnace = 5,
		HeatingWithGasOverride = 6,
		DeadTime = 7,
		LoadShedding = 8,
		FailOff = 128,
		FailReserved17 = 129,
		FailReserved18 = 130,
		FailHeatingWithHeatPump = 131,
		FailHeatingWithElectric = 132,
		FailHeatingWithGasFurnace = 133,
		FailHeatingWithGasOverride = 134,
		FailReserved23 = 135,
		FailReserved24 = 136
	}
	public class LogicalDeviceClimateZoneStatus : LogicalDeviceStatusPacketMutable, ILogicalDeviceStatus<LogicalDeviceClimateZoneStatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		public const float MinimumValidTemperatureFahrenheit = -40f;

		public const float MaximumValidTemperatureFahrenheit = 140f;

		private const int MinimumStatusPacketSize = 8;

		public const uint CommandByteIndex = 0u;

		public const uint LowTripTempByteIndex = 1u;

		public const uint HighTripTempByteIndex = 2u;

		public const uint StatusByteIndex = 3u;

		public const uint IndoorTempStartByteIndex = 4u;

		public const uint OutdoorTempStartByteIndex = 6u;

		public const byte StatusBitmaskZoneStatus = 143;

		public const byte StatusBitmaskFailedThermistor = 128;

		public readonly ushort[] TemperatureSensorInvalidValueList = (ushort[])(object)new UInt16[2]
		{
			(UInt16)32768,
			(UInt16)12272
		};

		private string _outdoorTemperatureFahrenheitStr
		{
			get
			{
				if (!IsOutdoorTemperatureSensorValid)
				{
					return "Invalid";
				}
				return String.Format("{0}\ufffdF", (object)OutdoorTemperatureFahrenheit);
			}
		}

		private string _indoorTemperatureFahrenheitStr
		{
			get
			{
				if (!IsIndoorTemperatureSensorValid)
				{
					return "Invalid";
				}
				return String.Format("{0}\ufffdF", (object)IndoorTemperatureFahrenheit);
			}
		}

		public float OutdoorTemperatureFahrenheit => FixedPointSignedBigEndian8X8.ToFloat(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 6u);

		public float IndoorTemperatureFahrenheit => FixedPointSignedBigEndian8X8.ToFloat(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 4u);

		public bool IsOutdoorTemperatureSensorValid => !Enumerable.Contains<ushort>((IEnumerable<ushort>)(object)TemperatureSensorInvalidValueList, FixedPointUnsignedBigEndian8X8.ToFixedPoint(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 6u));

		public bool IsIndoorTemperatureSensorValid => !Enumerable.Contains<ushort>((IEnumerable<ushort>)(object)TemperatureSensorInvalidValueList, FixedPointUnsignedBigEndian8X8.ToFixedPoint(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 4u));

		public ClimateZoneStatus ZoneStatus
		{
			get
			{
				try
				{
					return ZoneModeFromRawValue((byte)(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3] & 0x8F));
				}
				catch (Object)
				{
					return ClimateZoneStatus.FailOff;
				}
			}
		}

		public byte HighTripTemperatureFahrenheit => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[2];

		public byte LowTripTemperatureFahrenheit => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[1];

		public ClimateZoneCommand ProgramedCommand => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0];

		public bool IsFailedThermistor => (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3] & 0x80) != 0;

		public bool IsError => IsFailedThermistor;

		public bool IsOutdoorTemperatureWithinValidRange
		{
			get
			{
				if (IsOutdoorTemperatureSensorValid)
				{
					if (OutdoorTemperatureFahrenheit >= -40f)
					{
						return OutdoorTemperatureFahrenheit <= 140f;
					}
					return false;
				}
				return false;
			}
		}

		public bool IsIndoorTemperatureWithinValidRange
		{
			get
			{
				if (IsIndoorTemperatureSensorValid)
				{
					if (IndoorTemperatureFahrenheit >= -40f)
					{
						return IndoorTemperatureFahrenheit <= 140f;
					}
					return false;
				}
				return false;
			}
		}

		public LogicalDeviceClimateZoneStatus()
			: base(8u)
		{
		}

		public LogicalDeviceClimateZoneStatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceClimateZoneStatusSerializable(this);
		}

		public LogicalDeviceClimateZoneStatus(ClimateZoneHeatMode heatMode, ClimateZoneHeatSource heatSource, ClimateZoneFanMode fanMode, ClimateZoneStatus zoneStatus, byte lowTripTempF, byte highTripTempF, float indoorTempF, float outdoorTempF)
		{
			SetZoneStatus(zoneStatus);
			ClimateZoneCommand commandStatus = new ClimateZoneCommand(heatMode, heatSource, fanMode);
			SetCommandStatus(commandStatus);
			SetLowTripTemperatureFahrenheit(lowTripTempF);
			SetHighTripTemperatureFahrenheit(highTripTempF);
			SetIndoorTemperatureFahrenheit(indoorTempF);
			SetOutdoorTemperatureFahrenheit(outdoorTempF);
		}

		public LogicalDeviceClimateZoneStatus(LogicalDeviceClimateZoneStatus originalStatus)
		{
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalStatus).Data;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(data, data.Length, false);
		}

		public override string ToString()
		{
			return String.Format("ZoneMode: {0}, OutdoorTemp: {1}, IndoorTemp: {2}, ProgramedCommand: {3}, HighTrip: {4}, LowTrip: {5}", (object[])(object)new Object[6]
			{
				(object)ZoneStatus,
				(Object)_outdoorTemperatureFahrenheitStr,
				(Object)_indoorTemperatureFahrenheitStr,
				(object)ProgramedCommand,
				(object)HighTripTemperatureFahrenheit,
				(object)LowTripTemperatureFahrenheit
			});
		}

		public static ClimateZoneStatus ZoneModeFromRawValue(byte rawValue)
		{
			return rawValue switch
			{
				0 => ClimateZoneStatus.Off, 
				1 => ClimateZoneStatus.Idle, 
				2 => ClimateZoneStatus.Cooling, 
				3 => ClimateZoneStatus.HeatingWithHeatPump, 
				4 => ClimateZoneStatus.HeatingWithElectric, 
				5 => ClimateZoneStatus.HeatingWithGasFurnace, 
				6 => ClimateZoneStatus.HeatingWithGasOverride, 
				7 => ClimateZoneStatus.DeadTime, 
				8 => ClimateZoneStatus.LoadShedding, 
				128 => ClimateZoneStatus.FailOff, 
				129 => ClimateZoneStatus.FailReserved17, 
				130 => ClimateZoneStatus.FailReserved18, 
				131 => ClimateZoneStatus.FailHeatingWithHeatPump, 
				132 => ClimateZoneStatus.FailHeatingWithElectric, 
				133 => ClimateZoneStatus.FailHeatingWithGasFurnace, 
				134 => ClimateZoneStatus.FailHeatingWithGasOverride, 
				135 => ClimateZoneStatus.FailReserved23, 
				136 => ClimateZoneStatus.FailReserved24, 
				_ => ClimateZoneStatus.Off, 
			};
		}

		public bool IsHeatOn()
		{
			ClimateZoneStatus zoneStatus = ZoneStatus;
			if (zoneStatus - 3 <= ClimateZoneStatus.HeatingWithHeatPump)
			{
				return true;
			}
			return false;
		}

		public bool IsCoolOn()
		{
			return ZoneStatus == ClimateZoneStatus.Cooling;
		}

		public void SetOutdoorTemperatureFahrenheit(float temperature)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetFixedPoint((FixedPointType)2, temperature, 6u);
		}

		public void SetIndoorTemperatureFahrenheit(float temperature)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetFixedPoint((FixedPointType)2, temperature, 4u);
		}

		public void SetZoneStatus(ClimateZoneStatus zoneStatus)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)143, (byte)zoneStatus, 3);
		}

		public void SetHighTripTemperatureFahrenheit(byte temperature)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, temperature, 2);
		}

		public void SetLowTripTemperatureFahrenheit(byte temperature)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, temperature, 1);
		}

		public void SetCommandStatus(ClimateZoneCommand zoneCommand)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)zoneCommand, 0);
		}
	}
	public class LogicalDeviceClimateZoneStatusEx : LogicalDeviceStatusPacketMutableExtended
	{
		private const int MinimumStatusPacketSize = 2;

		public const int UserMessageDtcIndex = 0;

		public DTC_ID UserMessageDtc => (DTC_ID)ArrayExtension.GetValueUInt16(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 0, (Endian)0);

		public void SetUserMessageDtc(DTC_ID userMessageDtc)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			//IL_000e: Expected I4, but got Unknown
			ArrayExtension.SetValueUInt16(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, (ushort)(int)userMessageDtc, 0, (Endian)0);
		}

		public LogicalDeviceClimateZoneStatusEx()
			: base(2u)
		{
		}

		public LogicalDeviceClimateZoneStatusEx(DTC_ID userMessageDtc)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			SetUserMessageDtc(userMessageDtc);
		}

		public LogicalDeviceClimateZoneStatusEx(LogicalDeviceClimateZoneStatusEx originalStatus)
		{
			//IL_001a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0020: Unknown result type (might be due to invalid IL or missing references)
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalStatus).Data;
			((LogicalDeviceStatusPacketMutableExtended)this).Update((IReadOnlyList<byte>)(object)data, (uint)data.Length, ((LogicalDeviceStatusPacketMutableExtended)originalStatus).ExtendedByte, default(Nullable<DateTime>));
		}

		public override string ToString()
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return String.Format("{0}", (object)UserMessageDtc);
		}
	}
	public enum DeviceAssociation : Enum
	{
		Unknown,
		NotSupported,
		Supported,
		AssociatedToOther,
		AssociatedToSelf
	}
	public interface IDevicesActivation
	{
		bool CommandSessionActivated { get; }

		Task ActivateSession(CancellationToken cancelToken);

		void DeactivateSession();
	}
	public interface IDimmableBrightness
	{
		byte DimmableBrightness { get; }

		bool IsDimmableBrightnessEnabled { get; }

		Task<CommandResult> SendDimmableBrightnessCommandAsync(byte brightness);
	}
	public interface ILogicalDeviceDimmableBrightness : ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IDimmableBrightness
	{
	}
	public interface ILogicalDeviceDimmableBrightnessRemote : ILogicalDeviceDimmableBrightness, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IDimmableBrightness, ILogicalDeviceRemote
	{
	}
	public interface ILogicalDeviceSimulated : ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
	}
	public interface IPowerMonitor
	{
	}
	public interface ILogicalDevicePowerMonitor : IPowerMonitor, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
	}
	public enum PowerFlow : Enum
	{
		Unknown,
		None,
		Charging,
		Discharging
	}
	public interface IPowerMonitorSolar : IPowerMonitor
	{
		float SolarVoltage { get; }

		TimeSpan SolarVoltageLastUpdated { get; }

		uint SolarVoltageUpdateCount { get; }

		float SolarCurrent { get; }

		TimeSpan SolarCurrentLastUpdated { get; }

		uint SolarCurrentUpdateCount { get; }
	}
	public interface IPowerMonitorAc : IPowerMonitor
	{
		float AcVoltage { get; }

		TimeSpan AcVoltageLastUpdated { get; }

		uint AcVoltageUpdateCount { get; }

		float AcCurrent { get; }

		TimeSpan AcCurrentLastUpdated { get; }

		uint AcCurrentUpdateCount { get; }
	}
	public interface IPowerMonitorAuxDc : IPowerMonitor
	{
		float AuxDcVoltage { get; }

		TimeSpan AuxDcVoltageLastUpdated { get; }

		uint AuxDcVoltageUpdateCount { get; }

		float AuxDcCurrent { get; }

		TimeSpan AuxDcCurrentLastUpdated { get; }

		uint AuxDcCurrentUpdateCount { get; }

		PowerFlow AuxDcPowerFlow { get; }
	}
	public interface IPowerMonitorDcOutput : IPowerMonitor
	{
		float DcVoltageOutput { get; }

		TimeSpan DcVoltageOutputLastUpdated { get; }

		uint DcVoltageOutputUpdateCount { get; }

		float DcCurrentOutput { get; }

		TimeSpan DcCurrentOutputLastUpdated { get; }

		uint DcCurrentOutputUpdateCount { get; }
	}
	public interface IPowerMonitorBatteryCharge
	{
		float BatteryChargerVoltage { get; }

		TimeSpan BatteryChargerVoltageLastUpdated { get; }

		uint BatteryChargerVoltageUpdateCount { get; }

		float BatteryCurrent { get; }

		TimeSpan BatteryCurrentLastUpdated { get; }

		uint BatteryCurrentCount { get; }

		PowerFlow BatteryCurrentFlow { get; }

		byte BatteryStateOfCharge { get; }

		TimeSpan BatteryStateOfChargeLastUpdated { get; }

		uint BatteryStateOfChargeUpdateCount { get; }

		TimeSpan BatteryMinutesRemaining { get; }

		TimeSpan BatteryMinutesRemainingLastUpdated { get; }

		uint BatteryMinutesRemainingUpdateCount { get; }
	}
	public enum SwitchUsage : Enum
	{
		Generic,
		Heater,
		Light,
		Pump,
		Vent,
		Valve,
		Fan,
		Generator
	}
	public enum SwitchTransition : Enum
	{
		No,
		Transitioning,
		Unknown
	}
	public interface ILogicalDeviceSwitchableReadonly
	{
		bool On { get; }

		bool IsCurrentlyOn { get; }

		bool IsMasterSwitchControllable { get; }

		SwitchTransition SwitchInTransition { get; }

		SwitchUsage UsedFor { get; }
	}
	public interface ISwitchableDevice : ILogicalDeviceSwitchableReadonly
	{
		Task<bool> ToggleAsync(bool restore);

		Task<bool> TurnOnAsync(bool restore);

		Task<bool> TurnOffAsync();
	}
	public interface ILogicalDeviceSwitchable : ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ISwitchableDevice, ILogicalDeviceSwitchableReadonly
	{
	}
	public interface ILogicalDeviceSwitchableRemote : ILogicalDeviceSwitchable, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceRemote
	{
	}
	public interface IDirectCommandSwitch : ILogicalDeviceSourceDirect, ILogicalDeviceSource
	{
		Task<CommandResult> SendDirectCommandRelayBasicSwitch(ILogicalDeviceSwitchable logicalDevice, bool turnOn, CancellationToken cancelToken);
	}
	public static class SwitchableDeviceExtension : Object
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass0_0 : Object
		{
			[StructLayout((LayoutKind)3)]
			private struct <<Toggle>b__0>d : ValueType, IAsyncStateMachine
			{
				public int <>1__state;

				public AsyncTaskMethodBuilder<bool> <>t__builder;

				public <>c__DisplayClass0_0 <>4__this;

				private ConfiguredTaskAwaiter<bool> <>u__1;

				private void MoveNext()
				{
					//IL_0083: Expected O, but got Unknown
					//IL_005c: Unknown result type (might be due to invalid IL or missing references)
					//IL_0061: Unknown result type (might be due to invalid IL or missing references)
					//IL_0068: Unknown result type (might be due to invalid IL or missing references)
					//IL_0023: Unknown result type (might be due to invalid IL or missing references)
					//IL_0028: Unknown result type (might be due to invalid IL or missing references)
					//IL_002c: Unknown result type (might be due to invalid IL or missing references)
					//IL_0031: Unknown result type (might be due to invalid IL or missing references)
					//IL_0045: Unknown result type (might be due to invalid IL or missing references)
					//IL_0046: Unknown result type (might be due to invalid IL or missing references)
					int num = <>1__state;
					<>c__DisplayClass0_0 <>c__DisplayClass0_ = <>4__this;
					bool result;
					try
					{
						ConfiguredTaskAwaiter<bool> val;
						if (num != 0)
						{
							val = <>c__DisplayClass0_.switchable.ToggleAsync(<>c__DisplayClass0_.restore).ConfigureAwait(false).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<bool>, <<Toggle>b__0>d>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(ConfiguredTaskAwaiter<bool>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						Exception exception = ex;
						<>1__state = -2;
						<>t__builder.SetException(exception);
						return;
					}
					<>1__state = -2;
					<>t__builder.SetResult(result);
				}

				[DebuggerHidden]
				private void SetStateMachine(IAsyncStateMachine stateMachine)
				{
					<>t__builder.SetStateMachine(stateMachine);
				}
			}

			public ISwitchableDevice switchable;

			public bool restore;

			[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
			internal Task<bool> <Toggle>b__0()
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<Toggle>b__0>d <<Toggle>b__0>d = default(<<Toggle>b__0>d);
				<<Toggle>b__0>d.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
				<<Toggle>b__0>d.<>4__this = this;
				<<Toggle>b__0>d.<>1__state = -1;
				<<Toggle>b__0>d.<>t__builder.Start<<<Toggle>b__0>d>(ref <<Toggle>b__0>d);
				return <<Toggle>b__0>d.<>t__builder.Task;
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass1_0 : Object
		{
			[StructLayout((LayoutKind)3)]
			private struct <<TurnOn>b__0>d : ValueType, IAsyncStateMachine
			{
				public int <>1__state;

				public AsyncTaskMethodBuilder<bool> <>t__builder;

				public <>c__DisplayClass1_0 <>4__this;

				private ConfiguredTaskAwaiter<bool> <>u__1;

				private void MoveNext()
				{
					//IL_0083: Expected O, but got Unknown
					//IL_005c: Unknown result type (might be due to invalid IL or missing references)
					//IL_0061: Unknown result type (might be due to invalid IL or missing references)
					//IL_0068: Unknown result type (might be due to invalid IL or missing references)
					//IL_0023: Unknown result type (might be due to invalid IL or missing references)
					//IL_0028: Unknown result type (might be due to invalid IL or missing references)
					//IL_002c: Unknown result type (might be due to invalid IL or missing references)
					//IL_0031: Unknown result type (might be due to invalid IL or missing references)
					//IL_0045: Unknown result type (might be due to invalid IL or missing references)
					//IL_0046: Unknown result type (might be due to invalid IL or missing references)
					int num = <>1__state;
					<>c__DisplayClass1_0 <>c__DisplayClass1_ = <>4__this;
					bool result;
					try
					{
						ConfiguredTaskAwaiter<bool> val;
						if (num != 0)
						{
							val = <>c__DisplayClass1_.switchable.TurnOnAsync(<>c__DisplayClass1_.restore).ConfigureAwait(false).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<bool>, <<TurnOn>b__0>d>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(ConfiguredTaskAwaiter<bool>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						Exception exception = ex;
						<>1__state = -2;
						<>t__builder.SetException(exception);
						return;
					}
					<>1__state = -2;
					<>t__builder.SetResult(result);
				}

				[DebuggerHidden]
				private void SetStateMachine(IAsyncStateMachine stateMachine)
				{
					<>t__builder.SetStateMachine(stateMachine);
				}
			}

			public ISwitchableDevice switchable;

			public bool restore;

			[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
			internal Task<bool> <TurnOn>b__0()
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<TurnOn>b__0>d <<TurnOn>b__0>d = default(<<TurnOn>b__0>d);
				<<TurnOn>b__0>d.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
				<<TurnOn>b__0>d.<>4__this = this;
				<<TurnOn>b__0>d.<>1__state = -1;
				<<TurnOn>b__0>d.<>t__builder.Start<<<TurnOn>b__0>d>(ref <<TurnOn>b__0>d);
				return <<TurnOn>b__0>d.<>t__builder.Task;
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass2_0 : Object
		{
			[StructLayout((LayoutKind)3)]
			private struct <<TurnOff>b__0>d : ValueType, IAsyncStateMachine
			{
				public int <>1__state;

				public AsyncTaskMethodBuilder<bool> <>t__builder;

				public <>c__DisplayClass2_0 <>4__this;

				private ConfiguredTaskAwaiter<bool> <>u__1;

				private void MoveNext()
				{
					//IL_007d: Expected O, but got Unknown
					//IL_0056: Unknown result type (might be due to invalid IL or missing references)
					//IL_005b: Unknown result type (might be due to invalid IL or missing references)
					//IL_0062: Unknown result type (might be due to invalid IL or missing references)
					//IL_001d: Unknown result type (might be due to invalid IL or missing references)
					//IL_0022: Unknown result type (might be due to invalid IL or missing references)
					//IL_0026: Unknown result type (might be due to invalid IL or missing references)
					//IL_002b: Unknown result type (might be due to invalid IL or missing references)
					//IL_003f: Unknown result type (might be due to invalid IL or missing references)
					//IL_0040: Unknown result type (might be due to invalid IL or missing references)
					int num = <>1__state;
					<>c__DisplayClass2_0 <>c__DisplayClass2_ = <>4__this;
					bool result;
					try
					{
						ConfiguredTaskAwaiter<bool> val;
						if (num != 0)
						{
							val = <>c__DisplayClass2_.switchable.TurnOffAsync().ConfigureAwait(false).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<bool>, <<TurnOff>b__0>d>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(ConfiguredTaskAwaiter<bool>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						Exception exception = ex;
						<>1__state = -2;
						<>t__builder.SetException(exception);
						return;
					}
					<>1__state = -2;
					<>t__builder.SetResult(result);
				}

				[DebuggerHidden]
				private void SetStateMachine(IAsyncStateMachine stateMachine)
				{
					<>t__builder.SetStateMachine(stateMachine);
				}
			}

			public ISwitchableDevice switchable;

			[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
			internal Task<bool> <TurnOff>b__0()
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<TurnOff>b__0>d <<TurnOff>b__0>d = default(<<TurnOff>b__0>d);
				<<TurnOff>b__0>d.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
				<<TurnOff>b__0>d.<>4__this = this;
				<<TurnOff>b__0>d.<>1__state = -1;
				<<TurnOff>b__0>d.<>t__builder.Start<<<TurnOff>b__0>d>(ref <<TurnOff>b__0>d);
				return <<TurnOff>b__0>d.<>t__builder.Task;
			}
		}

		[Obsolete("ToggleAsync should be used in place of this helper method")]
		public static void Toggle(this ISwitchableDevice switchable, bool restore = true)
		{
			Task.Run<bool>((Func<Task<bool>>)new <>c__DisplayClass0_0
			{
				switchable = switchable,
				restore = restore
			}.<Toggle>b__0);
		}

		[Obsolete("TurnOnAsync should be used in place of this helper method")]
		public static void TurnOn(this ISwitchableDevice switchable, bool restore)
		{
			Task.Run<bool>((Func<Task<bool>>)new <>c__DisplayClass1_0
			{
				switchable = switchable,
				restore = restore
			}.<TurnOn>b__0);
		}

		[Obsolete("TurnOffAsync should be used in place of this helper method")]
		public static void TurnOff(this ISwitchableDevice switchable, bool restore)
		{
			Task.Run<bool>((Func<Task<bool>>)new <>c__DisplayClass2_0
			{
				switchable = switchable
			}.<TurnOff>b__0);
		}
	}
	public interface ILogicalDeviceLeveler : ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IDevicesActivation, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement
	{
	}
	[Flags]
	public enum LevelerAirbagAction : Enum
	{
		None = 0,
		Fill = 1,
		Dump = 2,
		Both = 0x11
	}
	public class LevelerException : Exception
	{
		public LevelerException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}
	}
	public class LevelerSessionActivationRequiredException : LevelerException
	{
		public LevelerSessionActivationRequiredException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}

		public LevelerSessionActivationRequiredException(Exception? innerException = null)
			: this("Session Activation is Required", innerException)
		{
		}
	}
	public class LevelerExtendedStatusHasNoDataException : LevelerException
	{
		public LevelerExtendedStatusHasNoDataException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}

		public LevelerExtendedStatusHasNoDataException(Exception? innerException = null)
			: this("Extended Status Has No Data", innerException)
		{
		}
	}
	public class LevelerExtendedStatusAutoOperationInvalidException : LevelerException
	{
		public LevelerExtendedStatusAutoOperationInvalidException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}
	}
	public class LevelerAutoOperationInProgressException : LevelerException
	{
		public LevelerAutoOperationInProgressException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}
	}
	public class LevelerAutoOperationStoppedException : LevelerException
	{
		public LevelerAutoOperationStoppedException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}

		public LevelerAutoOperationStoppedException(Exception? innerException = null)
			: this("Auto Operation Stopped Before Completing", innerException)
		{
		}
	}
	public class LevelerOperationFailedException : LevelerException
	{
		[field: CompilerGenerated]
		public CommandResult Result
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LevelerFaultType5 Fault
		{
			[CompilerGenerated]
			get;
		}

		public LevelerOperationFailedException(CommandResult result, LevelerFaultType5 fault, Exception? innerException = null)
			: base(String.Format("Operation Failed {0} with {1}", (object)result, (object)fault.ToDebugString()), innerException)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0020: Unknown result type (might be due to invalid IL or missing references)
			Result = result;
			Fault = fault;
		}
	}
	public class LevelerAutoOperationFailedException : LevelerOperationFailedException
	{
		public LevelerAutoOperationFailedException(CommandResult result, LevelerFaultType5 fault, Exception? innerException = null)
			: base(result, fault, innerException)
		{
		}//IL_0001: Unknown result type (might be due to invalid IL or missing references)

	}
	public class LevelerAutoOperationFailedWithoutRetryException : LevelerOperationFailedException
	{
		public LevelerAutoOperationFailedWithoutRetryException(CommandResult result, LevelerFaultType5 fault, Exception? innerException = null)
			: base(result, fault, innerException)
		{
		}//IL_0001: Unknown result type (might be due to invalid IL or missing references)

	}
	public class LevelerNoActiveConnectionException : LevelerException
	{
		public LevelerNoActiveConnectionException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}

		public LevelerNoActiveConnectionException(Exception? innerException = null)
			: base("No Active Connection (leveler offline)", innerException)
		{
		}
	}
	public class LevelerSessionEndedException : LevelerException
	{
		public LevelerSessionEndedException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}

		public LevelerSessionEndedException(Exception? innerException = null)
			: base("Session ended while trying to perform an auto operation", innerException)
		{
		}
	}
	[Flags]
	public enum LevelerJackDirection : Enum
	{
		None = 0,
		Extend = 1,
		Retract = 2,
		Both = 3
	}
	public enum LevelerJackLocation : Enum
	{
		None,
		FrontRight,
		FrontLeft,
		RearRight,
		RearLeft,
		MiddleRight,
		MiddleLeft,
		Tongue
	}
	public class LogicalDeviceLevelerFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_0056: Unknown result type (might be due to invalid IL or missing references)
			//IL_0067: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			switch (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType))
			{
			case 7:
				return (ILogicalDevice)(object)new LogicalDeviceLevelerType1(logicalDeviceId, service);
			case 17:
				return (ILogicalDevice)(object)new LogicalDeviceLevelerType3(logicalDeviceId, service);
			case 40:
			{
				LogicalDeviceLevelerCapabilityType4 levelerCapability2 = new LogicalDeviceLevelerCapabilityType4(rawCapability);
				return (ILogicalDevice)(object)new LogicalDeviceLevelerType4(logicalDeviceId, levelerCapability2, service);
			}
			case 56:
			{
				LogicalDeviceLevelerCapabilityType5 levelerCapability = new LogicalDeviceLevelerCapabilityType5(rawCapability);
				return (ILogicalDevice)(object)new LogicalDeviceLevelerType5(logicalDeviceId, levelerCapability, service);
			}
			default:
				return null;
			}
		}
	}
	public enum LogicalDeviceLevelerStatusIndicatorBlinkCycle : Enum
	{
		Unknown,
		On,
		Off
	}
	[AttributeUsage(/*Could not decode attribute arguments.*/)]
	public class LogicalDeviceLevelerIndicatorBlinkAttribute : Attribute
	{
		private const string LogTag = "LogicalDeviceLevelerIndicatorBlinkAttribute";

		public static readonly Stopwatch BlinkTimer = Stopwatch.StartNew();

		public bool InverseBlink;

		[field: CompilerGenerated]
		public uint BlinkToggleMs
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public double BlinkToggleDutyCycle
		{
			[CompilerGenerated]
			get;
		}

		public LogicalDeviceLevelerStatusIndicatorBlinkCycle CurrentBlinkCycle => CalculateCurrentBlinkCycle(BlinkToggleMs, BlinkToggleDutyCycle, InverseBlink);

		public static LogicalDeviceLevelerStatusIndicatorBlinkCycle CalculateCurrentBlinkCycle(uint toggleMs, double dutyCycle, bool inverseBlink)
		{
			if (toggleMs == 0)
			{
				return LogicalDeviceLevelerStatusIndicatorBlinkCycle.Unknown;
			}
			if (inverseBlink)
			{
				if ((MathCommon.RoundUsingThreshold((double)BlinkTimer.ElapsedMilliseconds / (double)toggleMs, dutyCycle) & 1) != 1)
				{
					return LogicalDeviceLevelerStatusIndicatorBlinkCycle.Off;
				}
				return LogicalDeviceLevelerStatusIndicatorBlinkCycle.On;
			}
			if ((MathCommon.RoundUsingThreshold((double)BlinkTimer.ElapsedMilliseconds / (double)toggleMs, dutyCycle) & 1) != 1)
			{
				return LogicalDeviceLevelerStatusIndicatorBlinkCycle.On;
			}
			return LogicalDeviceLevelerStatusIndicatorBlinkCycle.Off;
		}

		public LogicalDeviceLevelerIndicatorBlinkAttribute(uint blinkToggleMs, double blinkToggleDutyCycle, bool inverseBlink)
		{
			BlinkToggleMs = blinkToggleMs;
			BlinkToggleDutyCycle = blinkToggleDutyCycle;
			InverseBlink = inverseBlink;
		}
	}
	public interface ILogicalDeviceLevelerType1 : ILogicalDeviceLeveler, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IDevicesActivation, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceWithStatus<LogicalDeviceLevelerStatusType1>, ILogicalDeviceWithStatus, ITextConsole
	{
		void UpdateDeviceConsoleText(List<string> text);
	}
	public interface ILogicalDeviceDirectLevelerType1 : ILogicalDeviceLevelerType1, ILogicalDeviceLeveler, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IDevicesActivation, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceWithStatus<LogicalDeviceLevelerStatusType1>, ILogicalDeviceWithStatus, ITextConsole, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public interface IDirectCommandLeveler1 : ILogicalDeviceSourceDirect, ILogicalDeviceSource
	{
		Task<CommandResult> SendDirectCommandLeveler1(ILogicalDeviceLevelerType1 logicalDevice, LogicalDeviceLevelerCommandType1 command, CancellationToken cancelToken);
	}
	[Flags]
	public enum LogicalDeviceLevelerButtonType1 : Enum
	{
		None = 0,
		Right = 1,
		Left = 2,
		Rear = 4,
		Front = 8,
		AutoLevel = 0x10,
		Retract = 0x20,
		Enter = 0x40,
		MenuDown = 0x80,
		Power = 0x200,
		MenuUp = 0x400
	}
	[AttributeUsage(/*Could not decode attribute arguments.*/)]
	public class LogicalDeviceLevelerButtonType1Attribute : Attribute
	{
		[field: CompilerGenerated]
		public LogicalDeviceLevelerButtonType1 ButtonType
		{
			[CompilerGenerated]
			get;
		}

		public LogicalDeviceLevelerButtonType1Attribute(LogicalDeviceLevelerButtonType1 buttonType)
		{
			ButtonType = buttonType;
		}
	}
	public class LogicalDeviceLevelerCommandType1 : LogicalDeviceCommandPacket
	{
		public const int CommandPacketSize = 2;

		public static readonly LogicalDeviceLevelerCommandType1 RightButtonCommand = new LogicalDeviceLevelerCommandType1(LogicalDeviceLevelerButtonType1.Right);

		public static readonly LogicalDeviceLevelerCommandType1 LeftButtonCommand = new LogicalDeviceLevelerCommandType1(LogicalDeviceLevelerButtonType1.Left);

		public static readonly LogicalDeviceLevelerCommandType1 RearButtonCommand = new LogicalDeviceLevelerCommandType1(LogicalDeviceLevelerButtonType1.Rear);

		public static readonly LogicalDeviceLevelerCommandType1 FrontButtonCommand = new LogicalDeviceLevelerCommandType1(LogicalDeviceLevelerButtonType1.Front);

		public static readonly LogicalDeviceLevelerCommandType1 AutoLevelButtonCommand = new LogicalDeviceLevelerCommandType1(LogicalDeviceLevelerButtonType1.AutoLevel);

		public static readonly LogicalDeviceLevelerCommandType1 RetractButtonCommand = new LogicalDeviceLevelerCommandType1(LogicalDeviceLevelerButtonType1.Retract);

		public static readonly LogicalDeviceLevelerCommandType1 EnterButtonCommand = new LogicalDeviceLevelerCommandType1(LogicalDeviceLevelerButtonType1.Enter);

		public static readonly LogicalDeviceLevelerCommandType1 MenuDownButtonCommand = new LogicalDeviceLevelerCommandType1(LogicalDeviceLevelerButtonType1.MenuDown);

		public static readonly LogicalDeviceLevelerCommandType1 PowerOnCommand = new LogicalDeviceLevelerCommandType1(LogicalDeviceLevelerButtonType1.Power, 500);

		public static readonly LogicalDeviceLevelerCommandType1 MenuUpButtonCommand = new LogicalDeviceLevelerCommandType1(LogicalDeviceLevelerButtonType1.MenuUp);

		public LogicalDeviceLevelerButtonType1 ButtonCommand => (LogicalDeviceLevelerButtonType1)((LogicalDeviceCommandPacket)this).MsbUInt16(0u);

		public LogicalDeviceLevelerCommandType1(LogicalDeviceLevelerButtonType1 buttonType, int commandResponseTimeMs = 200)
			: base((byte)0, (ushort)buttonType, commandResponseTimeMs)
		{
		}

		public LogicalDeviceLevelerCommandType1(byte commandByte, byte[] data, int commandResponseTimeMs)
			: base(commandByte, data, commandResponseTimeMs)
		{
		}

		public override string ToString()
		{
			if (!Enum.IsDefined(typeof(LogicalDeviceLevelerButtonType1), (object)ButtonCommand))
			{
				return String.Format("ButtonCommand({0:X})", (object)(UInt16)ButtonCommand);
			}
			return String.Format("ButtonCommand({0})", (object)ButtonCommand);
		}
	}
	public class LogicalDeviceLevelerStatusExtendedType1 : LogicalDeviceStatusPacketMutableExtended
	{
		private const int MinimumStatusPacketSize = 8;

		private const int MaxFragments = 4;

		private const int FragmentWaitingForFrameStart = -1;

		private readonly string[] _textFragments = (string[])(object)new String[4];

		private string _text;

		public string Text
		{
			get
			{
				return _text;
			}
			set
			{
				((CommonNotifyPropertyChanged)this).SetBackingField<string>(ref _text, value, "Text", Array.Empty<string>());
			}
		}

		public LogicalDeviceLevelerStatusExtendedType1()
			: base(8u)
		{
		}

		public override void DidUpdateData()
		{
			//IL_009c: Expected O, but got Unknown
			//IL_0024: Unknown result type (might be due to invalid IL or missing references)
			try
			{
				int extendedByte = ((LogicalDeviceStatusPacketMutableExtended)this).ExtendedByte;
				if (extendedByte < 0 || extendedByte >= 4)
				{
					throw new ArgumentOutOfRangeException(String.Format("Unexpected/Unknown Extended byte (text fragment) {0}", (object)((LogicalDeviceStatusPacketMutableExtended)this).ExtendedByte));
				}
				string text = Encoding.ASCII.GetString(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data);
				if (String.CompareOrdinal(text, _textFragments[extendedByte]) != 0)
				{
					_textFragments[extendedByte] = text;
					Text = String.Concat((string[])(object)new String[5]
					{
						_textFragments[0],
						_textFragments[1],
						"\n",
						_textFragments[2],
						_textFragments[3]
					});
				}
			}
			catch (Exception ex)
			{
				Exception ex2 = ex;
				TaggedLog.Error("LogicalDeviceStatusPacketMutableExtended", String.Concat("Unable to process extended message: ", ex2.Message), Array.Empty<object>());
			}
			finally
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).DidUpdateData();
			}
		}
	}
	public enum LogicalDeviceLevelerStatusIndicatorStateType1 : Enum
	{
		[LogicalDeviceLevelerStatusIndicatorActiveType1(false)]
		Unknown = 65535,
		[LogicalDeviceLevelerStatusIndicatorActiveType1(false)]
		Off = 0,
		[LogicalDeviceLevelerStatusIndicatorActiveType1(true)]
		OnSolid = 1,
		[LogicalDeviceLevelerStatusIndicatorActiveType1(true)]
		[LogicalDeviceLevelerIndicatorBlink(1000u, 0.5, false)]
		OnBlinkHalfHz = 2,
		[LogicalDeviceLevelerStatusIndicatorActiveType1(true)]
		[LogicalDeviceLevelerIndicatorBlink(500u, 0.5, false)]
		OnBlinkOneHz = 3,
		[LogicalDeviceLevelerStatusIndicatorActiveType1(true)]
		[LogicalDeviceLevelerIndicatorBlink(250u, 0.5, false)]
		OnBlinkTwoHz = 4,
		[LogicalDeviceLevelerStatusIndicatorActiveType1(true)]
		[LogicalDeviceLevelerIndicatorBlink(125u, 0.5, false)]
		OnBlinkFourHz = 5,
		[LogicalDeviceLevelerStatusIndicatorActiveType1(true)]
		[LogicalDeviceLevelerIndicatorBlink(500u, 0.2, false)]
		OnBlinkBriefOn = 6,
		[LogicalDeviceLevelerStatusIndicatorActiveType1(true)]
		[LogicalDeviceLevelerIndicatorBlink(500u, 0.8, true)]
		OnBlinkBriefOff = 7
	}
	[AttributeUsage(/*Could not decode attribute arguments.*/)]
	public class LogicalDeviceLevelerStatusIndicatorActiveType1Attribute : Attribute, IAttributeValue<bool>
	{
		[field: CompilerGenerated]
		public bool Value
		{
			[CompilerGenerated]
			get;
		}

		public LogicalDeviceLevelerStatusIndicatorActiveType1Attribute(bool value)
		{
			Value = value;
		}
	}
	public static class LogicalDeviceLevelerStatusIndicatorStateType1Extension : Object
	{
		public static bool IsActive(this LogicalDeviceLevelerStatusIndicatorStateType1 indicatorStateType1)
		{
			return EnumExtensions.GetAttributeValue<LogicalDeviceLevelerStatusIndicatorActiveType1Attribute, bool>((Enum)(object)indicatorStateType1, false, true);
		}
	}
	public enum LogicalDeviceLevelerStatusIndicatorType1 : Enum
	{
		Unknown = 65535,
		Front = 7,
		Right = 56,
		Rear = 448,
		Level = 3584,
		Left = 28672,
		Power = 229376,
		Retract = 1835008,
		Buzzer = 14680064
	}
	public class LogicalDeviceLevelerStatusType1 : LogicalDeviceStatusPacketMutable
	{
		private const string LogTag = "LogicalDeviceLevelerStatusType1";

		private const int MinimumStatusPacketSize = 3;

		public const byte IndicatorStartIndex = 0;

		public const byte IndicatorNumBytes = 3;

		public int IndicatorBlinkCycleTimePollRateMs => 62;

		public LogicalDeviceLevelerStatusType1()
			: base(3u)
		{
		}

		public LogicalDeviceLevelerStatusIndicatorStateType1 IndicatorStateType1(LogicalDeviceLevelerStatusIndicatorType1 indicator)
		{
			//IL_0019: Unknown result type (might be due to invalid IL or missing references)
			//IL_0047: Unknown result type (might be due to invalid IL or missing references)
			if (indicator == LogicalDeviceLevelerStatusIndicatorType1.Unknown)
			{
				return LogicalDeviceLevelerStatusIndicatorStateType1.Unknown;
			}
			BitPositionValue val = default(BitPositionValue);
			((BitPositionValue)(ref val))..ctor((uint)indicator, 0, 3);
			LogicalDeviceLevelerStatusIndicatorStateType1 value = (LogicalDeviceLevelerStatusIndicatorStateType1)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(val);
			if (!Enum.IsDefined(typeof(LogicalDeviceLevelerStatusIndicatorStateType1), (object)value))
			{
				TaggedLog.Error("LogicalDeviceLevelerStatusType1", String.Format("Unexpected/Unknown Indicator State {0}@{1}", (object)value, (object)val), Array.Empty<object>());
				return LogicalDeviceLevelerStatusIndicatorStateType1.Unknown;
			}
			return value;
		}

		public bool IsIndicatorActive(LogicalDeviceLevelerStatusIndicatorType1 indicator)
		{
			return IndicatorStateType1(indicator).IsActive();
		}

		public LogicalDeviceLevelerStatusIndicatorBlinkCycle IndicatorCurrentBlinkCycleSim(LogicalDeviceLevelerStatusIndicatorType1 statusIndicatorType1)
		{
			if (statusIndicatorType1 == LogicalDeviceLevelerStatusIndicatorType1.Unknown)
			{
				return LogicalDeviceLevelerStatusIndicatorBlinkCycle.Unknown;
			}
			LogicalDeviceLevelerStatusIndicatorStateType1 logicalDeviceLevelerStatusIndicatorStateType = IndicatorStateType1(statusIndicatorType1);
			switch (logicalDeviceLevelerStatusIndicatorStateType)
			{
			case LogicalDeviceLevelerStatusIndicatorStateType1.Off:
				return LogicalDeviceLevelerStatusIndicatorBlinkCycle.Off;
			case LogicalDeviceLevelerStatusIndicatorStateType1.OnSolid:
				return LogicalDeviceLevelerStatusIndicatorBlinkCycle.On;
			case LogicalDeviceLevelerStatusIndicatorStateType1.OnBlinkHalfHz:
			case LogicalDeviceLevelerStatusIndicatorStateType1.OnBlinkOneHz:
			case LogicalDeviceLevelerStatusIndicatorStateType1.OnBlinkTwoHz:
			case LogicalDeviceLevelerStatusIndicatorStateType1.OnBlinkFourHz:
			case LogicalDeviceLevelerStatusIndicatorStateType1.OnBlinkBriefOn:
			case LogicalDeviceLevelerStatusIndicatorStateType1.OnBlinkBriefOff:
				return EnumExtensions.GetAttribute<LogicalDeviceLevelerIndicatorBlinkAttribute>((Enum)(object)logicalDeviceLevelerStatusIndicatorStateType, true)?.CurrentBlinkCycle ?? LogicalDeviceLevelerStatusIndicatorBlinkCycle.Unknown;
			default:
				return LogicalDeviceLevelerStatusIndicatorBlinkCycle.Unknown;
			}
		}
	}
	public class LogicalDeviceLevelerType1 : LogicalDevice<LogicalDeviceLevelerStatusType1, LogicalDeviceLevelerStatusExtendedType1, ILogicalDeviceCapability>, ILogicalDeviceWithTextConsole, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceDirectLevelerType1, ILogicalDeviceLevelerType1, ILogicalDeviceLeveler, IDevicesActivation, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceWithStatus<LogicalDeviceLevelerStatusType1>, ILogicalDeviceWithStatus, ITextConsole, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ActivateSession>d__64 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceLevelerType1 <>4__this;

			public CancellationToken cancelToken;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_00e7: Expected O, but got Unknown
				//IL_0113: Expected O, but got Unknown
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0086: Unknown result type (might be due to invalid IL or missing references)
				//IL_0090: Unknown result type (might be due to invalid IL or missing references)
				//IL_0095: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cc: Unknown result type (might be due to invalid IL or missing references)
				//IL_0024: Unknown result type (might be due to invalid IL or missing references)
				//IL_002f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00aa: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType1 logicalDeviceLevelerType = <>4__this;
				try
				{
					_ = 1;
					try
					{
						TaskAwaiter<CommandResult> val;
						TaskAwaiter val2;
						if (num != 0)
						{
							if (num == 1)
							{
								val = <>u__2;
								<>u__2 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								goto IL_00db;
							}
							val2 = logicalDeviceLevelerType.IdsCanCommandRunner.CommandActivateSession(cancelToken, true).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <ActivateSession>d__64>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
						val = logicalDeviceLevelerType.SendWakeupCommandAsync(cancelToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <ActivateSession>d__64>(ref val, ref this);
							return;
						}
						goto IL_00db;
						IL_00db:
						val.GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Error("LogicalDeviceLevelerType1", String.Format("Unable to ActiveSession for {0} with error {1}", (object)((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceLevelerType).LogicalId, (object)ex2.Message), Array.Empty<object>());
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommand>d__77 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLevelerType1 <>4__this;

			public CancellationToken callerCancelToken;

			public LogicalDeviceLevelerCommandType1 command;

			private CancellationTokenSource <cancelSource>5__2;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0281: Expected O, but got Unknown
				//IL_0020: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fc: Unknown result type (might be due to invalid IL or missing references)
				//IL_0104: Unknown result type (might be due to invalid IL or missing references)
				//IL_01bd: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ca: Unknown result type (might be due to invalid IL or missing references)
				//IL_0236: Unknown result type (might be due to invalid IL or missing references)
				//IL_023b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0243: Unknown result type (might be due to invalid IL or missing references)
				//IL_002f: Unknown result type (might be due to invalid IL or missing references)
				//IL_02a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0115: Unknown result type (might be due to invalid IL or missing references)
				//IL_011a: Unknown result type (might be due to invalid IL or missing references)
				//IL_011c: Unknown result type (might be due to invalid IL or missing references)
				//IL_01db: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0254: Unknown result type (might be due to invalid IL or missing references)
				//IL_0264: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_0070: Unknown result type (might be due to invalid IL or missing references)
				//IL_005d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0132: Unknown result type (might be due to invalid IL or missing references)
				//IL_0134: Unknown result type (might be due to invalid IL or missing references)
				//IL_013b: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c7: Unknown result type (might be due to invalid IL or missing references)
				//IL_014e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0150: Unknown result type (might be due to invalid IL or missing references)
				//IL_0151: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dc: Unknown result type (might be due to invalid IL or missing references)
				//IL_00de: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f8: Unknown result type (might be due to invalid IL or missing references)
				//IL_01fe: Unknown result type (might be due to invalid IL or missing references)
				//IL_0204: Unknown result type (might be due to invalid IL or missing references)
				//IL_0209: Unknown result type (might be due to invalid IL or missing references)
				//IL_017e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0188: Unknown result type (might be due to invalid IL or missing references)
				//IL_018d: Unknown result type (might be due to invalid IL or missing references)
				//IL_021e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0220: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a2: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a4: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType1 logicalDeviceLevelerType = <>4__this;
				CommandResult result;
				try
				{
					if ((uint)num <= 2u)
					{
						goto IL_0080;
					}
					if (!logicalDeviceLevelerType.IdsCanCommandRunner.CommandSessionActivated)
					{
						result = (CommandResult)8;
					}
					else if (logicalDeviceLevelerType._commandCancelSource == null)
					{
						result = (CommandResult)1;
					}
					else
					{
						if (!((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType).IsDisposed)
						{
							<cancelSource>5__2 = CancellationTokenSource.CreateLinkedTokenSource(callerCancelToken, logicalDeviceLevelerType._commandCancelSource.Token);
							goto IL_0080;
						}
						TaggedLog.Debug("LogicalDeviceLevelerType1", String.Concat("Unable to send command to disposed LogicalDevice ", ((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceLevelerType).DeviceName), Array.Empty<object>());
						result = (CommandResult)7;
					}
					goto end_IL_000e;
					IL_0080:
					try
					{
						TaskAwaiter<CommandResult> val;
						CommandSendOption val2;
						ILogicalDeviceService deviceService;
						CommandResult result2;
						switch (num)
						{
						default:
							if (!<cancelSource>5__2.IsCancellationRequested)
							{
								if (!logicalDeviceLevelerType.IsPoweredActive)
								{
									val = logicalDeviceLevelerType.SendWakeupCommandAsync(<cancelSource>5__2.Token).GetAwaiter();
									if (!val.IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommand>d__77>(ref val, ref this);
										return;
									}
									goto IL_0113;
								}
								goto IL_013a;
							}
							result = (CommandResult)1;
							goto end_IL_0080;
						case 0:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0113;
						case 1:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_01d9;
						case 2:
							{
								val = <>u__1;
								<>u__1 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								break;
							}
							IL_013a:
							val2 = (CommandSendOption)1;
							if (((LogicalDeviceCommandPacket)LogicalDeviceLevelerCommandType1.PowerOnCommand).Equals((LogicalDeviceCommandPacket)(object)logicalDeviceLevelerType._lastSentCommand))
							{
								val2 = (CommandSendOption)(val2 | 2);
							}
							deviceService = ((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceLevelerType).DeviceService;
							if (((deviceService != null) ? deviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceLevelerType) : null) is IDirectCommandLeveler1 directCommandLeveler)
							{
								val = directCommandLeveler.SendDirectCommandLeveler1(logicalDeviceLevelerType, LogicalDeviceLevelerCommandType1.PowerOnCommand, <cancelSource>5__2.Token).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 1);
									<>u__1 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommand>d__77>(ref val, ref this);
									return;
								}
								goto IL_01d9;
							}
							val = logicalDeviceLevelerType.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)(object)command, <cancelSource>5__2.Token, (Func<ILogicalDevice, CommandControl>)null, val2).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 2);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommand>d__77>(ref val, ref this);
								return;
							}
							break;
							IL_0113:
							result2 = val.GetResult();
							if ((int)result2 == 0 && command.ButtonCommand != LogicalDeviceLevelerButtonType1.Power)
							{
								goto IL_013a;
							}
							result = result2;
							goto end_IL_0080;
							IL_01d9:
							result = val.GetResult();
							goto end_IL_0080;
						}
						CommandResult result3 = val.GetResult();
						logicalDeviceLevelerType._lastSentCommand = LogicalDeviceLevelerCommandType1.PowerOnCommand;
						result = result3;
						end_IL_0080:;
					}
					finally
					{
						if (num < 0 && <cancelSource>5__2 != null)
						{
							((IDisposable)<cancelSource>5__2).Dispose();
						}
					}
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendWakeupCommandAsync>d__75 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public CancellationToken cancelToken;

			public LogicalDeviceLevelerType1 <>4__this;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0157: Expected O, but got Unknown
				//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ab: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0124: Unknown result type (might be due to invalid IL or missing references)
				//IL_0129: Unknown result type (might be due to invalid IL or missing references)
				//IL_0131: Unknown result type (might be due to invalid IL or missing references)
				//IL_017c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0142: Unknown result type (might be due to invalid IL or missing references)
				//IL_0152: Unknown result type (might be due to invalid IL or missing references)
				//IL_0030: Unknown result type (might be due to invalid IL or missing references)
				//IL_0029: Unknown result type (might be due to invalid IL or missing references)
				//IL_0043: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				//IL_00db: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_0076: Unknown result type (might be due to invalid IL or missing references)
				//IL_010c: Unknown result type (might be due to invalid IL or missing references)
				//IL_010e: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_008d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType1 CS$<>8__locals7 = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_00c2;
					}
					if (num == 1)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_0140;
					}
					if (!((CancellationToken)(ref cancelToken)).IsCancellationRequested)
					{
						CommandSendOption val2 = (CommandSendOption)1;
						if (((LogicalDeviceCommandPacket)LogicalDeviceLevelerCommandType1.PowerOnCommand).Equals((LogicalDeviceCommandPacket)(object)CS$<>8__locals7._lastSentCommand))
						{
							val2 = (CommandSendOption)(val2 | 2);
						}
						if (((LogicalDevice<ILogicalDeviceCapability>)(object)CS$<>8__locals7).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)CS$<>8__locals7) is IDirectCommandLeveler1 directCommandLeveler)
						{
							val = directCommandLeveler.SendDirectCommandLeveler1(CS$<>8__locals7, LogicalDeviceLevelerCommandType1.PowerOnCommand, cancelToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendWakeupCommandAsync>d__75>(ref val, ref this);
								return;
							}
							goto IL_00c2;
						}
						val = CS$<>8__locals7.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)(object)LogicalDeviceLevelerCommandType1.PowerOnCommand, cancelToken, (Func<ILogicalDevice, CommandControl>)([CompilerGenerated] (ILogicalDevice device) => CS$<>8__locals7.IsPoweredActive ? ((CommandControl)0) : ((CommandControl)1)), val2).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendWakeupCommandAsync>d__75>(ref val, ref this);
							return;
						}
						goto IL_0140;
					}
					result = (CommandResult)1;
					goto end_IL_000e;
					IL_00c2:
					result = val.GetResult();
					goto end_IL_000e;
					IL_0140:
					CommandResult result2 = val.GetResult();
					CS$<>8__locals7._lastSentCommand = LogicalDeviceLevelerCommandType1.PowerOnCommand;
					result = result2;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceLevelerType1";

		private readonly object _locker = (object)new Object();

		private const int LevelerTextConsoleWidth = 16;

		private const int LevelerTextConsoleHeight = 2;

		protected ILogicalDeviceCommandRunnerIdsCan IdsCanCommandRunner;

		private CancellationTokenSource _commandCancelSource = new CancellationTokenSource();

		private string _textConsoleMessage;

		private int _textConsoleWidth;

		private int _textConsoleHeight;

		private ILogicalDevicePidFixedPoint _batteryVoltagePidCan;

		private LogicalDeviceLevelerCommandType1 _lastSentCommand;

		public virtual uint MSCommandTimeout => 5000u;

		public virtual uint MSSessionTimeout => 15000u;

		public override string DeviceName
		{
			get
			{
				if (((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId.FunctionInstance != 0)
				{
					return String.Format("Leveler {0}", (object)((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId.FunctionInstance);
				}
				return "Leveler";
			}
		}

		public LogicalDeviceLevelerStatusIndicatorStateType1 LedFrontState => ((LogicalDevice<LogicalDeviceLevelerStatusType1, ILogicalDeviceCapability>)(object)this).DeviceStatus.IndicatorStateType1(LogicalDeviceLevelerStatusIndicatorType1.Front);

		public LogicalDeviceLevelerStatusIndicatorStateType1 LedRearState => ((LogicalDevice<LogicalDeviceLevelerStatusType1, ILogicalDeviceCapability>)(object)this).DeviceStatus.IndicatorStateType1(LogicalDeviceLevelerStatusIndicatorType1.Rear);

		public LogicalDeviceLevelerStatusIndicatorStateType1 LedLeftState => ((LogicalDevice<LogicalDeviceLevelerStatusType1, ILogicalDeviceCapability>)(object)this).DeviceStatus.IndicatorStateType1(LogicalDeviceLevelerStatusIndicatorType1.Left);

		public LogicalDeviceLevelerStatusIndicatorStateType1 LedRightState => ((LogicalDevice<LogicalDeviceLevelerStatusType1, ILogicalDeviceCapability>)(object)this).DeviceStatus.IndicatorStateType1(LogicalDeviceLevelerStatusIndicatorType1.Right);

		public LogicalDeviceLevelerStatusIndicatorStateType1 LedLevelState => ((LogicalDevice<LogicalDeviceLevelerStatusType1, ILogicalDeviceCapability>)(object)this).DeviceStatus.IndicatorStateType1(LogicalDeviceLevelerStatusIndicatorType1.Level);

		public LogicalDeviceLevelerStatusIndicatorStateType1 LedPowerState => ((LogicalDevice<LogicalDeviceLevelerStatusType1, ILogicalDeviceCapability>)(object)this).DeviceStatus.IndicatorStateType1(LogicalDeviceLevelerStatusIndicatorType1.Power);

		public LogicalDeviceLevelerStatusIndicatorStateType1 LedRetractState => ((LogicalDevice<LogicalDeviceLevelerStatusType1, ILogicalDeviceCapability>)(object)this).DeviceStatus.IndicatorStateType1(LogicalDeviceLevelerStatusIndicatorType1.Retract);

		public LogicalDeviceLevelerStatusIndicatorStateType1 BuzzerActiveState => ((LogicalDevice<LogicalDeviceLevelerStatusType1, ILogicalDeviceCapability>)(object)this).DeviceStatus.IndicatorStateType1(LogicalDeviceLevelerStatusIndicatorType1.Buzzer);

		public bool IsPoweredActive => ((LogicalDevice<LogicalDeviceLevelerStatusType1, ILogicalDeviceCapability>)(object)this).DeviceStatus.IsIndicatorActive(LogicalDeviceLevelerStatusIndicatorType1.Power);

		public IDevice Device => null;

		public bool IsDetected => true;

		public IReadOnlyList<string> Lines => (IReadOnlyList<string>)(object)LinesRaw;

		[field: CompilerGenerated]
		public List<string> LinesRaw
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		} = new List<string>();

		[field: CompilerGenerated]
		public TEXT_CONSOLE_SIZE Size
		{
			[CompilerGenerated]
			get;
		} = new TEXT_CONSOLE_SIZE(16, 2);

		public string TextConsoleMessage
		{
			get
			{
				return _textConsoleMessage;
			}
			private set
			{
				if (((CommonNotifyPropertyChanged)this).SetBackingField<string>(ref _textConsoleMessage, value, "TextConsoleMessage", Array.Empty<string>()))
				{
					OnDeviceTextConsoleMessageChanged();
				}
			}
		}

		public int TextConsoleWidth
		{
			get
			{
				return _textConsoleWidth;
			}
			set
			{
				((CommonNotifyPropertyChanged)this).SetBackingField<int>(ref _textConsoleWidth, value, "TextConsoleWidth", Array.Empty<string>());
			}
		}

		public int TextConsoleHeight
		{
			get
			{
				return _textConsoleHeight;
			}
			set
			{
				((CommonNotifyPropertyChanged)this).SetBackingField<int>(ref _textConsoleHeight, value, "TextConsoleHeight", Array.Empty<string>());
			}
		}

		public virtual bool CommandSessionActivated => IdsCanCommandRunner.CommandSessionActivated;

		public LogicalDeviceExScope VoltageMeasurementBatteryPidScope => (LogicalDeviceExScope)2;

		public virtual ILogicalDevicePidFixedPoint VoltageMeasurementBatteryPid
		{
			get
			{
				//IL_0014: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Expected O, but got Unknown
				//IL_0020: Expected O, but got Unknown
				ILogicalDevicePidFixedPoint obj = _batteryVoltagePidCan;
				if (obj == null)
				{
					LogicalDevicePidFixedPoint val = new LogicalDevicePidFixedPoint((FixedPointType)1, (ILogicalDevice)(object)this, PID.BATTERY_VOLTAGE, (LogicalDeviceSessionType)0, (Func<ulong, bool>)null);
					ILogicalDevicePidFixedPoint val2 = (ILogicalDevicePidFixedPoint)val;
					_batteryVoltagePidCan = (ILogicalDevicePidFixedPoint)val;
					obj = val2;
				}
				return obj;
			}
		}

		public bool IsVoltagePidReadSupported => true;

		public LogicalDeviceLevelerType1(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService deviceService = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceLevelerStatusType1(), new LogicalDeviceLevelerStatusExtendedType1(), (ILogicalDeviceCapability)new LogicalDeviceCapability(), deviceService, isFunctionClassChangeable)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Expected O, but got Unknown
			//IL_0025: Unknown result type (might be due to invalid IL or missing references)
			//IL_002a: Unknown result type (might be due to invalid IL or missing references)
			//IL_003b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0047: Expected O, but got Unknown
			//IL_0049: Unknown result type (might be due to invalid IL or missing references)
			//IL_004e: Unknown result type (might be due to invalid IL or missing references)
			//IL_005a: Expected O, but got Unknown
			//IL_005a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0066: Expected O, but got Unknown
			//IL_006b: Expected O, but got Unknown
			//IL_0078: Unknown result type (might be due to invalid IL or missing references)
			//IL_0082: Expected O, but got Unknown
			LogicalDeviceCommandRunnerIdsCan val = new LogicalDeviceCommandRunnerIdsCan((ILogicalDevice)(object)this);
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).CommandProcessingTime = MSCommandTimeout;
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).SessionKeepAliveTime = MSSessionTimeout;
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)val;
			((INotifyPropertyChanged)IdsCanCommandRunner).PropertyChanged += new PropertyChangedEventHandler(OnIdsCanCommandRunnerPropertyChanged);
		}

		public override void OnDeviceStatusChanged()
		{
			((LogicalDevice<LogicalDeviceLevelerStatusType1, ILogicalDeviceCapability>)(object)this).OnDeviceStatusChanged();
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("LedFrontState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("LedRearState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("LedLeftState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("LedRightState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("LedLevelState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("LedPowerState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("LedRetractState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("BuzzerActiveState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("IsPoweredActive");
		}

		public override void OnDeviceStatusExtendedChanged(IDeviceDataPacketMutableExtended dataChanged)
		{
			base.OnDeviceStatusExtendedChanged(dataChanged);
			TextConsoleMessage = base.DeviceStatusExtended.Text;
		}

		protected override void DebugUpdateDeviceStatusExtendedChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, uint dataLength, byte oldExtendedByte, byte extendedByte, string optionalText = "")
		{
		}

		public void UpdateDeviceConsoleText(List<string> text)
		{
			lock (_locker)
			{
				LinesRaw.Clear();
				LinesRaw = text;
			}
			UpdateTextConsole((ITextConsole)(object)this);
		}

		public void UpdateTextConsole(ITextConsole textConsole)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0048: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0090: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
			//IL_0065: Unknown result type (might be due to invalid IL or missing references)
			if (textConsole.Size.Width != TextConsoleWidth)
			{
				TaggedLog.Warning("LogicalDeviceLevelerType1", String.Format("Ignoring TextConsole WIDTH of {0} because Type-1 levelers support a fixed width of {1}.", (object)textConsole.Size.Width, (object)TextConsoleWidth), Array.Empty<object>());
			}
			if (textConsole.Size.Height != TextConsoleHeight)
			{
				TaggedLog.Warning("LogicalDeviceLevelerType1", String.Format("Ignoring TextConsole HEIGHT of {0} because Type-1 levelers support a fixed height of {1}.", (object)textConsole.Size.Height, (object)TextConsoleHeight), Array.Empty<object>());
			}
			TextConsoleWidth = textConsole.Size.Width;
			TextConsoleHeight = textConsole.Size.Height;
			TextConsoleMessage = TextConsoleExtension.Text(textConsole, true);
		}

		public void OnDeviceTextConsoleMessageChanged()
		{
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task ActivateSession(CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ActivateSession>d__64 <ActivateSession>d__ = default(<ActivateSession>d__64);
			<ActivateSession>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<ActivateSession>d__.<>4__this = this;
			<ActivateSession>d__.cancelToken = cancelToken;
			<ActivateSession>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Start<<ActivateSession>d__64>(ref <ActivateSession>d__);
			return ((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Task;
		}

		public void DeactivateSession()
		{
			IdsCanCommandRunner.CommandDeactivateSession(true);
		}

		public Task<float> ReadVoltageMeasurementAsync(CancellationToken cancellationToken)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return LogicalDeviceVoltageExtension.ReadVoltageMeasurementAsync(VoltageMeasurementBatteryPid, cancellationToken);
		}

		protected void OnIdsCanCommandRunnerPropertyChanged(object sender, PropertyChangedEventArgs e)
		{
			if (e.PropertyName == "CommandSessionActivated")
			{
				((CommonNotifyPropertyChanged)this).OnPropertyChanged("CommandSessionActivated");
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendWakeupCommandAsync(CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SendWakeupCommandAsync>d__75 <SendWakeupCommandAsync>d__ = default(<SendWakeupCommandAsync>d__75);
			<SendWakeupCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendWakeupCommandAsync>d__.<>4__this = this;
			<SendWakeupCommandAsync>d__.cancelToken = cancelToken;
			<SendWakeupCommandAsync>d__.<>1__state = -1;
			<SendWakeupCommandAsync>d__.<>t__builder.Start<<SendWakeupCommandAsync>d__75>(ref <SendWakeupCommandAsync>d__);
			return <SendWakeupCommandAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommand(LogicalDeviceLevelerCommandType1 command, CancellationToken callerCancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<SendCommand>d__77 <SendCommand>d__ = default(<SendCommand>d__77);
			<SendCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommand>d__.<>4__this = this;
			<SendCommand>d__.command = command;
			<SendCommand>d__.callerCancelToken = callerCancelToken;
			<SendCommand>d__.<>1__state = -1;
			<SendCommand>d__.<>t__builder.Start<<SendCommand>d__77>(ref <SendCommand>d__);
			return <SendCommand>d__.<>t__builder.Task;
		}

		public override void Dispose(bool disposing)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Expected O, but got Unknown
			try
			{
				((INotifyPropertyChanged)IdsCanCommandRunner).PropertyChanged -= new PropertyChangedEventHandler(OnIdsCanCommandRunnerPropertyChanged);
			}
			catch (Object)
			{
			}
			CancellationTokenSource commandCancelSource = _commandCancelSource;
			if (commandCancelSource != null)
			{
				CancellationTokenSourceExtension.CancelAndDispose(commandCancelSource);
			}
			_commandCancelSource = null;
			ILogicalDeviceCommandRunnerIdsCan idsCanCommandRunner = IdsCanCommandRunner;
			if (idsCanCommandRunner != null)
			{
				((ICommonDisposable)idsCanCommandRunner).TryDispose();
			}
			base.Dispose(disposing);
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceCapability>)(object)this).LastReceivedNetworkStatus;
		}
	}
	public interface ILogicalDeviceLevelerType3 : ILogicalDeviceLeveler, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IDevicesActivation, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceWithStatus<LogicalDeviceLevelerStatusType3>, ILogicalDeviceWithStatus, ITextConsole
	{
		void UpdateDeviceConsoleText(List<string> text);
	}
	public interface ILogicalDeviceDirectLevelerType3 : ILogicalDeviceLevelerType3, ILogicalDeviceLeveler, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IDevicesActivation, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceWithStatus<LogicalDeviceLevelerStatusType3>, ILogicalDeviceWithStatus, ITextConsole, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public interface IDirectCommandLeveler3 : ILogicalDeviceSourceDirect, ILogicalDeviceSource
	{
		Task<CommandResult> SendDirectCommandLeveler3(ILogicalDeviceLevelerType3 logicalDevice, LogicalDeviceLevelerCommandType3 command, CancellationToken cancelToken);
	}
	[Flags]
	public enum LogicalDeviceLevelerButtonType3 : Enum
	{
		None = 0,
		Right = 1,
		Left = 2,
		Rear = 4,
		Front = 8,
		AutoLevel = 0x10,
		Retract = 0x20,
		Enter = 0x40,
		MenuDown = 0x80,
		Extend = 0x100,
		Back = 0x200,
		MenuUp = 0x400,
		AutoHitch = 0x800,
		EnterSetup = 0x1000,
		Reserved1 = 0x2000,
		Reserved2 = 0x4000,
		Reserved3 = 0x8000
	}
	[AttributeUsage(/*Could not decode attribute arguments.*/)]
	public class LogicalDeviceLevelerButtonType3Attribute : Attribute
	{
		[field: CompilerGenerated]
		public LogicalDeviceLevelerButtonType3 ButtonType
		{
			[CompilerGenerated]
			get;
		}

		public LogicalDeviceLevelerButtonType3Attribute(LogicalDeviceLevelerButtonType3 buttonType)
		{
			ButtonType = buttonType;
		}
	}
	public class LogicalDeviceLevelerCommandType3 : LogicalDeviceCommandPacket
	{
		public const string LogTag = "LogicalDeviceLevelerCommandType3";

		public const int CommandPacketSize = 3;

		public const int ScreenSelectedIndex = 0;

		public const int ButtonsPressedStartIndex = 1;

		public LogicalDeviceLevelerScreenType3 ScreenSelected
		{
			get
			{
				LogicalDeviceLevelerScreenType3 logicalDeviceLevelerScreenType = (LogicalDeviceLevelerScreenType3)((LogicalDeviceCommandPacket)this).Data[0];
				if (!Enum.IsDefined(typeof(LogicalDeviceLevelerScreenType3), (object)logicalDeviceLevelerScreenType))
				{
					TaggedLog.Error("LogicalDeviceLevelerCommandType3", String.Format("Unexpected/Unknown Selected Screen Type {0}", (object)logicalDeviceLevelerScreenType), Array.Empty<object>());
					return LogicalDeviceLevelerScreenType3.Unknown;
				}
				return logicalDeviceLevelerScreenType;
			}
		}

		public LogicalDeviceLevelerButtonType3 ButtonsPressed => (LogicalDeviceLevelerButtonType3)((LogicalDeviceCommandPacket)this).MsbUInt16(1u);

		public LogicalDeviceLevelerCommandType3(LogicalDeviceLevelerScreenType3 screenSelected, LogicalDeviceLevelerButtonType3 buttonsPressed, int commandResponseTimeMs = 200)
			: base((byte)0, MakeDataForCommand(screenSelected, buttonsPressed), commandResponseTimeMs)
		{
		}

		public LogicalDeviceLevelerCommandType3(byte commandByte, byte[] data, int commandResponseTimeMs)
			: base(commandByte, data, commandResponseTimeMs)
		{
		}

		protected static byte[] MakeDataForCommand(LogicalDeviceLevelerScreenType3 screenSelected, LogicalDeviceLevelerButtonType3 buttonsPressed)
		{
			return (byte[])(object)new Byte[3]
			{
				(byte)screenSelected,
				(byte)((int)(buttonsPressed & (LogicalDeviceLevelerButtonType3.Extend | LogicalDeviceLevelerButtonType3.Back | LogicalDeviceLevelerButtonType3.MenuUp | LogicalDeviceLevelerButtonType3.AutoHitch | LogicalDeviceLevelerButtonType3.EnterSetup | LogicalDeviceLevelerButtonType3.Reserved1 | LogicalDeviceLevelerButtonType3.Reserved2 | LogicalDeviceLevelerButtonType3.Reserved3)) >> 8),
				(byte)(buttonsPressed & (LogicalDeviceLevelerButtonType3.Right | LogicalDeviceLevelerButtonType3.Left | LogicalDeviceLevelerButtonType3.Rear | LogicalDeviceLevelerButtonType3.Front | LogicalDeviceLevelerButtonType3.AutoLevel | LogicalDeviceLevelerButtonType3.Retract | LogicalDeviceLevelerButtonType3.Enter | LogicalDeviceLevelerButtonType3.MenuDown))
			};
		}
	}
	public enum LogicalDeviceLevelerScreenType3 : Enum
	{
		Default = 0,
		IdleMotorized = 1,
		IdleTowable = 2,
		Auto = 3,
		Manual = 4,
		Select = 5,
		YesNo = 6,
		Info = 7,
		Alert = 8,
		Unknown = 65535
	}
	public enum LogicalDeviceLevelerStatusIndicatorStateType3 : Enum
	{
		[LogicalDeviceLevelerStatusIndicatorActiveType3(false)]
		Unknown = 65535,
		[LogicalDeviceLevelerStatusIndicatorActiveType3(false)]
		Off = 0,
		[LogicalDeviceLevelerStatusIndicatorActiveType3(true)]
		Blink = 1,
		[LogicalDeviceLevelerStatusIndicatorActiveType3(true)]
		InverseBlink = 2,
		[LogicalDeviceLevelerStatusIndicatorActiveType3(true)]
		On = 3
	}
	[AttributeUsage(/*Could not decode attribute arguments.*/)]
	public class LogicalDeviceLevelerStatusIndicatorActiveType3Attribute : Attribute, IAttributeValue<bool>
	{
		[field: CompilerGenerated]
		public bool Value
		{
			[CompilerGenerated]
			get;
		}

		public LogicalDeviceLevelerStatusIndicatorActiveType3Attribute(bool value)
		{
			Value = value;
		}
	}
	public static class LogicalDeviceLevelerStatusIndicatorStateType3Extension : Object
	{
		public static bool IsActive(this LogicalDeviceLevelerStatusIndicatorStateType3 indicatorStateType3)
		{
			return EnumExtensions.GetAttributeValue<LogicalDeviceLevelerStatusIndicatorActiveType3Attribute, bool>((Enum)(object)indicatorStateType3, false, true);
		}
	}
	public enum LogicalDeviceLevelerStatusIndicatorType3 : Enum
	{
		Buzzer = 3,
		Retract = 12,
		Extend = 48,
		Level = 192,
		Right = 768,
		Left = 3072,
		Rear = 12288,
		Front = 49152,
		Unknown = 65535
	}
	public class LogicalDeviceLevelerStatusType3 : LogicalDeviceStatusPacketMutable, ILogicalDeviceStatus<LogicalDeviceLevelerType3StatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		private const string LogTag = "LogicalDeviceLevelerStatusType3";

		public const int MinimumStatusPacketSize = 6;

		public const int ScreenEnumIndex = 0;

		public const int DisableButtonFlagsStartIndex = 1;

		public const int BlinkRateIndex = 3;

		public const int IndicatorStartIndex = 4;

		public const int ScreenEnumNumBytes = 1;

		public const int DisableButtonFlagsNumBytes = 2;

		public const int IndicatorNumBytes = 2;

		public int IndicatorBlinkCycleTimePollRateMs => 62;

		public uint IndicatorBlinkOnTimeMs
		{
			get
			{
				return (uint)((((((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3] & 0xF0) >> 4) + 1) * 125);
			}
			set
			{
				uint num = value / 125;
				if (num != 0)
				{
					num--;
				}
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3] = SetBlinkRate((byte)num, ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3]);
			}
		}

		public uint IndicatorBlinkOffTimeMs
		{
			get
			{
				return (uint)(((((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3] & 0xF) + 1) * 125);
			}
			set
			{
				uint num = value / 125;
				if (num != 0)
				{
					num--;
				}
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3] = SetBlinkRate(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3], (byte)num);
			}
		}

		public uint IndicatorBlinkTotalTimeMs => IndicatorBlinkOnTimeMs + IndicatorBlinkOffTimeMs;

		public double IndicatorBlinkDutyCycle => (double)IndicatorBlinkOnTimeMs / (double)IndicatorBlinkTotalTimeMs;

		public LogicalDeviceLevelerButtonType3 ButtonsEnabled
		{
			get
			{
				return (LogicalDeviceLevelerButtonType3)(~((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetUInt16(1u));
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt16((ushort)(~(uint)value), 1);
			}
		}

		public LogicalDeviceLevelerButtonType3 ButtonsDisabled
		{
			get
			{
				return (LogicalDeviceLevelerButtonType3)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetUInt16(1u);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt16((ushort)value, 1);
			}
		}

		public LogicalDeviceLevelerScreenType3 CurrentScreenShowing
		{
			get
			{
				LogicalDeviceLevelerScreenType3 logicalDeviceLevelerScreenType = (LogicalDeviceLevelerScreenType3)((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0];
				if (!Enum.IsDefined(typeof(LogicalDeviceLevelerScreenType3), (object)logicalDeviceLevelerScreenType))
				{
					TaggedLog.Error("LogicalDeviceLevelerStatusType3", String.Format("Unexpected/Unknown Screen Type {0}", (object)logicalDeviceLevelerScreenType), Array.Empty<object>());
					return LogicalDeviceLevelerScreenType3.Unknown;
				}
				return logicalDeviceLevelerScreenType;
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0] = (byte)value;
			}
		}

		public LogicalDeviceLevelerStatusType3()
			: base(6u)
		{
		}

		public LogicalDeviceLevelerStatusIndicatorStateType3 IndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3 indicator)
		{
			//IL_0019: Unknown result type (might be due to invalid IL or missing references)
			//IL_0047: Unknown result type (might be due to invalid IL or missing references)
			if (indicator == LogicalDeviceLevelerStatusIndicatorType3.Unknown)
			{
				return LogicalDeviceLevelerStatusIndicatorStateType3.Unknown;
			}
			BitPositionValue val = default(BitPositionValue);
			((BitPositionValue)(ref val))..ctor((uint)indicator, 4, 2);
			LogicalDeviceLevelerStatusIndicatorStateType3 value = (LogicalDeviceLevelerStatusIndicatorStateType3)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(val);
			if (!Enum.IsDefined(typeof(LogicalDeviceLevelerStatusIndicatorStateType3), (object)value))
			{
				TaggedLog.Error("LogicalDeviceLevelerStatusType3", String.Format("Unexpected/Unknown Indicator State {0}@{1}", (object)value, (object)val), Array.Empty<object>());
				return LogicalDeviceLevelerStatusIndicatorStateType3.Unknown;
			}
			return value;
		}

		public void SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3 indicator, LogicalDeviceLevelerStatusIndicatorStateType3 indicatorState)
		{
			//IL_001d: Unknown result type (might be due to invalid IL or missing references)
			if (indicatorState != LogicalDeviceLevelerStatusIndicatorStateType3.Unknown && indicator != LogicalDeviceLevelerStatusIndicatorType3.Unknown)
			{
				BitPositionValue val = default(BitPositionValue);
				((BitPositionValue)(ref val))..ctor((uint)indicator, 4, 2);
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)indicatorState, val);
			}
		}

		public bool IsIndicatorActive(LogicalDeviceLevelerStatusIndicatorType3 indicator)
		{
			return IndicatorStateType3(indicator).IsActive();
		}

		protected byte SetBlinkRate(byte onTime125Ms, byte offTime125Ms)
		{
			return (byte)(((onTime125Ms << 4) & 0xF0) | (offTime125Ms & 0xF));
		}

		public LogicalDeviceLevelerStatusIndicatorBlinkCycle IndicatorCurrentBlinkCycleSim(LogicalDeviceLevelerStatusIndicatorType3 statusIndicatorType3)
		{
			if (statusIndicatorType3 == LogicalDeviceLevelerStatusIndicatorType3.Unknown)
			{
				return LogicalDeviceLevelerStatusIndicatorBlinkCycle.Unknown;
			}
			return IndicatorStateType3(statusIndicatorType3) switch
			{
				LogicalDeviceLevelerStatusIndicatorStateType3.Off => LogicalDeviceLevelerStatusIndicatorBlinkCycle.Off, 
				LogicalDeviceLevelerStatusIndicatorStateType3.On => LogicalDeviceLevelerStatusIndicatorBlinkCycle.On, 
				LogicalDeviceLevelerStatusIndicatorStateType3.Blink => LogicalDeviceLevelerIndicatorBlinkAttribute.CalculateCurrentBlinkCycle((uint)((double)IndicatorBlinkTotalTimeMs / 2.0), IndicatorBlinkDutyCycle, inverseBlink: false), 
				LogicalDeviceLevelerStatusIndicatorStateType3.InverseBlink => LogicalDeviceLevelerIndicatorBlinkAttribute.CalculateCurrentBlinkCycle((uint)((double)IndicatorBlinkTotalTimeMs / 2.0), IndicatorBlinkDutyCycle, inverseBlink: true), 
				_ => LogicalDeviceLevelerStatusIndicatorBlinkCycle.Unknown, 
			};
		}

		public bool IsButtonEnabled(LogicalDeviceLevelerButtonType3 buttonFlagsType3)
		{
			if (buttonFlagsType3 == LogicalDeviceLevelerButtonType3.None)
			{
				return false;
			}
			ushort num = (ushort)(~((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetUInt16(1u));
			if (((uint)buttonFlagsType3 & (uint)num) == (uint)buttonFlagsType3)
			{
				return true;
			}
			return false;
		}

		public LogicalDeviceLevelerType3StatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceLevelerType3StatusSerializable(this);
		}
	}
	public class LogicalDeviceLevelerType3 : LogicalDevice<LogicalDeviceLevelerStatusType3, ILogicalDeviceCapability>, ILogicalDeviceWithTextConsole, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceDirectLevelerType3, ILogicalDeviceLevelerType3, ILogicalDeviceLeveler, IDevicesActivation, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceWithStatus<LogicalDeviceLevelerStatusType3>, ILogicalDeviceWithStatus, ITextConsole, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass77_0 : Object
		{
			public LogicalDeviceLevelerCommandType3 command;

			public LogicalDeviceLevelerType3 <>4__this;

			internal CommandControl <SendCommand>b__0(ILogicalDevice logicalDevice)
			{
				switch (command.ButtonsPressed)
				{
				case LogicalDeviceLevelerButtonType3.None:
					if (((LogicalDevice<LogicalDeviceLevelerStatusType3, ILogicalDeviceCapability>)<>4__this).DeviceStatus.ButtonsDisabled != LogicalDeviceLevelerButtonType3.None)
					{
						return (CommandControl)0;
					}
					return (CommandControl)1;
				default:
					return (CommandControl)0;
				}
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ActivateSession>d__64 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceLevelerType3 <>4__this;

			public CancellationToken cancelToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_007b: Expected O, but got Unknown
				//IL_00a6: Expected O, but got Unknown
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0026: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType3 logicalDeviceLevelerType = <>4__this;
				try
				{
					try
					{
						TaskAwaiter val;
						if (num != 0)
						{
							val = logicalDeviceLevelerType.IdsCanCommandRunner.CommandActivateSession(cancelToken, true).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <ActivateSession>d__64>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val)).GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Error("LogicalDeviceLevelerType3", String.Format("Unable to ActiveSession for {0} with error {1}", (object)((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceLevelerType).LogicalId, (object)ex2.Message), Array.Empty<object>());
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommand>d__77 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLevelerCommandType3 command;

			public LogicalDeviceLevelerType3 <>4__this;

			public CancellationToken callerCancelToken;

			private <>c__DisplayClass77_0 <>8__1;

			private CancellationTokenSource <cancelSource>5__2;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_028f: Expected O, but got Unknown
				//IL_0050: Unknown result type (might be due to invalid IL or missing references)
				//IL_0185: Unknown result type (might be due to invalid IL or missing references)
				//IL_018a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0192: Unknown result type (might be due to invalid IL or missing references)
				//IL_005f: Unknown result type (might be due to invalid IL or missing references)
				//IL_02c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0216: Unknown result type (might be due to invalid IL or missing references)
				//IL_021b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0223: Unknown result type (might be due to invalid IL or missing references)
				//IL_0084: Unknown result type (might be due to invalid IL or missing references)
				//IL_0234: Unknown result type (might be due to invalid IL or missing references)
				//IL_0239: Unknown result type (might be due to invalid IL or missing references)
				//IL_024c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0270: Unknown result type (might be due to invalid IL or missing references)
				//IL_0272: Unknown result type (might be due to invalid IL or missing references)
				//IL_025a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Unknown result type (might be due to invalid IL or missing references)
				//IL_0112: Unknown result type (might be due to invalid IL or missing references)
				//IL_0113: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c5: Unknown result type (might be due to invalid IL or missing references)
				//IL_01db: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e1: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0146: Unknown result type (might be due to invalid IL or missing references)
				//IL_0150: Unknown result type (might be due to invalid IL or missing references)
				//IL_0155: Unknown result type (might be due to invalid IL or missing references)
				//IL_01fb: Unknown result type (might be due to invalid IL or missing references)
				//IL_01fd: Unknown result type (might be due to invalid IL or missing references)
				//IL_016a: Unknown result type (might be due to invalid IL or missing references)
				//IL_016c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType3 logicalDeviceLevelerType = <>4__this;
				CommandResult result;
				try
				{
					if ((uint)num <= 1u)
					{
						goto IL_00d5;
					}
					<>8__1 = new <>c__DisplayClass77_0();
					<>8__1.command = command;
					<>8__1.<>4__this = <>4__this;
					if (!logicalDeviceLevelerType.IdsCanCommandRunner.CommandSessionActivated)
					{
						result = (CommandResult)8;
					}
					else if (logicalDeviceLevelerType._commandCancelSource == null)
					{
						result = (CommandResult)1;
					}
					else if (<>8__1.command.ScreenSelected != ((LogicalDevice<LogicalDeviceLevelerStatusType3, ILogicalDeviceCapability>)logicalDeviceLevelerType).DeviceStatus.CurrentScreenShowing)
					{
						result = (CommandResult)11;
					}
					else
					{
						if (!((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType).IsDisposed)
						{
							<cancelSource>5__2 = CancellationTokenSource.CreateLinkedTokenSource(callerCancelToken, logicalDeviceLevelerType._commandCancelSource.Token);
							goto IL_00d5;
						}
						TaggedLog.Debug("LogicalDeviceLevelerType3", String.Concat("Unable to send command to disposed LogicalDevice ", ((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceLevelerType).DeviceName), Array.Empty<object>());
						result = (CommandResult)7;
					}
					goto end_IL_000e;
					IL_00d5:
					try
					{
						TaskAwaiter<CommandResult> val;
						if (num == 0)
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_01a1;
						}
						if (num == 1)
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0232;
						}
						if (!<cancelSource>5__2.IsCancellationRequested)
						{
							CommandSendOption val2 = (CommandSendOption)1;
							if (((LogicalDeviceCommandPacket)<>8__1.command).Equals((LogicalDeviceCommandPacket)(object)logicalDeviceLevelerType._lastSentCommand))
							{
								val2 = (CommandSendOption)(val2 | 2);
							}
							ILogicalDeviceService deviceService = ((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceLevelerType).DeviceService;
							if (((deviceService != null) ? deviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceLevelerType) : null) is IDirectCommandLeveler3 directCommandLeveler)
							{
								val = directCommandLeveler.SendDirectCommandLeveler3(logicalDeviceLevelerType, <>8__1.command, <cancelSource>5__2.Token).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 0);
									<>u__1 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommand>d__77>(ref val, ref this);
									return;
								}
								goto IL_01a1;
							}
							val = logicalDeviceLevelerType.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)(object)<>8__1.command, <cancelSource>5__2.Token, (Func<ILogicalDevice, CommandControl>)delegate
							{
								switch (<>8__1.command.ButtonsPressed)
								{
								case LogicalDeviceLevelerButtonType3.None:
									if (((LogicalDevice<LogicalDeviceLevelerStatusType3, ILogicalDeviceCapability>)<>8__1.<>4__this).DeviceStatus.ButtonsDisabled != LogicalDeviceLevelerButtonType3.None)
									{
										return (CommandControl)0;
									}
									return (CommandControl)1;
								default:
									return (CommandControl)0;
								}
							}, val2).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommand>d__77>(ref val, ref this);
								return;
							}
							goto IL_0232;
						}
						result = (CommandResult)1;
						goto end_IL_00d5;
						IL_0232:
						CommandResult result2 = val.GetResult();
						logicalDeviceLevelerType._lastSentCommand = <>8__1.command;
						if ((int)result2 != 0)
						{
							TaggedLog.Debug("LogicalDeviceLevelerType3", String.Format("Unable to successfully send leveler command because {0}", (object)result2), Array.Empty<object>());
						}
						result = result2;
						goto end_IL_00d5;
						IL_01a1:
						result = val.GetResult();
						end_IL_00d5:;
					}
					finally
					{
						if (num < 0 && <cancelSource>5__2 != null)
						{
							((IDisposable)<cancelSource>5__2).Dispose();
						}
					}
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>8__1 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendWakeupCommandAsync>d__75 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLevelerType3 <>4__this;

			public CancellationToken cancelToken;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_008a: Expected O, but got Unknown
				//IL_0063: Unknown result type (might be due to invalid IL or missing references)
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0029: Unknown result type (might be due to invalid IL or missing references)
				//IL_0033: Unknown result type (might be due to invalid IL or missing references)
				//IL_0038: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				//IL_0085: Unknown result type (might be due to invalid IL or missing references)
				//IL_004c: Unknown result type (might be due to invalid IL or missing references)
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00af: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType3 logicalDeviceLevelerType = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceLevelerType.SendCommand(new LogicalDeviceLevelerCommandType3(((LogicalDevice<LogicalDeviceLevelerStatusType3, ILogicalDeviceCapability>)logicalDeviceLevelerType).DeviceStatus.CurrentScreenShowing, LogicalDeviceLevelerButtonType3.None), cancelToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendWakeupCommandAsync>d__75>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceLevelerType3";

		private readonly object _locker = (object)new Object();

		private const int LevelerTextConsoleWidth = 40;

		private const int LevelerTextConsoleHeight = 6;

		protected ILogicalDeviceCommandRunnerIdsCan IdsCanCommandRunner;

		private CancellationTokenSource _commandCancelSource = new CancellationTokenSource();

		private string _textConsoleMessage;

		private int _textConsoleWidth;

		private int _textConsoleHeight;

		private ILogicalDevicePidFixedPoint _batteryVoltagePidCan;

		private LogicalDeviceLevelerCommandType3 _lastSentCommand;

		public virtual uint MSCommandTimeout => 5000u;

		public virtual uint MSSessionTimeout => 15000u;

		public override string DeviceName
		{
			get
			{
				if (((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId.FunctionInstance != 0)
				{
					return String.Format("Leveler {0}", (object)((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId.FunctionInstance);
				}
				return "Leveler";
			}
		}

		public LogicalDeviceLevelerStatusIndicatorStateType3 LedFrontState => ((LogicalDevice<LogicalDeviceLevelerStatusType3, ILogicalDeviceCapability>)this).DeviceStatus.IndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Front);

		public LogicalDeviceLevelerStatusIndicatorStateType3 LedRearState => ((LogicalDevice<LogicalDeviceLevelerStatusType3, ILogicalDeviceCapability>)this).DeviceStatus.IndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Rear);

		public LogicalDeviceLevelerStatusIndicatorStateType3 LedLeftState => ((LogicalDevice<LogicalDeviceLevelerStatusType3, ILogicalDeviceCapability>)this).DeviceStatus.IndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Left);

		public LogicalDeviceLevelerStatusIndicatorStateType3 LedRightState => ((LogicalDevice<LogicalDeviceLevelerStatusType3, ILogicalDeviceCapability>)this).DeviceStatus.IndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Right);

		public LogicalDeviceLevelerStatusIndicatorStateType3 LedLevelState => ((LogicalDevice<LogicalDeviceLevelerStatusType3, ILogicalDeviceCapability>)this).DeviceStatus.IndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Level);

		public LogicalDeviceLevelerStatusIndicatorStateType3 LedExtendState => ((LogicalDevice<LogicalDeviceLevelerStatusType3, ILogicalDeviceCapability>)this).DeviceStatus.IndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Extend);

		public LogicalDeviceLevelerStatusIndicatorStateType3 LedRetractState => ((LogicalDevice<LogicalDeviceLevelerStatusType3, ILogicalDeviceCapability>)this).DeviceStatus.IndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Retract);

		public LogicalDeviceLevelerStatusIndicatorStateType3 BuzzerActiveState => ((LogicalDevice<LogicalDeviceLevelerStatusType3, ILogicalDeviceCapability>)this).DeviceStatus.IndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Buzzer);

		public LogicalDeviceLevelerScreenType3 CurrentScreenShowing => ((LogicalDevice<LogicalDeviceLevelerStatusType3, ILogicalDeviceCapability>)this).DeviceStatus.CurrentScreenShowing;

		public LogicalDeviceLevelerButtonType3 ButtonsDisabled => ((LogicalDevice<LogicalDeviceLevelerStatusType3, ILogicalDeviceCapability>)this).DeviceStatus.ButtonsDisabled;

		public IDevice Device => null;

		public bool IsDetected => true;

		public IReadOnlyList<string> Lines => (IReadOnlyList<string>)(object)LinesRaw;

		[field: CompilerGenerated]
		public List<string> LinesRaw
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		} = new List<string>();

		[field: CompilerGenerated]
		public TEXT_CONSOLE_SIZE Size
		{
			[CompilerGenerated]
			get;
		} = new TEXT_CONSOLE_SIZE(40, 6);

		public string TextConsoleMessage
		{
			get
			{
				return _textConsoleMessage;
			}
			private set
			{
				if (((CommonNotifyPropertyChanged)this).SetBackingField<string>(ref _textConsoleMessage, value, "TextConsoleMessage", Array.Empty<string>()))
				{
					OnDeviceTextConsoleMessageChanged();
				}
			}
		}

		public int TextConsoleWidth
		{
			get
			{
				return _textConsoleWidth;
			}
			set
			{
				((CommonNotifyPropertyChanged)this).SetBackingField<int>(ref _textConsoleWidth, value, "TextConsoleWidth", Array.Empty<string>());
			}
		}

		public int TextConsoleHeight
		{
			get
			{
				return _textConsoleHeight;
			}
			set
			{
				((CommonNotifyPropertyChanged)this).SetBackingField<int>(ref _textConsoleHeight, value, "TextConsoleHeight", Array.Empty<string>());
			}
		}

		public virtual bool CommandSessionActivated => IdsCanCommandRunner.CommandSessionActivated;

		public LogicalDeviceExScope VoltageMeasurementBatteryPidScope => (LogicalDeviceExScope)2;

		public virtual ILogicalDevicePidFixedPoint VoltageMeasurementBatteryPid
		{
			get
			{
				//IL_0014: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Expected O, but got Unknown
				//IL_0020: Expected O, but got Unknown
				ILogicalDevicePidFixedPoint obj = _batteryVoltagePidCan;
				if (obj == null)
				{
					LogicalDevicePidFixedPoint val = new LogicalDevicePidFixedPoint((FixedPointType)1, (ILogicalDevice)(object)this, PID.BATTERY_VOLTAGE, (LogicalDeviceSessionType)0, (Func<ulong, bool>)null);
					ILogicalDevicePidFixedPoint val2 = (ILogicalDevicePidFixedPoint)val;
					_batteryVoltagePidCan = (ILogicalDevicePidFixedPoint)val;
					obj = val2;
				}
				return obj;
			}
		}

		public bool IsVoltagePidReadSupported => true;

		public LogicalDeviceLevelerType3(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService deviceService = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceLevelerStatusType3(), (ILogicalDeviceCapability)new LogicalDeviceCapability(), deviceService, isFunctionClassChangeable)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Expected O, but got Unknown
			//IL_0025: Unknown result type (might be due to invalid IL or missing references)
			//IL_002a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0036: Unknown result type (might be due to invalid IL or missing references)
			//IL_0042: Expected O, but got Unknown
			//IL_0044: Unknown result type (might be due to invalid IL or missing references)
			//IL_0049: Unknown result type (might be due to invalid IL or missing references)
			//IL_0055: Expected O, but got Unknown
			//IL_0055: Unknown result type (might be due to invalid IL or missing references)
			//IL_0061: Expected O, but got Unknown
			//IL_0066: Expected O, but got Unknown
			//IL_0073: Unknown result type (might be due to invalid IL or missing references)
			//IL_007d: Expected O, but got Unknown
			LogicalDeviceCommandRunnerIdsCan val = new LogicalDeviceCommandRunnerIdsCan((ILogicalDevice)(object)this);
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).CommandProcessingTime = MSCommandTimeout;
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).SessionKeepAliveTime = MSSessionTimeout;
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)val;
			((INotifyPropertyChanged)IdsCanCommandRunner).PropertyChanged += new PropertyChangedEventHandler(OnIdsCanCommandRunnerPropertyChanged);
		}

		public override void OnDeviceOnlineChanged()
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0023: Expected I4, but got Unknown
			((LogicalDevice<ILogicalDeviceCapability>)(object)this).OnDeviceOnlineChanged();
			LogicalDeviceActiveConnection activeConnection = ((LogicalDevice<ILogicalDeviceCapability>)(object)this).ActiveConnection;
			switch ((int)activeConnection)
			{
			case 1:
			{
				ILogicalDeviceSourceDirect primaryDeviceSourceDirect = ((LogicalDevice<ILogicalDeviceCapability>)(object)this).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)this);
				ILogicalDeviceSourceDirect obj = ((primaryDeviceSourceDirect is ILogicalDeviceSourceDirectConnectionIdsCan) ? primaryDeviceSourceDirect : null);
				object obj2;
				if (obj == null)
				{
					obj2 = null;
				}
				else
				{
					IRemoteDevice obj3 = ((ILogicalDeviceSourceDirectConnectionIdsCan)obj).FindRemoteDevice((ILogicalDevice)(object)this);
					obj2 = ((obj3 != null) ? ((IDevice)obj3).TextConsole : null);
				}
				ITextConsole val = (ITextConsole)obj2;
				if (val == null)
				{
					TextConsoleMessage = "";
				}
				else
				{
					UpdateTextConsole(val);
				}
				break;
			}
			case 0:
			case 2:
			case 3:
				TextConsoleMessage = "";
				break;
			}
		}

		public override void OnDeviceStatusChanged()
		{
			base.OnDeviceStatusChanged();
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("LedFrontState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("LedRearState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("LedLeftState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("LedRightState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("LedLevelState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("LedExtendState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("LedRetractState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("BuzzerActiveState");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("CurrentScreenShowing");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("ButtonsDisabled");
		}

		public void UpdateTextConsole(ITextConsole textConsole)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0013: Unknown result type (might be due to invalid IL or missing references)
			TextConsoleWidth = textConsole.Size.Width;
			TextConsoleHeight = textConsole.Size.Height;
			TextConsoleMessage = TextConsoleExtension.Text(textConsole, true);
		}

		public void OnDeviceTextConsoleMessageChanged()
		{
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task ActivateSession(CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ActivateSession>d__64 <ActivateSession>d__ = default(<ActivateSession>d__64);
			<ActivateSession>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<ActivateSession>d__.<>4__this = this;
			<ActivateSession>d__.cancelToken = cancelToken;
			<ActivateSession>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Start<<ActivateSession>d__64>(ref <ActivateSession>d__);
			return ((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Task;
		}

		public void DeactivateSession()
		{
			IdsCanCommandRunner.CommandDeactivateSession(true);
		}

		public Task<float> ReadVoltageMeasurementAsync(CancellationToken cancellationToken)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return LogicalDeviceVoltageExtension.ReadVoltageMeasurementAsync(VoltageMeasurementBatteryPid, cancellationToken);
		}

		protected void OnIdsCanCommandRunnerPropertyChanged(object sender, PropertyChangedEventArgs e)
		{
			if (e.PropertyName == "CommandSessionActivated")
			{
				((CommonNotifyPropertyChanged)this).OnPropertyChanged("CommandSessionActivated");
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendWakeupCommandAsync(CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SendWakeupCommandAsync>d__75 <SendWakeupCommandAsync>d__ = default(<SendWakeupCommandAsync>d__75);
			<SendWakeupCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendWakeupCommandAsync>d__.<>4__this = this;
			<SendWakeupCommandAsync>d__.cancelToken = cancelToken;
			<SendWakeupCommandAsync>d__.<>1__state = -1;
			<SendWakeupCommandAsync>d__.<>t__builder.Start<<SendWakeupCommandAsync>d__75>(ref <SendWakeupCommandAsync>d__);
			return <SendWakeupCommandAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommand(LogicalDeviceLevelerCommandType3 command, CancellationToken callerCancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<SendCommand>d__77 <SendCommand>d__ = default(<SendCommand>d__77);
			<SendCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommand>d__.<>4__this = this;
			<SendCommand>d__.command = command;
			<SendCommand>d__.callerCancelToken = callerCancelToken;
			<SendCommand>d__.<>1__state = -1;
			<SendCommand>d__.<>t__builder.Start<<SendCommand>d__77>(ref <SendCommand>d__);
			return <SendCommand>d__.<>t__builder.Task;
		}

		public void UpdateDeviceConsoleText(List<string> text)
		{
			lock (_locker)
			{
				LinesRaw.Clear();
				LinesRaw = text;
			}
			UpdateTextConsole((ITextConsole)(object)this);
		}

		public override void Dispose(bool disposing)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Expected O, but got Unknown
			try
			{
				((INotifyPropertyChanged)IdsCanCommandRunner).PropertyChanged -= new PropertyChangedEventHandler(OnIdsCanCommandRunnerPropertyChanged);
			}
			catch (Object)
			{
			}
			CancellationTokenSource commandCancelSource = _commandCancelSource;
			if (commandCancelSource != null)
			{
				CancellationTokenSourceExtension.CancelAndDispose(commandCancelSource);
			}
			_commandCancelSource = null;
			ILogicalDeviceCommandRunnerIdsCan idsCanCommandRunner = IdsCanCommandRunner;
			if (idsCanCommandRunner != null)
			{
				((ICommonDisposable)idsCanCommandRunner).TryDispose();
			}
			base.Dispose(disposing);
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceCapability>)(object)this).LastReceivedNetworkStatus;
		}
	}
	public class Leveler3CommandRunnerSim : LogicalDeviceCommandRunnerIdsCanSim<LogicalDeviceLevelerStatusType3>
	{
		private LogicalDeviceLevelerType3SimState _levelerState;

		public Leveler3CommandRunnerSim(LogicalDeviceLevelerType3SimState deviceState)
			: base(deviceState.Status)
		{
			_levelerState = deviceState;
		}

		public override Task<CommandResult> SendCommandAsync(byte commandByte, byte[] data, uint dataSize, int responseTimeMs, CancellationToken cancelToken, Func<ILogicalDevice, CommandControl> cmdControl = null, CommandSendOption options = (CommandSendOption)0)
		{
			if (dataSize != 3 || data.Length < 3)
			{
				return Task.FromResult<CommandResult>((CommandResult)7);
			}
			LogicalDeviceLevelerCommandType3 command = new LogicalDeviceLevelerCommandType3(commandByte, data, responseTimeMs);
			_levelerState.ProcessCommand(command);
			return Task.FromResult<CommandResult>((CommandResult)0);
		}
	}
	public class LogicalDeviceLevelerType3Sim : LogicalDeviceLevelerType3, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <<-ctor>b__7_0>d : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceLevelerType3Sim <>4__this;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_00b0: Expected O, but got Unknown
				//IL_007a: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0086: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				//IL_004a: Unknown result type (might be due to invalid IL or missing references)
				//IL_004f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0063: Unknown result type (might be due to invalid IL or missing references)
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType3Sim logicalDeviceLevelerType3Sim = <>4__this;
				try
				{
					if (num != 0)
					{
						goto IL_009d;
					}
					TaskAwaiter<bool> val = <>u__1;
					<>u__1 = default(TaskAwaiter<bool>);
					num = (<>1__state = -1);
					goto IL_0095;
					IL_0095:
					val.GetResult();
					goto IL_009d;
					IL_009d:
					if (!logicalDeviceLevelerType3Sim._levelerSimTaskCancelSource.IsCancellationRequested)
					{
						((LogicalDevice<LogicalDeviceLevelerStatusType3, ILogicalDeviceCapability>)logicalDeviceLevelerType3Sim).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerType3Sim._levelerStatus).Data, 6u);
						logicalDeviceLevelerType3Sim.UpdateTextConsole((ITextConsole)(object)logicalDeviceLevelerType3Sim._levelerState);
						val = TaskExtension.TryDelay(250, logicalDeviceLevelerType3Sim._levelerSimTaskCancelSource.Token).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<-ctor>b__7_0>d>(ref val, ref this);
							return;
						}
						goto IL_0095;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private CancellationTokenSource _levelerSimTaskCancelSource = new CancellationTokenSource();

		private readonly LogicalDeviceLevelerStatusType3 _levelerStatus = new LogicalDeviceLevelerStatusType3();

		private LogicalDeviceLevelerType3SimState _levelerState;

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public override bool ActiveSession => IdsCanCommandRunner.CommandSessionActivated;

		[field: CompilerGenerated]
		public override ILogicalDevicePidFixedPoint VoltageMeasurementBatteryPid
		{
			[CompilerGenerated]
			get;
		} = (ILogicalDevicePidFixedPoint)new LogicalDevicePidSimFixedPoint((FixedPointType)1, PID.BATTERY_VOLTAGE, 10.5f);

		public LogicalDeviceLevelerType3Sim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService deviceService = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, deviceService, isFunctionClassChangeable)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_0022: Unknown result type (might be due to invalid IL or missing references)
			//IL_002c: Expected O, but got Unknown
			//IL_0069: Unknown result type (might be due to invalid IL or missing references)
			_levelerState = new LogicalDeviceLevelerType3SimState(_levelerStatus);
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)(object)new Leveler3CommandRunnerSim(_levelerState);
			Task.Run((Func<Task>)([AsyncStateMachine(/*Could not decode attribute arguments.*/)] [CompilerGenerated] () =>
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<-ctor>b__7_0>d <<-ctor>b__7_0>d = default(<<-ctor>b__7_0>d);
				<<-ctor>b__7_0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<-ctor>b__7_0>d.<>4__this = this;
				<<-ctor>b__7_0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<-ctor>b__7_0>d.<>t__builder)).Start<<<-ctor>b__7_0>d>(ref <<-ctor>b__7_0>d);
				return ((AsyncTaskMethodBuilder)(ref <<-ctor>b__7_0>d.<>t__builder)).Task;
			}), _levelerSimTaskCancelSource.Token);
		}

		public override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
			CancellationTokenSource levelerSimTaskCancelSource = _levelerSimTaskCancelSource;
			if (levelerSimTaskCancelSource != null)
			{
				CancellationTokenSourceExtension.TryCancelAndDispose(levelerSimTaskCancelSource);
			}
			_levelerSimTaskCancelSource = null;
		}
	}
	[Flags]
	public enum LogicalDeviceLevelerButtonAirbagTimeSelectType4 : Enum
	{
		None = 0u,
		Short = 1u,
		Long = 2u
	}
	[Flags]
	public enum LogicalDeviceLevelerButtonAirSuspensionType4 : Enum
	{
		None = 0u,
		Fill = 1u,
		Drain = 2u
	}
	[Flags]
	public enum LogicalDeviceLevelerButtonHomeType4 : Enum
	{
		None = 0u,
		AutoLevel = 1u,
		AutoHitch = 2u,
		AutoRetractAllJacks = 4u,
		AutoRetractFrontJacks = 8u,
		AutoRetractRearJacks = 0x10u,
		ManualMode = 0x20u,
		ManualAirSuspension = 0x40u,
		ZeroMode = 0x80u,
		AutoHomeJacks = 0x100u,
		RfConfig = 0x200u
	}
	[Flags]
	public enum LogicalDeviceLevelerButtonJackMovementFaultManualType4 : Enum
	{
		None = 0u,
		JackRightFrontExtend = 1u,
		JackRightFrontRetract = 2u,
		JackLeftFrontExtend = 4u,
		JackLeftFrontRetract = 8u,
		JackRightRearExtend = 0x10u,
		JackRightRearRetract = 0x20u,
		JackLeftRearExtend = 0x40u,
		JackLeftRearRetract = 0x80u,
		JackTongueExtend = 0x100u,
		JackTongueRetract = 0x200u,
		JackRightMiddleExtend = 0x400u,
		JackRightMiddleRetract = 0x800u,
		JackLeftMiddleExtend = 0x1000u,
		JackLeftMiddleRetract = 0x2000u,
		AutoRetract = 0x4000u
	}
	public static class LogicalDeviceLevelerButtonJackMovementFaultType4Extension : Object
	{
		internal static LogicalDeviceLevelerJackMovementType4 ToJackMovement(this LogicalDeviceLevelerButtonJackMovementFaultManualType4 button)
		{
			return (LogicalDeviceLevelerJackMovementType4)((uint)button & 0xFFFFBFFFu);
		}
	}
	[Flags]
	public enum LogicalDeviceLevelerButtonJackMovementManualType4 : Enum
	{
		None = 0u,
		JackRightFrontExtend = 1u,
		JackRightFrontRetract = 2u,
		JackLeftFrontExtend = 4u,
		JackLeftFrontRetract = 8u,
		JackRightRearExtend = 0x10u,
		JackRightRearRetract = 0x20u,
		JackLeftRearExtend = 0x40u,
		JackLeftRearRetract = 0x80u,
		JackTongueExtend = 0x100u,
		JackTongueRetract = 0x200u
	}
	public static class LogicalDeviceLevelerButtonJackMovementManualType4Extension : Object
	{
		internal static LogicalDeviceLevelerJackMovementType4 ToJackMovement(this LogicalDeviceLevelerButtonJackMovementManualType4 button)
		{
			return (LogicalDeviceLevelerJackMovementType4)button;
		}
	}
	[Flags]
	public enum LogicalDeviceLevelerButtonJackMovementZeroType4 : Enum
	{
		None = 0u,
		JackRightFrontExtend = 1u,
		JackRightFrontRetract = 2u,
		JackLeftFrontExtend = 4u,
		JackLeftFrontRetract = 8u,
		JackRightRearExtend = 0x10u,
		JackRightRearRetract = 0x20u,
		JackLeftRearExtend = 0x40u,
		JackLeftRearRetract = 0x80u,
		JackTongueExtend = 0x100u,
		JackTongueRetract = 0x200u,
		SetZeroPoint = 0x400u
	}
	public static class LogicalDeviceLevelerButtonJackMovementZeroType4Extension : Object
	{
		internal static LogicalDeviceLevelerJackMovementType4 ToJackMovement(this LogicalDeviceLevelerButtonJackMovementZeroType4 button)
		{
			return (LogicalDeviceLevelerJackMovementType4)((uint)button & 0xFFFFFBFFu);
		}
	}
	[Flags]
	public enum LogicalDeviceLevelerButtonNoneType4 : Enum
	{
		None = 0u
	}
	[Flags]
	public enum LogicalDeviceLevelerButtonOkType4 : Enum
	{
		None = 0u,
		Ok = 1u
	}
	[Flags]
	public enum LogicalDeviceLevelerButtonYesNoType4 : Enum
	{
		None = 0u,
		Yes = 1u,
		No = 2u
	}
	public class LogicalDeviceLevelerCommandAbortType4 : LogicalDeviceLevelerCommandType4
	{
		private const string LogTag = "LogicalDeviceLevelerCommandAbortType4";

		public LogicalDeviceLevelerCommandAbortType4(int commandResponseTimeMs = 200)
			: base(LevelerCommandCode.Abort, commandResponseTimeMs)
		{
		}
	}
	public class LogicalDeviceLevelerCommandBackType4 : LogicalDeviceLevelerCommandType4
	{
		private const string LogTag = "LogicalDeviceLevelerCommandBackType4";

		public LogicalDeviceLevelerScreenType4 ScreenSelected => base.ScreenSelectedImpl;

		public LogicalDeviceLevelerCommandBackType4(LogicalDeviceLevelerScreenType4 screenSelected, int commandResponseTimeMs = 200)
			: base(LevelerCommandCode.Back, screenSelected, commandResponseTimeMs)
		{
		}

		public override string ToString()
		{
			return String.Format("{0} screen: {1}", (object)base.ToString(), (object)ScreenSelected);
		}
	}
	public class LogicalDeviceLevelerCommandButtonAirSuspensionControlManualType4 : LogicalDeviceLevelerCommandButtonPressedType4<LogicalDeviceLevelerButtonAirSuspensionType4>
	{
		[field: CompilerGenerated]
		protected List<LogicalDeviceLevelerScreenType4> ValidScreens
		{
			[CompilerGenerated]
			get;
		}

		protected override bool IsScreenSupported(LogicalDeviceLevelerScreenType4 screenSelected)
		{
			return ValidScreens.Contains(screenSelected);
		}

		public LogicalDeviceLevelerCommandButtonAirSuspensionControlManualType4(LogicalDeviceLevelerButtonAirSuspensionType4 buttonsPressed, int commandResponseTimeMs = 200)
		{
			List<LogicalDeviceLevelerScreenType4> obj = new List<LogicalDeviceLevelerScreenType4>();
			obj.Add(LogicalDeviceLevelerScreenType4.AirSuspensionControlManual);
			ValidScreens = obj;
			base..ctor(LogicalDeviceLevelerScreenType4.AirSuspensionControlManual, buttonsPressed, commandResponseTimeMs);
		}
	}
	public class LogicalDeviceLevelerCommandButtonPressedAutoOperationType4 : LogicalDeviceLevelerCommandButtonPressedType4<LogicalDeviceLevelerButtonNoneType4>
	{
		[field: CompilerGenerated]
		protected List<LogicalDeviceLevelerScreenType4> ValidScreens
		{
			[CompilerGenerated]
			get;
		}

		protected override bool IsScreenSupported(LogicalDeviceLevelerScreenType4 screenSelected)
		{
			return ValidScreens.Contains(screenSelected);
		}

		public LogicalDeviceLevelerCommandButtonPressedAutoOperationType4(LogicalDeviceLevelerOperationAutoType4 operationAuto, int commandResponseTimeMs = 200)
			: base(operationAuto.ToScreen(), LogicalDeviceLevelerButtonNoneType4.None, commandResponseTimeMs)
		{
			List<LogicalDeviceLevelerScreenType4> obj = new List<LogicalDeviceLevelerScreenType4>();
			obj.Add(operationAuto.ToScreen());
			ValidScreens = obj;
		}
	}
	public class LogicalDeviceLevelerCommandButtonPressedFaultType4 : LogicalDeviceLevelerCommandButtonPressedType4<LogicalDeviceLevelerButtonOkType4>
	{
		[field: CompilerGenerated]
		protected List<LogicalDeviceLevelerScreenType4> ValidScreens
		{
			[CompilerGenerated]
			get;
		}

		protected override bool IsScreenSupported(LogicalDeviceLevelerScreenType4 screenSelected)
		{
			return ValidScreens.Contains(screenSelected);
		}

		public LogicalDeviceLevelerCommandButtonPressedFaultType4(LogicalDeviceLevelerButtonOkType4 buttonsPressed, int commandResponseTimeMs = 200)
		{
			List<LogicalDeviceLevelerScreenType4> obj = new List<LogicalDeviceLevelerScreenType4>();
			obj.Add(LogicalDeviceLevelerScreenType4.PromptFault);
			ValidScreens = obj;
			base..ctor(LogicalDeviceLevelerScreenType4.PromptFault, buttonsPressed, commandResponseTimeMs);
		}
	}
	public class LogicalDeviceLevelerCommandButtonPressedHomeType4 : LogicalDeviceLevelerCommandButtonPressedType4<LogicalDeviceLevelerButtonHomeType4>
	{
		[field: CompilerGenerated]
		protected List<LogicalDeviceLevelerScreenType4> ValidScreens
		{
			[CompilerGenerated]
			get;
		}

		protected override bool IsScreenSupported(LogicalDeviceLevelerScreenType4 screenSelected)
		{
			return ValidScreens.Contains(screenSelected);
		}

		public LogicalDeviceLevelerCommandButtonPressedHomeType4(LogicalDeviceLevelerButtonHomeType4 buttonsPressed, int commandResponseTimeMs = 200)
		{
			List<LogicalDeviceLevelerScreenType4> obj = new List<LogicalDeviceLevelerScreenType4>();
			obj.Add(LogicalDeviceLevelerScreenType4.Home);
			ValidScreens = obj;
			base..ctor(LogicalDeviceLevelerScreenType4.Home, buttonsPressed, commandResponseTimeMs);
		}
	}
	public class LogicalDeviceLevelerCommandButtonPressedJackMovementFaultManualType4 : LogicalDeviceLevelerCommandButtonPressedType4<LogicalDeviceLevelerButtonJackMovementFaultManualType4>
	{
		[field: CompilerGenerated]
		protected List<LogicalDeviceLevelerScreenType4> ValidScreens
		{
			[CompilerGenerated]
			get;
		}

		public bool IsAutoRetractSet => (base.ButtonsPressed & LogicalDeviceLevelerButtonJackMovementFaultManualType4.AutoRetract) != 0;

		protected static LogicalDeviceLevelerScreenType4 MakeScreenType(bool withConsole)
		{
			if (!withConsole)
			{
				return LogicalDeviceLevelerScreenType4.JackMovementFaultManual;
			}
			return LogicalDeviceLevelerScreenType4.JackMovementFaultManualConsole;
		}

		protected override bool IsScreenSupported(LogicalDeviceLevelerScreenType4 screenSelected)
		{
			return ValidScreens.Contains(screenSelected);
		}

		public LogicalDeviceLevelerCommandButtonPressedJackMovementFaultManualType4(LogicalDeviceLevelerButtonJackMovementFaultManualType4 buttonsPressed, bool withConsole, int commandResponseTimeMs = 200)
		{
			List<LogicalDeviceLevelerScreenType4> obj = new List<LogicalDeviceLevelerScreenType4>();
			obj.Add(LogicalDeviceLevelerScreenType4.JackMovementFaultManual);
			obj.Add(LogicalDeviceLevelerScreenType4.JackMovementFaultManualConsole);
			ValidScreens = obj;
			base..ctor(MakeScreenType(withConsole), buttonsPressed, commandResponseTimeMs);
		}

		public LogicalDeviceLevelerCommandButtonPressedJackMovementFaultManualType4(LevelerJackDirection direction, LevelerJackLocation location, bool setAutoRetract, bool withConsole, int commandResponseTimeMs = 200)
			: this(LogicalDeviceLevelerJackMovementExtensionType4.MakeJackMovement(direction, location), setAutoRetract, withConsole, commandResponseTimeMs)
		{
		}

		public LogicalDeviceLevelerCommandButtonPressedJackMovementFaultManualType4(LevelJackControlCompositeIndividualType4 jackMovementComposite, bool setAutoRetract, bool withConsole, int commandResponseTimeMs = 200)
			: this(jackMovementComposite.ToJackMovement(), setAutoRetract, withConsole, commandResponseTimeMs)
		{
		}

		public LogicalDeviceLevelerCommandButtonPressedJackMovementFaultManualType4(LevelJackControlCompositeIndividualAll jackMovementComposite, bool setAutoRetract, bool withConsole, int commandResponseTimeMs = 200)
			: this(jackMovementComposite.ToJackMovement(), setAutoRetract, withConsole, commandResponseTimeMs)
		{
		}

		internal LogicalDeviceLevelerCommandButtonPressedJackMovementFaultManualType4(LogicalDeviceLevelerJackMovementType4 jackMovement, bool setAutoRetract, bool withConsole, int commandResponseTimeMs)
			: this(jackMovement.ToButtonJackMovementFaultManual(setAutoRetract), withConsole, commandResponseTimeMs)
		{
		}

		public LevelerJackDirection JackDirection(LevelerJackLocation jackLocation)
		{
			return base.ButtonsPressed.ToJackMovement().JackDirection(jackLocation);
		}
	}
	public class LogicalDeviceLevelerCommandButtonPressedJackMovementManualType4 : LogicalDeviceLevelerCommandButtonPressedType4<LogicalDeviceLevelerButtonJackMovementManualType4>
	{
		[field: CompilerGenerated]
		protected List<LogicalDeviceLevelerScreenType4> ValidScreens
		{
			[CompilerGenerated]
			get;
		}

		protected static LogicalDeviceLevelerScreenType4 MakeScreenType(bool withConsole)
		{
			if (!withConsole)
			{
				return LogicalDeviceLevelerScreenType4.JackMovementManual;
			}
			return LogicalDeviceLevelerScreenType4.JackMovementManualConsole;
		}

		protected override bool IsScreenSupported(LogicalDeviceLevelerScreenType4 screenSelected)
		{
			return ValidScreens.Contains(screenSelected);
		}

		public LogicalDeviceLevelerCommandButtonPressedJackMovementManualType4(LogicalDeviceLevelerButtonJackMovementManualType4 buttonsPressed, bool withConsole, int commandResponseTimeMs = 200)
		{
			List<LogicalDeviceLevelerScreenType4> obj = new List<LogicalDeviceLevelerScreenType4>();
			obj.Add(LogicalDeviceLevelerScreenType4.JackMovementManual);
			obj.Add(LogicalDeviceLevelerScreenType4.JackMovementManualConsole);
			ValidScreens = obj;
			base..ctor(MakeScreenType(withConsole), buttonsPressed, commandResponseTimeMs);
		}

		public LogicalDeviceLevelerCommandButtonPressedJackMovementManualType4(LevelerJackDirection direction, LevelerJackLocation location, bool withConsole, int commandResponseTimeMs = 200)
			: this(LogicalDeviceLevelerJackMovementExtensionType4.MakeJackMovement(direction, location), withConsole, commandResponseTimeMs)
		{
		}

		public LogicalDeviceLevelerCommandButtonPressedJackMovementManualType4(LevelJackControlCompositeIndividualType4 jackMovementComposite, bool withConsole, int commandResponseTimeMs = 200)
			: this(jackMovementComposite.ToJackMovement(), withConsole, commandResponseTimeMs)
		{
		}

		internal LogicalDeviceLevelerCommandButtonPressedJackMovementManualType4(LogicalDeviceLevelerJackMovementType4 jackMovement, bool withConsole, int commandResponseTimeMs)
			: this(jackMovement.ToButtonJackMovementManual(), withConsole, commandResponseTimeMs)
		{
		}

		public LevelerJackDirection JackDirection(LevelerJackLocation jackLocation)
		{
			return base.ButtonsPressed.ToJackMovement().JackDirection(jackLocation);
		}
	}
	public class LogicalDeviceLevelerCommandButtonPressedJackMovementZeroType4 : LogicalDeviceLevelerCommandButtonPressedType4<LogicalDeviceLevelerButtonJackMovementZeroType4>
	{
		[field: CompilerGenerated]
		protected List<LogicalDeviceLevelerScreenType4> ValidScreens
		{
			[CompilerGenerated]
			get;
		}

		public bool IsZeroPointSet => (base.ButtonsPressed & LogicalDeviceLevelerButtonJackMovementZeroType4.SetZeroPoint) != 0;

		protected override bool IsScreenSupported(LogicalDeviceLevelerScreenType4 screenSelected)
		{
			return ValidScreens.Contains(screenSelected);
		}

		public LogicalDeviceLevelerCommandButtonPressedJackMovementZeroType4(LogicalDeviceLevelerButtonJackMovementZeroType4 buttonsPressed, int commandResponseTimeMs = 200)
		{
			List<LogicalDeviceLevelerScreenType4> obj = new List<LogicalDeviceLevelerScreenType4>();
			obj.Add(LogicalDeviceLevelerScreenType4.JackMovementZero);
			ValidScreens = obj;
			base..ctor(LogicalDeviceLevelerScreenType4.JackMovementZero, buttonsPressed, commandResponseTimeMs);
		}

		public LogicalDeviceLevelerCommandButtonPressedJackMovementZeroType4(LevelerJackDirection direction, LevelerJackLocation location, bool setZeroPoint, int commandResponseTimeMs = 200)
			: this(LogicalDeviceLevelerJackMovementExtensionType4.MakeJackMovement(direction, location), setZeroPoint, commandResponseTimeMs)
		{
		}

		public LogicalDeviceLevelerCommandButtonPressedJackMovementZeroType4(LevelJackControlCompositeIndividualType4 jackMovementComposite, bool setZeroPoint, int commandResponseTimeMs = 200)
			: this(jackMovementComposite.ToJackMovement(), setZeroPoint, commandResponseTimeMs)
		{
		}

		internal LogicalDeviceLevelerCommandButtonPressedJackMovementZeroType4(LogicalDeviceLevelerJackMovementType4 jackMovement, bool setZeroPoint, int commandResponseTimeMs)
			: this(jackMovement.ToButtonJackMovementZero(setZeroPoint), commandResponseTimeMs)
		{
		}

		public LevelerJackDirection JackDirection(LevelerJackLocation jackLocation)
		{
			return base.ButtonsPressed.ToJackMovement().JackDirection(jackLocation);
		}
	}
	public class LogicalDeviceLevelerCommandButtonPressedPromptAirbagTimeSelectType4 : LogicalDeviceLevelerCommandButtonPressedType4<LogicalDeviceLevelerButtonAirbagTimeSelectType4>
	{
		[field: CompilerGenerated]
		protected List<LogicalDeviceLevelerScreenType4> ValidScreens
		{
			[CompilerGenerated]
			get;
		}

		protected override bool IsScreenSupported(LogicalDeviceLevelerScreenType4 screenSelected)
		{
			return ValidScreens.Contains(screenSelected);
		}

		public LogicalDeviceLevelerCommandButtonPressedPromptAirbagTimeSelectType4(LogicalDeviceLevelerButtonAirbagTimeSelectType4 buttonsPressed, int commandResponseTimeMs = 200)
		{
			List<LogicalDeviceLevelerScreenType4> obj = new List<LogicalDeviceLevelerScreenType4>();
			obj.Add(LogicalDeviceLevelerScreenType4.PromptAirbagTimeSelect);
			ValidScreens = obj;
			base..ctor(LogicalDeviceLevelerScreenType4.PromptAirbagTimeSelect, buttonsPressed, commandResponseTimeMs);
		}
	}
	public class LogicalDeviceLevelerCommandButtonPressedPromptInfoType4 : LogicalDeviceLevelerCommandButtonPressedType4<LogicalDeviceLevelerButtonOkType4>
	{
		[field: CompilerGenerated]
		protected List<LogicalDeviceLevelerScreenType4> ValidScreens
		{
			[CompilerGenerated]
			get;
		}

		protected override bool IsScreenSupported(LogicalDeviceLevelerScreenType4 screenSelected)
		{
			return ValidScreens.Contains(screenSelected);
		}

		public LogicalDeviceLevelerCommandButtonPressedPromptInfoType4(LogicalDeviceLevelerButtonOkType4 buttonsPressed, int commandResponseTimeMs = 200)
		{
			List<LogicalDeviceLevelerScreenType4> obj = new List<LogicalDeviceLevelerScreenType4>();
			obj.Add(LogicalDeviceLevelerScreenType4.PromptInfo);
			ValidScreens = obj;
			base..ctor(LogicalDeviceLevelerScreenType4.PromptInfo, buttonsPressed, commandResponseTimeMs);
		}
	}
	public class LogicalDeviceLevelerCommandButtonPressedPromptYesNoType4 : LogicalDeviceLevelerCommandButtonPressedType4<LogicalDeviceLevelerButtonYesNoType4>
	{
		[field: CompilerGenerated]
		protected List<LogicalDeviceLevelerScreenType4> ValidScreens
		{
			[CompilerGenerated]
			get;
		}

		protected override bool IsScreenSupported(LogicalDeviceLevelerScreenType4 screenSelected)
		{
			return ValidScreens.Contains(screenSelected);
		}

		public LogicalDeviceLevelerCommandButtonPressedPromptYesNoType4(LogicalDeviceLevelerButtonYesNoType4 buttonsPressed, int commandResponseTimeMs = 200)
		{
			List<LogicalDeviceLevelerScreenType4> obj = new List<LogicalDeviceLevelerScreenType4>();
			obj.Add(LogicalDeviceLevelerScreenType4.PromptYesNo);
			ValidScreens = obj;
			base..ctor(LogicalDeviceLevelerScreenType4.PromptYesNo, buttonsPressed, commandResponseTimeMs);
		}
	}
	public interface ILogicalDeviceLevelerCommandWithScreenSelectionType4 : ILogicalDeviceLevelerCommandType4, IDeviceCommandPacket, IDeviceDataPacket, IEquatable<LogicalDeviceCommandPacket>
	{
		LogicalDeviceLevelerScreenType4 ScreenSelected { get; }

		IReadOnlyList<byte> RawButtonData { get; }
	}
	public interface ILogicalDeviceLevelerCommandButtonPressedType4 : ILogicalDeviceLevelerCommandWithScreenSelectionType4, ILogicalDeviceLevelerCommandType4, IDeviceCommandPacket, IDeviceDataPacket, IEquatable<LogicalDeviceCommandPacket>
	{
	}
	public class LogicalDeviceLevelerCommandButtonPressedType4<TButtonPressed> : LogicalDeviceLevelerCommandType4, ILogicalDeviceLevelerCommandButtonPressedType4, ILogicalDeviceLevelerCommandWithScreenSelectionType4, ILogicalDeviceLevelerCommandType4, IDeviceCommandPacket, IDeviceDataPacket, IEquatable<LogicalDeviceCommandPacket> where TButtonPressed : struct, IConvertible, ValueType
	{
		private const string LogTag = "LogicalDeviceLevelerCommandButtonPressedType4";

		public const int ButtonDataSize = 3;

		public const int ButtonCommandPacketSize = 4;

		public const int UiModeIndex = 0;

		public const int ButtonsPressedStartIndex = 1;

		public IReadOnlyList<byte> RawButtonData => (IReadOnlyList<byte>)(object)new ArraySegment<byte>(((LogicalDeviceCommandPacket)this).Data, 1, 3);

		public LogicalDeviceLevelerScreenType4 ScreenSelected => base.ScreenSelectedImpl;

		public TButtonPressed ButtonsPressed
		{
			get
			{
				if (!((LogicalDeviceCommandPacket)this).HasData || ((LogicalDeviceCommandPacket)this).Size < 4)
				{
					return default(TButtonPressed);
				}
				if (!IsScreenSupported(ScreenSelected))
				{
					TaggedLog.Error("LogicalDeviceLevelerCommandButtonPressedType4", String.Format("Command is invalid because screen of {0} is invalid for this command", (object)ScreenSelected), Array.Empty<object>());
					return default(TButtonPressed);
				}
				TButtonPressed result = default(TButtonPressed);
				if (!Enum<TButtonPressed>.TryConvert((object)((LogicalDeviceCommandPacket)this).MsbUInt24(1u), ref result))
				{
					TaggedLog.Error("LogicalDeviceLevelerCommandButtonPressedType4", String.Format("ButtonsPressed for command is invalid, unable to convert UInt32 to {0}", (object)typeof(TButtonPressed)), Array.Empty<object>());
					return default(TButtonPressed);
				}
				return result;
			}
		}

		public LogicalDeviceLevelerCommandButtonPressedType4(LogicalDeviceLevelerScreenType4 screenSelected, TButtonPressed buttonsPressed, int commandResponseTimeMs = 200)
			: base(LevelerCommandCode.ButtonPress, MakeDataForButtonCommand(screenSelected, buttonsPressed), commandResponseTimeMs)
		{
		}

		private static byte[] MakeDataForButtonCommand(LogicalDeviceLevelerScreenType4 screenSelected, TButtonPressed buttonsPressed)
		{
			uint num = Convert.ToUInt32((object)buttonsPressed);
			return (byte[])(object)new Byte[4]
			{
				(byte)screenSelected,
				(byte)((num & 0xFF0000) >> 16),
				(byte)((num & 0xFF00) >> 8),
				(byte)(num & 0xFF)
			};
		}

		protected virtual bool IsScreenSupported(LogicalDeviceLevelerScreenType4 screenSelected)
		{
			return true;
		}

		public override string ToString()
		{
			return String.Format("{0} screen: {1} buttons:{2}", (object)base.ToString(), (object)ScreenSelected, (object)EnumExtensions.DebugDumpAsFlags<TButtonPressed>(ButtonsPressed));
		}
	}
	public class LogicalDeviceLevelerCommandHomeType4 : LogicalDeviceLevelerCommandType4
	{
		private const string LogTag = "LogicalDeviceLevelerCommandHomeType4";

		public LogicalDeviceLevelerCommandHomeType4(int commandResponseTimeMs = 200)
			: base(LevelerCommandCode.Home, commandResponseTimeMs)
		{
		}
	}
	public interface ILogicalDeviceLevelerCommandType4 : IDeviceCommandPacket, IDeviceDataPacket, IEquatable<LogicalDeviceCommandPacket>
	{
		LogicalDeviceLevelerCommandType4.LevelerCommandCode Command { get; }
	}
	public class LogicalDeviceLevelerCommandType4 : LogicalDeviceCommandPacket, ILogicalDeviceLevelerCommandType4, IDeviceCommandPacket, IDeviceDataPacket, IEquatable<LogicalDeviceCommandPacket>
	{
		public enum LevelerCommandCode : Enum
		{
			ButtonPress = 0,
			Abort = 1,
			Back = 2,
			Home = 3,
			Unknown = 255
		}

		private const string LogTag = "LogicalDeviceLevelerCommandType4";

		public const int ScreenSelectedIndex = 0;

		public LevelerCommandCode Command => (LevelerCommandCode)((LogicalDeviceCommandPacket)this).CommandByte;

		protected LogicalDeviceLevelerScreenType4 ScreenSelectedImpl
		{
			get
			{
				if (((LogicalDeviceCommandPacket)this).Data.Length == 0)
				{
					return LogicalDeviceLevelerScreenType4.Unknown;
				}
				LogicalDeviceLevelerScreenType4 logicalDeviceLevelerScreenType = (LogicalDeviceLevelerScreenType4)((LogicalDeviceCommandPacket)this).Data[0];
				if (!Enum.IsDefined(typeof(LogicalDeviceLevelerScreenType4), (object)logicalDeviceLevelerScreenType))
				{
					TaggedLog.Error("LogicalDeviceLevelerCommandType4", String.Format("Unexpected/Unknown Selected Screen Type {0}", (object)logicalDeviceLevelerScreenType), Array.Empty<object>());
					return LogicalDeviceLevelerScreenType4.Unknown;
				}
				return logicalDeviceLevelerScreenType;
			}
		}

		protected LogicalDeviceLevelerCommandType4(LevelerCommandCode command, int commandResponseTimeMs)
			: base((byte)command, commandResponseTimeMs)
		{
		}

		protected LogicalDeviceLevelerCommandType4(LevelerCommandCode command, LogicalDeviceLevelerScreenType4 screenSelected, int commandResponseTimeMs)
			: this(command, (byte[])(object)new Byte[1] { (byte)screenSelected }, commandResponseTimeMs)
		{
		}

		protected LogicalDeviceLevelerCommandType4(LevelerCommandCode command, byte[] data, int commandResponseTimeMs)
			: base((byte)command, data, commandResponseTimeMs)
		{
		}

		internal LogicalDeviceLevelerCommandType4(byte commandByte, byte[] data, int commandResponseTimeMs)
			: base(commandByte, data, commandResponseTimeMs)
		{
		}

		public static LogicalDeviceLevelerCommandType4 MakeWakeupCommand(LogicalDeviceLevelerScreenType4 screenSelected, int commandResponseTimeMs = 200)
		{
			return new LogicalDeviceLevelerCommandButtonPressedType4<LogicalDeviceLevelerButtonNoneType4>(screenSelected, LogicalDeviceLevelerButtonNoneType4.None, commandResponseTimeMs);
		}

		public static LogicalDeviceLevelerCommandType4 MakeAbortCommand(int commandResponseTimeMs = 200)
		{
			return new LogicalDeviceLevelerCommandAbortType4(commandResponseTimeMs);
		}

		public static LogicalDeviceLevelerCommandType4 MakeBackCommand(LogicalDeviceLevelerScreenType4 screenSelected, int commandResponseTimeMs = 200)
		{
			return new LogicalDeviceLevelerCommandBackType4(screenSelected, commandResponseTimeMs);
		}

		public static LogicalDeviceLevelerCommandType4 MakeAbortToHomeCommand(int commandResponseTimeMs = 200)
		{
			return new LogicalDeviceLevelerCommandHomeType4(commandResponseTimeMs);
		}

		public override string ToString()
		{
			return String.Concat(((MemberInfo)((Object)this).GetType()).Name, ": ", ArrayExtension.DebugDump(((LogicalDeviceCommandPacket)this).Data, " ", false));
		}
	}
	public interface ILogicalDeviceLevelerType4 : ILogicalDeviceLeveler, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IDevicesActivation, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceWithStatus<LogicalDeviceLevelerStatusType4>, ILogicalDeviceWithStatus, ILogicalDeviceWithCapability<LogicalDeviceLevelerCapabilityType4>, ITextConsole
	{
		void UpdateDeviceConsoleText(List<string> text);

		ILogicalDeviceLightDimmable? GetAssociatedDimmableLight();

		Task<CommandResult> SendCommand(ILogicalDeviceLevelerCommandType4 command, CancellationToken callerCancelToken, bool ignoreScreenValidation = false);

		Task UpdateAutoStepsCollectionWithLatestDetails(int expectedStepsCount, BaseObservableCollection<ValueTuple<LogicalDeviceLevelerAutoStepType4, int>> collection, CancellationToken cancelToken);

		Task<ValueTuple<LogicalDeviceLevelerScreenType4, int, int>> GetAutoStepsProgressAsync(CancellationToken cancelToken);

		Task<List<LogicalDeviceLevelerAutoStepType4>> GetAutoStepListDetailsAsync(int expectedStepsCount, CancellationToken cancelToken);
	}
	public interface ILogicalDeviceDirectLevelerType4 : ILogicalDeviceLevelerType4, ILogicalDeviceLeveler, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IDevicesActivation, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceWithStatus<LogicalDeviceLevelerStatusType4>, ILogicalDeviceWithStatus, ILogicalDeviceWithCapability<LogicalDeviceLevelerCapabilityType4>, ITextConsole, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public interface IDirectCommandLeveler4 : ILogicalDeviceSourceDirect, ILogicalDeviceSource
	{
		Task<CommandResult> SendDirectCommandLeveler4(ILogicalDeviceLevelerType4 logicalDevice, ILogicalDeviceLevelerCommandType4 command, CancellationToken cancelToken);
	}
	public readonly struct LevelJackControlCompositeIndividualType4 : ValueType
	{
		[field: CompilerGenerated]
		public LevelerJackDirection FrontLeftDirection
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LevelerJackDirection FrontRightDirection
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LevelerJackDirection RearLeftDirection
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LevelerJackDirection RearRightDirection
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LevelerJackDirection TongueDirection
		{
			[CompilerGenerated]
			get;
		}

		public LevelJackControlCompositeIndividualType4(LevelerJackDirection frontLeftDirection, LevelerJackDirection frontRightDirection, LevelerJackDirection rearLeftDirection, LevelerJackDirection rearRightDirection, LevelerJackDirection tongueDirection)
		{
			FrontLeftDirection = frontLeftDirection;
			FrontRightDirection = frontRightDirection;
			RearLeftDirection = rearLeftDirection;
			RearRightDirection = rearRightDirection;
			TongueDirection = tongueDirection;
		}

		internal LogicalDeviceLevelerJackMovementType4 ToJackMovement()
		{
			return LogicalDeviceLevelerJackMovementType4.None | LogicalDeviceLevelerJackMovementExtensionType4.MakeJackMovement(FrontLeftDirection, (FrontLeftDirection != LevelerJackDirection.None) ? LevelerJackLocation.FrontLeft : LevelerJackLocation.None) | LogicalDeviceLevelerJackMovementExtensionType4.MakeJackMovement(FrontRightDirection, (FrontRightDirection != LevelerJackDirection.None) ? LevelerJackLocation.FrontRight : LevelerJackLocation.None) | LogicalDeviceLevelerJackMovementExtensionType4.MakeJackMovement(RearLeftDirection, (RearLeftDirection != LevelerJackDirection.None) ? LevelerJackLocation.RearLeft : LevelerJackLocation.None) | LogicalDeviceLevelerJackMovementExtensionType4.MakeJackMovement(RearRightDirection, (RearRightDirection != LevelerJackDirection.None) ? LevelerJackLocation.RearRight : LevelerJackLocation.None) | LogicalDeviceLevelerJackMovementExtensionType4.MakeJackMovement(TongueDirection, (TongueDirection != LevelerJackDirection.None) ? LevelerJackLocation.Tongue : LevelerJackLocation.None);
		}
	}
	public readonly struct LevelJackControlCompositeIndividualAll : ValueType
	{
		private readonly LevelJackControlCompositeIndividualType4 _compositeIndividualType4;

		public LevelJackControlCompositeIndividualType4 CompositeIndividualType4 => _compositeIndividualType4;

		public LevelerJackDirection FrontLeftDirection => _compositeIndividualType4.FrontLeftDirection;

		public LevelerJackDirection FrontRightDirection => _compositeIndividualType4.FrontRightDirection;

		[field: CompilerGenerated]
		public LevelerJackDirection MiddleLeftDirection
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LevelerJackDirection MiddleRightDirection
		{
			[CompilerGenerated]
			get;
		}

		public LevelerJackDirection RearLeftDirection => _compositeIndividualType4.RearLeftDirection;

		public LevelerJackDirection RearRightDirection => _compositeIndividualType4.RearRightDirection;

		public LevelerJackDirection TongueDirection => _compositeIndividualType4.TongueDirection;

		public LevelJackControlCompositeIndividualAll(LevelerJackDirection frontLeftDirection, LevelerJackDirection frontRightDirection, LevelerJackDirection middleLeftDirection, LevelerJackDirection middleRightDirection, LevelerJackDirection rearLeftDirection, LevelerJackDirection rearRightDirection, LevelerJackDirection tongueDirection)
		{
			_compositeIndividualType4 = new LevelJackControlCompositeIndividualType4(frontLeftDirection, frontRightDirection, rearLeftDirection, rearRightDirection, tongueDirection);
			MiddleLeftDirection = LevelerJackDirection.None;
			MiddleRightDirection = LevelerJackDirection.None;
		}

		internal LogicalDeviceLevelerJackMovementType4 ToJackMovement()
		{
			return _compositeIndividualType4.ToJackMovement() | LogicalDeviceLevelerJackMovementExtensionType4.MakeJackMovement(MiddleLeftDirection, (MiddleLeftDirection != LevelerJackDirection.None) ? LevelerJackLocation.MiddleLeft : LevelerJackLocation.None) | LogicalDeviceLevelerJackMovementExtensionType4.MakeJackMovement(MiddleRightDirection, (MiddleRightDirection != LevelerJackDirection.None) ? LevelerJackLocation.MiddleRight : LevelerJackLocation.None);
		}
	}
	public enum LogicalDeviceLevelerAutoStepType4 : Enum
	{
		[Description("")]
		None,
		[Description("Level")]
		Level,
		[Description("Level Front")]
		LevelFront,
		[Description("Level Rear")]
		LevelRear,
		[Description("Retract Jacks")]
		RetractJacks,
		[Description("Retract Front")]
		RetractFront,
		[Description("Retract Rear")]
		RetractRear,
		[Description("Retract Middle")]
		RetractMiddle,
		[Description("Retract Tongue")]
		RetractTongue,
		[Description("Ground Jacks")]
		GroundJacks,
		[Description("Ground Front")]
		GroundFront,
		[Description("Ground Rear")]
		GroundRear,
		[Description("Ground Tongue")]
		GroundTongue,
		[Description("Extend Jacks")]
		ExtendJacks,
		[Description("Extend Front")]
		ExtendFront,
		[Description("Extend Rear")]
		ExtendRear,
		[Description("Extend Tongue")]
		ExtendTongue,
		[Description("Verify Ground")]
		VerifyGround,
		[Description("Find Hitch")]
		FindHitch,
		[Description("Clear Tongue Jack")]
		ClearTongueJack,
		[Description("Stabilize")]
		Stabilize,
		[Description("Lift Front")]
		LeftFront,
		[Description("Lift Rear")]
		LiftRear,
		[Description("Lower Front")]
		LowerFront,
		[Description("Lower Rear")]
		LowerRear,
		[Description("Fill Airbags")]
		FillAirBags,
		[Description("Dump Airbags")]
		EmptyAirBags,
		[Description("Raise Axle")]
		RaiseAxle,
		[Description("Lower Axle")]
		LowerAxle,
		[Description("Stow Axle")]
		StowAxle
	}
	public static class LogicalDeviceLevelerAutoStepType4Extension : Object
	{
		public static string TryGetUserVisibleTextEnglish(this LogicalDeviceLevelerAutoStepType4 autoStep)
		{
			if (!Enum.IsDefined(typeof(LogicalDeviceLevelerAutoStepType4), (object)autoStep))
			{
				return null;
			}
			string result = default(string);
			if (!EnumExtensions.TryGetDescription((Enum)(object)autoStep, ref result))
			{
				return null;
			}
			return result;
		}
	}
	public class LogicalDeviceLevelerCapabilityType4 : LogicalDeviceCapability
	{
		private const byte JackPositionSupportedBitmask = 1;

		private static readonly BitPositionValue JackConfigurationBitPosition = new BitPositionValue(14u, 0, 1);

		private static readonly BitPositionValue ChassisConfigurationBitPosition = new BitPositionValue(48u, 0, 1);

		private const int JackSupportedStartingBitIndex = 0;

		private const int JackConfigurationStartingBitIndex = 1;

		private const int ChassisConfigurationStartingBitIndex = 4;

		public bool IsJackPositionSupported => (base.RawValue & 1) != 0;

		public LevelerConfigurationJack JackConfiguration
		{
			get
			{
				//IL_0000: Unknown result type (might be due to invalid IL or missing references)
				//IL_0005: Unknown result type (might be due to invalid IL or missing references)
				BitPositionValue jackConfigurationBitPosition = JackConfigurationBitPosition;
				return (LevelerConfigurationJack)((BitPositionValue)(ref jackConfigurationBitPosition)).DecodeValue((uint)base.RawValue);
			}
		}

		public LevelerConfigurationChassis Chassis
		{
			get
			{
				//IL_0000: Unknown result type (might be due to invalid IL or missing references)
				//IL_0005: Unknown result type (might be due to invalid IL or missing references)
				BitPositionValue chassisConfigurationBitPosition = ChassisConfigurationBitPosition;
				return (LevelerConfigurationChassis)((BitPositionValue)(ref chassisConfigurationBitPosition)).DecodeValue((uint)base.RawValue);
			}
		}

		private LogicalDeviceLevelerCapabilityType4(byte rawCapability)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(new Nullable<byte>(rawCapability));
		}

		public LogicalDeviceLevelerCapabilityType4(Nullable<byte> rawCapability)
			: this(rawCapability.GetValueOrDefault())
		{
		}

		public LogicalDeviceLevelerCapabilityType4(LevelerConfigurationChassis chassisType, LevelerConfigurationJack jackType, bool isJackPositionSupported)
			: this(MakeRawCapability(chassisType, jackType, isJackPositionSupported))
		{
		}

		private static byte MakeRawCapability(LevelerConfigurationChassis chassisType, LevelerConfigurationJack jackType, bool isJackPositionSupported)
		{
			return (byte)((isJackPositionSupported ? 1u : 0u) | ((uint)(jackType & (LevelerConfigurationJack)7) << 1) | ((uint)(chassisType & LevelerConfigurationChassis.TravelTrailer) << 4));
		}

		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsJackPositionSupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("JackConfiguration");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("Chassis");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}
	}
	internal static class LogicalDeviceLevelerJackMovementExtensionType4 : Object
	{
		private const string LogTag = "LogicalDeviceLevelerJackMovementExtensionType4";

		public const uint MiddleJackBitmask = 15360u;

		public static LogicalDeviceLevelerJackMovementType4 MakeJackMovement(LevelerJackDirection direction, LevelerJackLocation jackLocation)
		{
			switch (jackLocation)
			{
			case LevelerJackLocation.None:
				return LogicalDeviceLevelerJackMovementType4.None;
			case LevelerJackLocation.Tongue:
				return MakeJackMovement(LogicalDeviceLevelerJackMovementType4.JackTongueExtend, LogicalDeviceLevelerJackMovementType4.JackTongueRetract);
			case LevelerJackLocation.FrontRight:
				return MakeJackMovement(LogicalDeviceLevelerJackMovementType4.JackRightFrontExtend, LogicalDeviceLevelerJackMovementType4.JackRightFrontRetract);
			case LevelerJackLocation.FrontLeft:
				return MakeJackMovement(LogicalDeviceLevelerJackMovementType4.JackLeftFrontExtend, LogicalDeviceLevelerJackMovementType4.JackLeftFrontRetract);
			case LevelerJackLocation.RearRight:
				return MakeJackMovement(LogicalDeviceLevelerJackMovementType4.JackRightRearExtend, LogicalDeviceLevelerJackMovementType4.JackRightRearRetract);
			case LevelerJackLocation.RearLeft:
				return MakeJackMovement(LogicalDeviceLevelerJackMovementType4.JackLeftRearExtend, LogicalDeviceLevelerJackMovementType4.JackLeftRearRetract);
			case LevelerJackLocation.MiddleRight:
				return MakeJackMovement(LogicalDeviceLevelerJackMovementType4.JackRightMiddleExtend, LogicalDeviceLevelerJackMovementType4.JackRightMiddleRetract);
			case LevelerJackLocation.MiddleLeft:
				return MakeJackMovement(LogicalDeviceLevelerJackMovementType4.JackLeftMiddleExtend, LogicalDeviceLevelerJackMovementType4.JackLeftMiddleRetract);
			default:
				TaggedLog.Warning("LogicalDeviceLevelerJackMovementExtensionType4", String.Format("The Leveler 4 device doesn't support the supplied jack location {0} going {1} ", (object)jackLocation, (object)direction), Array.Empty<object>());
				return LogicalDeviceLevelerJackMovementType4.Unknown;
			}
			[CompilerGenerated]
			LogicalDeviceLevelerJackMovementType4 MakeJackMovement(LogicalDeviceLevelerJackMovementType4 extend, LogicalDeviceLevelerJackMovementType4 retract)
			{
				return direction switch
				{
					LevelerJackDirection.Extend => extend, 
					LevelerJackDirection.Retract => retract, 
					LevelerJackDirection.Both => extend | retract, 
					_ => LogicalDeviceLevelerJackMovementType4.None, 
				};
			}
		}

		public static LevelerJackDirection JackDirection(this LogicalDeviceLevelerJackMovementType4 jackMovement, LevelerJackLocation jackLocation)
		{
			if (((Enum)(object)jackMovement).HasFlag((Enum)(object)LogicalDeviceLevelerJackMovementType4.Unknown))
			{
				return LevelerJackDirection.None;
			}
			LogicalDeviceLevelerJackMovementType4 logicalDeviceLevelerJackMovementType = MakeJackMovement(LevelerJackDirection.Extend, jackLocation);
			LogicalDeviceLevelerJackMovementType4 logicalDeviceLevelerJackMovementType2 = MakeJackMovement(LevelerJackDirection.Retract, jackLocation);
			bool flag = (jackMovement & logicalDeviceLevelerJackMovementType) != LogicalDeviceLevelerJackMovementType4.None && !((Enum)(object)logicalDeviceLevelerJackMovementType).HasFlag((Enum)(object)LogicalDeviceLevelerJackMovementType4.Unknown);
			bool flag2 = (jackMovement & logicalDeviceLevelerJackMovementType2) != LogicalDeviceLevelerJackMovementType4.None && !((Enum)(object)logicalDeviceLevelerJackMovementType).HasFlag((Enum)(object)LogicalDeviceLevelerJackMovementType4.Unknown);
			if (flag && flag2)
			{
				return LevelerJackDirection.Both;
			}
			if (flag)
			{
				return LevelerJackDirection.Extend;
			}
			if (flag2)
			{
				return LevelerJackDirection.Retract;
			}
			return LevelerJackDirection.None;
		}

		internal static LogicalDeviceLevelerButtonJackMovementZeroType4 ToButtonJackMovementZero(this LogicalDeviceLevelerJackMovementType4 jackMovement, bool setZeroPoint)
		{
			if (((Enum)(object)jackMovement).HasFlag((Enum)(object)LogicalDeviceLevelerJackMovementType4.Unknown))
			{
				return LogicalDeviceLevelerButtonJackMovementZeroType4.None;
			}
			uint num = (uint)jackMovement;
			if ((num & 0x3C00) != 0)
			{
				TaggedLog.Warning("LogicalDeviceLevelerButtonJackMovementZeroType4", String.Concat("Ignoring unsupported middle jack movement bit(s), ", EnumExtensions.DebugDumpAsFlags<LogicalDeviceLevelerJackMovementType4>(num), ", that were supplied but aren't supported"), Array.Empty<object>());
				num &= 0xFFFFC3FFu;
			}
			LogicalDeviceLevelerButtonJackMovementZeroType4 logicalDeviceLevelerButtonJackMovementZeroType = (LogicalDeviceLevelerButtonJackMovementZeroType4)num;
			if (setZeroPoint)
			{
				logicalDeviceLevelerButtonJackMovementZeroType |= LogicalDeviceLevelerButtonJackMovementZeroType4.SetZeroPoint;
			}
			return logicalDeviceLevelerButtonJackMovementZeroType;
		}

		internal static LogicalDeviceLevelerButtonJackMovementManualType4 ToButtonJackMovementManual(this LogicalDeviceLevelerJackMovementType4 jackMovement)
		{
			if (((Enum)(object)jackMovement).HasFlag((Enum)(object)LogicalDeviceLevelerJackMovementType4.Unknown))
			{
				return LogicalDeviceLevelerButtonJackMovementManualType4.None;
			}
			uint num = (uint)jackMovement;
			if ((num & 0x3C00) != 0)
			{
				TaggedLog.Warning("LogicalDeviceLevelerButtonJackMovementManualType4", String.Concat("Ignoring unsupported middle jack movement bit(s), ", EnumExtensions.DebugDumpAsFlags<LogicalDeviceLevelerJackMovementType4>(num), ", that were supplied but aren't supported"), Array.Empty<object>());
				num &= 0xFFFFC3FFu;
			}
			return (LogicalDeviceLevelerButtonJackMovementManualType4)num;
		}

		internal static LogicalDeviceLevelerButtonJackMovementFaultManualType4 ToButtonJackMovementFaultManual(this LogicalDeviceLevelerJackMovementType4 jackMovement, bool setAutoRetract)
		{
			if (((Enum)(object)jackMovement).HasFlag((Enum)(object)LogicalDeviceLevelerJackMovementType4.Unknown))
			{
				return LogicalDeviceLevelerButtonJackMovementFaultManualType4.None;
			}
			LogicalDeviceLevelerButtonJackMovementFaultManualType4 logicalDeviceLevelerButtonJackMovementFaultManualType = (LogicalDeviceLevelerButtonJackMovementFaultManualType4)jackMovement;
			if (setAutoRetract)
			{
				logicalDeviceLevelerButtonJackMovementFaultManualType |= LogicalDeviceLevelerButtonJackMovementFaultManualType4.AutoRetract;
			}
			return logicalDeviceLevelerButtonJackMovementFaultManualType;
		}
	}
	[Flags]
	internal enum LogicalDeviceLevelerJackMovementType4 : Enum
	{
		None = 0u,
		JackRightFrontExtend = 1u,
		JackRightFrontRetract = 2u,
		JackLeftFrontExtend = 4u,
		JackLeftFrontRetract = 8u,
		JackRightRearExtend = 0x10u,
		JackRightRearRetract = 0x20u,
		JackLeftRearExtend = 0x40u,
		JackLeftRearRetract = 0x80u,
		JackTongueExtend = 0x100u,
		JackTongueRetract = 0x200u,
		JackRightMiddleExtend = 0x400u,
		JackRightMiddleRetract = 0x800u,
		JackLeftMiddleExtend = 0x1000u,
		JackLeftMiddleRetract = 0x2000u,
		Unknown = 0x80000000u
	}
	[DefaultValue(LogicalDeviceLevelerOperationAutoType4.Unknown)]
	public enum LogicalDeviceLevelerOperationAutoType4 : Enum
	{
		Unknown = -1,
		AutoLevel = 1,
		AutoHitch = 11,
		AutoRetractAllJacks = 12,
		AutoRetractFrontJacks = 13,
		AutoRetractRearJacks = 14,
		AutoHomeJacks = 15
	}
	[AttributeUsage(/*Could not decode attribute arguments.*/)]
	internal class LogicalDeviceLevelerOperationAutoType4Attribute : Attribute
	{
	}
	public static class LogicalDeviceLevelerOperationAutoType4Extension : Object
	{
		public static LogicalDeviceLevelerScreenType4 ToScreen(this LogicalDeviceLevelerOperationAutoType4 operationAuto)
		{
			LogicalDeviceLevelerScreenType4 logicalDeviceLevelerScreenType = Enum<LogicalDeviceLevelerScreenType4>.TryConvert((object)(Int32)operationAuto);
			if (logicalDeviceLevelerScreenType == LogicalDeviceLevelerScreenType4.Unknown)
			{
				return logicalDeviceLevelerScreenType;
			}
			if (EnumExtensions.GetAttribute<LogicalDeviceLevelerOperationAutoType4Attribute>((Enum)(object)logicalDeviceLevelerScreenType, true) == null)
			{
				return LogicalDeviceLevelerScreenType4.Unknown;
			}
			return logicalDeviceLevelerScreenType;
		}
	}
	[DefaultValue(LogicalDeviceLevelerOperationManualType4.Unknown)]
	public enum LogicalDeviceLevelerOperationManualType4 : Enum
	{
		Unknown = -1,
		JackMovementManual = 2,
		JackMovementManualConsole = 3,
		JackMovementZero = 4,
		JackMovementFaultManual = 8,
		JackMovementFaultManualConsole = 9
	}
	[AttributeUsage(/*Could not decode attribute arguments.*/)]
	internal class LogicalDeviceLevelerOperationManualType4Attribute : Attribute
	{
		[field: CompilerGenerated]
		public bool HasConsole
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public bool HasFault
		{
			[CompilerGenerated]
			get;
		}

		public LogicalDeviceLevelerOperationManualType4Attribute(bool hasConsole = false, bool hasFault = false)
		{
			HasConsole = hasConsole;
			HasFault = hasFault;
		}
	}
	public static class LogicalDeviceLevelerOperationManualType4Extension : Object
	{
		public static LogicalDeviceLevelerScreenType4 ToScreen(this LogicalDeviceLevelerOperationManualType4 operationManual)
		{
			LogicalDeviceLevelerScreenType4 logicalDeviceLevelerScreenType = Enum<LogicalDeviceLevelerScreenType4>.TryConvert((object)(Int32)operationManual);
			if (logicalDeviceLevelerScreenType == LogicalDeviceLevelerScreenType4.Unknown)
			{
				return logicalDeviceLevelerScreenType;
			}
			if (EnumExtensions.GetAttribute<LogicalDeviceLevelerOperationManualType4Attribute>((Enum)(object)logicalDeviceLevelerScreenType, true) == null)
			{
				return LogicalDeviceLevelerScreenType4.Unknown;
			}
			return logicalDeviceLevelerScreenType;
		}
	}
	[DefaultValue(LogicalDeviceLevelerScreenType4.Unknown)]
	public enum LogicalDeviceLevelerScreenType4 : Enum
	{
		Home = 0,
		[LogicalDeviceLevelerOperationAutoType4]
		AutoLevel = 1,
		[LogicalDeviceLevelerOperationManualType4(false, false)]
		JackMovementManual = 2,
		[LogicalDeviceLevelerOperationManualType4(true, false)]
		JackMovementManualConsole = 3,
		[LogicalDeviceLevelerOperationManualType4(false, false)]
		JackMovementZero = 4,
		PromptInfo = 5,
		PromptYesNo = 6,
		PromptFault = 7,
		[LogicalDeviceLevelerOperationManualType4(false, true)]
		JackMovementFaultManual = 8,
		[LogicalDeviceLevelerOperationManualType4(true, true)]
		JackMovementFaultManualConsole = 9,
		[LogicalDeviceLevelerOperationManualType4(true, false)]
		AirSuspensionControlManual = 10,
		[LogicalDeviceLevelerOperationAutoType4]
		AutoHitch = 11,
		[LogicalDeviceLevelerOperationAutoType4]
		AutoRetractAllJacks = 12,
		[LogicalDeviceLevelerOperationAutoType4]
		AutoRetractFrontJacks = 13,
		[LogicalDeviceLevelerOperationAutoType4]
		AutoRetractRearJacks = 14,
		[LogicalDeviceLevelerOperationAutoType4]
		AutoHomeJacks = 15,
		PromptAirbagTimeSelect = 16,
		Unknown = -1
	}
	public static class LogicalDeviceLevelerScreenType4Extension : Object
	{
		public static LogicalDeviceLevelerOperationAutoType4 ToOperationAuto(this LogicalDeviceLevelerScreenType4 screen)
		{
			if (EnumExtensions.GetAttribute<LogicalDeviceLevelerOperationAutoType4Attribute>((Enum)(object)screen, true) == null)
			{
				return LogicalDeviceLevelerOperationAutoType4.Unknown;
			}
			return Enum<LogicalDeviceLevelerOperationAutoType4>.TryConvert((object)(Int32)screen);
		}

		public static bool IsOperationAuto(this LogicalDeviceLevelerScreenType4 screen)
		{
			return screen.ToOperationAuto() != LogicalDeviceLevelerOperationAutoType4.Unknown;
		}

		public static LogicalDeviceLevelerOperationManualType4 ToOperationManual(this LogicalDeviceLevelerScreenType4 screen)
		{
			if (EnumExtensions.GetAttribute<LogicalDeviceLevelerOperationManualType4Attribute>((Enum)(object)screen, true) == null)
			{
				return LogicalDeviceLevelerOperationManualType4.Unknown;
			}
			return Enum<LogicalDeviceLevelerOperationManualType4>.TryConvert((object)(Int32)screen);
		}

		public static bool IsOperationManual(this LogicalDeviceLevelerScreenType4 screen)
		{
			return screen.ToOperationManual() != LogicalDeviceLevelerOperationManualType4.Unknown;
		}

		public static bool IsPrompt(this LogicalDeviceLevelerScreenType4 screen)
		{
			if (screen != LogicalDeviceLevelerScreenType4.PromptAirbagTimeSelect && screen != LogicalDeviceLevelerScreenType4.PromptFault && screen != LogicalDeviceLevelerScreenType4.PromptInfo)
			{
				return screen == LogicalDeviceLevelerScreenType4.PromptYesNo;
			}
			return true;
		}

		public static bool HasConsole(this LogicalDeviceLevelerScreenType4 screen)
		{
			return EnumExtensions.GetAttribute<LogicalDeviceLevelerOperationManualType4Attribute>((Enum)(object)screen, true)?.HasConsole ?? false;
		}

		public static bool HasFault(this LogicalDeviceLevelerScreenType4 screen)
		{
			return EnumExtensions.GetAttribute<LogicalDeviceLevelerOperationManualType4Attribute>((Enum)(object)screen, true)?.HasFault ?? false;
		}
	}
	public class LogicalDeviceLevelerStatusType4 : LogicalDeviceStatusPacketMutable, ILogicalDeviceStatus<LogicalDeviceLevelerType4StatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		private const string LogTag = "LogicalDeviceLevelerStatusType4";

		public const int MinimumStatusPacketSize = 8;

		private const int FlagsIndex = 0;

		private const int ScreenEnumIndex = 1;

		private const int ButtonsEnabledStartIndex = 2;

		public const int NonCriticalDataStartIndex = 5;

		private const int AngleStartIndex = 5;

		private const int AngleXInfoStartIndex = 6;

		private const int AngleYInfoStartIndex = 7;

		private static readonly BitPositionValue XAngleBitPosition = new BitPositionValue(240u, 5, 1);

		private static readonly BitPositionValue YAngleBitPosition = new BitPositionValue(15u, 5, 1);

		private static readonly BitPositionValue XAngleFractionBitPosition = new BitPositionValue(248u, 6, 1);

		private static readonly BitPositionValue XAngleSignBitPosition = new BitPositionValue(4u, 6, 1);

		private static readonly BitPositionValue YAngleFractionBitPosition = new BitPositionValue(248u, 7, 1);

		private static readonly BitPositionValue YAngleSignBitPosition = new BitPositionValue(4u, 7, 1);

		private const BasicBitMask FlagBitLevel = (BasicBitMask)1;

		private const BasicBitMask FlagBitJacksFullyRetracted = (BasicBitMask)2;

		private const BasicBitMask FlagBitJacksGrounded = (BasicBitMask)4;

		private const BasicBitMask FlagBitJacksMoving = (BasicBitMask)8;

		private const BasicBitMask FlagBitExcessAngleDetected = (BasicBitMask)16;

		private const BasicBitMask FlagBitExcessTwistDetected = (BasicBitMask)32;

		private bool _debugShowedUnknownScreenSelectedMessage;

		public bool IsLevel
		{
			get
			{
				return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)1, 0);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)1, value, 0);
			}
		}

		public bool AreJacksFullyRetracted
		{
			get
			{
				return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)2, 0);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)2, value, 0);
			}
		}

		public bool AreJacksGrounded
		{
			get
			{
				return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)4, 0);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)4, value, 0);
			}
		}

		public bool AreJacksMoving
		{
			get
			{
				return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)8, 0);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)8, value, 0);
			}
		}

		public bool IsExcessAngleDetected
		{
			get
			{
				return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)16, 0);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)16, value, 0);
			}
		}

		public bool IsExcessTwistDetected
		{
			get
			{
				return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)32, 0);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)32, value, 0);
			}
		}

		public LogicalDeviceLevelerScreenType4 ScreenSelected
		{
			get
			{
				LogicalDeviceLevelerScreenType4 logicalDeviceLevelerScreenType = (LogicalDeviceLevelerScreenType4)((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[1];
				if (!Enum.IsDefined(typeof(LogicalDeviceLevelerScreenType4), (object)logicalDeviceLevelerScreenType))
				{
					if (!_debugShowedUnknownScreenSelectedMessage)
					{
						TaggedLog.Error("LogicalDeviceLevelerStatusType4", String.Format("Unexpected/Unknown Screen Type {0}", (object)logicalDeviceLevelerScreenType), Array.Empty<object>());
					}
					_debugShowedUnknownScreenSelectedMessage = true;
					return LogicalDeviceLevelerScreenType4.Unknown;
				}
				_debugShowedUnknownScreenSelectedMessage = false;
				return logicalDeviceLevelerScreenType;
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[1] = (byte)value;
			}
		}

		public uint ButtonsEnabledRaw
		{
			get
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				return UInt24.op_Implicit(((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetUInt24(2u));
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt24(value, 2);
			}
		}

		public ValueTuple<LogicalDeviceLevelerScreenType4, dynamic, byte[]> AtomicState
		{
			get
			{
				//IL_0015: Unknown result type (might be due to invalid IL or missing references)
				//IL_007b: Unknown result type (might be due to invalid IL or missing references)
				//IL_016f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ff: Unknown result type (might be due to invalid IL or missing references)
				//IL_010d: Unknown result type (might be due to invalid IL or missing references)
				//IL_011b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0129: Unknown result type (might be due to invalid IL or missing references)
				//IL_0145: Unknown result type (might be due to invalid IL or missing references)
				//IL_0153: Unknown result type (might be due to invalid IL or missing references)
				//IL_0161: Unknown result type (might be due to invalid IL or missing references)
				//IL_0137: Unknown result type (might be due to invalid IL or missing references)
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				byte[] array = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).CopyCurrentData();
				if (array.Length < 8)
				{
					return new ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>(LogicalDeviceLevelerScreenType4.Unknown, (object)LogicalDeviceLevelerButtonNoneType4.None, array);
				}
				LogicalDeviceLevelerScreenType4 logicalDeviceLevelerScreenType = (LogicalDeviceLevelerScreenType4)array[1];
				if (!Enum.IsDefined(typeof(LogicalDeviceLevelerScreenType4), (object)logicalDeviceLevelerScreenType))
				{
					if (!_debugShowedUnknownScreenSelectedMessage)
					{
						TaggedLog.Error("LogicalDeviceLevelerStatusType4", String.Format("Unexpected/Unknown Screen Type {0}", (object)logicalDeviceLevelerScreenType), Array.Empty<object>());
					}
					_debugShowedUnknownScreenSelectedMessage = true;
					return new ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>(LogicalDeviceLevelerScreenType4.Unknown, (object)LogicalDeviceLevelerButtonNoneType4.None, array);
				}
				_debugShowedUnknownScreenSelectedMessage = false;
				uint num = UInt24.op_Implicit(LogicalDeviceDataPacketMutableDoubleBuffer.GetUInt24(array, 2u));
				switch (logicalDeviceLevelerScreenType)
				{
				case LogicalDeviceLevelerScreenType4.Home:
					return new ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>(logicalDeviceLevelerScreenType, (object)(LogicalDeviceLevelerButtonHomeType4)num, array);
				case LogicalDeviceLevelerScreenType4.AutoLevel:
				case LogicalDeviceLevelerScreenType4.AutoHitch:
				case LogicalDeviceLevelerScreenType4.AutoRetractAllJacks:
				case LogicalDeviceLevelerScreenType4.AutoRetractFrontJacks:
				case LogicalDeviceLevelerScreenType4.AutoRetractRearJacks:
				case LogicalDeviceLevelerScreenType4.AutoHomeJacks:
					return new ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>(logicalDeviceLevelerScreenType, (object)LogicalDeviceLevelerButtonNoneType4.None, array);
				case LogicalDeviceLevelerScreenType4.JackMovementManual:
				case LogicalDeviceLevelerScreenType4.JackMovementManualConsole:
					return new ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>(logicalDeviceLevelerScreenType, (object)(LogicalDeviceLevelerButtonJackMovementManualType4)num, array);
				case LogicalDeviceLevelerScreenType4.JackMovementZero:
					return new ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>(logicalDeviceLevelerScreenType, (object)(LogicalDeviceLevelerButtonJackMovementZeroType4)num, array);
				case LogicalDeviceLevelerScreenType4.PromptInfo:
					return new ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>(logicalDeviceLevelerScreenType, (object)(LogicalDeviceLevelerButtonOkType4)num, array);
				case LogicalDeviceLevelerScreenType4.PromptYesNo:
					return new ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>(logicalDeviceLevelerScreenType, (object)(LogicalDeviceLevelerButtonYesNoType4)num, array);
				case LogicalDeviceLevelerScreenType4.PromptAirbagTimeSelect:
					return new ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>(logicalDeviceLevelerScreenType, (object)(LogicalDeviceLevelerButtonAirbagTimeSelectType4)num, array);
				case LogicalDeviceLevelerScreenType4.PromptFault:
					return new ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>(logicalDeviceLevelerScreenType, (object)(LogicalDeviceLevelerButtonOkType4)num, array);
				case LogicalDeviceLevelerScreenType4.JackMovementFaultManual:
				case LogicalDeviceLevelerScreenType4.JackMovementFaultManualConsole:
					return new ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>(logicalDeviceLevelerScreenType, (object)(LogicalDeviceLevelerButtonJackMovementFaultManualType4)num, array);
				case LogicalDeviceLevelerScreenType4.AirSuspensionControlManual:
					return new ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>(logicalDeviceLevelerScreenType, (object)(LogicalDeviceLevelerButtonAirSuspensionType4)num, array);
				default:
					return new ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>(logicalDeviceLevelerScreenType, (object)LogicalDeviceLevelerButtonNoneType4.None, array);
				}
			}
		}

		public bool IsButtonOkEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if (((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2 is LogicalDeviceLevelerButtonOkType4 logicalDeviceLevelerButtonOkType)
				{
					return ((Enum)(object)logicalDeviceLevelerButtonOkType).HasFlag((Enum)(object)LogicalDeviceLevelerButtonOkType4.Ok);
				}
				return false;
			}
		}

		public bool IsButtonYesEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if (((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2 is LogicalDeviceLevelerButtonYesNoType4 logicalDeviceLevelerButtonYesNoType)
				{
					return ((Enum)(object)logicalDeviceLevelerButtonYesNoType).HasFlag((Enum)(object)LogicalDeviceLevelerButtonYesNoType4.Yes);
				}
				return false;
			}
		}

		public bool IsButtonNoEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if (((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2 is LogicalDeviceLevelerButtonYesNoType4 logicalDeviceLevelerButtonYesNoType)
				{
					return ((Enum)(object)logicalDeviceLevelerButtonYesNoType).HasFlag((Enum)(object)LogicalDeviceLevelerButtonYesNoType4.No);
				}
				return false;
			}
		}

		public bool IsButtonShortEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if (((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2 is LogicalDeviceLevelerButtonAirbagTimeSelectType4 logicalDeviceLevelerButtonAirbagTimeSelectType)
				{
					return ((Enum)(object)logicalDeviceLevelerButtonAirbagTimeSelectType).HasFlag((Enum)(object)LogicalDeviceLevelerButtonAirbagTimeSelectType4.Short);
				}
				return false;
			}
		}

		public bool IsButtonLongEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if (((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2 is LogicalDeviceLevelerButtonAirbagTimeSelectType4 logicalDeviceLevelerButtonAirbagTimeSelectType)
				{
					return ((Enum)(object)logicalDeviceLevelerButtonAirbagTimeSelectType).HasFlag((Enum)(object)LogicalDeviceLevelerButtonAirbagTimeSelectType4.Long);
				}
				return false;
			}
		}

		public bool IsButtonSetZeroPointEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if (((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2 is LogicalDeviceLevelerButtonJackMovementZeroType4 logicalDeviceLevelerButtonJackMovementZeroType)
				{
					return ((Enum)(object)logicalDeviceLevelerButtonJackMovementZeroType).HasFlag((Enum)(object)LogicalDeviceLevelerButtonJackMovementZeroType4.SetZeroPoint);
				}
				return false;
			}
		}

		public bool IsButtonAutoRetractEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if (((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2 is LogicalDeviceLevelerButtonJackMovementFaultManualType4 logicalDeviceLevelerButtonJackMovementFaultManualType)
				{
					return ((Enum)(object)logicalDeviceLevelerButtonJackMovementFaultManualType).HasFlag((Enum)(object)LogicalDeviceLevelerButtonJackMovementFaultManualType4.AutoRetract);
				}
				return false;
			}
		}

		public bool IsButtonAutoLevelEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if (((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2 is LogicalDeviceLevelerButtonHomeType4 logicalDeviceLevelerButtonHomeType)
				{
					return ((Enum)(object)logicalDeviceLevelerButtonHomeType).HasFlag((Enum)(object)LogicalDeviceLevelerButtonHomeType4.AutoLevel);
				}
				return false;
			}
		}

		public bool IsButtonAutoHitchEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if (((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2 is LogicalDeviceLevelerButtonHomeType4 logicalDeviceLevelerButtonHomeType)
				{
					return ((Enum)(object)logicalDeviceLevelerButtonHomeType).HasFlag((Enum)(object)LogicalDeviceLevelerButtonHomeType4.AutoHitch);
				}
				return false;
			}
		}

		public bool IsButtonAutoRetractAllJacksEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if (((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2 is LogicalDeviceLevelerButtonHomeType4 logicalDeviceLevelerButtonHomeType)
				{
					return ((Enum)(object)logicalDeviceLevelerButtonHomeType).HasFlag((Enum)(object)LogicalDeviceLevelerButtonHomeType4.AutoRetractAllJacks);
				}
				return false;
			}
		}

		public bool IsButtonAutoRetractFrontJacksEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if (((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2 is LogicalDeviceLevelerButtonHomeType4 logicalDeviceLevelerButtonHomeType)
				{
					return ((Enum)(object)logicalDeviceLevelerButtonHomeType).HasFlag((Enum)(object)LogicalDeviceLevelerButtonHomeType4.AutoRetractFrontJacks);
				}
				return false;
			}
		}

		public bool IsButtonAutoRetractRearJacksEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if (((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2 is LogicalDeviceLevelerButtonHomeType4 logicalDeviceLevelerButtonHomeType)
				{
					return ((Enum)(object)logicalDeviceLevelerButtonHomeType).HasFlag((Enum)(object)LogicalDeviceLevelerButtonHomeType4.AutoRetractRearJacks);
				}
				return false;
			}
		}

		public bool IsButtonManualModeEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if (((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2 is LogicalDeviceLevelerButtonHomeType4 logicalDeviceLevelerButtonHomeType)
				{
					return ((Enum)(object)logicalDeviceLevelerButtonHomeType).HasFlag((Enum)(object)LogicalDeviceLevelerButtonHomeType4.ManualMode);
				}
				return false;
			}
		}

		public bool IsButtonManualAirSuspensionEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if (((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2 is LogicalDeviceLevelerButtonHomeType4 logicalDeviceLevelerButtonHomeType)
				{
					return ((Enum)(object)logicalDeviceLevelerButtonHomeType).HasFlag((Enum)(object)LogicalDeviceLevelerButtonHomeType4.ManualAirSuspension);
				}
				return false;
			}
		}

		public bool IsButtonZeroModeEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if (((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2 is LogicalDeviceLevelerButtonHomeType4 logicalDeviceLevelerButtonHomeType)
				{
					return ((Enum)(object)logicalDeviceLevelerButtonHomeType).HasFlag((Enum)(object)LogicalDeviceLevelerButtonHomeType4.ZeroMode);
				}
				return false;
			}
		}

		public bool IsButtonHomeJacksEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if (((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2 is LogicalDeviceLevelerButtonHomeType4 logicalDeviceLevelerButtonHomeType)
				{
					return ((Enum)(object)logicalDeviceLevelerButtonHomeType).HasFlag((Enum)(object)LogicalDeviceLevelerButtonHomeType4.AutoHomeJacks);
				}
				return false;
			}
		}

		public bool IsButtonRfPairingEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if (((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2 is LogicalDeviceLevelerButtonHomeType4 logicalDeviceLevelerButtonHomeType)
				{
					return ((Enum)(object)logicalDeviceLevelerButtonHomeType).HasFlag((Enum)(object)LogicalDeviceLevelerButtonHomeType4.RfConfig);
				}
				return false;
			}
		}

		public float XAngle
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_000c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				uint value = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(XAngleBitPosition);
				uint value2 = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(XAngleFractionBitPosition);
				float num = (float)value + (float)value2 / 32f;
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(XAngleSignBitPosition) != 0)
				{
					num = 0f - num;
				}
				return num;
			}
			set
			{
				//IL_002c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0038: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				float num = Math.Abs(value);
				uint num2 = (uint)Math.Truncate((double)num);
				uint num3 = (uint)Math.Truncate((double)((num - (float)num2) * 32f));
				int num4 = ((!(value >= 0f)) ? 1 : 0);
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue(num2, XAngleBitPosition);
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue(num3, XAngleFractionBitPosition);
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)num4, XAngleSignBitPosition);
			}
		}

		public float YAngle
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_000c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				uint value = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(YAngleBitPosition);
				uint value2 = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(YAngleFractionBitPosition);
				float num = (float)value + (float)value2 / 32f;
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(YAngleSignBitPosition) != 0)
				{
					num = 0f - num;
				}
				return num;
			}
			set
			{
				//IL_002c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0038: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				float num = Math.Abs(value);
				uint num2 = (uint)Math.Truncate((double)num);
				uint num3 = (uint)Math.Truncate((double)((num - (float)num2) * 32f));
				int num4 = ((!(value >= 0f)) ? 1 : 0);
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue(num2, YAngleBitPosition);
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue(num3, YAngleFractionBitPosition);
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)num4, YAngleSignBitPosition);
			}
		}

		public LogicalDeviceLevelerStatusType4()
			: base(8u)
		{
		}

		public LogicalDeviceLevelerStatusType4(LogicalDeviceLevelerStatusType4 original)
			: base(8u)
		{
			byte[] array = ((LogicalDeviceDataPacketMutableDoubleBuffer)original).CopyCurrentData();
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(array, array.Length, false);
		}

		public LogicalDeviceLevelerStatusType4(LogicalDeviceLevelerScreenType4 screenType)
			: base(8u)
		{
			ScreenSelected = screenType;
		}

		public LevelerJackDirection ButtonJackMovementEnabled(LevelerJackLocation jackLocation)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			object item = ((ValueTuple<LogicalDeviceLevelerScreenType4, object, byte[]>)AtomicState).Item2;
			if (!(item is LogicalDeviceLevelerButtonJackMovementManualType4 button))
			{
				if (!(item is LogicalDeviceLevelerButtonJackMovementZeroType4 button2))
				{
					if (item is LogicalDeviceLevelerButtonJackMovementFaultManualType4 button3)
					{
						return button3.ToJackMovement().JackDirection(jackLocation);
					}
					return LevelerJackDirection.None;
				}
				return button2.ToJackMovement().JackDirection(jackLocation);
			}
			return button.ToJackMovement().JackDirection(jackLocation);
		}

		public LogicalDeviceLevelerType4StatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceLevelerType4StatusSerializable(this);
		}
	}
	public class LogicalDeviceLevelerType4 : LogicalDevice<LogicalDeviceLevelerStatusType4, LogicalDeviceLevelerCapabilityType4>, ILogicalDeviceWithTextConsole, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceDirectLevelerType4, ILogicalDeviceLevelerType4, ILogicalDeviceLeveler, IDevicesActivation, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceWithStatus<LogicalDeviceLevelerStatusType4>, ILogicalDeviceWithStatus, ILogicalDeviceWithCapability<LogicalDeviceLevelerCapabilityType4>, ITextConsole, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
		[Flags]
		public enum FeatureSupport : Enum
		{
			AutoHitch = 1,
			RetractFrontJacks = 2,
			RetractRearJacks = 4,
			ManualAirSuspensionControl = 8,
			RfRemotePairing = 0x10,
			ReHomeJackPositions = 0x20,
			All = 0x3F,
			Unknown = 0x800000
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass81_0 : Object
		{
			public BaseObservableCollection<ValueTuple<LogicalDeviceLevelerAutoStepType4, int>> collection;

			public List<LogicalDeviceLevelerAutoStepType4> autoStepsList;

			internal void <UpdateAutoStepsCollectionWithLatestDetails>b__0()
			{
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				//IL_000c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0020: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				SuppressEventsDisposable<ValueTuple<LogicalDeviceLevelerAutoStepType4, int>> val = collection.SuppressEvents(false);
				try
				{
					((Collection<ValueTuple<LogicalDeviceLevelerAutoStepType4, int>>)(object)collection).Clear();
					int num = 0;
					Enumerator<LogicalDeviceLevelerAutoStepType4> enumerator = autoStepsList.GetEnumerator();
					try
					{
						while (enumerator.MoveNext())
						{
							LogicalDeviceLevelerAutoStepType4 current = enumerator.Current;
							((Collection<ValueTuple<LogicalDeviceLevelerAutoStepType4, int>>)(object)collection).Add(new ValueTuple<LogicalDeviceLevelerAutoStepType4, int>(current, num++));
						}
					}
					finally
					{
						((IDisposable)enumerator/*cast due to .constrained prefix*/).Dispose();
					}
				}
				finally
				{
					((IDisposable)val/*cast due to .constrained prefix*/).Dispose();
				}
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ActivateSession>d__55 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceLevelerType4 <>4__this;

			public CancellationToken cancelToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_007b: Expected O, but got Unknown
				//IL_00a6: Expected O, but got Unknown
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0026: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType4 logicalDeviceLevelerType = <>4__this;
				try
				{
					try
					{
						TaskAwaiter val;
						if (num != 0)
						{
							val = logicalDeviceLevelerType.IdsCanCommandRunner.CommandActivateSession(cancelToken, true).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <ActivateSession>d__55>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val)).GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Error("LogicalDeviceLevelerType4", String.Format("Unable to ActiveSession for {0} with error {1}", (object)((LogicalDevice<LogicalDeviceLevelerCapabilityType4>)(object)logicalDeviceLevelerType).LogicalId, (object)ex2.Message), Array.Empty<object>());
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <GetAutoStepListDetailsAsync>d__82 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<List<LogicalDeviceLevelerAutoStepType4>> <>t__builder;

			public LogicalDeviceLevelerType4 <>4__this;

			public CancellationToken cancelToken;

			public int expectedStepsCount;

			private List<LogicalDeviceLevelerAutoStepType4> <autoStepsList>5__2;

			private LogicalDevicePid <currentPid>5__3;

			private int <index>5__4;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_01d0: Expected O, but got Unknown
				//IL_00d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e1: Unknown result type (might be due to invalid IL or missing references)
				//IL_002e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Invalid comparison between Unknown and I4
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_013c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				//IL_01bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_0095: Unknown result type (might be due to invalid IL or missing references)
				//IL_009f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_0084: Unknown result type (might be due to invalid IL or missing references)
				//IL_008e: Expected O, but got Unknown
				//IL_00b9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bb: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType4 logicalDeviceLevelerType = <>4__this;
				List<LogicalDeviceLevelerAutoStepType4> result;
				try
				{
					if (num != 0)
					{
						if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType).IsDisposed)
						{
							throw new ObjectDisposedException(((MemberInfo)((Object)logicalDeviceLevelerType).GetType()).Name);
						}
						if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType4>)(object)logicalDeviceLevelerType).ActiveConnection != 1)
						{
							throw new PhysicalDeviceNotFoundException("LogicalDeviceLevelerType4", "");
						}
						<autoStepsList>5__2 = new List<LogicalDeviceLevelerAutoStepType4>();
						<currentPid>5__3 = null;
						<index>5__4 = 0;
						goto IL_015d;
					}
					TaskAwaiter<ulong> val = <>u__1;
					<>u__1 = default(TaskAwaiter<ulong>);
					num = (<>1__state = -1);
					goto IL_00f0;
					IL_015d:
					if (<index>5__4 < expectedStepsCount && <index>5__4 < _autoStepsDetailPidList.Count * 6)
					{
						if (<index>5__4 % 6 == 0)
						{
							<currentPid>5__3 = new LogicalDevicePid((ILogicalDevice)(object)logicalDeviceLevelerType, _autoStepsDetailPidList[<index>5__4 / 6], (LogicalDeviceSessionType)0, (Func<ulong, bool>)null);
						}
						val = <currentPid>5__3.ReadValueAsync(cancelToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <GetAutoStepListDetailsAsync>d__82>(ref val, ref this);
							return;
						}
						goto IL_00f0;
					}
					if (<autoStepsList>5__2.Count != expectedStepsCount)
					{
						throw new ArgumentException(String.Format("Complete step data not available {0} of {1} found.", (object)<autoStepsList>5__2.Count, (object)expectedStepsCount), "expectedStepsCount");
					}
					result = <autoStepsList>5__2;
					goto end_IL_000e;
					IL_00f0:
					ulong result2 = val.GetResult();
					int num2 = 5 - <index>5__4 % 6;
					LogicalDeviceLevelerAutoStepType4 logicalDeviceLevelerAutoStepType = (LogicalDeviceLevelerAutoStepType4)((result2 >> num2 * 8) & 0xFF);
					if (logicalDeviceLevelerAutoStepType == LogicalDeviceLevelerAutoStepType4.None)
					{
						throw new ArgumentException(String.Format("Invalid (no step) defined for step {0} of {1}", (object)<index>5__4, (object)expectedStepsCount), "expectedStepsCount");
					}
					<autoStepsList>5__2.Add(logicalDeviceLevelerAutoStepType);
					<index>5__4++;
					goto IL_015d;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<autoStepsList>5__2 = null;
					<currentPid>5__3 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<autoStepsList>5__2 = null;
				<currentPid>5__3 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <GetAutoStepsProgressAsync>d__78 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<ValueTuple<LogicalDeviceLevelerScreenType4, int, int>> <>t__builder;

			public LogicalDeviceLevelerType4 <>4__this;

			public CancellationToken cancelToken;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_00fc: Expected O, but got Unknown
				//IL_0090: Unknown result type (might be due to invalid IL or missing references)
				//IL_0095: Unknown result type (might be due to invalid IL or missing references)
				//IL_009d: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Invalid comparison between Unknown and I4
				//IL_0024: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e7: Unknown result type (might be due to invalid IL or missing references)
				//IL_004b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0051: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0060: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0121: Unknown result type (might be due to invalid IL or missing references)
				//IL_0075: Unknown result type (might be due to invalid IL or missing references)
				//IL_0077: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType4 logicalDeviceLevelerType = <>4__this;
				ValueTuple<LogicalDeviceLevelerScreenType4, int, int> result2;
				try
				{
					TaskAwaiter<ulong> val;
					if (num != 0)
					{
						if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType).IsDisposed)
						{
							throw new ObjectDisposedException(((MemberInfo)((Object)logicalDeviceLevelerType).GetType()).Name);
						}
						if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType4>)(object)logicalDeviceLevelerType).ActiveConnection != 1)
						{
							throw new PhysicalDeviceNotFoundException("LogicalDeviceLevelerType4", "");
						}
						val = new LogicalDevicePid((ILogicalDevice)(object)logicalDeviceLevelerType, PID.LEVELER_AUTO_MODE_PROGRESS, (LogicalDeviceSessionType)0, (Func<ulong, bool>)null).ReadValueAsync(cancelToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <GetAutoStepsProgressAsync>d__78>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ulong>);
						num = (<>1__state = -1);
					}
					ulong result = val.GetResult();
					LogicalDeviceLevelerScreenType4 logicalDeviceLevelerScreenType = (LogicalDeviceLevelerScreenType4)(result & 0xFF);
					int num2 = (int)((result >> 8) & 0xFF);
					int num3 = (int)((result >> 16) & 0xFF);
					if (num3 > num2)
					{
						throw new ArgumentException("Invalid Step data stepsCompleted > stepsCount", "stepsCompleted");
					}
					result2 = new ValueTuple<LogicalDeviceLevelerScreenType4, int, int>(logicalDeviceLevelerScreenType, num2, num3);
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommand>d__68 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLevelerType4 <>4__this;

			public ILogicalDeviceLevelerCommandType4 command;

			public bool ignoreScreenValidation;

			public CancellationToken callerCancelToken;

			private CancellationTokenSource <cancelSource>5__2;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_02b6: Expected O, but got Unknown
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ac: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b4: Unknown result type (might be due to invalid IL or missing references)
				//IL_02db: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c5: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ca: Unknown result type (might be due to invalid IL or missing references)
				//IL_0242: Unknown result type (might be due to invalid IL or missing references)
				//IL_0247: Unknown result type (might be due to invalid IL or missing references)
				//IL_024f: Unknown result type (might be due to invalid IL or missing references)
				//IL_003a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0260: Unknown result type (might be due to invalid IL or missing references)
				//IL_0265: Unknown result type (might be due to invalid IL or missing references)
				//IL_0273: Unknown result type (might be due to invalid IL or missing references)
				//IL_0119: Unknown result type (might be due to invalid IL or missing references)
				//IL_0112: Unknown result type (might be due to invalid IL or missing references)
				//IL_0297: Unknown result type (might be due to invalid IL or missing references)
				//IL_0299: Unknown result type (might be due to invalid IL or missing references)
				//IL_0281: Unknown result type (might be due to invalid IL or missing references)
				//IL_013c: Unknown result type (might be due to invalid IL or missing references)
				//IL_013f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0140: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dc: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0168: Unknown result type (might be due to invalid IL or missing references)
				//IL_0172: Unknown result type (might be due to invalid IL or missing references)
				//IL_0177: Unknown result type (might be due to invalid IL or missing references)
				//IL_0206: Unknown result type (might be due to invalid IL or missing references)
				//IL_020d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0212: Unknown result type (might be due to invalid IL or missing references)
				//IL_018c: Unknown result type (might be due to invalid IL or missing references)
				//IL_018e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0227: Unknown result type (might be due to invalid IL or missing references)
				//IL_0229: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType4 logicalDeviceLevelerType = <>4__this;
				CommandResult result;
				try
				{
					if ((uint)num <= 1u)
					{
						goto IL_00f7;
					}
					if (!logicalDeviceLevelerType.IdsCanCommandRunner.CommandSessionActivated || (int)((LogicalDevice<LogicalDeviceLevelerCapabilityType4>)(object)logicalDeviceLevelerType).ActiveConnection == 0)
					{
						result = (CommandResult)8;
					}
					else if (logicalDeviceLevelerType._commandCancelSource == null)
					{
						result = (CommandResult)1;
					}
					else if (command is ILogicalDeviceLevelerCommandWithScreenSelectionType4 logicalDeviceLevelerCommandWithScreenSelectionType && logicalDeviceLevelerCommandWithScreenSelectionType.ScreenSelected != ((LogicalDevice<LogicalDeviceLevelerStatusType4, LogicalDeviceLevelerCapabilityType4>)(object)logicalDeviceLevelerType).DeviceStatus.ScreenSelected && !ignoreScreenValidation)
					{
						TaggedLog.Debug("LogicalDeviceLevelerType4", String.Format("Unable to send command {0} because screen doesn't match current screen {1} != {2}.", (object)command, (object)logicalDeviceLevelerCommandWithScreenSelectionType.ScreenSelected, (object)((LogicalDevice<LogicalDeviceLevelerStatusType4, LogicalDeviceLevelerCapabilityType4>)(object)logicalDeviceLevelerType).DeviceStatus.ScreenSelected), Array.Empty<object>());
						result = (CommandResult)11;
					}
					else
					{
						if (!((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType).IsDisposed)
						{
							<cancelSource>5__2 = CancellationTokenSource.CreateLinkedTokenSource(callerCancelToken, logicalDeviceLevelerType._commandCancelSource.Token);
							goto IL_00f7;
						}
						TaggedLog.Debug("LogicalDeviceLevelerType4", String.Concat("Unable to send command to disposed LogicalDevice ", ((LogicalDevice<LogicalDeviceLevelerCapabilityType4>)(object)logicalDeviceLevelerType).DeviceName), Array.Empty<object>());
						result = (CommandResult)7;
					}
					goto end_IL_000e;
					IL_00f7:
					try
					{
						TaskAwaiter<CommandResult> val;
						if (num == 0)
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_01c3;
						}
						if (num == 1)
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_025e;
						}
						if (!<cancelSource>5__2.IsCancellationRequested)
						{
							CommandSendOption val2 = (CommandSendOption)1;
							if (((Object)command).Equals((object)logicalDeviceLevelerType._lastSentCommand) || command.Command == LogicalDeviceLevelerCommandType4.LevelerCommandCode.Home)
							{
								val2 = (CommandSendOption)(val2 | 2);
							}
							if (((LogicalDevice<LogicalDeviceLevelerCapabilityType4>)(object)logicalDeviceLevelerType).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceLevelerType) is IDirectCommandLeveler4 directCommandLeveler)
							{
								val = directCommandLeveler.SendDirectCommandLeveler4(logicalDeviceLevelerType, command, <cancelSource>5__2.Token).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 0);
									<>u__1 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommand>d__68>(ref val, ref this);
									return;
								}
								goto IL_01c3;
							}
							val = logicalDeviceLevelerType.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)command, <cancelSource>5__2.Token, (Func<ILogicalDevice, CommandControl>)((ILogicalDevice logicalDevice) => (CommandControl)0), val2).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommand>d__68>(ref val, ref this);
								return;
							}
							goto IL_025e;
						}
						result = (CommandResult)1;
						goto end_IL_00f7;
						IL_025e:
						CommandResult result2 = val.GetResult();
						logicalDeviceLevelerType._lastSentCommand = command;
						if ((int)result2 != 0)
						{
							TaggedLog.Debug("LogicalDeviceLevelerType4", String.Format("Unable to successfully send leveler command because {0}", (object)result2), Array.Empty<object>());
						}
						result = result2;
						goto end_IL_00f7;
						IL_01c3:
						result = val.GetResult();
						end_IL_00f7:;
					}
					finally
					{
						if (num < 0 && <cancelSource>5__2 != null)
						{
							((IDisposable)<cancelSource>5__2).Dispose();
						}
					}
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendWakeupCommandAsync>d__66 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLevelerType4 <>4__this;

			public CancellationToken cancelToken;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_008a: Expected O, but got Unknown
				//IL_0063: Unknown result type (might be due to invalid IL or missing references)
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_0033: Unknown result type (might be due to invalid IL or missing references)
				//IL_0038: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				//IL_0085: Unknown result type (might be due to invalid IL or missing references)
				//IL_004c: Unknown result type (might be due to invalid IL or missing references)
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00af: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType4 logicalDeviceLevelerType = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceLevelerType.SendCommand(LogicalDeviceLevelerCommandType4.MakeWakeupCommand(((LogicalDevice<LogicalDeviceLevelerStatusType4, LogicalDeviceLevelerCapabilityType4>)(object)logicalDeviceLevelerType).DeviceStatus.ScreenSelected), cancelToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendWakeupCommandAsync>d__66>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <UpdateAutoStepsCollectionWithLatestDetails>d__81 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public BaseObservableCollection<ValueTuple<LogicalDeviceLevelerAutoStepType4, int>> collection;

			public LogicalDeviceLevelerType4 <>4__this;

			public int expectedStepsCount;

			public CancellationToken cancelToken;

			private <>c__DisplayClass81_0 <>8__1;

			private TaskAwaiter<List<LogicalDeviceLevelerAutoStepType4>> <>u__1;

			private TaskAwaiter<bool> <>u__2;

			private void MoveNext()
			{
				//IL_0118: Expected O, but got Unknown
				//IL_0079: Unknown result type (might be due to invalid IL or missing references)
				//IL_007e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0085: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00be: Expected O, but got Unknown
				//IL_00be: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fd: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				//IL_004b: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00da: Unknown result type (might be due to invalid IL or missing references)
				//IL_005f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0060: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType4 logicalDeviceLevelerType = <>4__this;
				try
				{
					TaskAwaiter<bool> val;
					TaskAwaiter<List<LogicalDeviceLevelerAutoStepType4>> val2;
					if (num != 0)
					{
						if (num == 1)
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_010c;
						}
						<>8__1 = new <>c__DisplayClass81_0();
						<>8__1.collection = collection;
						val2 = logicalDeviceLevelerType.GetAutoStepListDetailsAsync(expectedStepsCount, cancelToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<List<LogicalDeviceLevelerAutoStepType4>>, <UpdateAutoStepsCollectionWithLatestDetails>d__81>(ref val2, ref this);
							return;
						}
					}
					else
					{
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<List<LogicalDeviceLevelerAutoStepType4>>);
						num = (<>1__state = -1);
					}
					List<LogicalDeviceLevelerAutoStepType4> result = val2.GetResult();
					<>8__1.autoStepsList = result;
					val = MainThread.RequestMainThreadActionAsync((Action)delegate
					{
						//IL_0007: Unknown result type (might be due to invalid IL or missing references)
						//IL_000c: Unknown result type (might be due to invalid IL or missing references)
						//IL_0020: Unknown result type (might be due to invalid IL or missing references)
						//IL_0025: Unknown result type (might be due to invalid IL or missing references)
						//IL_003c: Unknown result type (might be due to invalid IL or missing references)
						SuppressEventsDisposable<ValueTuple<LogicalDeviceLevelerAutoStepType4, int>> val3 = <>8__1.collection.SuppressEvents(false);
						try
						{
							((Collection<ValueTuple<LogicalDeviceLevelerAutoStepType4, int>>)(object)<>8__1.collection).Clear();
							int num2 = 0;
							Enumerator<LogicalDeviceLevelerAutoStepType4> enumerator = <>8__1.autoStepsList.GetEnumerator();
							try
							{
								while (enumerator.MoveNext())
								{
									LogicalDeviceLevelerAutoStepType4 current = enumerator.Current;
									((Collection<ValueTuple<LogicalDeviceLevelerAutoStepType4, int>>)(object)<>8__1.collection).Add(new ValueTuple<LogicalDeviceLevelerAutoStepType4, int>(current, num2++));
								}
							}
							finally
							{
								((IDisposable)enumerator/*cast due to .constrained prefix*/).Dispose();
							}
						}
						finally
						{
							((IDisposable)val3/*cast due to .constrained prefix*/).Dispose();
						}
					}).GetAwaiter();
					if (!val.IsCompleted)
					{
						num = (<>1__state = 1);
						<>u__2 = val;
						((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <UpdateAutoStepsCollectionWithLatestDetails>d__81>(ref val, ref this);
						return;
					}
					goto IL_010c;
					IL_010c:
					val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>8__1 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceLevelerType4";

		private readonly object _locker = (object)new Object();

		private const int LevelerTextConsoleWidth = 40;

		private const int LevelerTextConsoleHeight = 6;

		protected ILogicalDeviceCommandRunnerIdsCan IdsCanCommandRunner;

		private CancellationTokenSource _commandCancelSource = new CancellationTokenSource();

		private const uint DelayStatusChangedLogMessageThrottleTimeMs = 60000u;

		private readonly Stopwatch _delayStatusChangedLogMessageThrottleTimer = Stopwatch.StartNew();

		private readonly Stopwatch _delayStatusChange = new Stopwatch();

		private const uint DeviceStatusChangedThrottleTimeMs = 250u;

		private string _textConsoleMessage;

		private int _textConsoleWidth;

		private int _textConsoleHeight;

		private ITextConsole _cachedTextConsole;

		private ILogicalDevicePidFixedPoint _batteryVoltagePidCan;

		private ILogicalDeviceLevelerCommandType4 _lastSentCommand;

		private readonly ILogicalDevicePidULong _uiSupportedFeaturesPid;

		private LogicalDevicePidBindableAsyncValue? _uiSupportedFeaturePidValue;

		private FeatureSupport _featuresSupported = FeatureSupport.Unknown;

		private static List<PID> _autoStepsDetailPidList;

		private const int AutoStepsPerPid = 6;

		public virtual uint MsCommandTimeout => 5000u;

		public virtual uint MsSessionTimeout => 15000u;

		[field: CompilerGenerated]
		public bool MuteDebugUpdateDeviceStatusChanged
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		}

		public IDevice Device => null;

		public bool IsDetected => true;

		public IReadOnlyList<string> Lines => (IReadOnlyList<string>)(object)LinesRaw;

		[field: CompilerGenerated]
		public List<string> LinesRaw
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		} = new List<string>();

		[field: CompilerGenerated]
		public TEXT_CONSOLE_SIZE Size
		{
			[CompilerGenerated]
			get;
		} = new TEXT_CONSOLE_SIZE(40, 6);

		public string TextConsoleMessage
		{
			get
			{
				return _textConsoleMessage;
			}
			private set
			{
				if (((CommonNotifyPropertyChanged)this).SetBackingField<string>(ref _textConsoleMessage, value, "TextConsoleMessage", Array.Empty<string>()))
				{
					OnDeviceTextConsoleMessageChanged();
				}
			}
		}

		[field: CompilerGenerated]
		public ObservableCollection<string> TextConsoleLines
		{
			[CompilerGenerated]
			get;
		} = new ObservableCollection<string>();

		public int TextConsoleWidth
		{
			get
			{
				return _textConsoleWidth;
			}
			set
			{
				((CommonNotifyPropertyChanged)this).SetBackingField<int>(ref _textConsoleWidth, value, "TextConsoleWidth", Array.Empty<string>());
			}
		}

		public int TextConsoleHeight
		{
			get
			{
				return _textConsoleHeight;
			}
			set
			{
				((CommonNotifyPropertyChanged)this).SetBackingField<int>(ref _textConsoleHeight, value, "TextConsoleHeight", Array.Empty<string>());
			}
		}

		public virtual bool CommandSessionActivated => IdsCanCommandRunner.CommandSessionActivated;

		public LogicalDeviceExScope VoltageMeasurementBatteryPidScope => (LogicalDeviceExScope)2;

		public virtual ILogicalDevicePidFixedPoint VoltageMeasurementBatteryPid
		{
			get
			{
				//IL_0014: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Expected O, but got Unknown
				//IL_0020: Expected O, but got Unknown
				ILogicalDevicePidFixedPoint obj = _batteryVoltagePidCan;
				if (obj == null)
				{
					LogicalDevicePidFixedPoint val = new LogicalDevicePidFixedPoint((FixedPointType)1, (ILogicalDevice)(object)this, PID.BATTERY_VOLTAGE, (LogicalDeviceSessionType)0, (Func<ulong, bool>)null);
					ILogicalDevicePidFixedPoint val2 = (ILogicalDevicePidFixedPoint)val;
					_batteryVoltagePidCan = (ILogicalDevicePidFixedPoint)val;
					obj = val2;
				}
				return obj;
			}
		}

		public bool IsVoltagePidReadSupported => true;

		public FeatureSupport FeatureSupported
		{
			get
			{
				return _featuresSupported;
			}
			set
			{
				((CommonNotifyPropertyChanged)this).SetBackingField<FeatureSupport>(ref _featuresSupported, value, "FeatureSupported", Array.Empty<string>());
			}
		}

		public LogicalDeviceLevelerType4(ILogicalDeviceId logicalDeviceId, LogicalDeviceLevelerCapabilityType4 levelerCapability, ILogicalDeviceService deviceService, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceLevelerStatusType4(), levelerCapability, deviceService, isFunctionClassChangeable)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Expected O, but got Unknown
			//IL_0022: Unknown result type (might be due to invalid IL or missing references)
			//IL_002c: Expected O, but got Unknown
			//IL_003b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0040: Unknown result type (might be due to invalid IL or missing references)
			//IL_006d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0072: Unknown result type (might be due to invalid IL or missing references)
			//IL_007e: Expected O, but got Unknown
			//IL_007e: Unknown result type (might be due to invalid IL or missing references)
			//IL_008a: Expected O, but got Unknown
			//IL_008f: Expected O, but got Unknown
			//IL_009c: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a6: Expected O, but got Unknown
			LogicalDeviceCommandRunnerIdsCan val = new LogicalDeviceCommandRunnerIdsCan((ILogicalDevice)(object)this);
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).CommandProcessingTime = MsCommandTimeout;
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).SessionKeepAliveTime = MsSessionTimeout;
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)val;
			((INotifyPropertyChanged)IdsCanCommandRunner).PropertyChanged += new PropertyChangedEventHandler(OnIdsCanCommandRunnerPropertyChanged);
			_uiSupportedFeaturesPid = MakeUiSupportedFeaturesPid();
			_uiSupportedFeaturePidValue = null;
		}

		public override void OnDeviceOnlineChanged()
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0023: Expected I4, but got Unknown
			//IL_0087: Unknown result type (might be due to invalid IL or missing references)
			//IL_0091: Expected O, but got Unknown
			//IL_008c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0096: Expected O, but got Unknown
			//IL_00ad: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDevice<LogicalDeviceLevelerCapabilityType4>)(object)this).OnDeviceOnlineChanged();
			LogicalDeviceActiveConnection activeConnection = ((LogicalDevice<LogicalDeviceLevelerCapabilityType4>)(object)this).ActiveConnection;
			switch ((int)activeConnection)
			{
			case 1:
			{
				ILogicalDeviceSourceDirect primaryDeviceSourceDirect = ((LogicalDevice<LogicalDeviceLevelerCapabilityType4>)(object)this).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)this);
				ILogicalDeviceSourceDirect obj = ((primaryDeviceSourceDirect is ILogicalDeviceSourceDirectConnectionIdsCan) ? primaryDeviceSourceDirect : null);
				object obj2;
				if (obj == null)
				{
					obj2 = null;
				}
				else
				{
					IRemoteDevice obj3 = ((ILogicalDeviceSourceDirectConnectionIdsCan)obj).FindRemoteDevice((ILogicalDevice)(object)this);
					obj2 = ((obj3 != null) ? ((IDevice)obj3).TextConsole : null);
				}
				ITextConsole val = (ITextConsole)obj2;
				if (val == null)
				{
					TextConsoleMessage = "";
				}
				else
				{
					UpdateTextConsole(val);
				}
				if (_uiSupportedFeaturePidValue == null && !((CommonDisposableNotifyPropertyChanged)this).IsDisposed)
				{
					_uiSupportedFeaturePidValue = new LogicalDevicePidBindableAsyncValue((ILogicalDevicePid)(object)_uiSupportedFeaturesPid, true, false, true, new PropertyChangedEventHandler(DoUpdateFeatureSupported));
					((LogicalDevicePidBindableAsyncGeneric<ILogicalDevicePid, ulong>)(object)_uiSupportedFeaturePidValue).ValueToUseWhenInvalidData = 8388608uL;
					((BindableAsyncValue<ulong>)(object)_uiSupportedFeaturePidValue).LoadAsync(CancellationToken.None);
				}
				break;
			}
			case 0:
			case 2:
			case 3:
			{
				TextConsoleMessage = "";
				LogicalDevicePidBindableAsyncValue? uiSupportedFeaturePidValue = _uiSupportedFeaturePidValue;
				if (uiSupportedFeaturePidValue != null)
				{
					((CommonDisposableNotifyPropertyChanged)uiSupportedFeaturePidValue).TryDispose();
				}
				_uiSupportedFeaturePidValue = null;
				break;
			}
			}
		}

		protected override void DebugUpdateDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, uint dataLength, string optionalText = "")
		{
			if (_delayStatusChangedLogMessageThrottleTimer.ElapsedMilliseconds >= 60000)
			{
				base.DebugUpdateDeviceStatusChanged(oldStatusData, statusData, dataLength, String.Format("{0:F1}/{1:F1} - Skipped debug messages over {2}ms", (object)((LogicalDevice<LogicalDeviceLevelerStatusType4, LogicalDeviceLevelerCapabilityType4>)(object)this).DeviceStatus.XAngle, (object)((LogicalDevice<LogicalDeviceLevelerStatusType4, LogicalDeviceLevelerCapabilityType4>)(object)this).DeviceStatus.YAngle, (object)(UInt32)60000));
				_delayStatusChangedLogMessageThrottleTimer.Restart();
			}
		}

		protected override bool ShouldNotifyDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, int dataLength, int matchingDataLength)
		{
			if (MuteDebugUpdateDeviceStatusChanged)
			{
				return false;
			}
			if (matchingDataLength < 5)
			{
				_delayStatusChange.Stop();
				return true;
			}
			if (_delayStatusChange.IsRunning && _delayStatusChange.ElapsedMilliseconds >= 250)
			{
				_delayStatusChange.Stop();
				return true;
			}
			if (dataLength == matchingDataLength)
			{
				return false;
			}
			if (!_delayStatusChange.IsRunning)
			{
				_delayStatusChange.Restart();
			}
			return false;
		}

		public void UpdateTextConsole(ITextConsole textConsole)
		{
			//IL_0009: Unknown result type (might be due to invalid IL or missing references)
			//IL_001a: Unknown result type (might be due to invalid IL or missing references)
			_cachedTextConsole = textConsole;
			TextConsoleWidth = textConsole.Size.Width;
			TextConsoleHeight = textConsole.Size.Height;
			TextConsoleMessage = TextConsoleExtension.Text(textConsole, true);
		}

		public void OnDeviceTextConsoleMessageChanged()
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0012: Expected O, but got Unknown
			MainThread.RequestMainThreadAction((Action)([CompilerGenerated] () =>
			{
				//IL_0024: Unknown result type (might be due to invalid IL or missing references)
				//IL_0029: Unknown result type (might be due to invalid IL or missing references)
				ITextConsole cachedTextConsole = _cachedTextConsole;
				List<string> val = ((cachedTextConsole != null) ? TextConsoleExtension.ToList(cachedTextConsole, true) : null);
				((Collection<string>)(object)TextConsoleLines).Clear();
				if (val == null)
				{
					return;
				}
				Enumerator<string> enumerator = val.GetEnumerator();
				try
				{
					while (enumerator.MoveNext())
					{
						string current = enumerator.Current;
						((Collection<string>)(object)TextConsoleLines).Add(current);
					}
				}
				finally
				{
					((IDisposable)enumerator/*cast due to .constrained prefix*/).Dispose();
				}
			}), (RunBehavior)0);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task ActivateSession(CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ActivateSession>d__55 <ActivateSession>d__ = default(<ActivateSession>d__55);
			<ActivateSession>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<ActivateSession>d__.<>4__this = this;
			<ActivateSession>d__.cancelToken = cancelToken;
			<ActivateSession>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Start<<ActivateSession>d__55>(ref <ActivateSession>d__);
			return ((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Task;
		}

		public void DeactivateSession()
		{
			IdsCanCommandRunner.CommandDeactivateSession(true);
		}

		public Task<float> ReadVoltageMeasurementAsync(CancellationToken cancellationToken)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return LogicalDeviceVoltageExtension.ReadVoltageMeasurementAsync(VoltageMeasurementBatteryPid, cancellationToken);
		}

		protected void OnIdsCanCommandRunnerPropertyChanged(object sender, PropertyChangedEventArgs e)
		{
			if (e.PropertyName == "CommandSessionActivated")
			{
				((CommonNotifyPropertyChanged)this).OnPropertyChanged("CommandSessionActivated");
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendWakeupCommandAsync(CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SendWakeupCommandAsync>d__66 <SendWakeupCommandAsync>d__ = default(<SendWakeupCommandAsync>d__66);
			<SendWakeupCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendWakeupCommandAsync>d__.<>4__this = this;
			<SendWakeupCommandAsync>d__.cancelToken = cancelToken;
			<SendWakeupCommandAsync>d__.<>1__state = -1;
			<SendWakeupCommandAsync>d__.<>t__builder.Start<<SendWakeupCommandAsync>d__66>(ref <SendWakeupCommandAsync>d__);
			return <SendWakeupCommandAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommand(ILogicalDeviceLevelerCommandType4 command, CancellationToken callerCancelToken, bool ignoreScreenValidation = false)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<SendCommand>d__68 <SendCommand>d__ = default(<SendCommand>d__68);
			<SendCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommand>d__.<>4__this = this;
			<SendCommand>d__.command = command;
			<SendCommand>d__.callerCancelToken = callerCancelToken;
			<SendCommand>d__.ignoreScreenValidation = ignoreScreenValidation;
			<SendCommand>d__.<>1__state = -1;
			<SendCommand>d__.<>t__builder.Start<<SendCommand>d__68>(ref <SendCommand>d__);
			return <SendCommand>d__.<>t__builder.Task;
		}

		protected virtual ILogicalDevicePidULong MakeUiSupportedFeaturesPid()
		{
			//IL_0011: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Expected O, but got Unknown
			return (ILogicalDevicePidULong)new LogicalDevicePidULong((ILogicalDevice)(object)this, PID.LEVELER_UI_SUPPORTED_FEATURES, (LogicalDeviceSessionType)0, (Func<ulong, bool>)null, 72057594037927935uL);
		}

		private void DoUpdateFeatureSupported(object sender, PropertyChangedEventArgs args)
		{
			if (args.PropertyName == "Value" || args.PropertyName == "HasValueBeenLoaded")
			{
				LogicalDevicePidBindableAsyncValue val = (LogicalDevicePidBindableAsyncValue)((sender is LogicalDevicePidBindableAsyncValue) ? sender : null);
				if (val == null || !((BindableAsyncValue<ulong>)(object)val).HasValueBeenLoaded)
				{
					FeatureSupported = FeatureSupport.Unknown;
				}
				else
				{
					FeatureSupported = (FeatureSupport)((BindableAsyncValue<ulong>)(object)val).Value;
				}
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task<ValueTuple<LogicalDeviceLevelerScreenType4, int, int>> GetAutoStepsProgressAsync(CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<GetAutoStepsProgressAsync>d__78 <GetAutoStepsProgressAsync>d__ = default(<GetAutoStepsProgressAsync>d__78);
			<GetAutoStepsProgressAsync>d__.<>t__builder = AsyncTaskMethodBuilder<ValueTuple<LogicalDeviceLevelerScreenType4, int, int>>.Create();
			<GetAutoStepsProgressAsync>d__.<>4__this = this;
			<GetAutoStepsProgressAsync>d__.cancelToken = cancelToken;
			<GetAutoStepsProgressAsync>d__.<>1__state = -1;
			<GetAutoStepsProgressAsync>d__.<>t__builder.Start<<GetAutoStepsProgressAsync>d__78>(ref <GetAutoStepsProgressAsync>d__);
			return <GetAutoStepsProgressAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task UpdateAutoStepsCollectionWithLatestDetails(int expectedStepsCount, BaseObservableCollection<ValueTuple<LogicalDeviceLevelerAutoStepType4, int>> collection, CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<UpdateAutoStepsCollectionWithLatestDetails>d__81 <UpdateAutoStepsCollectionWithLatestDetails>d__ = default(<UpdateAutoStepsCollectionWithLatestDetails>d__81);
			<UpdateAutoStepsCollectionWithLatestDetails>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<UpdateAutoStepsCollectionWithLatestDetails>d__.<>4__this = this;
			<UpdateAutoStepsCollectionWithLatestDetails>d__.expectedStepsCount = expectedStepsCount;
			<UpdateAutoStepsCollectionWithLatestDetails>d__.collection = collection;
			<UpdateAutoStepsCollectionWithLatestDetails>d__.cancelToken = cancelToken;
			<UpdateAutoStepsCollectionWithLatestDetails>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <UpdateAutoStepsCollectionWithLatestDetails>d__.<>t__builder)).Start<<UpdateAutoStepsCollectionWithLatestDetails>d__81>(ref <UpdateAutoStepsCollectionWithLatestDetails>d__);
			return ((AsyncTaskMethodBuilder)(ref <UpdateAutoStepsCollectionWithLatestDetails>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task<List<LogicalDeviceLevelerAutoStepType4>> GetAutoStepListDetailsAsync(int expectedStepsCount, CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<GetAutoStepListDetailsAsync>d__82 <GetAutoStepListDetailsAsync>d__ = default(<GetAutoStepListDetailsAsync>d__82);
			<GetAutoStepListDetailsAsync>d__.<>t__builder = AsyncTaskMethodBuilder<List<LogicalDeviceLevelerAutoStepType4>>.Create();
			<GetAutoStepListDetailsAsync>d__.<>4__this = this;
			<GetAutoStepListDetailsAsync>d__.expectedStepsCount = expectedStepsCount;
			<GetAutoStepListDetailsAsync>d__.cancelToken = cancelToken;
			<GetAutoStepListDetailsAsync>d__.<>1__state = -1;
			<GetAutoStepListDetailsAsync>d__.<>t__builder.Start<<GetAutoStepListDetailsAsync>d__82>(ref <GetAutoStepListDetailsAsync>d__);
			return <GetAutoStepListDetailsAsync>d__.<>t__builder.Task;
		}

		public ILogicalDeviceLightDimmable? GetAssociatedDimmableLight()
		{
			ILogicalDeviceManager deviceManager = ((LogicalDevice<LogicalDeviceLevelerCapabilityType4>)(object)this).DeviceService.DeviceManager;
			List<ILogicalDeviceLightDimmable> val = ((deviceManager != null) ? deviceManager.FindLogicalDevices<ILogicalDeviceLightDimmable>((Func<ILogicalDeviceLightDimmable, bool>)([CompilerGenerated] (ILogicalDeviceLightDimmable ld) => ((ILogicalDevice)ld).LogicalId.ProductMacAddress != null && (PhysicalAddress)(object)((ILogicalDevice)ld).LogicalId.ProductMacAddress == (PhysicalAddress)(object)((LogicalDevice<LogicalDeviceLevelerCapabilityType4>)(object)this).LogicalId.ProductMacAddress)) : null);
			val?.Sort((Comparison<ILogicalDeviceLightDimmable>)delegate(ILogicalDeviceLightDimmable light1, ILogicalDeviceLightDimmable light2)
			{
				if (((ILogicalDevice)light1).LogicalId == null && ((ILogicalDevice)light2).LogicalId == null)
				{
					return 0;
				}
				if (((ILogicalDevice)light1).LogicalId == null)
				{
					return 1;
				}
				return (((ILogicalDevice)light2).LogicalId == null) ? (-1) : ((IComparable)((ILogicalDevice)light1).LogicalId).CompareTo((object)((ILogicalDevice)light2).LogicalId);
			});
			if (val != null && val.Count > 1)
			{
				TaggedLog.Warning("LogicalDeviceLevelerType4", String.Format("{0} associated lights found for Leveler, only 1 is expected.", (object)val.Count), Array.Empty<object>());
			}
			if (val == null)
			{
				return null;
			}
			return Enumerable.FirstOrDefault<ILogicalDeviceLightDimmable>((IEnumerable<ILogicalDeviceLightDimmable>)(object)val);
		}

		public void UpdateDeviceConsoleText(List<string> text)
		{
			lock (_locker)
			{
				LinesRaw.Clear();
				LinesRaw = text;
			}
			UpdateTextConsole((ITextConsole)(object)this);
		}

		public override void Dispose(bool disposing)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Expected O, but got Unknown
			try
			{
				((INotifyPropertyChanged)IdsCanCommandRunner).PropertyChanged -= new PropertyChangedEventHandler(OnIdsCanCommandRunnerPropertyChanged);
			}
			catch (Object)
			{
			}
			CancellationTokenSource commandCancelSource = _commandCancelSource;
			if (commandCancelSource != null)
			{
				CancellationTokenSourceExtension.CancelAndDispose(commandCancelSource);
			}
			_commandCancelSource = null;
			ILogicalDeviceCommandRunnerIdsCan idsCanCommandRunner = IdsCanCommandRunner;
			if (idsCanCommandRunner != null)
			{
				((ICommonDisposable)idsCanCommandRunner).TryDispose();
			}
			LogicalDevicePidBindableAsyncValue? uiSupportedFeaturePidValue = _uiSupportedFeaturePidValue;
			if (uiSupportedFeaturePidValue != null)
			{
				((CommonDisposableNotifyPropertyChanged)uiSupportedFeaturePidValue).TryDispose();
			}
			_uiSupportedFeaturePidValue = null;
			base.Dispose(disposing);
		}

		static LogicalDeviceLevelerType4()
		{
			List<PID> obj = new List<PID>();
			obj.Add(PID.LEVELER_AUTO_PROCESS_STEPS_1);
			obj.Add(PID.LEVELER_AUTO_PROCESS_STEPS_2);
			obj.Add(PID.LEVELER_AUTO_PROCESS_STEPS_3);
			obj.Add(PID.LEVELER_AUTO_PROCESS_STEPS_4);
			obj.Add(PID.LEVELER_AUTO_PROCESS_STEPS_5);
			_autoStepsDetailPidList = obj;
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<LogicalDeviceLevelerCapabilityType4>)(object)this).LastReceivedNetworkStatus;
		}
	}
	public class Leveler4RunnerSim : LogicalDeviceCommandRunnerIdsCanSim<LogicalDeviceLevelerStatusType4>, ITextConsole
	{
		private const string LogTag = "Leveler4RunnerSim";

		private Stack<LogicalDeviceLevelerScreenType4> _screenStack = new Stack<LogicalDeviceLevelerScreenType4>();

		private int _jackManualCount;

		private int _fillCount;

		private int _drainCount;

		private LogicalDeviceLevelerButtonAirSuspensionType4 _buttonAirSuspensionLastKnown;

		public LogicalDeviceLevelerScreenType4 CurrentScreen => LevelerStatus.ScreenSelected;

		[field: CompilerGenerated]
		public LogicalDeviceLevelerStatusType4 LevelerStatus
		{
			[CompilerGenerated]
			get;
		} = new LogicalDeviceLevelerStatusType4();

		public IDevice Device => null;

		public bool IsDetected => true;

		public IReadOnlyList<string> Lines => (IReadOnlyList<string>)(object)LinesRaw;

		[field: CompilerGenerated]
		public List<string> LinesRaw
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		}

		[field: CompilerGenerated]
		public TEXT_CONSOLE_SIZE Size
		{
			[CompilerGenerated]
			get;
		}

		public Leveler4RunnerSim()
		{
			//IL_0051: Unknown result type (might be due to invalid IL or missing references)
			//IL_0056: Unknown result type (might be due to invalid IL or missing references)
			List<string> obj = new List<string>();
			obj.Add("<Empty 1>");
			obj.Add("<Empty 2>");
			obj.Add("<Empty 3>");
			obj.Add("<Empty 4>");
			LinesRaw = obj;
			Size = new TEXT_CONSOLE_SIZE(40, 4);
			base..ctor(new LogicalDeviceLevelerStatusType4(LogicalDeviceLevelerScreenType4.Home));
			LevelerStatus.ScreenSelected = LogicalDeviceLevelerScreenType4.Home;
			SetText("No Test Message Set\nTest Line 2\nTest Line 3\nTest Line 4");
			GotoScreen(LogicalDeviceLevelerScreenType4.Home);
		}

		public static ILogicalDeviceLevelerCommandType4 MakeCommand(byte commandByte, byte[] data, uint dataSize, int responseTimeMs)
		{
			//IL_0040: Unknown result type (might be due to invalid IL or missing references)
			//IL_0145: Unknown result type (might be due to invalid IL or missing references)
			//IL_016c: Unknown result type (might be due to invalid IL or missing references)
			//IL_018f: Unknown result type (might be due to invalid IL or missing references)
			//IL_012c: Unknown result type (might be due to invalid IL or missing references)
			new LogicalDeviceLevelerCommandType4(commandByte, data, responseTimeMs);
			LogicalDeviceLevelerCommandType4.LevelerCommandCode levelerCommandCode = (LogicalDeviceLevelerCommandType4.LevelerCommandCode)commandByte;
			switch (levelerCommandCode)
			{
			case LogicalDeviceLevelerCommandType4.LevelerCommandCode.ButtonPress:
			{
				if (dataSize != 4 || data.Length < 4)
				{
					throw new ArgumentException(String.Format("{0}: Unknown / Unexpected data length for command", (object)levelerCommandCode));
				}
				LogicalDeviceLevelerScreenType4 logicalDeviceLevelerScreenType = (LogicalDeviceLevelerScreenType4)data[0];
				int buttonsPressed = (data[1] << 16) | (data[2] << 8) | data[3];
				switch (logicalDeviceLevelerScreenType)
				{
				case LogicalDeviceLevelerScreenType4.Home:
					return new LogicalDeviceLevelerCommandButtonPressedHomeType4((LogicalDeviceLevelerButtonHomeType4)buttonsPressed, responseTimeMs);
				case LogicalDeviceLevelerScreenType4.AutoLevel:
				case LogicalDeviceLevelerScreenType4.AutoHitch:
				case LogicalDeviceLevelerScreenType4.AutoRetractAllJacks:
				case LogicalDeviceLevelerScreenType4.AutoRetractFrontJacks:
				case LogicalDeviceLevelerScreenType4.AutoRetractRearJacks:
				case LogicalDeviceLevelerScreenType4.AutoHomeJacks:
					return new LogicalDeviceLevelerCommandButtonPressedAutoOperationType4(logicalDeviceLevelerScreenType.ToOperationAuto(), responseTimeMs);
				case LogicalDeviceLevelerScreenType4.JackMovementManual:
					return new LogicalDeviceLevelerCommandButtonPressedJackMovementManualType4((LogicalDeviceLevelerButtonJackMovementManualType4)buttonsPressed, withConsole: false, responseTimeMs);
				case LogicalDeviceLevelerScreenType4.JackMovementManualConsole:
					return new LogicalDeviceLevelerCommandButtonPressedJackMovementManualType4((LogicalDeviceLevelerButtonJackMovementManualType4)buttonsPressed, withConsole: true, responseTimeMs);
				case LogicalDeviceLevelerScreenType4.JackMovementZero:
					return new LogicalDeviceLevelerCommandButtonPressedJackMovementZeroType4((LogicalDeviceLevelerButtonJackMovementZeroType4)buttonsPressed, responseTimeMs);
				case LogicalDeviceLevelerScreenType4.PromptInfo:
					return new LogicalDeviceLevelerCommandButtonPressedPromptInfoType4((LogicalDeviceLevelerButtonOkType4)buttonsPressed, responseTimeMs);
				case LogicalDeviceLevelerScreenType4.PromptYesNo:
					return new LogicalDeviceLevelerCommandButtonPressedPromptYesNoType4((LogicalDeviceLevelerButtonYesNoType4)buttonsPressed, responseTimeMs);
				case LogicalDeviceLevelerScreenType4.PromptAirbagTimeSelect:
					return new LogicalDeviceLevelerCommandButtonPressedPromptAirbagTimeSelectType4((LogicalDeviceLevelerButtonAirbagTimeSelectType4)buttonsPressed, responseTimeMs);
				case LogicalDeviceLevelerScreenType4.PromptFault:
					return new LogicalDeviceLevelerCommandButtonPressedFaultType4((LogicalDeviceLevelerButtonOkType4)buttonsPressed, responseTimeMs);
				case LogicalDeviceLevelerScreenType4.JackMovementFaultManual:
					return new LogicalDeviceLevelerCommandButtonPressedJackMovementFaultManualType4((LogicalDeviceLevelerButtonJackMovementFaultManualType4)buttonsPressed, withConsole: false, responseTimeMs);
				case LogicalDeviceLevelerScreenType4.JackMovementFaultManualConsole:
					return new LogicalDeviceLevelerCommandButtonPressedJackMovementFaultManualType4((LogicalDeviceLevelerButtonJackMovementFaultManualType4)buttonsPressed, withConsole: true, responseTimeMs);
				case LogicalDeviceLevelerScreenType4.AirSuspensionControlManual:
					return new LogicalDeviceLevelerCommandButtonAirSuspensionControlManualType4((LogicalDeviceLevelerButtonAirSuspensionType4)buttonsPressed, responseTimeMs);
				default:
					throw new ArgumentException(String.Format("{0}: Unknown / Unexpected screen {1}", (object)levelerCommandCode, (object)logicalDeviceLevelerScreenType));
				}
			}
			case LogicalDeviceLevelerCommandType4.LevelerCommandCode.Abort:
				if (dataSize != 0)
				{
					throw new ArgumentException(String.Format("{0}: Unknown / Unexpected data length for command", (object)levelerCommandCode));
				}
				return new LogicalDeviceLevelerCommandAbortType4(responseTimeMs);
			case LogicalDeviceLevelerCommandType4.LevelerCommandCode.Back:
				if (dataSize != 1 || data.Length < 1)
				{
					throw new ArgumentException(String.Format("{0}: Unknown / Unexpected data length for command", (object)levelerCommandCode));
				}
				return new LogicalDeviceLevelerCommandBackType4((LogicalDeviceLevelerScreenType4)data[0], responseTimeMs);
			case LogicalDeviceLevelerCommandType4.LevelerCommandCode.Home:
				if (dataSize != 0)
				{
					throw new ArgumentException(String.Format("{0}: Unknown / Unexpected data length for command", (object)levelerCommandCode));
				}
				return new LogicalDeviceLevelerCommandHomeType4(responseTimeMs);
			default:
				TaggedLog.Debug("Leveler4RunnerSim", String.Format("{0}: Unknown / Unexpected command", (object)levelerCommandCode), Array.Empty<object>());
				return null;
			}
		}

		public override Task<CommandResult> SendCommandAsync(byte commandByte, byte[] data, uint dataSize, int responseTimeMs, CancellationToken cancelToken, Func<ILogicalDevice, CommandControl> cmdControl = null, CommandSendOption options = (CommandSendOption)0)
		{
			//IL_07b2: Expected O, but got Unknown
			try
			{
				ILogicalDeviceLevelerCommandType4 logicalDeviceLevelerCommandType = MakeCommand(commandByte, data, dataSize, responseTimeMs);
				if (!(logicalDeviceLevelerCommandType is LogicalDeviceLevelerCommandHomeType4))
				{
					if (!(logicalDeviceLevelerCommandType is LogicalDeviceLevelerCommandAbortType4))
					{
						if (!(logicalDeviceLevelerCommandType is LogicalDeviceLevelerCommandBackType4 logicalDeviceLevelerCommandBackType))
						{
							if (!(logicalDeviceLevelerCommandType is LogicalDeviceLevelerCommandButtonPressedHomeType4 logicalDeviceLevelerCommandButtonPressedHomeType))
							{
								if (!(logicalDeviceLevelerCommandType is LogicalDeviceLevelerCommandButtonPressedAutoOperationType4 logicalDeviceLevelerCommandButtonPressedAutoOperationType))
								{
									if (!(logicalDeviceLevelerCommandType is LogicalDeviceLevelerCommandButtonPressedJackMovementManualType4 logicalDeviceLevelerCommandButtonPressedJackMovementManualType))
									{
										if (!(logicalDeviceLevelerCommandType is LogicalDeviceLevelerCommandButtonPressedJackMovementZeroType4 logicalDeviceLevelerCommandButtonPressedJackMovementZeroType))
										{
											if (!(logicalDeviceLevelerCommandType is LogicalDeviceLevelerCommandButtonPressedPromptInfoType4 logicalDeviceLevelerCommandButtonPressedPromptInfoType))
											{
												if (!(logicalDeviceLevelerCommandType is LogicalDeviceLevelerCommandButtonPressedPromptYesNoType4 logicalDeviceLevelerCommandButtonPressedPromptYesNoType))
												{
													if (!(logicalDeviceLevelerCommandType is LogicalDeviceLevelerCommandButtonPressedPromptAirbagTimeSelectType4 logicalDeviceLevelerCommandButtonPressedPromptAirbagTimeSelectType))
													{
														if (!(logicalDeviceLevelerCommandType is LogicalDeviceLevelerCommandButtonPressedFaultType4 logicalDeviceLevelerCommandButtonPressedFaultType))
														{
															if (!(logicalDeviceLevelerCommandType is LogicalDeviceLevelerCommandButtonPressedJackMovementFaultManualType4 logicalDeviceLevelerCommandButtonPressedJackMovementFaultManualType))
															{
																if (logicalDeviceLevelerCommandType is LogicalDeviceLevelerCommandButtonAirSuspensionControlManualType4 logicalDeviceLevelerCommandButtonAirSuspensionControlManualType)
																{
																	if (logicalDeviceLevelerCommandButtonAirSuspensionControlManualType.ScreenSelected != CurrentScreen)
																	{
																		TaggedLog.Information("Leveler4RunnerSim", String.Format("Button press {0} ignored as {1} doesn't match {2}", (object)EnumExtensions.DebugDumpAsFlags<LogicalDeviceLevelerButtonAirSuspensionType4>(logicalDeviceLevelerCommandButtonAirSuspensionControlManualType.ButtonsPressed), (object)logicalDeviceLevelerCommandButtonAirSuspensionControlManualType.ScreenSelected, (object)CurrentScreen), Array.Empty<object>());
																	}
																	else
																	{
																		if (((Enum)(object)logicalDeviceLevelerCommandButtonAirSuspensionControlManualType.ButtonsPressed).HasFlag((Enum)(object)LogicalDeviceLevelerButtonAirSuspensionType4.Fill))
																		{
																			if (!((Enum)(object)_buttonAirSuspensionLastKnown).HasFlag((Enum)(object)LogicalDeviceLevelerButtonAirSuspensionType4.Fill))
																			{
																				_fillCount++;
																			}
																			LevelerStatus.ButtonsEnabledRaw &= 4294967293u;
																			SetText(String.Format("Air Suspension Filling\nCount = {0}\nEvery 5 will cause fault\n19 will cause controller <Home>", (object)_fillCount));
																			if (_fillCount % 5 == 0)
																			{
																				GotoScreen(LogicalDeviceLevelerScreenType4.PromptFault);
																			}
																			else if (_fillCount == 19)
																			{
																				GotoScreen(LogicalDeviceLevelerScreenType4.Home);
																			}
																		}
																		else if (((Enum)(object)logicalDeviceLevelerCommandButtonAirSuspensionControlManualType.ButtonsPressed).HasFlag((Enum)(object)LogicalDeviceLevelerButtonAirSuspensionType4.Drain))
																		{
																			if (!((Enum)(object)_buttonAirSuspensionLastKnown).HasFlag((Enum)(object)LogicalDeviceLevelerButtonAirSuspensionType4.Drain))
																			{
																				_drainCount++;
																			}
																			LevelerStatus.ButtonsEnabledRaw &= 4294967294u;
																			SetText(String.Format("Air Suspension Draining\nCount = {0} ({1})\nEvery 5 will cause yes/no\n> 10 (on 5's) Prompt Info", (object)_drainCount, (object)(_drainCount % 5)));
																			if (_drainCount % 5 == 0)
																			{
																				if (_drainCount > 11)
																				{
																					GotoScreen(LogicalDeviceLevelerScreenType4.PromptInfo);
																				}
																				else
																				{
																					GotoScreen(LogicalDeviceLevelerScreenType4.PromptYesNo);
																				}
																			}
																		}
																		else
																		{
																			LevelerStatus.ButtonsEnabledRaw |= 3u;
																			SetText("Air Suspension Ready");
																		}
																		_buttonAirSuspensionLastKnown = logicalDeviceLevelerCommandButtonAirSuspensionControlManualType.ButtonsPressed;
																	}
																}
																else
																{
																	TaggedLog.Debug("Leveler4RunnerSim", String.Format("Simulation ignoring command {0}", (object)logicalDeviceLevelerCommandType), Array.Empty<object>());
																}
															}
															else if (logicalDeviceLevelerCommandButtonPressedJackMovementFaultManualType.ScreenSelected != CurrentScreen)
															{
																TaggedLog.Information("Leveler4RunnerSim", String.Format("Button ignored as {0} doesn't match {1}", (object)logicalDeviceLevelerCommandButtonPressedJackMovementFaultManualType.ScreenSelected, (object)CurrentScreen), Array.Empty<object>());
															}
															else if (((Enum)(object)logicalDeviceLevelerCommandButtonPressedJackMovementFaultManualType.ButtonsPressed).HasFlag((Enum)(object)LogicalDeviceLevelerButtonJackMovementFaultManualType4.AutoRetract))
															{
																GotoAutoOperation(LogicalDeviceLevelerOperationAutoType4.AutoRetractAllJacks);
															}
														}
														else if (logicalDeviceLevelerCommandButtonPressedFaultType.ScreenSelected != CurrentScreen)
														{
															TaggedLog.Information("Leveler4RunnerSim", String.Format("Button Press ignored as {0} doesn't match {1}", (object)logicalDeviceLevelerCommandButtonPressedFaultType.ScreenSelected, (object)CurrentScreen), Array.Empty<object>());
														}
														else if (((Enum)(object)logicalDeviceLevelerCommandButtonPressedFaultType.ButtonsPressed).HasFlag((Enum)(object)LogicalDeviceLevelerButtonOkType4.Ok))
														{
															Back();
														}
													}
													else if (logicalDeviceLevelerCommandButtonPressedPromptAirbagTimeSelectType.ScreenSelected != CurrentScreen)
													{
														TaggedLog.Information("Leveler4RunnerSim", String.Format("Button Press ignored as {0} doesn't match {1}", (object)logicalDeviceLevelerCommandButtonPressedPromptAirbagTimeSelectType.ScreenSelected, (object)CurrentScreen), Array.Empty<object>());
													}
													else if (((Enum)(object)logicalDeviceLevelerCommandButtonPressedPromptAirbagTimeSelectType.ButtonsPressed).HasFlag((Enum)(object)LogicalDeviceLevelerButtonAirbagTimeSelectType4.Short) || ((Enum)(object)logicalDeviceLevelerCommandButtonPressedPromptAirbagTimeSelectType.ButtonsPressed).HasFlag((Enum)(object)LogicalDeviceLevelerButtonAirbagTimeSelectType4.Long))
													{
														Back();
													}
												}
												else if (logicalDeviceLevelerCommandButtonPressedPromptYesNoType.ScreenSelected != CurrentScreen)
												{
													TaggedLog.Information("Leveler4RunnerSim", String.Format("Button Press ignored as {0} doesn't match {1}", (object)logicalDeviceLevelerCommandButtonPressedPromptYesNoType.ScreenSelected, (object)CurrentScreen), Array.Empty<object>());
												}
												else if (((Enum)(object)logicalDeviceLevelerCommandButtonPressedPromptYesNoType.ButtonsPressed).HasFlag((Enum)(object)LogicalDeviceLevelerButtonYesNoType4.Yes) || ((Enum)(object)logicalDeviceLevelerCommandButtonPressedPromptYesNoType.ButtonsPressed).HasFlag((Enum)(object)LogicalDeviceLevelerButtonYesNoType4.No))
												{
													Back();
												}
											}
											else if (logicalDeviceLevelerCommandButtonPressedPromptInfoType.ScreenSelected != CurrentScreen)
											{
												TaggedLog.Information("Leveler4RunnerSim", String.Format("Button Press ignored as {0} doesn't match {1}", (object)logicalDeviceLevelerCommandButtonPressedPromptInfoType.ScreenSelected, (object)CurrentScreen), Array.Empty<object>());
											}
											else if (((Enum)(object)logicalDeviceLevelerCommandButtonPressedPromptInfoType.ButtonsPressed).HasFlag((Enum)(object)LogicalDeviceLevelerButtonOkType4.Ok))
											{
												Back();
											}
										}
										else if (logicalDeviceLevelerCommandButtonPressedJackMovementZeroType.ScreenSelected != CurrentScreen)
										{
											TaggedLog.Information("Leveler4RunnerSim", String.Format("Button ignored as {0} doesn't match {1}", (object)logicalDeviceLevelerCommandButtonPressedJackMovementZeroType.ScreenSelected, (object)CurrentScreen), Array.Empty<object>());
										}
									}
									else if (logicalDeviceLevelerCommandButtonPressedJackMovementManualType.ScreenSelected != CurrentScreen)
									{
										TaggedLog.Information("Leveler4RunnerSim", String.Format("Button Press ignored as {0} doesn't match {1}", (object)logicalDeviceLevelerCommandButtonPressedJackMovementManualType.ScreenSelected, (object)CurrentScreen), Array.Empty<object>());
									}
								}
								else if (logicalDeviceLevelerCommandButtonPressedAutoOperationType.ScreenSelected != CurrentScreen)
								{
									TaggedLog.Information("Leveler4RunnerSim", String.Format("Button ignored as {0} doesn't match {1}", (object)logicalDeviceLevelerCommandButtonPressedAutoOperationType.ScreenSelected, (object)CurrentScreen), Array.Empty<object>());
								}
							}
							else if (logicalDeviceLevelerCommandButtonPressedHomeType.ScreenSelected != CurrentScreen)
							{
								TaggedLog.Information("Leveler4RunnerSim", String.Format("Button ignored as {0} doesn't match {1}", (object)logicalDeviceLevelerCommandButtonPressedHomeType.ScreenSelected, (object)CurrentScreen), Array.Empty<object>());
							}
							else
							{
								switch (logicalDeviceLevelerCommandButtonPressedHomeType.ButtonsPressed)
								{
								case LogicalDeviceLevelerButtonHomeType4.AutoLevel:
									GotoScreen(LogicalDeviceLevelerScreenType4.AutoLevel);
									SetText("Auto Level");
									break;
								case LogicalDeviceLevelerButtonHomeType4.AutoHitch:
									GotoScreen(LogicalDeviceLevelerScreenType4.AutoHitch);
									SetText("Auto Hitch");
									break;
								case LogicalDeviceLevelerButtonHomeType4.AutoRetractAllJacks:
									GotoScreen(LogicalDeviceLevelerScreenType4.AutoRetractAllJacks);
									SetText("Auto Retract\nAll Jacks");
									break;
								case LogicalDeviceLevelerButtonHomeType4.AutoRetractFrontJacks:
									GotoScreen(LogicalDeviceLevelerScreenType4.AutoRetractFrontJacks);
									SetText("Auto Retract\nFront Jacks");
									break;
								case LogicalDeviceLevelerButtonHomeType4.AutoRetractRearJacks:
									GotoScreen(LogicalDeviceLevelerScreenType4.AutoRetractRearJacks);
									SetText("Auto Retract\nRear Jacks");
									break;
								case LogicalDeviceLevelerButtonHomeType4.ManualMode:
									GotoJackMovementManual(console: false);
									break;
								case LogicalDeviceLevelerButtonHomeType4.ManualAirSuspension:
									GotoJackManualAirSuspension();
									break;
								case LogicalDeviceLevelerButtonHomeType4.ZeroMode:
									GotoJackMovementZero();
									break;
								case LogicalDeviceLevelerButtonHomeType4.AutoHomeJacks:
									GoToAutoHomeJacks(displayPrompt: true);
									break;
								case LogicalDeviceLevelerButtonHomeType4.RfConfig:
									GotoJackPromptYesNo("RfConfig\nWould you like to pair?");
									break;
								}
							}
						}
						else if (logicalDeviceLevelerCommandBackType.ScreenSelected != CurrentScreen)
						{
							TaggedLog.Information("Leveler4RunnerSim", String.Format("Button ignored as {0} doesn't match {1}", (object)logicalDeviceLevelerCommandBackType.ScreenSelected, (object)CurrentScreen), Array.Empty<object>());
						}
						else
						{
							Back();
						}
					}
					else
					{
						GotoScreen(LogicalDeviceLevelerScreenType4.Home);
					}
				}
				else
				{
					GotoScreen(LogicalDeviceLevelerScreenType4.Home);
				}
			}
			catch (Exception ex)
			{
				Exception ex2 = ex;
				TaggedLog.Warning("Leveler4RunnerSim", String.Format("{0}: SendCommandAsync failed {1}", (object)CurrentScreen, (object)ex2.Message), Array.Empty<object>());
				throw;
			}
			return Task.FromResult<CommandResult>((CommandResult)0);
		}

		private void SetText(string text)
		{
			//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
			//IL_005d: Unknown result type (might be due to invalid IL or missing references)
			lock (Lines)
			{
				string[] array = (string[])(((object)((text != null) ? text.Split((char[])(object)new Char[1] { (Char)10 }) : null)) ?? ((object)new String[1] { "<Empty 1>" }));
				for (int i = 0; i < Size.Height; i++)
				{
					string text2 = StringExtension.Truncate((i >= array.Length) ? String.Format("<Empty {0}>", (object)(i + 1)) : array[i], Size.Width, "");
					if (i >= LinesRaw.Count)
					{
						LinesRaw.Add(text2);
					}
					else
					{
						LinesRaw[i] = text2;
					}
				}
			}
		}

		public void GotoScreen(LogicalDeviceLevelerScreenType4 screen)
		{
			switch (screen)
			{
			case LogicalDeviceLevelerScreenType4.Home:
				GotoHome();
				break;
			case LogicalDeviceLevelerScreenType4.AutoLevel:
			case LogicalDeviceLevelerScreenType4.AutoHitch:
			case LogicalDeviceLevelerScreenType4.AutoRetractAllJacks:
			case LogicalDeviceLevelerScreenType4.AutoRetractFrontJacks:
			case LogicalDeviceLevelerScreenType4.AutoRetractRearJacks:
				GotoAutoOperation(screen.ToOperationAuto());
				break;
			case LogicalDeviceLevelerScreenType4.AutoHomeJacks:
				GoToAutoHomeJacks(displayPrompt: false);
				break;
			case LogicalDeviceLevelerScreenType4.JackMovementManual:
				GotoJackMovementManual(console: false);
				break;
			case LogicalDeviceLevelerScreenType4.JackMovementManualConsole:
				GotoJackMovementManual(console: true);
				break;
			case LogicalDeviceLevelerScreenType4.JackMovementZero:
				GotoJackMovementZero();
				break;
			case LogicalDeviceLevelerScreenType4.PromptInfo:
				GotoJackPromptInfo();
				break;
			case LogicalDeviceLevelerScreenType4.PromptYesNo:
				GotoJackPromptYesNo();
				break;
			case LogicalDeviceLevelerScreenType4.PromptFault:
				GotoJackPromptFault();
				break;
			case LogicalDeviceLevelerScreenType4.JackMovementFaultManual:
				GotoJackMovementFaultManual(console: false);
				break;
			case LogicalDeviceLevelerScreenType4.JackMovementFaultManualConsole:
				GotoJackMovementFaultManual(console: true);
				break;
			case LogicalDeviceLevelerScreenType4.AirSuspensionControlManual:
				GotoJackManualAirSuspension();
				break;
			case LogicalDeviceLevelerScreenType4.Unknown:
				SetText(String.Format("Unknown Screen {0}", (object)screen));
				break;
			}
		}

		public void Back()
		{
			if (_screenStack.Count == 0)
			{
				GotoScreen(LogicalDeviceLevelerScreenType4.Home);
				return;
			}
			_screenStack.Pop();
			GotoScreen((_screenStack.Count != 0) ? _screenStack.Peek() : LogicalDeviceLevelerScreenType4.Home);
		}

		public void GotoHome()
		{
			_screenStack.Clear();
			LevelerStatus.ScreenSelected = LogicalDeviceLevelerScreenType4.Home;
			LogicalDeviceLevelerButtonHomeType4 logicalDeviceLevelerButtonHomeType = LogicalDeviceLevelerButtonHomeType4.None;
			logicalDeviceLevelerButtonHomeType |= LogicalDeviceLevelerButtonHomeType4.AutoLevel;
			logicalDeviceLevelerButtonHomeType |= LogicalDeviceLevelerButtonHomeType4.AutoHitch;
			logicalDeviceLevelerButtonHomeType |= LogicalDeviceLevelerButtonHomeType4.AutoRetractAllJacks;
			logicalDeviceLevelerButtonHomeType |= LogicalDeviceLevelerButtonHomeType4.AutoRetractRearJacks;
			logicalDeviceLevelerButtonHomeType |= LogicalDeviceLevelerButtonHomeType4.ManualMode;
			logicalDeviceLevelerButtonHomeType |= LogicalDeviceLevelerButtonHomeType4.ManualAirSuspension;
			logicalDeviceLevelerButtonHomeType |= LogicalDeviceLevelerButtonHomeType4.ZeroMode;
			logicalDeviceLevelerButtonHomeType |= LogicalDeviceLevelerButtonHomeType4.AutoHomeJacks;
			logicalDeviceLevelerButtonHomeType |= LogicalDeviceLevelerButtonHomeType4.RfConfig;
			LevelerStatus.ButtonsEnabledRaw = (uint)logicalDeviceLevelerButtonHomeType;
			LevelerStatus.IsLevel = true;
			LevelerStatus.AreJacksFullyRetracted = false;
			LevelerStatus.AreJacksGrounded = true;
			LevelerStatus.AreJacksMoving = false;
			LevelerStatus.IsExcessAngleDetected = false;
			LevelerStatus.IsExcessTwistDetected = false;
			SetText("Home");
		}

		public void GotoAutoOperation(LogicalDeviceLevelerOperationAutoType4 operationAuto)
		{
			LevelerStatus.ScreenSelected = operationAuto.ToScreen();
			_screenStack.Push(LevelerStatus.ScreenSelected);
			LogicalDeviceLevelerButtonNoneType4 buttonsEnabledRaw = LogicalDeviceLevelerButtonNoneType4.None;
			LevelerStatus.ButtonsEnabledRaw = (uint)buttonsEnabledRaw;
			LevelerStatus.IsLevel = false;
			LevelerStatus.AreJacksFullyRetracted = false;
			LevelerStatus.AreJacksGrounded = false;
			LevelerStatus.AreJacksMoving = true;
			LevelerStatus.IsExcessAngleDetected = false;
			LevelerStatus.IsExcessTwistDetected = false;
			SetText(String.Format("Auto Operation\n{0}", (object)operationAuto));
		}

		public void GoToAutoHomeJacks(bool displayPrompt)
		{
			if (displayPrompt)
			{
				LevelerStatus.ScreenSelected = LogicalDeviceLevelerScreenType4.AutoHomeJacks;
				_screenStack.Push(LevelerStatus.ScreenSelected);
				GotoJackPromptYesNo("Auto Home Jacks\nWould you like to begin?\n \n ");
			}
			else
			{
				GotoAutoOperation(LogicalDeviceLevelerOperationAutoType4.AutoHomeJacks);
			}
		}

		public void GotoJackMovementManual(bool console)
		{
			if (!console)
			{
				_jackManualCount++;
				if (_jackManualCount % 4 == 0)
				{
					GotoJackMovementFaultManual(console: true);
					return;
				}
				if (_jackManualCount % 6 == 0)
				{
					GotoJackMovementManual(console: true);
					return;
				}
			}
			LevelerStatus.ScreenSelected = (console ? LogicalDeviceLevelerScreenType4.JackMovementManualConsole : LogicalDeviceLevelerScreenType4.JackMovementManual);
			_screenStack.Push(LevelerStatus.ScreenSelected);
			LogicalDeviceLevelerButtonJackMovementManualType4 logicalDeviceLevelerButtonJackMovementManualType = LogicalDeviceLevelerButtonJackMovementManualType4.None;
			logicalDeviceLevelerButtonJackMovementManualType |= LogicalDeviceLevelerButtonJackMovementManualType4.JackRightFrontExtend;
			logicalDeviceLevelerButtonJackMovementManualType |= LogicalDeviceLevelerButtonJackMovementManualType4.JackRightFrontRetract;
			logicalDeviceLevelerButtonJackMovementManualType |= LogicalDeviceLevelerButtonJackMovementManualType4.JackLeftFrontExtend;
			logicalDeviceLevelerButtonJackMovementManualType |= LogicalDeviceLevelerButtonJackMovementManualType4.JackLeftFrontRetract;
			logicalDeviceLevelerButtonJackMovementManualType |= LogicalDeviceLevelerButtonJackMovementManualType4.JackRightRearExtend;
			logicalDeviceLevelerButtonJackMovementManualType |= LogicalDeviceLevelerButtonJackMovementManualType4.JackRightRearRetract;
			logicalDeviceLevelerButtonJackMovementManualType |= LogicalDeviceLevelerButtonJackMovementManualType4.JackLeftRearExtend;
			logicalDeviceLevelerButtonJackMovementManualType |= LogicalDeviceLevelerButtonJackMovementManualType4.JackLeftRearRetract;
			logicalDeviceLevelerButtonJackMovementManualType |= LogicalDeviceLevelerButtonJackMovementManualType4.JackTongueExtend;
			logicalDeviceLevelerButtonJackMovementManualType |= LogicalDeviceLevelerButtonJackMovementManualType4.JackTongueRetract;
			LevelerStatus.ButtonsEnabledRaw = (uint)logicalDeviceLevelerButtonJackMovementManualType;
			LevelerStatus.IsLevel = false;
			LevelerStatus.AreJacksFullyRetracted = false;
			LevelerStatus.AreJacksGrounded = false;
			LevelerStatus.AreJacksMoving = false;
			LevelerStatus.IsExcessAngleDetected = false;
			LevelerStatus.IsExcessTwistDetected = false;
			if (console)
			{
				SetText("Movement Manual\nWith Console");
			}
			else
			{
				SetText("Movement Manual\nNo Console");
			}
		}

		public void GotoJackMovementZero()
		{
			LevelerStatus.ScreenSelected = LogicalDeviceLevelerScreenType4.JackMovementZero;
			_screenStack.Push(LevelerStatus.ScreenSelected);
			LogicalDeviceLevelerButtonJackMovementZeroType4 logicalDeviceLevelerButtonJackMovementZeroType = LogicalDeviceLevelerButtonJackMovementZeroType4.None;
			logicalDeviceLevelerButtonJackMovementZeroType |= LogicalDeviceLevelerButtonJackMovementZeroType4.JackRightFrontExtend;
			logicalDeviceLevelerButtonJackMovementZeroType |= LogicalDeviceLevelerButtonJackMovementZeroType4.JackRightFrontRetract;
			logicalDeviceLevelerButtonJackMovementZeroType |= LogicalDeviceLevelerButtonJackMovementZeroType4.JackLeftFrontExtend;
			logicalDeviceLevelerButtonJackMovementZeroType |= LogicalDeviceLevelerButtonJackMovementZeroType4.JackLeftFrontRetract;
			logicalDeviceLevelerButtonJackMovementZeroType |= LogicalDeviceLevelerButtonJackMovementZeroType4.JackRightRearExtend;
			logicalDeviceLevelerButtonJackMovementZeroType |= LogicalDeviceLevelerButtonJackMovementZeroType4.JackRightRearRetract;
			logicalDeviceLevelerButtonJackMovementZeroType |= LogicalDeviceLevelerButtonJackMovementZeroType4.JackLeftRearExtend;
			logicalDeviceLevelerButtonJackMovementZeroType |= LogicalDeviceLevelerButtonJackMovementZeroType4.JackLeftRearRetract;
			logicalDeviceLevelerButtonJackMovementZeroType |= LogicalDeviceLevelerButtonJackMovementZeroType4.JackTongueExtend;
			logicalDeviceLevelerButtonJackMovementZeroType |= LogicalDeviceLevelerButtonJackMovementZeroType4.JackTongueRetract;
			logicalDeviceLevelerButtonJackMovementZeroType |= LogicalDeviceLevelerButtonJackMovementZeroType4.SetZeroPoint;
			LevelerStatus.ButtonsEnabledRaw = (uint)logicalDeviceLevelerButtonJackMovementZeroType;
			LevelerStatus.IsLevel = false;
			LevelerStatus.AreJacksFullyRetracted = false;
			LevelerStatus.AreJacksGrounded = false;
			LevelerStatus.AreJacksMoving = false;
			LevelerStatus.IsExcessAngleDetected = false;
			LevelerStatus.IsExcessTwistDetected = false;
			SetText("Movement Zero");
		}

		public void GotoJackPromptInfo()
		{
			LevelerStatus.ScreenSelected = LogicalDeviceLevelerScreenType4.PromptInfo;
			_screenStack.Push(LevelerStatus.ScreenSelected);
			LogicalDeviceLevelerButtonOkType4 logicalDeviceLevelerButtonOkType = LogicalDeviceLevelerButtonOkType4.None;
			logicalDeviceLevelerButtonOkType |= LogicalDeviceLevelerButtonOkType4.Ok;
			LevelerStatus.ButtonsEnabledRaw = (uint)logicalDeviceLevelerButtonOkType;
			LevelerStatus.IsLevel = false;
			LevelerStatus.AreJacksFullyRetracted = false;
			LevelerStatus.AreJacksGrounded = false;
			LevelerStatus.AreJacksMoving = false;
			LevelerStatus.IsExcessAngleDetected = false;
			LevelerStatus.IsExcessTwistDetected = false;
			SetText("Please press OK\nThis was a standard prompt test!");
		}

		public void GotoJackPromptYesNo(string prompt = null)
		{
			LevelerStatus.ScreenSelected = LogicalDeviceLevelerScreenType4.PromptYesNo;
			_screenStack.Push(LevelerStatus.ScreenSelected);
			LogicalDeviceLevelerButtonYesNoType4 logicalDeviceLevelerButtonYesNoType = LogicalDeviceLevelerButtonYesNoType4.None;
			logicalDeviceLevelerButtonYesNoType |= LogicalDeviceLevelerButtonYesNoType4.Yes;
			logicalDeviceLevelerButtonYesNoType |= LogicalDeviceLevelerButtonYesNoType4.No;
			LevelerStatus.ButtonsEnabledRaw = (uint)logicalDeviceLevelerButtonYesNoType;
			LevelerStatus.IsLevel = false;
			LevelerStatus.AreJacksFullyRetracted = false;
			LevelerStatus.AreJacksGrounded = false;
			LevelerStatus.AreJacksMoving = false;
			LevelerStatus.IsExcessAngleDetected = false;
			LevelerStatus.IsExcessTwistDetected = false;
			SetText(prompt ?? "Choose Yes or No\nThis was a standard yes/no prompt test!");
		}

		public void GotoAirbagTimePrompt(string prompt = null)
		{
			LevelerStatus.ScreenSelected = LogicalDeviceLevelerScreenType4.PromptAirbagTimeSelect;
			_screenStack.Push(LevelerStatus.ScreenSelected);
			LogicalDeviceLevelerButtonAirbagTimeSelectType4 logicalDeviceLevelerButtonAirbagTimeSelectType = LogicalDeviceLevelerButtonAirbagTimeSelectType4.None;
			logicalDeviceLevelerButtonAirbagTimeSelectType |= LogicalDeviceLevelerButtonAirbagTimeSelectType4.Short;
			logicalDeviceLevelerButtonAirbagTimeSelectType |= LogicalDeviceLevelerButtonAirbagTimeSelectType4.Long;
			LevelerStatus.ButtonsEnabledRaw = (uint)logicalDeviceLevelerButtonAirbagTimeSelectType;
			LevelerStatus.IsLevel = false;
			LevelerStatus.AreJacksFullyRetracted = false;
			LevelerStatus.AreJacksGrounded = false;
			LevelerStatus.AreJacksMoving = false;
			LevelerStatus.IsExcessAngleDetected = false;
			LevelerStatus.IsExcessTwistDetected = false;
			SetText(prompt ?? "Choose short or long\nThis was a standard short/long prompt!");
		}

		public void GotoJackPromptFault()
		{
			LevelerStatus.ScreenSelected = LogicalDeviceLevelerScreenType4.PromptFault;
			_screenStack.Push(LevelerStatus.ScreenSelected);
			LogicalDeviceLevelerButtonOkType4 logicalDeviceLevelerButtonOkType = LogicalDeviceLevelerButtonOkType4.None;
			logicalDeviceLevelerButtonOkType |= LogicalDeviceLevelerButtonOkType4.Ok;
			LevelerStatus.ButtonsEnabledRaw = (uint)logicalDeviceLevelerButtonOkType;
			LevelerStatus.IsLevel = false;
			LevelerStatus.AreJacksFullyRetracted = false;
			LevelerStatus.AreJacksGrounded = false;
			LevelerStatus.AreJacksMoving = false;
			LevelerStatus.IsExcessAngleDetected = false;
			LevelerStatus.IsExcessTwistDetected = false;
			SetText("Please press OK\nThis was a WARNING/FAULT\nprompt test!");
		}

		public void GotoJackMovementFaultManual(bool console)
		{
			LevelerStatus.ScreenSelected = (console ? LogicalDeviceLevelerScreenType4.JackMovementFaultManualConsole : LogicalDeviceLevelerScreenType4.JackMovementFaultManual);
			_screenStack.Push(LevelerStatus.ScreenSelected);
			LogicalDeviceLevelerButtonJackMovementFaultManualType4 logicalDeviceLevelerButtonJackMovementFaultManualType = LogicalDeviceLevelerButtonJackMovementFaultManualType4.None;
			logicalDeviceLevelerButtonJackMovementFaultManualType |= LogicalDeviceLevelerButtonJackMovementFaultManualType4.JackRightFrontExtend;
			logicalDeviceLevelerButtonJackMovementFaultManualType |= LogicalDeviceLevelerButtonJackMovementFaultManualType4.JackRightFrontRetract;
			logicalDeviceLevelerButtonJackMovementFaultManualType |= LogicalDeviceLevelerButtonJackMovementFaultManualType4.JackLeftFrontExtend;
			logicalDeviceLevelerButtonJackMovementFaultManualType |= LogicalDeviceLevelerButtonJackMovementFaultManualType4.JackLeftFrontRetract;
			logicalDeviceLevelerButtonJackMovementFaultManualType |= LogicalDeviceLevelerButtonJackMovementFaultManualType4.JackRightRearExtend;
			logicalDeviceLevelerButtonJackMovementFaultManualType |= LogicalDeviceLevelerButtonJackMovementFaultManualType4.JackRightRearRetract;
			logicalDeviceLevelerButtonJackMovementFaultManualType |= LogicalDeviceLevelerButtonJackMovementFaultManualType4.JackLeftRearExtend;
			logicalDeviceLevelerButtonJackMovementFaultManualType |= LogicalDeviceLevelerButtonJackMovementFaultManualType4.JackLeftRearRetract;
			logicalDeviceLevelerButtonJackMovementFaultManualType |= LogicalDeviceLevelerButtonJackMovementFaultManualType4.JackTongueExtend;
			logicalDeviceLevelerButtonJackMovementFaultManualType |= LogicalDeviceLevelerButtonJackMovementFaultManualType4.JackTongueRetract;
			logicalDeviceLevelerButtonJackMovementFaultManualType |= LogicalDeviceLevelerButtonJackMovementFaultManualType4.JackRightMiddleExtend;
			logicalDeviceLevelerButtonJackMovementFaultManualType |= LogicalDeviceLevelerButtonJackMovementFaultManualType4.JackRightMiddleRetract;
			logicalDeviceLevelerButtonJackMovementFaultManualType |= LogicalDeviceLevelerButtonJackMovementFaultManualType4.JackLeftMiddleExtend;
			logicalDeviceLevelerButtonJackMovementFaultManualType |= LogicalDeviceLevelerButtonJackMovementFaultManualType4.JackLeftMiddleRetract;
			logicalDeviceLevelerButtonJackMovementFaultManualType |= LogicalDeviceLevelerButtonJackMovementFaultManualType4.AutoRetract;
			LevelerStatus.ButtonsEnabledRaw = (uint)logicalDeviceLevelerButtonJackMovementFaultManualType;
			LevelerStatus.IsLevel = false;
			LevelerStatus.AreJacksFullyRetracted = false;
			LevelerStatus.AreJacksGrounded = false;
			LevelerStatus.AreJacksMoving = false;
			LevelerStatus.IsExcessAngleDetected = false;
			LevelerStatus.IsExcessTwistDetected = false;
			SetText("Movement Fault Manual\nWith Console");
		}

		public void GotoJackManualAirSuspension()
		{
			LevelerStatus.ScreenSelected = LogicalDeviceLevelerScreenType4.AirSuspensionControlManual;
			_screenStack.Push(LevelerStatus.ScreenSelected);
			LogicalDeviceLevelerButtonAirSuspensionType4 logicalDeviceLevelerButtonAirSuspensionType = LogicalDeviceLevelerButtonAirSuspensionType4.None;
			logicalDeviceLevelerButtonAirSuspensionType |= LogicalDeviceLevelerButtonAirSuspensionType4.Fill;
			logicalDeviceLevelerButtonAirSuspensionType |= LogicalDeviceLevelerButtonAirSuspensionType4.Drain;
			LevelerStatus.ButtonsEnabledRaw = (uint)logicalDeviceLevelerButtonAirSuspensionType;
			LevelerStatus.IsLevel = false;
			LevelerStatus.AreJacksFullyRetracted = false;
			LevelerStatus.AreJacksGrounded = false;
			LevelerStatus.AreJacksMoving = false;
			LevelerStatus.IsExcessAngleDetected = false;
			LevelerStatus.IsExcessTwistDetected = false;
			SetText("Air Suspension\nReady\n");
		}
	}
	public class LogicalDeviceLevelerType4Sim : LogicalDeviceLevelerType4, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass10_0 : Object
		{
			[StructLayout((LayoutKind)3)]
			private struct <<-ctor>b__0>d : ValueType, IAsyncStateMachine
			{
				public int <>1__state;

				public AsyncTaskMethodBuilder <>t__builder;

				public <>c__DisplayClass10_0 <>4__this;

				private TaskAwaiter<bool> <>u__1;

				private void MoveNext()
				{
					//IL_0133: Expected O, but got Unknown
					//IL_00f6: Unknown result type (might be due to invalid IL or missing references)
					//IL_00fb: Unknown result type (might be due to invalid IL or missing references)
					//IL_0103: Unknown result type (might be due to invalid IL or missing references)
					//IL_003b: Unknown result type (might be due to invalid IL or missing references)
					//IL_0040: Unknown result type (might be due to invalid IL or missing references)
					//IL_0042: Unknown result type (might be due to invalid IL or missing references)
					//IL_004d: Unknown result type (might be due to invalid IL or missing references)
					//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
					//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
					//IL_00c9: Unknown result type (might be due to invalid IL or missing references)
					//IL_00de: Unknown result type (might be due to invalid IL or missing references)
					//IL_00e0: Unknown result type (might be due to invalid IL or missing references)
					int num = <>1__state;
					<>c__DisplayClass10_0 <>c__DisplayClass10_ = <>4__this;
					try
					{
						if (num != 0)
						{
							goto IL_011a;
						}
						TaskAwaiter<bool> val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_0112;
						IL_0112:
						val.GetResult();
						goto IL_011a;
						IL_011a:
						if (!<>c__DisplayClass10_.<>4__this._levelerSimTaskCancelSource.IsCancellationRequested)
						{
							LogicalDeviceLevelerStatusType4 levelerStatus = <>c__DisplayClass10_.runnerSim.LevelerStatus;
							LogicalDeviceLevelerStatusType4 levelerStatus2 = <>c__DisplayClass10_.runnerSim.LevelerStatus;
							ValueTuple<float, float> val2 = <>c__DisplayClass10_.<>4__this._bubbleLevel.UpdateAngle();
							levelerStatus.XAngle = val2.Item1;
							levelerStatus2.YAngle = val2.Item2;
							if (<>c__DisplayClass10_.<>4__this._autoLevelComplete)
							{
								<>c__DisplayClass10_.runnerSim.GotoHome();
								<>c__DisplayClass10_.<>4__this._autoLevelComplete = false;
							}
							((LogicalDevice<LogicalDeviceLevelerStatusType4, LogicalDeviceLevelerCapabilityType4>)(object)<>c__DisplayClass10_.<>4__this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)<>c__DisplayClass10_.runnerSim.LevelerStatus).Data, 8u);
							<>c__DisplayClass10_.<>4__this.UpdateTextConsole((ITextConsole)(object)<>c__DisplayClass10_.runnerSim);
							val = TaskExtension.TryDelay(250, <>c__DisplayClass10_.<>4__this._levelerSimTaskCancelSource.Token).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<-ctor>b__0>d>(ref val, ref this);
								return;
							}
							goto IL_0112;
						}
					}
					catch (Exception ex)
					{
						Exception exception = ex;
						<>1__state = -2;
						((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
						return;
					}
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
				}

				[DebuggerHidden]
				private void SetStateMachine(IAsyncStateMachine stateMachine)
				{
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
				}
			}

			public LogicalDeviceLevelerType4Sim <>4__this;

			public Leveler4RunnerSim runnerSim;

			[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
			internal Task <.ctor>b__0()
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<-ctor>b__0>d <<-ctor>b__0>d = default(<<-ctor>b__0>d);
				<<-ctor>b__0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<-ctor>b__0>d.<>4__this = this;
				<<-ctor>b__0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<-ctor>b__0>d.<>t__builder)).Start<<<-ctor>b__0>d>(ref <<-ctor>b__0>d);
				return ((AsyncTaskMethodBuilder)(ref <<-ctor>b__0>d.<>t__builder)).Task;
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass18_0 : Object
		{
			public BaseObservableCollection<ValueTuple<LogicalDeviceLevelerAutoStepType4, int>> collection;

			public LogicalDeviceLevelerType4Sim <>4__this;

			internal void <UpdateAutoStepsCollectionWithLatestDetails>b__0()
			{
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				//IL_000c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				SuppressEventsDisposable<ValueTuple<LogicalDeviceLevelerAutoStepType4, int>> val = collection.SuppressEvents(false);
				try
				{
					((Collection<ValueTuple<LogicalDeviceLevelerAutoStepType4, int>>)(object)collection).Clear();
					int num = 0;
					IEnumerator<LogicalDeviceLevelerAutoStepType4> enumerator = ((Collection<LogicalDeviceLevelerAutoStepType4>)(object)<>4__this._stepCollection).GetEnumerator();
					try
					{
						while (((IEnumerator)enumerator).MoveNext())
						{
							LogicalDeviceLevelerAutoStepType4 current = enumerator.Current;
							((Collection<ValueTuple<LogicalDeviceLevelerAutoStepType4, int>>)(object)collection).Add(new ValueTuple<LogicalDeviceLevelerAutoStepType4, int>(current, num++));
						}
					}
					finally
					{
						if (enumerator != null)
						{
							((IDisposable)enumerator).Dispose();
						}
					}
				}
				finally
				{
					((IDisposable)val/*cast due to .constrained prefix*/).Dispose();
				}
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <UpdateAutoStepsCollectionWithLatestDetails>d__18 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public BaseObservableCollection<ValueTuple<LogicalDeviceLevelerAutoStepType4, int>> collection;

			public LogicalDeviceLevelerType4Sim <>4__this;

			public CancellationToken cancelToken;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_00fa: Expected O, but got Unknown
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_0076: Unknown result type (might be due to invalid IL or missing references)
				//IL_007d: Unknown result type (might be due to invalid IL or missing references)
				//IL_009a: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Expected O, but got Unknown
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0043: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bd: Unknown result type (might be due to invalid IL or missing references)
				//IL_00be: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_0058: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				try
				{
					TaskAwaiter<bool> val;
					if (num != 0)
					{
						if (num == 1)
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_00ef;
						}
						val = MainThread.RequestMainThreadActionAsync(new Action(new <>c__DisplayClass18_0
						{
							collection = collection,
							<>4__this = <>4__this
						}.<UpdateAutoStepsCollectionWithLatestDetails>b__0)).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <UpdateAutoStepsCollectionWithLatestDetails>d__18>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
					}
					val.GetResult();
					val = TaskExtension.TryDelay(1000, cancelToken).GetAwaiter();
					if (!val.IsCompleted)
					{
						num = (<>1__state = 1);
						<>u__1 = val;
						((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <UpdateAutoStepsCollectionWithLatestDetails>d__18>(ref val, ref this);
						return;
					}
					goto IL_00ef;
					IL_00ef:
					val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private CancellationTokenSource _levelerSimTaskCancelSource = new CancellationTokenSource();

		public const int TickIntervalMs = 250;

		private bool _autoLevelComplete;

		private const int UpdateAutoStepsDelay = 1000;

		private readonly SimBubbleLevel _bubbleLevel;

		private const int BubbleLevelTimeToReachZeroInSeconds = 60;

		private readonly BaseObservableCollection<LogicalDeviceLevelerAutoStepType4> _stepCollection;

		private int _stepsCompleted;

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public override bool ActiveSession => IdsCanCommandRunner.CommandSessionActivated;

		[field: CompilerGenerated]
		public override ILogicalDevicePidFixedPoint VoltageMeasurementBatteryPid
		{
			[CompilerGenerated]
			get;
		} = (ILogicalDevicePidFixedPoint)new LogicalDevicePidSimFixedPoint((FixedPointType)1, PID.BATTERY_VOLTAGE, 10.5f);

		public LogicalDeviceLevelerType4Sim(ILogicalDeviceId logicalDeviceId, LogicalDeviceLevelerCapabilityType4 levelerCapability, ILogicalDeviceService deviceService = null, bool isFunctionClassChangeable = false)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			//IL_0021: Expected O, but got Unknown
			//IL_0166: Unknown result type (might be due to invalid IL or missing references)
			BaseObservableCollection<LogicalDeviceLevelerAutoStepType4> obj = new BaseObservableCollection<LogicalDeviceLevelerAutoStepType4>();
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.ClearTongueJack);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.EmptyAirBags);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.ExtendFront);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.ExtendJacks);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.ExtendRear);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.ExtendTongue);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.FillAirBags);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.FindHitch);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.GroundFront);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.GroundJacks);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.GroundRear);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.GroundTongue);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.LeftFront);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.Level);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.LevelFront);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.LevelRear);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.LiftRear);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.LowerAxle);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.LowerFront);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.LowerRear);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.RaiseAxle);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.RetractFront);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.RetractJacks);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.RetractMiddle);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.RetractRear);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.RetractTongue);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.StowAxle);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.Stabilize);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.VerifyGround);
			((Collection<LogicalDeviceLevelerAutoStepType4>)(object)obj).Add(LogicalDeviceLevelerAutoStepType4.Level);
			_stepCollection = obj;
			<>c__DisplayClass10_0 CS$<>8__locals4 = new <>c__DisplayClass10_0();
			base..ctor(logicalDeviceId, levelerCapability, deviceService, isFunctionClassChangeable);
			CS$<>8__locals4.<>4__this = this;
			CS$<>8__locals4.runnerSim = new Leveler4RunnerSim();
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)(object)CS$<>8__locals4.runnerSim;
			_bubbleLevel = new SimBubbleLevel(250, 60);
			Task.Run((Func<Task>)([AsyncStateMachine(/*Could not decode attribute arguments.*/)] () =>
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<>c__DisplayClass10_0.<<-ctor>b__0>d <<-ctor>b__0>d = default(<>c__DisplayClass10_0.<<-ctor>b__0>d);
				<<-ctor>b__0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<-ctor>b__0>d.<>4__this = CS$<>8__locals4;
				<<-ctor>b__0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<-ctor>b__0>d.<>t__builder)).Start<<>c__DisplayClass10_0.<<-ctor>b__0>d>(ref <<-ctor>b__0>d);
				return ((AsyncTaskMethodBuilder)(ref <<-ctor>b__0>d.<>t__builder)).Task;
			}), _levelerSimTaskCancelSource.Token);
		}

		protected override ILogicalDevicePidULong MakeUiSupportedFeaturesPid()
		{
			//IL_0025: Unknown result type (might be due to invalid IL or missing references)
			//IL_002b: Expected O, but got Unknown
			FeatureSupport featureSupport = FeatureSupport.All;
			switch (((LogicalDevice<LogicalDeviceLevelerCapabilityType4>)(object)this).DeviceCapability.Chassis)
			{
			case LevelerConfigurationChassis.ClassA:
			case LevelerConfigurationChassis.ClassC:
			case LevelerConfigurationChassis.FifthWheel:
				featureSupport &= ~FeatureSupport.AutoHitch;
				break;
			}
			return (ILogicalDevicePidULong)new LogicalDevicePidSimULong(PID.LEVELER_UI_SUPPORTED_FEATURES, (ulong)featureSupport);
		}

		public override Task<ValueTuple<LogicalDeviceLevelerScreenType4, int, int>> GetAutoStepsProgressAsync(CancellationToken cancelToken)
		{
			//IL_000b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0034: Unknown result type (might be due to invalid IL or missing references)
			//IL_0090: Unknown result type (might be due to invalid IL or missing references)
			//IL_0063: Unknown result type (might be due to invalid IL or missing references)
			if (_autoLevelComplete)
			{
				return Task.FromResult<ValueTuple<LogicalDeviceLevelerScreenType4, int, int>>(new ValueTuple<LogicalDeviceLevelerScreenType4, int, int>(LogicalDeviceLevelerScreenType4.Unknown, 0, 0));
			}
			LogicalDeviceLevelerScreenType4 logicalDeviceLevelerScreenType = ((LogicalDevice<LogicalDeviceLevelerStatusType4, LogicalDeviceLevelerCapabilityType4>)(object)this).DeviceStatus?.ScreenSelected ?? LogicalDeviceLevelerScreenType4.Unknown;
			if (!logicalDeviceLevelerScreenType.IsOperationAuto())
			{
				return Task.FromResult<ValueTuple<LogicalDeviceLevelerScreenType4, int, int>>(new ValueTuple<LogicalDeviceLevelerScreenType4, int, int>(LogicalDeviceLevelerScreenType4.Unknown, 0, 0));
			}
			if (_stepsCompleted > ((Collection<LogicalDeviceLevelerAutoStepType4>)(object)_stepCollection).Count)
			{
				_stepsCompleted = 0;
				_autoLevelComplete = true;
				return Task.FromResult<ValueTuple<LogicalDeviceLevelerScreenType4, int, int>>(new ValueTuple<LogicalDeviceLevelerScreenType4, int, int>(LogicalDeviceLevelerScreenType4.Unknown, 0, 0));
			}
			_stepsCompleted++;
			return Task.FromResult<ValueTuple<LogicalDeviceLevelerScreenType4, int, int>>(new ValueTuple<LogicalDeviceLevelerScreenType4, int, int>(logicalDeviceLevelerScreenType, ((Collection<LogicalDeviceLevelerAutoStepType4>)(object)_stepCollection).Count, _stepsCompleted - 1));
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public override Task UpdateAutoStepsCollectionWithLatestDetails(int expectedStepsCount, BaseObservableCollection<ValueTuple<LogicalDeviceLevelerAutoStepType4, int>> collection, CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<UpdateAutoStepsCollectionWithLatestDetails>d__18 <UpdateAutoStepsCollectionWithLatestDetails>d__ = default(<UpdateAutoStepsCollectionWithLatestDetails>d__18);
			<UpdateAutoStepsCollectionWithLatestDetails>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<UpdateAutoStepsCollectionWithLatestDetails>d__.<>4__this = this;
			<UpdateAutoStepsCollectionWithLatestDetails>d__.collection = collection;
			<UpdateAutoStepsCollectionWithLatestDetails>d__.cancelToken = cancelToken;
			<UpdateAutoStepsCollectionWithLatestDetails>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <UpdateAutoStepsCollectionWithLatestDetails>d__.<>t__builder)).Start<<UpdateAutoStepsCollectionWithLatestDetails>d__18>(ref <UpdateAutoStepsCollectionWithLatestDetails>d__);
			return ((AsyncTaskMethodBuilder)(ref <UpdateAutoStepsCollectionWithLatestDetails>d__.<>t__builder)).Task;
		}

		public override Task<List<LogicalDeviceLevelerAutoStepType4>> GetAutoStepListDetailsAsync(int expectedStepsCount, CancellationToken cancelToken)
		{
			return Task.FromResult<List<LogicalDeviceLevelerAutoStepType4>>(Enumerable.ToList<LogicalDeviceLevelerAutoStepType4>((IEnumerable<LogicalDeviceLevelerAutoStepType4>)(object)_stepCollection));
		}

		public override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
			CancellationTokenSource levelerSimTaskCancelSource = _levelerSimTaskCancelSource;
			if (levelerSimTaskCancelSource != null)
			{
				CancellationTokenSourceExtension.TryCancelAndDispose(levelerSimTaskCancelSource);
			}
			_levelerSimTaskCancelSource = null;
		}
	}
	public readonly struct LevelerSetPointNames : ValueType
	{
		[field: CompilerGenerated]
		public SetPointType FactorySetPoint
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public SetPointType SetPoint1
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public SetPointType SetPoint2
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public SetPointType SetPoint3
		{
			[CompilerGenerated]
			get;
		}

		public LevelerSetPointNames(SetPointType factorySetPoint, SetPointType setPoint1, SetPointType setPoint2, SetPointType setPoint3)
		{
			FactorySetPoint = factorySetPoint;
			SetPoint1 = setPoint1;
			SetPoint2 = setPoint2;
			SetPoint3 = setPoint3;
		}

		public override string ToString()
		{
			return String.Format("Custom Set Point Names, Factory: {0}, SetPoint1: {1}, SetPoint2: {2}, SetPoint3: {3}", (object[])(object)new Object[4]
			{
				(object)FactorySetPoint,
				(object)SetPoint1,
				(object)SetPoint2,
				(object)SetPoint3
			});
		}
	}
	public class LogicalDevicePidProxyLevelerType5CustomSetPointNames : LogicalDevicePidProxy<ILogicalDevicePidArrayEnum<SetPointType>>, ILogicalDevicePidProperty<LevelerSetPointNames>, ILogicalDevicePid<LevelerSetPointNames>, ILogicalDevicePid, ILogicalDevicePidProperty, ICommonDisposable, IDisposable, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ReadAsync>d__17 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<LevelerSetPointNames> <>t__builder;

			public LogicalDevicePidProxyLevelerType5CustomSetPointNames <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_007f: Expected O, but got Unknown
				//IL_004f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0054: Unknown result type (might be due to invalid IL or missing references)
				//IL_005c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				//IL_0039: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyLevelerType5CustomSetPointNames logicalDevicePidProxyLevelerType5CustomSetPointNames = <>4__this;
				LevelerSetPointNames result2;
				try
				{
					TaskAwaiter<ulong> val;
					if (num != 0)
					{
						val = ((LogicalDevicePidProxy<ILogicalDevicePidArrayEnum<SetPointType>>)logicalDevicePidProxyLevelerType5CustomSetPointNames).ReadValueAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <ReadAsync>d__17>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ulong>);
						num = (<>1__state = -1);
					}
					ulong result = val.GetResult();
					result2 = logicalDevicePidProxyLevelerType5CustomSetPointNames.Decode(result);
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <WriteAsync>d__18 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDevicePidProxyLevelerType5CustomSetPointNames <>4__this;

			public LevelerSetPointNames customNames;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0098: Expected O, but got Unknown
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0039: Unknown result type (might be due to invalid IL or missing references)
				//IL_0043: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_005c: Unknown result type (might be due to invalid IL or missing references)
				//IL_005d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyLevelerType5CustomSetPointNames logicalDevicePidProxyLevelerType5CustomSetPointNames = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						if (((LogicalDevicePidProxy<ILogicalDevicePidArrayEnum<SetPointType>>)logicalDevicePidProxyLevelerType5CustomSetPointNames).IsReadOnly)
						{
							throw new LogicalDevicePidValueWriteNotSupportedException(((LogicalDevicePidProxy<ILogicalDevicePidArrayEnum<SetPointType>>)logicalDevicePidProxyLevelerType5CustomSetPointNames).PropertyId);
						}
						val = ((LogicalDevicePidProxy<ILogicalDevicePidArrayEnum<SetPointType>>)logicalDevicePidProxyLevelerType5CustomSetPointNames).WriteValueAsync(logicalDevicePidProxyLevelerType5CustomSetPointNames.Encode(logicalDevicePidProxyLevelerType5CustomSetPointNames.FormatSetPointArray(customNames)), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <WriteAsync>d__18>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const string LogTag = "LogicalDevicePidProxyLevelerType5CustomSetPointNames";

		private const int FactorySetPointIndex = 5;

		private const int SetPoint1Index = 4;

		private const int SetPoint2Index = 3;

		private const int SetPoint3Index = 2;

		private const int Reserved2Index = 1;

		private const int Reserved1Index = 0;

		private const int ExpectedByteLength = 6;

		private static readonly LevelerSetPointNames defaultValue = new LevelerSetPointNames(SetPointType.Unknown, SetPointType.Unknown, SetPointType.Unknown, SetPointType.Unknown);

		public LevelerSetPointNames SetPointNames
		{
			get
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				return Decode(UInt48.op_Implicit(base.ValueRaw));
			}
			set
			{
				//IL_0008: Unknown result type (might be due to invalid IL or missing references)
				base.ValueRaw = (UInt48)EncodeAsULong(value);
			}
		}

		public LogicalDevicePidProxyLevelerType5CustomSetPointNames(ILogicalDevicePidArrayEnum<SetPointType> devicePid = null)
			: base(devicePid)
		{
			base.DevicePid = devicePid;
		}

		public static LevelerSetPointNames Decode(SetPointType[] setPoints)
		{
			if (setPoints.Length != 6)
			{
				TaggedLog.Debug("LogicalDevicePidProxyLevelerType5CustomSetPointNames", String.Format("Unable to Decode SetPoint name as the number of setpoints returned was not long enough. Data length: {0}", (object)setPoints.Length), Array.Empty<object>());
				return defaultValue;
			}
			return new LevelerSetPointNames(setPoints[5], setPoints[4], setPoints[3], setPoints[2]);
		}

		public LevelerSetPointNames Decode(ulong rawData)
		{
			TaggedLog.Debug("LogicalDevicePidProxyLevelerType5CustomSetPointNames", String.Format("Raw Data test: {0}", (object)rawData), Array.Empty<object>());
			ILogicalDevicePidArrayEnum<SetPointType> devicePid = base.DevicePid;
			if (devicePid == null)
			{
				TaggedLog.Debug("LogicalDevicePidProxyLevelerType5CustomSetPointNames", "Unable to Decode SetPoint names, DevicePid is null, returning default", Array.Empty<object>());
				return defaultValue;
			}
			return Decode(devicePid.ConvertToEnums.Invoke(rawData));
		}

		private SetPointType[] FormatSetPointArray(LevelerSetPointNames customNames)
		{
			return new SetPointType[6]
			{
				SetPointType.Reserved,
				SetPointType.Reserved,
				customNames.SetPoint3,
				customNames.SetPoint2,
				customNames.SetPoint1,
				customNames.FactorySetPoint
			};
		}

		public SetPointType[] Encode(LevelerSetPointNames customNames)
		{
			return FormatSetPointArray(customNames);
		}

		public ulong EncodeAsULong(LevelerSetPointNames customNames)
		{
			return Encode(FormatSetPointArray(customNames));
		}

		public LevelerSetPointNames Encode(ulong rawData)
		{
			ILogicalDevicePidArrayEnum<SetPointType> devicePid = base.DevicePid;
			if (devicePid == null)
			{
				TaggedLog.Debug("LogicalDevicePidProxyLevelerType5CustomSetPointNames", "Unable to Encode SetPoint names, DevicePid is null, returning default", Array.Empty<object>());
				return defaultValue;
			}
			SetPointType[] array = devicePid.ConvertToEnums.Invoke(rawData);
			return new LevelerSetPointNames(array[5], array[4], array[3], array[2]);
		}

		public ulong Encode(SetPointType[] enumeratedData)
		{
			ILogicalDevicePidArrayEnum<SetPointType> devicePid = base.DevicePid;
			if (devicePid == null)
			{
				TaggedLog.Debug("LogicalDevicePidProxyLevelerType5CustomSetPointNames", "Unable to Encode SetPoint names, DevicePid is null, returning default", Array.Empty<object>());
				return EncodeAsULong(defaultValue);
			}
			return devicePid.ConvertFromEnums.Invoke(enumeratedData);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<LevelerSetPointNames> ReadAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ReadAsync>d__17 <ReadAsync>d__ = default(<ReadAsync>d__17);
			<ReadAsync>d__.<>t__builder = AsyncTaskMethodBuilder<LevelerSetPointNames>.Create();
			<ReadAsync>d__.<>4__this = this;
			<ReadAsync>d__.cancellationToken = cancellationToken;
			<ReadAsync>d__.<>1__state = -1;
			<ReadAsync>d__.<>t__builder.Start<<ReadAsync>d__17>(ref <ReadAsync>d__);
			return <ReadAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task WriteAsync(LevelerSetPointNames customNames, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<WriteAsync>d__18 <WriteAsync>d__ = default(<WriteAsync>d__18);
			<WriteAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<WriteAsync>d__.<>4__this = this;
			<WriteAsync>d__.customNames = customNames;
			<WriteAsync>d__.cancellationToken = cancellationToken;
			<WriteAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Start<<WriteAsync>d__18>(ref <WriteAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Task;
		}

		protected override void ValueRawPropertyChanged()
		{
			TaggedLog.Debug("LogicalDevicePidProxyLevelerType5CustomSetPointNames", String.Format("SetPointNamesChanged - {0}", (object)SetPointNames), Array.Empty<object>());
			base.ValueRawPropertyChanged();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("SetPointNames", true);
		}
	}
	public interface ILogicalDeviceLeveler5Touchpad : ILogicalDeviceWithStatus<LogicalDeviceLeveler5TouchpadStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceLeveler5TouchpadStatus>, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink, ILogicalDeviceFirmwareUpdateDevice
	{
	}
	public class LogicalDeviceLeveler5Touchpad : LogicalDevice<LogicalDeviceLeveler5TouchpadStatus, ILogicalDeviceCapability>, ILogicalDeviceLeveler5Touchpad, ILogicalDeviceWithStatus<LogicalDeviceLeveler5TouchpadStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceLeveler5TouchpadStatus>, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink, ILogicalDeviceFirmwareUpdateDevice
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <UpdateFirmwareAsync>d__5 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceLeveler5Touchpad <>4__this;

			public CancellationToken cancellationToken;

			public IReadOnlyList<byte> data;

			public Func<ILogicalDeviceTransferProgress, bool> progressAck;

			public Dictionary<FirmwareUpdateOption, object> options;

			private ILogicalDeviceFirmwareUpdateSession <firmwareUpdateSession>5__2;

			private TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice?> <>u__1;

			private TaskAwaiter <>u__2;

			private void MoveNext()
			{
				//IL_0142: Expected O, but got Unknown
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_0103: Unknown result type (might be due to invalid IL or missing references)
				//IL_0108: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00eb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ed: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLeveler5Touchpad logicalDeviceLeveler5Touchpad = <>4__this;
				try
				{
					TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice> val;
					if (num != 0)
					{
						if (num == 1)
						{
							goto IL_00a9;
						}
						val = FirmwareUpdateSupportEx.TryGetSupportedFirmwareUpdateDeviceSource(((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceLeveler5Touchpad).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceLeveler5Touchpad, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>, <UpdateFirmwareAsync>d__5>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>);
						num = (<>1__state = -1);
					}
					ILogicalDeviceSourceDirectFirmwareUpdateDevice result = val.GetResult();
					if (result == null)
					{
						throw new FirmwareUpdateNotSupportedException((ILogicalDevice)(object)logicalDeviceLeveler5Touchpad, (FirmwareUpdateSupport)0, (Exception)null);
					}
					<firmwareUpdateSession>5__2 = ((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceLeveler5Touchpad).DeviceService.FirmwareUpdateManager.StartFirmwareUpdateSession((ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceLeveler5Touchpad);
					goto IL_00a9;
					IL_00a9:
					try
					{
						TaskAwaiter val2;
						if (num != 1)
						{
							val2 = ((IFirmwareUpdateDevice)result).UpdateFirmwareAsync(<firmwareUpdateSession>5__2, data, progressAck, cancellationToken, (IReadOnlyDictionary<FirmwareUpdateOption, object>)(object)options).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <UpdateFirmwareAsync>d__5>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
					}
					finally
					{
						if (num < 0 && <firmwareUpdateSession>5__2 != null)
						{
							((IDisposable)<firmwareUpdateSession>5__2).Dispose();
						}
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<firmwareUpdateSession>5__2 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<firmwareUpdateSession>5__2 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceLeveler5Touchpad";

		private readonly Dictionary<FirmwareUpdateOption, string> _defaultFirmwareUpdateOptions = new Dictionary<FirmwareUpdateOption, string>();

		public override bool IsLegacyDeviceHazardous => false;

		public IReadOnlyDictionary<FirmwareUpdateOption, string> DefaultFirmwareUpdateOptions
		{
			get
			{
				lock (_defaultFirmwareUpdateOptions)
				{
					if (_defaultFirmwareUpdateOptions.Count != 0)
					{
						return (IReadOnlyDictionary<FirmwareUpdateOption, string>)(object)_defaultFirmwareUpdateOptions;
					}
					if (((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId.ProductId == PRODUCT_ID.BASECAMP_LEVELER_5W_TOUCHPAD_ASSEMBLY)
					{
						_defaultFirmwareUpdateOptions[(FirmwareUpdateOption)1] = String.Format("{0}", (object)(UInt32)4325376);
					}
					else
					{
						TaggedLog.Error("LogicalDeviceLeveler5Touchpad", String.Format("Level 5 Touchpad is not configured with the correct Product ID. Product ID: {0}", (object)((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId.ProductId), Array.Empty<object>());
					}
					return (IReadOnlyDictionary<FirmwareUpdateOption, string>)(object)_defaultFirmwareUpdateOptions;
				}
			}
		}

		public LogicalDeviceLeveler5Touchpad(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService deviceService = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceLeveler5TouchpadStatus(), (ILogicalDeviceCapability)new LogicalDeviceCapability(), deviceService, isFunctionClassChangeable)
		{
		}//IL_0012: Unknown result type (might be due to invalid IL or missing references)
		//IL_001e: Expected O, but got Unknown


		public virtual Task<FirmwareUpdateSupport> TryGetFirmwareUpdateSupportAsync(CancellationToken cancelToken)
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			return FirmwareUpdateSupportEx.TryGetFirmwareUpdateSupportAsync(((LogicalDevice<ILogicalDeviceCapability>)(object)this).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)this, cancelToken);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task UpdateFirmwareAsync(IReadOnlyList<byte> data, Func<ILogicalDeviceTransferProgress, bool> progressAck, CancellationToken cancellationToken, Dictionary<FirmwareUpdateOption, object>? options = null)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<UpdateFirmwareAsync>d__5 <UpdateFirmwareAsync>d__ = default(<UpdateFirmwareAsync>d__5);
			<UpdateFirmwareAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<UpdateFirmwareAsync>d__.<>4__this = this;
			<UpdateFirmwareAsync>d__.data = data;
			<UpdateFirmwareAsync>d__.progressAck = progressAck;
			<UpdateFirmwareAsync>d__.cancellationToken = cancellationToken;
			<UpdateFirmwareAsync>d__.options = options;
			<UpdateFirmwareAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Start<<UpdateFirmwareAsync>d__5>(ref <UpdateFirmwareAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Task;
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceCapability>)(object)this).LastReceivedNetworkStatus;
		}
	}
	internal class LogicalDeviceLeveler5TouchpadFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 57)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceLeveler5Touchpad(logicalDeviceId, service);
		}
	}
	public class LogicalDeviceLeveler5TouchpadStatus : LogicalDeviceStatusPacketMutable
	{
		public LogicalDeviceLeveler5TouchpadStatus()
			: base(0u)
		{
		}

		public LogicalDeviceLeveler5TouchpadStatus(LogicalDeviceLeveler5TouchpadStatus originalSensorStatus)
			: this()
		{
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalSensorStatus).Data;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(data, data.Length, false);
		}
	}
	public interface ILogicalDeviceLight : ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		bool IsSecurityLight { get; }
	}
	public enum LogicalDeviceLightSpeedInterval : Enum
	{
		Slow,
		Medium,
		Fast
	}
	public interface ILogicalDeviceLightSpeedInterval : ILogicalDeviceLight, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		bool SpeedIntervalEnabled { get; }

		LogicalDeviceLightSpeedInterval SpeedInterval { get; }

		Task<CommandResult> SetSpeedIntervalAsync(LogicalDeviceLightSpeedInterval speedInterval);
	}
	public interface ILogicalDeviceSwitchableLight : ILogicalDeviceSwitchable, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceLight, ILogicalDeviceWithStatus
	{
	}
	public enum DimmableLightCommand : Enum
	{
		Off = 0,
		On = 1,
		Blink = 2,
		Swell = 3,
		Settings = 126,
		Restore = 127
	}
	public static class DimmableLightCommandExtension : Object
	{
		public static DimmableLightCommand ConvertToCommand(this DimmableLightMode mode)
		{
			return mode switch
			{
				DimmableLightMode.Off => DimmableLightCommand.Off, 
				DimmableLightMode.On => DimmableLightCommand.On, 
				DimmableLightMode.Blink => DimmableLightCommand.Blink, 
				DimmableLightMode.Swell => DimmableLightCommand.Swell, 
				_ => (DimmableLightCommand)mode, 
			};
		}

		public static DimmableLightMode ConvertToMode(this DimmableLightCommand command, DimmableLightMode restoreMode = DimmableLightMode.On)
		{
			//IL_0042: Unknown result type (might be due to invalid IL or missing references)
			return command switch
			{
				DimmableLightCommand.Off => DimmableLightMode.Off, 
				DimmableLightCommand.On => DimmableLightMode.On, 
				DimmableLightCommand.Blink => DimmableLightMode.Blink, 
				DimmableLightCommand.Swell => DimmableLightMode.Swell, 
				DimmableLightCommand.Restore => restoreMode, 
				DimmableLightCommand.Settings => throw new ArgumentException(String.Format("Can't convert from {0} to a {1}", (object)DimmableLightCommand.Settings, (object)"DimmableLightMode")), 
				_ => (DimmableLightMode)command, 
			};
		}
	}
	public class LogicalDeviceLightDimmableCommand : LogicalDeviceCommandPacket
	{
		public const int CommandPacketSize = 8;

		public const int LightCommandByteIndex = 0;

		public const int MaxBrightnessByteIndex = 1;

		public const int DurationByteIndex = 2;

		public const int CycleTime1MsbIndex = 3;

		public const int CycleTime1LsbIndex = 4;

		public const int CycleTime2MsbIndex = 5;

		public const int CycleTime2LsbIndex = 6;

		public const int UndefinedByteIndex = 7;

		private const int InvalidCycleTime = 0;

		private const int DefaultCycleTime = 220;

		public DimmableLightCommand Command
		{
			get
			{
				try
				{
					return DimmableLightCommandFromByte(((LogicalDeviceCommandPacket)this).Data[0]);
				}
				catch (Object)
				{
					return DimmableLightCommand.Off;
				}
			}
		}

		public byte MaxBrightness => ((LogicalDeviceCommandPacket)this).Data[1];

		public byte Duration => ((LogicalDeviceCommandPacket)this).Data[2];

		public int CycleTime1 => (((LogicalDeviceCommandPacket)this).Data[3] << 8) | ((LogicalDeviceCommandPacket)this).Data[4];

		public int CycleTime2 => (((LogicalDeviceCommandPacket)this).Data[5] << 8) | ((LogicalDeviceCommandPacket)this).Data[6];

		public IReadOnlyList<byte> DataMinimum => (IReadOnlyList<byte>)(object)new ArraySegment<byte>(((LogicalDeviceCommandPacket)this).Data, 0, DataMinimumLength(Command));

		public LogicalDeviceLightDimmableCommand()
			: this(DimmableLightMode.Off, 0, 0, 0, 0)
		{
		}

		public LogicalDeviceLightDimmableCommand(DimmableLightMode mode, byte maxBrightness, byte duration, int cycleTime1, int cycleTime2)
			: this(mode.ConvertToCommand(), maxBrightness, duration, cycleTime1, cycleTime2)
		{
		}

		public LogicalDeviceLightDimmableCommand(byte commandByte, byte[] data)
			: base(commandByte, data, 200)
		{
		}

		public LogicalDeviceLightDimmableCommand(IReadOnlyList<byte> data)
			: base((byte)0, data, 200)
		{
			//IL_0033: Unknown result type (might be due to invalid IL or missing references)
			DimmableLightCommand command = DimmableLightCommandFromByte(data[0]);
			if (((IReadOnlyCollection<byte>)(object)data).Count < DataMinimumLength(command))
			{
				throw new ArgumentOutOfRangeException("data", "Buffer not big enough to represent command");
			}
		}

		public LogicalDeviceLightDimmableCommand(DimmableLightCommand command, byte maxBrightness, byte duration, int cycleTime1, int cycleTime2)
			: this(0, (byte[])(object)new Byte[8])
		{
			if (command - 2 <= DimmableLightCommand.On && (cycleTime1 == 0 || cycleTime2 == 0))
			{
				cycleTime1 = (cycleTime2 = 220);
			}
			((LogicalDeviceCommandPacket)this).Data[0] = (byte)command;
			((LogicalDeviceCommandPacket)this).Data[1] = maxBrightness;
			((LogicalDeviceCommandPacket)this).Data[2] = duration;
			((LogicalDeviceCommandPacket)this).Data[3] = (byte)((cycleTime1 & 0xFF00) >> 8);
			((LogicalDeviceCommandPacket)this).Data[4] = (byte)(cycleTime1 & 0xFF);
			((LogicalDeviceCommandPacket)this).Data[5] = (byte)((cycleTime2 & 0xFF00) >> 8);
			((LogicalDeviceCommandPacket)this).Data[6] = (byte)(cycleTime2 & 0xFF);
			((LogicalDeviceCommandPacket)this).Data[7] = 0;
		}

		public static LogicalDeviceLightDimmableCommand MakeSettingsCommand(byte maxBrightness, byte duration)
		{
			return new LogicalDeviceLightDimmableCommand(DimmableLightCommand.Settings, maxBrightness, duration, 0, 0);
		}

		public static LogicalDeviceLightDimmableCommand MakeRestoreCommand()
		{
			return new LogicalDeviceLightDimmableCommand(DimmableLightCommand.Restore, 0, 0, 0, 0);
		}

		public static DimmableLightCommand DimmableLightCommandFromByte(byte rawValue)
		{
			//IL_004c: Unknown result type (might be due to invalid IL or missing references)
			return rawValue switch
			{
				0 => DimmableLightCommand.Off, 
				1 => DimmableLightCommand.On, 
				2 => DimmableLightCommand.Blink, 
				3 => DimmableLightCommand.Swell, 
				126 => DimmableLightCommand.Settings, 
				127 => DimmableLightCommand.Restore, 
				_ => throw new ArgumentOutOfRangeException(String.Format("Unknown DimmableLightMode value 0x{0:x2}", (object)rawValue)), 
			};
		}

		public int DataMinimumLength(DimmableLightCommand command)
		{
			//IL_0042: Unknown result type (might be due to invalid IL or missing references)
			switch (Command)
			{
			case DimmableLightCommand.Off:
			case DimmableLightCommand.Restore:
				return 1;
			case DimmableLightCommand.On:
			case DimmableLightCommand.Settings:
				return 3;
			case DimmableLightCommand.Blink:
			case DimmableLightCommand.Swell:
				return 7;
			default:
				throw new NotSupportedException(String.Format("Command {0} not supported", (object)Command));
			}
		}
	}
	public interface ILightDimmable : IAutoOff
	{
		DimmableLightMode Mode { get; }

		byte Brightness { get; }

		byte MaxBrightness { get; }

		Nullable<TimeSpan> MaxAutoOffDurationMinutes { get; }

		int CycleTime1 { get; }

		int CycleTime2 { get; }

		bool DimEnabled { get; }

		bool CycleTimeEnabled { get; }

		bool ConfiguredAsSwitchedLight { get; }

		Task SetSimulateOnOffStyleLightAsync(SimulatedOnOffStyleLightCapability onOffStyleLightCapability, CancellationToken cancellationToken);

		Task<CommandResult> SendCommandAsync(LogicalDeviceLightDimmableCommand command);

		void SendLightCommandRun(DimmableLightMode newMode, byte newOnMaxBrightness, byte newOnDuration, int newBlinkSwellCycleTime1, int newBlinkSwellCycleTime2);

		Task<CommandResult> SendCommandOffAsync(bool waitForCurrentStatus);

		Task<CommandResult> SendCommandOnAsync(byte newOnBrightness, byte newOnDuration, bool waitForCurrentStatus);

		Task<CommandResult> SendRestoreCommandAsync();

		Task<CommandResult> SendSettingsCommandAsync(byte newOnBrightness, byte newOnDuration);
	}
	public interface ILogicalDeviceLightDimmable : ILightDimmable, IAutoOff, ILogicalDeviceSwitchableLight, ILogicalDeviceSwitchable, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceLight, ILogicalDeviceWithStatus, ILogicalDeviceWithStatus<LogicalDeviceLightDimmableStatus>, ILogicalDeviceWithStatusUpdate<LogicalDeviceLightDimmableStatus>, ILogicalDeviceWithStatusExtended<LogicalDeviceLightDimmableStatusExtended>, ILogicalDeviceWithStatusExtended, ILogicalDeviceLightSpeedInterval, ILogicalDeviceDimmableBrightness, IDimmableBrightness, ILogicalDeviceAutoOffSwitchable, ILogicalDeviceAutoOff, ILogicalDeviceCommandable<DimmableLightMode>, ILogicalDeviceCommandable, ICommandable<DimmableLightMode>, ILogicalDeviceCommandable<LogicalDeviceLightSpeedInterval>, ICommandable<LogicalDeviceLightSpeedInterval>
	{
	}
	public interface ILogicalDeviceRemoteLightDimmable : ILogicalDeviceLightDimmable, ILightDimmable, IAutoOff, ILogicalDeviceSwitchableLight, ILogicalDeviceSwitchable, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceLight, ILogicalDeviceWithStatus, ILogicalDeviceWithStatus<LogicalDeviceLightDimmableStatus>, ILogicalDeviceWithStatusUpdate<LogicalDeviceLightDimmableStatus>, ILogicalDeviceWithStatusExtended<LogicalDeviceLightDimmableStatusExtended>, ILogicalDeviceWithStatusExtended, ILogicalDeviceLightSpeedInterval, ILogicalDeviceDimmableBrightness, IDimmableBrightness, ILogicalDeviceAutoOffSwitchable, ILogicalDeviceAutoOff, ILogicalDeviceCommandable<DimmableLightMode>, ILogicalDeviceCommandable, ICommandable<DimmableLightMode>, ILogicalDeviceCommandable<LogicalDeviceLightSpeedInterval>, ICommandable<LogicalDeviceLightSpeedInterval>, ILogicalDeviceDimmableBrightnessRemote, ILogicalDeviceRemote
	{
		Task<CommandResult> SendRemoteCommandAsync(LogicalDeviceLightDimmableCommand command, CancellationToken cancelToken);
	}
	public interface ILogicalDeviceRemoteLightDimmableDirect : ILogicalDeviceRemoteLightDimmable, ILogicalDeviceLightDimmable, ILightDimmable, IAutoOff, ILogicalDeviceSwitchableLight, ILogicalDeviceSwitchable, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceLight, ILogicalDeviceWithStatus, ILogicalDeviceWithStatus<LogicalDeviceLightDimmableStatus>, ILogicalDeviceWithStatusUpdate<LogicalDeviceLightDimmableStatus>, ILogicalDeviceWithStatusExtended<LogicalDeviceLightDimmableStatusExtended>, ILogicalDeviceWithStatusExtended, ILogicalDeviceLightSpeedInterval, ILogicalDeviceDimmableBrightness, IDimmableBrightness, ILogicalDeviceAutoOffSwitchable, ILogicalDeviceAutoOff, ILogicalDeviceCommandable<DimmableLightMode>, ILogicalDeviceCommandable, ICommandable<DimmableLightMode>, ILogicalDeviceCommandable<LogicalDeviceLightSpeedInterval>, ICommandable<LogicalDeviceLightSpeedInterval>, ILogicalDeviceDimmableBrightnessRemote, ILogicalDeviceRemote, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public interface ILogicalDeviceRemoteLightDimmableRemote : ILogicalDeviceRemoteLightDimmable, ILogicalDeviceLightDimmable, ILightDimmable, IAutoOff, ILogicalDeviceSwitchableLight, ILogicalDeviceSwitchable, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceLight, ILogicalDeviceWithStatus, ILogicalDeviceWithStatus<LogicalDeviceLightDimmableStatus>, ILogicalDeviceWithStatusUpdate<LogicalDeviceLightDimmableStatus>, ILogicalDeviceWithStatusExtended<LogicalDeviceLightDimmableStatusExtended>, ILogicalDeviceWithStatusExtended, ILogicalDeviceLightSpeedInterval, ILogicalDeviceDimmableBrightness, IDimmableBrightness, ILogicalDeviceAutoOffSwitchable, ILogicalDeviceAutoOff, ILogicalDeviceCommandable<DimmableLightMode>, ILogicalDeviceCommandable, ICommandable<DimmableLightMode>, ILogicalDeviceCommandable<LogicalDeviceLightSpeedInterval>, ICommandable<LogicalDeviceLightSpeedInterval>, ILogicalDeviceDimmableBrightnessRemote, ILogicalDeviceRemote
	{
	}
	public interface IDirectCommandLightDimmable : ILogicalDeviceSourceDirect, ILogicalDeviceSource
	{
		Task<CommandResult> SendDirectCommandLightDimmable(ILogicalDeviceLightDimmable logicalDevice, LogicalDeviceLightDimmableCommand command, CancellationToken cancelToken);
	}
	public class LogicalDeviceLightDimmable : LogicalDevice<LogicalDeviceLightDimmableStatus, LogicalDeviceLightDimmableStatusExtended, ILogicalDeviceLightDimmableCapability>, ILogicalDeviceRemoteLightDimmableDirect, ILogicalDeviceRemoteLightDimmable, ILogicalDeviceLightDimmable, ILightDimmable, IAutoOff, ILogicalDeviceSwitchableLight, ILogicalDeviceSwitchable, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceLight, ILogicalDeviceWithStatus, ILogicalDeviceWithStatus<LogicalDeviceLightDimmableStatus>, ILogicalDeviceWithStatusUpdate<LogicalDeviceLightDimmableStatus>, ILogicalDeviceWithStatusExtended<LogicalDeviceLightDimmableStatusExtended>, ILogicalDeviceWithStatusExtended, ILogicalDeviceLightSpeedInterval, ILogicalDeviceDimmableBrightness, IDimmableBrightness, ILogicalDeviceAutoOffSwitchable, ILogicalDeviceAutoOff, ILogicalDeviceCommandable<DimmableLightMode>, ILogicalDeviceCommandable, ICommandable<DimmableLightMode>, ILogicalDeviceCommandable<LogicalDeviceLightSpeedInterval>, ICommandable<LogicalDeviceLightSpeedInterval>, ILogicalDeviceDimmableBrightnessRemote, ILogicalDeviceRemote, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink, ILogicalDeviceRemoteLightDimmableRemote
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass122_0 : Object
		{
			public int cycleTime;

			public ushort nearest;

			internal long <get_SpeedInterval>b__0(ushort x)
			{
				return Math.Abs((long)x - (long)cycleTime);
			}

			internal bool <get_SpeedInterval>b__1(KeyValuePair<LogicalDeviceLightSpeedInterval, ushort> x)
			{
				return x.Value == nearest;
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass81_0 : Object
		{
			public LogicalDeviceLightDimmableCommand command;

			public LogicalDeviceLightDimmable <>4__this;

			internal Task<CommandResult> <SendCommandAsync>b__1(CancellationToken cancelToken)
			{
				//IL_000c: Unknown result type (might be due to invalid IL or missing references)
				return <>4__this.SendRemoteCommandAsync(command, cancelToken);
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass81_1 : Object
		{
			public IDirectCommandLightDimmable directManager;

			public <>c__DisplayClass81_0 CS$<>8__locals1;

			internal Task<CommandResult> <SendCommandAsync>b__2(CancellationToken cancelToken)
			{
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				return directManager.SendDirectCommandLightDimmable(CS$<>8__locals1.<>4__this, CS$<>8__locals1.command, cancelToken);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformCommand>d__117 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightDimmable <>4__this;

			public DimmableLightMode mode;

			private int <cycleTime1>5__2;

			private int <cycleTime2>5__3;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0102: Unknown result type (might be due to invalid IL or missing references)
				//IL_0107: Unknown result type (might be due to invalid IL or missing references)
				//IL_010c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0111: Expected O, but got Unknown
				//IL_0136: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fd: Unknown result type (might be due to invalid IL or missing references)
				//IL_0076: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				//IL_0085: Unknown result type (might be due to invalid IL or missing references)
				//IL_009a: Unknown result type (might be due to invalid IL or missing references)
				//IL_009c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightDimmable logicalDeviceLightDimmable = <>4__this;
				CommandResult result;
				try
				{
					try
					{
						TaskAwaiter val;
						if (num != 0)
						{
							<cycleTime1>5__2 = logicalDeviceLightDimmable.CycleTime1;
							<cycleTime2>5__3 = logicalDeviceLightDimmable.CycleTime2;
							if (logicalDeviceLightDimmable.Mode != mode && logicalDeviceLightDimmable.CycleTime1 != logicalDeviceLightDimmable.CycleTime2)
							{
								<cycleTime1>5__2 = (<cycleTime2>5__3 = Enumerable.First<KeyValuePair<LogicalDeviceLightSpeedInterval, ushort>>((IEnumerable<KeyValuePair<LogicalDeviceLightSpeedInterval, ushort>>)(object)_lightSpeedIntervalCycleTimeDict).Value);
							}
							val = ((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).WaitForDeviceStatusToHaveDataAsync((int)logicalDeviceLightDimmable.MSCommandTimeout, logicalDeviceLightDimmable._commandCancelToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <PerformCommand>d__117>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val)).GetResult();
						logicalDeviceLightDimmable.SendLightCommandRun(mode, logicalDeviceLightDimmable.MaxBrightness, logicalDeviceLightDimmable.AutoOffDurationMinutes, <cycleTime1>5__2, <cycleTime2>5__3);
						result = (CommandResult)0;
					}
					catch (TimeoutException)
					{
						result = (CommandResult)5;
					}
					catch (OperationCanceledException)
					{
						result = (CommandResult)1;
					}
					catch (Object)
					{
						result = (CommandResult)7;
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformCommand>d__124 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightDimmable <>4__this;

			public LogicalDeviceLightSpeedInterval speedInterval;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0074: Expected O, but got Unknown
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				//IL_0099: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightDimmable logicalDeviceLightDimmable = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceLightDimmable.SetSpeedIntervalAsync(speedInterval).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <PerformCommand>d__124>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandAsync>d__81 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightDimmableCommand command;

			public LogicalDeviceLightDimmable <>4__this;

			private <>c__DisplayClass81_0 <>8__1;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0316: Expected O, but got Unknown
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fd: Unknown result type (might be due to invalid IL or missing references)
				//IL_0102: Unknown result type (might be due to invalid IL or missing references)
				//IL_010a: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_01db: Unknown result type (might be due to invalid IL or missing references)
				//IL_025c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0261: Unknown result type (might be due to invalid IL or missing references)
				//IL_0269: Unknown result type (might be due to invalid IL or missing references)
				//IL_0083: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Invalid comparison between Unknown and I4
				//IL_0349: Unknown result type (might be due to invalid IL or missing references)
				//IL_011b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0120: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f1: Unknown result type (might be due to invalid IL or missing references)
				//IL_027a: Unknown result type (might be due to invalid IL or missing references)
				//IL_027f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ab: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cd: Unknown result type (might be due to invalid IL or missing references)
				//IL_0295: Unknown result type (might be due to invalid IL or missing references)
				//IL_020a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0227: Unknown result type (might be due to invalid IL or missing references)
				//IL_022c: Unknown result type (might be due to invalid IL or missing references)
				//IL_017b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0199: Unknown result type (might be due to invalid IL or missing references)
				//IL_019e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e4: Unknown result type (might be due to invalid IL or missing references)
				//IL_0310: Unknown result type (might be due to invalid IL or missing references)
				//IL_0311: Unknown result type (might be due to invalid IL or missing references)
				//IL_0241: Unknown result type (might be due to invalid IL or missing references)
				//IL_0243: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b5: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightDimmable logicalDeviceLightDimmable = <>4__this;
				CommandResult result;
				try
				{
					if ((uint)num <= 2u)
					{
						goto IL_0070;
					}
					<>8__1 = new <>c__DisplayClass81_0();
					<>8__1.command = command;
					<>8__1.<>4__this = <>4__this;
					CommandResult val;
					if (!((CommonDisposableNotifyPropertyChanged)logicalDeviceLightDimmable).IsDisposed)
					{
						val = (CommandResult)7;
						goto IL_0070;
					}
					TaggedLog.Debug("LogicalDeviceLightDimmable", String.Concat(((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).DeviceName, " SendCommandAsync ignored as logical device has been disposed"), Array.Empty<object>());
					result = (CommandResult)7;
					goto end_IL_000e;
					IL_0070:
					try
					{
						TaskAwaiter<CommandResult> val2;
						switch (num)
						{
						default:
						{
							if ((int)((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).ActiveConnection == 2)
							{
								val2 = logicalDeviceLightDimmable.BasicCommandRunner.SendCommandAsync((Func<CancellationToken, Task<CommandResult>>)((CancellationToken cancelToken) => <>8__1.<>4__this.SendRemoteCommandAsync(<>8__1.command, cancelToken)), logicalDeviceLightDimmable._commandCancelSource.Token, (ILogicalDevice)(object)logicalDeviceLightDimmable, (Func<ILogicalDevice, CommandControl>)CheckCommandExecution, (CommandSendOption)1).GetAwaiter();
								if (!val2.IsCompleted)
								{
									num = (<>1__state = 0);
									<>u__1 = val2;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandAsync>d__81>(ref val2, ref this);
									return;
								}
								goto IL_0119;
							}
							<>c__DisplayClass81_1 CS$<>8__locals6 = new <>c__DisplayClass81_1
							{
								CS$<>8__locals1 = <>8__1
							};
							ILogicalDeviceSourceDirect primaryDeviceSourceDirect = ((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceLightDimmable);
							CS$<>8__locals6.directManager = primaryDeviceSourceDirect as IDirectCommandLightDimmable;
							if (CS$<>8__locals6.directManager != null)
							{
								val2 = logicalDeviceLightDimmable.BasicCommandRunner.SendCommandAsync((Func<CancellationToken, Task<CommandResult>>)((CancellationToken cancelToken) => CS$<>8__locals6.directManager.SendDirectCommandLightDimmable(CS$<>8__locals6.CS$<>8__locals1.<>4__this, CS$<>8__locals6.CS$<>8__locals1.command, cancelToken)), logicalDeviceLightDimmable._commandCancelSource.Token, (ILogicalDevice)(object)logicalDeviceLightDimmable, (Func<ILogicalDevice, CommandControl>)CheckCommandExecution, (CommandSendOption)1).GetAwaiter();
								if (!val2.IsCompleted)
								{
									num = (<>1__state = 1);
									<>u__1 = val2;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandAsync>d__81>(ref val2, ref this);
									return;
								}
								goto IL_01ea;
							}
							val2 = logicalDeviceLightDimmable.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)(object)CS$<>8__locals6.CS$<>8__locals1.command, logicalDeviceLightDimmable._commandCancelToken, (Func<ILogicalDevice, CommandControl>)CheckCommandExecution, (CommandSendOption)0).GetAwaiter();
							if (!val2.IsCompleted)
							{
								num = (<>1__state = 2);
								<>u__1 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandAsync>d__81>(ref val2, ref this);
								return;
							}
							goto IL_0278;
						}
						case 0:
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0119;
						case 1:
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_01ea;
						case 2:
							{
								val2 = <>u__1;
								<>u__1 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								goto IL_0278;
							}
							IL_01ea:
							val = val2.GetResult();
							break;
							IL_0278:
							val = val2.GetResult();
							break;
							IL_0119:
							val = val2.GetResult();
							break;
						}
						TaggedLog.Debug("LogicalDeviceLightDimmable", String.Format("SendCommandAsync for {0} with result {1}", (object)<>8__1.command, (object)val), Array.Empty<object>());
					}
					finally
					{
						if (num < 0)
						{
							object lockForceUseCommandStatus = logicalDeviceLightDimmable._lockForceUseCommandStatus;
							bool flag = false;
							try
							{
								Monitor.Enter(lockForceUseCommandStatus, ref flag);
								if (logicalDeviceLightDimmable.NumberOfCommandsRunning != 0)
								{
									logicalDeviceLightDimmable.NumberOfCommandsRunning--;
								}
								logicalDeviceLightDimmable.SyncWithStatus(((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).DeviceStatus, logicalDeviceLightDimmable.NumberOfCommandsRunning == 0);
								((CommonNotifyPropertyChanged)logicalDeviceLightDimmable).NotifyPropertyChanged("SwitchInTransition", true);
							}
							finally
							{
								if (num < 0 && flag)
								{
									Monitor.Exit(lockForceUseCommandStatus);
								}
							}
						}
					}
					result = val;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>8__1 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				<>t__builder.SetResult(result);
				CommandControl CheckCommandExecution(ILogicalDevice logicalDevice)
				{
					switch (((<>c__DisplayClass81_0)this).command.Command)
					{
					case DimmableLightCommand.On:
					case DimmableLightCommand.Restore:
						if (((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)((<>c__DisplayClass81_0)this).<>4__this).DeviceStatus.Mode != DimmableLightMode.Off)
						{
							return (CommandControl)0;
						}
						return (CommandControl)1;
					case DimmableLightCommand.Blink:
					case DimmableLightCommand.Swell:
						if (((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)((<>c__DisplayClass81_0)this).<>4__this).DeviceStatus.Mode == ((<>c__DisplayClass81_0)this).command.Command.ConvertToMode() && ((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)((<>c__DisplayClass81_0)this).<>4__this).DeviceStatus.MaxBrightness == ((<>c__DisplayClass81_0)this).command.MaxBrightness && ((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)((<>c__DisplayClass81_0)this).<>4__this).DeviceStatus.Duration == ((<>c__DisplayClass81_0)this).command.Duration && ((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)((<>c__DisplayClass81_0)this).<>4__this).DeviceStatus.CycleTime1 == ((<>c__DisplayClass81_0)this).command.CycleTime1 && ((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)((<>c__DisplayClass81_0)this).<>4__this).DeviceStatus.CycleTime2 == ((<>c__DisplayClass81_0)this).command.CycleTime2)
						{
							return (CommandControl)0;
						}
						return (CommandControl)1;
					case DimmableLightCommand.Settings:
						if (((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)((<>c__DisplayClass81_0)this).<>4__this).DeviceStatus.MaxBrightness == ((<>c__DisplayClass81_0)this).command.MaxBrightness && ((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)((<>c__DisplayClass81_0)this).<>4__this).DeviceStatus.Duration == ((<>c__DisplayClass81_0)this).command.Duration)
						{
							return (CommandControl)0;
						}
						return (CommandControl)1;
					default:
						if (((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)((<>c__DisplayClass81_0)this).<>4__this).DeviceStatus.Mode == ((<>c__DisplayClass81_0)this).command.Command.ConvertToMode())
						{
							return (CommandControl)0;
						}
						return (CommandControl)1;
					}
				}
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandOffAsync>d__84 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightDimmable <>4__this;

			public bool waitForCurrentStatus;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0135: Expected O, but got Unknown
				//IL_015a: Unknown result type (might be due to invalid IL or missing references)
				//IL_010d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0112: Unknown result type (might be due to invalid IL or missing references)
				//IL_011a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_007b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				//IL_0087: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_012b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0130: Unknown result type (might be due to invalid IL or missing references)
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_00db: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f7: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightDimmable logicalDeviceLightDimmable = <>4__this;
				CommandResult result;
				try
				{
					if (num == 0)
					{
						goto IL_0033;
					}
					TaskAwaiter<CommandResult> val;
					if (num == 1)
					{
						val = <>u__2;
						<>u__2 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_0129;
					}
					if ((int)((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).ActiveConnection != 0)
					{
						if (waitForCurrentStatus)
						{
							goto IL_0033;
						}
						goto IL_00b7;
					}
					result = (CommandResult)6;
					goto end_IL_000e;
					IL_0129:
					result = val.GetResult();
					goto end_IL_000e;
					IL_00b7:
					val = logicalDeviceLightDimmable.SendCommandAsync(new LogicalDeviceLightDimmableCommand(DimmableLightMode.Off, logicalDeviceLightDimmable.MaxBrightness, logicalDeviceLightDimmable.AutoOffDurationMinutes, logicalDeviceLightDimmable.CycleTime1, logicalDeviceLightDimmable.CycleTime2)).GetAwaiter();
					if (!val.IsCompleted)
					{
						num = (<>1__state = 1);
						<>u__2 = val;
						<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandOffAsync>d__84>(ref val, ref this);
						return;
					}
					goto IL_0129;
					IL_0033:
					try
					{
						TaskAwaiter val2;
						if (num != 0)
						{
							val2 = ((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).WaitForDeviceStatusToHaveDataAsync((int)logicalDeviceLightDimmable.MSCommandTimeout, logicalDeviceLightDimmable._commandCancelToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SendCommandOffAsync>d__84>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
					}
					catch (TimeoutException)
					{
						result = (CommandResult)5;
						goto end_IL_000e;
					}
					catch (OperationCanceledException)
					{
						result = (CommandResult)1;
						goto end_IL_000e;
					}
					catch (Object)
					{
						result = (CommandResult)7;
						goto end_IL_000e;
					}
					goto IL_00b7;
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandOnAsync>d__85 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightDimmable <>4__this;

			public bool waitForCurrentStatus;

			public byte newOnBrightness;

			public byte newOnDuration;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0135: Expected O, but got Unknown
				//IL_015a: Unknown result type (might be due to invalid IL or missing references)
				//IL_010d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0112: Unknown result type (might be due to invalid IL or missing references)
				//IL_011a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_007b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				//IL_0087: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_012b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0130: Unknown result type (might be due to invalid IL or missing references)
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_00db: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f7: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightDimmable logicalDeviceLightDimmable = <>4__this;
				CommandResult result;
				try
				{
					if (num == 0)
					{
						goto IL_0033;
					}
					TaskAwaiter<CommandResult> val;
					if (num == 1)
					{
						val = <>u__2;
						<>u__2 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_0129;
					}
					if ((int)((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).ActiveConnection != 0)
					{
						if (waitForCurrentStatus)
						{
							goto IL_0033;
						}
						goto IL_00b7;
					}
					result = (CommandResult)6;
					goto end_IL_000e;
					IL_0129:
					result = val.GetResult();
					goto end_IL_000e;
					IL_00b7:
					val = logicalDeviceLightDimmable.SendCommandAsync(new LogicalDeviceLightDimmableCommand(DimmableLightMode.On, newOnBrightness, newOnDuration, logicalDeviceLightDimmable.CycleTime1, logicalDeviceLightDimmable.CycleTime2)).GetAwaiter();
					if (!val.IsCompleted)
					{
						num = (<>1__state = 1);
						<>u__2 = val;
						<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandOnAsync>d__85>(ref val, ref this);
						return;
					}
					goto IL_0129;
					IL_0033:
					try
					{
						TaskAwaiter val2;
						if (num != 0)
						{
							val2 = ((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).WaitForDeviceStatusToHaveDataAsync((int)logicalDeviceLightDimmable.MSCommandTimeout, logicalDeviceLightDimmable._commandCancelToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SendCommandOnAsync>d__85>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
					}
					catch (TimeoutException)
					{
						result = (CommandResult)5;
						goto end_IL_000e;
					}
					catch (OperationCanceledException)
					{
						result = (CommandResult)1;
						goto end_IL_000e;
					}
					catch (Object)
					{
						result = (CommandResult)7;
						goto end_IL_000e;
					}
					goto IL_00b7;
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendDimmableBrightnessCommandAsync>d__112 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightDimmable <>4__this;

			public byte brightness;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cc: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_015d: Expected O, but got Unknown
				//IL_0182: Unknown result type (might be due to invalid IL or missing references)
				//IL_0135: Unknown result type (might be due to invalid IL or missing references)
				//IL_013a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0142: Unknown result type (might be due to invalid IL or missing references)
				//IL_009e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00aa: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0070: Unknown result type (might be due to invalid IL or missing references)
				//IL_0153: Unknown result type (might be due to invalid IL or missing references)
				//IL_0158: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				//IL_0084: Unknown result type (might be due to invalid IL or missing references)
				//IL_0085: Unknown result type (might be due to invalid IL or missing references)
				//IL_004f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0103: Unknown result type (might be due to invalid IL or missing references)
				//IL_0108: Unknown result type (might be due to invalid IL or missing references)
				//IL_011d: Unknown result type (might be due to invalid IL or missing references)
				//IL_011f: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightDimmable logicalDeviceLightDimmable = <>4__this;
				CommandResult result;
				try
				{
					if (num == 0)
					{
						goto IL_0056;
					}
					TaskAwaiter<CommandResult> val;
					if (num == 1)
					{
						val = <>u__2;
						<>u__2 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_0151;
					}
					if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLightDimmable).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceLightDimmable", String.Concat(((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).DeviceName, " SendDimmableBrightnessCommandAsync ignored as logical device has been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else
					{
						if (brightness != 0)
						{
							goto IL_0056;
						}
						result = (CommandResult)2;
					}
					goto end_IL_000e;
					IL_0151:
					result = val.GetResult();
					goto end_IL_000e;
					IL_0056:
					try
					{
						TaskAwaiter val2;
						if (num != 0)
						{
							val2 = ((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).WaitForDeviceStatusToHaveDataAsync((int)logicalDeviceLightDimmable.MSCommandTimeout, logicalDeviceLightDimmable._commandCancelToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SendDimmableBrightnessCommandAsync>d__112>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
					}
					catch (TimeoutException)
					{
						result = (CommandResult)5;
						goto end_IL_000e;
					}
					catch (OperationCanceledException)
					{
						result = (CommandResult)1;
						goto end_IL_000e;
					}
					catch (Object)
					{
						result = (CommandResult)7;
						goto end_IL_000e;
					}
					val = logicalDeviceLightDimmable.SendCommandAsync(new LogicalDeviceLightDimmableCommand(logicalDeviceLightDimmable.Mode, brightness, logicalDeviceLightDimmable.AutoOffDurationMinutes, logicalDeviceLightDimmable.CycleTime1, logicalDeviceLightDimmable.CycleTime2)).GetAwaiter();
					if (!val.IsCompleted)
					{
						num = (<>1__state = 1);
						<>u__2 = val;
						<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendDimmableBrightnessCommandAsync>d__112>(ref val, ref this);
						return;
					}
					goto IL_0151;
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendRemoteCommandAsync>d__82 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightDimmable <>4__this;

			public CancellationToken cancelToken;

			public LogicalDeviceLightDimmableCommand command;

			private RemoteDimmer <remoteDimmer>5__2;

			private DimmableLightMode <newMode>5__3;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0674: Unknown result type (might be due to invalid IL or missing references)
				//IL_0679: Unknown result type (might be due to invalid IL or missing references)
				//IL_067e: Expected O, but got Unknown
				//IL_06a0: Unknown result type (might be due to invalid IL or missing references)
				//IL_06a9: Expected O, but got Unknown
				//IL_06ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0112: Unknown result type (might be due to invalid IL or missing references)
				//IL_0117: Unknown result type (might be due to invalid IL or missing references)
				//IL_011f: Unknown result type (might be due to invalid IL or missing references)
				//IL_018a: Unknown result type (might be due to invalid IL or missing references)
				//IL_018f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0197: Unknown result type (might be due to invalid IL or missing references)
				//IL_0269: Unknown result type (might be due to invalid IL or missing references)
				//IL_026e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0276: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_02db: Unknown result type (might be due to invalid IL or missing references)
				//IL_0333: Unknown result type (might be due to invalid IL or missing references)
				//IL_0338: Unknown result type (might be due to invalid IL or missing references)
				//IL_0340: Unknown result type (might be due to invalid IL or missing references)
				//IL_0395: Unknown result type (might be due to invalid IL or missing references)
				//IL_039a: Unknown result type (might be due to invalid IL or missing references)
				//IL_03a2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0446: Unknown result type (might be due to invalid IL or missing references)
				//IL_044b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0453: Unknown result type (might be due to invalid IL or missing references)
				//IL_04e9: Unknown result type (might be due to invalid IL or missing references)
				//IL_04ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_04f6: Unknown result type (might be due to invalid IL or missing references)
				//IL_05a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_05a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_05ae: Unknown result type (might be due to invalid IL or missing references)
				//IL_0645: Unknown result type (might be due to invalid IL or missing references)
				//IL_064a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0652: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a7: Invalid comparison between Unknown and I4
				//IL_004f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0130: Unknown result type (might be due to invalid IL or missing references)
				//IL_0135: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a8: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ad: Unknown result type (might be due to invalid IL or missing references)
				//IL_0287: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_0351: Unknown result type (might be due to invalid IL or missing references)
				//IL_03b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0464: Unknown result type (might be due to invalid IL or missing references)
				//IL_0507: Unknown result type (might be due to invalid IL or missing references)
				//IL_05bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_0663: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_005f: Unknown result type (might be due to invalid IL or missing references)
				//IL_03c7: Unknown result type (might be due to invalid IL or missing references)
				//IL_0478: Unknown result type (might be due to invalid IL or missing references)
				//IL_051b: Unknown result type (might be due to invalid IL or missing references)
				//IL_05d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_06a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0155: Unknown result type (might be due to invalid IL or missing references)
				//IL_015a: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0411: Unknown result type (might be due to invalid IL or missing references)
				//IL_0416: Unknown result type (might be due to invalid IL or missing references)
				//IL_04b4: Unknown result type (might be due to invalid IL or missing references)
				//IL_04b9: Unknown result type (might be due to invalid IL or missing references)
				//IL_060f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0614: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_016f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0171: Unknown result type (might be due to invalid IL or missing references)
				//IL_042b: Unknown result type (might be due to invalid IL or missing references)
				//IL_042d: Unknown result type (might be due to invalid IL or missing references)
				//IL_04ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_04d0: Unknown result type (might be due to invalid IL or missing references)
				//IL_056c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0571: Unknown result type (might be due to invalid IL or missing references)
				//IL_062a: Unknown result type (might be due to invalid IL or missing references)
				//IL_062c: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0586: Unknown result type (might be due to invalid IL or missing references)
				//IL_0588: Unknown result type (might be due to invalid IL or missing references)
				//IL_0234: Unknown result type (might be due to invalid IL or missing references)
				//IL_0239: Unknown result type (might be due to invalid IL or missing references)
				//IL_0299: Unknown result type (might be due to invalid IL or missing references)
				//IL_029e: Unknown result type (might be due to invalid IL or missing references)
				//IL_02fe: Unknown result type (might be due to invalid IL or missing references)
				//IL_0303: Unknown result type (might be due to invalid IL or missing references)
				//IL_0360: Unknown result type (might be due to invalid IL or missing references)
				//IL_0365: Unknown result type (might be due to invalid IL or missing references)
				//IL_024e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0250: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b5: Unknown result type (might be due to invalid IL or missing references)
				//IL_0318: Unknown result type (might be due to invalid IL or missing references)
				//IL_031a: Unknown result type (might be due to invalid IL or missing references)
				//IL_037a: Unknown result type (might be due to invalid IL or missing references)
				//IL_037c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightDimmable logicalDeviceLightDimmable = <>4__this;
				CommandResult result;
				try
				{
					if ((uint)num <= 9u)
					{
						goto IL_0066;
					}
					if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLightDimmable).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceLightDimmable", String.Concat(((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).DeviceName, " SendDirectCommandAsync ignored as logical device has been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else if (((CancellationToken)(ref cancelToken)).IsCancellationRequested)
					{
						result = (CommandResult)1;
					}
					else
					{
						if (((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).IsRemoteAccessAvailable)
						{
							goto IL_0066;
						}
						result = (CommandResult)9;
					}
					goto end_IL_000e;
					IL_0066:
					try
					{
						RemoteDimmerMode remoteDimmerMode;
						TaskAwaiter<CommandResult> val;
						switch (num)
						{
						default:
							<remoteDimmer>5__2 = logicalDeviceLightDimmable.RemoteDimmer;
							if ((int)((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).ActiveConnection != 2 || <remoteDimmer>5__2 == null)
							{
								result = (CommandResult)9;
							}
							else
							{
								if (<remoteDimmer>5__2.IsCommandOneShotSupported)
								{
									val = <remoteDimmer>5__2.SendRemoteCommandAsync(command, cancelToken).GetAwaiter();
									if (!val.IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__82>(ref val, ref this);
										return;
									}
									goto IL_012e;
								}
								if (command.Command == DimmableLightCommand.Restore)
								{
									val = <remoteDimmer>5__2.SendCommandDimmableOn().GetAwaiter();
									if (!val.IsCompleted)
									{
										num = (<>1__state = 1);
										<>u__1 = val;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__82>(ref val, ref this);
										return;
									}
									goto IL_01a6;
								}
								if (command.Command == DimmableLightCommand.Settings)
								{
									result = (CommandResult)10;
								}
								else
								{
									remoteDimmerMode = logicalDeviceLightDimmable.RemoteDimmerMode;
									if (remoteDimmerMode != null)
									{
										<newMode>5__3 = command.Command.ConvertToMode();
										if (<newMode>5__3 != ((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).DeviceStatus.Mode)
										{
											switch (<newMode>5__3)
											{
											case DimmableLightMode.Off:
												break;
											case DimmableLightMode.On:
												goto IL_0292;
											case DimmableLightMode.Blink:
												goto IL_02f7;
											case DimmableLightMode.Swell:
												goto IL_0359;
											default:
												goto IL_03b9;
											}
											val = remoteDimmerMode.SendDimmerModeCommand(RemoteDimmableMode.Off).GetAwaiter();
											if (!val.IsCompleted)
											{
												num = (<>1__state = 2);
												<>u__1 = val;
												<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__82>(ref val, ref this);
												return;
											}
											goto IL_0285;
										}
										goto IL_03b9;
									}
									result = (CommandResult)9;
								}
							}
							goto end_IL_000e;
						case 0:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_012e;
						case 1:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_01a6;
						case 2:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0285;
						case 3:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_02ea;
						case 4:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_034f;
						case 5:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_03b1;
						case 6:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0462;
						case 7:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0505;
						case 8:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_05bd;
						case 9:
							{
								val = <>u__1;
								<>u__1 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								goto IL_0661;
							}
							IL_02f7:
							val = remoteDimmerMode.SendDimmerModeCommand(RemoteDimmableMode.Blink).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 4);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__82>(ref val, ref this);
								return;
							}
							goto IL_034f;
							IL_046a:
							if (!((CancellationToken)(ref cancelToken)).IsCancellationRequested)
							{
								if (command.Duration != ((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).DeviceStatus.Duration && logicalDeviceLightDimmable.RemoteDimmerCycleSleepMinutes != null)
								{
									val = logicalDeviceLightDimmable.RemoteDimmerCycleSleepMinutes.SendCommandDuration(command.Duration).GetAwaiter();
									if (!val.IsCompleted)
									{
										num = (<>1__state = 7);
										<>u__1 = val;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__82>(ref val, ref this);
										return;
									}
									goto IL_0505;
								}
								goto IL_050d;
							}
							result = (CommandResult)1;
							goto end_IL_000e;
							IL_034f:
							val.GetResult();
							goto IL_03b9;
							IL_050d:
							if (!((CancellationToken)(ref cancelToken)).IsCancellationRequested)
							{
								if (<newMode>5__3 != DimmableLightMode.Blink && <newMode>5__3 != DimmableLightMode.Swell)
								{
									break;
								}
								if (command.CycleTime1 != ((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).DeviceStatus.CycleTime1)
								{
									RemoteDimmerCycleTime1 remoteDimmerCycleTime = logicalDeviceLightDimmable.RemoteDimmerCycleTime1;
									if (remoteDimmerCycleTime != null)
									{
										val = remoteDimmerCycleTime.SendCommandCycleTime(command.CycleTime1).GetAwaiter();
										if (!val.IsCompleted)
										{
											num = (<>1__state = 8);
											<>u__1 = val;
											<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__82>(ref val, ref this);
											return;
										}
										goto IL_05bd;
									}
								}
								goto IL_05c5;
							}
							result = (CommandResult)1;
							goto end_IL_000e;
							IL_012e:
							result = val.GetResult();
							goto end_IL_000e;
							IL_0292:
							val = remoteDimmerMode.SendDimmerModeCommand(RemoteDimmableMode.Dimmer).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 3);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__82>(ref val, ref this);
								return;
							}
							goto IL_02ea;
							IL_02ea:
							val.GetResult();
							goto IL_03b9;
							IL_0505:
							val.GetResult();
							goto IL_050d;
							IL_01a6:
							result = val.GetResult();
							goto end_IL_000e;
							IL_0661:
							val.GetResult();
							break;
							IL_0285:
							val.GetResult();
							goto IL_03b9;
							IL_03b9:
							if (!((CancellationToken)(ref cancelToken)).IsCancellationRequested)
							{
								if (command.MaxBrightness != ((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).DeviceStatus.MaxBrightness && <newMode>5__3 != DimmableLightMode.Off)
								{
									float maxBrightnessPercent = (float)(int)command.MaxBrightness / 255f;
									val = <remoteDimmer>5__2.SendCommandDimmableMaxBrightnessPercent(maxBrightnessPercent).GetAwaiter();
									if (!val.IsCompleted)
									{
										num = (<>1__state = 6);
										<>u__1 = val;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__82>(ref val, ref this);
										return;
									}
									goto IL_0462;
								}
								goto IL_046a;
							}
							result = (CommandResult)1;
							goto end_IL_000e;
							IL_05c5:
							if (!((CancellationToken)(ref cancelToken)).IsCancellationRequested)
							{
								if (command.CycleTime2 == ((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).DeviceStatus.CycleTime2 || logicalDeviceLightDimmable.RemoteDimmerCycleTime2 == null)
								{
									break;
								}
								val = logicalDeviceLightDimmable.RemoteDimmerCycleTime2.SendCommandCycleTime(command.CycleTime2).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 9);
									<>u__1 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__82>(ref val, ref this);
									return;
								}
								goto IL_0661;
							}
							result = (CommandResult)1;
							goto end_IL_000e;
							IL_03b1:
							val.GetResult();
							goto IL_03b9;
							IL_05bd:
							val.GetResult();
							goto IL_05c5;
							IL_0359:
							val = remoteDimmerMode.SendDimmerModeCommand(RemoteDimmableMode.Swell).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 5);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__82>(ref val, ref this);
								return;
							}
							goto IL_03b1;
							IL_0462:
							val.GetResult();
							goto IL_046a;
						}
						<remoteDimmer>5__2 = null;
					}
					catch (TimeoutException)
					{
						result = (CommandResult)5;
						goto end_IL_000e;
					}
					catch (OperationCanceledException)
					{
						result = (CommandResult)1;
						goto end_IL_000e;
					}
					catch (Exception ex3)
					{
						Exception ex4 = ex3;
						TaggedLog.Error("LogicalDeviceLightDimmable", String.Format("SendDirectCommandAsync failed for {0}: {1}", (object)logicalDeviceLightDimmable, (object)ex4.Message), Array.Empty<object>());
						result = (CommandResult)7;
						goto end_IL_000e;
					}
					result = (CommandResult)0;
					end_IL_000e:;
				}
				catch (Exception ex5)
				{
					Exception exception = ex5;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendRestoreCommandAsync>d__86 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightDimmable <>4__this;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0073: Expected O, but got Unknown
				//IL_004c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0051: Unknown result type (might be due to invalid IL or missing references)
				//IL_0058: Unknown result type (might be due to invalid IL or missing references)
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_0069: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0098: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightDimmable logicalDeviceLightDimmable = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceLightDimmable.SendCommandAsync(LogicalDeviceLightDimmableCommand.MakeRestoreCommand()).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRestoreCommandAsync>d__86>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendSettingsCommandAsync>d__87 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public byte newOnBrightness;

			public LogicalDeviceLightDimmable <>4__this;

			public byte newOnDuration;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_008e: Expected O, but got Unknown
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0084: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_001a: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0050: Unknown result type (might be due to invalid IL or missing references)
				//IL_0051: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightDimmable logicalDeviceLightDimmable = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_0082;
					}
					if (newOnBrightness != 0)
					{
						val = logicalDeviceLightDimmable.SendCommandAsync(LogicalDeviceLightDimmableCommand.MakeSettingsCommand(newOnBrightness, newOnDuration)).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendSettingsCommandAsync>d__87>(ref val, ref this);
							return;
						}
						goto IL_0082;
					}
					result = (CommandResult)2;
					goto end_IL_000e;
					IL_0082:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SetAutoOffDurationAsync>d__116 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightDimmable <>4__this;

			public bool forceTimerReset;

			public byte newDuration;

			private byte <newMaxBrightness>5__2;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_010d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0112: Unknown result type (might be due to invalid IL or missing references)
				//IL_0117: Unknown result type (might be due to invalid IL or missing references)
				//IL_011c: Expected O, but got Unknown
				//IL_0141: Unknown result type (might be due to invalid IL or missing references)
				//IL_0039: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cd: Unknown result type (might be due to invalid IL or missing references)
				//IL_0108: Unknown result type (might be due to invalid IL or missing references)
				//IL_0081: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0090: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a7: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightDimmable logicalDeviceLightDimmable = <>4__this;
				CommandResult result;
				try
				{
					if (num != 0 && ((CommonDisposableNotifyPropertyChanged)logicalDeviceLightDimmable).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceLightDimmable", String.Concat(((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).DeviceName, " SetAutoOffDurationAsync ignored as logical device has been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else
					{
						try
						{
							TaskAwaiter val;
							if (num != 0)
							{
								<newMaxBrightness>5__2 = logicalDeviceLightDimmable.MaxBrightness;
								if (forceTimerReset)
								{
									byte b = (((<newMaxBrightness>5__2 & 1) == 0) ? ((byte)1) : ((byte)0));
									<newMaxBrightness>5__2 = (byte)((logicalDeviceLightDimmable.MaxBrightness & 0xFE) | b);
								}
								val = ((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).WaitForDeviceStatusToHaveDataAsync((int)logicalDeviceLightDimmable.MSCommandTimeout, logicalDeviceLightDimmable._commandCancelToken).GetAwaiter();
								if (!((TaskAwaiter)(ref val)).IsCompleted)
								{
									num = (<>1__state = 0);
									<>u__1 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SetAutoOffDurationAsync>d__116>(ref val, ref this);
									return;
								}
							}
							else
							{
								val = <>u__1;
								<>u__1 = default(TaskAwaiter);
								num = (<>1__state = -1);
							}
							((TaskAwaiter)(ref val)).GetResult();
							logicalDeviceLightDimmable.SendLightCommandRun(logicalDeviceLightDimmable.Mode, <newMaxBrightness>5__2, newDuration, logicalDeviceLightDimmable.CycleTime1, logicalDeviceLightDimmable.CycleTime2);
							result = (CommandResult)0;
						}
						catch (TimeoutException)
						{
							result = (CommandResult)5;
						}
						catch (OperationCanceledException)
						{
							result = (CommandResult)1;
						}
						catch (Object)
						{
							result = (CommandResult)7;
						}
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SetSpeedIntervalAsync>d__123 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightDimmable <>4__this;

			public LogicalDeviceLightSpeedInterval speedInterval;

			private ushort <cycleTime>5__2;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_00ff: Unknown result type (might be due to invalid IL or missing references)
				//IL_0104: Unknown result type (might be due to invalid IL or missing references)
				//IL_0109: Unknown result type (might be due to invalid IL or missing references)
				//IL_010e: Expected O, but got Unknown
				//IL_0133: Unknown result type (might be due to invalid IL or missing references)
				//IL_0039: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_0054: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_007d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0082: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fa: Unknown result type (might be due to invalid IL or missing references)
				//IL_0097: Unknown result type (might be due to invalid IL or missing references)
				//IL_0099: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightDimmable logicalDeviceLightDimmable = <>4__this;
				CommandResult result;
				try
				{
					if (num != 0 && ((CommonDisposableNotifyPropertyChanged)logicalDeviceLightDimmable).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceLightDimmable", String.Concat(((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).DeviceName, " SetAutoOffDurationAsync ignored as logical device has been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else
					{
						try
						{
							TaskAwaiter val;
							if (num != 0)
							{
								<cycleTime>5__2 = DictionaryExtension.TryGetWithCustomDefaultValue<LogicalDeviceLightSpeedInterval, ushort>((IReadOnlyDictionary<LogicalDeviceLightSpeedInterval, ushort>)(object)_lightSpeedIntervalCycleTimeDict, speedInterval, Enumerable.First<KeyValuePair<LogicalDeviceLightSpeedInterval, ushort>>((IEnumerable<KeyValuePair<LogicalDeviceLightSpeedInterval, ushort>>)(object)_lightSpeedIntervalCycleTimeDict).Value);
								val = ((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)logicalDeviceLightDimmable).WaitForDeviceStatusToHaveDataAsync((int)logicalDeviceLightDimmable.MSCommandTimeout, logicalDeviceLightDimmable._commandCancelToken).GetAwaiter();
								if (!((TaskAwaiter)(ref val)).IsCompleted)
								{
									num = (<>1__state = 0);
									<>u__1 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SetSpeedIntervalAsync>d__123>(ref val, ref this);
									return;
								}
							}
							else
							{
								val = <>u__1;
								<>u__1 = default(TaskAwaiter);
								num = (<>1__state = -1);
							}
							((TaskAwaiter)(ref val)).GetResult();
							logicalDeviceLightDimmable.SendLightCommandRun(logicalDeviceLightDimmable.Mode, logicalDeviceLightDimmable.MaxBrightness, logicalDeviceLightDimmable.AutoOffDurationMinutes, <cycleTime>5__2, <cycleTime>5__2);
							result = (CommandResult)0;
						}
						catch (TimeoutException)
						{
							result = (CommandResult)5;
						}
						catch (OperationCanceledException)
						{
							result = (CommandResult)1;
						}
						catch (Object)
						{
							result = (CommandResult)7;
						}
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ToggleAsync>d__93 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceLightDimmable <>4__this;

			public bool restore;

			private ConfiguredTaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_00f8: Expected O, but got Unknown
				//IL_0063: Unknown result type (might be due to invalid IL or missing references)
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_0098: Unknown result type (might be due to invalid IL or missing references)
				//IL_009d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_002c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0030: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_004a: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightDimmable logicalDeviceLightDimmable = <>4__this;
				bool result;
				try
				{
					ConfiguredTaskAwaiter<bool> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_007e;
					}
					if (num != 1)
					{
						if (logicalDeviceLightDimmable.On)
						{
							val = logicalDeviceLightDimmable.TurnOffAsync().ConfigureAwait(false).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<bool>, <ToggleAsync>d__93>(ref val, ref this);
								return;
							}
							goto IL_007e;
						}
						val = logicalDeviceLightDimmable.TurnOnAsync(restore).ConfigureAwait(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<bool>, <ToggleAsync>d__93>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<bool>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
					goto end_IL_000e;
					IL_007e:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TurnOffAsync>d__95 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceLightDimmable <>4__this;

			private ConfiguredTaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_007c: Expected O, but got Unknown
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_001e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0075: Invalid comparison between Unknown and I4
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightDimmable logicalDeviceLightDimmable = <>4__this;
				bool result;
				try
				{
					ConfiguredTaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceLightDimmable.SendCommandOffAsync(waitForCurrentStatus: true).ConfigureAwait(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<CommandResult>, <TurnOffAsync>d__95>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = (int)val.GetResult() == 0;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TurnOnAsync>d__94 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public bool restore;

			public LogicalDeviceLightDimmable <>4__this;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_00b8: Expected O, but got Unknown
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				//IL_008e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0095: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ac: Invalid comparison between Unknown and I4
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0072: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightDimmable logicalDeviceLightDimmable = <>4__this;
				bool result;
				try
				{
					try
					{
						TaskAwaiter<CommandResult> val;
						if (num != 0)
						{
							if (restore && logicalDeviceLightDimmable.ConfiguredAsSwitchedLight)
							{
								TaggedLog.Debug("LogicalDeviceLightDimmable", "TurnOnAsync treating restore request as an 'on' because the dimmable light is configured to behave as a switched light.", Array.Empty<object>());
								restore = false;
							}
							val = (restore ? logicalDeviceLightDimmable.SendRestoreCommandAsync() : logicalDeviceLightDimmable.SendCommandOnAsync(100, 0, waitForCurrentStatus: true)).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <TurnOnAsync>d__94>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
						}
						result = (int)val.GetResult() == 0;
					}
					catch (Object)
					{
						result = false;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceLightDimmable";

		protected ILogicalDeviceCommandRunnerIdsCan IdsCanCommandRunner;

		private CancellationTokenSource _commandCancelSource = new CancellationTokenSource();

		private readonly CancellationToken _commandCancelToken;

		protected uint NumberOfCommandsRunning;

		private object _lockForceUseCommandStatus = (object)new Object();

		public ILogicalDevicePidByte SimulateOnOffStyleLightPid;

		private LogicalDeviceLightDimmableStatus _shownStatus = new LogicalDeviceLightDimmableStatus();

		protected RemoteCommandControl RemoteCommandControl = new RemoteCommandControl();

		protected ILogicalDeviceCommandControlRunner BasicCommandRunner = (ILogicalDeviceCommandControlRunner)new LogicalDeviceCommandControlRunner();

		private static readonly Dictionary<LogicalDeviceLightSpeedInterval, ushort> _lightSpeedIntervalCycleTimeDict;

		public virtual uint MSCommandTimeout => 5000u;

		public virtual uint MSSessionTimeout => 0u;

		public override bool IsLegacyDeviceHazardous => false;

		[field: CompilerGenerated]
		public RemoteOnline RemoteOnline
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteDimmer RemoteDimmer
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteDimmerMode RemoteDimmerMode
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteDimmerCycleTime1 RemoteDimmerCycleTime1
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			private set;
		}

		[field: CompilerGenerated]
		public RemoteDimmerCycleTime2 RemoteDimmerCycleTime2
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			private set;
		}

		[field: CompilerGenerated]
		public RemoteDimmerSleepMinutes RemoteDimmerCycleSleepMinutes
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			private set;
		}

		[field: CompilerGenerated]
		public DimmableLightMode Mode
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public byte Brightness
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public byte MaxBrightness
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		} = 128;

		[field: CompilerGenerated]
		public byte AutoOffDurationMinutes
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		} = 255;

		public Nullable<TimeSpan> MaxAutoOffDurationMinutes
		{
			get
			{
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_000f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0015: Unknown result type (might be due to invalid IL or missing references)
				if (!((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).DeviceCapability.IsExtendedStatusSupported)
				{
					return default(Nullable<TimeSpan>);
				}
				return base.DeviceStatusExtended.SavedSleepTimer;
			}
		}

		[field: CompilerGenerated]
		public int CycleTime1
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public int CycleTime2
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public bool DimEnabled => Mode != DimmableLightMode.Off;

		public bool IsAutoOffDurationEnabled => Mode != DimmableLightMode.Off;

		public bool CycleTimeEnabled
		{
			get
			{
				if (Mode != DimmableLightMode.Blink)
				{
					return Mode == DimmableLightMode.Swell;
				}
				return true;
			}
		}

		public bool ConfiguredAsSwitchedLight => ((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).DeviceCapability.SimulatedOnOffStyleLight == SimulatedOnOffStyleLightCapability.Enabled;

		public bool On => Mode != DimmableLightMode.Off;

		public bool IsCurrentlyOn
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)this).DeviceStatus).HasData)
				{
					return ((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)this).DeviceStatus.Mode != DimmableLightMode.Off;
				}
				return false;
			}
		}

		public bool IsMasterSwitchControllable
		{
			get
			{
				if (((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).DeviceCapability.AllLightsGroupBehavior != AllLightsGroupBehaviorCapability.FeatureNotSupported)
				{
					return ((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).DeviceCapability.AllLightsGroupBehavior == AllLightsGroupBehaviorCapability.FeatureSupportedAndEnabled;
				}
				return !IsSecurityLight;
			}
		}

		public SwitchTransition SwitchInTransition
		{
			get
			{
				if (!On == (((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)this).DeviceStatus.Mode == DimmableLightMode.Off) || NumberOfCommandsRunning == 0)
				{
					return SwitchTransition.No;
				}
				return SwitchTransition.Transitioning;
			}
		}

		public SwitchUsage UsedFor => SwitchUsage.Light;

		public override bool IsRemoteAccessAvailable
		{
			get
			{
				ILogicalDeviceRemoteManager remoteManager = ((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).DeviceService.RemoteManager;
				if (remoteManager == null)
				{
					return false;
				}
				return remoteManager.IsRemoteAccessAvailable((ILogicalDeviceRemote)(object)this, (IRemoteChannelDef)(RemoteDimmer?.Channel));
			}
		}

		public IRemoteChannelDefOnline RemoteOnlineChannel => RemoteOnline?.Channel;

		public bool IsSecurityLight => FunctionNameExtension.IsSecurityLight(((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).LogicalId.FunctionName);

		public byte DimmableBrightness
		{
			get
			{
				if (!IsDimmableBrightnessEnabled)
				{
					return 1;
				}
				return MaxBrightness;
			}
		}

		public bool IsDimmableBrightnessEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if ((int)((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).ActiveConnection != 0)
				{
					return Mode != DimmableLightMode.Off;
				}
				return false;
			}
		}

		public bool SpeedIntervalEnabled
		{
			get
			{
				DimmableLightMode mode = Mode;
				if (mode <= DimmableLightMode.On || mode - 2 > DimmableLightMode.On)
				{
					return false;
				}
				return true;
			}
		}

		public LogicalDeviceLightSpeedInterval SpeedInterval
		{
			get
			{
				//IL_0054: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				<>c__DisplayClass122_0 CS$<>8__locals4 = new <>c__DisplayClass122_0();
				CS$<>8__locals4.cycleTime = Math.Max(CycleTime1, CycleTime2);
				CS$<>8__locals4.nearest = Enumerable.First<ushort>((IEnumerable<ushort>)(object)Enumerable.OrderBy<ushort, long>((IEnumerable<ushort>)(object)_lightSpeedIntervalCycleTimeDict.Values, (Func<ushort, long>)((ushort x) => Math.Abs((long)x - (long)CS$<>8__locals4.cycleTime))));
				return Enumerable.FirstOrDefault<KeyValuePair<LogicalDeviceLightSpeedInterval, ushort>>((IEnumerable<KeyValuePair<LogicalDeviceLightSpeedInterval, ushort>>)(object)_lightSpeedIntervalCycleTimeDict, (Func<KeyValuePair<LogicalDeviceLightSpeedInterval, ushort>, bool>)((KeyValuePair<LogicalDeviceLightSpeedInterval, ushort> x) => x.Value == CS$<>8__locals4.nearest)).Key;
			}
		}

		public LogicalDeviceLightDimmable(ILogicalDeviceId logicalDeviceId, ILogicalDeviceLightDimmableCapability dimmableCapability, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceLightDimmableStatus(), new LogicalDeviceLightDimmableStatusExtended(), dimmableCapability, service, isFunctionClassChangeable)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Expected O, but got Unknown
			//IL_002d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0037: Expected O, but got Unknown
			//IL_006f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0079: Expected O, but got Unknown
			//IL_0105: Unknown result type (might be due to invalid IL or missing references)
			//IL_010a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0116: Expected O, but got Unknown
			//IL_0116: Unknown result type (might be due to invalid IL or missing references)
			//IL_0122: Expected O, but got Unknown
			//IL_0127: Expected O, but got Unknown
			//IL_012e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0133: Unknown result type (might be due to invalid IL or missing references)
			SimulateOnOffStyleLightPid = (ILogicalDevicePidByte)new LogicalDevicePidByte((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)161), (LogicalDeviceSessionType)2);
			RemoteOnline = new RemoteOnline((ILogicalDeviceRemote)(object)this, ((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).RemoteChannels);
			RemoteDimmer = new RemoteDimmer(this, RemoteCommandControl, ((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).RemoteChannels);
			RemoteDimmerMode = new RemoteDimmerMode(this, RemoteCommandControl, ((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).RemoteChannels);
			RemoteDimmerCycleTime1 = new RemoteDimmerCycleTime1(this, RemoteCommandControl, ((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).RemoteChannels);
			RemoteDimmerCycleTime2 = new RemoteDimmerCycleTime2(this, RemoteCommandControl, ((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).RemoteChannels);
			RemoteDimmerCycleSleepMinutes = new RemoteDimmerSleepMinutes(this, RemoteCommandControl, ((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).RemoteChannels);
			LogicalDeviceCommandRunnerIdsCan val = new LogicalDeviceCommandRunnerIdsCan((ILogicalDevice)(object)this);
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).CommandProcessingTime = MSCommandTimeout;
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).SessionKeepAliveTime = MSSessionTimeout;
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)val;
			_commandCancelToken = _commandCancelSource.Token;
		}

		public override void OnDeviceStatusChanged()
		{
			lock (_lockForceUseCommandStatus)
			{
				SyncWithStatus(((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)this).DeviceStatus, NumberOfCommandsRunning == 0, sendChangedNotifications: false);
			}
			LightSendNotifyPropertyChangeMessages();
			((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)this).OnDeviceStatusChanged();
		}

		private void LightSendNotifyPropertyChangeMessages()
		{
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("Mode", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("On", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsCurrentlyOn", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("DimEnabled", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsAutoOffDurationEnabled", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("CycleTimeEnabled", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsDimmableBrightnessEnabled", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("DimmableBrightness", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("SpeedIntervalEnabled", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("SpeedInterval", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("MaxBrightness", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("AutoOffDurationMinutes", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("MaxAutoOffDurationMinutes", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("CycleTime1", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("CycleTime2", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("Brightness", true);
		}

		public override void UpdateDeviceOnline(bool online)
		{
			((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).UpdateDeviceOnline(online);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsDimmableBrightnessEnabled", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("DimmableBrightness", true);
		}

		public override void UpdateRemoteAccessAvailable()
		{
			((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).UpdateRemoteAccessAvailable();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsDimmableBrightnessEnabled", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("DimmableBrightness", true);
		}

		public override void OnDeviceCapabilityChanged()
		{
			((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)this).OnDeviceStatusChanged();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("ConfiguredAsSwitchedLight", true);
		}

		protected void SyncWithStatus(LogicalDeviceLightDimmableStatus status, bool syncAll, bool sendChangedNotifications = true)
		{
			if (syncAll)
			{
				if (Mode != status.Mode)
				{
					Mode = status.Mode;
				}
				if (MaxBrightness != status.MaxBrightness)
				{
					MaxBrightness = status.MaxBrightness;
				}
				if (AutoOffDurationMinutes != status.Duration)
				{
					AutoOffDurationMinutes = status.Duration;
				}
				if (CycleTime1 != status.CycleTime1)
				{
					CycleTime1 = status.CycleTime1;
				}
				if (CycleTime2 != status.CycleTime2)
				{
					CycleTime2 = status.CycleTime2;
				}
			}
			if (Brightness != status.Brightness)
			{
				Brightness = status.Brightness;
			}
			if (sendChangedNotifications)
			{
				LightSendNotifyPropertyChangeMessages();
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task<CommandResult> SendCommandAsync(LogicalDeviceLightDimmableCommand command)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandAsync>d__81 <SendCommandAsync>d__ = default(<SendCommandAsync>d__81);
			<SendCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandAsync>d__.<>4__this = this;
			<SendCommandAsync>d__.command = command;
			<SendCommandAsync>d__.<>1__state = -1;
			<SendCommandAsync>d__.<>t__builder.Start<<SendCommandAsync>d__81>(ref <SendCommandAsync>d__);
			return <SendCommandAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendRemoteCommandAsync(LogicalDeviceLightDimmableCommand command, CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<SendRemoteCommandAsync>d__82 <SendRemoteCommandAsync>d__ = default(<SendRemoteCommandAsync>d__82);
			<SendRemoteCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendRemoteCommandAsync>d__.<>4__this = this;
			<SendRemoteCommandAsync>d__.command = command;
			<SendRemoteCommandAsync>d__.cancelToken = cancelToken;
			<SendRemoteCommandAsync>d__.<>1__state = -1;
			<SendRemoteCommandAsync>d__.<>t__builder.Start<<SendRemoteCommandAsync>d__82>(ref <SendRemoteCommandAsync>d__);
			return <SendRemoteCommandAsync>d__.<>t__builder.Task;
		}

		public void SendLightCommandRun(DimmableLightMode newMode, byte newOnMaxBrightness, byte newOnDuration, int newBlinkSwellCycleTime1, int newBlinkSwellCycleTime2)
		{
			SendCommandAsync(new LogicalDeviceLightDimmableCommand(newMode, newOnMaxBrightness, newOnDuration, newBlinkSwellCycleTime1, newBlinkSwellCycleTime2)).ContinueWith((Action<Task<CommandResult>>)delegate(Task<CommandResult> result)
			{
				object obj;
				if (result == null)
				{
					obj = null;
				}
				else
				{
					AggregateException exception = ((Task)result).Exception;
					obj = ((exception != null) ? ((Exception)exception).Message : null);
				}
				TaggedLog.Debug("LogicalDeviceLightDimmable", String.Concat("SendLightCommandRun ", (string)obj), Array.Empty<object>());
			}, (TaskContinuationOptions)327680);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommandOffAsync(bool waitForCurrentStatus)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandOffAsync>d__84 <SendCommandOffAsync>d__ = default(<SendCommandOffAsync>d__84);
			<SendCommandOffAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandOffAsync>d__.<>4__this = this;
			<SendCommandOffAsync>d__.waitForCurrentStatus = waitForCurrentStatus;
			<SendCommandOffAsync>d__.<>1__state = -1;
			<SendCommandOffAsync>d__.<>t__builder.Start<<SendCommandOffAsync>d__84>(ref <SendCommandOffAsync>d__);
			return <SendCommandOffAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommandOnAsync(byte newOnBrightness, byte newOnDuration, bool waitForCurrentStatus)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandOnAsync>d__85 <SendCommandOnAsync>d__ = default(<SendCommandOnAsync>d__85);
			<SendCommandOnAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandOnAsync>d__.<>4__this = this;
			<SendCommandOnAsync>d__.newOnBrightness = newOnBrightness;
			<SendCommandOnAsync>d__.newOnDuration = newOnDuration;
			<SendCommandOnAsync>d__.waitForCurrentStatus = waitForCurrentStatus;
			<SendCommandOnAsync>d__.<>1__state = -1;
			<SendCommandOnAsync>d__.<>t__builder.Start<<SendCommandOnAsync>d__85>(ref <SendCommandOnAsync>d__);
			return <SendCommandOnAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendRestoreCommandAsync()
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendRestoreCommandAsync>d__86 <SendRestoreCommandAsync>d__ = default(<SendRestoreCommandAsync>d__86);
			<SendRestoreCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendRestoreCommandAsync>d__.<>4__this = this;
			<SendRestoreCommandAsync>d__.<>1__state = -1;
			<SendRestoreCommandAsync>d__.<>t__builder.Start<<SendRestoreCommandAsync>d__86>(ref <SendRestoreCommandAsync>d__);
			return <SendRestoreCommandAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendSettingsCommandAsync(byte newOnBrightness, byte newOnDuration)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendSettingsCommandAsync>d__87 <SendSettingsCommandAsync>d__ = default(<SendSettingsCommandAsync>d__87);
			<SendSettingsCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendSettingsCommandAsync>d__.<>4__this = this;
			<SendSettingsCommandAsync>d__.newOnBrightness = newOnBrightness;
			<SendSettingsCommandAsync>d__.newOnDuration = newOnDuration;
			<SendSettingsCommandAsync>d__.<>1__state = -1;
			<SendSettingsCommandAsync>d__.<>t__builder.Start<<SendSettingsCommandAsync>d__87>(ref <SendSettingsCommandAsync>d__);
			return <SendSettingsCommandAsync>d__.<>t__builder.Task;
		}

		public Task SetSimulateOnOffStyleLightAsync(SimulatedOnOffStyleLightCapability onOffStyleLightCapability, CancellationToken cancellationToken)
		{
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			//IL_001b: Unknown result type (might be due to invalid IL or missing references)
			if (onOffStyleLightCapability == SimulatedOnOffStyleLightCapability.Enabled || onOffStyleLightCapability == SimulatedOnOffStyleLightCapability.Disabled)
			{
				return ((ILogicalDevicePid<byte>)(object)SimulateOnOffStyleLightPid).WriteAsync((byte)onOffStyleLightCapability, cancellationToken);
			}
			throw new InvalidDataException("SimulatedOnOffStyleLightCapability must be either Enabled or Disabled");
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> ToggleAsync(bool restore = true)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<ToggleAsync>d__93 <ToggleAsync>d__ = default(<ToggleAsync>d__93);
			<ToggleAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<ToggleAsync>d__.<>4__this = this;
			<ToggleAsync>d__.restore = restore;
			<ToggleAsync>d__.<>1__state = -1;
			<ToggleAsync>d__.<>t__builder.Start<<ToggleAsync>d__93>(ref <ToggleAsync>d__);
			return <ToggleAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TurnOnAsync(bool restore = true)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<TurnOnAsync>d__94 <TurnOnAsync>d__ = default(<TurnOnAsync>d__94);
			<TurnOnAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TurnOnAsync>d__.<>4__this = this;
			<TurnOnAsync>d__.restore = restore;
			<TurnOnAsync>d__.<>1__state = -1;
			<TurnOnAsync>d__.<>t__builder.Start<<TurnOnAsync>d__94>(ref <TurnOnAsync>d__);
			return <TurnOnAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TurnOffAsync()
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<TurnOffAsync>d__95 <TurnOffAsync>d__ = default(<TurnOffAsync>d__95);
			<TurnOffAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TurnOffAsync>d__.<>4__this = this;
			<TurnOffAsync>d__.<>1__state = -1;
			<TurnOffAsync>d__.<>t__builder.Start<<TurnOffAsync>d__95>(ref <TurnOffAsync>d__);
			return <TurnOffAsync>d__.<>t__builder.Task;
		}

		public override void OnLogicalIdChanged()
		{
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsSecurityLight", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsMasterSwitchControllable", true);
			((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).OnLogicalIdChanged();
		}

		public override void Dispose(bool disposing)
		{
			CancellationTokenSourceExtension.TryCancelAndDispose(_commandCancelSource);
			_commandCancelSource = null;
			RemoteOnline remoteOnline = RemoteOnline;
			if (remoteOnline != null)
			{
				((CommonDisposable)remoteOnline).TryDispose();
			}
			RemoteOnline = null;
			RemoteDimmer remoteDimmer = RemoteDimmer;
			if (remoteDimmer != null)
			{
				((CommonDisposable)remoteDimmer).TryDispose();
			}
			RemoteDimmer = null;
			RemoteDimmerMode remoteDimmerMode = RemoteDimmerMode;
			if (remoteDimmerMode != null)
			{
				((CommonDisposable)remoteDimmerMode).TryDispose();
			}
			RemoteDimmerMode = null;
			RemoteDimmerCycleTime1 remoteDimmerCycleTime = RemoteDimmerCycleTime1;
			if (remoteDimmerCycleTime != null)
			{
				((CommonDisposable)remoteDimmerCycleTime).TryDispose();
			}
			RemoteDimmerCycleTime1 = null;
			RemoteDimmerCycleTime2 remoteDimmerCycleTime2 = RemoteDimmerCycleTime2;
			if (remoteDimmerCycleTime2 != null)
			{
				((CommonDisposable)remoteDimmerCycleTime2).TryDispose();
			}
			RemoteDimmerCycleTime2 = null;
			RemoteDimmerSleepMinutes remoteDimmerCycleSleepMinutes = RemoteDimmerCycleSleepMinutes;
			if (remoteDimmerCycleSleepMinutes != null)
			{
				((CommonDisposable)remoteDimmerCycleSleepMinutes).TryDispose();
			}
			RemoteDimmerCycleSleepMinutes = null;
			RemoteCommandControl remoteCommandControl = RemoteCommandControl;
			if (remoteCommandControl != null)
			{
				((CommonDisposable)remoteCommandControl).TryDispose();
			}
			RemoteCommandControl = null;
			ILogicalDeviceCommandRunnerIdsCan idsCanCommandRunner = IdsCanCommandRunner;
			if (idsCanCommandRunner != null)
			{
				((ICommonDisposable)idsCanCommandRunner).TryDispose();
			}
			ILogicalDeviceCommandControlRunner basicCommandRunner = BasicCommandRunner;
			if (basicCommandRunner != null)
			{
				((ICommonDisposable)basicCommandRunner).TryDispose();
			}
			base.Dispose(disposing);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendDimmableBrightnessCommandAsync(byte brightness)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendDimmableBrightnessCommandAsync>d__112 <SendDimmableBrightnessCommandAsync>d__ = default(<SendDimmableBrightnessCommandAsync>d__112);
			<SendDimmableBrightnessCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendDimmableBrightnessCommandAsync>d__.<>4__this = this;
			<SendDimmableBrightnessCommandAsync>d__.brightness = brightness;
			<SendDimmableBrightnessCommandAsync>d__.<>1__state = -1;
			<SendDimmableBrightnessCommandAsync>d__.<>t__builder.Start<<SendDimmableBrightnessCommandAsync>d__112>(ref <SendDimmableBrightnessCommandAsync>d__);
			return <SendDimmableBrightnessCommandAsync>d__.<>t__builder.Task;
		}

		public Task<CommandResult> SetAutoOffDurationAsync(byte newDuration)
		{
			return SetAutoOffDurationAsync(newDuration, forceTimerReset: true);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SetAutoOffDurationAsync(byte newDuration, bool forceTimerReset)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SetAutoOffDurationAsync>d__116 <SetAutoOffDurationAsync>d__ = default(<SetAutoOffDurationAsync>d__116);
			<SetAutoOffDurationAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SetAutoOffDurationAsync>d__.<>4__this = this;
			<SetAutoOffDurationAsync>d__.newDuration = newDuration;
			<SetAutoOffDurationAsync>d__.forceTimerReset = forceTimerReset;
			<SetAutoOffDurationAsync>d__.<>1__state = -1;
			<SetAutoOffDurationAsync>d__.<>t__builder.Start<<SetAutoOffDurationAsync>d__116>(ref <SetAutoOffDurationAsync>d__);
			return <SetAutoOffDurationAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> PerformCommand(DimmableLightMode mode)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<PerformCommand>d__117 <PerformCommand>d__ = default(<PerformCommand>d__117);
			<PerformCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<PerformCommand>d__.<>4__this = this;
			<PerformCommand>d__.mode = mode;
			<PerformCommand>d__.<>1__state = -1;
			<PerformCommand>d__.<>t__builder.Start<<PerformCommand>d__117>(ref <PerformCommand>d__);
			return <PerformCommand>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SetSpeedIntervalAsync(LogicalDeviceLightSpeedInterval speedInterval)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SetSpeedIntervalAsync>d__123 <SetSpeedIntervalAsync>d__ = default(<SetSpeedIntervalAsync>d__123);
			<SetSpeedIntervalAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SetSpeedIntervalAsync>d__.<>4__this = this;
			<SetSpeedIntervalAsync>d__.speedInterval = speedInterval;
			<SetSpeedIntervalAsync>d__.<>1__state = -1;
			<SetSpeedIntervalAsync>d__.<>t__builder.Start<<SetSpeedIntervalAsync>d__123>(ref <SetSpeedIntervalAsync>d__);
			return <SetSpeedIntervalAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> PerformCommand(LogicalDeviceLightSpeedInterval speedInterval)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<PerformCommand>d__124 <PerformCommand>d__ = default(<PerformCommand>d__124);
			<PerformCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<PerformCommand>d__.<>4__this = this;
			<PerformCommand>d__.speedInterval = speedInterval;
			<PerformCommand>d__.<>1__state = -1;
			<PerformCommand>d__.<>t__builder.Start<<PerformCommand>d__124>(ref <PerformCommand>d__);
			return <PerformCommand>d__.<>t__builder.Task;
		}

		static LogicalDeviceLightDimmable()
		{
			Dictionary<LogicalDeviceLightSpeedInterval, ushort> obj = new Dictionary<LogicalDeviceLightSpeedInterval, ushort>();
			obj.Add(LogicalDeviceLightSpeedInterval.Slow, (ushort)2447);
			obj.Add(LogicalDeviceLightSpeedInterval.Medium, (ushort)1055);
			obj.Add(LogicalDeviceLightSpeedInterval.Fast, (ushort)220);
			_lightSpeedIntervalCycleTimeDict = obj;
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).LastReceivedNetworkStatus;
		}

		TRemoteChannelDef ILogicalDeviceRemote.GetRemoteChannelForChannelId<TRemoteChannelDef>(string channelId)
		{
			return ((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).GetRemoteChannelForChannelId<TRemoteChannelDef>(channelId);
		}
	}
	public interface ILogicalDeviceLightDimmableCapability : ILogicalDeviceCapability, INotifyPropertyChanged
	{
		bool IsExtendedStatusSupported { get; }

		SimulatedOnOffStyleLightCapability SimulatedOnOffStyleLight { get; }

		bool RgbGangable { get; }

		PhysicalSwitchTypeCapability PhysicalSwitchType { get; }

		AllLightsGroupBehaviorCapability AllLightsGroupBehavior { get; }
	}
	public class LogicalDeviceLightDimmableCapability : LogicalDeviceCapability, ILogicalDeviceLightDimmableCapability, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		private const byte ExtendedStatusSupportedBitmask = 4;

		private static readonly BitPositionValue SimulateOnOffSwitchStyleLightBitPosition = new BitPositionValue(24u, 0, 1);

		private const byte RgbGangableBitmask = 32;

		private static readonly BitPositionValue PhysicalSwitchTypeBitPosition = new BitPositionValue(192u, 0, 1);

		private static readonly BitPositionValue AllLightsGroupFeaturePosition = new BitPositionValue(3u, 0, 1);

		public readonly LogicalDeviceCapabilitySerializable LogicalDeviceCapabilityDimmableGangableSerializable = LogicalDeviceCapabilitySerializable.op_Implicit("RgbGangable");

		public readonly LogicalDeviceCapabilitySerializable LogicalDeviceCapabilityDimmableExtendedStatusSupportedSerializable = LogicalDeviceCapabilitySerializable.op_Implicit("ExtendedStatusSupported");

		public bool IsExtendedStatusSupported => (base.RawValue & 4) == 4;

		public bool RgbGangable => (base.RawValue & 0x20) == 32;

		public SimulatedOnOffStyleLightCapability SimulatedOnOffStyleLight
		{
			get
			{
				//IL_0000: Unknown result type (might be due to invalid IL or missing references)
				//IL_0005: Unknown result type (might be due to invalid IL or missing references)
				BitPositionValue simulateOnOffSwitchStyleLightBitPosition = SimulateOnOffSwitchStyleLightBitPosition;
				return (SimulatedOnOffStyleLightCapability)((BitPositionValue)(ref simulateOnOffSwitchStyleLightBitPosition)).DecodeValue((uint)base.RawValue);
			}
		}

		public PhysicalSwitchTypeCapability PhysicalSwitchType
		{
			get
			{
				//IL_0000: Unknown result type (might be due to invalid IL or missing references)
				//IL_0005: Unknown result type (might be due to invalid IL or missing references)
				BitPositionValue physicalSwitchTypeBitPosition = PhysicalSwitchTypeBitPosition;
				return (PhysicalSwitchTypeCapability)((BitPositionValue)(ref physicalSwitchTypeBitPosition)).DecodeValue((uint)base.RawValue);
			}
		}

		public AllLightsGroupBehaviorCapability AllLightsGroupBehavior
		{
			get
			{
				//IL_0000: Unknown result type (might be due to invalid IL or missing references)
				//IL_0005: Unknown result type (might be due to invalid IL or missing references)
				BitPositionValue allLightsGroupFeaturePosition = AllLightsGroupFeaturePosition;
				return (AllLightsGroupBehaviorCapability)((BitPositionValue)(ref allLightsGroupFeaturePosition)).DecodeValue((uint)base.RawValue);
			}
		}

		public override IEnumerable<LogicalDeviceCapabilitySerializable> ActiveCapabilities
		{
			[IteratorStateMachine(/*Could not decode attribute arguments.*/)]
			get
			{
				yield return PhysicalSwitchType.ToCapabilitySerializable();
				yield return AllLightsGroupBehavior.ToCapabilitySerializable();
				if (RgbGangable)
				{
					yield return LogicalDeviceCapabilityDimmableGangableSerializable;
				}
				if (IsExtendedStatusSupported)
				{
					yield return LogicalDeviceCapabilityDimmableExtendedStatusSupportedSerializable;
				}
				yield return SimulatedOnOffStyleLight.ToCapabilitySerializable();
			}
		}

		public LogicalDeviceLightDimmableCapability(Nullable<byte> rawCapabilities)
			: base(rawCapabilities)
		{
		}//IL_0021: Unknown result type (might be due to invalid IL or missing references)


		public LogicalDeviceLightDimmableCapability(SimulatedOnOffStyleLightCapability onOffStyle, PhysicalSwitchTypeCapability physicalSwitchType, bool rgbGangable = false, bool extendedStatusSupported = false, AllLightsGroupBehaviorCapability allLightsGroupBehavior = AllLightsGroupBehaviorCapability.FeatureNotSupported)
			: this(new Nullable<byte>(MakeRawCapability(onOffStyle, physicalSwitchType, rgbGangable, extendedStatusSupported, allLightsGroupBehavior)))
		{
		}//IL_000d: Unknown result type (might be due to invalid IL or missing references)


		public LogicalDeviceLightDimmableCapability()
			: this(new Nullable<byte>((byte)0))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)


		private static byte MakeRawCapability(SimulatedOnOffStyleLightCapability onOffStyle, PhysicalSwitchTypeCapability physicalSwitchType, bool rgbGangable = false, bool extendedStatusSupported = false, AllLightsGroupBehaviorCapability allLightsGroupBehavior = AllLightsGroupBehaviorCapability.FeatureNotSupported)
		{
			//IL_0003: Unknown result type (might be due to invalid IL or missing references)
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			//IL_001c: Unknown result type (might be due to invalid IL or missing references)
			//IL_002b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0030: Unknown result type (might be due to invalid IL or missing references)
			byte b = 0;
			byte num = b;
			BitPositionValue val = SimulateOnOffSwitchStyleLightBitPosition;
			b = (byte)(num | (byte)((BitPositionValue)(ref val)).EncodeValue((uint)onOffStyle, 0u));
			byte num2 = b;
			val = PhysicalSwitchTypeBitPosition;
			b = (byte)(num2 | (byte)((BitPositionValue)(ref val)).EncodeValue((uint)physicalSwitchType, 0u));
			byte num3 = b;
			val = AllLightsGroupFeaturePosition;
			b = (byte)(num3 | (byte)((BitPositionValue)(ref val)).EncodeValue((uint)allLightsGroupBehavior, 0u));
			if (rgbGangable)
			{
				b |= 0x20;
			}
			if (extendedStatusSupported)
			{
				b |= 4;
			}
			return b;
		}

		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("SimulatedOnOffStyleLight");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("RgbGangable");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsExtendedStatusSupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("PhysicalSwitchType");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("AllLightsGroupBehavior");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}
	}
	public class LogicalDeviceLightDimmableFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_002b: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DeviceCategory.GetDeviceCategory(logicalDeviceId) != DeviceCategory.Light)
			{
				return null;
			}
			LogicalDeviceLightDimmableCapability dimmableCapability = new LogicalDeviceLightDimmableCapability(rawCapability);
			return (ILogicalDevice)(object)new LogicalDeviceLightDimmable(logicalDeviceId, dimmableCapability, service);
		}
	}
	public class LogicalDeviceLightDimmableSim : LogicalDeviceLightDimmable, ILogicalDeviceCommandRunnerIdsCan, INotifyPropertyChanged, ICommonDisposable, IDisposable, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, IDevicesCommon
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <<-ctor>b__15_0>d : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceLightDimmableSim <>4__this;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_009a: Expected O, but got Unknown
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				//IL_0069: Unknown result type (might be due to invalid IL or missing references)
				//IL_0070: Unknown result type (might be due to invalid IL or missing references)
				//IL_002a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_0039: Unknown result type (might be due to invalid IL or missing references)
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_004e: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightDimmableSim logicalDeviceLightDimmableSim = <>4__this;
				try
				{
					if (num != 0)
					{
						goto IL_0087;
					}
					TaskAwaiter<bool> val = <>u__1;
					<>u__1 = default(TaskAwaiter<bool>);
					num = (<>1__state = -1);
					goto IL_007f;
					IL_007f:
					val.GetResult();
					goto IL_0087;
					IL_0087:
					if (!logicalDeviceLightDimmableSim._simTaskCancelSource.IsCancellationRequested)
					{
						logicalDeviceLightDimmableSim.ApplyDeviceStatus();
						logicalDeviceLightDimmableSim.SimTick();
						val = TaskExtension.TryDelay(250, logicalDeviceLightDimmableSim._simTaskCancelSource.Token).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<-ctor>b__15_0>d>(ref val, ref this);
							return;
						}
						goto IL_007f;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandAsync>d__24 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightDimmableSim <>4__this;

			public LogicalDeviceLightDimmableCommand command;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_00dd: Expected O, but got Unknown
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_0083: Unknown result type (might be due to invalid IL or missing references)
				//IL_0088: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d8: Unknown result type (might be due to invalid IL or missing references)
				//IL_009d: Unknown result type (might be due to invalid IL or missing references)
				//IL_009f: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0102: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightDimmableSim logicalDeviceLightDimmableSim = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					TaskAwaiter val2;
					if (num != 0)
					{
						if (num == 1)
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_00d1;
						}
						val2 = Task.Delay(500).GetAwaiter();
						if (!((TaskAwaiter)(ref val2)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SendCommandAsync>d__24>(ref val2, ref this);
							return;
						}
					}
					else
					{
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val2)).GetResult();
					val = ((LogicalDeviceLightDimmable)logicalDeviceLightDimmableSim).SendCommandAsync(command).GetAwaiter();
					if (!val.IsCompleted)
					{
						num = (<>1__state = 1);
						<>u__2 = val;
						<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandAsync>d__24>(ref val, ref this);
						return;
					}
					goto IL_00d1;
					IL_00d1:
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceLightDimmableSim";

		private const int _tickIntervalMs = 250;

		private CancellationTokenSource _simTaskCancelSource = new CancellationTokenSource();

		private LogicalDeviceLightDimmableStatus _simStatus = new LogicalDeviceLightDimmableStatus();

		private DimmableLightMode _lastOnMode = DimmableLightMode.On;

		private bool _commandSessionActivated;

		private bool _simSwellDirectionUp;

		private int _simBrightnessTimeMs;

		private int _simDurationTimeMs;

		public override bool IsLegacyDeviceHazardous => false;

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public override bool ActiveSession => CommandSessionActivated;

		public bool IsRunningCommands => false;

		public bool HasQueuedCommands => false;

		public bool CommandSessionActivated => _commandSessionActivated;

		public LogicalDeviceLightDimmableSim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceLightDimmableCapability dimmableCapability, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, dimmableCapability, service, isFunctionClassChangeable)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_0047: Unknown result type (might be due to invalid IL or missing references)
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)(object)this;
			RestartSim();
			Task.Run((Func<Task>)([AsyncStateMachine(/*Could not decode attribute arguments.*/)] [CompilerGenerated] () =>
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<-ctor>b__15_0>d <<-ctor>b__15_0>d = default(<<-ctor>b__15_0>d);
				<<-ctor>b__15_0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<-ctor>b__15_0>d.<>4__this = this;
				<<-ctor>b__15_0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<-ctor>b__15_0>d.<>t__builder)).Start<<<-ctor>b__15_0>d>(ref <<-ctor>b__15_0>d);
				return ((AsyncTaskMethodBuilder)(ref <<-ctor>b__15_0>d.<>t__builder)).Task;
			}), _simTaskCancelSource.Token);
		}

		private void ApplyDeviceStatus()
		{
			lock (this)
			{
				((LogicalDevice<LogicalDeviceLightDimmableStatus, ILogicalDeviceLightDimmableCapability>)(object)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).MinSize);
			}
		}

		public Task CommandActivateSession(CancellationToken cancelToken, bool activateSessionNow = true)
		{
			bool flag = !CommandSessionActivated;
			TaggedLog.Debug("LogicalDeviceLightDimmableSim", String.Format("CommandActivateSession (SIM) for {0} - Start ChangingState={1}", (object)((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).DeviceName, (object)flag), Array.Empty<object>());
			_commandSessionActivated = true;
			if (flag)
			{
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("ActiveSession", true);
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("CommandSessionActivated", true);
			}
			TaggedLog.Debug("LogicalDeviceLightDimmableSim", String.Concat("CommandActivateSession (SIM) for ", ((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).DeviceName, " - Stop"), Array.Empty<object>());
			return (Task)(object)Task.FromResult<int>(0);
		}

		public void CommandDeactivateSession(bool closeSession = true)
		{
			bool commandSessionActivated = CommandSessionActivated;
			TaggedLog.Debug("LogicalDeviceLightDimmableSim", String.Format("CommandDeactivateSession (SIM) for {0} - Start ChangingState={1}", (object)((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).DeviceName, (object)commandSessionActivated), Array.Empty<object>());
			_commandSessionActivated = false;
			if (commandSessionActivated)
			{
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("ActiveSession", true);
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("CommandSessionActivated", true);
			}
			TaggedLog.Debug("LogicalDeviceLightDimmableSim", String.Concat("CommandDeactivateSession (SIM) for ", ((LogicalDevice<ILogicalDeviceLightDimmableCapability>)(object)this).DeviceName, " - Stop"), Array.Empty<object>());
		}

		public Task<CommandResult> SendCommandAsync(IDeviceCommandPacket dataPacket, CancellationToken cancelToken, Func<ILogicalDevice, CommandControl> cmdControl = null, CommandSendOption options = (CommandSendOption)0)
		{
			//IL_0019: Unknown result type (might be due to invalid IL or missing references)
			//IL_001b: Unknown result type (might be due to invalid IL or missing references)
			return SendCommandAsync(dataPacket.CommandByte, ((IDeviceDataPacket)dataPacket).CopyCurrentData(), ((IDeviceDataPacket)dataPacket).Size, dataPacket.CommandResponseTimeMs, cancelToken, cmdControl, options);
		}

		public Task<CommandResult> SendCommandAsync(byte commandByte, byte[] data, uint dataSize, int responseTimeMs, CancellationToken cancelToken, Func<ILogicalDevice, CommandControl> cmdControl = null, CommandSendOption options = (CommandSendOption)0)
		{
			if (dataSize != 8 || data.Length < 8)
			{
				return Task.FromResult<CommandResult>((CommandResult)7);
			}
			LogicalDeviceLightDimmableCommand logicalDeviceLightDimmableCommand = new LogicalDeviceLightDimmableCommand(commandByte, data);
			switch (logicalDeviceLightDimmableCommand.Command)
			{
			case DimmableLightCommand.Off:
				_simStatus.SetLightMode(DimmableLightMode.Off);
				break;
			case DimmableLightCommand.On:
				_simStatus.SetLightMode(DimmableLightMode.On);
				_simStatus.SetMaxBrightness(logicalDeviceLightDimmableCommand.MaxBrightness);
				_simStatus.SetDuration(logicalDeviceLightDimmableCommand.Duration);
				_lastOnMode = DimmableLightMode.On;
				break;
			case DimmableLightCommand.Blink:
				_simStatus.SetLightMode(DimmableLightMode.Blink);
				_simStatus.SetMaxBrightness(logicalDeviceLightDimmableCommand.MaxBrightness);
				_simStatus.SetDuration(logicalDeviceLightDimmableCommand.Duration);
				_simStatus.SetCycleTime1(logicalDeviceLightDimmableCommand.CycleTime1);
				_simStatus.SetCycleTime2(logicalDeviceLightDimmableCommand.CycleTime2);
				_lastOnMode = DimmableLightMode.Blink;
				break;
			case DimmableLightCommand.Swell:
				_simStatus.SetLightMode(DimmableLightMode.Swell);
				_simStatus.SetMaxBrightness(logicalDeviceLightDimmableCommand.MaxBrightness);
				_simStatus.SetDuration(logicalDeviceLightDimmableCommand.Duration);
				_simStatus.SetCycleTime1(logicalDeviceLightDimmableCommand.CycleTime1);
				_simStatus.SetCycleTime2(logicalDeviceLightDimmableCommand.CycleTime2);
				_lastOnMode = DimmableLightMode.Swell;
				break;
			case DimmableLightCommand.Settings:
				_simStatus.SetMaxBrightness(logicalDeviceLightDimmableCommand.MaxBrightness);
				_simStatus.SetDuration(logicalDeviceLightDimmableCommand.Duration);
				break;
			case DimmableLightCommand.Restore:
				_simStatus.SetLightMode(_lastOnMode);
				break;
			}
			ApplyDeviceStatus();
			RestartSim();
			return Task.FromResult<CommandResult>((CommandResult)0);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public override Task<CommandResult> SendCommandAsync(LogicalDeviceLightDimmableCommand command)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandAsync>d__24 <SendCommandAsync>d__ = default(<SendCommandAsync>d__24);
			<SendCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandAsync>d__.<>4__this = this;
			<SendCommandAsync>d__.command = command;
			<SendCommandAsync>d__.<>1__state = -1;
			<SendCommandAsync>d__.<>t__builder.Start<<SendCommandAsync>d__24>(ref <SendCommandAsync>d__);
			return <SendCommandAsync>d__.<>t__builder.Task;
		}

		public override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
			CancellationTokenSource simTaskCancelSource = _simTaskCancelSource;
			if (simTaskCancelSource != null)
			{
				CancellationTokenSourceExtension.TryCancelAndDispose(simTaskCancelSource);
			}
			_simTaskCancelSource = null;
		}

		private void RestartSim()
		{
			_simSwellDirectionUp = true;
			_simBrightnessTimeMs = _simStatus.CycleTime1;
			_simDurationTimeMs = _simStatus.Duration * 60000;
			switch (_simStatus.Mode)
			{
			case DimmableLightMode.On:
			case DimmableLightMode.Blink:
				_simStatus.SetBrightness(_simStatus.MaxBrightness);
				break;
			case DimmableLightMode.Off:
			case DimmableLightMode.Swell:
				_simStatus.SetBrightness(0);
				break;
			}
		}

		private void SimTick()
		{
			if (_simStatus.Duration != 0)
			{
				_simDurationTimeMs -= 250;
				if (_simDurationTimeMs <= 0)
				{
					_simStatus.SetDuration(0);
					_simStatus.SetLightMode(DimmableLightMode.Off);
				}
				else
				{
					_simStatus.SetDuration((byte)(_simDurationTimeMs / 60000 + 1));
				}
			}
			switch (_simStatus.Mode)
			{
			case DimmableLightMode.Blink:
				_simBrightnessTimeMs -= 250;
				if (_simBrightnessTimeMs <= 0)
				{
					if (_simSwellDirectionUp)
					{
						_simStatus.SetBrightness(0);
						_simBrightnessTimeMs = _simStatus.CycleTime2;
					}
					else
					{
						_simStatus.SetBrightness(_simStatus.MaxBrightness);
						_simBrightnessTimeMs = _simStatus.CycleTime1;
					}
					_simSwellDirectionUp = !_simSwellDirectionUp;
				}
				break;
			case DimmableLightMode.Swell:
				_simBrightnessTimeMs -= 250;
				if (_simBrightnessTimeMs <= 0)
				{
					if (_simSwellDirectionUp)
					{
						_simStatus.SetBrightness(_simStatus.MaxBrightness);
						_simBrightnessTimeMs = _simStatus.CycleTime2;
					}
					else
					{
						_simStatus.SetBrightness(0);
						_simBrightnessTimeMs = _simStatus.CycleTime1;
					}
					_simSwellDirectionUp = !_simSwellDirectionUp;
				}
				else
				{
					int num = (_simSwellDirectionUp ? _simStatus.CycleTime1 : _simStatus.CycleTime2);
					int num2 = (_simSwellDirectionUp ? (num - _simBrightnessTimeMs) : _simBrightnessTimeMs);
					_simStatus.SetBrightness((byte)(_simStatus.MaxBrightness * num2 / num));
				}
				break;
			case DimmableLightMode.Off:
				_simStatus.SetBrightness(0);
				break;
			case DimmableLightMode.On:
				_simStatus.SetBrightness(_simStatus.MaxBrightness);
				break;
			}
		}
	}
	public enum DimmableLightMode : Enum
	{
		Off,
		On,
		Blink,
		Swell
	}
	public class LogicalDeviceLightDimmableStatus : LogicalDeviceStatusPacketMutable, ILogicalDeviceStatus<LogicalDeviceLightDimmableStatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		private const int MinimumStatusPacketSize = 8;

		public const uint LightModeByteIndex = 0u;

		public const uint MaxBrightnessByteIndex = 1u;

		public const uint DurationByteIndex = 2u;

		public const uint BrightnessByteIndex = 3u;

		public const uint CycleTime1MsbIndex = 4u;

		public const uint CycleTime1LsbIndex = 5u;

		public const uint CycleTime2MsbIndex = 6u;

		public const uint CycleTime2LsbIndex = 7u;

		public static readonly byte MinimumBrightnessValue = 1;

		public static readonly byte MaximumBrightnessValue = 255;

		public static readonly byte InfiniteTime = 0;

		public bool On
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0] > 0;
				}
				return false;
			}
		}

		public bool Off
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0] == 0;
				}
				return false;
			}
		}

		public DimmableLightMode Mode
		{
			get
			{
				try
				{
					return DimmableLightModeFromByte(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0]);
				}
				catch (Object)
				{
					return DimmableLightMode.Off;
				}
			}
		}

		public byte MaxBrightness => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[1];

		public byte Duration => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[2];

		public byte Brightness => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3];

		public int CycleTime1 => (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[4] << 8) | ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[5];

		public int CycleTime2 => (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[6] << 8) | ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[7];

		public LogicalDeviceLightDimmableStatus()
			: base(8u)
		{
		}

		public LogicalDeviceLightDimmableStatus(LogicalDeviceLightDimmableStatus originalStatus)
		{
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalStatus).Data;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(data, data.Length, false);
		}

		public LogicalDeviceLightDimmableStatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceLightDimmableStatusSerializable(this);
		}

		public override string ToString()
		{
			return String.Format("Mode: {0}, MaxBrightness: {1}, Duration: {2}, Brightness: {3}, CycleTime1: {4}, CycleTime2: {5}", (object[])(object)new Object[6]
			{
				(object)Mode,
				(object)MaxBrightness,
				(object)Duration,
				(object)Brightness,
				(object)CycleTime1,
				(object)CycleTime2
			});
		}

		public static DimmableLightMode DimmableLightModeFromByte(byte rawValue)
		{
			//IL_0030: Unknown result type (might be due to invalid IL or missing references)
			return rawValue switch
			{
				0 => DimmableLightMode.Off, 
				1 => DimmableLightMode.On, 
				2 => DimmableLightMode.Blink, 
				3 => DimmableLightMode.Swell, 
				_ => throw new ArgumentOutOfRangeException(String.Format("Unknown DimmableLightMode value 0x{0:x2}", (object)rawValue)), 
			};
		}

		public void SetLightMode(DimmableLightMode mode)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)mode, 0);
		}

		public void SetMaxBrightness(byte maxBrightness)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, maxBrightness, 1);
		}

		public void SetDuration(byte duration)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, duration, 2);
		}

		public void SetBrightness(byte brightness)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, brightness, 3);
		}

		public void SetCycleTime1(int cycleTime)
		{
			byte b = (byte)((cycleTime & 0xFF00) >> 8);
			byte b2 = (byte)(cycleTime & 0xFF);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b, 4);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b2, 5);
		}

		public void SetCycleTime2(int cycleTime)
		{
			byte b = (byte)((cycleTime & 0xFF00) >> 8);
			byte b2 = (byte)(cycleTime & 0xFF);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b, 6);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b2, 7);
		}
	}
	public class LogicalDeviceLightDimmableStatusExtended : LogicalDeviceStatusPacketMutableExtended
	{
		public const int MinimumStatusPacketSize = 8;

		public const int SavedSleepTimerBitMask = 255;

		public const int SavedSleepTimerInvalidOrUnknown = 255;

		public const int SavedSleepTimerIndex = 0;

		public const int SavedSleepTimerMin = 0;

		public const int SavedSleepTimerMax = 254;

		public const byte RawBufferFill = 255;

		public Nullable<TimeSpan> SavedSleepTimer
		{
			get
			{
				//IL_000a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0010: Unknown result type (might be due to invalid IL or missing references)
				//IL_0033: Unknown result type (might be due to invalid IL or missing references)
				//IL_0038: Unknown result type (might be due to invalid IL or missing references)
				//IL_0029: Unknown result type (might be due to invalid IL or missing references)
				//IL_002f: Unknown result type (might be due to invalid IL or missing references)
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return default(Nullable<TimeSpan>);
				}
				byte b = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetByte((byte)255, 0);
				if (b == 255)
				{
					return default(Nullable<TimeSpan>);
				}
				return new Nullable<TimeSpan>(TimeSpan.FromMinutes((double)(int)b));
			}
		}

		public LogicalDeviceLightDimmableStatusExtended()
			: base(8u, 8u, (byte)255)
		{
		}

		public LogicalDeviceLightDimmableStatusExtended(LogicalDeviceLightDimmableStatusExtended originalStatus)
		{
			//IL_001a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0020: Unknown result type (might be due to invalid IL or missing references)
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalStatus).Data;
			((LogicalDeviceStatusPacketMutableExtended)this).Update((IReadOnlyList<byte>)(object)data, (uint)data.Length, ((LogicalDeviceStatusPacketMutableExtended)originalStatus).ExtendedByte, default(Nullable<DateTime>));
		}

		public void SetMinutesRemainingUntilDischarged(TimeSpan timeSpan)
		{
			byte b = (byte)MathCommon.Clamp((int)((TimeSpan)(ref timeSpan)).TotalMinutes, 0, 254);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b, 0);
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceLightDimmableStatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceLightDimmableStatusSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceLightDimmableStatusSerializable);
			}
		}

		[JsonProperty]
		public bool IsOn
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public DimmableLightMode Mode
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte MaxBrightness
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte Duration
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte Brightness
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public int CycleTime1
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public int CycleTime2
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceLightDimmableStatusSerializable(bool isOn, DimmableLightMode mode, byte maxBrightness, byte duration, byte brightness, int cycleTime1, int cycleTime2)
		{
			IsOn = isOn;
			Mode = mode;
			MaxBrightness = maxBrightness;
			Duration = duration;
			Brightness = brightness;
			CycleTime1 = cycleTime1;
			CycleTime2 = cycleTime2;
		}

		public LogicalDeviceLightDimmableStatusSerializable(LogicalDeviceLightDimmableStatus status)
			: this(status.On, status.Mode, status.MaxBrightness, status.Duration, status.Brightness, status.CycleTime1, status.CycleTime2)
		{
		}

		public override byte[] MakeRawData()
		{
			LogicalDeviceLightDimmableStatus logicalDeviceLightDimmableStatus = new LogicalDeviceLightDimmableStatus();
			logicalDeviceLightDimmableStatus.SetLightMode(Mode);
			logicalDeviceLightDimmableStatus.SetBrightness(MaxBrightness);
			logicalDeviceLightDimmableStatus.SetDuration(Duration);
			logicalDeviceLightDimmableStatus.SetBrightness(Brightness);
			logicalDeviceLightDimmableStatus.SetCycleTime1(CycleTime1);
			logicalDeviceLightDimmableStatus.SetCycleTime2(CycleTime2);
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLightDimmableStatus).CopyCurrentData();
		}

		public static LogicalDeviceLightDimmableStatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceLightDimmableStatus logicalDeviceLightDimmableStatus = new LogicalDeviceLightDimmableStatus();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLightDimmableStatus).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLightDimmableStatus).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLightDimmableStatus).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLightDimmableStatus).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLightDimmableStatus).Update(rawData, rawData.Length, false);
			return new LogicalDeviceLightDimmableStatusSerializable(logicalDeviceLightDimmableStatus);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceLightDimmableStatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceLightDimmableStatusSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("IsOn = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsOn)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Mode = ");
			builder.Append(((Object)Mode/*cast due to .constrained prefix*/).ToString());
			builder.Append(", MaxBrightness = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref MaxBrightness)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Duration = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref Duration)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Brightness = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref Brightness)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", CycleTime1 = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref CycleTime1)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", CycleTime2 = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref CycleTime2)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return ((((((base.GetHashCode() * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsOn)) * -1521134295 + EqualityComparer<DimmableLightMode>.Default.GetHashCode(Mode)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(MaxBrightness)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(Duration)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(Brightness)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(CycleTime1)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(CycleTime2);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceLightDimmableStatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceLightDimmableStatusSerializable(LogicalDeviceLightDimmableStatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceLightDimmableStatusSerializable>)original)
		{
			IsOn = original.IsOn;
			Mode = original.Mode;
			MaxBrightness = original.MaxBrightness;
			Duration = original.Duration;
			Brightness = original.Brightness;
			CycleTime1 = original.CycleTime1;
			CycleTime2 = original.CycleTime2;
		}
	}
	public interface ILogicalDeviceLatchingRelayLight : ILogicalDeviceSwitchableLight, ILogicalDeviceSwitchable, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceLight, ILogicalDeviceWithStatus, ILogicalDeviceLatchingRelay, IRelayBasic
	{
	}
	public class LogicalDeviceLightFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_0039: Unknown result type (might be due to invalid IL or missing references)
			//IL_0059: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DeviceCategory.GetDeviceCategory(logicalDeviceId) != DeviceCategory.Light)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) == 3)
			{
				LogicalDeviceRelayCapabilityType1 capability = new LogicalDeviceRelayCapabilityType1(rawCapability);
				return (ILogicalDevice)(object)new LogicalDeviceLightType1(logicalDeviceId, capability, service);
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) == 30)
			{
				LogicalDeviceRelayCapabilityType2 capability2 = new LogicalDeviceRelayCapabilityType2(rawCapability);
				return (ILogicalDevice)(object)new LogicalDeviceLightType2(logicalDeviceId, capability2, service);
			}
			return null;
		}
	}
	public class LogicalDeviceLightType1 : LogicalDeviceRelayBasicLatchingType1, ILogicalDeviceLatchingRelayLight, ILogicalDeviceSwitchableLight, ILogicalDeviceSwitchable, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceLight, ILogicalDeviceWithStatus, ILogicalDeviceLatchingRelay, IRelayBasic
	{
		public bool IsSecurityLight => FunctionNameExtension.IsSecurityLight(((LogicalDevice<LogicalDeviceRelayCapabilityType1>)(object)this).LogicalId.FunctionName);

		public override bool IsMasterSwitchControllable
		{
			get
			{
				if (((LogicalDevice<LogicalDeviceRelayCapabilityType1>)(object)this).DeviceCapability.AllLightsGroupBehavior != AllLightsGroupBehaviorCapability.FeatureNotSupported)
				{
					return ((LogicalDevice<LogicalDeviceRelayCapabilityType1>)(object)this).DeviceCapability.AllLightsGroupBehavior == AllLightsGroupBehaviorCapability.FeatureSupportedAndEnabled;
				}
				return !IsSecurityLight;
			}
		}

		public override SwitchUsage UsedFor => SwitchUsage.Light;

		public LogicalDeviceLightType1(ILogicalDeviceId logicalDeviceId, LogicalDeviceRelayCapabilityType1 capability, ILogicalDeviceService service = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, capability, service, isFunctionClassChangeable)
		{
		}

		public override void OnLogicalIdChanged()
		{
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsSecurityLight", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsMasterSwitchControllable", true);
			((LogicalDevice<LogicalDeviceRelayCapabilityType1>)(object)this).OnLogicalIdChanged();
		}
	}
	public class LogicalDeviceLightType1Sim : LogicalDeviceLightType1, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <<-ctor>b__4_0>d : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceLightType1Sim <>4__this;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_00a1: Expected O, but got Unknown
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0070: Unknown result type (might be due to invalid IL or missing references)
				//IL_0077: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				//IL_0054: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightType1Sim logicalDeviceLightType1Sim = <>4__this;
				try
				{
					if (num != 0)
					{
						goto IL_008e;
					}
					TaskAwaiter<bool> val = <>u__1;
					<>u__1 = default(TaskAwaiter<bool>);
					num = (<>1__state = -1);
					goto IL_0086;
					IL_0086:
					val.GetResult();
					goto IL_008e;
					IL_008e:
					if (!logicalDeviceLightType1Sim._relaySimTaskCancelSource.IsCancellationRequested)
					{
						((LogicalDevice<LogicalDeviceRelayBasicStatusType1, LogicalDeviceRelayCapabilityType1>)logicalDeviceLightType1Sim).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((IDeviceDataPacketMutable)logicalDeviceLightType1Sim._relayStatus).Data, 1u);
						val = TaskExtension.TryDelay(250, logicalDeviceLightType1Sim._relaySimTaskCancelSource.Token).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<-ctor>b__4_0>d>(ref val, ref this);
							return;
						}
						goto IL_0086;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private CancellationTokenSource _relaySimTaskCancelSource = new CancellationTokenSource();

		private ILogicalDeviceRelayBasicStatus _relayStatus = LogicalDeviceRelayBasicLatching<LogicalDeviceRelayBasicStatusType1, LogicalDeviceRelayBasicCommandFactoryLatchingType1, LogicalDeviceRelayCapabilityType1>.MakeNewStatus();

		public override bool IsLegacyDeviceHazardous => false;

		public LogicalDeviceLightType1Sim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service = null)
			: base(logicalDeviceId, new LogicalDeviceRelayCapabilityType1(RelayCapabilityFlagType1.None), service)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_0048: Unknown result type (might be due to invalid IL or missing references)
			IdsCanCommandRunnerDefault = (ILogicalDeviceCommandRunnerIdsCan?)(object)new RelayBasicLatchingCommandRunnerType1Sim(_relayStatus);
			Task.Run((Func<Task>)([AsyncStateMachine(/*Could not decode attribute arguments.*/)] [CompilerGenerated] () =>
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<-ctor>b__4_0>d <<-ctor>b__4_0>d = default(<<-ctor>b__4_0>d);
				<<-ctor>b__4_0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<-ctor>b__4_0>d.<>4__this = this;
				<<-ctor>b__4_0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<-ctor>b__4_0>d.<>t__builder)).Start<<<-ctor>b__4_0>d>(ref <<-ctor>b__4_0>d);
				return ((AsyncTaskMethodBuilder)(ref <<-ctor>b__4_0>d.<>t__builder)).Task;
			}), _relaySimTaskCancelSource.Token);
		}

		public override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
			CancellationTokenSource relaySimTaskCancelSource = _relaySimTaskCancelSource;
			if (relaySimTaskCancelSource != null)
			{
				relaySimTaskCancelSource.Cancel();
			}
			CancellationTokenSource relaySimTaskCancelSource2 = _relaySimTaskCancelSource;
			if (relaySimTaskCancelSource2 != null)
			{
				relaySimTaskCancelSource2.Dispose();
			}
			_relaySimTaskCancelSource = null;
		}
	}
	public class LogicalDeviceLightType2 : LogicalDeviceRelayBasicLatchingType2, ILogicalDeviceLatchingRelayLight, ILogicalDeviceSwitchableLight, ILogicalDeviceSwitchable, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceLight, ILogicalDeviceWithStatus, ILogicalDeviceLatchingRelay, IRelayBasic
	{
		public bool IsSecurityLight => FunctionNameExtension.IsSecurityLight(((LogicalDevice<LogicalDeviceRelayCapabilityType2>)(object)this).LogicalId.FunctionName);

		public override bool IsMasterSwitchControllable
		{
			get
			{
				if (((LogicalDevice<LogicalDeviceRelayCapabilityType2>)(object)this).DeviceCapability.AllLightsGroupBehavior != AllLightsGroupBehaviorCapability.FeatureNotSupported)
				{
					return ((LogicalDevice<LogicalDeviceRelayCapabilityType2>)(object)this).DeviceCapability.AllLightsGroupBehavior == AllLightsGroupBehaviorCapability.FeatureSupportedAndEnabled;
				}
				return !IsSecurityLight;
			}
		}

		public override SwitchUsage UsedFor => SwitchUsage.Light;

		public LogicalDeviceLightType2(ILogicalDeviceId logicalDeviceId, LogicalDeviceRelayCapabilityType2 capability, ILogicalDeviceService service = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, capability, service, isFunctionClassChangeable)
		{
		}

		public override void OnLogicalIdChanged()
		{
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsSecurityLight", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsMasterSwitchControllable", true);
			((LogicalDevice<LogicalDeviceRelayCapabilityType2>)(object)this).OnLogicalIdChanged();
		}
	}
	public interface ILogicalDeviceLightRgbCapability : ILogicalDeviceCapability, INotifyPropertyChanged
	{
		bool RgbUnGangable { get; }

		PhysicalSwitchTypeCapability PhysicalSwitchType { get; }

		AllLightsGroupBehaviorCapability AllLightsGroupBehavior { get; }
	}
	public class LogicalDeviceLightRgbCapability : LogicalDeviceCapability, ILogicalDeviceLightRgbCapability, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		private enum LogicalDeviceLightRgbCapabilitiesBitShift : Enum
		{
			RgbGangable = 5,
			PhysicalSwitchType = 6,
			AllLightsGroupFeature = 3
		}

		private enum LogicalDeviceLightRgbCapabilitiesMask : Enum
		{
			RgbGangable = 32,
			PhysicalSwitchType = 192,
			AllLightsGroupFeature = 24
		}

		public LogicalDeviceCapabilitySerializable LogicalDeviceCapabilityRgbGangableSerializable = LogicalDeviceCapabilitySerializable.op_Implicit("RgbUnGangable");

		public bool RgbUnGangable => (byte)((base.RawValue & 0x20) >> 5) > 0;

		public PhysicalSwitchTypeCapability PhysicalSwitchType => (PhysicalSwitchTypeCapability)((base.RawValue & 0xC0) >> 6);

		public AllLightsGroupBehaviorCapability AllLightsGroupBehavior => (AllLightsGroupBehaviorCapability)((base.RawValue & 0x18) >> 3);

		public override IEnumerable<LogicalDeviceCapabilitySerializable> ActiveCapabilities
		{
			[IteratorStateMachine(/*Could not decode attribute arguments.*/)]
			get
			{
				yield return PhysicalSwitchType.ToCapabilitySerializable();
				yield return AllLightsGroupBehavior.ToCapabilitySerializable();
				if (RgbUnGangable)
				{
					yield return LogicalDeviceCapabilityRgbGangableSerializable;
				}
			}
		}

		public LogicalDeviceLightRgbCapability(Nullable<byte> rawCapabilities)
		{
		}

		public LogicalDeviceLightRgbCapability()
			: this(new Nullable<byte>((byte)0))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)


		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("RgbUnGangable");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("PhysicalSwitchType");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("AllLightsGroupBehavior");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}
	}
	public class LogicalDeviceLightRgbFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_002d: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 13)
			{
				return null;
			}
			LogicalDeviceLightRgbCapability rgbCapability = new LogicalDeviceLightRgbCapability(rawCapability);
			return (ILogicalDevice)(object)new LogicalDeviceLightRgb(logicalDeviceId, rgbCapability, service);
		}
	}
	public enum LightMasterSwitchControllableState : Enum
	{
		Off,
		On,
		Restore
	}
	public class LogicalDeviceLightMasterSwitchControllableIdsCanEx : LogicalDeviceExBase<ILogicalDeviceSwitchableLight>
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass9_0 : Object
		{
			[StructLayout((LayoutKind)3)]
			private struct <<TryChangeStateAsync>b__0>d : ValueType, IAsyncStateMachine
			{
				public int <>1__state;

				public AsyncTaskMethodBuilder <>t__builder;

				public <>c__DisplayClass9_0 <>4__this;

				private int <debugId>5__2;

				private ILogicalDeviceSwitchableLight <switchedLight>5__3;

				private TaskAwaiter<bool> <>u__1;

				private void MoveNext()
				{
					//IL_0272: Expected O, but got Unknown
					//IL_02de: Expected O, but got Unknown
					//IL_0129: Unknown result type (might be due to invalid IL or missing references)
					//IL_012e: Unknown result type (might be due to invalid IL or missing references)
					//IL_0135: Unknown result type (might be due to invalid IL or missing references)
					//IL_0190: Unknown result type (might be due to invalid IL or missing references)
					//IL_0195: Unknown result type (might be due to invalid IL or missing references)
					//IL_019c: Unknown result type (might be due to invalid IL or missing references)
					//IL_01f4: Unknown result type (might be due to invalid IL or missing references)
					//IL_01f9: Unknown result type (might be due to invalid IL or missing references)
					//IL_0200: Unknown result type (might be due to invalid IL or missing references)
					//IL_00f6: Unknown result type (might be due to invalid IL or missing references)
					//IL_00fb: Unknown result type (might be due to invalid IL or missing references)
					//IL_015d: Unknown result type (might be due to invalid IL or missing references)
					//IL_0162: Unknown result type (might be due to invalid IL or missing references)
					//IL_01c1: Unknown result type (might be due to invalid IL or missing references)
					//IL_01c6: Unknown result type (might be due to invalid IL or missing references)
					//IL_010f: Unknown result type (might be due to invalid IL or missing references)
					//IL_0110: Unknown result type (might be due to invalid IL or missing references)
					//IL_0176: Unknown result type (might be due to invalid IL or missing references)
					//IL_0177: Unknown result type (might be due to invalid IL or missing references)
					//IL_01da: Unknown result type (might be due to invalid IL or missing references)
					//IL_01db: Unknown result type (might be due to invalid IL or missing references)
					int num = <>1__state;
					<>c__DisplayClass9_0 <>c__DisplayClass9_ = <>4__this;
					try
					{
						if ((uint)num > 2u)
						{
							<debugId>5__2 = Interlocked.Increment(ref <>c__DisplayClass9_.<>4__this._debugBackgroundOperationInstanceCount);
							TaggedLog.Debug(((LogicalDeviceExBase<ILogicalDeviceSwitchableLight>)<>c__DisplayClass9_.<>4__this).LogTag, String.Format("[{0}] {1} Started", (object)<debugId>5__2, (object)<>c__DisplayClass9_.state), Array.Empty<object>());
						}
						try
						{
							TaskAwaiter<bool> val;
							switch (num)
							{
							case 0:
								val = <>u__1;
								<>u__1 = default(TaskAwaiter<bool>);
								num = (<>1__state = -1);
								goto IL_0144;
							case 1:
								val = <>u__1;
								<>u__1 = default(TaskAwaiter<bool>);
								num = (<>1__state = -1);
								goto IL_01ab;
							case 2:
								val = <>u__1;
								<>u__1 = default(TaskAwaiter<bool>);
								num = (<>1__state = -1);
								goto IL_020f;
							default:
								{
									if (((CancellationToken)(ref <>c__DisplayClass9_.cancellationToken)).IsCancellationRequested)
									{
										break;
									}
									if (<>c__DisplayClass9_.lightQueue.TryDequeue(ref <switchedLight>5__3))
									{
										TaggedLog.Debug(((LogicalDeviceExBase<ILogicalDeviceSwitchableLight>)<>c__DisplayClass9_.<>4__this).LogTag, String.Format("[{0}] Turning {1} {2} Start", (object)<debugId>5__2, (object)<>c__DisplayClass9_.state, (object)((IDevicesCommon)<switchedLight>5__3).DeviceName), Array.Empty<object>());
										switch (<>c__DisplayClass9_.state)
										{
										case LightMasterSwitchControllableState.Off:
											break;
										case LightMasterSwitchControllableState.On:
											goto IL_0151;
										case LightMasterSwitchControllableState.Restore:
											goto IL_01b5;
										default:
											goto IL_0217;
										}
										val = <switchedLight>5__3.TurnOffAsync().GetAwaiter();
										if (!val.IsCompleted)
										{
											num = (<>1__state = 0);
											<>u__1 = val;
											((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<TryChangeStateAsync>b__0>d>(ref val, ref this);
											return;
										}
										goto IL_0144;
									}
									goto end_IL_000e;
								}
								IL_0144:
								val.GetResult();
								goto IL_0217;
								IL_0217:
								TaggedLog.Debug(((LogicalDeviceExBase<ILogicalDeviceSwitchableLight>)<>c__DisplayClass9_.<>4__this).LogTag, String.Format("[{0}] Turning {1} {2} Finished", (object)<debugId>5__2, (object)<>c__DisplayClass9_.state, (object)((IDevicesCommon)<switchedLight>5__3).DeviceName), Array.Empty<object>());
								<switchedLight>5__3 = null;
								goto default;
								IL_020f:
								val.GetResult();
								goto IL_0217;
								IL_0151:
								val = <switchedLight>5__3.TurnOnAsync(restore: false).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 1);
									<>u__1 = val;
									((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<TryChangeStateAsync>b__0>d>(ref val, ref this);
									return;
								}
								goto IL_01ab;
								IL_01b5:
								val = <switchedLight>5__3.TurnOnAsync(restore: true).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 2);
									<>u__1 = val;
									((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<TryChangeStateAsync>b__0>d>(ref val, ref this);
									return;
								}
								goto IL_020f;
								IL_01ab:
								val.GetResult();
								goto IL_0217;
							}
						}
						catch (Exception ex)
						{
							Exception ex2 = ex;
							TaggedLog.Error(((LogicalDeviceExBase<ILogicalDeviceSwitchableLight>)<>c__DisplayClass9_.<>4__this).LogTag, String.Format("{0} failure {1}", (object)<>c__DisplayClass9_.state, (object)ex2.Message), Array.Empty<object>());
						}
						TaggedLog.Debug(((LogicalDeviceExBase<ILogicalDeviceSwitchableLight>)<>c__DisplayClass9_.<>4__this).LogTag, String.Format("[{0}] {1} Finished", (object)<debugId>5__2, (object)<>c__DisplayClass9_.state), Array.Empty<object>());
						end_IL_000e:;
					}
					catch (Exception ex3)
					{
						Exception exception = ex3;
						<>1__state = -2;
						((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
						return;
					}
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
				}

				[DebuggerHidden]
				private void SetStateMachine(IAsyncStateMachine stateMachine)
				{
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
				}
			}

			public LogicalDeviceLightMasterSwitchControllableIdsCanEx <>4__this;

			public LightMasterSwitchControllableState state;

			public ConcurrentQueue<ILogicalDeviceSwitchableLight> lightQueue;

			public CancellationToken cancellationToken;

			[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
			internal Task <TryChangeStateAsync>b__0()
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<TryChangeStateAsync>b__0>d <<TryChangeStateAsync>b__0>d = default(<<TryChangeStateAsync>b__0>d);
				<<TryChangeStateAsync>b__0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<TryChangeStateAsync>b__0>d.<>4__this = this;
				<<TryChangeStateAsync>b__0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<TryChangeStateAsync>b__0>d.<>t__builder)).Start<<<TryChangeStateAsync>b__0>d>(ref <<TryChangeStateAsync>b__0>d);
				return ((AsyncTaskMethodBuilder)(ref <<TryChangeStateAsync>b__0>d.<>t__builder)).Task;
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryChangeStateAsync>d__9 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceLightMasterSwitchControllableIdsCanEx <>4__this;

			public LightMasterSwitchControllableState state;

			public CancellationToken cancellationToken;

			public ILogicalDeviceService deviceService;

			public Func<ILogicalDeviceSwitchableLight, bool> lightFilter;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0211: Expected O, but got Unknown
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_01da: Unknown result type (might be due to invalid IL or missing references)
				//IL_01df: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ca: Invalid comparison between Unknown and I4
				//IL_00ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d4: Invalid comparison between Unknown and I4
				//IL_01a8: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ad: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c4: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightMasterSwitchControllableIdsCanEx logicalDeviceLightMasterSwitchControllableIdsCanEx = <>4__this;
				bool result;
				try
				{
					if (num == 0)
					{
						goto IL_0081;
					}
					<>c__DisplayClass9_0 <>c__DisplayClass9_ = new <>c__DisplayClass9_0
					{
						<>4__this = <>4__this,
						state = state,
						cancellationToken = cancellationToken
					};
					if (Interlocked.Exchange(ref logicalDeviceLightMasterSwitchControllableIdsCanEx._performingOperation, 1) == 0)
					{
						<>c__DisplayClass9_.lightQueue = new ConcurrentQueue<ILogicalDeviceSwitchableLight>();
						goto IL_0081;
					}
					TaggedLog.Debug(((LogicalDeviceExBase<ILogicalDeviceSwitchableLight>)logicalDeviceLightMasterSwitchControllableIdsCanEx).LogTag, String.Format("Unable to perform {0} operation as an operation is already in progress.", (object)<>c__DisplayClass9_.state), Array.Empty<object>());
					result = false;
					goto end_IL_000e;
					IL_0081:
					try
					{
						TaskAwaiter val;
						if (num == 0)
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
							goto IL_01f6;
						}
						if (!Enumerable.Any<ILogicalDeviceSwitchableLight>((IEnumerable<ILogicalDeviceSwitchableLight>)(object)((LogicalDeviceExBase<ILogicalDeviceSwitchableLight>)logicalDeviceLightMasterSwitchControllableIdsCanEx).GetAttachedLogicalDevices()))
						{
							result = false;
						}
						else
						{
							Enumerator<ILogicalDeviceSwitchableLight> enumerator = ((LogicalDeviceExBase<ILogicalDeviceSwitchableLight>)logicalDeviceLightMasterSwitchControllableIdsCanEx).GetAttachedLogicalDevices().GetEnumerator();
							try
							{
								while (enumerator.MoveNext())
								{
									ILogicalDeviceSwitchableLight current = enumerator.Current;
									if (!current.IsMasterSwitchControllable || ((int)((IDevicesCommon)current).ActiveConnection != 1 && (int)((IDevicesCommon)current).ActiveConnection != 3))
									{
										continue;
									}
									ILogicalDeviceService obj = deviceService;
									ILogicalDeviceSourceDirect val2 = ((obj != null) ? obj.GetPrimaryDeviceSourceDirect((ILogicalDevice)current) : null);
									if (val2 == null || val2 is ILogicalDeviceSourceDirectSwitchMasterControllable)
									{
										continue;
									}
									LightMasterSwitchControllableState lightMasterSwitchControllableState = <>c__DisplayClass9_.state;
									if (lightMasterSwitchControllableState != LightMasterSwitchControllableState.Off)
									{
										if ((uint)(lightMasterSwitchControllableState - 1) > 1u || current.On)
										{
											continue;
										}
									}
									else if (!current.On)
									{
										continue;
									}
									Func<ILogicalDeviceSwitchableLight, bool> obj2 = lightFilter;
									if (obj2 == null || obj2.Invoke(current))
									{
										<>c__DisplayClass9_.lightQueue.Enqueue(current);
									}
								}
							}
							finally
							{
								if (num < 0)
								{
									((IDisposable)enumerator/*cast due to .constrained prefix*/).Dispose();
								}
							}
							if (<>c__DisplayClass9_.lightQueue.Count > 0)
							{
								logicalDeviceLightMasterSwitchControllableIdsCanEx._debugBackgroundOperationInstanceCount = 0;
								int numParallelOperations = Math.Min(3, <>c__DisplayClass9_.lightQueue.Count);
								val = logicalDeviceLightMasterSwitchControllableIdsCanEx.TryPerformParallelOperationAsync(numParallelOperations, <>c__DisplayClass9_.<TryChangeStateAsync>b__0).GetAwaiter();
								if (!((TaskAwaiter)(ref val)).IsCompleted)
								{
									num = (<>1__state = 0);
									<>u__1 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <TryChangeStateAsync>d__9>(ref val, ref this);
									return;
								}
								goto IL_01f6;
							}
							result = false;
						}
						goto end_IL_000e;
						IL_01f6:
						((TaskAwaiter)(ref val)).GetResult();
					}
					finally
					{
						if (num < 0)
						{
							logicalDeviceLightMasterSwitchControllableIdsCanEx._performingOperation = 0;
						}
					}
					result = true;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryPerformParallelOperationAsync>d__10 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public int numParallelOperations;

			public Func<Task> operation;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_009f: Expected O, but got Unknown
				//IL_0079: Unknown result type (might be due to invalid IL or missing references)
				//IL_007e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0085: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_004e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0063: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				try
				{
					TaskAwaiter val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_0094;
					}
					if (numParallelOperations > 0)
					{
						Task[] array = (Task[])(object)new Task[numParallelOperations];
						for (int i = 0; i < numParallelOperations; i++)
						{
							array[i] = Task.Run(operation);
						}
						val = Task.WhenAll(array).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <TryPerformParallelOperationAsync>d__10>(ref val, ref this);
							return;
						}
						goto IL_0094;
					}
					goto end_IL_0007;
					IL_0094:
					((TaskAwaiter)(ref val)).GetResult();
					end_IL_0007:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const int MaxConcurrentLightOperations = 3;

		private int _debugBackgroundOperationInstanceCount;

		private int _performingOperation;

		protected override string LogTag => "LogicalDeviceLightMasterSwitchControllableIdsCanEx";

		public static LogicalDeviceLightMasterSwitchControllableIdsCanEx SharedExtension => LogicalDeviceExBase<ILogicalDeviceSwitchableLight>.GetSharedExtension<LogicalDeviceLightMasterSwitchControllableIdsCanEx>(true);

		public static ILogicalDeviceEx LogicalDeviceExFactory(ILogicalDevice logicalDevice)
		{
			return LogicalDeviceExBase<ILogicalDeviceSwitchableLight>.LogicalDeviceExFactory<LogicalDeviceLightMasterSwitchControllableIdsCanEx>(logicalDevice, (Func<ILogicalDeviceSwitchableLight, LogicalDeviceExScope>)GetLogicalDeviceScope);
		}

		protected static LogicalDeviceExScope GetLogicalDeviceScope(ILogicalDeviceSwitchableLight logicalDevice)
		{
			return (LogicalDeviceExScope)3;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TryChangeStateAsync(ILogicalDeviceService deviceService, LightMasterSwitchControllableState state, Func<ILogicalDeviceSwitchableLight, bool> lightFilter, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0030: Unknown result type (might be due to invalid IL or missing references)
			<TryChangeStateAsync>d__9 <TryChangeStateAsync>d__ = default(<TryChangeStateAsync>d__9);
			<TryChangeStateAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TryChangeStateAsync>d__.<>4__this = this;
			<TryChangeStateAsync>d__.deviceService = deviceService;
			<TryChangeStateAsync>d__.state = state;
			<TryChangeStateAsync>d__.lightFilter = lightFilter;
			<TryChangeStateAsync>d__.cancellationToken = cancellationToken;
			<TryChangeStateAsync>d__.<>1__state = -1;
			<TryChangeStateAsync>d__.<>t__builder.Start<<TryChangeStateAsync>d__9>(ref <TryChangeStateAsync>d__);
			return <TryChangeStateAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task TryPerformParallelOperationAsync(int numParallelOperations, Func<Task> operation)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<TryPerformParallelOperationAsync>d__10 <TryPerformParallelOperationAsync>d__ = default(<TryPerformParallelOperationAsync>d__10);
			<TryPerformParallelOperationAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<TryPerformParallelOperationAsync>d__.numParallelOperations = numParallelOperations;
			<TryPerformParallelOperationAsync>d__.operation = operation;
			<TryPerformParallelOperationAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <TryPerformParallelOperationAsync>d__.<>t__builder)).Start<<TryPerformParallelOperationAsync>d__10>(ref <TryPerformParallelOperationAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <TryPerformParallelOperationAsync>d__.<>t__builder)).Task;
		}
	}
	public class LogicalDeviceLightMasterSwitchControllableMyRvLinkEx : LogicalDeviceExBase<ILogicalDeviceSwitchableLight>
	{
		private class BucketGroup<TValue> : Object
		{
			private readonly List<List<TValue>> _bucketList = (List<List<TValue>>)(object)new List<List<List<TValue>>>();

			private List<TValue>? _buildingLightList;

			public int MaxBucketSize
			{
				[CompilerGenerated]
				get;
			}

			public IEnumerable<List<TValue>> Buckets => (IEnumerable<List<TValue>>)(object)_bucketList;

			public BucketGroup(int maxBucketSize)
			{
				MaxBucketSize = maxBucketSize;
			}

			public void Add(TValue item)
			{
				if (_buildingLightList == null || _buildingLightList.Count >= MaxBucketSize)
				{
					_buildingLightList = new List<TValue>();
					((List<List<List<TValue>>>)(object)_bucketList).Add((List<List<TValue>>)(object)_buildingLightList);
				}
				_buildingLightList.Add(item);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryChangeStateAsync>d__9 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceLightMasterSwitchControllableMyRvLinkEx <>4__this;

			public LightMasterSwitchControllableState state;

			public ILogicalDeviceService deviceService;

			public Func<ILogicalDeviceSwitchableLight, bool> lightFilter;

			public CancellationToken cancellationToken;

			private bool <turnOn>5__2;

			private Enumerator<ILogicalDeviceSourceDirectSwitchMasterControllable, BucketGroup<ILogicalDeviceSwitchableLight>> <>7__wrap2;

			private KeyValuePair<ILogicalDeviceSourceDirectSwitchMasterControllable, BucketGroup<ILogicalDeviceSwitchableLight>> <directManagerSwitchItem>5__4;

			private IEnumerator<List<ILogicalDeviceSwitchableLight>> <>7__wrap4;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_02fd: Expected O, but got Unknown
				//IL_0097: Unknown result type (might be due to invalid IL or missing references)
				//IL_009c: Unknown result type (might be due to invalid IL or missing references)
				//IL_026c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0271: Unknown result type (might be due to invalid IL or missing references)
				//IL_0279: Unknown result type (might be due to invalid IL or missing references)
				//IL_01de: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c0: Invalid comparison between Unknown and I4
				//IL_022d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0237: Unknown result type (might be due to invalid IL or missing references)
				//IL_023c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ca: Invalid comparison between Unknown and I4
				//IL_01c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0251: Unknown result type (might be due to invalid IL or missing references)
				//IL_0253: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightMasterSwitchControllableMyRvLinkEx logicalDeviceLightMasterSwitchControllableMyRvLinkEx = <>4__this;
				bool result;
				try
				{
					if (num == 0)
					{
						goto IL_0052;
					}
					Dictionary<ILogicalDeviceSourceDirectSwitchMasterControllable, BucketGroup<ILogicalDeviceSwitchableLight>> val = default(Dictionary<ILogicalDeviceSourceDirectSwitchMasterControllable, BucketGroup<ILogicalDeviceSwitchableLight>>);
					if (Interlocked.Exchange(ref logicalDeviceLightMasterSwitchControllableMyRvLinkEx._performingOperation, 1) == 0)
					{
						val = new Dictionary<ILogicalDeviceSourceDirectSwitchMasterControllable, BucketGroup<ILogicalDeviceSwitchableLight>>();
						goto IL_0052;
					}
					TaggedLog.Debug(((LogicalDeviceExBase<ILogicalDeviceSwitchableLight>)(object)logicalDeviceLightMasterSwitchControllableMyRvLinkEx).LogTag, String.Format("Unable to perform All {0} operation as an operation is already in progress.", (object)state), Array.Empty<object>());
					result = false;
					goto end_IL_000e;
					IL_0052:
					try
					{
						if (num == 0)
						{
							goto IL_01cf;
						}
						List<ILogicalDeviceSwitchableLight> attachedLogicalDevices = ((LogicalDeviceExBase<ILogicalDeviceSwitchableLight>)(object)logicalDeviceLightMasterSwitchControllableMyRvLinkEx).GetAttachedLogicalDevices();
						if (!Enumerable.Any<ILogicalDeviceSwitchableLight>((IEnumerable<ILogicalDeviceSwitchableLight>)(object)attachedLogicalDevices))
						{
							TaggedLog.Debug(((LogicalDeviceExBase<ILogicalDeviceSwitchableLight>)(object)logicalDeviceLightMasterSwitchControllableMyRvLinkEx).LogTag, String.Format("Unable to perform All {0} operation as an operation is already in progress.", (object)state), Array.Empty<object>());
							result = false;
						}
						else
						{
							Enumerator<ILogicalDeviceSwitchableLight> enumerator = attachedLogicalDevices.GetEnumerator();
							try
							{
								BucketGroup<ILogicalDeviceSwitchableLight> bucketGroup = default(BucketGroup<ILogicalDeviceSwitchableLight>);
								while (enumerator.MoveNext())
								{
									ILogicalDeviceSwitchableLight current = enumerator.Current;
									if (!current.IsMasterSwitchControllable || ((int)((IDevicesCommon)current).ActiveConnection != 1 && (int)((IDevicesCommon)current).ActiveConnection != 3))
									{
										continue;
									}
									ILogicalDeviceService obj = deviceService;
									ILogicalDeviceSourceDirect obj2 = ((obj != null) ? obj.GetPrimaryDeviceSourceDirect((ILogicalDevice)current) : null);
									ILogicalDeviceSourceDirectSwitchMasterControllable val2 = (ILogicalDeviceSourceDirectSwitchMasterControllable)(object)((obj2 is ILogicalDeviceSourceDirectSwitchMasterControllable) ? obj2 : null);
									if (val2 == null)
									{
										continue;
									}
									Func<ILogicalDeviceSwitchableLight, bool> obj3 = lightFilter;
									if (obj3 == null || obj3.Invoke(current))
									{
										if (!val.TryGetValue(val2, ref bucketGroup))
										{
											bucketGroup = (val[val2] = new BucketGroup<ILogicalDeviceSwitchableLight>(24));
										}
										TaggedLog.Debug(((LogicalDeviceExBase<ILogicalDeviceSwitchableLight>)(object)logicalDeviceLightMasterSwitchControllableMyRvLinkEx).LogTag, String.Format("MyRvLink Switch to {0} for {1}", (object)state, (object)((ILogicalDevice)current).LogicalId.ToString((LogicalDeviceIdFormat)0)), Array.Empty<object>());
										bucketGroup.Add(current);
									}
								}
							}
							finally
							{
								if (num < 0)
								{
									((IDisposable)enumerator/*cast due to .constrained prefix*/).Dispose();
								}
							}
							if (val.Count > 0)
							{
								<turnOn>5__2 = state != LightMasterSwitchControllableState.Off;
								<>7__wrap2 = val.GetEnumerator();
								goto IL_01cf;
							}
							TaggedLog.Debug(((LogicalDeviceExBase<ILogicalDeviceSwitchableLight>)(object)logicalDeviceLightMasterSwitchControllableMyRvLinkEx).LogTag, String.Format("Unable to perform All {0} operation as no devices were found.", (object)state), Array.Empty<object>());
							result = false;
						}
						goto end_IL_000e;
						IL_01cf:
						try
						{
							if (num == 0)
							{
								goto IL_0204;
							}
							goto IL_02c1;
							IL_02c1:
							if (<>7__wrap2.MoveNext())
							{
								<directManagerSwitchItem>5__4 = <>7__wrap2.Current;
								<>7__wrap4 = <directManagerSwitchItem>5__4.Value.Buckets.GetEnumerator();
								goto IL_0204;
							}
							goto end_IL_01cf;
							IL_0204:
							try
							{
								if (num != 0)
								{
									goto IL_0290;
								}
								TaskAwaiter<bool> val3 = <>u__1;
								<>u__1 = default(TaskAwaiter<bool>);
								num = (<>1__state = -1);
								goto IL_0288;
								IL_0288:
								val3.GetResult();
								goto IL_0290;
								IL_0290:
								if (((IEnumerator)<>7__wrap4).MoveNext())
								{
									List<ILogicalDeviceSwitchableLight> current2 = <>7__wrap4.Current;
									val3 = <directManagerSwitchItem>5__4.Key.TrySwitchAllMasterControllable((IEnumerable<ILogicalDevice>)(object)current2, <turnOn>5__2, cancellationToken).GetAwaiter();
									if (!val3.IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val3;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <TryChangeStateAsync>d__9>(ref val3, ref this);
										return;
									}
									goto IL_0288;
								}
							}
							finally
							{
								if (num < 0 && <>7__wrap4 != null)
								{
									((IDisposable)<>7__wrap4).Dispose();
								}
							}
							<>7__wrap4 = null;
							goto IL_02c1;
							end_IL_01cf:;
						}
						finally
						{
							if (num < 0)
							{
								((IDisposable)<>7__wrap2/*cast due to .constrained prefix*/).Dispose();
							}
						}
					}
					finally
					{
						if (num < 0)
						{
							logicalDeviceLightMasterSwitchControllableMyRvLinkEx._performingOperation = 0;
						}
					}
					result = true;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private int _performingOperation;

		public const int MaxAllLightsOnOff = 24;

		protected override string LogTag => "LogicalDeviceLightMasterSwitchControllableMyRvLinkEx";

		public static LogicalDeviceLightMasterSwitchControllableMyRvLinkEx? SharedExtension => LogicalDeviceExBase<ILogicalDeviceSwitchableLight>.GetSharedExtension<LogicalDeviceLightMasterSwitchControllableMyRvLinkEx>(true);

		public static ILogicalDeviceEx? LogicalDeviceExFactory(ILogicalDevice logicalDevice)
		{
			return LogicalDeviceExBase<ILogicalDeviceSwitchableLight>.LogicalDeviceExFactory<LogicalDeviceLightMasterSwitchControllableMyRvLinkEx>(logicalDevice, (Func<ILogicalDeviceSwitchableLight, LogicalDeviceExScope>)GetLogicalDeviceScope);
		}

		protected static LogicalDeviceExScope GetLogicalDeviceScope(ILogicalDeviceSwitchableLight logicalDevice)
		{
			return (LogicalDeviceExScope)3;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TryChangeStateAsync(ILogicalDeviceService deviceService, LightMasterSwitchControllableState state, Func<ILogicalDeviceSwitchableLight, bool> lightFilter, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0030: Unknown result type (might be due to invalid IL or missing references)
			<TryChangeStateAsync>d__9 <TryChangeStateAsync>d__ = default(<TryChangeStateAsync>d__9);
			<TryChangeStateAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TryChangeStateAsync>d__.<>4__this = this;
			<TryChangeStateAsync>d__.deviceService = deviceService;
			<TryChangeStateAsync>d__.state = state;
			<TryChangeStateAsync>d__.lightFilter = lightFilter;
			<TryChangeStateAsync>d__.cancellationToken = cancellationToken;
			<TryChangeStateAsync>d__.<>1__state = -1;
			<TryChangeStateAsync>d__.<>t__builder.Start<<TryChangeStateAsync>d__9>(ref <TryChangeStateAsync>d__);
			return <TryChangeStateAsync>d__.<>t__builder.Task;
		}
	}
	public interface IMonitorPanel : IDevicesCommon, INotifyPropertyChanged
	{
		bool IsDeviceConfigurationDataValid { get; }

		bool AreDeviceDefinitionsValid { get; }

		ILogicalDevicePidULong AvailableMomentarySwitchesPid { get; }

		ILogicalDevicePidULong AvailableLatchingSwitchesPid { get; }

		ILogicalDevicePidULong AvailableSupplyTankIndicatorsPid { get; }

		ILogicalDevicePidULong AvailableWasteTankIndicatorsPid { get; }

		IReadOnlyDictionary<Pid, ILogicalDevicePidMonitorPanelDeviceId> PidDeviceIdDict { get; }
	}
	public interface ILogicalDeviceMonitorPanel : IMonitorPanel, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithCapability<ILogicalDeviceMonitorPanelCapability>, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceWithStatus<LogicalDeviceMonitorPanelStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceMonitorPanelStatus>, IHighResolutionTankSupport, ILogicalDeviceFirmwareUpdateDevice
	{
	}
	public interface ILogicalDeviceMonitorPanelDirect : ILogicalDeviceMonitorPanel, IMonitorPanel, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithCapability<ILogicalDeviceMonitorPanelCapability>, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceWithStatus<LogicalDeviceMonitorPanelStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceMonitorPanelStatus>, IHighResolutionTankSupport, ILogicalDeviceFirmwareUpdateDevice, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public class LogicalDeviceMonitorPanel : LogicalDevice<LogicalDeviceMonitorPanelStatus, ILogicalDeviceMonitorPanelCapability>, ILogicalDeviceMonitorPanelDirect, ILogicalDeviceMonitorPanel, IMonitorPanel, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithCapability<ILogicalDeviceMonitorPanelCapability>, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceWithStatus<LogicalDeviceMonitorPanelStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceMonitorPanelStatus>, IHighResolutionTankSupport, ILogicalDeviceFirmwareUpdateDevice, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <UpdateFirmwareAsync>d__34 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceMonitorPanel <>4__this;

			public CancellationToken cancellationToken;

			public IReadOnlyList<byte> data;

			public Func<ILogicalDeviceTransferProgress, bool> progressAck;

			public Dictionary<FirmwareUpdateOption, object> options;

			private ILogicalDeviceFirmwareUpdateSession <firmwareUpdateSession>5__2;

			private TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice?> <>u__1;

			private TaskAwaiter <>u__2;

			private void MoveNext()
			{
				//IL_0142: Expected O, but got Unknown
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_0103: Unknown result type (might be due to invalid IL or missing references)
				//IL_0108: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00eb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ed: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceMonitorPanel logicalDeviceMonitorPanel = <>4__this;
				try
				{
					TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice> val;
					if (num != 0)
					{
						if (num == 1)
						{
							goto IL_00a9;
						}
						val = FirmwareUpdateSupportEx.TryGetSupportedFirmwareUpdateDeviceSource(((LogicalDevice<ILogicalDeviceMonitorPanelCapability>)(object)logicalDeviceMonitorPanel).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceMonitorPanel, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>, <UpdateFirmwareAsync>d__34>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>);
						num = (<>1__state = -1);
					}
					ILogicalDeviceSourceDirectFirmwareUpdateDevice result = val.GetResult();
					if (result == null)
					{
						throw new FirmwareUpdateNotSupportedException((ILogicalDevice)(object)logicalDeviceMonitorPanel, (FirmwareUpdateSupport)0, (Exception)null);
					}
					<firmwareUpdateSession>5__2 = ((LogicalDevice<ILogicalDeviceMonitorPanelCapability>)(object)logicalDeviceMonitorPanel).DeviceService.FirmwareUpdateManager.StartFirmwareUpdateSession((ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceMonitorPanel);
					goto IL_00a9;
					IL_00a9:
					try
					{
						TaskAwaiter val2;
						if (num != 1)
						{
							val2 = ((IFirmwareUpdateDevice)result).UpdateFirmwareAsync(<firmwareUpdateSession>5__2, data, progressAck, cancellationToken, (IReadOnlyDictionary<FirmwareUpdateOption, object>)(object)options).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <UpdateFirmwareAsync>d__34>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
					}
					finally
					{
						if (num < 0 && <firmwareUpdateSession>5__2 != null)
						{
							((IDisposable)<firmwareUpdateSession>5__2).Dispose();
						}
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<firmwareUpdateSession>5__2 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<firmwareUpdateSession>5__2 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private readonly Dictionary<Pid, ILogicalDevicePidMonitorPanelDeviceId> _pidDeviceIdDict = new Dictionary<Pid, ILogicalDevicePidMonitorPanelDeviceId>();

		private readonly IReadOnlyDictionary<FirmwareUpdateOption, string> _defaultFirmwareUpdateOptions;

		public override bool IsLegacyDeviceHazardous => false;

		public static IReadOnlyList<Pid> MonitorPanelDeviceIdPidList => PidExtension.MonitorPanelDeviceIdPidList;

		public bool IsDeviceConfigurationDataValid => ((LogicalDevice<LogicalDeviceMonitorPanelStatus, ILogicalDeviceMonitorPanelCapability>)(object)this).DeviceStatus.IsDeviceConfigurationDataValid;

		public bool AreDeviceDefinitionsValid => ((LogicalDevice<LogicalDeviceMonitorPanelStatus, ILogicalDeviceMonitorPanelCapability>)(object)this).DeviceStatus.AreDeviceDefinitionsValid;

		public IReadOnlyDictionary<Pid, ILogicalDevicePidMonitorPanelDeviceId> PidDeviceIdDict => (IReadOnlyDictionary<Pid, ILogicalDevicePidMonitorPanelDeviceId>)(object)_pidDeviceIdDict;

		[field: CompilerGenerated]
		public ILogicalDevicePidULong AvailableMomentarySwitchesPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidULong AvailableLatchingSwitchesPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidULong AvailableSupplyTankIndicatorsPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidULong AvailableWasteTankIndicatorsPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public IReadOnlyDictionary<FirmwareUpdateOption, string> DefaultFirmwareUpdateOptions => _defaultFirmwareUpdateOptions;

		public Task<bool> TryAreHighResolutionTanksSupportedAsync(CancellationToken cancellationToken)
		{
			return Task.FromResult<bool>(((LogicalDevice<ILogicalDeviceMonitorPanelCapability>)(object)this).DeviceCapability.SupportsHighResolutionTanks);
		}

		public LogicalDeviceMonitorPanel(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
		{
			//IL_0058: Unknown result type (might be due to invalid IL or missing references)
			//IL_0062: Expected O, but got Unknown
			//IL_0076: Unknown result type (might be due to invalid IL or missing references)
			//IL_0080: Expected O, but got Unknown
			//IL_0094: Unknown result type (might be due to invalid IL or missing references)
			//IL_009e: Expected O, but got Unknown
			//IL_00b2: Unknown result type (might be due to invalid IL or missing references)
			//IL_00bc: Expected O, but got Unknown
			//IL_00ca: Unknown result type (might be due to invalid IL or missing references)
			//IL_00cf: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d8: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e0: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ea: Expected O, but got Unknown
			Dictionary<FirmwareUpdateOption, string> obj = new Dictionary<FirmwareUpdateOption, string>();
			obj.Add((FirmwareUpdateOption)1, String.Format("{0}", (object)(UInt32)4325376));
			_defaultFirmwareUpdateOptions = (IReadOnlyDictionary<FirmwareUpdateOption, string>)(object)obj;
			base..ctor(logicalDeviceId, new LogicalDeviceMonitorPanelStatus(), (ILogicalDeviceMonitorPanelCapability)new LogicalDeviceMonitorPanelCapability(), service, isFunctionClassChangeable);
			AvailableMomentarySwitchesPid = (ILogicalDevicePidULong)new LogicalDevicePidULong((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)325), (LogicalDeviceSessionType)0, (Func<ulong, bool>)null, 255uL);
			AvailableLatchingSwitchesPid = (ILogicalDevicePidULong)new LogicalDevicePidULong((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)326), (LogicalDeviceSessionType)0, (Func<ulong, bool>)null, 255uL);
			AvailableSupplyTankIndicatorsPid = (ILogicalDevicePidULong)new LogicalDevicePidULong((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)327), (LogicalDeviceSessionType)0, (Func<ulong, bool>)null, 255uL);
			AvailableWasteTankIndicatorsPid = (ILogicalDevicePidULong)new LogicalDevicePidULong((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)328), (LogicalDeviceSessionType)0, (Func<ulong, bool>)null, 255uL);
			IEnumerator<Pid> enumerator = ((IEnumerable<Pid>)(object)MonitorPanelDeviceIdPidList).GetEnumerator();
			try
			{
				while (((IEnumerator)enumerator).MoveNext())
				{
					Pid current = enumerator.Current;
					_pidDeviceIdDict[current] = (ILogicalDevicePidMonitorPanelDeviceId)new LogicalDevicePidMonitorPanelDeviceId((ILogicalDevice)(object)this, PidExtension.ConvertToPid(current), (LogicalDeviceSessionType)2, (Func<ulong, bool>)null);
				}
			}
			finally
			{
				if (enumerator != null)
				{
					((IDisposable)enumerator).Dispose();
				}
			}
		}

		public override void OnDeviceStatusChanged()
		{
			base.OnDeviceStatusChanged();
			Log.Information<ILogicalDeviceId, bool, bool>("Data Changed {LogicalId}: ConfigurationDataValid = {IsDeviceConfigurationDataValid}, DevicesDefinitionsValid = {AreDeviceDefinitionsValid}", ((LogicalDevice<ILogicalDeviceMonitorPanelCapability>)(object)this).LogicalId, ((LogicalDevice<LogicalDeviceMonitorPanelStatus, ILogicalDeviceMonitorPanelCapability>)(object)this).DeviceStatus.IsDeviceConfigurationDataValid, AreDeviceDefinitionsValid);
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("IsDeviceConfigurationDataValid");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("AreDeviceDefinitionsValid");
		}

		public Task<FirmwareUpdateSupport> TryGetFirmwareUpdateSupportAsync(CancellationToken cancelToken)
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			return FirmwareUpdateSupportEx.TryGetFirmwareUpdateSupportAsync(((LogicalDevice<ILogicalDeviceMonitorPanelCapability>)(object)this).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)this, cancelToken);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task UpdateFirmwareAsync(IReadOnlyList<byte> data, Func<ILogicalDeviceTransferProgress, bool> progressAck, CancellationToken cancellationToken, Dictionary<FirmwareUpdateOption, object>? options = null)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<UpdateFirmwareAsync>d__34 <UpdateFirmwareAsync>d__ = default(<UpdateFirmwareAsync>d__34);
			<UpdateFirmwareAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<UpdateFirmwareAsync>d__.<>4__this = this;
			<UpdateFirmwareAsync>d__.data = data;
			<UpdateFirmwareAsync>d__.progressAck = progressAck;
			<UpdateFirmwareAsync>d__.cancellationToken = cancellationToken;
			<UpdateFirmwareAsync>d__.options = options;
			<UpdateFirmwareAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Start<<UpdateFirmwareAsync>d__34>(ref <UpdateFirmwareAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Task;
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceMonitorPanelCapability>)(object)this).LastReceivedNetworkStatus;
		}
	}
	[Flags]
	public enum MonitorPanelCapabilityFlag : Enum
	{
		None = 0,
		HasBlePairingButton = 1,
		HasHighResolutionTankSupport = 2
	}
	public interface ILogicalDeviceMonitorPanelCapability : ILogicalDeviceCapability, INotifyPropertyChanged
	{
		bool HasBlePairingButton { get; }

		bool SupportsHighResolutionTanks { get; }
	}
	public class LogicalDeviceMonitorPanelCapability : LogicalDeviceCapability, ILogicalDeviceMonitorPanelCapability, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		private MonitorPanelCapabilityFlag CapabilityFlag => (MonitorPanelCapabilityFlag)base.RawValue;

		public bool HasBlePairingButton => ((Enum)(object)CapabilityFlag).HasFlag((Enum)(object)MonitorPanelCapabilityFlag.HasBlePairingButton);

		public bool SupportsHighResolutionTanks => ((Enum)(object)CapabilityFlag).HasFlag((Enum)(object)MonitorPanelCapabilityFlag.HasHighResolutionTankSupport);

		public LogicalDeviceMonitorPanelCapability()
			: this(new Nullable<byte>((byte)0))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)


		public LogicalDeviceMonitorPanelCapability(Nullable<byte> rawCapability)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(rawCapability);
		}

		public LogicalDeviceMonitorPanelCapability(ClimateZoneCapabilityFlag capabilityFlags)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(new Nullable<byte>((byte)capabilityFlags));
		}

		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("HasBlePairingButton");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("SupportsHighResolutionTanks");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}
	}
	public class LogicalDeviceMonitorPanelFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 43)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceMonitorPanel(logicalDeviceId, service);
		}
	}
	public class LogicalDeviceMonitorPanelStatus : LogicalDeviceStatusPacketMutable, ILogicalDeviceStatus<LogicalDeviceMonitorPanelStatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		private const int MinimumStatusPacketSize = 1;

		public const BasicBitMask DeviceConfigurationDataValidBitmask = (BasicBitMask)1;

		public const BasicBitMask DeviceDefinitionsValidBitmask = (BasicBitMask)2;

		public const int StatusByteIndex = 0;

		public bool IsDeviceConfigurationDataValid => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)1, 0);

		public bool AreDeviceDefinitionsValid => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)2, 0);

		internal byte StatusRaw => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetByte((byte)255, 0);

		public LogicalDeviceMonitorPanelStatus()
			: base(1u)
		{
		}

		public void SetIsDeviceConfigurationDataValid(bool valid)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)1, valid, 0);
		}

		public void SetAreDeviceDefinitionsValid(bool valid)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)2, valid, 0);
		}

		internal void SetStatusRaw(byte rawStatus)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, rawStatus, 0);
		}

		public LogicalDeviceMonitorPanelStatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceMonitorPanelStatusSerializable(StatusRaw);
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceMonitorPanelStatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceMonitorPanelStatusSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceMonitorPanelStatusSerializable);
			}
		}

		[JsonProperty]
		public byte StatusFlags
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceMonitorPanelStatusSerializable(byte statusFlags)
		{
			StatusFlags = statusFlags;
		}

		public LogicalDeviceMonitorPanelStatusSerializable(LogicalDeviceMonitorPanelStatus status)
			: this(status.StatusRaw)
		{
		}

		public override byte[] MakeRawData()
		{
			LogicalDeviceMonitorPanelStatus logicalDeviceMonitorPanelStatus = new LogicalDeviceMonitorPanelStatus();
			logicalDeviceMonitorPanelStatus.SetStatusRaw(StatusFlags);
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceMonitorPanelStatus).CopyCurrentData();
		}

		public static LogicalDeviceMonitorPanelStatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceMonitorPanelStatus logicalDeviceMonitorPanelStatus = new LogicalDeviceMonitorPanelStatus();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceMonitorPanelStatus).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceMonitorPanelStatus).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceMonitorPanelStatus).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceMonitorPanelStatus).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceMonitorPanelStatus).Update(rawData, rawData.Length, false);
			return new LogicalDeviceMonitorPanelStatusSerializable(logicalDeviceMonitorPanelStatus.StatusRaw);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceMonitorPanelStatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceMonitorPanelStatusSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("StatusFlags = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref StatusFlags)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return base.GetHashCode() * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(StatusFlags);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceMonitorPanelStatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceMonitorPanelStatusSerializable(LogicalDeviceMonitorPanelStatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceMonitorPanelStatusSerializable>)original)
		{
			StatusFlags = original.StatusFlags;
		}
	}
	public interface ILogicalDevicePowerMonitorAc : ILogicalDeviceWithStatus<LogicalDevicePowerMonitorAcStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
	}
	public class LogicalDevicePowerMonitorAc : LogicalDevice<LogicalDevicePowerMonitorAcStatus, ILogicalDeviceCapability>, ILogicalDevicePowerMonitorAc, ILogicalDeviceWithStatus<LogicalDevicePowerMonitorAcStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		public const ushort ShorePowerAmpRatingInvalidValue = 65535;

		[field: CompilerGenerated]
		public ILogicalDevicePidFixedPoint ShorePowerAmpRatingPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public LogicalDevicePowerMonitorAc(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDevicePowerMonitorAcStatus(), (ILogicalDeviceCapability)new LogicalDeviceCapability(), service, isFunctionClassChangeable)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0013: Expected O, but got Unknown
			//IL_003b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0045: Expected O, but got Unknown
			ShorePowerAmpRatingPid = (ILogicalDevicePidFixedPoint)new LogicalDevicePidFixedPoint((FixedPointType)1, (ILogicalDevice)(object)this, PID.SHORE_POWER_AMP_RATING, (LogicalDeviceSessionType)0, (Func<ulong, bool>)((ulong checkValue) => (ushort)checkValue != 65535));
		}

		public override void OnDeviceStatusChanged()
		{
			base.OnDeviceStatusChanged();
			Log.Information<ILogicalDeviceId, LogicalDevicePowerMonitorAcStatus>("Data Changed {LogicalId}: Status = {DeviceStatus}", ((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId, ((LogicalDevice<LogicalDevicePowerMonitorAcStatus, ILogicalDeviceCapability>)this).DeviceStatus);
		}

		public override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
		}
	}
	public class LogicalDevicePowerMonitorAcFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 26)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDevicePowerMonitorAc(logicalDeviceId, service);
		}
	}
	public class LogicalDevicePowerMonitorAcStatus : LogicalDeviceStatusPacketMutable
	{
		private const int MinimumStatusPacketSize = 5;

		public const int VoltageStartByteIndex = 0;

		public const int CurrentStartByteIndex = 2;

		public const int QualityByteIndex = 4;

		public const ushort VoltageInvalidValue = 65535;

		public const ushort CurrentInvalidValue = 65535;

		public const byte PowerQualityBitmask = 15;

		private string _voltageStr
		{
			get
			{
				if (!IsVoltageValid)
				{
					return "-- V";
				}
				return String.Format("{0} V", (object)Voltage);
			}
		}

		private string _currentStr
		{
			get
			{
				if (!IsCurrentValid)
				{
					return "-- Amps";
				}
				return String.Format("{0} Amps", (object)Current);
			}
		}

		public float Voltage => FixedPointUnsignedBigEndian16X16.ToFloat(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 0u);

		public float Current => FixedPointUnsignedBigEndian16X16.ToFloat(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 2u);

		public bool IsVoltageValid => FixedPointUnsignedBigEndian16X16.ToFixedPoint(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 0u) != 65535;

		public bool IsCurrentValid => FixedPointUnsignedBigEndian16X16.ToFixedPoint(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 2u) != 65535;

		public byte PowerQuality => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetByte((byte)15, 4);

		public LogicalDevicePowerMonitorAcStatus()
			: base(5u)
		{
		}

		public LogicalDevicePowerMonitorAcStatus(float voltage, float current, byte powerQuality)
		{
			SetVoltage(voltage);
			SetCurrent(current);
			SetPowerQuality(powerQuality);
		}

		public override string ToString()
		{
			return String.Format("AC Power: {0} / {1} Quality: {2}", (object)_voltageStr, (object)_currentStr, (object)PowerQuality);
		}

		public void SetVoltage(float voltage)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetFixedPoint((FixedPointType)1, voltage, 0u);
		}

		public void SetCurrent(float current)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetFixedPoint((FixedPointType)1, current, 2u);
		}

		public void SetPowerQuality(byte quality)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)15, quality, 4);
		}
	}
	public interface ILogicalDevicePowerMonitorDc : ILogicalDeviceWithStatus<LogicalDevicePowerMonitorDcStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		ILogicalDevicePowerMonitorDcCapability DeviceCapability { get; }
	}
	public class LogicalDevicePowerMonitorDc : LogicalDevice<LogicalDevicePowerMonitorDcStatus, ILogicalDevicePowerMonitorDcCapability>, ILogicalDevicePowerMonitorDc, ILogicalDeviceWithStatus<LogicalDevicePowerMonitorDcStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		public const ushort BatteryCapacityAmpHoursInvalidValue = 65535;

		[field: CompilerGenerated]
		public ILogicalDevicePidFixedPoint BatteryCapacityAmpHoursPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public LogicalDevicePowerMonitorDc(ILogicalDeviceId logicalDeviceId, ILogicalDevicePowerMonitorDcCapability capability, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDevicePowerMonitorDcStatus(), capability, service, isFunctionClassChangeable)
		{
			//IL_0038: Unknown result type (might be due to invalid IL or missing references)
			//IL_0042: Expected O, but got Unknown
			BatteryCapacityAmpHoursPid = (ILogicalDevicePidFixedPoint)new LogicalDevicePidFixedPoint((FixedPointType)1, (ILogicalDevice)(object)this, PID.BATTERY_CAPACITY_AMP_HOURS, (LogicalDeviceSessionType)0, (Func<ulong, bool>)((ulong checkValue) => (ushort)checkValue != 65535));
		}

		public override void OnDeviceStatusChanged()
		{
			base.OnDeviceStatusChanged();
			Log.Information<ILogicalDeviceId, LogicalDevicePowerMonitorDcStatus>("Data Changed {LogicalId}: Status = {DeviceStatus}", ((LogicalDevice<ILogicalDevicePowerMonitorDcCapability>)(object)this).LogicalId, ((LogicalDevice<LogicalDevicePowerMonitorDcStatus, ILogicalDevicePowerMonitorDcCapability>)this).DeviceStatus);
		}

		public override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
		}
	}
	public class LogicalDevicePowerMonitorDcFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 27)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDevicePowerMonitorDc(logicalDeviceId, new LogicalDevicePowerMonitorDcCapability(rawCapability), service);
		}
	}
	[Flags]
	public enum PowerMonitorDcCapabilityFlag : Enum
	{
		None = 0,
		SupportsBatteryCapacityAmpHours = 1
	}
	public interface ILogicalDevicePowerMonitorDcCapability : ILogicalDeviceCapability, INotifyPropertyChanged
	{
		bool IsBatteryCapacityAmpHoursSupported { get; }
	}
	public class LogicalDevicePowerMonitorDcCapability : LogicalDeviceCapability, ILogicalDevicePowerMonitorDcCapability, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		private PowerMonitorDcCapabilityFlag _capabilityFlag => (PowerMonitorDcCapabilityFlag)base.RawValue;

		public bool IsBatteryCapacityAmpHoursSupported => ((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)PowerMonitorDcCapabilityFlag.SupportsBatteryCapacityAmpHours);

		public LogicalDevicePowerMonitorDcCapability(Nullable<byte> rawCapability)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(rawCapability);
		}

		public LogicalDevicePowerMonitorDcCapability(ClimateZoneCapabilityFlag capabilityFlags)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(new Nullable<byte>((byte)capabilityFlags));
		}

		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsBatteryCapacityAmpHoursSupported");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}
	}
	public class LogicalDevicePowerMonitorDcStatus : LogicalDeviceStatusPacketMutable
	{
		private const int MinimumStatusPacketSize = 7;

		public const int VoltageStartByteIndex = 0;

		public const int CurrentStartByteIndex = 2;

		public const int RemainingCapacityPercentageByteIndex = 4;

		public const int ChargingByteIndex = 4;

		public const int EstimatedRemainingMinutesByteStartIndex = 5;

		public const ushort VoltageInvalidValue = 65535;

		public const ushort CurrentInvalidValue = 65535;

		public const ushort EstimatedRemainingMinutesInvalidValue = 65535;

		public const byte RemainingCapacityPercentageBitmask = 127;

		public const BasicBitMask ChargingBitmask = (BasicBitMask)128;

		private string _voltageStr
		{
			get
			{
				if (!IsVoltageValid)
				{
					return "-- V";
				}
				return String.Format("{0} V", (object)Voltage);
			}
		}

		private string _currentStr
		{
			get
			{
				if (!IsCurrentValid)
				{
					return "-- Amps";
				}
				return String.Format("{0} Amps", (object)Current);
			}
		}

		private string _remainingCapacityPercentageStr
		{
			get
			{
				if (!IsRemainingCapacityPercentageValid)
				{
					return "-- %";
				}
				return String.Format("{0} %", (object)RemainingCapacityPercentage);
			}
		}

		private string _estimatedRemainingMinutesStr
		{
			get
			{
				//IL_0015: Unknown result type (might be due to invalid IL or missing references)
				//IL_001a: Unknown result type (might be due to invalid IL or missing references)
				if (!IsEstimatedRemainingMinutesValid)
				{
					return "invalid";
				}
				TimeSpan val = TimeSpan.FromMinutes((double)(int)EstimatedRemainingMinutes);
				return ((TimeSpan)(ref val)).ToString("hh\\:mm") ?? "";
			}
		}

		public float Voltage => FixedPointUnsignedBigEndian16X16.ToFloat(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 0u);

		public float Current => FixedPointUnsignedBigEndian16X16.ToFloat(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 2u);

		public byte RemainingCapacityPercentage => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetByte((byte)127, 4);

		public ushort EstimatedRemainingMinutes => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetUInt16(5u);

		public bool IsVoltageValid => FixedPointUnsignedBigEndian16X16.ToFixedPoint(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 0u) != 65535;

		public bool IsCurrentValid => FixedPointUnsignedBigEndian16X16.ToFixedPoint(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 2u) != 65535;

		public bool IsRemainingCapacityPercentageValid => RemainingCapacityPercentage <= 100;

		public bool IsCharging => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)128, 4);

		public bool IsEstimatedRemainingMinutesValid => EstimatedRemainingMinutes != 65535;

		public LogicalDevicePowerMonitorDcStatus()
			: base(7u)
		{
		}

		public LogicalDevicePowerMonitorDcStatus(float voltage, float current, byte remainingCapacityPercentage, bool charging, ushort estimatedRemainingMinutes = 65535)
		{
			SetVoltage(voltage);
			SetCurrent(current);
		}

		public override string ToString()
		{
			return String.Format("DC Power: {0} / {1} Percent Remaining: {2} Time Remaining: {3} charging: {4}", (object[])(object)new Object[5]
			{
				(Object)_voltageStr,
				(Object)_currentStr,
				(Object)_remainingCapacityPercentageStr,
				(Object)_estimatedRemainingMinutesStr,
				(object)IsCharging
			});
		}

		public void SetVoltage(float voltage)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetFixedPoint((FixedPointType)1, voltage, 0u);
		}

		public void SetCurrent(float current)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetFixedPoint((FixedPointType)1, current, 2u);
		}

		public void SetRemainingCapacityPercentage(byte percent)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)127, percent, 4);
		}

		public void SetEstimatedRemainingMinutes(ushort minutes)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt16(minutes, 5);
		}
	}
	public interface ILogicalDevicePowerMonitorSetec : IDevicesActivation, ILogicalDeviceWithStatus<LogicalDevicePowerMonitorSetecStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		bool IsRunningCommands { get; }
	}
	public class LogicalDevicePowerMonitorSetec : LogicalDevice<LogicalDevicePowerMonitorSetecStatus, ILogicalDeviceCapability>, ILogicalDevicePowerMonitorSetec, IDevicesActivation, ILogicalDeviceWithStatus<LogicalDevicePowerMonitorSetecStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ActivateSession>d__11 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDevicePowerMonitorSetec <>4__this;

			public CancellationToken cancelToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_007e: Expected O, but got Unknown
				//IL_00af: Expected O, but got Unknown
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0026: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePowerMonitorSetec logicalDevicePowerMonitorSetec = <>4__this;
				try
				{
					try
					{
						TaskAwaiter val;
						if (num != 0)
						{
							val = logicalDevicePowerMonitorSetec.IdsCanCommandRunner.CommandActivateSession(cancelToken, true).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <ActivateSession>d__11>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val)).GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Error("LogicalDeviceGeneratorGenie", String.Format("Unable to ActiveSession for {0} with error ${1}\n{2}", (object)((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDevicePowerMonitorSetec).LogicalId, (object)ex2.Message, (object)ex2.StackTrace), Array.Empty<object>());
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendOffCommandAsync>d__16 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDevicePowerMonitorSetec <>4__this;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_00c7: Expected O, but got Unknown
				//IL_009f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ac: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bd: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_006d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0072: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_0087: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePowerMonitorSetec CS$<>8__locals5 = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_00bb;
					}
					if (!((CommonDisposableNotifyPropertyChanged)CS$<>8__locals5).IsDisposed)
					{
						LogicalDevicePowerMonitorSetecCommand logicalDevicePowerMonitorSetecCommand = new LogicalDevicePowerMonitorSetecCommand(LogicalDevicePowerMonitorCommandType.On);
						val = CS$<>8__locals5.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)(object)logicalDevicePowerMonitorSetecCommand, CS$<>8__locals5._commandCancelSource.Token, (Func<ILogicalDevice, CommandControl>)([CompilerGenerated] (ILogicalDevice device) =>
						{
							switch (((LogicalDevice<LogicalDevicePowerMonitorSetecStatus, ILogicalDeviceCapability>)CS$<>8__locals5).DeviceStatus.Mode)
							{
							case PowerMonitorSetecMode.Off:
							case PowerMonitorSetecMode.TurningOff:
							case PowerMonitorSetecMode.HardwareSwitchOn:
								return (CommandControl)0;
							default:
								return (CommandControl)1;
							}
						}), (CommandSendOption)1).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendOffCommandAsync>d__16>(ref val, ref this);
							return;
						}
						goto IL_00bb;
					}
					TaggedLog.Debug("LogicalDeviceGeneratorGenie", String.Concat(((LogicalDevice<ILogicalDeviceCapability>)(object)CS$<>8__locals5).DeviceName, " PowerMonitorSetec SendOffCommandAsync ignored as the LogicalDevice has been disposed"), Array.Empty<object>());
					result = (CommandResult)7;
					goto end_IL_000e;
					IL_00bb:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendOnCommandAsync>d__15 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDevicePowerMonitorSetec <>4__this;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_00c7: Expected O, but got Unknown
				//IL_009f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ac: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bd: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_006d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0072: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_0087: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePowerMonitorSetec CS$<>8__locals5 = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_00bb;
					}
					if (!((CommonDisposableNotifyPropertyChanged)CS$<>8__locals5).IsDisposed)
					{
						LogicalDevicePowerMonitorSetecCommand logicalDevicePowerMonitorSetecCommand = new LogicalDevicePowerMonitorSetecCommand(LogicalDevicePowerMonitorCommandType.On);
						val = CS$<>8__locals5.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)(object)logicalDevicePowerMonitorSetecCommand, CS$<>8__locals5._commandCancelSource.Token, (Func<ILogicalDevice, CommandControl>)([CompilerGenerated] (ILogicalDevice device) =>
						{
							switch (((LogicalDevice<LogicalDevicePowerMonitorSetecStatus, ILogicalDeviceCapability>)CS$<>8__locals5).DeviceStatus.Mode)
							{
							case PowerMonitorSetecMode.TurningOn:
							case PowerMonitorSetecMode.On:
								return (CommandControl)0;
							case PowerMonitorSetecMode.HardwareSwitchOn:
								return (CommandControl)3;
							default:
								return (CommandControl)1;
							}
						}), (CommandSendOption)1).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendOnCommandAsync>d__15>(ref val, ref this);
							return;
						}
						goto IL_00bb;
					}
					TaggedLog.Debug("LogicalDeviceGeneratorGenie", String.Concat(((LogicalDevice<ILogicalDeviceCapability>)(object)CS$<>8__locals5).DeviceName, " PowerMonitorSetec SendOnCommandAsync ignored as the LogicalDevice has been disposed"), Array.Empty<object>());
					result = (CommandResult)7;
					goto end_IL_000e;
					IL_00bb:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceGeneratorGenie";

		protected ILogicalDeviceCommandRunnerIdsCan IdsCanCommandRunner;

		private CancellationTokenSource _commandCancelSource = new CancellationTokenSource();

		public virtual uint MSCommandTimeout => 12000u;

		public virtual uint MSSessionTimeout => 15000u;

		public bool CommandSessionActivated => IdsCanCommandRunner.CommandSessionActivated;

		public bool IsRunningCommands => IdsCanCommandRunner.IsRunningCommands;

		public LogicalDevicePowerMonitorSetec(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDevicePowerMonitorSetecStatus(), (ILogicalDeviceCapability)new LogicalDeviceCapability(), service, isFunctionClassChangeable)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_0012: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Expected O, but got Unknown
			//IL_0020: Unknown result type (might be due to invalid IL or missing references)
			//IL_0025: Unknown result type (might be due to invalid IL or missing references)
			//IL_0031: Expected O, but got Unknown
			//IL_0031: Unknown result type (might be due to invalid IL or missing references)
			//IL_003d: Expected O, but got Unknown
			//IL_0042: Expected O, but got Unknown
			LogicalDeviceCommandRunnerIdsCan val = new LogicalDeviceCommandRunnerIdsCan((ILogicalDevice)(object)this);
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).CommandProcessingTime = MSCommandTimeout;
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).SessionKeepAliveTime = MSSessionTimeout;
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)val;
		}

		public override void OnDeviceStatusChanged()
		{
			base.OnDeviceStatusChanged();
			TaggedLog.Information("LogicalDeviceGeneratorGenie", String.Format("Data Changed {0}: Status = {1}", (object)((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId, (object)((LogicalDevice<LogicalDevicePowerMonitorSetecStatus, ILogicalDeviceCapability>)this).DeviceStatus), Array.Empty<object>());
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task ActivateSession(CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ActivateSession>d__11 <ActivateSession>d__ = default(<ActivateSession>d__11);
			<ActivateSession>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<ActivateSession>d__.<>4__this = this;
			<ActivateSession>d__.cancelToken = cancelToken;
			<ActivateSession>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Start<<ActivateSession>d__11>(ref <ActivateSession>d__);
			return ((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Task;
		}

		public void DeactivateSession()
		{
			IdsCanCommandRunner.CommandDeactivateSession(true);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendOnCommandAsync()
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendOnCommandAsync>d__15 <SendOnCommandAsync>d__ = default(<SendOnCommandAsync>d__15);
			<SendOnCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendOnCommandAsync>d__.<>4__this = this;
			<SendOnCommandAsync>d__.<>1__state = -1;
			<SendOnCommandAsync>d__.<>t__builder.Start<<SendOnCommandAsync>d__15>(ref <SendOnCommandAsync>d__);
			return <SendOnCommandAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendOffCommandAsync()
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendOffCommandAsync>d__16 <SendOffCommandAsync>d__ = default(<SendOffCommandAsync>d__16);
			<SendOffCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendOffCommandAsync>d__.<>4__this = this;
			<SendOffCommandAsync>d__.<>1__state = -1;
			<SendOffCommandAsync>d__.<>t__builder.Start<<SendOffCommandAsync>d__16>(ref <SendOffCommandAsync>d__);
			return <SendOffCommandAsync>d__.<>t__builder.Task;
		}

		public override void Dispose(bool disposing)
		{
			CancellationTokenSource commandCancelSource = _commandCancelSource;
			if (commandCancelSource != null)
			{
				CancellationTokenSourceExtension.CancelAndDispose(commandCancelSource);
			}
			_commandCancelSource = null;
			ILogicalDeviceCommandRunnerIdsCan idsCanCommandRunner = IdsCanCommandRunner;
			if (idsCanCommandRunner != null)
			{
				((ICommonDisposable)idsCanCommandRunner).TryDispose();
			}
			base.Dispose(disposing);
		}
	}
	public class LogicalDevicePowerMonitorSetecFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 28)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDevicePowerMonitorSetec(logicalDeviceId, service);
		}
	}
	public enum LogicalDevicePowerMonitorCommandType : Enum
	{
		Off,
		On
	}
	internal static class LogicalDevicePowerMonitorCommandTypeExtension : Object
	{
		public static byte CommandByte(this LogicalDevicePowerMonitorCommandType commandType)
		{
			return commandType switch
			{
				LogicalDevicePowerMonitorCommandType.Off => 0, 
				LogicalDevicePowerMonitorCommandType.On => 1, 
				_ => 0, 
			};
		}
	}
	public class LogicalDevicePowerMonitorSetecCommand : LogicalDeviceCommandPacket
	{
		private const int CommandPacketSize = 0;

		public LogicalDevicePowerMonitorSetecCommand(LogicalDevicePowerMonitorCommandType commandType)
			: base(commandType.CommandByte(), (byte[])(object)new Byte[0], 200)
		{
		}
	}
	public enum PowerMonitorSetecMode : Enum
	{
		Unknown,
		TurningOn,
		Off,
		TurningOff,
		On,
		HardwareSwitchOn
	}
	public class LogicalDevicePowerMonitorSetecStatus : LogicalDeviceStatusPacketMutable
	{
		private const int MinimumStatusPacketSize = 1;

		public const int ModeByteIndex = 0;

		public const byte ModeBitmask = 7;

		public PowerMonitorSetecMode Mode => PowerMonitorSetecModeFromRawValue(((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetByte((byte)7, 0));

		public LogicalDevicePowerMonitorSetecStatus()
			: base(1u)
		{
		}

		public LogicalDevicePowerMonitorSetecStatus(PowerMonitorSetecMode mode)
		{
			SetMode(mode);
		}

		public override string ToString()
		{
			return String.Format("Power Monitor: {0}", (object)Mode);
		}

		public static PowerMonitorSetecMode PowerMonitorSetecModeFromRawValue(byte rawValue)
		{
			return (rawValue & 7) switch
			{
				0 => PowerMonitorSetecMode.Unknown, 
				1 => PowerMonitorSetecMode.TurningOn, 
				2 => PowerMonitorSetecMode.Off, 
				3 => PowerMonitorSetecMode.TurningOff, 
				4 => PowerMonitorSetecMode.On, 
				5 => PowerMonitorSetecMode.HardwareSwitchOn, 
				_ => PowerMonitorSetecMode.Unknown, 
			};
		}

		public void SetMode(PowerMonitorSetecMode mode)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)7, (byte)mode, 0);
		}
	}
	public interface ILogicalDeviceRelayBasicCommand : IDeviceCommandPacket, IDeviceDataPacket, IEquatable<LogicalDeviceCommandPacket>
	{
		bool ClearingFault { get; }

		bool Latching { get; }

		bool IsOn { get; }
	}
	public interface ILogicalDeviceRelayBasicCommandFactory
	{
		ILogicalDeviceRelayBasicCommand MakeRelayOnCommand();

		ILogicalDeviceRelayBasicCommand MakeRelayOffCommand();

		ILogicalDeviceRelayBasicCommand MakeClearFaultCommand();
	}
	public interface ILogicalDeviceRelayBasicCommandSerializable : ILogicalDeviceCommandSerializable, IJsonSerializerClass
	{
	}
	public interface ILogicalDeviceRelayBasicStatus : ILogicalDeviceStatus<ILogicalDeviceRelayBasicStatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		bool IsFaulted { get; }

		bool RelayState { get; }

		bool IsOn { get; }

		bool IsOff { get; }

		bool IsValid { get; }

		bool UserClearRequired { get; }

		DTC_ID UserMessageDtc { get; }

		bool CommandOnAllowed { get; }

		bool IsPositionKnown { get; }

		byte Position { get; }

		bool IsCurrentDrawAmpsKnown { get; }

		float CurrentDrawAmps { get; }

		void SetState(bool isOn);

		bool SetFault(bool isFaulted);

		bool SetUserClearRequired(bool disabled);

		bool SetUserMessageDtc(DTC_ID dtc);

		bool SetCommandOnAllowed(bool allowed);

		bool SetPosition(byte position);

		bool SetCurrentDrawAmps(float voltage);

		ILogicalDeviceRelayBasicStatus CopyStatus();
	}
	public interface ILogicalDeviceRelayBasicStatusSerializable : ILogicalDeviceStatusSerializable, IJsonSerializerClass
	{
	}
	public interface ILogicalDeviceRelayCapability : ILogicalDeviceCapability, INotifyPropertyChanged
	{
		bool IsSoftwareConfigurableFuseSupported { get; }

		bool IsCoarsePositionSupported { get; }

		bool AreAutoCommandsSupported { get; }

		bool IsFinePositionSupported { get; }

		bool IsHomingSupported { get; }

		bool IsAwningSensorSupported { get; }

		PhysicalSwitchTypeCapability PhysicalSwitchType { get; }

		AllLightsGroupBehaviorCapability AllLightsGroupBehavior { get; }
	}
	[Flags]
	public enum RelayCapabilityFlagType1 : Enum
	{
		None = 0,
		SupportsSoftwareConfigurableFuse = 1
	}
	[Flags]
	public enum RelayCapabilityFlagType2 : Enum
	{
		None = 0,
		SupportsSoftwareConfigurableFuse = 1,
		SupportsCoarsePosition = 2,
		SupportsFinePosition = 4,
		PhysicalSwitchMask = 0x18,
		AllLightsGroupBehaviorMask = 0x60
	}
	[Flags]
	public enum RelayHBridgeCapabilityFlagType2 : Enum
	{
		None = 0,
		SupportsSoftwareConfigurableFuse = 1,
		SupportsAutoCommands = 2,
		SupportsFinePosition = 4,
		PhysicalSwitchMask = 0x18,
		AllLightsGroupBehaviorMask = 0x60,
		SupportsHoming = 0x20,
		SupportsAwningSensor = 0x40
	}
	public interface IRelayBasic : ISwitchableDevice, ILogicalDeviceSwitchableReadonly, IDevicesCommon, INotifyPropertyChanged
	{
		bool Off { get; }

		bool Faulted { get; }

		bool UserClearRequired { get; }

		DTC_ID UserMessageDtc { get; }

		bool IsValid { get; }
	}
	public interface ILogicalDeviceLatchingRelay : IRelayBasic, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, IDevicesCommon, INotifyPropertyChanged, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable
	{
		ILogicalDeviceRelayBasicCommandFactory CommandFactoryBasic { get; }
	}
	public interface ILogicalDeviceLatchingRelay<TRelayBasicStatus> : ILogicalDeviceLatchingRelay, IRelayBasic, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, IDevicesCommon, INotifyPropertyChanged, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceWithStatus<TRelayBasicStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<TRelayBasicStatus>, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement where TRelayBasicStatus : ILogicalDeviceRelayBasicStatus, new()
	{
	}
	public interface ILogicalDeviceLatchingRelayDirect<TRelayBasicStatus> : ILogicalDeviceLatchingRelay<TRelayBasicStatus>, ILogicalDeviceLatchingRelay, IRelayBasic, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, IDevicesCommon, INotifyPropertyChanged, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceWithStatus<TRelayBasicStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<TRelayBasicStatus>, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink where TRelayBasicStatus : ILogicalDeviceRelayBasicStatus, new()
	{
	}
	public interface ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus> : ILogicalDeviceLatchingRelay<TRelayBasicStatus>, ILogicalDeviceLatchingRelay, IRelayBasic, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, IDevicesCommon, INotifyPropertyChanged, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceWithStatus<TRelayBasicStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<TRelayBasicStatus>, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceSwitchableRemote, ILogicalDeviceSwitchable, ILogicalDeviceRemote where TRelayBasicStatus : ILogicalDeviceRelayBasicStatus, new()
	{
	}
	public class LogicalDeviceRelayBasicFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_002a: Unknown result type (might be due to invalid IL or missing references)
			//IL_004a: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) == 3)
			{
				LogicalDeviceRelayCapabilityType1 capability = new LogicalDeviceRelayCapabilityType1(rawCapability);
				return (ILogicalDevice)(object)new LogicalDeviceRelayBasicLatchingType1(logicalDeviceId, capability, service);
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) == 30)
			{
				LogicalDeviceRelayCapabilityType2 capability2 = new LogicalDeviceRelayCapabilityType2(rawCapability);
				return (ILogicalDevice)(object)new LogicalDeviceRelayBasicLatchingType2(logicalDeviceId, capability2, service);
			}
			return null;
		}
	}
	public class LogicalDeviceRelayBasicLatching<TRelayBasicStatus, TRelayCommandFactory, TCapability> : LogicalDevice<TRelayBasicStatus, TCapability>, ILogicalDeviceLatchingRelayDirect<TRelayBasicStatus>, ILogicalDeviceLatchingRelay<TRelayBasicStatus>, ILogicalDeviceLatchingRelay, IRelayBasic, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, IDevicesCommon, INotifyPropertyChanged, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceWithStatus<TRelayBasicStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<TRelayBasicStatus>, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink, ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus>, ILogicalDeviceSwitchableRemote, ILogicalDeviceSwitchable, ILogicalDeviceRemote where TRelayBasicStatus : class, ILogicalDeviceRelayBasicStatus, new() where TRelayCommandFactory : ILogicalDeviceRelayBasicCommandFactory, new() where TCapability : ILogicalDeviceRelayCapability
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass59_0 : Object
		{
			public LogicalDeviceRelayBasicLatching<TRelayBasicStatus, TRelayCommandFactory, TCapability> <>4__this;

			public CommandResult commandResult;

			public bool turnOnRelay;

			internal Task<CommandResult> <SendCommandAsync>b__1(CancellationToken cancelToken)
			{
				//IL_000c: Unknown result type (might be due to invalid IL or missing references)
				return <>4__this.SendRemoteCommandAsync(turnOnRelay, cancelToken);
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass59_1 : Object
		{
			public IDirectCommandSwitch directManager;

			public <>c__DisplayClass59_0 CS$<>8__locals1;

			internal Task<CommandResult> <SendCommandAsync>b__2(CancellationToken cancelToken)
			{
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				return directManager.SendDirectCommandRelayBasicSwitch(CS$<>8__locals1.<>4__this, CS$<>8__locals1.turnOnRelay, cancelToken);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandAsync>d__59 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceRelayBasicLatching<TRelayBasicStatus, TRelayCommandFactory, TCapability> <>4__this;

			public bool turnOnRelay;

			public bool waitForCurrentStatus;

			private <>c__DisplayClass59_0 <>8__1;

			private <>c__DisplayClass59_1 <>8__2;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_0102: Unknown result type (might be due to invalid IL or missing references)
				//IL_010a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0112: Unknown result type (might be due to invalid IL or missing references)
				//IL_0450: Expected O, but got Unknown
				//IL_04f2: Expected O, but got Unknown
				//IL_0525: Unknown result type (might be due to invalid IL or missing references)
				//IL_04e8: Unknown result type (might be due to invalid IL or missing references)
				//IL_04ed: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dc: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e8: Unknown result type (might be due to invalid IL or missing references)
				//IL_009f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ae: Unknown result type (might be due to invalid IL or missing references)
				//IL_0076: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c3: Unknown result type (might be due to invalid IL or missing references)
				//IL_022c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0231: Unknown result type (might be due to invalid IL or missing references)
				//IL_0239: Unknown result type (might be due to invalid IL or missing references)
				//IL_0323: Unknown result type (might be due to invalid IL or missing references)
				//IL_0328: Unknown result type (might be due to invalid IL or missing references)
				//IL_0330: Unknown result type (might be due to invalid IL or missing references)
				//IL_03fa: Unknown result type (might be due to invalid IL or missing references)
				//IL_03ff: Unknown result type (might be due to invalid IL or missing references)
				//IL_0407: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b2: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b8: Invalid comparison between Unknown and I4
				//IL_007e: Unknown result type (might be due to invalid IL or missing references)
				//IL_024a: Unknown result type (might be due to invalid IL or missing references)
				//IL_024f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0257: Unknown result type (might be due to invalid IL or missing references)
				//IL_0259: Unknown result type (might be due to invalid IL or missing references)
				//IL_0341: Unknown result type (might be due to invalid IL or missing references)
				//IL_0346: Unknown result type (might be due to invalid IL or missing references)
				//IL_0353: Unknown result type (might be due to invalid IL or missing references)
				//IL_0355: Unknown result type (might be due to invalid IL or missing references)
				//IL_0418: Unknown result type (might be due to invalid IL or missing references)
				//IL_041d: Unknown result type (might be due to invalid IL or missing references)
				//IL_042a: Unknown result type (might be due to invalid IL or missing references)
				//IL_042c: Unknown result type (might be due to invalid IL or missing references)
				//IL_01da: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01fc: Unknown result type (might be due to invalid IL or missing references)
				//IL_02cc: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_02f3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0211: Unknown result type (might be due to invalid IL or missing references)
				//IL_0213: Unknown result type (might be due to invalid IL or missing references)
				//IL_0197: Unknown result type (might be due to invalid IL or missing references)
				//IL_0440: Unknown result type (might be due to invalid IL or missing references)
				//IL_0308: Unknown result type (might be due to invalid IL or missing references)
				//IL_030a: Unknown result type (might be due to invalid IL or missing references)
				//IL_03a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_03c5: Unknown result type (might be due to invalid IL or missing references)
				//IL_03ca: Unknown result type (might be due to invalid IL or missing references)
				//IL_03df: Unknown result type (might be due to invalid IL or missing references)
				//IL_03e1: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayBasicLatching<TRelayBasicStatus, TRelayCommandFactory, TCapability> logicalDeviceRelayBasicLatching = <>4__this;
				CommandResult result;
				try
				{
					if (num == 0)
					{
						goto IL_0090;
					}
					if ((uint)(num - 1) <= 2u)
					{
						goto IL_019d;
					}
					<>8__1 = new <>c__DisplayClass59_0();
					<>8__1.<>4__this = <>4__this;
					<>8__1.turnOnRelay = turnOnRelay;
					if (((CommonDisposableNotifyPropertyChanged)logicalDeviceRelayBasicLatching).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceRelayBasicLatching", String.Concat(((LogicalDevice<?>)(object)logicalDeviceRelayBasicLatching).DeviceName, " Latching Relaying ExecuteCommand ignored as relay has been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else
					{
						if ((int)((LogicalDevice<?>)(object)logicalDeviceRelayBasicLatching).ActiveConnection != 0)
						{
							if (waitForCurrentStatus)
							{
								goto IL_0090;
							}
							goto IL_0118;
						}
						result = (CommandResult)6;
					}
					goto end_IL_000e;
					IL_0118:
					object lockForceUseCommandStatus = logicalDeviceRelayBasicLatching._lockForceUseCommandStatus;
					bool flag = false;
					try
					{
						Monitor.Enter(lockForceUseCommandStatus, ref flag);
						ILogicalDeviceRelayBasicStatus logicalDeviceRelayBasicStatus = ((LogicalDevice<TRelayBasicStatus, ?>)(object)logicalDeviceRelayBasicLatching).DeviceStatus.CopyStatus();
						logicalDeviceRelayBasicStatus.SetState(<>8__1.turnOnRelay);
						logicalDeviceRelayBasicLatching.SyncWithStatus(logicalDeviceRelayBasicStatus);
						logicalDeviceRelayBasicLatching.NumberOfCommandsRunning++;
						((CommonNotifyPropertyChanged)logicalDeviceRelayBasicLatching).NotifyPropertyChanged("IsRunningCommands", true);
						((CommonNotifyPropertyChanged)logicalDeviceRelayBasicLatching).NotifyPropertyChanged("SwitchInTransition", true);
					}
					finally
					{
						if (num < 0 && flag)
						{
							Monitor.Exit(lockForceUseCommandStatus);
						}
					}
					<>8__1.commandResult = (CommandResult)7;
					goto IL_019d;
					IL_0090:
					try
					{
						TaskAwaiter val;
						if (num != 0)
						{
							val = ((LogicalDevice<TRelayBasicStatus, ?>)(object)logicalDeviceRelayBasicLatching).WaitForDeviceStatusToHaveDataAsync(5000, logicalDeviceRelayBasicLatching._commandCancelSource.Token).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SendCommandAsync>d__59>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val)).GetResult();
					}
					catch (TimeoutException)
					{
						result = (CommandResult)5;
						goto end_IL_000e;
					}
					catch (OperationCanceledException)
					{
						result = (CommandResult)1;
						goto end_IL_000e;
					}
					catch (Object)
					{
						result = (CommandResult)7;
						goto end_IL_000e;
					}
					goto IL_0118;
					IL_019d:
					try
					{
						TaskAwaiter<CommandResult> val2;
						CommandResult result2;
						switch (num)
						{
						default:
						{
							if ((int)((LogicalDevice<?>)(object)logicalDeviceRelayBasicLatching).ActiveConnection == 2)
							{
								val2 = logicalDeviceRelayBasicLatching.BasicCommandRunner.SendCommandAsync((Func<CancellationToken, Task<CommandResult>>)((CancellationToken cancelToken) => <>8__1.<>4__this.SendRemoteCommandAsync(<>8__1.turnOnRelay, cancelToken)), logicalDeviceRelayBasicLatching._commandCancelSource.Token, (ILogicalDevice)(object)logicalDeviceRelayBasicLatching, (Func<ILogicalDevice, CommandControl>)CheckCommandExecution, (CommandSendOption)1).GetAwaiter();
								if (!val2.IsCompleted)
								{
									num = (<>1__state = 1);
									<>u__2 = val2;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandAsync>d__59>(ref val2, ref this);
									return;
								}
								goto IL_0248;
							}
							<>8__2 = new <>c__DisplayClass59_1();
							<>8__2.CS$<>8__locals1 = <>8__1;
							ILogicalDeviceSourceDirect primaryDeviceSourceDirect = ((LogicalDevice<?>)(object)logicalDeviceRelayBasicLatching).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceRelayBasicLatching);
							<>8__2.directManager = primaryDeviceSourceDirect as IDirectCommandSwitch;
							if (<>8__2.directManager != null)
							{
								val2 = logicalDeviceRelayBasicLatching.BasicCommandRunner.SendCommandAsync((Func<CancellationToken, Task<CommandResult>>)((CancellationToken cancelToken) => <>8__2.directManager.SendDirectCommandRelayBasicSwitch(<>8__2.CS$<>8__locals1.<>4__this, <>8__2.CS$<>8__locals1.turnOnRelay, cancelToken)), logicalDeviceRelayBasicLatching._commandCancelSource.Token, (ILogicalDevice)(object)logicalDeviceRelayBasicLatching, (Func<ILogicalDevice, CommandControl>)CheckCommandExecution, (CommandSendOption)1).GetAwaiter();
								if (!val2.IsCompleted)
								{
									num = (<>1__state = 2);
									<>u__2 = val2;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandAsync>d__59>(ref val2, ref this);
									return;
								}
								goto IL_033f;
							}
							if (logicalDeviceRelayBasicLatching.IdsCanCommandRunnerDefault != null)
							{
								ILogicalDeviceRelayBasicCommand logicalDeviceRelayBasicCommand = (<>8__2.CS$<>8__locals1.turnOnRelay ? logicalDeviceRelayBasicLatching.CommandFactoryBasic.MakeRelayOnCommand() : logicalDeviceRelayBasicLatching.CommandFactoryBasic.MakeRelayOffCommand());
								val2 = logicalDeviceRelayBasicLatching.IdsCanCommandRunnerDefault.SendCommandAsync((IDeviceCommandPacket)logicalDeviceRelayBasicCommand, logicalDeviceRelayBasicLatching._commandCancelSource.Token, (Func<ILogicalDevice, CommandControl>)CheckCommandExecution, (CommandSendOption)0).GetAwaiter();
								if (!val2.IsCompleted)
								{
									num = (<>1__state = 3);
									<>u__2 = val2;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandAsync>d__59>(ref val2, ref this);
									return;
								}
								goto IL_0416;
							}
							<>8__2.CS$<>8__locals1.commandResult = (CommandResult)10;
							break;
						}
						case 1:
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0248;
						case 2:
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_033f;
						case 3:
							{
								val2 = <>u__2;
								<>u__2 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								goto IL_0416;
							}
							IL_033f:
							result2 = val2.GetResult();
							<>8__2.CS$<>8__locals1.commandResult = result2;
							break;
							IL_0416:
							result2 = val2.GetResult();
							<>8__2.CS$<>8__locals1.commandResult = result2;
							break;
							IL_0248:
							result2 = val2.GetResult();
							<>8__1.commandResult = result2;
							goto end_IL_019d;
						}
						<>8__2 = null;
						end_IL_019d:;
					}
					catch (Exception ex3)
					{
						Exception ex4 = ex3;
						TaggedLog.Error("LogicalDeviceRelayBasicLatching", String.Format("Error sending RelayBasicLatching command: {0}", (object)ex4), Array.Empty<object>());
					}
					finally
					{
						if (num < 0)
						{
							lockForceUseCommandStatus = logicalDeviceRelayBasicLatching._lockForceUseCommandStatus;
							flag = false;
							try
							{
								Monitor.Enter(lockForceUseCommandStatus, ref flag);
								if (logicalDeviceRelayBasicLatching.NumberOfCommandsRunning != 0)
								{
									logicalDeviceRelayBasicLatching.NumberOfCommandsRunning--;
								}
								if (logicalDeviceRelayBasicLatching.NumberOfCommandsRunning == 0)
								{
									logicalDeviceRelayBasicLatching.SyncWithStatus(((LogicalDevice<TRelayBasicStatus, ?>)(object)logicalDeviceRelayBasicLatching).DeviceStatus);
								}
								((CommonNotifyPropertyChanged)logicalDeviceRelayBasicLatching).NotifyPropertyChanged("IsRunningCommands", true);
								((CommonNotifyPropertyChanged)logicalDeviceRelayBasicLatching).NotifyPropertyChanged("SwitchInTransition", true);
							}
							finally
							{
								if (num < 0 && flag)
								{
									Monitor.Exit(lockForceUseCommandStatus);
								}
							}
						}
					}
					result = <>8__1.commandResult;
					end_IL_000e:;
				}
				catch (Exception ex5)
				{
					Exception exception = ex5;
					<>1__state = -2;
					<>8__1 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				<>t__builder.SetResult(result);
				CommandControl CheckCommandExecution(ILogicalDevice logicalDevice)
				{
					//IL_0006: Unknown result type (might be due to invalid IL or missing references)
					//IL_000c: Invalid comparison between Unknown and I4
					//IL_0028: Unknown result type (might be due to invalid IL or missing references)
					//IL_0042: Unknown result type (might be due to invalid IL or missing references)
					if ((int)((LogicalDevice<?>)(object)((<>c__DisplayClass59_0)this).<>4__this).ActiveConnection != 2 && ((LogicalDevice<TRelayBasicStatus, ?>)(object)((<>c__DisplayClass59_0)this).<>4__this).DeviceStatus.UserClearRequired)
					{
						((<>c__DisplayClass59_0)this).commandResult = (CommandResult)11;
						throw new Exception(String.Concat(((LogicalDevice<?>)(object)((<>c__DisplayClass59_0)this).<>4__this).DeviceName, " Relay faulted when trying to be set"));
					}
					if (((LogicalDevice<TRelayBasicStatus, ?>)(object)((<>c__DisplayClass59_0)this).<>4__this).DeviceStatus.IsOn != ((<>c__DisplayClass59_0)this).turnOnRelay)
					{
						return (CommandControl)1;
					}
					return (CommandControl)0;
				}
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendRemoteCommandAsync>d__60 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceRelayBasicLatching<TRelayBasicStatus, TRelayCommandFactory, TCapability> <>4__this;

			public CancellationToken cancelToken;

			public bool turnOnRelay;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_00cb: Expected O, but got Unknown
				//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c6: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0050: Unknown result type (might be due to invalid IL or missing references)
				//IL_0074: Unknown result type (might be due to invalid IL or missing references)
				//IL_0079: Unknown result type (might be due to invalid IL or missing references)
				//IL_0060: Unknown result type (might be due to invalid IL or missing references)
				//IL_008d: Unknown result type (might be due to invalid IL or missing references)
				//IL_008e: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayBasicLatching<TRelayBasicStatus, TRelayCommandFactory, TCapability> logicalDeviceRelayBasicLatching = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_00bf;
					}
					if (((CommonDisposableNotifyPropertyChanged)logicalDeviceRelayBasicLatching).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceRelayBasicLatching", String.Concat(((LogicalDevice<?>)(object)logicalDeviceRelayBasicLatching).DeviceName, " SendDirectCommandAsync ignored as logical device has been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else if (((CancellationToken)(ref cancelToken)).IsCancellationRequested)
					{
						result = (CommandResult)1;
					}
					else
					{
						if (((LogicalDevice<?>)(object)logicalDeviceRelayBasicLatching).IsRemoteAccessAvailable)
						{
							val = logicalDeviceRelayBasicLatching.RemoteRelayBasic.SendCommandSetSwitch(turnOnRelay).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__60>(ref val, ref this);
								return;
							}
							goto IL_00bf;
						}
						result = (CommandResult)9;
					}
					goto end_IL_000e;
					IL_00bf:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ToggleAsync>d__68 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceRelayBasicLatching<TRelayBasicStatus, TRelayCommandFactory, TCapability> <>4__this;

			public bool restore;

			private ConfiguredTaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_00f8: Expected O, but got Unknown
				//IL_0063: Unknown result type (might be due to invalid IL or missing references)
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_0098: Unknown result type (might be due to invalid IL or missing references)
				//IL_009d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_002c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0030: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_004a: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayBasicLatching<TRelayBasicStatus, TRelayCommandFactory, TCapability> logicalDeviceRelayBasicLatching = <>4__this;
				bool result;
				try
				{
					ConfiguredTaskAwaiter<bool> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_007e;
					}
					if (num != 1)
					{
						if (logicalDeviceRelayBasicLatching.On)
						{
							val = logicalDeviceRelayBasicLatching.TurnOffAsync().ConfigureAwait(false).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<bool>, <ToggleAsync>d__68>(ref val, ref this);
								return;
							}
							goto IL_007e;
						}
						val = logicalDeviceRelayBasicLatching.TurnOnAsync(restore).ConfigureAwait(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<bool>, <ToggleAsync>d__68>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<bool>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
					goto end_IL_000e;
					IL_007e:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TurnOffAsync>d__70 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceRelayBasicLatching<TRelayBasicStatus, TRelayCommandFactory, TCapability> <>4__this;

			private ConfiguredTaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_007d: Expected O, but got Unknown
				//IL_0053: Unknown result type (might be due to invalid IL or missing references)
				//IL_0058: Unknown result type (might be due to invalid IL or missing references)
				//IL_005f: Unknown result type (might be due to invalid IL or missing references)
				//IL_001a: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_0070: Unknown result type (might be due to invalid IL or missing references)
				//IL_0076: Invalid comparison between Unknown and I4
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayBasicLatching<TRelayBasicStatus, TRelayCommandFactory, TCapability> logicalDeviceRelayBasicLatching = <>4__this;
				bool result;
				try
				{
					ConfiguredTaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceRelayBasicLatching.SendCommandAsync(turnOnRelay: false, waitForCurrentStatus: false).ConfigureAwait(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<CommandResult>, <TurnOffAsync>d__70>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = (int)val.GetResult() == 0;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TurnOnAsync>d__69 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceRelayBasicLatching<TRelayBasicStatus, TRelayCommandFactory, TCapability> <>4__this;

			private ConfiguredTaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_007d: Expected O, but got Unknown
				//IL_0053: Unknown result type (might be due to invalid IL or missing references)
				//IL_0058: Unknown result type (might be due to invalid IL or missing references)
				//IL_005f: Unknown result type (might be due to invalid IL or missing references)
				//IL_001a: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_0070: Unknown result type (might be due to invalid IL or missing references)
				//IL_0076: Invalid comparison between Unknown and I4
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayBasicLatching<TRelayBasicStatus, TRelayCommandFactory, TCapability> logicalDeviceRelayBasicLatching = <>4__this;
				bool result;
				try
				{
					ConfiguredTaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceRelayBasicLatching.SendCommandAsync(turnOnRelay: true, waitForCurrentStatus: false).ConfigureAwait(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<CommandResult>, <TurnOnAsync>d__69>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = (int)val.GetResult() == 0;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceRelayBasicLatching";

		public const uint CommandTimeoutMs = 5000u;

		public static ushort ShowCoachWindowFunctionNameId = 65535;

		protected ILogicalDeviceCommandRunnerIdsCan? IdsCanCommandRunnerDefault;

		protected RemoteCommandControl RemoteCommandControl = new RemoteCommandControl();

		protected ILogicalDeviceCommandControlRunner BasicCommandRunner = (ILogicalDeviceCommandControlRunner)new LogicalDeviceCommandControlRunner();

		protected TRelayCommandFactory CommandFactory = new TRelayCommandFactory();

		private CancellationTokenSource _commandCancelSource = new CancellationTokenSource();

		protected uint NumberOfCommandsRunning;

		private readonly object _lockForceUseCommandStatus = (object)new Object();

		private bool _on;

		protected ILogicalDevicePidFixedPoint BatteryVoltagePidCan;

		public override bool IsLegacyDeviceHazardous => false;

		public RemoteOnline RemoteOnline
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public RemoteRelayBasic<TRelayBasicStatus> RemoteRelayBasic
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public RemoteRelayBasicFault<TRelayBasicStatus> RemoteRelayFault
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public RemoteRelayBasicUserClearRequired<TRelayBasicStatus> RemoteRelayUserClearRequired
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public RemoteRelayBasicUserMessageDtc<TRelayBasicStatus> RemoteRelayUserMessageDtc
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		}

		public RemoteRelayBasicPosition<TRelayBasicStatus> RemoteRelayPosition
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public RemoteRelayBasicCurrentDraw<TRelayBasicStatus> RemoteRelayCurrent
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public ILogicalDeviceRelayBasicCommandFactory CommandFactoryBasic => CommandFactory;

		public bool IsRunningCommands => NumberOfCommandsRunning != 0;

		public override string DeviceName
		{
			get
			{
				if (FUNCTION_NAME.op_Implicit(((LogicalDevice<?>)(object)this).LogicalId.FunctionName) != ShowCoachWindowFunctionNameId)
				{
					return ((LogicalDevice<?>)(object)this).DeviceName;
				}
				int functionInstance = ((LogicalDevice<?>)(object)this).LogicalId.FunctionInstance;
				return String.Concat("Window Shades", (functionInstance > 0) ? String.Format(" {0}", (object)functionInstance) : "");
			}
		}

		public bool Off => !On;

		public bool Faulted
		{
			get
			{
				if (((LogicalDevice<TRelayBasicStatus, ?>)(object)this).DeviceStatus.IsValid)
				{
					return ((LogicalDevice<TRelayBasicStatus, ?>)(object)this).DeviceStatus.IsFaulted;
				}
				return false;
			}
		}

		public bool UserClearRequired
		{
			get
			{
				if (((LogicalDevice<TRelayBasicStatus, ?>)(object)this).DeviceStatus.IsValid)
				{
					return ((LogicalDevice<TRelayBasicStatus, ?>)(object)this).DeviceStatus.UserClearRequired;
				}
				return false;
			}
		}

		public DTC_ID UserMessageDtc
		{
			get
			{
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				if (!((LogicalDevice<TRelayBasicStatus, ?>)(object)this).DeviceStatus.IsValid)
				{
					return (DTC_ID)0;
				}
				return ((LogicalDevice<TRelayBasicStatus, ?>)(object)this).DeviceStatus.UserMessageDtc;
			}
		}

		public bool IsValid
		{
			get
			{
				if (((LogicalDevice<TRelayBasicStatus, ?>)(object)this).DeviceStatus.IsValid)
				{
					return ((LogicalDevice<TRelayBasicStatus, ?>)(object)this).DeviceStatus.IsValid;
				}
				return false;
			}
		}

		public bool On => _on;

		public bool IsCurrentlyOn
		{
			get
			{
				if (((LogicalDevice<TRelayBasicStatus, ?>)(object)this).DeviceStatus.IsValid)
				{
					return ((LogicalDevice<TRelayBasicStatus, ?>)(object)this).DeviceStatus.IsOn;
				}
				return false;
			}
		}

		public virtual bool IsMasterSwitchControllable
		{
			get
			{
				if (((LogicalDevice<?>)(object)this).DeviceCapability.AllLightsGroupBehavior != AllLightsGroupBehaviorCapability.FeatureNotSupported)
				{
					return ((LogicalDevice<?>)(object)this).DeviceCapability.AllLightsGroupBehavior == AllLightsGroupBehaviorCapability.FeatureSupportedAndEnabled;
				}
				return false;
			}
		}

		public SwitchTransition SwitchInTransition
		{
			get
			{
				if (On == ((LogicalDevice<TRelayBasicStatus, ?>)(object)this).DeviceStatus.IsOn || NumberOfCommandsRunning == 0)
				{
					return SwitchTransition.No;
				}
				return SwitchTransition.Transitioning;
			}
		}

		public virtual SwitchUsage UsedFor
		{
			get
			{
				//IL_0006: Unknown result type (might be due to invalid IL or missing references)
				//IL_000b: Unknown result type (might be due to invalid IL or missing references)
				//IL_000c: Unknown result type (might be due to invalid IL or missing references)
				//IL_000f: Invalid comparison between Unknown and I4
				//IL_0020: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Invalid comparison between Unknown and I4
				//IL_0011: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Invalid comparison between Unknown and I4
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Invalid comparison between Unknown and I4
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Invalid comparison between Unknown and I4
				//IL_0015: Unknown result type (might be due to invalid IL or missing references)
				//IL_0017: Invalid comparison between Unknown and I4
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0039: Invalid comparison between Unknown and I4
				//IL_002a: Unknown result type (might be due to invalid IL or missing references)
				//IL_002d: Invalid comparison between Unknown and I4
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_001c: Invalid comparison between Unknown and I4
				FUNCTION_CLASS functionClass = ((LogicalDevice<?>)(object)this).LogicalId.FunctionClass;
				if ((int)functionClass <= 9)
				{
					if ((int)functionClass == 4)
					{
						goto IL_003d;
					}
					if ((int)functionClass == 8)
					{
						return SwitchUsage.Light;
					}
					if ((int)functionClass == 9)
					{
						return SwitchUsage.Pump;
					}
				}
				else if ((int)functionClass <= 15)
				{
					if ((int)functionClass == 13)
					{
						return SwitchUsage.Vent;
					}
					if ((int)functionClass == 15)
					{
						goto IL_003d;
					}
				}
				else
				{
					if ((int)functionClass == 21)
					{
						return SwitchUsage.Valve;
					}
					if ((int)functionClass == 28)
					{
						return SwitchUsage.Fan;
					}
				}
				return SwitchUsage.Generic;
				IL_003d:
				return SwitchUsage.Heater;
			}
		}

		public override bool IsRemoteAccessAvailable
		{
			get
			{
				ILogicalDeviceRemoteManager remoteManager = ((LogicalDevice<?>)(object)this).DeviceService.RemoteManager;
				if (remoteManager == null)
				{
					return false;
				}
				return remoteManager.IsRemoteAccessAvailable((ILogicalDeviceRemote)(object)this, (IRemoteChannelDef)(RemoteRelayBasic?.Channel));
			}
		}

		public IRemoteChannelDefOnline RemoteOnlineChannel => RemoteOnline?.Channel;

		public virtual LogicalDeviceExScope VoltageMeasurementBatteryPidScope => (LogicalDeviceExScope)2;

		public virtual ILogicalDevicePidFixedPoint VoltageMeasurementBatteryPid
		{
			get
			{
				//IL_0014: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Expected O, but got Unknown
				//IL_0020: Expected O, but got Unknown
				ILogicalDevicePidFixedPoint obj = BatteryVoltagePidCan;
				if (obj == null)
				{
					LogicalDevicePidFixedPoint val = new LogicalDevicePidFixedPoint((FixedPointType)1, (ILogicalDevice)(object)this, PID.BATTERY_VOLTAGE, (LogicalDeviceSessionType)0, (Func<ulong, bool>)null);
					ILogicalDevicePidFixedPoint val2 = (ILogicalDevicePidFixedPoint)val;
					BatteryVoltagePidCan = (ILogicalDevicePidFixedPoint)val;
					obj = val2;
				}
				return obj;
			}
		}

		public bool IsVoltagePidReadSupported => true;

		public LogicalDeviceRelayBasicLatching(ILogicalDeviceId logicalDeviceId, TCapability capability, ILogicalDeviceService? service = null, bool isFunctionClassChangeable = false)
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Expected O, but got Unknown
			//IL_0022: Unknown result type (might be due to invalid IL or missing references)
			//IL_002c: Expected O, but got Unknown
			//IL_002d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0037: Expected O, but got Unknown
			((LogicalDevice<TRelayBasicStatus, ?>)(object)this)..ctor(logicalDeviceId, MakeNewStatus(), capability, service, isFunctionClassChangeable);
			RemoteOnline = new RemoteOnline((ILogicalDeviceRemote)(object)this, ((LogicalDevice<TCapability>)(object)this).RemoteChannels);
			RemoteRelayBasic = new RemoteRelayBasic<TRelayBasicStatus>(this, RemoteCommandControl, ((LogicalDevice<TCapability>)(object)this).RemoteChannels);
			RemoteRelayFault = new RemoteRelayBasicFault<TRelayBasicStatus>(this, RemoteCommandControl, ((LogicalDevice<TCapability>)(object)this).RemoteChannels);
			RemoteRelayUserClearRequired = new RemoteRelayBasicUserClearRequired<TRelayBasicStatus>(this, RemoteCommandControl, ((LogicalDevice<TCapability>)(object)this).RemoteChannels);
			RemoteRelayUserMessageDtc = new RemoteRelayBasicUserMessageDtc<TRelayBasicStatus>(this, ((LogicalDevice<TCapability>)(object)this).RemoteChannels);
			RemoteRelayPosition = new RemoteRelayBasicPosition<TRelayBasicStatus>(this, ((LogicalDevice<TCapability>)(object)this).RemoteChannels);
			RemoteRelayCurrent = new RemoteRelayBasicCurrentDraw<TRelayBasicStatus>(this, ((LogicalDevice<TCapability>)(object)this).RemoteChannels);
		}

		public static TRelayBasicStatus MakeNewStatus()
		{
			return new TRelayBasicStatus();
		}

		public override void OnDeviceStatusChanged()
		{
			lock (_lockForceUseCommandStatus)
			{
				if (NumberOfCommandsRunning == 0)
				{
					SyncWithStatus(((LogicalDevice<TRelayBasicStatus, ?>)(object)this).DeviceStatus);
				}
			}
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("Faulted");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("UserClearRequired");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("IsValid");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("On");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("IsCurrentlyOn");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("Off");
			((LogicalDevice<TRelayBasicStatus, ?>)(object)this).OnDeviceStatusChanged();
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task<CommandResult> SendCommandAsync(bool turnOnRelay, bool waitForCurrentStatus)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandAsync>d__59 <SendCommandAsync>d__ = default(<SendCommandAsync>d__59);
			<SendCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandAsync>d__.<>4__this = this;
			<SendCommandAsync>d__.turnOnRelay = turnOnRelay;
			<SendCommandAsync>d__.waitForCurrentStatus = waitForCurrentStatus;
			<SendCommandAsync>d__.<>1__state = -1;
			<SendCommandAsync>d__.<>t__builder.Start<<SendCommandAsync>d__59>(ref <SendCommandAsync>d__);
			return <SendCommandAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendRemoteCommandAsync(bool turnOnRelay, CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<SendRemoteCommandAsync>d__60 <SendRemoteCommandAsync>d__ = default(<SendRemoteCommandAsync>d__60);
			<SendRemoteCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendRemoteCommandAsync>d__.<>4__this = this;
			<SendRemoteCommandAsync>d__.turnOnRelay = turnOnRelay;
			<SendRemoteCommandAsync>d__.cancelToken = cancelToken;
			<SendRemoteCommandAsync>d__.<>1__state = -1;
			<SendRemoteCommandAsync>d__.<>t__builder.Start<<SendRemoteCommandAsync>d__60>(ref <SendRemoteCommandAsync>d__);
			return <SendRemoteCommandAsync>d__.<>t__builder.Task;
		}

		protected override void DebugUpdateDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, uint dataLength, string optionalText = "")
		{
			TaggedLog.Information("LogicalDeviceRelayBasicLatching", String.Format("Data Changed {0}: Relay = {1}, Faults = {2} {3}", (object[])(object)new Object[4]
			{
				(Object)((LogicalDevice<?>)(object)this).LogicalId,
				(object)((LogicalDevice<TRelayBasicStatus, ?>)(object)this).DeviceStatus.IsOn,
				(object)((LogicalDevice<TRelayBasicStatus, ?>)(object)this).DeviceStatus.IsFaulted,
				(Object)optionalText
			}), Array.Empty<object>());
		}

		protected void SyncWithStatus(ILogicalDeviceRelayBasicStatus status)
		{
			if (_on != status.IsOn)
			{
				_on = status.IsOn;
				((CommonNotifyPropertyChanged)this).OnPropertyChanged("On");
				((CommonNotifyPropertyChanged)this).OnPropertyChanged("Off");
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> ToggleAsync(bool restore = true)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<ToggleAsync>d__68 <ToggleAsync>d__ = default(<ToggleAsync>d__68);
			<ToggleAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<ToggleAsync>d__.<>4__this = this;
			<ToggleAsync>d__.restore = restore;
			<ToggleAsync>d__.<>1__state = -1;
			<ToggleAsync>d__.<>t__builder.Start<<ToggleAsync>d__68>(ref <ToggleAsync>d__);
			return <ToggleAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TurnOnAsync(bool restore = true)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<TurnOnAsync>d__69 <TurnOnAsync>d__ = default(<TurnOnAsync>d__69);
			<TurnOnAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TurnOnAsync>d__.<>4__this = this;
			<TurnOnAsync>d__.<>1__state = -1;
			<TurnOnAsync>d__.<>t__builder.Start<<TurnOnAsync>d__69>(ref <TurnOnAsync>d__);
			return <TurnOnAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TurnOffAsync()
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<TurnOffAsync>d__70 <TurnOffAsync>d__ = default(<TurnOffAsync>d__70);
			<TurnOffAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TurnOffAsync>d__.<>4__this = this;
			<TurnOffAsync>d__.<>1__state = -1;
			<TurnOffAsync>d__.<>t__builder.Start<<TurnOffAsync>d__70>(ref <TurnOffAsync>d__);
			return <TurnOffAsync>d__.<>t__builder.Task;
		}

		public Task<float> ReadVoltageMeasurementAsync(CancellationToken cancellationToken)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return LogicalDeviceVoltageExtension.ReadVoltageMeasurementAsync(VoltageMeasurementBatteryPid, cancellationToken);
		}

		public override void Dispose(bool disposing)
		{
			RemoteOnline remoteOnline = RemoteOnline;
			if (remoteOnline != null)
			{
				((CommonDisposable)remoteOnline).TryDispose();
			}
			RemoteOnline = null;
			RemoteRelayBasic<TRelayBasicStatus> remoteRelayBasic = RemoteRelayBasic;
			if (remoteRelayBasic != null)
			{
				((CommonDisposable)remoteRelayBasic).TryDispose();
			}
			RemoteRelayBasic = null;
			RemoteRelayBasicFault<TRelayBasicStatus> remoteRelayFault = RemoteRelayFault;
			if (remoteRelayFault != null)
			{
				((CommonDisposable)remoteRelayFault).TryDispose();
			}
			RemoteRelayFault = null;
			RemoteRelayBasicUserClearRequired<TRelayBasicStatus> remoteRelayUserClearRequired = RemoteRelayUserClearRequired;
			if (remoteRelayUserClearRequired != null)
			{
				((CommonDisposable)remoteRelayUserClearRequired).TryDispose();
			}
			RemoteRelayUserClearRequired = null;
			RemoteRelayBasicUserMessageDtc<TRelayBasicStatus> remoteRelayUserMessageDtc = RemoteRelayUserMessageDtc;
			if (remoteRelayUserMessageDtc != null)
			{
				((CommonDisposable)remoteRelayUserMessageDtc).TryDispose();
			}
			RemoteRelayUserMessageDtc = null;
			RemoteRelayBasicPosition<TRelayBasicStatus> remoteRelayPosition = RemoteRelayPosition;
			if (remoteRelayPosition != null)
			{
				((CommonDisposable)remoteRelayPosition).TryDispose();
			}
			RemoteRelayPosition = null;
			RemoteRelayBasicCurrentDraw<TRelayBasicStatus> remoteRelayCurrent = RemoteRelayCurrent;
			if (remoteRelayCurrent != null)
			{
				((CommonDisposable)remoteRelayCurrent).TryDispose();
			}
			RemoteRelayCurrent = null;
			CancellationTokenSource commandCancelSource = _commandCancelSource;
			if (commandCancelSource != null)
			{
				CancellationTokenSourceExtension.CancelAndDispose(commandCancelSource);
			}
			_commandCancelSource = null;
			RemoteCommandControl remoteCommandControl = RemoteCommandControl;
			if (remoteCommandControl != null)
			{
				((CommonDisposable)remoteCommandControl).TryDispose();
			}
			RemoteCommandControl = null;
			ILogicalDeviceCommandControlRunner basicCommandRunner = BasicCommandRunner;
			if (basicCommandRunner != null)
			{
				((ICommonDisposable)basicCommandRunner).TryDispose();
			}
			((LogicalDevice<TRelayBasicStatus, ?>)(object)this).Dispose(disposing);
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<?>)(object)this).LastReceivedNetworkStatus;
		}

		TRemoteChannelDef ILogicalDeviceRemote.GetRemoteChannelForChannelId<TRemoteChannelDef>(string channelId)
		{
			return ((LogicalDevice<?>)(object)this).GetRemoteChannelForChannelId<TRemoteChannelDef>(channelId);
		}
	}
	public class LogicalDeviceRelayBasicCommandFactoryLatchingType1 : Object, ILogicalDeviceRelayBasicCommandFactory
	{
		public ILogicalDeviceRelayBasicCommand MakeClearFaultCommand()
		{
			return LogicalDeviceRelayBasicCommandType1.MakeClearFaultCommand();
		}

		public ILogicalDeviceRelayBasicCommand MakeRelayOffCommand()
		{
			return LogicalDeviceRelayBasicCommandType1.MakeLatchTurnOffRelayCommand();
		}

		public ILogicalDeviceRelayBasicCommand MakeRelayOnCommand()
		{
			return LogicalDeviceRelayBasicCommandType1.MakeLatchTurnOnRelayCommand();
		}
	}
	public class LogicalDeviceRelayBasicCommandType1 : LogicalDeviceCommandPacket, ILogicalDeviceRelayBasicCommand, IDeviceCommandPacket, IDeviceDataPacket, IEquatable<LogicalDeviceCommandPacket>
	{
		public const BasicBitMask LatchBit = (BasicBitMask)128;

		public const BasicBitMask ClearingFaultBit = (BasicBitMask)64;

		public const BasicBitMask DisconnectStateBit = (BasicBitMask)2;

		public const BasicBitMask CurrentCommandingStateBit = (BasicBitMask)1;

		public bool ClearingFault => ((LogicalDeviceCommandPacket)this).GetBit((BasicBitMask)64);

		public bool Latching => ((LogicalDeviceCommandPacket)this).GetBit((BasicBitMask)128);

		public bool IsOn => ((LogicalDeviceCommandPacket)this).GetBit((BasicBitMask)1);

		private LogicalDeviceRelayBasicCommandType1(bool state, bool disconnectState)
			: base((byte)0, (byte)0, 200)
		{
			LogicalDeviceCommandPacket.SetBit(ref ((LogicalDeviceCommandPacket)this).Data[0], (BasicBitMask)128, true);
			LogicalDeviceCommandPacket.SetBit(ref ((LogicalDeviceCommandPacket)this).Data[0], (BasicBitMask)64, false);
			LogicalDeviceCommandPacket.SetBit(ref ((LogicalDeviceCommandPacket)this).Data[0], (BasicBitMask)2, disconnectState);
			LogicalDeviceCommandPacket.SetBit(ref ((LogicalDeviceCommandPacket)this).Data[0], (BasicBitMask)1, state);
		}

		public LogicalDeviceRelayBasicCommandType1(bool state)
			: this(state, state)
		{
		}

		public LogicalDeviceRelayBasicCommandType1(byte data)
			: base((byte)0, data, 200)
		{
		}

		public static LogicalDeviceRelayBasicCommandType1 MakeLatchTurnOffRelayCommand()
		{
			return new LogicalDeviceRelayBasicCommandType1(state: false);
		}

		public static LogicalDeviceRelayBasicCommandType1 MakeLatchTurnOnRelayCommand()
		{
			return new LogicalDeviceRelayBasicCommandType1(state: true);
		}

		public static LogicalDeviceRelayBasicCommandType1 MakeClearFaultCommand()
		{
			LogicalDeviceRelayBasicCommandType1 logicalDeviceRelayBasicCommandType = new LogicalDeviceRelayBasicCommandType1(state: false);
			LogicalDeviceCommandPacket.SetBit(ref ((LogicalDeviceCommandPacket)logicalDeviceRelayBasicCommandType).Data[0], (BasicBitMask)128, false);
			LogicalDeviceCommandPacket.SetBit(ref ((LogicalDeviceCommandPacket)logicalDeviceRelayBasicCommandType).Data[0], (BasicBitMask)64, true);
			return logicalDeviceRelayBasicCommandType;
		}
	}
	public class LogicalDeviceRelayBasicLatchingType1 : LogicalDeviceRelayBasicLatching<LogicalDeviceRelayBasicStatusType1, LogicalDeviceRelayBasicCommandFactoryLatchingType1, LogicalDeviceRelayCapabilityType1>
	{
		public LogicalDeviceRelayBasicLatchingType1(ILogicalDeviceId logicalDeviceId, LogicalDeviceRelayCapabilityType1 capability, ILogicalDeviceService service = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, capability, service, isFunctionClassChangeable)
		{
		}
	}
	public class RelayBasicLatchingCommandRunnerType1Sim : LogicalDeviceCommandRunnerIdsCanSim<ILogicalDeviceRelayBasicStatus>
	{
		public RelayBasicLatchingCommandRunnerType1Sim(ILogicalDeviceRelayBasicStatus deviceStatus)
			: base(deviceStatus)
		{
		}

		public override Task<CommandResult> SendCommandAsync(byte commandByte, byte[] data, uint dataSize, int responseTimeMs, CancellationToken cancelToken, Func<ILogicalDevice, CommandControl> cmdControl = null, CommandSendOption options = (CommandSendOption)0)
		{
			if (dataSize != 1 || data.Length < 1)
			{
				return Task.FromResult<CommandResult>((CommandResult)7);
			}
			LogicalDeviceRelayBasicCommandType1 logicalDeviceRelayBasicCommandType = new LogicalDeviceRelayBasicCommandType1(data[0]);
			if (logicalDeviceRelayBasicCommandType.ClearingFault)
			{
				base.SimDeviceStatus.SetFault(isFaulted: false);
				base.SimDeviceStatus.SetState(isOn: false);
			}
			else
			{
				base.SimDeviceStatus.SetState(logicalDeviceRelayBasicCommandType.IsOn);
			}
			return Task.FromResult<CommandResult>((CommandResult)0);
		}
	}
	public class LogicalDeviceRelayBasicLatchingType1Sim : LogicalDeviceRelayBasicLatchingType1, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <<-ctor>b__2_0>d : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceRelayBasicLatchingType1Sim <>4__this;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_00a1: Expected O, but got Unknown
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0070: Unknown result type (might be due to invalid IL or missing references)
				//IL_0077: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				//IL_0054: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayBasicLatchingType1Sim logicalDeviceRelayBasicLatchingType1Sim = <>4__this;
				try
				{
					if (num != 0)
					{
						goto IL_008e;
					}
					TaskAwaiter<bool> val = <>u__1;
					<>u__1 = default(TaskAwaiter<bool>);
					num = (<>1__state = -1);
					goto IL_0086;
					IL_0086:
					val.GetResult();
					goto IL_008e;
					IL_008e:
					if (!logicalDeviceRelayBasicLatchingType1Sim._relaySimTaskCancelSource.IsCancellationRequested)
					{
						((LogicalDevice<LogicalDeviceRelayBasicStatusType1, LogicalDeviceRelayCapabilityType1>)logicalDeviceRelayBasicLatchingType1Sim).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((IDeviceDataPacketMutable)logicalDeviceRelayBasicLatchingType1Sim._relayStatus).Data, 1u);
						val = TaskExtension.TryDelay(250, logicalDeviceRelayBasicLatchingType1Sim._relaySimTaskCancelSource.Token).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<-ctor>b__2_0>d>(ref val, ref this);
							return;
						}
						goto IL_0086;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandAsync>d__3 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceRelayBasicLatchingType1Sim <>4__this;

			public bool turnOnRelay;

			public bool waitForCurrentStatus;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_00e3: Expected O, but got Unknown
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				//IL_008e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00de: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0108: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayBasicLatchingType1Sim logicalDeviceRelayBasicLatchingType1Sim = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					TaskAwaiter val2;
					if (num != 0)
					{
						if (num == 1)
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_00d7;
						}
						val2 = Task.Delay(500).GetAwaiter();
						if (!((TaskAwaiter)(ref val2)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SendCommandAsync>d__3>(ref val2, ref this);
							return;
						}
					}
					else
					{
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val2)).GetResult();
					val = ((LogicalDeviceRelayBasicLatching<LogicalDeviceRelayBasicStatusType1, LogicalDeviceRelayBasicCommandFactoryLatchingType1, LogicalDeviceRelayCapabilityType1>)logicalDeviceRelayBasicLatchingType1Sim).SendCommandAsync(turnOnRelay, waitForCurrentStatus).GetAwaiter();
					if (!val.IsCompleted)
					{
						num = (<>1__state = 1);
						<>u__2 = val;
						<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandAsync>d__3>(ref val, ref this);
						return;
					}
					goto IL_00d7;
					IL_00d7:
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private CancellationTokenSource _relaySimTaskCancelSource = new CancellationTokenSource();

		private ILogicalDeviceRelayBasicStatus _relayStatus = LogicalDeviceRelayBasicLatching<LogicalDeviceRelayBasicStatusType1, LogicalDeviceRelayBasicCommandFactoryLatchingType1, LogicalDeviceRelayCapabilityType1>.MakeNewStatus();

		public LogicalDeviceRelayBasicLatchingType1Sim(LogicalDeviceId logicalDeviceId, ILogicalDeviceService service = null)
			: base((ILogicalDeviceId)(object)logicalDeviceId, new LogicalDeviceRelayCapabilityType1(RelayCapabilityFlagType1.None), service)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_0042: Unknown result type (might be due to invalid IL or missing references)
			//IL_004c: Expected O, but got Unknown
			//IL_005e: Unknown result type (might be due to invalid IL or missing references)
			IdsCanCommandRunnerDefault = (ILogicalDeviceCommandRunnerIdsCan?)(object)new RelayBasicLatchingCommandRunnerType1Sim(_relayStatus);
			BatteryVoltagePidCan = (ILogicalDevicePidFixedPoint)new LogicalDevicePidSimFixedPoint((FixedPointType)1, PID.BATTERY_VOLTAGE, 11.2f);
			Task.Run((Func<Task>)([AsyncStateMachine(/*Could not decode attribute arguments.*/)] [CompilerGenerated] () =>
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<-ctor>b__2_0>d <<-ctor>b__2_0>d = default(<<-ctor>b__2_0>d);
				<<-ctor>b__2_0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<-ctor>b__2_0>d.<>4__this = this;
				<<-ctor>b__2_0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<-ctor>b__2_0>d.<>t__builder)).Start<<<-ctor>b__2_0>d>(ref <<-ctor>b__2_0>d);
				return ((AsyncTaskMethodBuilder)(ref <<-ctor>b__2_0>d.<>t__builder)).Task;
			}), _relaySimTaskCancelSource.Token);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public override Task<CommandResult> SendCommandAsync(bool turnOnRelay, bool waitForCurrentStatus)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandAsync>d__3 <SendCommandAsync>d__ = default(<SendCommandAsync>d__3);
			<SendCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandAsync>d__.<>4__this = this;
			<SendCommandAsync>d__.turnOnRelay = turnOnRelay;
			<SendCommandAsync>d__.waitForCurrentStatus = waitForCurrentStatus;
			<SendCommandAsync>d__.<>1__state = -1;
			<SendCommandAsync>d__.<>t__builder.Start<<SendCommandAsync>d__3>(ref <SendCommandAsync>d__);
			return <SendCommandAsync>d__.<>t__builder.Task;
		}

		public override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
			CancellationTokenSource relaySimTaskCancelSource = _relaySimTaskCancelSource;
			if (relaySimTaskCancelSource != null)
			{
				relaySimTaskCancelSource.Cancel();
			}
			CancellationTokenSource relaySimTaskCancelSource2 = _relaySimTaskCancelSource;
			if (relaySimTaskCancelSource2 != null)
			{
				relaySimTaskCancelSource2.Dispose();
			}
			_relaySimTaskCancelSource = null;
		}
	}
	public class LogicalDeviceRelayBasicStatusType1 : LogicalDeviceStatusPacketMutable, ILogicalDeviceRelayBasicStatus, ILogicalDeviceStatus<ILogicalDeviceRelayBasicStatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		private const int MinimumStatusPacketSize = 1;

		public const BasicBitMask FaultBit = (BasicBitMask)64;

		public const BasicBitMask RelayStateBit = (BasicBitMask)1;

		public bool RelayState => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)1);

		public bool IsOn => RelayState;

		public bool IsOff => !RelayState;

		public bool IsValid => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData;

		public bool IsFaulted => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)64);

		public bool UserClearRequired => IsFaulted;

		public DTC_ID UserMessageDtc => (DTC_ID)0;

		public bool CommandOnAllowed => true;

		public bool IsPositionKnown => Position <= 100;

		public byte Position => 255;

		public bool IsCurrentDrawAmpsKnown => false;

		public float CurrentDrawAmps => 0f;

		public void SetState(bool isOn)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)1, isOn);
		}

		public bool SetFault(bool isFaulted)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)64, isFaulted);
			return true;
		}

		public bool SetUserClearRequired(bool disabled)
		{
			SetFault(disabled);
			return true;
		}

		public bool SetUserMessageDtc(DTC_ID dtc)
		{
			return false;
		}

		public bool SetCommandOnAllowed(bool allowed)
		{
			return false;
		}

		public bool SetPosition(byte position)
		{
			return false;
		}

		public bool SetCurrentDrawAmps(float voltage)
		{
			return false;
		}

		public LogicalDeviceRelayBasicStatusType1()
			: base(1u)
		{
		}

		public ILogicalDeviceRelayBasicStatus CopyStatus()
		{
			LogicalDeviceRelayBasicStatusType1 logicalDeviceRelayBasicStatusType = new LogicalDeviceRelayBasicStatusType1();
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayBasicStatusType).Update(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data.Length, false);
			return logicalDeviceRelayBasicStatusType;
		}

		public ILogicalDeviceRelayBasicStatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceRelayBasicStatusType1Serializable(this);
		}

		public override string ToString()
		{
			//IL_0015: Unknown result type (might be due to invalid IL or missing references)
			//IL_001b: Expected O, but got Unknown
			//IL_0054: Expected O, but got Unknown
			StringBuilder val = new StringBuilder(String.Format("Relay Status: {0}", (object)IsOn));
			try
			{
				if (IsFaulted)
				{
					val.Append(", Faulted");
				}
				val.Append(String.Concat(": ", ArrayExtension.DebugDump(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, " ", false)));
			}
			catch (Exception ex)
			{
				Exception ex2 = ex;
				val.Append(String.Concat(Environment.NewLine, "    ERROR Trying to Get Device ", ex2.Message));
			}
			return ((Object)val).ToString();
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceRelayBasicStatusType1Serializable : LogicalDeviceStatusSerializableBase<LogicalDeviceRelayBasicStatusType1Serializable>, ILogicalDeviceRelayBasicStatusSerializable, ILogicalDeviceStatusSerializable, IJsonSerializerClass
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceRelayBasicStatusType1Serializable);
			}
		}

		[JsonProperty]
		public bool IsFaulted
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool IsOn
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool UserClearRequired
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceRelayBasicStatusType1Serializable(bool isFaulted, bool isOn, bool userClearRequired)
		{
			IsFaulted = isFaulted;
			IsOn = isOn;
			UserClearRequired = userClearRequired;
		}

		public LogicalDeviceRelayBasicStatusType1Serializable(ILogicalDeviceRelayBasicStatus status)
			: this(status.IsFaulted, status.IsOn, status.UserClearRequired)
		{
		}

		public override byte[] MakeRawData()
		{
			LogicalDeviceRelayBasicStatusType1 logicalDeviceRelayBasicStatusType = new LogicalDeviceRelayBasicStatusType1();
			logicalDeviceRelayBasicStatusType.SetState(IsOn);
			logicalDeviceRelayBasicStatusType.SetFault(IsFaulted);
			logicalDeviceRelayBasicStatusType.SetUserClearRequired(UserClearRequired);
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayBasicStatusType).CopyCurrentData();
		}

		public static LogicalDeviceRelayBasicStatusType1Serializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceRelayBasicStatusType1 logicalDeviceRelayBasicStatusType = new LogicalDeviceRelayBasicStatusType1();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayBasicStatusType).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayBasicStatusType).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayBasicStatusType).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayBasicStatusType).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayBasicStatusType).Update(rawData, rawData.Length, false);
			return new LogicalDeviceRelayBasicStatusType1Serializable(logicalDeviceRelayBasicStatusType);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceRelayBasicStatusType1Serializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceRelayBasicStatusType1Serializable>)(object)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("IsFaulted = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsFaulted)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IsOn = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsOn)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", UserClearRequired = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref UserClearRequired)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return ((base.GetHashCode() * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsFaulted)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsOn)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(UserClearRequired);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceRelayBasicStatusType1Serializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceRelayBasicStatusType1Serializable(LogicalDeviceRelayBasicStatusType1Serializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceRelayBasicStatusType1Serializable>)(object)original)
		{
			IsFaulted = original.IsFaulted;
			IsOn = original.IsOn;
			UserClearRequired = original.UserClearRequired;
		}
	}
	public class LogicalDeviceRelayCapabilityType1 : LogicalDeviceCapability, ILogicalDeviceRelayCapability, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		public LogicalDeviceCapabilitySerializable LogicalDeviceCapabilitySoftwareConfigurableFuseSerializable = LogicalDeviceCapabilitySerializable.op_Implicit(String.Format("{0}", (object)RelayCapabilityFlagType1.SupportsSoftwareConfigurableFuse));

		private RelayCapabilityFlagType1 _capabilityFlag => (RelayCapabilityFlagType1)base.RawValue;

		public bool IsSoftwareConfigurableFuseSupported => ((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)RelayCapabilityFlagType1.SupportsSoftwareConfigurableFuse);

		public bool IsCoarsePositionSupported => false;

		public bool AreAutoCommandsSupported => false;

		public bool IsFinePositionSupported => false;

		public bool IsHomingSupported => false;

		public bool IsAwningSensorSupported => false;

		public PhysicalSwitchTypeCapability PhysicalSwitchType => PhysicalSwitchTypeCapability.Unknown;

		public AllLightsGroupBehaviorCapability AllLightsGroupBehavior => AllLightsGroupBehaviorCapability.FeatureNotSupported;

		public override IEnumerable<LogicalDeviceCapabilitySerializable> ActiveCapabilities
		{
			[IteratorStateMachine(/*Could not decode attribute arguments.*/)]
			get
			{
				if (IsSoftwareConfigurableFuseSupported)
				{
					yield return LogicalDeviceCapabilitySoftwareConfigurableFuseSerializable;
				}
			}
		}

		public LogicalDeviceRelayCapabilityType1(Nullable<byte> rawCapability)
			: base(rawCapability)
		{
		}//IL_001c: Unknown result type (might be due to invalid IL or missing references)


		public LogicalDeviceRelayCapabilityType1(RelayCapabilityFlagType1 capabilityFlags)
			: this(new Nullable<byte>((byte)capabilityFlags))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)


		public LogicalDeviceRelayCapabilityType1()
			: this(RelayCapabilityFlagType1.None)
		{
		}

		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsSoftwareConfigurableFuseSupported");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}
	}
	public class LogicalDeviceRelayBasicCommandFactoryLatchingType2 : Object, ILogicalDeviceRelayBasicCommandFactory
	{
		public ILogicalDeviceRelayBasicCommand MakeClearFaultCommand()
		{
			return LogicalDeviceRelayBasicLatchingCommandType2.MakeClearFaultCommand();
		}

		public ILogicalDeviceRelayBasicCommand MakeRelayOffCommand()
		{
			return LogicalDeviceRelayBasicLatchingCommandType2.MakeLatchTurnOffRelayCommand();
		}

		public ILogicalDeviceRelayBasicCommand MakeRelayOnCommand()
		{
			return LogicalDeviceRelayBasicLatchingCommandType2.MakeLatchTurnOnRelayCommand();
		}
	}
	public class LogicalDeviceRelayBasicLatchingCommandType2 : LogicalDeviceCommandPacket, ILogicalDeviceRelayBasicCommand, IDeviceCommandPacket, IDeviceDataPacket, IEquatable<LogicalDeviceCommandPacket>
	{
		public enum EnhancedCommand : Enum
		{
			Off = 0,
			On = 1,
			ClearUserClearRequiredLatch = 3
		}

		public bool ClearingFault => ((LogicalDeviceCommandPacket)this).CommandByte == 3;

		public bool Latching => true;

		public bool IsOn => ((LogicalDeviceCommandPacket)this).CommandByte == 1;

		public LogicalDeviceRelayBasicLatchingCommandType2(EnhancedCommand command)
			: base((byte)command, 200)
		{
		}

		public LogicalDeviceRelayBasicLatchingCommandType2(byte data)
			: base(data, 200)
		{
		}

		public static LogicalDeviceRelayBasicLatchingCommandType2 MakeLatchTurnOffRelayCommand()
		{
			return new LogicalDeviceRelayBasicLatchingCommandType2(EnhancedCommand.Off);
		}

		public static LogicalDeviceRelayBasicLatchingCommandType2 MakeLatchTurnOnRelayCommand()
		{
			return new LogicalDeviceRelayBasicLatchingCommandType2(EnhancedCommand.On);
		}

		public static LogicalDeviceRelayBasicLatchingCommandType2 MakeClearFaultCommand()
		{
			return new LogicalDeviceRelayBasicLatchingCommandType2(EnhancedCommand.ClearUserClearRequiredLatch);
		}

		public override string ToString()
		{
			return String.Format("{0}", (object)(EnhancedCommand)((LogicalDeviceCommandPacket)this).CommandByte);
		}
	}
	public class LogicalDeviceRelayBasicLatchingType2 : LogicalDeviceRelayBasicLatching<LogicalDeviceRelayBasicStatusType2, LogicalDeviceRelayBasicCommandFactoryLatchingType2, LogicalDeviceRelayCapabilityType2>
	{
		private const uint DebugUpdateDeviceStatusChangedThrottleTimeMs = 60000u;

		private readonly Stopwatch _debugUpdateDeviceStatusChangedThrottleTimer = Stopwatch.StartNew();

		private uint _debugUpdateDeviceStatusChangedThrottleCount;

		public LogicalDeviceRelayBasicLatchingType2(ILogicalDeviceId logicalDeviceId, LogicalDeviceRelayCapabilityType2 capability, ILogicalDeviceService service = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, capability, service, isFunctionClassChangeable)
		{
		}

		protected override void DebugUpdateDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, uint dataLength, string optionalText = "")
		{
			if (LogicalDeviceRelayStatusType2<RelayBasicOutputState>.IsSignificantlyDifferent(oldStatusData, statusData))
			{
				base.DebugUpdateDeviceStatusChanged(oldStatusData, statusData, dataLength, optionalText);
				_debugUpdateDeviceStatusChangedThrottleTimer.Restart();
				_debugUpdateDeviceStatusChangedThrottleCount = 1u;
			}
			else if (_debugUpdateDeviceStatusChangedThrottleCount != 0 && _debugUpdateDeviceStatusChangedThrottleTimer.ElapsedMilliseconds < 60000)
			{
				_debugUpdateDeviceStatusChangedThrottleCount++;
			}
			else
			{
				base.DebugUpdateDeviceStatusChanged(oldStatusData, statusData, dataLength, String.Format(" found {0} changes over {1}ms", (object)_debugUpdateDeviceStatusChangedThrottleCount, (object)(UInt32)60000));
				_debugUpdateDeviceStatusChangedThrottleTimer.Restart();
				_debugUpdateDeviceStatusChangedThrottleCount = 1u;
			}
		}
	}
	public class RelayBasicLatchingCommandRunnerType2Sim : LogicalDeviceCommandRunnerIdsCanSim<ILogicalDeviceRelayBasicStatus>
	{
		public RelayBasicLatchingCommandRunnerType2Sim(ILogicalDeviceRelayBasicStatus deviceStatus)
			: base(deviceStatus)
		{
		}

		public override Task<CommandResult> SendCommandAsync(byte commandByte, byte[] data, uint dataSize, int responseTimeMs, CancellationToken cancelToken, Func<ILogicalDevice, CommandControl> cmdControl = null, CommandSendOption options = (CommandSendOption)0)
		{
			if (dataSize != 0)
			{
				return Task.FromResult<CommandResult>((CommandResult)7);
			}
			LogicalDeviceRelayBasicLatchingCommandType2 logicalDeviceRelayBasicLatchingCommandType = new LogicalDeviceRelayBasicLatchingCommandType2(commandByte);
			if (logicalDeviceRelayBasicLatchingCommandType.ClearingFault)
			{
				base.SimDeviceStatus.SetFault(isFaulted: false);
				base.SimDeviceStatus.SetUserClearRequired(disabled: false);
				base.SimDeviceStatus.SetState(isOn: false);
			}
			else
			{
				base.SimDeviceStatus.SetState(logicalDeviceRelayBasicLatchingCommandType.IsOn);
			}
			return Task.FromResult<CommandResult>((CommandResult)0);
		}
	}
	public class LogicalDeviceRelayBasicLatchingType2Sim : LogicalDeviceRelayBasicLatchingType2, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass3_0 : Object
		{
			[StructLayout((LayoutKind)3)]
			private struct <<-ctor>b__0>d : ValueType, IAsyncStateMachine
			{
				public int <>1__state;

				public AsyncTaskMethodBuilder <>t__builder;

				public <>c__DisplayClass3_0 <>4__this;

				private TaskAwaiter<bool> <>u__1;

				private void MoveNext()
				{
					//IL_00ba: Expected O, but got Unknown
					//IL_0084: Unknown result type (might be due to invalid IL or missing references)
					//IL_0089: Unknown result type (might be due to invalid IL or missing references)
					//IL_0090: Unknown result type (might be due to invalid IL or missing references)
					//IL_004a: Unknown result type (might be due to invalid IL or missing references)
					//IL_0054: Unknown result type (might be due to invalid IL or missing references)
					//IL_0059: Unknown result type (might be due to invalid IL or missing references)
					//IL_006d: Unknown result type (might be due to invalid IL or missing references)
					//IL_006e: Unknown result type (might be due to invalid IL or missing references)
					int num = <>1__state;
					<>c__DisplayClass3_0 <>c__DisplayClass3_ = <>4__this;
					try
					{
						if (num != 0)
						{
							goto IL_00a7;
						}
						TaskAwaiter<bool> val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_009f;
						IL_009f:
						val.GetResult();
						goto IL_00a7;
						IL_00a7:
						if (!((CancellationToken)(ref <>c__DisplayClass3_.token)).IsCancellationRequested)
						{
							((LogicalDevice<LogicalDeviceRelayBasicStatusType2, LogicalDeviceRelayCapabilityType2>)<>c__DisplayClass3_.<>4__this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((IDeviceDataPacketMutable)<>c__DisplayClass3_.<>4__this._relayStatus).Data, (uint)((IDeviceDataPacketMutable)<>c__DisplayClass3_.<>4__this._relayStatus).Data.Length);
							val = TaskExtension.TryDelay(250, <>c__DisplayClass3_.token).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<-ctor>b__0>d>(ref val, ref this);
								return;
							}
							goto IL_009f;
						}
					}
					catch (Exception ex)
					{
						Exception exception = ex;
						<>1__state = -2;
						((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
						return;
					}
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
				}

				[DebuggerHidden]
				private void SetStateMachine(IAsyncStateMachine stateMachine)
				{
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
				}
			}

			public LogicalDeviceRelayBasicLatchingType2Sim <>4__this;

			public CancellationToken token;

			[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
			internal Task <.ctor>b__0()
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<-ctor>b__0>d <<-ctor>b__0>d = default(<<-ctor>b__0>d);
				<<-ctor>b__0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<-ctor>b__0>d.<>4__this = this;
				<<-ctor>b__0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<-ctor>b__0>d.<>t__builder)).Start<<<-ctor>b__0>d>(ref <<-ctor>b__0>d);
				return ((AsyncTaskMethodBuilder)(ref <<-ctor>b__0>d.<>t__builder)).Task;
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandAsync>d__4 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceRelayBasicLatchingType2Sim <>4__this;

			public bool turnOnRelay;

			public bool waitForCurrentStatus;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_00e3: Expected O, but got Unknown
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				//IL_008e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00de: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0108: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayBasicLatchingType2Sim logicalDeviceRelayBasicLatchingType2Sim = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					TaskAwaiter val2;
					if (num != 0)
					{
						if (num == 1)
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_00d7;
						}
						val2 = Task.Delay(500).GetAwaiter();
						if (!((TaskAwaiter)(ref val2)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SendCommandAsync>d__4>(ref val2, ref this);
							return;
						}
					}
					else
					{
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val2)).GetResult();
					val = ((LogicalDeviceRelayBasicLatching<LogicalDeviceRelayBasicStatusType2, LogicalDeviceRelayBasicCommandFactoryLatchingType2, LogicalDeviceRelayCapabilityType2>)logicalDeviceRelayBasicLatchingType2Sim).SendCommandAsync(turnOnRelay, waitForCurrentStatus).GetAwaiter();
					if (!val.IsCompleted)
					{
						num = (<>1__state = 1);
						<>u__2 = val;
						<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandAsync>d__4>(ref val, ref this);
						return;
					}
					goto IL_00d7;
					IL_00d7:
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceRelayBasicLatchingType2Sim";

		private CancellationTokenSource _relaySimTaskCancelSource = new CancellationTokenSource();

		private ILogicalDeviceRelayBasicStatus _relayStatus = LogicalDeviceRelayBasicLatching<LogicalDeviceRelayBasicStatusType2, LogicalDeviceRelayBasicCommandFactoryLatchingType2, LogicalDeviceRelayCapabilityType2>.MakeNewStatus();

		public LogicalDeviceRelayBasicLatchingType2Sim(LogicalDeviceId logicalDeviceId, ILogicalDeviceService service = null)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_004f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0059: Expected O, but got Unknown
			//IL_0060: Unknown result type (might be due to invalid IL or missing references)
			//IL_0065: Unknown result type (might be due to invalid IL or missing references)
			//IL_0077: Unknown result type (might be due to invalid IL or missing references)
			<>c__DisplayClass3_0 CS$<>8__locals4 = new <>c__DisplayClass3_0();
			base..ctor((ILogicalDeviceId)(object)logicalDeviceId, new LogicalDeviceRelayCapabilityType2(RelayCapabilityFlagType2.None), service);
			CS$<>8__locals4.<>4__this = this;
			IdsCanCommandRunnerDefault = (ILogicalDeviceCommandRunnerIdsCan?)(object)new RelayBasicLatchingCommandRunnerType2Sim(_relayStatus);
			BatteryVoltagePidCan = (ILogicalDevicePidFixedPoint)new LogicalDevicePidSimFixedPoint((FixedPointType)1, PID.BATTERY_VOLTAGE, 11.2f);
			CS$<>8__locals4.token = _relaySimTaskCancelSource.Token;
			Task.Run((Func<Task>)([AsyncStateMachine(/*Could not decode attribute arguments.*/)] () =>
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<>c__DisplayClass3_0.<<-ctor>b__0>d <<-ctor>b__0>d = default(<>c__DisplayClass3_0.<<-ctor>b__0>d);
				<<-ctor>b__0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<-ctor>b__0>d.<>4__this = CS$<>8__locals4;
				<<-ctor>b__0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<-ctor>b__0>d.<>t__builder)).Start<<>c__DisplayClass3_0.<<-ctor>b__0>d>(ref <<-ctor>b__0>d);
				return ((AsyncTaskMethodBuilder)(ref <<-ctor>b__0>d.<>t__builder)).Task;
			}), CS$<>8__locals4.token);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public override Task<CommandResult> SendCommandAsync(bool turnOnRelay, bool waitForCurrentStatus)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandAsync>d__4 <SendCommandAsync>d__ = default(<SendCommandAsync>d__4);
			<SendCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandAsync>d__.<>4__this = this;
			<SendCommandAsync>d__.turnOnRelay = turnOnRelay;
			<SendCommandAsync>d__.waitForCurrentStatus = waitForCurrentStatus;
			<SendCommandAsync>d__.<>1__state = -1;
			<SendCommandAsync>d__.<>t__builder.Start<<SendCommandAsync>d__4>(ref <SendCommandAsync>d__);
			return <SendCommandAsync>d__.<>t__builder.Task;
		}

		public override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
			CancellationTokenSource relaySimTaskCancelSource = _relaySimTaskCancelSource;
			if (relaySimTaskCancelSource != null)
			{
				relaySimTaskCancelSource.Cancel();
			}
			CancellationTokenSource relaySimTaskCancelSource2 = _relaySimTaskCancelSource;
			if (relaySimTaskCancelSource2 != null)
			{
				relaySimTaskCancelSource2.Dispose();
			}
			_relaySimTaskCancelSource = null;
		}

		public void SimSetUserClearRequired(bool clearRequired)
		{
			_relayStatus.SetUserClearRequired(clearRequired);
		}

		public void SimSetUserMessageDtc(DTC_ID dtc)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			_relayStatus.SetUserMessageDtc(dtc);
		}
	}
	public enum RelayBasicOutputState : Enum
	{
		Off = 0,
		On = 1,
		Unknown = -1
	}
	public class LogicalDeviceRelayBasicStatusType2 : LogicalDeviceRelayStatusType2<RelayBasicOutputState>, ILogicalDeviceRelayBasicStatus, ILogicalDeviceStatus<ILogicalDeviceRelayBasicStatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		public const BasicBitMask OnCommandAllowedBitmask = (BasicBitMask)128;

		public override RelayBasicOutputState State
		{
			get
			{
				RelayBasicOutputState rawOutputState = (RelayBasicOutputState)base.RawOutputState;
				if ((uint)rawOutputState <= 1u)
				{
					return rawOutputState;
				}
				return RelayBasicOutputState.Unknown;
			}
		}

		public bool RelayState => State == RelayBasicOutputState.On;

		public bool IsOn => RelayState;

		public bool IsOff => !RelayState;

		public bool CommandOnAllowed
		{
			get
			{
				if (base.IsValid)
				{
					return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)128, 0);
				}
				return false;
			}
		}

		public void SetState(bool isOn)
		{
			SetState(isOn ? RelayBasicOutputState.On : RelayBasicOutputState.Off);
		}

		public bool SetCommandOnAllowed(bool allowed)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)128, allowed, 0);
			return true;
		}

		public LogicalDeviceRelayBasicStatusType2()
			: base(6u)
		{
		}

		public ILogicalDeviceRelayBasicStatus CopyStatus()
		{
			LogicalDeviceRelayBasicStatusType2 logicalDeviceRelayBasicStatusType = new LogicalDeviceRelayBasicStatusType2();
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayBasicStatusType).Update(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data.Length, false);
			return logicalDeviceRelayBasicStatusType;
		}

		public ILogicalDeviceRelayBasicStatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceRelayBasicStatusType2Serializable(this);
		}
	}
	public record LogicalDeviceRelayBasicStatusType2Serializable : LogicalDeviceStatusSerializableBase<LogicalDeviceRelayBasicStatusType2Serializable>, ILogicalDeviceRelayBasicStatusSerializable, ILogicalDeviceStatusSerializable, IJsonSerializerClass
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceRelayBasicStatusType2Serializable);
			}
		}

		[JsonProperty]
		public bool IsFaulted
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool IsOn
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool UserClearRequired
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public DTC_ID UserMessageDtc
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool CommandOnAllowed
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte Position
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public float CurrentDrawAmps
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceRelayBasicStatusType2Serializable(bool isFaulted, bool isOn, bool userClearRequired, DTC_ID userMessageDtc, bool commandOnAllowed, byte position, float currentDrawAmps)
		{
			//IL_001c: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			IsFaulted = isFaulted;
			IsOn = isOn;
			UserClearRequired = userClearRequired;
			UserMessageDtc = userMessageDtc;
			CommandOnAllowed = commandOnAllowed;
			Position = position;
			CurrentDrawAmps = currentDrawAmps;
		}

		public LogicalDeviceRelayBasicStatusType2Serializable(ILogicalDeviceRelayBasicStatus status)
			: this(status.IsFaulted, status.IsOn, status.UserClearRequired, status.UserMessageDtc, status.CommandOnAllowed, status.Position, status.CurrentDrawAmps)
		{
		}//IL_0014: Unknown result type (might be due to invalid IL or missing references)


		public override byte[] MakeRawData()
		{
			LogicalDeviceRelayBasicStatusType2 logicalDeviceRelayBasicStatusType = new LogicalDeviceRelayBasicStatusType2();
			logicalDeviceRelayBasicStatusType.SetState(IsOn);
			logicalDeviceRelayBasicStatusType.SetFault(IsFaulted);
			logicalDeviceRelayBasicStatusType.SetUserClearRequired(UserClearRequired);
			logicalDeviceRelayBasicStatusType.SetCommandOnAllowed(CommandOnAllowed);
			logicalDeviceRelayBasicStatusType.SetPosition(Position);
			logicalDeviceRelayBasicStatusType.SetCurrentDrawAmps(CurrentDrawAmps);
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayBasicStatusType).CopyCurrentData();
		}

		public static LogicalDeviceRelayBasicStatusType2Serializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceRelayBasicStatusType2 logicalDeviceRelayBasicStatusType = new LogicalDeviceRelayBasicStatusType2();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayBasicStatusType).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayBasicStatusType).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayBasicStatusType).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayBasicStatusType).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayBasicStatusType).Update(rawData, rawData.Length, false);
			return new LogicalDeviceRelayBasicStatusType2Serializable(logicalDeviceRelayBasicStatusType);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceRelayBasicStatusType2Serializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceRelayBasicStatusType2Serializable>)(object)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			//IL_0098: Unknown result type (might be due to invalid IL or missing references)
			//IL_009d: Unknown result type (might be due to invalid IL or missing references)
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("IsFaulted = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsFaulted)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IsOn = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsOn)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", UserClearRequired = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref UserClearRequired)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", UserMessageDtc = ");
			builder.Append(((Object)UserMessageDtc/*cast due to .constrained prefix*/).ToString());
			builder.Append(", CommandOnAllowed = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref CommandOnAllowed)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Position = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref Position)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", CurrentDrawAmps = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref CurrentDrawAmps)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			//IL_0057: Unknown result type (might be due to invalid IL or missing references)
			return ((((((base.GetHashCode() * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsFaulted)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsOn)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(UserClearRequired)) * -1521134295 + EqualityComparer<DTC_ID>.Default.GetHashCode(UserMessageDtc)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(CommandOnAllowed)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(Position)) * -1521134295 + EqualityComparer<float>.Default.GetHashCode(CurrentDrawAmps);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceRelayBasicStatusType2Serializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceRelayBasicStatusType2Serializable(LogicalDeviceRelayBasicStatusType2Serializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceRelayBasicStatusType2Serializable>)(object)original)
		{
			//IL_002d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0032: Unknown result type (might be due to invalid IL or missing references)
			IsFaulted = original.IsFaulted;
			IsOn = original.IsOn;
			UserClearRequired = original.UserClearRequired;
			UserMessageDtc = original.UserMessageDtc;
			CommandOnAllowed = original.CommandOnAllowed;
			Position = original.Position;
			CurrentDrawAmps = original.CurrentDrawAmps;
		}
	}
	public class LogicalDeviceRelayCapabilityType2 : LogicalDeviceCapability, ILogicalDeviceRelayCapability, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		public const int PhysicalSwitchBitShift = 3;

		public const int AllLightsGroupBehaviorBitShift = 5;

		public LogicalDeviceCapabilitySerializable LogicalDeviceCapabilitySoftwareConfigurableFuseSerializable = LogicalDeviceCapabilitySerializable.op_Implicit(String.Format("{0}", (object)RelayCapabilityFlagType2.SupportsSoftwareConfigurableFuse));

		public LogicalDeviceCapabilitySerializable LogicalDeviceCapabilityCoarsePositionSerializable = LogicalDeviceCapabilitySerializable.op_Implicit(String.Format("{0}", (object)RelayCapabilityFlagType2.SupportsCoarsePosition));

		public LogicalDeviceCapabilitySerializable LogicalDeviceCapabilityFinePositionSerializable = LogicalDeviceCapabilitySerializable.op_Implicit(String.Format("{0}", (object)RelayCapabilityFlagType2.SupportsFinePosition));

		protected RelayCapabilityFlagType2 CapabilityFlag => (RelayCapabilityFlagType2)base.RawValue;

		public bool IsSoftwareConfigurableFuseSupported => ((Enum)(object)CapabilityFlag).HasFlag((Enum)(object)RelayCapabilityFlagType2.SupportsSoftwareConfigurableFuse);

		public bool IsCoarsePositionSupported => ((Enum)(object)CapabilityFlag).HasFlag((Enum)(object)RelayCapabilityFlagType2.SupportsCoarsePosition);

		public bool AreAutoCommandsSupported => false;

		public bool IsFinePositionSupported => ((Enum)(object)CapabilityFlag).HasFlag((Enum)(object)RelayCapabilityFlagType2.SupportsFinePosition);

		public bool IsHomingSupported => false;

		public bool IsAwningSensorSupported => false;

		public PhysicalSwitchTypeCapability PhysicalSwitchType => (PhysicalSwitchTypeCapability)((base.RawValue & 0x18) >> 3);

		public AllLightsGroupBehaviorCapability AllLightsGroupBehavior => (AllLightsGroupBehaviorCapability)((base.RawValue & 0x60) >> 5);

		public override IEnumerable<LogicalDeviceCapabilitySerializable> ActiveCapabilities
		{
			[IteratorStateMachine(/*Could not decode attribute arguments.*/)]
			get
			{
				if (IsSoftwareConfigurableFuseSupported)
				{
					yield return LogicalDeviceCapabilitySoftwareConfigurableFuseSerializable;
				}
				if (IsCoarsePositionSupported)
				{
					yield return LogicalDeviceCapabilityCoarsePositionSerializable;
				}
				if (IsFinePositionSupported)
				{
					yield return LogicalDeviceCapabilityFinePositionSerializable;
				}
				yield return PhysicalSwitchType.ToCapabilitySerializable();
				yield return AllLightsGroupBehavior.ToCapabilitySerializable();
			}
		}

		public LogicalDeviceRelayCapabilityType2(Nullable<byte> rawCapability)
			: base(rawCapability)
		{
		}//IL_0052: Unknown result type (might be due to invalid IL or missing references)


		public LogicalDeviceRelayCapabilityType2(RelayCapabilityFlagType2 capabilityFlags)
			: this(new Nullable<byte>((byte)capabilityFlags))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)


		public LogicalDeviceRelayCapabilityType2()
			: this(RelayCapabilityFlagType2.None)
		{
		}

		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsSoftwareConfigurableFuseSupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsCoarsePositionSupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsFinePositionSupported");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}
	}
	public abstract class LogicalDeviceRelayStatusType2<TOutputState> : LogicalDeviceStatusPacketMutable where TOutputState : struct, IConvertible, ValueType
	{
		private const int MinimumStatusPacketSize = 6;

		public const ushort CurrentDrawAmpsNotSupportedValue = 65535;

		public const int StatusByteIndex = 0;

		public const int PositionStartingIndex = 1;

		public const int CurrentDrawAmpsStartingIndex = 2;

		public const int DtcStartingIndex = 4;

		public const byte OutputStateBitMask = 15;

		public const BasicBitMask UserClearRequiredLatchBitMask = (BasicBitMask)32;

		protected byte RawOutputState => (byte)(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0] & 0xF);

		public abstract TOutputState State { get; }

		public bool IsValid => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData;

		public bool IsFaulted
		{
			get
			{
				//IL_0009: Unknown result type (might be due to invalid IL or missing references)
				//IL_000f: Invalid comparison between Unknown and I4
				if (UserClearRequired)
				{
					return (int)UserMessageDtc > 0;
				}
				return false;
			}
		}

		public bool UserClearRequired => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)32, 0);

		public DTC_ID UserMessageDtc => (DTC_ID)(ushort)((((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data != null && ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data.Length >= 6) ? ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetUInt16(4u) : 0);

		public bool IsPositionKnown
		{
			get
			{
				if (IsValid)
				{
					return Position <= 100;
				}
				return false;
			}
		}

		public byte Position => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[1];

		public bool IsCurrentDrawAmpsKnown
		{
			get
			{
				if (IsValid)
				{
					return FixedPointUnsignedBigEndian8X8.ToFixedPoint(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 2u) != 65535;
				}
				return false;
			}
		}

		public float CurrentDrawAmps => FixedPointUnsignedBigEndian8X8.ToFloat(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 2u);

		public void SetState(TOutputState state)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)15, Convert.ToByte((object)state), 0);
		}

		public bool SetFault(bool isFaulted)
		{
			return false;
		}

		public bool SetUserClearRequired(bool disabled)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)32, disabled, 0);
			return true;
		}

		public bool SetUserMessageDtc(DTC_ID dtc)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0008: Expected I4, but got Unknown
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt16((ushort)(int)dtc, 4);
			return true;
		}

		public bool SetPosition(byte position)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[1] = position;
			return true;
		}

		public bool SetCurrentDrawAmps(float voltage)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetFixedPoint((FixedPointType)0, voltage, 2u);
			return true;
		}

		protected LogicalDeviceRelayStatusType2(uint minSize = 6u)
			: base(minSize)
		{
		}

		public static bool IsSignificantlyDifferent(IReadOnlyList<byte> statusData1, IReadOnlyList<byte> statusData2)
		{
			try
			{
				if (statusData1[0] != statusData2[0] || statusData1[1] != statusData2[1] || statusData1[4] != statusData2[4] || statusData1[4] != statusData2[4])
				{
					return true;
				}
			}
			catch (Object)
			{
				return true;
			}
			return false;
		}

		public override string ToString()
		{
			//IL_0015: Unknown result type (might be due to invalid IL or missing references)
			//IL_001b: Expected O, but got Unknown
			//IL_001c: Unknown result type (might be due to invalid IL or missing references)
			//IL_002a: Unknown result type (might be due to invalid IL or missing references)
			StringBuilder val = new StringBuilder(String.Format("Relay Status: {0}", (object)State));
			if ((int)UserMessageDtc != 0)
			{
				val.Append(String.Format(", UserMessageDTC: {0}", (object)UserMessageDtc));
			}
			if (UserClearRequired)
			{
				val.Append(IsFaulted ? ", UserClearRequired & Faulted" : ", UserClearRequired");
			}
			if (IsPositionKnown)
			{
				val.Append(String.Format(", Position: {0}%", (object)Position));
			}
			if (IsCurrentDrawAmpsKnown)
			{
				val.Append(String.Format(", CurrentDraw {0:F2}A", (object)CurrentDrawAmps));
			}
			val.Append(String.Concat(": ", ArrayExtension.DebugDump(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, " ", false)));
			return ((Object)val).ToString();
		}
	}
	public interface ILogicalDeviceRelayHBridgeCommand : IDeviceCommandPacket, IDeviceDataPacket, IEquatable<LogicalDeviceCommandPacket>
	{
		bool ClearingFault { get; }

		bool Latching { get; }

		bool TurningOnRelay1 { get; }

		bool TurningOnRelay2 { get; }

		bool IsForwardCommand { get; }

		bool IsReverseCommand { get; }

		bool IsHomeResetCommand { get; }

		bool IsAutoForwardCommand { get; }

		bool IsAutoReverseCommand { get; }

		RelayHBridgeDirection Direction { get; }

		HBridgeCommand Command { get; }

		bool IsStopCommand { get; }
	}
	public interface ILogicalDeviceRelayHBridgeHomeResetCommand : ILogicalDeviceRelayHBridgeCommand, IDeviceCommandPacket, IDeviceDataPacket, IEquatable<LogicalDeviceCommandPacket>
	{
		new bool IsHomeResetCommand { get; }
	}
	public interface ILogicalDeviceRelayHBridgeCommandFactory
	{
		ILogicalDeviceRelayHBridgeCommand MakeRelayCommand(LogicalDeviceRelayHBridgeDirection relayDirection);

		ILogicalDeviceRelayHBridgeCommand MakeRelayStopCommand();

		ILogicalDeviceRelayHBridgeCommand MakeClearFaultCommand();

		ILogicalDeviceRelayHBridgeCommand MakeHomeResetCommand();

		ILogicalDeviceRelayHBridgeCommand MakeAutoForwardCommand();

		ILogicalDeviceRelayHBridgeCommand MakeAutoReverseCommand();
	}
	public interface ILogicalDeviceRelayHBridgeStatus : IDeviceDataPacketMutable, IDeviceDataPacket
	{
		bool IsFaulted { get; }

		bool IsStopped { get; }

		bool IsValid { get; }

		bool IsHoming { get; }

		bool UserClearRequired { get; }

		DTC_ID UserMessageDtc { get; }

		AwningWindStrength WindProtectionLevel { get; }

		bool CommandForwardNotHazardous { get; }

		bool CommandReverseNotHazardous { get; }

		bool IsPositionKnown { get; }

		byte Position { get; }

		bool IsCurrentDrawAmpsKnown { get; }

		float CurrentDrawAmps { get; }

		bool Relay1State(ILogicalDeviceId logicalId);

		bool Relay2State(ILogicalDeviceId logicalId);

		RelayHBridgeDirection GetHBridgeDirection(ILogicalDeviceId logicalId);

		bool CommandForwardAllowed(ILogicalDeviceWithStatus<ILogicalDeviceRelayHBridgeStatus> logicalDevice);

		bool CommandReverseAllowed(ILogicalDeviceWithStatus<ILogicalDeviceRelayHBridgeStatus> logicalDevice);

		void SetState(bool relay1State, bool relay2State, ILogicalDeviceId logicalId);

		bool SetFault(bool isFaulted);

		bool SetUserClearRequired(bool disabled);

		bool SetUserMessageDtc(DTC_ID dtc);

		bool SetCommandForwardNotHazardous(bool notHazardous);

		bool SetCommandReverseNotHazardous(bool notHazardous);

		bool SetPosition(byte position);

		bool SetCurrentDrawAmps(float voltage);

		ILogicalDeviceRelayHBridgeStatus CopyStatus();
	}
	public interface IRelayHBridge : IDevicesCommon, INotifyPropertyChanged, IRelayAutoOperations
	{
		DeviceCategory DeviceCategory { get; }

		bool FaultStatus { get; }

		bool UserClearRequired { get; }

		bool IsHoming { get; }

		DTC_ID UserMessageDtc { get; }

		RelayHBridgeEnergized RelayEnergized { get; }

		RelayHBridgeEnergized CommandRelayEnergized { get; }

		RelayHBridgeDirectionVerbose DirectionVerbose { get; }

		RelayHBridgeDirectionVerbose CommandDirectionVerbose { get; }

		bool Relay1Allowed { get; }

		bool Relay2Allowed { get; }

		bool IsHomingSupported { get; }

		bool IsAwningSensorSupported { get; }

		Task PerformMovementOperationAsync(RelayHBridgeDirection direction, Action<RelayMovementStatus> updateRelayMovementStatus, CancellationToken cancellationToken);

		Task PerformHomeResetOperationAsync(Action<RelayOperationStatus> updateRelayHomeStatus, CancellationToken cancellationToken);

		bool IsForwardRelayEnergized();

		bool IsReverseRelayEnergized();

		bool IsForwardRelayAllowed();

		bool IsReverseRelayAllowed();
	}
	public interface IRelayAutoOperations
	{
		bool AreAutoCommandsSupported { get; }

		bool IsAutoOperationInProgress { get; }

		bool IsWindSensorAutoOperationInProgress { get; }

		bool IsAutoOperation { get; }

		bool AutoForwardAllowed { get; }

		bool AutoReverseAllowed { get; }

		Task<CommandResult> TryAutoReverseAsync(CancellationToken cancellationToken);

		Task<CommandResult> TryAutoForwardAsync(CancellationToken cancellationToken);

		void TryAbortAutoOperation();
	}
	public interface ILogicalDeviceRelayHBridge : IRelayHBridge, IDevicesCommon, INotifyPropertyChanged, IRelayAutoOperations, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement
	{
	}
	public interface ILogicalDeviceRelayHBridge<TRelayHBridgeStatus> : ILogicalDeviceRelayHBridge, IRelayHBridge, IDevicesCommon, INotifyPropertyChanged, IRelayAutoOperations, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceWithStatus<TRelayHBridgeStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<TRelayHBridgeStatus> where TRelayHBridgeStatus : ILogicalDeviceRelayHBridgeStatus, new()
	{
	}
	public interface ILogicalDeviceRelayHBridgeDirect<TRelayHBridgeStatus> : ILogicalDeviceRelayHBridge<TRelayHBridgeStatus>, ILogicalDeviceRelayHBridge, IRelayHBridge, IDevicesCommon, INotifyPropertyChanged, IRelayAutoOperations, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceWithStatus<TRelayHBridgeStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<TRelayHBridgeStatus>, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink where TRelayHBridgeStatus : ILogicalDeviceRelayHBridgeStatus, new()
	{
	}
	public interface ILogicalDeviceRelayHBridgeWithAssociatedLight : ILogicalDeviceRelayHBridge, IRelayHBridge, IDevicesCommon, INotifyPropertyChanged, IRelayAutoOperations, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement
	{
		ILogicalDeviceLight GetCircuitIdAssociatedLight();

		DeviceAssociation GetCircuitIdAssociatedLightAssociation(ILogicalDeviceLight light);

		ILogicalDeviceLight? GetAppAssociatedLight();

		bool TrySaveAppAssociatedLight(ILogicalDeviceLight deviceLight);
	}
	[Flags]
	public enum LogicalDeviceRelayHBridgeCircuitIdRole : Enum
	{
		None = 0,
		AwningSensor = 1
	}
	public enum RelayMovementStatus : Enum
	{
		AbleToMove,
		UnableToMoveNoSession,
		UnableToMoveNoConnection,
		UnableToMoveNoExclusiveOperation,
		UnableToMoveFaulted
	}
	public enum RelayOperationStatus : Enum
	{
		PerformingOperation,
		UnableToPerformOperationNoSession,
		UnableToPerformOperationNoConnection,
		UnableToPerformOperationNoExclusiveOperation,
		UnableToPerformOperationNotSupported
	}
	public interface ILogicalDeviceRelayHBridgeWithAssociatedDevice : ILogicalDeviceRelayHBridge, IRelayHBridge, IDevicesCommon, INotifyPropertyChanged, IRelayAutoOperations, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement
	{
		Task<LogicalDeviceRelayHBridgeCircuitIdRole> TryGetAssociatedCircuitIdRoleAsync(CancellationToken cancellationToken);

		Task<bool> TrySetAssociatedCircuitIdRoleAsync(LogicalDeviceRelayHBridgeCircuitIdRole circuitRole, CancellationToken cancellationToken);
	}
	public interface ILogicalDeviceRelayHBridgeWithAssociatedAwningSensor : ILogicalDeviceRelayHBridgeWithAssociatedDevice, ILogicalDeviceRelayHBridge, IRelayHBridge, IDevicesCommon, INotifyPropertyChanged, IRelayAutoOperations, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement
	{
		ILogicalDeviceAwningSensor GetAssociatedAwningSensor();

		DeviceAssociation GetAwningSensorAssociation(ILogicalDeviceAwningSensor awningSensor);

		AwningProtectionState GetAwningAutoRetractProtectionState();

		AwningWindStrength GetAwningWindProtectionLevel();

		Task<AwningWindStrength> TryGetAwningWindProtectionLevelAsync(CancellationToken cancellationToken);

		Task SetAwningAutoRetractWindProtectionLevelAsync(AwningWindStrength windSetting, CancellationToken cancellationToken);
	}
	public interface IDirectCommandMovement : ILogicalDeviceSourceDirect, ILogicalDeviceSource
	{
		Task<CommandResult> SendDirectCommandRelayMomentary(ILogicalDeviceRelayHBridge logicalDevice, HBridgeCommand command, CancellationToken cancelToken);
	}
	public interface ILogicalDeviceSourceCommandMonitorMovement : ILogicalDeviceSourceCommandMonitor
	{
		Task WillSendCommandRelayMomentaryAsync(ILogicalDeviceSource deviceSource, ILogicalDeviceRelayHBridge logicalDevice, HBridgeCommand command, CancellationToken cancelToken);

		Task DidSendCommandRelayMomentaryAsync(ILogicalDeviceSource deviceSource, ILogicalDeviceRelayHBridge logicalDevice, HBridgeCommand command, CommandResult commandResult, CancellationToken cancelToken);
	}
	public struct LogicalDeviceRelayHBridgeDirection : ValueType
	{
		[field: CompilerGenerated]
		public RelayHBridgeDirection RelayDirection
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			private set;
		}

		[field: CompilerGenerated]
		public RelayHBridgeEnergized RelayEnergized
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			private set;
		}

		[field: CompilerGenerated]
		public RelayHBridgeDirectionVerbose VerboseDirection
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			private set;
		}

		[field: CompilerGenerated]
		public ILogicalDeviceId LogicalId
		{
			[CompilerGenerated]
			get;
		}

		public LogicalDeviceRelayHBridgeDirection(RelayHBridgeEnergized relayEnergized, ILogicalDeviceId logicalId)
		{
			LogicalId = logicalId;
			RelayDirection = relayEnergized.ConvertToDirection(logicalId);
			RelayEnergized = relayEnergized;
			VerboseDirection = relayEnergized.ConvertToVerboseDirection(logicalId);
		}

		public LogicalDeviceRelayHBridgeDirection(RelayHBridgeDirection relayDirection, ILogicalDeviceId logicalId)
		{
			LogicalId = logicalId;
			RelayDirection = relayDirection;
			RelayEnergized = relayDirection.ConvertToRelayEnergized(logicalId);
			VerboseDirection = RelayEnergized.ConvertToVerboseDirection(logicalId);
		}

		public override string ToString()
		{
			return String.Format("{0}", (object)RelayEnergized);
		}
	}
	public static class LogicalDeviceRelayHBridgeExtension : Object
	{
		public static bool Allowed(this ILogicalDeviceRelayHBridgeCommand command, ILogicalDeviceWithStatus<ILogicalDeviceRelayHBridgeStatus> logicalDevice)
		{
			if (command.IsStopCommand)
			{
				return RelayHBridgeDirection.Stop.Allowed(logicalDevice);
			}
			if (command.IsForwardCommand)
			{
				return RelayHBridgeDirection.Forward.Allowed(logicalDevice);
			}
			if (command.IsReverseCommand)
			{
				return RelayHBridgeDirection.Reverse.Allowed(logicalDevice);
			}
			if (command.IsHomeResetCommand)
			{
				return RelayHBridgeDirection.Stop.Allowed(logicalDevice);
			}
			if (command.IsAutoForwardCommand && ((ILogicalDevice)logicalDevice).DeviceCapabilityBasic is ILogicalDeviceRelayCapability { AreAutoCommandsSupported: not false })
			{
				return RelayHBridgeDirection.Forward.Allowed(logicalDevice);
			}
			if (command.IsAutoReverseCommand && ((ILogicalDevice)logicalDevice).DeviceCapabilityBasic is ILogicalDeviceRelayCapability { AreAutoCommandsSupported: not false })
			{
				return RelayHBridgeDirection.Reverse.Allowed(logicalDevice);
			}
			if (command.ClearingFault)
			{
				return true;
			}
			return false;
		}

		public static bool Allowed(this RelayHBridgeDirection forState, ILogicalDeviceWithStatus<ILogicalDeviceRelayHBridgeStatus> logicalDevice)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Unknown result type (might be due to invalid IL or missing references)
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_002a: Expected I4, but got Unknown
			if (forState == RelayHBridgeDirection.Stop)
			{
				return true;
			}
			InTransitLockoutStatus inTransitLockout = ((ILogicalDevice)logicalDevice).InTransitLockout;
			switch ((int)inTransitLockout)
			{
			case 0:
			case 1:
			case 3:
				return true;
			case 4:
				return forState switch
				{
					RelayHBridgeDirection.Stop => true, 
					RelayHBridgeDirection.Forward => logicalDevice.DeviceStatus.CommandForwardNotHazardous, 
					RelayHBridgeDirection.Reverse => logicalDevice.DeviceStatus.CommandReverseNotHazardous, 
					_ => false, 
				};
			default:
				return false;
			}
		}
	}
	public class LogicalDeviceRelayHBridgeFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_003a: Unknown result type (might be due to invalid IL or missing references)
			//IL_005a: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DeviceCategory.GetDeviceCategory(logicalDeviceId).Function != DeviceCategory.AppFunction.RelayHBridge)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) == 6)
			{
				LogicalDeviceRelayCapabilityType1 capability = new LogicalDeviceRelayCapabilityType1(rawCapability);
				return (ILogicalDevice)(object)new LogicalDeviceRelayHBridgeMomentaryType1(logicalDeviceId, capability, service);
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) == 33)
			{
				LogicalDeviceRelayHBridgeCapabilityType2 capability2 = new LogicalDeviceRelayHBridgeCapabilityType2(rawCapability);
				return (ILogicalDevice)(object)new LogicalDeviceRelayHBridgeMomentaryType2(logicalDeviceId, capability2, service);
			}
			return null;
		}
	}
	public class LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability> : LogicalDevice<TRelayHBridgeStatus, TCapability>, ILogicalDeviceRelayHBridgeDirect<TRelayHBridgeStatus>, ILogicalDeviceRelayHBridge<TRelayHBridgeStatus>, ILogicalDeviceRelayHBridge, IRelayHBridge, IDevicesCommon, INotifyPropertyChanged, IRelayAutoOperations, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceWithStatus<TRelayHBridgeStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<TRelayHBridgeStatus>, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink where TRelayHBridgeStatus : class, ILogicalDeviceRelayHBridgeStatus, new() where TRelayCommandFactory : ILogicalDeviceRelayHBridgeCommandFactory, new() where TCapability : ILogicalDeviceRelayCapability
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass104_0 : Object
		{
			public CancellationTokenSource exclusiveOperationCts;

			internal void <PerformMovementOperationAsync>b__0()
			{
				CancellationTokenSourceExtension.TryCancelAndDispose(exclusiveOperationCts);
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass105_0 : Object
		{
			public CancellationTokenSource exclusiveOperationCts;

			internal void <PerformHomeResetOperationAsync>b__0()
			{
				CancellationTokenSourceExtension.TryCancelAndDispose(exclusiveOperationCts);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ActivateSession>d__81 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability> <>4__this;

			public CancellationToken cancelToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0089: Expected O, but got Unknown
				//IL_00b4: Expected O, but got Unknown
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				//IL_0069: Unknown result type (might be due to invalid IL or missing references)
				//IL_0070: Unknown result type (might be due to invalid IL or missing references)
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_002d: Invalid comparison between Unknown and I4
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_0039: Unknown result type (might be due to invalid IL or missing references)
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_004e: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability> logicalDeviceRelayHBridgeMomentary = <>4__this;
				try
				{
					try
					{
						TaskAwaiter val;
						if (num != 0)
						{
							logicalDeviceRelayHBridgeMomentary.TryAbortAutoOperation();
							val = logicalDeviceRelayHBridgeMomentary.IdsCanCommandRunner.CommandActivateSession(cancelToken, (int)((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).ActiveConnection == 1).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <ActivateSession>d__81>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val)).GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Error("LogicalDeviceRelayHBridgeMomentary", String.Format("Unable to ActiveSession for {0} with error {1}", (object)((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).LogicalId, (object)ex2.Message), Array.Empty<object>());
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <AutoClearFaultIfNeeded>d__84 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability> <>4__this;

			public bool relay1Energized;

			public bool relay2Energized;

			public bool checkOnly;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0138: Expected O, but got Unknown
				//IL_010e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0113: Unknown result type (might be due to invalid IL or missing references)
				//IL_011b: Unknown result type (might be due to invalid IL or missing references)
				//IL_012c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dc: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f8: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability> logicalDeviceRelayHBridgeMomentary = <>4__this;
				bool result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_012a;
					}
					if (!logicalDeviceRelayHBridgeMomentary.UserClearRequired)
					{
						result = false;
					}
					else
					{
						TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", "AutoClearFaultIfNeeded UserClearRequired.", Array.Empty<object>());
						if (logicalDeviceRelayHBridgeMomentary.CommandRelayEnergized != RelayHBridgeEnergized.None)
						{
							result = false;
						}
						else if (!relay1Energized && !relay2Energized)
						{
							result = false;
						}
						else
						{
							if (!(((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceRelayHBridgeMomentary) is IDirectCommandMovement))
							{
								if (!checkOnly && logicalDeviceRelayHBridgeMomentary.IdsCanCommandRunner.CommandSessionActivated && logicalDeviceRelayHBridgeMomentary._commandCancelSource != null)
								{
									TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", "Attempting to send a clear fault command.", Array.Empty<object>());
									ILogicalDeviceRelayHBridgeCommand logicalDeviceRelayHBridgeCommand = logicalDeviceRelayHBridgeMomentary.CommandFactory.MakeClearFaultCommand();
									val = logicalDeviceRelayHBridgeMomentary.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)logicalDeviceRelayHBridgeCommand, logicalDeviceRelayHBridgeMomentary._commandCancelSource.Token, (Func<ILogicalDevice, CommandControl>)null, (CommandSendOption)0).GetAwaiter();
									if (!val.IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <AutoClearFaultIfNeeded>d__84>(ref val, ref this);
										return;
									}
									goto IL_012a;
								}
								goto IL_0132;
							}
							result = false;
						}
					}
					goto end_IL_000e;
					IL_0132:
					result = true;
					goto end_IL_000e;
					IL_012a:
					val.GetResult();
					goto IL_0132;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformHomeResetOperationAsync>d__105 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public CancellationToken cancellationToken;

			public LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability> <>4__this;

			public Action<RelayOperationStatus> updateRelayHomeStatus;

			private CancellationToken <linkedToken>5__2;

			private int <relayDirectionSendTime>5__3;

			private IDisposable <startedExclusiveOperation>5__4;

			private TaskAwaiter <>u__1;

			private object <>7__wrap4;

			private int <>7__wrap5;

			private object <>7__wrap6;

			private int <>7__wrap7;

			private ConfiguredTaskAwaiter<CommandResult> <>u__2;

			private ConfiguredTaskAwaiter<bool> <>u__3;

			private ConfiguredTaskAwaiter <>u__4;

			private void MoveNext()
			{
				//IL_02e7: Expected O, but got Unknown
				//IL_03b3: Expected O, but got Unknown
				//IL_05c1: Expected O, but got Unknown
				//IL_05e8: Unknown result type (might be due to invalid IL or missing references)
				//IL_060a: Expected O, but got Unknown
				//IL_03c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_03cf: Unknown result type (might be due to invalid IL or missing references)
				//IL_03d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_03d8: Unknown result type (might be due to invalid IL or missing references)
				//IL_03dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0026: Expected O, but got Unknown
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_003f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				//IL_030e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0315: Expected O, but got Unknown
				//IL_033b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0346: Unknown result type (might be due to invalid IL or missing references)
				//IL_034b: Unknown result type (might be due to invalid IL or missing references)
				//IL_034f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0354: Unknown result type (might be due to invalid IL or missing references)
				//IL_03f2: Unknown result type (might be due to invalid IL or missing references)
				//IL_03f4: Unknown result type (might be due to invalid IL or missing references)
				//IL_0369: Unknown result type (might be due to invalid IL or missing references)
				//IL_036b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0150: Unknown result type (might be due to invalid IL or missing references)
				//IL_0155: Unknown result type (might be due to invalid IL or missing references)
				//IL_015d: Unknown result type (might be due to invalid IL or missing references)
				//IL_040d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0412: Unknown result type (might be due to invalid IL or missing references)
				//IL_041a: Unknown result type (might be due to invalid IL or missing references)
				//IL_04c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_04c7: Unknown result type (might be due to invalid IL or missing references)
				//IL_04cf: Unknown result type (might be due to invalid IL or missing references)
				//IL_0535: Unknown result type (might be due to invalid IL or missing references)
				//IL_053a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0542: Unknown result type (might be due to invalid IL or missing references)
				//IL_0111: Unknown result type (might be due to invalid IL or missing references)
				//IL_011b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0120: Unknown result type (might be due to invalid IL or missing references)
				//IL_0174: Unknown result type (might be due to invalid IL or missing references)
				//IL_04e0: Unknown result type (might be due to invalid IL or missing references)
				//IL_04ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_04f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_04fc: Unknown result type (might be due to invalid IL or missing references)
				//IL_0500: Unknown result type (might be due to invalid IL or missing references)
				//IL_0505: Unknown result type (might be due to invalid IL or missing references)
				//IL_0135: Unknown result type (might be due to invalid IL or missing references)
				//IL_0137: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ad: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b7: Expected O, but got Unknown
				//IL_01a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_051a: Unknown result type (might be due to invalid IL or missing references)
				//IL_051c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0384: Unknown result type (might be due to invalid IL or missing references)
				//IL_0389: Unknown result type (might be due to invalid IL or missing references)
				//IL_0391: Unknown result type (might be due to invalid IL or missing references)
				//IL_0479: Unknown result type (might be due to invalid IL or missing references)
				//IL_0484: Unknown result type (might be due to invalid IL or missing references)
				//IL_0489: Unknown result type (might be due to invalid IL or missing references)
				//IL_048d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0492: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ab: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b0: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0262: Unknown result type (might be due to invalid IL or missing references)
				//IL_026d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0272: Unknown result type (might be due to invalid IL or missing references)
				//IL_0276: Unknown result type (might be due to invalid IL or missing references)
				//IL_027b: Unknown result type (might be due to invalid IL or missing references)
				//IL_04a7: Unknown result type (might be due to invalid IL or missing references)
				//IL_04a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_02c9: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0290: Unknown result type (might be due to invalid IL or missing references)
				//IL_0292: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d8: Invalid comparison between Unknown and I4
				//IL_02da: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability> logicalDeviceRelayHBridgeMomentary = <>4__this;
				try
				{
					if ((uint)num > 5u)
					{
						<>c__DisplayClass105_0 CS$<>8__locals2 = new <>c__DisplayClass105_0
						{
							exclusiveOperationCts = new CancellationTokenSource()
						};
						CancellationTokenSource val = CancellationTokenSource.CreateLinkedTokenSource(cancellationToken, CS$<>8__locals2.exclusiveOperationCts.Token);
						<linkedToken>5__2 = val.Token;
						<relayDirectionSendTime>5__3 = (LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability>.HighSpeedTransmission ? 175 : 500);
						if (!logicalDeviceRelayHBridgeMomentary.IsHomingSupported)
						{
							TaggedLog.Error("LogicalDeviceRelayHBridgeMomentary", "PerformHomeOperationAsync failed to start an exclusive operation.", Array.Empty<object>());
							updateRelayHomeStatus.Invoke(RelayOperationStatus.UnableToPerformOperationNotSupported);
							throw new MomentaryRelayOperationInProgressException("PerformHomeOperationAsync home reset not supported.");
						}
						LogicalDeviceExclusiveOperation exclusiveOperation = ((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceService.GetExclusiveOperation<ILogicalDeviceRelayHBridge>();
						<startedExclusiveOperation>5__4 = exclusiveOperation.Start((Action)delegate
						{
							CancellationTokenSourceExtension.TryCancelAndDispose(CS$<>8__locals2.exclusiveOperationCts);
						});
						if (<startedExclusiveOperation>5__4 == null)
						{
							TaggedLog.Error("LogicalDeviceRelayHBridgeMomentary", "PerformHomeOperationAsync failed to start an exclusive operation.", Array.Empty<object>());
							updateRelayHomeStatus.Invoke(RelayOperationStatus.UnableToPerformOperationNoExclusiveOperation);
							throw new MomentaryRelayOperationInProgressException("PerformHomeOperationAsync failed to start an exclusive operation.");
						}
					}
					try
					{
						TaskAwaiter val5;
						ConfiguredTaskAwaiter<bool> val4;
						ConfiguredTaskAwaiter<CommandResult> val3;
						ConfiguredTaskAwaiter val2;
						object obj2;
						ConfiguredTaskAwaitable val6;
						switch (num)
						{
						default:
							val5 = logicalDeviceRelayHBridgeMomentary.ActivateSession(<linkedToken>5__2).GetAwaiter();
							if (!((TaskAwaiter)(ref val5)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val5;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <PerformHomeResetOperationAsync>d__105>(ref val5, ref this);
								return;
							}
							goto IL_016c;
						case 0:
							val5 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
							goto IL_016c;
						case 1:
						case 2:
							try
							{
								if (num != 1)
								{
									if (num == 2)
									{
										val4 = <>u__3;
										<>u__3 = default(ConfiguredTaskAwaiter<bool>);
										num = (<>1__state = -1);
										goto IL_03a0;
									}
									<>7__wrap7 = 0;
								}
								try
								{
									if (num != 1)
									{
										updateRelayHomeStatus.Invoke(RelayOperationStatus.PerformingOperation);
										logicalDeviceRelayHBridgeMomentary.CommandDirectionLastSetTimer.Restart();
										TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", String.Format("(PerformHomeOperationAsync Send Home Reset Command: {0}", (object)logicalDeviceRelayHBridgeMomentary), Array.Empty<object>());
										val3 = logicalDeviceRelayHBridgeMomentary.SendDirectionCommand(HBridgeCommand.HomeReset, <linkedToken>5__2).ConfigureAwait(false).GetAwaiter();
										if (!val3.IsCompleted)
										{
											num = (<>1__state = 1);
											<>u__2 = val3;
											((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<CommandResult>, <PerformHomeResetOperationAsync>d__105>(ref val3, ref this);
											return;
										}
									}
									else
									{
										val3 = <>u__2;
										<>u__2 = default(ConfiguredTaskAwaiter<CommandResult>);
										num = (<>1__state = -1);
									}
									CommandResult result = val3.GetResult();
									if ((int)result != 0 && (int)result != 12)
									{
										throw new MomentaryRelayCommandResultException(result);
									}
								}
								catch (Exception ex)
								{
									Exception ex2 = ex;
									<>7__wrap6 = ex2;
									<>7__wrap7 = 1;
								}
								int num2 = <>7__wrap7;
								if (num2 == 1)
								{
									Exception ex3 = (Exception)<>7__wrap6;
									TaggedLog.Error("LogicalDeviceRelayHBridgeMomentary", String.Concat("PerformHomeOperationAsync exception ", ex3.Message), Array.Empty<object>());
									val4 = TaskExtension.TryDelay(250, <linkedToken>5__2).ConfigureAwait(false).GetAwaiter();
									if (!val4.IsCompleted)
									{
										num = (<>1__state = 2);
										<>u__3 = val4;
										((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<bool>, <PerformHomeResetOperationAsync>d__105>(ref val4, ref this);
										return;
									}
									goto IL_03a0;
								}
								goto IL_03a8;
								IL_03a0:
								val4.GetResult();
								goto IL_03a8;
								IL_03a8:
								<>7__wrap6 = null;
							}
							catch (Object obj)
							{
								obj2 = (object)obj;
								<>7__wrap4 = obj2;
							}
							val4 = TaskExtension.TryDelay(<relayDirectionSendTime>5__3, <linkedToken>5__2).ConfigureAwait(false).GetAwaiter();
							if (!val4.IsCompleted)
							{
								num = (<>1__state = 3);
								<>u__3 = val4;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<bool>, <PerformHomeResetOperationAsync>d__105>(ref val4, ref this);
								return;
							}
							goto IL_0429;
						case 3:
							val4 = <>u__3;
							<>u__3 = default(ConfiguredTaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_0429;
						case 4:
							val3 = <>u__2;
							<>u__2 = default(ConfiguredTaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_04de;
						case 5:
							{
								val2 = <>u__4;
								<>u__4 = default(ConfiguredTaskAwaiter);
								num = (<>1__state = -1);
								goto IL_0551;
							}
							IL_045b:
							if (!((CancellationToken)(ref <linkedToken>5__2)).IsCancellationRequested)
							{
								<>7__wrap4 = null;
								<>7__wrap5 = 0;
								goto case 1;
							}
							<>7__wrap5 = 0;
							goto IL_0572;
							IL_016c:
							((TaskAwaiter)(ref val5)).GetResult();
							if ((int)((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).ActiveConnection == 0)
							{
								TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", String.Format("PerformHomeOperationAsync device is offline: {0}", (object)logicalDeviceRelayHBridgeMomentary), Array.Empty<object>());
								updateRelayHomeStatus.Invoke(RelayOperationStatus.UnableToPerformOperationNoConnection);
								throw new MomentaryRelayNoActiveConnectionException();
							}
							if (InTransitLockoutStatusExtension.IsInLockout(((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).InTransitLockout))
							{
								TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", "PerformHomeOperationAsync lockout occurred while attempting to command relay; stopping commands.", Array.Empty<object>());
								throw new MomentaryRelayInLockoutException();
							}
							if (!((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).ActiveSession)
							{
								TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", String.Format("PerformHomeOperationAsync can't home reset as session isn't active: {0}", (object)logicalDeviceRelayHBridgeMomentary), Array.Empty<object>());
								updateRelayHomeStatus.Invoke(RelayOperationStatus.UnableToPerformOperationNoSession);
								throw new MomentaryRelayNoActiveSessionException();
							}
							goto IL_045b;
							IL_0572:
							if (<>7__wrap5 >= 5)
							{
								break;
							}
							val3 = logicalDeviceRelayHBridgeMomentary.SendDirectionCommand(HBridgeCommand.Stop, CancellationToken.None).ConfigureAwait(false).GetAwaiter();
							if (!val3.IsCompleted)
							{
								num = (<>1__state = 4);
								<>u__2 = val3;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<CommandResult>, <PerformHomeResetOperationAsync>d__105>(ref val3, ref this);
								return;
							}
							goto IL_04de;
							IL_0429:
							val4.GetResult();
							obj2 = <>7__wrap4;
							if (obj2 != null)
							{
								ExceptionDispatchInfo.Capture((Exception)(((obj2 is Exception) ? obj2 : null) ?? throw obj2)).Throw();
							}
							<>7__wrap4 = null;
							goto IL_045b;
							IL_0551:
							((ConfiguredTaskAwaiter)(ref val2)).GetResult();
							if (logicalDeviceRelayHBridgeMomentary.RelayEnergized == RelayHBridgeEnergized.None)
							{
								break;
							}
							<>7__wrap5++;
							goto IL_0572;
							IL_04de:
							val3.GetResult();
							val6 = Task.Delay(<relayDirectionSendTime>5__3, CancellationToken.None).ConfigureAwait(false);
							val2 = ((ConfiguredTaskAwaitable)(ref val6)).GetAwaiter();
							if (!((ConfiguredTaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 5);
								<>u__4 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter, <PerformHomeResetOperationAsync>d__105>(ref val2, ref this);
								return;
							}
							goto IL_0551;
						}
						logicalDeviceRelayHBridgeMomentary.DeactivateSession();
						((CancellationToken)(ref <linkedToken>5__2)).ThrowIfCancellationRequested();
					}
					catch (OperationCanceledException)
					{
						TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", "PerformHomeOperationAsync operation canceled.", Array.Empty<object>());
						throw;
					}
					catch (TimeoutException)
					{
						TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", "PerformHomeOperationAsync operation timeout.", Array.Empty<object>());
						throw;
					}
					catch (Exception ex6)
					{
						Exception ex7 = ex6;
						TaggedLog.Warning("LogicalDeviceRelayHBridgeMomentary", String.Concat("PerformHomeOperationAsync operation error ", ex7.Message), Array.Empty<object>());
						throw new Exception("Unable to perform operation", ex7);
					}
					finally
					{
						if (num < 0)
						{
							IDisposable obj3 = <startedExclusiveOperation>5__4;
							if (obj3 != null)
							{
								obj3.Dispose();
							}
						}
					}
				}
				catch (Exception ex8)
				{
					Exception exception = ex8;
					<>1__state = -2;
					<startedExclusiveOperation>5__4 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<startedExclusiveOperation>5__4 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformMovementOperationAsync>d__104 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public CancellationToken cancellationToken;

			public LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability> <>4__this;

			public Action<RelayMovementStatus> updateRelayMovementStatus;

			public RelayHBridgeDirection direction;

			private CancellationToken <linkedToken>5__2;

			private int <relayDirectionSendTime>5__3;

			private IDisposable <startedExclusiveOperation>5__4;

			private bool <performedStopCommand>5__5;

			private TaskAwaiter <>u__1;

			private object <>7__wrap5;

			private int <>7__wrap6;

			private object <>7__wrap7;

			private int <>7__wrap8;

			private ConfiguredTaskAwaiter<CommandResult> <>u__2;

			private ConfiguredTaskAwaiter<bool> <>u__3;

			private ConfiguredTaskAwaiter <>u__4;

			private void MoveNext()
			{
				//IL_03bd: Expected O, but got Unknown
				//IL_049b: Expected O, but got Unknown
				//IL_06c4: Expected O, but got Unknown
				//IL_06eb: Unknown result type (might be due to invalid IL or missing references)
				//IL_0714: Expected O, but got Unknown
				//IL_04ac: Unknown result type (might be due to invalid IL or missing references)
				//IL_04b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_04bc: Unknown result type (might be due to invalid IL or missing references)
				//IL_04c0: Unknown result type (might be due to invalid IL or missing references)
				//IL_04c5: Unknown result type (might be due to invalid IL or missing references)
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0026: Expected O, but got Unknown
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_003f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				//IL_03e4: Unknown result type (might be due to invalid IL or missing references)
				//IL_03eb: Expected O, but got Unknown
				//IL_0411: Unknown result type (might be due to invalid IL or missing references)
				//IL_041c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0421: Unknown result type (might be due to invalid IL or missing references)
				//IL_0425: Unknown result type (might be due to invalid IL or missing references)
				//IL_042a: Unknown result type (might be due to invalid IL or missing references)
				//IL_04da: Unknown result type (might be due to invalid IL or missing references)
				//IL_04dc: Unknown result type (might be due to invalid IL or missing references)
				//IL_043f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0441: Unknown result type (might be due to invalid IL or missing references)
				//IL_011c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0121: Unknown result type (might be due to invalid IL or missing references)
				//IL_0129: Unknown result type (might be due to invalid IL or missing references)
				//IL_04f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_04fa: Unknown result type (might be due to invalid IL or missing references)
				//IL_0502: Unknown result type (might be due to invalid IL or missing references)
				//IL_05bc: Unknown result type (might be due to invalid IL or missing references)
				//IL_05c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_05c9: Unknown result type (might be due to invalid IL or missing references)
				//IL_062f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0634: Unknown result type (might be due to invalid IL or missing references)
				//IL_063c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_0079: Unknown result type (might be due to invalid IL or missing references)
				//IL_0083: Expected O, but got Unknown
				//IL_05da: Unknown result type (might be due to invalid IL or missing references)
				//IL_05e6: Unknown result type (might be due to invalid IL or missing references)
				//IL_05f1: Unknown result type (might be due to invalid IL or missing references)
				//IL_05f6: Unknown result type (might be due to invalid IL or missing references)
				//IL_05fa: Unknown result type (might be due to invalid IL or missing references)
				//IL_05ff: Unknown result type (might be due to invalid IL or missing references)
				//IL_0101: Unknown result type (might be due to invalid IL or missing references)
				//IL_0103: Unknown result type (might be due to invalid IL or missing references)
				//IL_016a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0614: Unknown result type (might be due to invalid IL or missing references)
				//IL_0616: Unknown result type (might be due to invalid IL or missing references)
				//IL_0573: Unknown result type (might be due to invalid IL or missing references)
				//IL_057e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0583: Unknown result type (might be due to invalid IL or missing references)
				//IL_0587: Unknown result type (might be due to invalid IL or missing references)
				//IL_058c: Unknown result type (might be due to invalid IL or missing references)
				//IL_019f: Unknown result type (might be due to invalid IL or missing references)
				//IL_045a: Unknown result type (might be due to invalid IL or missing references)
				//IL_045f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0467: Unknown result type (might be due to invalid IL or missing references)
				//IL_05a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_05a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0381: Unknown result type (might be due to invalid IL or missing references)
				//IL_0386: Unknown result type (might be due to invalid IL or missing references)
				//IL_038e: Unknown result type (might be due to invalid IL or missing references)
				//IL_039f: Unknown result type (might be due to invalid IL or missing references)
				//IL_03a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_03a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_03aa: Unknown result type (might be due to invalid IL or missing references)
				//IL_03ae: Invalid comparison between Unknown and I4
				//IL_03b0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0338: Unknown result type (might be due to invalid IL or missing references)
				//IL_0343: Unknown result type (might be due to invalid IL or missing references)
				//IL_0348: Unknown result type (might be due to invalid IL or missing references)
				//IL_034c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0351: Unknown result type (might be due to invalid IL or missing references)
				//IL_0366: Unknown result type (might be due to invalid IL or missing references)
				//IL_0368: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability> logicalDeviceRelayHBridgeMomentary = <>4__this;
				try
				{
					if ((uint)num > 5u)
					{
						<>c__DisplayClass104_0 CS$<>8__locals2 = new <>c__DisplayClass104_0
						{
							exclusiveOperationCts = new CancellationTokenSource()
						};
						CancellationTokenSource val = CancellationTokenSource.CreateLinkedTokenSource(cancellationToken, CS$<>8__locals2.exclusiveOperationCts.Token);
						<linkedToken>5__2 = val.Token;
						<relayDirectionSendTime>5__3 = (LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability>.HighSpeedTransmission ? 175 : 500);
						LogicalDeviceExclusiveOperation exclusiveOperation = ((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceService.GetExclusiveOperation<ILogicalDeviceRelayHBridge>();
						<startedExclusiveOperation>5__4 = exclusiveOperation.Start((Action)delegate
						{
							CancellationTokenSourceExtension.TryCancelAndDispose(CS$<>8__locals2.exclusiveOperationCts);
						});
						if (<startedExclusiveOperation>5__4 == null)
						{
							TaggedLog.Error("LogicalDeviceRelayHBridgeMomentary", "PerformMovementOperationAsync failed to start an exclusive operation.", Array.Empty<object>());
							updateRelayMovementStatus.Invoke(RelayMovementStatus.UnableToMoveNoExclusiveOperation);
							throw new MomentaryRelayOperationInProgressException("PerformMovementOperationAsync failed to start an exclusive operation.");
						}
					}
					try
					{
						TaskAwaiter val5;
						ConfiguredTaskAwaiter<bool> val4;
						ConfiguredTaskAwaiter<CommandResult> val3;
						ConfiguredTaskAwaiter val2;
						object obj;
						int num2;
						ConfiguredTaskAwaitable val6;
						switch (num)
						{
						default:
							val5 = logicalDeviceRelayHBridgeMomentary.ActivateSession(<linkedToken>5__2).GetAwaiter();
							if (!((TaskAwaiter)(ref val5)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val5;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <PerformMovementOperationAsync>d__104>(ref val5, ref this);
								return;
							}
							goto IL_0138;
						case 0:
							val5 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
							goto IL_0138;
						case 1:
						case 2:
							try
							{
								if (num != 1)
								{
									if (num == 2)
									{
										val4 = <>u__3;
										<>u__3 = default(ConfiguredTaskAwaiter<bool>);
										num = (<>1__state = -1);
										goto IL_0476;
									}
									<>7__wrap8 = 0;
								}
								try
								{
									if (num != 1)
									{
										if (((logicalDeviceRelayHBridgeMomentary.RelayEnergized == RelayHBridgeEnergized.None) & <performedStopCommand>5__5) && direction == RelayHBridgeDirection.Stop && !logicalDeviceRelayHBridgeMomentary._deviceHasFaulted)
										{
											updateRelayMovementStatus.Invoke(RelayMovementStatus.AbleToMove);
											TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", "PerformMovementOperationAsync performed stop command and relay stopped.", Array.Empty<object>());
											goto IL_0487;
										}
										if (logicalDeviceRelayHBridgeMomentary.UserClearRequired || logicalDeviceRelayHBridgeMomentary._deviceHasFaulted)
										{
											updateRelayMovementStatus.Invoke(RelayMovementStatus.UnableToMoveFaulted);
										}
										else
										{
											updateRelayMovementStatus.Invoke(RelayMovementStatus.AbleToMove);
										}
										HBridgeCommand hBridgeCommand = HBridgeCommand.Unknown;
										switch (direction)
										{
										case RelayHBridgeDirection.Forward:
											hBridgeCommand = HBridgeCommand.Forward;
											<performedStopCommand>5__5 = false;
											goto default;
										case RelayHBridgeDirection.Reverse:
											hBridgeCommand = HBridgeCommand.Reverse;
											<performedStopCommand>5__5 = false;
											goto default;
										case RelayHBridgeDirection.Stop:
											hBridgeCommand = HBridgeCommand.Stop;
											if (!<performedStopCommand>5__5)
											{
												<performedStopCommand>5__5 = true;
												goto default;
											}
											goto end_IL_0244;
										default:
											TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", String.Format("(PerformMovementOperationAsync Send Direction Command {0}: {1}", (object)hBridgeCommand, (object)logicalDeviceRelayHBridgeMomentary), Array.Empty<object>());
											val3 = logicalDeviceRelayHBridgeMomentary.SendDirectionCommand(hBridgeCommand, <linkedToken>5__2).ConfigureAwait(false).GetAwaiter();
											if (!val3.IsCompleted)
											{
												num = (<>1__state = 1);
												<>u__2 = val3;
												((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<CommandResult>, <PerformMovementOperationAsync>d__104>(ref val3, ref this);
												return;
											}
											break;
										}
									}
									else
									{
										val3 = <>u__2;
										<>u__2 = default(ConfiguredTaskAwaiter<CommandResult>);
										num = (<>1__state = -1);
									}
									CommandResult result = val3.GetResult();
									if ((int)result != 0 && (int)result != 12)
									{
										throw new MomentaryRelayCommandResultException(result);
									}
									goto IL_03ce;
									end_IL_0244:;
								}
								catch (Exception ex)
								{
									Exception ex2 = ex;
									<>7__wrap7 = ex2;
									<>7__wrap8 = 1;
									goto IL_03ce;
								}
								<>7__wrap6 = 2;
								goto end_IL_0231;
								IL_0487:
								<>7__wrap6 = 1;
								goto end_IL_0231;
								IL_047e:
								<>7__wrap7 = null;
								goto end_IL_0231;
								IL_03ce:
								num2 = <>7__wrap8;
								if (num2 == 1)
								{
									Exception ex3 = (Exception)<>7__wrap7;
									TaggedLog.Error("LogicalDeviceRelayHBridgeMomentary", String.Concat("PerformMovementOperationAsync exception ", ex3.Message), Array.Empty<object>());
									val4 = TaskExtension.TryDelay(250, <linkedToken>5__2).ConfigureAwait(false).GetAwaiter();
									if (!val4.IsCompleted)
									{
										num = (<>1__state = 2);
										<>u__3 = val4;
										((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<bool>, <PerformMovementOperationAsync>d__104>(ref val4, ref this);
										return;
									}
									goto IL_0476;
								}
								goto IL_047e;
								IL_0476:
								val4.GetResult();
								goto IL_047e;
								end_IL_0231:;
							}
							catch (Object obj2)
							{
								obj = (object)obj2;
								<>7__wrap5 = obj;
							}
							val4 = TaskExtension.TryDelay(<relayDirectionSendTime>5__3, <linkedToken>5__2).ConfigureAwait(false).GetAwaiter();
							if (!val4.IsCompleted)
							{
								num = (<>1__state = 3);
								<>u__3 = val4;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<bool>, <PerformMovementOperationAsync>d__104>(ref val4, ref this);
								return;
							}
							goto IL_0511;
						case 3:
							val4 = <>u__3;
							<>u__3 = default(ConfiguredTaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_0511;
						case 4:
							val3 = <>u__2;
							<>u__2 = default(ConfiguredTaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_05d8;
						case 5:
							{
								val2 = <>u__4;
								<>u__4 = default(ConfiguredTaskAwaiter);
								num = (<>1__state = -1);
								goto IL_064b;
							}
							IL_0675:
							if (<>7__wrap6 >= 5)
							{
								break;
							}
							val3 = logicalDeviceRelayHBridgeMomentary.SendDirectionCommand(HBridgeCommand.Stop, CancellationToken.None).ConfigureAwait(false).GetAwaiter();
							if (!val3.IsCompleted)
							{
								num = (<>1__state = 4);
								<>u__2 = val3;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<CommandResult>, <PerformMovementOperationAsync>d__104>(ref val3, ref this);
								return;
							}
							goto IL_05d8;
							IL_0138:
							((TaskAwaiter)(ref val5)).GetResult();
							if (direction == RelayHBridgeDirection.Unknown)
							{
								TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", "PerformMovementOperationAsync direction of unknown is not supported.", Array.Empty<object>());
								throw new MomentaryRelayDirectionException(direction);
							}
							if ((int)((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).ActiveConnection == 0)
							{
								TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", String.Format("PerformMovementOperationAsync device is offline: {0}", (object)logicalDeviceRelayHBridgeMomentary), Array.Empty<object>());
								updateRelayMovementStatus.Invoke(RelayMovementStatus.UnableToMoveNoConnection);
								throw new MomentaryRelayNoActiveConnectionException();
							}
							if (InTransitLockoutStatusExtension.IsInLockout(((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).InTransitLockout))
							{
								TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", "PerformMovementOperationAsync lockout occurred while attempting to command relay; stopping commands.", Array.Empty<object>());
								throw new MomentaryRelayInLockoutException();
							}
							if (!((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).ActiveSession)
							{
								if (direction != RelayHBridgeDirection.Stop)
								{
									TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", String.Format("PerformMovementOperationAsync can't send direction of {0} as session isn't active: {1}", (object)direction, (object)logicalDeviceRelayHBridgeMomentary), Array.Empty<object>());
								}
								updateRelayMovementStatus.Invoke(RelayMovementStatus.UnableToMoveNoSession);
								throw new MomentaryRelayNoActiveSessionException();
							}
							<performedStopCommand>5__5 = logicalDeviceRelayHBridgeMomentary.RelayEnergized == RelayHBridgeEnergized.None;
							goto IL_0555;
							IL_064b:
							((ConfiguredTaskAwaiter)(ref val2)).GetResult();
							if (logicalDeviceRelayHBridgeMomentary.RelayEnergized == RelayHBridgeEnergized.None)
							{
								logicalDeviceRelayHBridgeMomentary.CommandRelayEnergized = RelayHBridgeEnergized.None;
								break;
							}
							<>7__wrap6++;
							goto IL_0675;
							IL_0511:
							val4.GetResult();
							obj = <>7__wrap5;
							if (obj != null)
							{
								ExceptionDispatchInfo.Capture((Exception)(((obj is Exception) ? obj : null) ?? throw obj)).Throw();
							}
							num2 = <>7__wrap6;
							if (num2 != 1)
							{
								if (num2 != 2)
								{
									<>7__wrap5 = null;
								}
								goto IL_0555;
							}
							goto IL_0565;
							IL_05d8:
							val3.GetResult();
							val6 = Task.Delay(<relayDirectionSendTime>5__3, CancellationToken.None).ConfigureAwait(false);
							val2 = ((ConfiguredTaskAwaitable)(ref val6)).GetAwaiter();
							if (!((ConfiguredTaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 5);
								<>u__4 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter, <PerformMovementOperationAsync>d__104>(ref val2, ref this);
								return;
							}
							goto IL_064b;
							IL_0555:
							if (!((CancellationToken)(ref <linkedToken>5__2)).IsCancellationRequested)
							{
								<>7__wrap5 = null;
								<>7__wrap6 = 0;
								goto case 1;
							}
							goto IL_0565;
							IL_0565:
							<>7__wrap6 = 0;
							goto IL_0675;
						}
						logicalDeviceRelayHBridgeMomentary.DeactivateSession();
						((CancellationToken)(ref <linkedToken>5__2)).ThrowIfCancellationRequested();
					}
					catch (OperationCanceledException)
					{
						TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", "PerformMovementOperationAsync operation canceled.", Array.Empty<object>());
						throw;
					}
					catch (TimeoutException)
					{
						TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", "PerformMovementOperationAsync operation timeout.", Array.Empty<object>());
						throw;
					}
					catch (Exception ex6)
					{
						Exception ex7 = ex6;
						TaggedLog.Warning("LogicalDeviceRelayHBridgeMomentary", String.Concat("PerformMovementOperationAsync operation error ", ex7.Message), Array.Empty<object>());
						throw new Exception("Unable to perform operation", ex7);
					}
					finally
					{
						if (num < 0)
						{
							logicalDeviceRelayHBridgeMomentary._deviceHasFaulted = false;
							IDisposable obj3 = <startedExclusiveOperation>5__4;
							if (obj3 != null)
							{
								obj3.Dispose();
							}
						}
					}
				}
				catch (Exception ex8)
				{
					Exception exception = ex8;
					<>1__state = -2;
					<startedExclusiveOperation>5__4 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<startedExclusiveOperation>5__4 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendDirectionCommand>d__80 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability> <>4__this;

			public CancellationToken callerCancelToken;

			public HBridgeCommand hBridgeCommand;

			private CancellationTokenSource <cancelSource>5__2;

			private ILogicalDeviceRelayHBridgeCommand <command>5__3;

			private bool <relay1Energized>5__4;

			private bool <relay2Energized>5__5;

			private long <lastSentCommandMs>5__6;

			private TaskAwaiter<bool> <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_0998: Expected O, but got Unknown
				//IL_0a12: Unknown result type (might be due to invalid IL or missing references)
				//IL_0a2f: Expected O, but got Unknown
				//IL_0a70: Unknown result type (might be due to invalid IL or missing references)
				//IL_0016: Unknown result type (might be due to invalid IL or missing references)
				//IL_001c: Invalid comparison between Unknown and I4
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_02a8: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ad: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b5: Unknown result type (might be due to invalid IL or missing references)
				//IL_03bc: Unknown result type (might be due to invalid IL or missing references)
				//IL_03c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_03c9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_03e2: Unknown result type (might be due to invalid IL or missing references)
				//IL_07ef: Unknown result type (might be due to invalid IL or missing references)
				//IL_07f4: Unknown result type (might be due to invalid IL or missing references)
				//IL_07fc: Unknown result type (might be due to invalid IL or missing references)
				//IL_04e3: Unknown result type (might be due to invalid IL or missing references)
				//IL_014f: Unknown result type (might be due to invalid IL or missing references)
				//IL_080d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0812: Unknown result type (might be due to invalid IL or missing references)
				//IL_0837: Unknown result type (might be due to invalid IL or missing references)
				//IL_0895: Unknown result type (might be due to invalid IL or missing references)
				//IL_0897: Unknown result type (might be due to invalid IL or missing references)
				//IL_08f0: Unknown result type (might be due to invalid IL or missing references)
				//IL_08f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_08fd: Unknown result type (might be due to invalid IL or missing references)
				//IL_0269: Unknown result type (might be due to invalid IL or missing references)
				//IL_0273: Unknown result type (might be due to invalid IL or missing references)
				//IL_0278: Unknown result type (might be due to invalid IL or missing references)
				//IL_037d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0387: Unknown result type (might be due to invalid IL or missing references)
				//IL_038c: Unknown result type (might be due to invalid IL or missing references)
				//IL_017d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0121: Unknown result type (might be due to invalid IL or missing references)
				//IL_090e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0913: Unknown result type (might be due to invalid IL or missing references)
				//IL_0930: Unknown result type (might be due to invalid IL or missing references)
				//IL_098e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0990: Unknown result type (might be due to invalid IL or missing references)
				//IL_08af: Unknown result type (might be due to invalid IL or missing references)
				//IL_08bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_08c0: Unknown result type (might be due to invalid IL or missing references)
				//IL_07b0: Unknown result type (might be due to invalid IL or missing references)
				//IL_07ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_07bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_028d: Unknown result type (might be due to invalid IL or missing references)
				//IL_028f: Unknown result type (might be due to invalid IL or missing references)
				//IL_03a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_03a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_01cc: Unknown result type (might be due to invalid IL or missing references)
				//IL_08d5: Unknown result type (might be due to invalid IL or missing references)
				//IL_08d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_07d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_07d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b9: Unknown result type (might be due to invalid IL or missing references)
				//IL_071a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0728: Unknown result type (might be due to invalid IL or missing references)
				//IL_0748: Unknown result type (might be due to invalid IL or missing references)
				//IL_05fb: Unknown result type (might be due to invalid IL or missing references)
				//IL_05ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_05f2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0600: Unknown result type (might be due to invalid IL or missing references)
				//IL_0631: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability> logicalDeviceRelayHBridgeMomentary = <>4__this;
				CommandResult result;
				try
				{
					if ((uint)num <= 3u)
					{
						goto IL_01dc;
					}
					if ((int)((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).ActiveConnection != 1)
					{
						TaggedLog.Debug("LogicalDeviceRelayHBridgeMomentary", String.Concat("SendDirectionCommand Direct control not online for ", ((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceName), Array.Empty<object>());
						result = (CommandResult)6;
					}
					else if (!logicalDeviceRelayHBridgeMomentary.IdsCanCommandRunner.CommandSessionActivated)
					{
						TaggedLog.Debug("LogicalDeviceRelayHBridgeMomentary", String.Concat("SendDirectionCommand Session Not Activated so stopping relay for ", ((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceName), Array.Empty<object>());
						result = (CommandResult)8;
					}
					else if (!((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).ActiveSession && logicalDeviceRelayHBridgeMomentary.CommandDirectionLastSetTimer.ElapsedMilliseconds > 1000)
					{
						TaggedLog.Debug("LogicalDeviceRelayHBridgeMomentary", String.Format("No session active for relay {0}, command changes must be received within {1}ms", (object)((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceName, (object)1000), Array.Empty<object>());
						RelayHBridgeEnergized relayHBridgeEnergized = LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability>.ResolveRelayEnergized(((LogicalDevice<TRelayHBridgeStatus, ?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceStatus.Relay1State(((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).LogicalId), ((LogicalDevice<TRelayHBridgeStatus, ?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceStatus.Relay2State(((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).LogicalId));
						if (relayHBridgeEnergized != RelayHBridgeEnergized.None)
						{
							TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", String.Format("SendDirectionCommand Command={0} CurrentState={1} ERROR NO SESSION ACTIVE But Relay is moving!", (object)logicalDeviceRelayHBridgeMomentary.CommandDirectionVerbose, (object)relayHBridgeEnergized), Array.Empty<object>());
						}
						result = (CommandResult)7;
					}
					else if (logicalDeviceRelayHBridgeMomentary._commandCancelSource == null)
					{
						TaggedLog.Debug("LogicalDeviceRelayHBridgeMomentary", String.Concat("SendDirectionCommand No cancel source so stopping relay for ", ((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceName), Array.Empty<object>());
						result = (CommandResult)1;
					}
					else if (((CommonDisposableNotifyPropertyChanged)logicalDeviceRelayHBridgeMomentary).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceRelayHBridgeMomentary", String.Concat("SendDirectionCommand Unable to send command to disposed LogicalDevice ", ((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceName), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else
					{
						if (logicalDeviceRelayHBridgeMomentary.Relay1Allowed || logicalDeviceRelayHBridgeMomentary.Relay2Allowed)
						{
							<cancelSource>5__2 = CancellationTokenSource.CreateLinkedTokenSource(callerCancelToken, logicalDeviceRelayHBridgeMomentary._commandCancelSource.Token);
							goto IL_01dc;
						}
						TaggedLog.Debug("LogicalDeviceRelayHBridgeMomentary", String.Concat("SendDirectionCommand Unable to send command for ", ((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceName, ", neither relay is allowed."), Array.Empty<object>());
						result = (CommandResult)11;
					}
					goto end_IL_000e;
					IL_01dc:
					try
					{
						TaskAwaiter<bool> val;
						bool flag;
						bool flag2;
						ILogicalDeviceRelayHBridgeCommand lastSentCommand;
						Nullable<bool> val2;
						TRelayCommandFactory val3;
						switch (num)
						{
						default:
							<relay1Energized>5__4 = false;
							<relay2Energized>5__5 = false;
							switch (hBridgeCommand)
							{
							case HBridgeCommand.Forward:
								break;
							case HBridgeCommand.Reverse:
								goto IL_0350;
							case HBridgeCommand.Stop:
								goto IL_0464;
							case HBridgeCommand.ClearUserClearRequiredLatch:
								goto IL_047d;
							case HBridgeCommand.HomeReset:
								goto IL_0496;
							case HBridgeCommand.AutoForward:
								goto IL_04af;
							case HBridgeCommand.AutoReverse:
								goto IL_04c8;
							default:
								result = (CommandResult)11;
								goto end_IL_01dc;
							}
							if (logicalDeviceRelayHBridgeMomentary.ForwardRelay() == RelayHBridgeEnergized.Relay1)
							{
								<relay1Energized>5__4 = true;
							}
							else
							{
								<relay2Energized>5__5 = true;
							}
							val = logicalDeviceRelayHBridgeMomentary.AutoClearFaultIfNeeded(<relay1Energized>5__4, <relay2Energized>5__5, checkOnly: false, logicalDeviceRelayHBridgeMomentary._commandCancelSource.Token).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SendDirectionCommand>d__80>(ref val, ref this);
								return;
							}
							goto IL_02c4;
						case 0:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_02c4;
						case 1:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_03d8;
						case 2:
						case 3:
							break;
							IL_04c8:
							<command>5__3 = logicalDeviceRelayHBridgeMomentary.CommandFactory.MakeAutoReverseCommand();
							goto IL_04e9;
							IL_04af:
							<command>5__3 = logicalDeviceRelayHBridgeMomentary.CommandFactory.MakeAutoForwardCommand();
							goto IL_04e9;
							IL_0496:
							<command>5__3 = logicalDeviceRelayHBridgeMomentary.CommandFactory.MakeHomeResetCommand();
							goto IL_04e9;
							IL_047d:
							<command>5__3 = logicalDeviceRelayHBridgeMomentary.CommandFactory.MakeClearFaultCommand();
							goto IL_04e9;
							IL_0464:
							<command>5__3 = logicalDeviceRelayHBridgeMomentary.CommandFactory.MakeRelayStopCommand();
							goto IL_04e9;
							IL_0350:
							if (logicalDeviceRelayHBridgeMomentary.ReverseRelay() == RelayHBridgeEnergized.Relay1)
							{
								<relay1Energized>5__4 = true;
							}
							else
							{
								<relay2Energized>5__5 = true;
							}
							val = logicalDeviceRelayHBridgeMomentary.AutoClearFaultIfNeeded(<relay1Energized>5__4, <relay2Energized>5__5, checkOnly: false, logicalDeviceRelayHBridgeMomentary._commandCancelSource.Token).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SendDirectionCommand>d__80>(ref val, ref this);
								return;
							}
							goto IL_03d8;
							IL_0637:
							if (<command>5__3.Allowed((ILogicalDeviceWithStatus<ILogicalDeviceRelayHBridgeStatus>)(object)logicalDeviceRelayHBridgeMomentary))
							{
								logicalDeviceRelayHBridgeMomentary._lastSentCommand = <command>5__3;
								<lastSentCommandMs>5__6 = logicalDeviceRelayHBridgeMomentary._lastCommandSendTime.ElapsedMilliseconds;
								logicalDeviceRelayHBridgeMomentary._lastCommandSendTime.Restart();
								break;
							}
							if (((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).ShouldAutoClearInTransitLockout)
							{
								ILogicalDeviceSourceDirectConnectionIdsCan primaryDeviceSource = ((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceService.DeviceSourceManager.GetPrimaryDeviceSource<ILogicalDeviceSourceDirectConnectionIdsCan>((ILogicalDevice)(object)logicalDeviceRelayHBridgeMomentary);
								IAdapter obj = ((primaryDeviceSource != null) ? primaryDeviceSource.Gateway : null);
								ILocalDevice obj2 = ((obj != null) ? obj.LocalHost : null);
								if (obj2 != null)
								{
									LocalDeviceExtension.SendDisableInMotionLockoutCommand(obj2, false);
								}
							}
							flag = ((LogicalDevice<TRelayHBridgeStatus, ?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceStatus.CommandForwardAllowed((ILogicalDeviceWithStatus<ILogicalDeviceRelayHBridgeStatus>)(object)logicalDeviceRelayHBridgeMomentary);
							flag2 = ((LogicalDevice<TRelayHBridgeStatus, ?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceStatus.CommandReverseAllowed((ILogicalDeviceWithStatus<ILogicalDeviceRelayHBridgeStatus>)(object)logicalDeviceRelayHBridgeMomentary);
							TaggedLog.Debug("LogicalDeviceRelayHBridgeMomentary", String.Format("CommandForwardAllowed={0} CommandReverseAllowed={1} Left Allowed={2}, Right Allowed={3} {4}", (object[])(object)new Object[5]
							{
								(object)flag,
								(object)flag2,
								(object)logicalDeviceRelayHBridgeMomentary.Relay2Allowed,
								(object)logicalDeviceRelayHBridgeMomentary.Relay1Allowed,
								(Object)logicalDeviceRelayHBridgeMomentary
							}), Array.Empty<object>());
							TaggedLog.Debug("LogicalDeviceRelayHBridgeMomentary", String.Format("Command currently not allowed {0},  InTransit {1}/{2} {3}", (object[])(object)new Object[4]
							{
								(Object)<command>5__3,
								(object)((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).InTransitLockout,
								(object)((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).HazardousDuringInTransitLockout,
								(Object)logicalDeviceRelayHBridgeMomentary
							}), Array.Empty<object>());
							result = (CommandResult)11;
							goto end_IL_01dc;
							IL_04e9:
							if (logicalDeviceRelayHBridgeMomentary.UserClearRequired)
							{
								TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", "UserClearRequired, overriding current command with stop command.", Array.Empty<object>());
								logicalDeviceRelayHBridgeMomentary._deviceHasFaulted = true;
								<command>5__3 = logicalDeviceRelayHBridgeMomentary.CommandFactory.MakeRelayStopCommand();
							}
							if (logicalDeviceRelayHBridgeMomentary._deviceHasFaulted)
							{
								TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", "Device has faulted during this press, overriding current command with stop command.", Array.Empty<object>());
								<command>5__3 = logicalDeviceRelayHBridgeMomentary.CommandFactory.MakeRelayStopCommand();
							}
							if (logicalDeviceRelayHBridgeMomentary.CommandRelayEnergized != RelayHBridgeEnergized.None && logicalDeviceRelayHBridgeMomentary.CommandDirectionLastSetTimer.ElapsedMilliseconds > 800)
							{
								TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", String.Format("Performing auto stop as last direction command was received at {0}ms and must be received within {1}ms for {2}", (object)logicalDeviceRelayHBridgeMomentary.CommandDirectionLastSetTimer.ElapsedMilliseconds, (object)800, (object)((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceName), Array.Empty<object>());
								<command>5__3 = logicalDeviceRelayHBridgeMomentary.CommandFactory.MakeRelayStopCommand();
							}
							if (!<command>5__3.IsStopCommand || !((LogicalDevice<TRelayHBridgeStatus, ?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceStatus.IsStopped)
							{
								goto IL_0637;
							}
							lastSentCommand = logicalDeviceRelayHBridgeMomentary._lastSentCommand;
							val2 = ((lastSentCommand != null) ? new Nullable<bool>(lastSentCommand.IsStopCommand) : default(Nullable<bool>));
							if (!val2.HasValue || !val2.GetValueOrDefault() || logicalDeviceRelayHBridgeMomentary.UserClearRequired)
							{
								goto IL_0637;
							}
							TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", "Command is stop and relay is already stopped, returning CommandResult.Completed.", Array.Empty<object>());
							result = (CommandResult)0;
							goto end_IL_01dc;
							IL_02c4:
							if (!val.GetResult())
							{
								if (!logicalDeviceRelayHBridgeMomentary.Relay1Allowed && !logicalDeviceRelayHBridgeMomentary.Relay2Allowed)
								{
									<relay1Energized>5__4 = false;
									<relay2Energized>5__5 = false;
								}
								logicalDeviceRelayHBridgeMomentary.CommandRelayEnergized = LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability>.ResolveRelayEnergized(<relay1Energized>5__4, <relay2Energized>5__5);
								ref TRelayCommandFactory reference = ref logicalDeviceRelayHBridgeMomentary.CommandFactory;
								val3 = default(TRelayCommandFactory);
								if (val3 == null)
								{
									val3 = reference;
									reference = ref val3;
								}
								LogicalDeviceRelayHBridgeDirection relayDirection = new LogicalDeviceRelayHBridgeDirection(logicalDeviceRelayHBridgeMomentary.CommandRelayEnergized, ((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).LogicalId);
								<command>5__3 = reference.MakeRelayCommand(relayDirection);
								goto IL_04e9;
							}
							result = (CommandResult)0;
							goto end_IL_01dc;
							IL_03d8:
							if (!val.GetResult())
							{
								if (!logicalDeviceRelayHBridgeMomentary.Relay1Allowed && !logicalDeviceRelayHBridgeMomentary.Relay2Allowed)
								{
									<relay1Energized>5__4 = false;
									<relay2Energized>5__5 = false;
								}
								logicalDeviceRelayHBridgeMomentary.CommandRelayEnergized = LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability>.ResolveRelayEnergized(<relay1Energized>5__4, <relay2Energized>5__5);
								ref TRelayCommandFactory reference2 = ref logicalDeviceRelayHBridgeMomentary.CommandFactory;
								val3 = default(TRelayCommandFactory);
								if (val3 == null)
								{
									val3 = reference2;
									reference2 = ref val3;
								}
								LogicalDeviceRelayHBridgeDirection relayDirection2 = new LogicalDeviceRelayHBridgeDirection(logicalDeviceRelayHBridgeMomentary.CommandRelayEnergized, ((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).LogicalId);
								<command>5__3 = reference2.MakeRelayCommand(relayDirection2);
								goto IL_04e9;
							}
							result = (CommandResult)0;
							goto end_IL_01dc;
						}
						try
						{
							TaskAwaiter<CommandResult> val4;
							if (num == 2)
							{
								val4 = <>u__2;
								<>u__2 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								goto IL_080b;
							}
							if (num != 3)
							{
								if (((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceRelayHBridgeMomentary) is IDirectCommandMovement directCommandMovement)
								{
									val4 = directCommandMovement.SendDirectCommandRelayMomentary(logicalDeviceRelayHBridgeMomentary, <command>5__3.Command, <cancelSource>5__2.Token).GetAwaiter();
									if (!val4.IsCompleted)
									{
										num = (<>1__state = 2);
										<>u__2 = val4;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendDirectionCommand>d__80>(ref val4, ref this);
										return;
									}
									goto IL_080b;
								}
								val4 = logicalDeviceRelayHBridgeMomentary.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)<command>5__3, <cancelSource>5__2.Token, (Func<ILogicalDevice, CommandControl>)null, (CommandSendOption)1).GetAwaiter();
								if (!val4.IsCompleted)
								{
									num = (<>1__state = 3);
									<>u__2 = val4;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendDirectionCommand>d__80>(ref val4, ref this);
									return;
								}
							}
							else
							{
								val4 = <>u__2;
								<>u__2 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
							}
							CommandResult result2 = val4.GetResult();
							TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", String.Format("SendDirectionCommand Command={0} Result={1} CurrentState={2} LastSent: {3}ms", (object[])(object)new Object[4]
							{
								(Object)<command>5__3,
								(object)result2,
								(object)LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability>.ResolveRelayEnergized(((LogicalDevice<TRelayHBridgeStatus, ?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceStatus.Relay1State(((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).LogicalId), ((LogicalDevice<TRelayHBridgeStatus, ?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceStatus.Relay2State(((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).LogicalId)),
								(object)<lastSentCommandMs>5__6
							}), Array.Empty<object>());
							result = result2;
							goto end_IL_0777;
							IL_080b:
							CommandResult result3 = val4.GetResult();
							TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", String.Format("SendDirectionCommand[{0}] Command={1} Result={2} CurrentState={3} LastSent: {4}ms", (object[])(object)new Object[5]
							{
								(Object)"IDirectCommandMovement",
								(Object)<command>5__3,
								(object)result3,
								(object)LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability>.ResolveRelayEnergized(((LogicalDevice<TRelayHBridgeStatus, ?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceStatus.Relay1State(((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).LogicalId), ((LogicalDevice<TRelayHBridgeStatus, ?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceStatus.Relay2State(((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).LogicalId)),
								(object)<lastSentCommandMs>5__6
							}), Array.Empty<object>());
							result = result3;
							end_IL_0777:;
						}
						catch (Exception ex)
						{
							Exception ex2 = ex;
							TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", String.Format("SendDirectionCommand Command={0} Result={1} CurrentState={2} LastSent: {3}ms", (object[])(object)new Object[4]
							{
								(Object)<command>5__3,
								(Object)ex2.Message,
								(object)LogicalDeviceRelayHBridgeMomentary<TRelayHBridgeStatus, TRelayCommandFactory, TCapability>.ResolveRelayEnergized(((LogicalDevice<TRelayHBridgeStatus, ?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceStatus.Relay1State(((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).LogicalId), ((LogicalDevice<TRelayHBridgeStatus, ?>)(object)logicalDeviceRelayHBridgeMomentary).DeviceStatus.Relay2State(((LogicalDevice<?>)(object)logicalDeviceRelayHBridgeMomentary).LogicalId)),
								(object)<lastSentCommandMs>5__6
							}), Array.Empty<object>());
							result = (CommandResult)7;
						}
						end_IL_01dc:;
					}
					finally
					{
						if (num < 0 && <cancelSource>5__2 != null)
						{
							((IDisposable)<cancelSource>5__2).Dispose();
						}
					}
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<cancelSource>5__2 = null;
					<command>5__3 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<cancelSource>5__2 = null;
				<command>5__3 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceRelayHBridgeMomentary";

		public const int MsCommandDirectionAutoGetSessionTimeout = 1000;

		public const int MsCommandDirectionAutoStopTimeout = 800;

		public const int MsCommandTimeout = 5000;

		public const int MsSessionTimeout = 15000;

		protected Stopwatch CommandDirectionLastSetTimer = Stopwatch.StartNew();

		protected TRelayCommandFactory CommandFactory = new TRelayCommandFactory();

		protected ILogicalDeviceCommandRunnerIdsCan IdsCanCommandRunner;

		private RelayHBridgeEnergized _relayEnergized;

		private RelayHBridgeEnergized _commandRelayEnergized;

		private CancellationTokenSource _commandCancelSource = new CancellationTokenSource();

		private ILogicalDeviceRelayHBridgeCommand _lastSentCommand;

		private readonly Stopwatch _lastCommandSendTime = Stopwatch.StartNew();

		private bool _faultStatus;

		private bool _userClearRequired;

		private bool _deviceHasFaulted;

		private bool _isHoming;

		private DTC_ID _userMessageDtc;

		protected ILogicalDevicePidFixedPoint BatteryVoltagePidCan;

		public const int CommandErrorDelayTimeMs = 250;

		public const int RelayDirectionSendTimeMs = 500;

		public const int RelayDirectionSendTimeHighSpeedMs = 175;

		public const int MaxStopCommands = 5;

		public override bool ShouldAutoClearInTransitLockout
		{
			get
			{
				if (((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus.IsStopped)
				{
					return ((LogicalDevice<?>)(object)this).ShouldAutoClearInTransitLockout;
				}
				return false;
			}
		}

		public virtual bool CommandSessionActivated => IdsCanCommandRunner.CommandSessionActivated;

		public virtual bool IsAutoOperationInProgress => false;

		public virtual bool IsWindSensorAutoOperationInProgress => false;

		public virtual bool IsAutoOperation => false;

		public virtual bool SendDirectionRequired
		{
			[CompilerGenerated]
			get;
		} = true;

		public virtual bool AutoForwardAllowed => false;

		public virtual bool AutoReverseAllowed => false;

		public bool AreAutoCommandsSupported => ((LogicalDevice<?>)(object)this).DeviceCapability.AreAutoCommandsSupported;

		public bool IsHomingSupported => ((LogicalDevice<?>)(object)this).DeviceCapability.IsHomingSupported;

		public bool IsAwningSensorSupported => ((LogicalDevice<?>)(object)this).DeviceCapability.IsAwningSensorSupported;

		public RelayHBridgeDirectionVerbose DirectionVerbose => RelayEnergized.ConvertToVerboseDirection(((LogicalDevice<?>)(object)this).LogicalId);

		public RelayHBridgeDirectionVerbose CommandDirectionVerbose => CommandRelayEnergized.ConvertToVerboseDirection(((LogicalDevice<?>)(object)this).LogicalId);

		public DeviceCategory DeviceCategory => DeviceCategory.GetDeviceCategory(((LogicalDevice<?>)(object)this).LogicalId);

		public bool FaultStatus
		{
			get
			{
				return _faultStatus;
			}
			private set
			{
				((CommonNotifyPropertyChanged)this).SetBackingField<bool>(ref _faultStatus, value, "FaultStatus", Array.Empty<string>());
			}
		}

		public bool UserClearRequired
		{
			get
			{
				return _userClearRequired;
			}
			private set
			{
				((CommonNotifyPropertyChanged)this).SetBackingField<bool>(ref _userClearRequired, value, "UserClearRequired", Array.Empty<string>());
			}
		}

		public bool IsHoming
		{
			get
			{
				return _isHoming;
			}
			private set
			{
				((CommonNotifyPropertyChanged)this).SetBackingField<bool>(ref _isHoming, value, "IsHoming", Array.Empty<string>());
			}
		}

		public DTC_ID UserMessageDtc
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				return _userMessageDtc;
			}
			private set
			{
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				((CommonNotifyPropertyChanged)this).SetBackingField<DTC_ID>(ref _userMessageDtc, value, "UserMessageDtc", Array.Empty<string>());
			}
		}

		public RelayHBridgeEnergized RelayEnergized
		{
			get
			{
				return _relayEnergized;
			}
			private set
			{
				//IL_001a: Unknown result type (might be due to invalid IL or missing references)
				if (value != _relayEnergized)
				{
					if (value < RelayHBridgeEnergized.Relay2 || value > RelayHBridgeEnergized.Relay1)
					{
						throw new ArgumentException("Relay.Direction: value must be in the range of [-1,1].");
					}
					_relayEnergized = value;
					((CommonNotifyPropertyChanged)this).OnPropertyChanged("RelayEnergized");
					((CommonNotifyPropertyChanged)this).OnPropertyChanged("DirectionVerbose");
				}
			}
		}

		public RelayHBridgeEnergized CommandRelayEnergized
		{
			get
			{
				return _commandRelayEnergized;
			}
			private set
			{
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				if (value == _commandRelayEnergized)
				{
					CommandDirectionLastSetTimer.Restart();
					return;
				}
				if (value < RelayHBridgeEnergized.Relay2 || value > RelayHBridgeEnergized.Relay1)
				{
					throw new ArgumentException("Relay.CommandDirection: value must be in the range of [-1,1].");
				}
				_commandRelayEnergized = value;
				CommandDirectionLastSetTimer.Restart();
				((CommonNotifyPropertyChanged)this).OnPropertyChanged("CommandRelayEnergized");
				((CommonNotifyPropertyChanged)this).OnPropertyChanged("CommandDirectionVerbose");
			}
		}

		public bool Relay1Allowed
		{
			get
			{
				bool flag = ((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus.CommandForwardAllowed((ILogicalDeviceWithStatus<ILogicalDeviceRelayHBridgeStatus>)(object)this);
				bool flag2 = ((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus.CommandReverseAllowed((ILogicalDeviceWithStatus<ILogicalDeviceRelayHBridgeStatus>)(object)this);
				if (!(flag && flag2))
				{
					return RelayHBridgeEnergizedExtension.ConvertToRelayEnergized(flag, flag2, ((LogicalDevice<?>)(object)this).LogicalId) == RelayHBridgeEnergized.Relay1;
				}
				return true;
			}
		}

		public bool Relay2Allowed
		{
			get
			{
				bool flag = ((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus.CommandForwardAllowed((ILogicalDeviceWithStatus<ILogicalDeviceRelayHBridgeStatus>)(object)this);
				bool flag2 = ((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus.CommandReverseAllowed((ILogicalDeviceWithStatus<ILogicalDeviceRelayHBridgeStatus>)(object)this);
				if (!(flag && flag2))
				{
					return RelayHBridgeEnergizedExtension.ConvertToRelayEnergized(flag, flag2, ((LogicalDevice<?>)(object)this).LogicalId) == RelayHBridgeEnergized.Relay2;
				}
				return true;
			}
		}

		public virtual LogicalDeviceExScope VoltageMeasurementBatteryPidScope => (LogicalDeviceExScope)2;

		public virtual ILogicalDevicePidFixedPoint VoltageMeasurementBatteryPid
		{
			get
			{
				//IL_0014: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Expected O, but got Unknown
				//IL_0020: Expected O, but got Unknown
				ILogicalDevicePidFixedPoint obj = BatteryVoltagePidCan;
				if (obj == null)
				{
					LogicalDevicePidFixedPoint val = new LogicalDevicePidFixedPoint((FixedPointType)1, (ILogicalDevice)(object)this, PID.BATTERY_VOLTAGE, (LogicalDeviceSessionType)0, (Func<ulong, bool>)null);
					ILogicalDevicePidFixedPoint val2 = (ILogicalDevicePidFixedPoint)val;
					BatteryVoltagePidCan = (ILogicalDevicePidFixedPoint)val;
					obj = val2;
				}
				return obj;
			}
		}

		public bool IsVoltagePidReadSupported => true;

		public static bool HighSpeedTransmission
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		}

		public virtual bool AutoForwardCommand()
		{
			return false;
		}

		public virtual bool AutoReverseCommand()
		{
			return false;
		}

		public LogicalDeviceRelayHBridgeMomentary(ILogicalDeviceId logicalDeviceId, TCapability capability, ILogicalDeviceService service = null, bool isFunctionClassChangeable = false)
		{
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			//IL_0021: Expected O, but got Unknown
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			//IL_004a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0055: Expected O, but got Unknown
			//IL_0055: Unknown result type (might be due to invalid IL or missing references)
			//IL_0060: Expected O, but got Unknown
			//IL_0065: Expected O, but got Unknown
			//IL_0072: Unknown result type (might be due to invalid IL or missing references)
			//IL_007c: Expected O, but got Unknown
			((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this)..ctor(logicalDeviceId, MakeNewStatus(), capability, service, isFunctionClassChangeable);
			LogicalDeviceCommandRunnerIdsCan val = new LogicalDeviceCommandRunnerIdsCan((ILogicalDevice)(object)this);
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).CommandProcessingTime = 5000u;
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).SessionKeepAliveTime = 15000u;
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)val;
			((INotifyPropertyChanged)IdsCanCommandRunner).PropertyChanged += new PropertyChangedEventHandler(OnCommandRunnerPropertyChanged);
		}

		public static TRelayHBridgeStatus MakeNewStatus()
		{
			return new TRelayHBridgeStatus();
		}

		protected void OnCommandRunnerPropertyChanged(object sender, PropertyChangedEventArgs e)
		{
			if (e.PropertyName == "CommandSessionActivated")
			{
				((CommonNotifyPropertyChanged)this).OnPropertyChanged("CommandSessionActivated");
			}
		}

		public override void OnDeviceOnlineChanged()
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDevice<?>)(object)this).OnDeviceOnlineChanged();
			if ((int)((LogicalDevice<?>)(object)this).ActiveConnection == 0 && !((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus.IsStopped)
			{
				TaggedLog.Debug("LogicalDeviceRelayHBridgeMomentary", String.Concat("Changing relay status to stopped as it went offline ", ((LogicalDevice<?>)(object)this).DeviceName), Array.Empty<object>());
				ILogicalDeviceRelayHBridgeStatus logicalDeviceRelayHBridgeStatus = ((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus.CopyStatus();
				logicalDeviceRelayHBridgeStatus.SetState(relay1State: false, relay2State: false, ((LogicalDevice<?>)(object)this).LogicalId);
				((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((IDeviceDataPacketMutable)logicalDeviceRelayHBridgeStatus).Data, ((IDeviceDataPacket)logicalDeviceRelayHBridgeStatus).Size);
			}
		}

		public override void OnDeviceStatusChanged()
		{
			//IL_0085: Unknown result type (might be due to invalid IL or missing references)
			RelayEnergized = ResolveRelayEnergized(((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus.Relay1State(((LogicalDevice<?>)(object)this).LogicalId), ((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus.Relay2State(((LogicalDevice<?>)(object)this).LogicalId));
			FaultStatus = ((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus.IsFaulted;
			UserClearRequired = ((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus.UserClearRequired;
			IsHoming = ((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus.IsHoming;
			UserMessageDtc = ((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus.UserMessageDtc;
			((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).OnDeviceStatusChanged();
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("Relay1Allowed");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("Relay2Allowed");
		}

		protected override void DebugUpdateDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, uint dataLength, string optionalText = "")
		{
			RelayHBridgeDirection hBridgeDirection = ((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus.GetHBridgeDirection(((LogicalDevice<?>)(object)this).LogicalId);
			TaggedLog.Information("LogicalDeviceRelayHBridgeMomentary", String.Format("Data Changed {0}: {1} Direction = {2}, Relay1(right) = {3}, Relay2(left) = {4}, Faults = {5} {6}", (object[])(object)new Object[7]
			{
				(Object)((LogicalDevice<?>)(object)this).LogicalId,
				(Object)((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus,
				(object)hBridgeDirection,
				(object)((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus.Relay1State(((LogicalDevice<?>)(object)this).LogicalId),
				(object)((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus.Relay2State(((LogicalDevice<?>)(object)this).LogicalId),
				(object)((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).DeviceStatus.IsFaulted,
				(Object)optionalText
			}), Array.Empty<object>());
		}

		public override void UpdateInTransitLockout()
		{
			((LogicalDevice<?>)(object)this).UpdateInTransitLockout();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("Relay1Allowed", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("Relay2Allowed", true);
		}

		public virtual Task<CommandResult> TryAutoReverseAsync(CancellationToken cancellationToken)
		{
			return Task.FromResult<CommandResult>((CommandResult)11);
		}

		public virtual Task<CommandResult> TryAutoForwardAsync(CancellationToken cancellationToken)
		{
			return Task.FromResult<CommandResult>((CommandResult)11);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		protected Task<CommandResult> SendDirectionCommand(HBridgeCommand hBridgeCommand, CancellationToken callerCancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<SendDirectionCommand>d__80 <SendDirectionCommand>d__ = default(<SendDirectionCommand>d__80);
			<SendDirectionCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendDirectionCommand>d__.<>4__this = this;
			<SendDirectionCommand>d__.hBridgeCommand = hBridgeCommand;
			<SendDirectionCommand>d__.callerCancelToken = callerCancelToken;
			<SendDirectionCommand>d__.<>1__state = -1;
			<SendDirectionCommand>d__.<>t__builder.Start<<SendDirectionCommand>d__80>(ref <SendDirectionCommand>d__);
			return <SendDirectionCommand>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		protected Task ActivateSession(CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ActivateSession>d__81 <ActivateSession>d__ = default(<ActivateSession>d__81);
			<ActivateSession>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<ActivateSession>d__.<>4__this = this;
			<ActivateSession>d__.cancelToken = cancelToken;
			<ActivateSession>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Start<<ActivateSession>d__81>(ref <ActivateSession>d__);
			return ((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Task;
		}

		protected void DeactivateSession()
		{
			IdsCanCommandRunner.CommandDeactivateSession(true);
		}

		public void TryAbortAutoOperation()
		{
			((LogicalDevice<?>)(object)this).DeviceService.GetExclusiveOperation<IRelayAutoOperations>().RequestStop();
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		protected Task<bool> AutoClearFaultIfNeeded(bool relay1Energized, bool relay2Energized, bool checkOnly, CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<AutoClearFaultIfNeeded>d__84 <AutoClearFaultIfNeeded>d__ = default(<AutoClearFaultIfNeeded>d__84);
			<AutoClearFaultIfNeeded>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<AutoClearFaultIfNeeded>d__.<>4__this = this;
			<AutoClearFaultIfNeeded>d__.relay1Energized = relay1Energized;
			<AutoClearFaultIfNeeded>d__.relay2Energized = relay2Energized;
			<AutoClearFaultIfNeeded>d__.checkOnly = checkOnly;
			<AutoClearFaultIfNeeded>d__.<>1__state = -1;
			<AutoClearFaultIfNeeded>d__.<>t__builder.Start<<AutoClearFaultIfNeeded>d__84>(ref <AutoClearFaultIfNeeded>d__);
			return <AutoClearFaultIfNeeded>d__.<>t__builder.Task;
		}

		protected static RelayHBridgeEnergized ResolveRelayEnergized(bool relay1, bool relay2)
		{
			if (relay1 == relay2)
			{
				return RelayHBridgeEnergized.None;
			}
			if (!relay1)
			{
				return RelayHBridgeEnergized.Relay2;
			}
			return RelayHBridgeEnergized.Relay1;
		}

		public override bool Rename(FUNCTION_NAME newFunctionName, int newFunctionInstance)
		{
			bool num = ((LogicalDevice<?>)(object)this).Rename(newFunctionName, newFunctionInstance);
			if (num)
			{
				((CommonNotifyPropertyChanged)this).OnPropertyChanged("DirectionVerbose");
				((CommonNotifyPropertyChanged)this).OnPropertyChanged("CommandDirectionVerbose");
			}
			return num;
		}

		public Task<float> ReadVoltageMeasurementAsync(CancellationToken cancellationToken)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return LogicalDeviceVoltageExtension.ReadVoltageMeasurementAsync(VoltageMeasurementBatteryPid, cancellationToken);
		}

		public override void Dispose(bool disposing)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Expected O, but got Unknown
			try
			{
				((INotifyPropertyChanged)IdsCanCommandRunner).PropertyChanged -= new PropertyChangedEventHandler(OnCommandRunnerPropertyChanged);
			}
			catch (Object)
			{
			}
			CancellationTokenSource commandCancelSource = _commandCancelSource;
			if (commandCancelSource != null)
			{
				CancellationTokenSourceExtension.CancelAndDispose(commandCancelSource);
			}
			_commandCancelSource = null;
			ILogicalDeviceCommandRunnerIdsCan idsCanCommandRunner = IdsCanCommandRunner;
			if (idsCanCommandRunner != null)
			{
				((ICommonDisposable)idsCanCommandRunner).TryDispose();
			}
			((LogicalDevice<TRelayHBridgeStatus, ?>)(object)this).Dispose(disposing);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task PerformMovementOperationAsync(RelayHBridgeDirection direction, Action<RelayMovementStatus> updateRelayMovementStatus, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<PerformMovementOperationAsync>d__104 <PerformMovementOperationAsync>d__ = default(<PerformMovementOperationAsync>d__104);
			<PerformMovementOperationAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<PerformMovementOperationAsync>d__.<>4__this = this;
			<PerformMovementOperationAsync>d__.direction = direction;
			<PerformMovementOperationAsync>d__.updateRelayMovementStatus = updateRelayMovementStatus;
			<PerformMovementOperationAsync>d__.cancellationToken = cancellationToken;
			<PerformMovementOperationAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <PerformMovementOperationAsync>d__.<>t__builder)).Start<<PerformMovementOperationAsync>d__104>(ref <PerformMovementOperationAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <PerformMovementOperationAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task PerformHomeResetOperationAsync(Action<RelayOperationStatus> updateRelayHomeStatus, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<PerformHomeResetOperationAsync>d__105 <PerformHomeResetOperationAsync>d__ = default(<PerformHomeResetOperationAsync>d__105);
			<PerformHomeResetOperationAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<PerformHomeResetOperationAsync>d__.<>4__this = this;
			<PerformHomeResetOperationAsync>d__.updateRelayHomeStatus = updateRelayHomeStatus;
			<PerformHomeResetOperationAsync>d__.cancellationToken = cancellationToken;
			<PerformHomeResetOperationAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <PerformHomeResetOperationAsync>d__.<>t__builder)).Start<<PerformHomeResetOperationAsync>d__105>(ref <PerformHomeResetOperationAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <PerformHomeResetOperationAsync>d__.<>t__builder)).Task;
		}

		public bool IsForwardRelayEnergized()
		{
			return RelayEnergized == ForwardRelay();
		}

		public bool IsReverseRelayEnergized()
		{
			return RelayEnergized == ReverseRelay();
		}

		public bool IsForwardRelayAllowed()
		{
			if (ForwardRelay() != RelayHBridgeEnergized.Relay1 || !Relay1Allowed)
			{
				if (ForwardRelay() == RelayHBridgeEnergized.Relay2)
				{
					return Relay2Allowed;
				}
				return false;
			}
			return true;
		}

		public bool IsReverseRelayAllowed()
		{
			if (ReverseRelay() != RelayHBridgeEnergized.Relay1 || !Relay1Allowed)
			{
				if (ReverseRelay() == RelayHBridgeEnergized.Relay2)
				{
					return Relay2Allowed;
				}
				return false;
			}
			return true;
		}

		private RelayHBridgeEnergized ForwardRelay()
		{
			return RelayHBridgeDirection.Forward.ConvertToRelayEnergized(((LogicalDevice<?>)(object)this).LogicalId);
		}

		private RelayHBridgeEnergized ReverseRelay()
		{
			return RelayHBridgeDirection.Reverse.ConvertToRelayEnergized(((LogicalDevice<?>)(object)this).LogicalId);
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<?>)(object)this).LastReceivedNetworkStatus;
		}
	}
	public class MomentaryRelayException : Exception
	{
		public MomentaryRelayException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}
	}
	public class MomentaryRelayNoActiveSessionException : MomentaryRelayException
	{
		public MomentaryRelayNoActiveSessionException(Exception? innerException = null)
			: base("Active Session is required", innerException)
		{
		}
	}
	public class MomentaryRelayOperationInProgressException : MomentaryRelayException
	{
		public MomentaryRelayOperationInProgressException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}
	}
	public class MomentaryRelayOperationFailedException : MomentaryRelayException
	{
		public MomentaryRelayOperationFailedException(Exception? innerException = null)
			: base("Momentary Relay Operation failed", innerException)
		{
		}
	}
	public class MomentaryRelayAutoOperationFailedException : MomentaryRelayException
	{
		public MomentaryRelayAutoOperationFailedException(Exception? innerException = null)
			: base("Momentary Relay Auto Operation failed", innerException)
		{
		}
	}
	public class MomentaryRelayNoActiveConnectionException : MomentaryRelayException
	{
		public MomentaryRelayNoActiveConnectionException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}

		public MomentaryRelayNoActiveConnectionException(Exception? innerException = null)
			: base("No Active Connection (Momentary Relay offline)", innerException)
		{
		}
	}
	public class MomentaryRelayInLockoutException : MomentaryRelayException
	{
		public MomentaryRelayInLockoutException(Exception? innerException = null)
			: base("No Active Connection (Momentary Relay offline)", innerException)
		{
		}
	}
	public class MomentaryRelayCommandResultException : MomentaryRelayException
	{
		public MomentaryRelayCommandResultException(CommandResult commandResult, Exception? innerException = null)
			: base(String.Format("Momentary Relay failed with command result: {0}", (object)commandResult), innerException)
		{
		}//IL_0006: Unknown result type (might be due to invalid IL or missing references)

	}
	public class MomentaryRelayDirectionException : MomentaryRelayException
	{
		public MomentaryRelayDirectionException(RelayHBridgeDirection direction, Exception? innerException = null)
			: base(String.Format("Momentary Relay direction: {0} not supported.", (object)direction), innerException)
		{
		}
	}
	public static class RelayHBridgeDirectionText : Object
	{
		public const string Forward = "FORWARD";

		public const string Extend = "EXTEND";

		public const string Clockwise = "CLOCKWISE";

		public const string Out = "OUT";

		public const string Up = "UP";

		public const string Close = "CLOSE";

		public const string Lock = "LOCK";

		public const string Start = "START";

		public const string Raise = "RAISE";

		public const string None = "NONE";

		public const string Reverse = "REVERSE";

		public const string Retract = "RETRACT";

		public const string CounterClockwise = "COUNTER CLOCKWISE";

		public const string In = "IN";

		public const string Down = "DOWN";

		public const string Open = "OPEN";

		public const string Unlock = "UNLOCK";

		public const string Stop = "STOP";

		public const string Lower = "LOWER";
	}
	public enum RelayHBridgeOutputState : Enum
	{
		Stop = 0,
		Forward = 2,
		Reverse = 3,
		Homing = 8,
		Unknown = -1
	}
	public enum RelayHBridgeDirection : Enum
	{
		Stop = 0,
		Forward = 2,
		Reverse = 3,
		Unknown = -1
	}
	public enum HBridgeCommand : Enum
	{
		Stop = 0,
		Forward = 1,
		Reverse = 2,
		ClearUserClearRequiredLatch = 3,
		HomeReset = 4,
		AutoForward = 5,
		AutoReverse = 6,
		Unknown = 255
	}
	[AttributeUsage(/*Could not decode attribute arguments.*/)]
	public class RelayHBridgeDirectionVerboseLabel : Attribute
	{
		[field: CompilerGenerated]
		public string Label
		{
			[CompilerGenerated]
			get;
		}

		public RelayHBridgeDirectionVerboseLabel(string label)
		{
			Label = label;
		}
	}
	public enum RelayHBridgeDirectionVerbose : Enum
	{
		[RelayHBridgeDirectionVerboseLabel("FORWARD")]
		Foward = 1,
		[RelayHBridgeDirectionVerboseLabel("EXTEND")]
		Extend = 2,
		[RelayHBridgeDirectionVerboseLabel("CLOCKWISE")]
		Clockwise = 3,
		[RelayHBridgeDirectionVerboseLabel("OUT")]
		Out = 4,
		[RelayHBridgeDirectionVerboseLabel("UP")]
		Up = 5,
		[RelayHBridgeDirectionVerboseLabel("CLOSE")]
		Close = 6,
		[RelayHBridgeDirectionVerboseLabel("LOCK")]
		Lock = 7,
		[RelayHBridgeDirectionVerboseLabel("START")]
		Start = 8,
		[RelayHBridgeDirectionVerboseLabel("RAISE")]
		Raise = 9,
		[RelayHBridgeDirectionVerboseLabel("NONE")]
		None = 0,
		[RelayHBridgeDirectionVerboseLabel("REVERSE")]
		Reverse = -1,
		[RelayHBridgeDirectionVerboseLabel("RETRACT")]
		Retract = -2,
		[RelayHBridgeDirectionVerboseLabel("COUNTER CLOCKWISE")]
		CounterClockwise = -3,
		[RelayHBridgeDirectionVerboseLabel("IN")]
		In = -4,
		[RelayHBridgeDirectionVerboseLabel("DOWN")]
		Down = -5,
		[RelayHBridgeDirectionVerboseLabel("OPEN")]
		Open = -6,
		[RelayHBridgeDirectionVerboseLabel("UNLOCK")]
		Unlock = -7,
		[RelayHBridgeDirectionVerboseLabel("STOP")]
		Stop = -8,
		[RelayHBridgeDirectionVerboseLabel("LOWER")]
		Lower = -9
	}
	public static class RelayHBridgeDirectionExtension : Object
	{
		public static RelayHBridgeEnergized ConvertToRelayEnergized(this RelayHBridgeDirection direction, ILogicalDeviceId logicalId)
		{
			return direction switch
			{
				RelayHBridgeDirection.Forward => RelayHBridgeEnergizedExtension.ConvertToRelayEnergized(isForward: true, isReverse: false, logicalId), 
				RelayHBridgeDirection.Reverse => RelayHBridgeEnergizedExtension.ConvertToRelayEnergized(isForward: false, isReverse: true, logicalId), 
				_ => RelayHBridgeEnergizedExtension.ConvertToRelayEnergized(isForward: false, isReverse: false, logicalId), 
			};
		}

		public static RelayHBridgeDirection ConvertToHBridgeDirection(bool relay1, bool relay2, ILogicalDeviceId logicalId)
		{
			if (relay1 == relay2)
			{
				return RelayHBridgeDirection.Stop;
			}
			RelayHBridgeEnergized relayHBridgeEnergized = (relay1 ? RelayHBridgeEnergized.Relay1 : RelayHBridgeEnergized.Relay2);
			if (relayHBridgeEnergized == RelayHBridgeDirection.Forward.ConvertToRelayEnergized(logicalId))
			{
				return RelayHBridgeDirection.Forward;
			}
			if (relayHBridgeEnergized == RelayHBridgeDirection.Reverse.ConvertToRelayEnergized(logicalId))
			{
				return RelayHBridgeDirection.Reverse;
			}
			return RelayHBridgeDirection.Stop;
		}

		public static ValueTuple<bool, bool> ConvertToRelay1Relay2(this RelayHBridgeDirection direction, ILogicalDeviceId logicalId)
		{
			//IL_0028: Unknown result type (might be due to invalid IL or missing references)
			//IL_0030: Unknown result type (might be due to invalid IL or missing references)
			//IL_0020: Unknown result type (might be due to invalid IL or missing references)
			return (ValueTuple<bool, bool>)(direction.ConvertToRelayEnergized(logicalId) switch
			{
				RelayHBridgeEnergized.Relay1 => new ValueTuple<bool, bool>(true, false), 
				RelayHBridgeEnergized.Relay2 => new ValueTuple<bool, bool>(false, true), 
				_ => new ValueTuple<bool, bool>(false, false), 
			});
		}
	}
	public enum RelayHBridgeEnergized : Enum
	{
		Relay1 = 1,
		None = 0,
		Relay2 = -1
	}
	public static class RelayHBridgeEnergizedExtension : Object
	{
		public static RelayHBridgeEnergized ConvertToRelayEnergized(bool isForward, bool isReverse, ILogicalDeviceId logicalId)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0012: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0019: Invalid comparison between Unknown and I4
			//IL_006d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0070: Invalid comparison between Unknown and I4
			//IL_004e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0051: Invalid comparison between Unknown and I4
			//IL_00a5: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a8: Invalid comparison between Unknown and I4
			//IL_0055: Unknown result type (might be due to invalid IL or missing references)
			//IL_0057: Invalid comparison between Unknown and I4
			//IL_00ac: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ae: Invalid comparison between Unknown and I4
			//IL_005b: Unknown result type (might be due to invalid IL or missing references)
			//IL_005d: Invalid comparison between Unknown and I4
			//IL_00b2: Unknown result type (might be due to invalid IL or missing references)
			//IL_00b4: Invalid comparison between Unknown and I4
			//IL_0061: Unknown result type (might be due to invalid IL or missing references)
			//IL_0064: Invalid comparison between Unknown and I4
			//IL_00b8: Unknown result type (might be due to invalid IL or missing references)
			//IL_00bb: Invalid comparison between Unknown and I4
			if (isForward == isReverse)
			{
				return RelayHBridgeEnergized.None;
			}
			FUNCTION_CLASS val = (FUNCTION_CLASS)((logicalId != null) ? ((int)logicalId.FunctionClass) : 0);
			if (isReverse)
			{
				if ((int)val == 27)
				{
					if ((((logicalId == null) ? null : logicalId.FunctionName?.Name) ?? "").IndexOf("ramp", (StringComparison)5) < 0)
					{
						return RelayHBridgeEnergized.Relay2;
					}
					return RelayHBridgeEnergized.Relay1;
				}
				if ((int)val == 24)
				{
					return RelayHBridgeEnergized.Relay1;
				}
				if ((int)val == 5)
				{
					return RelayHBridgeEnergized.Relay1;
				}
				if ((int)val == 6)
				{
					return RelayHBridgeEnergized.Relay1;
				}
				if ((int)val == 14)
				{
					return RelayHBridgeEnergized.Relay1;
				}
				return RelayHBridgeEnergized.Relay2;
			}
			if (isForward)
			{
				if ((int)val == 27)
				{
					if ((((logicalId == null) ? null : logicalId.FunctionName?.Name) ?? "").IndexOf("ramp", (StringComparison)5) < 0)
					{
						return RelayHBridgeEnergized.Relay1;
					}
					return RelayHBridgeEnergized.Relay2;
				}
				if ((int)val == 24)
				{
					return RelayHBridgeEnergized.Relay2;
				}
				if ((int)val == 5)
				{
					return RelayHBridgeEnergized.Relay2;
				}
				if ((int)val == 6)
				{
					return RelayHBridgeEnergized.Relay2;
				}
				if ((int)val == 14)
				{
					return RelayHBridgeEnergized.Relay2;
				}
				return RelayHBridgeEnergized.Relay1;
			}
			return RelayHBridgeEnergized.None;
		}

		public static RelayHBridgeDirectionVerbose ConvertToVerboseDirection(this RelayHBridgeEnergized relayEnergized, ILogicalDeviceId logicalId)
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0011: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0018: Invalid comparison between Unknown and I4
			//IL_008e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0090: Invalid comparison between Unknown and I4
			//IL_001c: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Invalid comparison between Unknown and I4
			//IL_0095: Unknown result type (might be due to invalid IL or missing references)
			//IL_0098: Invalid comparison between Unknown and I4
			//IL_0024: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Invalid comparison between Unknown and I4
			//IL_009d: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a0: Invalid comparison between Unknown and I4
			//IL_005d: Unknown result type (might be due to invalid IL or missing references)
			//IL_005f: Invalid comparison between Unknown and I4
			//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d8: Invalid comparison between Unknown and I4
			//IL_0063: Unknown result type (might be due to invalid IL or missing references)
			//IL_0066: Invalid comparison between Unknown and I4
			//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e0: Invalid comparison between Unknown and I4
			//IL_006b: Unknown result type (might be due to invalid IL or missing references)
			//IL_006d: Invalid comparison between Unknown and I4
			//IL_00e4: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e6: Invalid comparison between Unknown and I4
			//IL_0072: Unknown result type (might be due to invalid IL or missing references)
			//IL_0074: Invalid comparison between Unknown and I4
			//IL_00ea: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ec: Invalid comparison between Unknown and I4
			//IL_0079: Unknown result type (might be due to invalid IL or missing references)
			//IL_007c: Invalid comparison between Unknown and I4
			//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
			//IL_00f3: Invalid comparison between Unknown and I4
			//IL_0080: Unknown result type (might be due to invalid IL or missing references)
			//IL_0083: Invalid comparison between Unknown and I4
			//IL_00f8: Unknown result type (might be due to invalid IL or missing references)
			//IL_00fb: Invalid comparison between Unknown and I4
			if (relayEnergized == RelayHBridgeEnergized.None)
			{
				return RelayHBridgeDirectionVerbose.None;
			}
			FUNCTION_CLASS val = (FUNCTION_CLASS)((logicalId != null) ? ((int)logicalId.FunctionClass) : 0);
			switch (relayEnergized)
			{
			case RelayHBridgeEnergized.Relay1:
				if ((int)val == 2)
				{
					return RelayHBridgeDirectionVerbose.Extend;
				}
				if ((int)val == 12)
				{
					return RelayHBridgeDirectionVerbose.Raise;
				}
				if ((int)val == 27)
				{
					if ((((logicalId == null) ? null : logicalId.FunctionName?.Name) ?? "").IndexOf("ramp", (StringComparison)5) < 0)
					{
						return RelayHBridgeDirectionVerbose.Lock;
					}
					return RelayHBridgeDirectionVerbose.Open;
				}
				if ((int)val == 3)
				{
					return RelayHBridgeDirectionVerbose.Lock;
				}
				if ((int)val == 24)
				{
					return RelayHBridgeDirectionVerbose.Retract;
				}
				if ((int)val == 5)
				{
					return RelayHBridgeDirectionVerbose.Stop;
				}
				if ((int)val == 6)
				{
					return RelayHBridgeDirectionVerbose.Retract;
				}
				if ((int)val == 10)
				{
					return RelayHBridgeDirectionVerbose.Out;
				}
				if ((int)val == 14)
				{
					return RelayHBridgeDirectionVerbose.Open;
				}
				return RelayHBridgeDirectionVerbose.Foward;
			case RelayHBridgeEnergized.Relay2:
				if ((int)val == 2)
				{
					return RelayHBridgeDirectionVerbose.Retract;
				}
				if ((int)val == 12)
				{
					return RelayHBridgeDirectionVerbose.Lower;
				}
				if ((int)val == 27)
				{
					if ((((logicalId == null) ? null : logicalId.FunctionName?.Name) ?? "").IndexOf("ramp", (StringComparison)5) < 0)
					{
						return RelayHBridgeDirectionVerbose.Unlock;
					}
					return RelayHBridgeDirectionVerbose.Close;
				}
				if ((int)val == 3)
				{
					return RelayHBridgeDirectionVerbose.Unlock;
				}
				if ((int)val == 24)
				{
					return RelayHBridgeDirectionVerbose.Extend;
				}
				if ((int)val == 5)
				{
					return RelayHBridgeDirectionVerbose.Start;
				}
				if ((int)val == 6)
				{
					return RelayHBridgeDirectionVerbose.Extend;
				}
				if ((int)val == 10)
				{
					return RelayHBridgeDirectionVerbose.In;
				}
				if ((int)val == 14)
				{
					return RelayHBridgeDirectionVerbose.Close;
				}
				return RelayHBridgeDirectionVerbose.Reverse;
			default:
				return RelayHBridgeDirectionVerbose.None;
			}
		}

		public static RelayHBridgeDirection ConvertToDirection(this RelayHBridgeEnergized relayEnergized, ILogicalDeviceId logicalId)
		{
			return RelayHBridgeDirectionExtension.ConvertToHBridgeDirection(relayEnergized == RelayHBridgeEnergized.Relay1, relayEnergized == RelayHBridgeEnergized.Relay2, logicalId);
		}
	}
	public class LogicalDeviceRelayHBridgeCommandFactoryMomentaryType1 : Object, ILogicalDeviceRelayHBridgeCommandFactory
	{
		public ILogicalDeviceRelayHBridgeCommand MakeRelayCommand(LogicalDeviceRelayHBridgeDirection relayDirection)
		{
			return new LogicalDeviceRelayHBridgeMomentaryCommandType1(relayDirection, clearFault: false);
		}

		public ILogicalDeviceRelayHBridgeCommand MakeRelayStopCommand()
		{
			return new LogicalDeviceRelayHBridgeMomentaryCommandType1(clearFault: false);
		}

		public ILogicalDeviceRelayHBridgeCommand MakeClearFaultCommand()
		{
			return new LogicalDeviceRelayHBridgeMomentaryCommandType1(clearFault: true);
		}

		public ILogicalDeviceRelayHBridgeCommand MakeHomeResetCommand()
		{
			return null;
		}

		public ILogicalDeviceRelayHBridgeCommand MakeAutoForwardCommand()
		{
			return null;
		}

		public ILogicalDeviceRelayHBridgeCommand MakeAutoReverseCommand()
		{
			return null;
		}
	}
	public class LogicalDeviceRelayHBridgeMomentaryCommandType1 : LogicalDeviceCommandPacket, ILogicalDeviceRelayHBridgeCommand, IDeviceCommandPacket, IDeviceDataPacket, IEquatable<LogicalDeviceCommandPacket>
	{
		public const BasicBitMask ClearingFaultBit = (BasicBitMask)64;

		public const BasicBitMask Relay1Bit = (BasicBitMask)1;

		public const BasicBitMask Relay2Bit = (BasicBitMask)4;

		public bool ClearingFault => ((LogicalDeviceCommandPacket)this).GetBit((BasicBitMask)64);

		public bool Latching => false;

		public bool TurningOnRelay1 => ((LogicalDeviceCommandPacket)this).GetBit((BasicBitMask)1);

		public bool TurningOnRelay2 => ((LogicalDeviceCommandPacket)this).GetBit((BasicBitMask)4);

		[field: CompilerGenerated]
		public RelayHBridgeDirection Direction
		{
			[CompilerGenerated]
			get;
		}

		public HBridgeCommand Command
		{
			get
			{
				if (ClearingFault)
				{
					return HBridgeCommand.ClearUserClearRequiredLatch;
				}
				return Direction switch
				{
					RelayHBridgeDirection.Forward => HBridgeCommand.Forward, 
					RelayHBridgeDirection.Reverse => HBridgeCommand.Reverse, 
					RelayHBridgeDirection.Stop => HBridgeCommand.Stop, 
					_ => HBridgeCommand.Stop, 
				};
			}
		}

		public bool IsForwardCommand => Direction == RelayHBridgeDirection.Forward;

		public bool IsReverseCommand => Direction == RelayHBridgeDirection.Reverse;

		public bool IsStopCommand
		{
			get
			{
				if (!TurningOnRelay1 && !TurningOnRelay2)
				{
					return !ClearingFault;
				}
				return false;
			}
		}

		public bool IsAutoForwardCommand => Command == HBridgeCommand.AutoForward;

		public bool IsAutoReverseCommand => Command == HBridgeCommand.AutoReverse;

		public bool IsHomeResetCommand => false;

		public LogicalDeviceRelayHBridgeMomentaryCommandType1(bool clearFault)
			: base((byte)0, (byte)0, 200)
		{
			LogicalDeviceCommandPacket.SetBit(ref ((LogicalDeviceCommandPacket)this).Data[0], (BasicBitMask)1, false);
			LogicalDeviceCommandPacket.SetBit(ref ((LogicalDeviceCommandPacket)this).Data[0], (BasicBitMask)4, false);
			LogicalDeviceCommandPacket.SetBit(ref ((LogicalDeviceCommandPacket)this).Data[0], (BasicBitMask)64, clearFault);
			Direction = RelayHBridgeDirection.Stop;
		}

		public LogicalDeviceRelayHBridgeMomentaryCommandType1(ILogicalDeviceId logicalId, bool relay1, bool relay2, bool clearFault)
			: base((byte)0, (byte)0, 200)
		{
			LogicalDeviceCommandPacket.SetBit(ref ((LogicalDeviceCommandPacket)this).Data[0], (BasicBitMask)1, relay1);
			LogicalDeviceCommandPacket.SetBit(ref ((LogicalDeviceCommandPacket)this).Data[0], (BasicBitMask)4, relay2);
			LogicalDeviceCommandPacket.SetBit(ref ((LogicalDeviceCommandPacket)this).Data[0], (BasicBitMask)64, clearFault);
			Direction = RelayHBridgeDirectionExtension.ConvertToHBridgeDirection(relay1, relay2, logicalId);
		}

		public LogicalDeviceRelayHBridgeMomentaryCommandType1(LogicalDeviceRelayHBridgeDirection relayDirection, bool clearFault)
			: base((byte)0, (byte)0, 200)
		{
			bool flag = relayDirection.RelayEnergized == RelayHBridgeEnergized.Relay1;
			bool flag2 = relayDirection.RelayEnergized == RelayHBridgeEnergized.Relay2;
			LogicalDeviceCommandPacket.SetBit(ref ((LogicalDeviceCommandPacket)this).Data[0], (BasicBitMask)1, flag);
			LogicalDeviceCommandPacket.SetBit(ref ((LogicalDeviceCommandPacket)this).Data[0], (BasicBitMask)4, flag2);
			LogicalDeviceCommandPacket.SetBit(ref ((LogicalDeviceCommandPacket)this).Data[0], (BasicBitMask)64, clearFault);
			Direction = RelayHBridgeDirectionExtension.ConvertToHBridgeDirection(flag, flag2, relayDirection.LogicalId);
		}

		public LogicalDeviceRelayHBridgeMomentaryCommandType1(ILogicalDeviceId logicalId, byte data)
			: base((byte)0, data, 200)
		{
			Direction = RelayHBridgeDirectionExtension.ConvertToHBridgeDirection(TurningOnRelay1, TurningOnRelay1, logicalId);
		}

		public static LogicalDeviceRelayHBridgeMomentaryCommandType1 MakeTurnOffRelaysCommand(bool clearFault = false)
		{
			return new LogicalDeviceRelayHBridgeMomentaryCommandType1(clearFault);
		}

		public override string ToString()
		{
			if (IsStopCommand)
			{
				return "CommandRelayStop";
			}
			if (ClearingFault)
			{
				return "CommandRelayClearFault";
			}
			if (TurningOnRelay1)
			{
				return "CommandRelay1On";
			}
			if (TurningOnRelay2)
			{
				return "CommandRelay2On";
			}
			return "CommandUnknown";
		}
	}
	public class LogicalDeviceRelayHBridgeMomentaryType1 : LogicalDeviceRelayHBridgeMomentary<LogicalDeviceRelayHBridgeStatusType1, LogicalDeviceRelayHBridgeCommandFactoryMomentaryType1, LogicalDeviceRelayCapabilityType1>
	{
		private const string LogTag = "LogicalDeviceRelayHBridgeMomentaryType1";

		public LogicalDeviceRelayHBridgeMomentaryType1(ILogicalDeviceId logicalDeviceId, LogicalDeviceRelayCapabilityType1 capability, ILogicalDeviceService service = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, capability, service, isFunctionClassChangeable)
		{
		}
	}
	public class LogicalDeviceRelayHBridgeMomentaryType1Sim : LogicalDeviceRelayHBridgeMomentaryType1, ILogicalDeviceCommandRunnerIdsCan, INotifyPropertyChanged, ICommonDisposable, IDisposable, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, IDevicesCommon
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <<-ctor>b__11_0>d : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceRelayHBridgeMomentaryType1Sim <>4__this;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_00a1: Expected O, but got Unknown
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0070: Unknown result type (might be due to invalid IL or missing references)
				//IL_0077: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				//IL_0054: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayHBridgeMomentaryType1Sim logicalDeviceRelayHBridgeMomentaryType1Sim = <>4__this;
				try
				{
					if (num != 0)
					{
						goto IL_008e;
					}
					TaskAwaiter<bool> val = <>u__1;
					<>u__1 = default(TaskAwaiter<bool>);
					num = (<>1__state = -1);
					goto IL_0086;
					IL_0086:
					val.GetResult();
					goto IL_008e;
					IL_008e:
					if (!logicalDeviceRelayHBridgeMomentaryType1Sim._relaySimTaskCancelSource.IsCancellationRequested)
					{
						((LogicalDevice<LogicalDeviceRelayHBridgeStatusType1, LogicalDeviceRelayCapabilityType1>)logicalDeviceRelayHBridgeMomentaryType1Sim).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayHBridgeMomentaryType1Sim._relayStatus).Data, 1u);
						val = TaskExtension.TryDelay(250, logicalDeviceRelayHBridgeMomentaryType1Sim._relaySimTaskCancelSource.Token).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<-ctor>b__11_0>d>(ref val, ref this);
							return;
						}
						goto IL_0086;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceRelayHBridgeMomentaryType1Sim";

		private CancellationTokenSource _relaySimTaskCancelSource = new CancellationTokenSource();

		private LogicalDeviceRelayHBridgeStatusType1 _relayStatus = new LogicalDeviceRelayHBridgeStatusType1();

		private bool _commandSessionActivated;

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public override bool ActiveSession => CommandSessionActivated;

		public bool IsRunningCommands => false;

		public bool HasQueuedCommands => false;

		public override bool CommandSessionActivated => _commandSessionActivated;

		public LogicalDeviceRelayHBridgeMomentaryType1Sim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service = null)
			: base(logicalDeviceId, new LogicalDeviceRelayCapabilityType1(RelayCapabilityFlagType1.None), service)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_0038: Unknown result type (might be due to invalid IL or missing references)
			//IL_0042: Expected O, but got Unknown
			//IL_0054: Unknown result type (might be due to invalid IL or missing references)
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)(object)this;
			BatteryVoltagePidCan = (ILogicalDevicePidFixedPoint)new LogicalDevicePidSimFixedPoint((FixedPointType)1, PID.BATTERY_VOLTAGE, 11.2f);
			Task.Run((Func<Task>)([AsyncStateMachine(/*Could not decode attribute arguments.*/)] [CompilerGenerated] () =>
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<-ctor>b__11_0>d <<-ctor>b__11_0>d = default(<<-ctor>b__11_0>d);
				<<-ctor>b__11_0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<-ctor>b__11_0>d.<>4__this = this;
				<<-ctor>b__11_0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<-ctor>b__11_0>d.<>t__builder)).Start<<<-ctor>b__11_0>d>(ref <<-ctor>b__11_0>d);
				return ((AsyncTaskMethodBuilder)(ref <<-ctor>b__11_0>d.<>t__builder)).Task;
			}), _relaySimTaskCancelSource.Token);
		}

		public Task CommandActivateSession(CancellationToken cancelToken, bool activateSessionNow = true)
		{
			bool flag = !CommandSessionActivated;
			TaggedLog.Debug("LogicalDeviceRelayHBridgeMomentaryType1Sim", String.Format("CommandActivateSession (SIM) for {0} - Start ChangingState={1}", (object)((LogicalDevice<LogicalDeviceRelayCapabilityType1>)(object)this).DeviceName, (object)flag), Array.Empty<object>());
			_commandSessionActivated = true;
			if (flag)
			{
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("ActiveSession", true);
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("CommandSessionActivated", true);
			}
			TaggedLog.Debug("LogicalDeviceRelayHBridgeMomentaryType1Sim", String.Concat("CommandActivateSession (SIM) for ", ((LogicalDevice<LogicalDeviceRelayCapabilityType1>)(object)this).DeviceName, " - Stop"), Array.Empty<object>());
			return (Task)(object)Task.FromResult<int>(0);
		}

		public void CommandDeactivateSession(bool closeSession = true)
		{
			bool commandSessionActivated = CommandSessionActivated;
			TaggedLog.Debug("LogicalDeviceRelayHBridgeMomentaryType1Sim", String.Format("CommandDeactivateSession (SIM) for {0} - Start ChangingState={1}", (object)((LogicalDevice<LogicalDeviceRelayCapabilityType1>)(object)this).DeviceName, (object)commandSessionActivated), Array.Empty<object>());
			_commandSessionActivated = false;
			if (commandSessionActivated)
			{
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("ActiveSession", true);
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("CommandSessionActivated", true);
			}
			TaggedLog.Debug("LogicalDeviceRelayHBridgeMomentaryType1Sim", String.Concat("CommandDeactivateSession (SIM) for ", ((LogicalDevice<LogicalDeviceRelayCapabilityType1>)(object)this).DeviceName, " - Stop"), Array.Empty<object>());
		}

		public Task<CommandResult> SendCommandAsync(IDeviceCommandPacket dataPacket, CancellationToken cancelToken, Func<ILogicalDevice, CommandControl> cmdControl = null, CommandSendOption options = (CommandSendOption)0)
		{
			//IL_0019: Unknown result type (might be due to invalid IL or missing references)
			//IL_001b: Unknown result type (might be due to invalid IL or missing references)
			return SendCommandAsync(dataPacket.CommandByte, ((IDeviceDataPacket)dataPacket).CopyCurrentData(), ((IDeviceDataPacket)dataPacket).Size, dataPacket.CommandResponseTimeMs, cancelToken, cmdControl, options);
		}

		public Task<CommandResult> SendCommandAsync(byte commandByte, byte[] data, uint dataSize, int responseTimeMs, CancellationToken cancelToken, Func<ILogicalDevice, CommandControl> cmdControl = null, CommandSendOption options = (CommandSendOption)0)
		{
			if (dataSize != 1 || data.Length < 1)
			{
				return Task.FromResult<CommandResult>((CommandResult)7);
			}
			LogicalDeviceRelayHBridgeMomentaryCommandType1 logicalDeviceRelayHBridgeMomentaryCommandType = new LogicalDeviceRelayHBridgeMomentaryCommandType1(((LogicalDevice<LogicalDeviceRelayCapabilityType1>)(object)this).LogicalId, data[0]);
			if (logicalDeviceRelayHBridgeMomentaryCommandType.ClearingFault)
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)_relayStatus).SetBit((BasicBitMask)64, false);
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)_relayStatus).SetBit((BasicBitMask)2, logicalDeviceRelayHBridgeMomentaryCommandType.TurningOnRelay2);
			((LogicalDeviceDataPacketMutableDoubleBuffer)_relayStatus).SetBit((BasicBitMask)1, logicalDeviceRelayHBridgeMomentaryCommandType.TurningOnRelay1);
			return Task.FromResult<CommandResult>((CommandResult)0);
		}

		public override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
			CancellationTokenSource relaySimTaskCancelSource = _relaySimTaskCancelSource;
			if (relaySimTaskCancelSource != null)
			{
				relaySimTaskCancelSource.Cancel();
			}
			CancellationTokenSource relaySimTaskCancelSource2 = _relaySimTaskCancelSource;
			if (relaySimTaskCancelSource2 != null)
			{
				relaySimTaskCancelSource2.Dispose();
			}
			_relaySimTaskCancelSource = null;
		}
	}
	public class LogicalDeviceRelayHBridgeStatusType1 : LogicalDeviceStatusPacketMutable, ILogicalDeviceRelayHBridgeStatus, IDeviceDataPacketMutable, IDeviceDataPacket
	{
		public const BasicBitMask FaultBit = (BasicBitMask)64;

		public const BasicBitMask Relay2StateBit = (BasicBitMask)2;

		public const BasicBitMask Relay1StateBit = (BasicBitMask)1;

		public bool IsStopped
		{
			get
			{
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)1))
				{
					return !((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)2);
				}
				return false;
			}
		}

		public bool IsValid => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData;

		public bool IsFaulted => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)64);

		public bool IsHoming => false;

		public bool UserClearRequired => IsFaulted;

		public DTC_ID UserMessageDtc => (DTC_ID)0;

		public AwningWindStrength WindProtectionLevel => AwningWindStrength.Unknown;

		public bool CommandForwardNotHazardous => true;

		public bool CommandReverseNotHazardous => true;

		public bool IsPositionKnown => Position <= 100;

		public byte Position => 255;

		public bool IsCurrentDrawAmpsKnown => false;

		public float CurrentDrawAmps => 0f;

		public bool Relay1State(ILogicalDeviceId logicalId)
		{
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)1);
		}

		public bool Relay2State(ILogicalDeviceId logicalId)
		{
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)2);
		}

		public RelayHBridgeDirection GetHBridgeDirection(ILogicalDeviceId logicalId)
		{
			return RelayHBridgeDirectionExtension.ConvertToHBridgeDirection(((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)1), ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)2), logicalId);
		}

		public void SetState(bool relay1State, bool relay2State, ILogicalDeviceId logicalId)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)2, relay2State);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)1, relay1State);
		}

		public bool SetFault(bool isFaulted)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)64, isFaulted);
			return true;
		}

		public bool SetUserClearRequired(bool disabled)
		{
			SetFault(disabled);
			return true;
		}

		public bool SetUserMessageDtc(DTC_ID dtc)
		{
			return false;
		}

		public bool SetCommandForwardNotHazardous(bool notHazardous)
		{
			return false;
		}

		public bool SetCommandReverseNotHazardous(bool notHazardous)
		{
			return false;
		}

		public bool CommandForwardAllowed(ILogicalDeviceWithStatus<ILogicalDeviceRelayHBridgeStatus> logicalDevice)
		{
			return RelayHBridgeDirection.Forward.Allowed(logicalDevice);
		}

		public bool CommandReverseAllowed(ILogicalDeviceWithStatus<ILogicalDeviceRelayHBridgeStatus> logicalDevice)
		{
			return RelayHBridgeDirection.Reverse.Allowed(logicalDevice);
		}

		public bool SetPosition(byte position)
		{
			return false;
		}

		public bool SetCurrentDrawAmps(float voltage)
		{
			return false;
		}

		public ILogicalDeviceRelayHBridgeStatus CopyStatus()
		{
			LogicalDeviceRelayHBridgeStatusType1 logicalDeviceRelayHBridgeStatusType = new LogicalDeviceRelayHBridgeStatusType1();
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayHBridgeStatusType).Update(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data.Length, false);
			return logicalDeviceRelayHBridgeStatusType;
		}

		public override string ToString()
		{
			return "OutputState = Type1";
		}
	}
	public enum AwningProtectionState : Enum
	{
		Offline,
		NotSupported,
		NotConfigured,
		AutoProtectReady,
		AutoProtected,
		WindProtectionOff,
		OperationSafetyLockout,
		CommunicationError
	}
	public class LogicalDeviceRelayHBridgeCapabilityType2 : LogicalDeviceCapability, ILogicalDeviceRelayCapability, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		public const int PhysicalSwitchBitShift = 3;

		protected RelayHBridgeCapabilityFlagType2 CapabilityFlag => (RelayHBridgeCapabilityFlagType2)base.RawValue;

		public bool IsSoftwareConfigurableFuseSupported => ((Enum)(object)CapabilityFlag).HasFlag((Enum)(object)RelayHBridgeCapabilityFlagType2.SupportsSoftwareConfigurableFuse);

		public bool IsCoarsePositionSupported
		{
			get
			{
				if (AreAutoCommandsSupported)
				{
					return !IsFinePositionSupported;
				}
				return false;
			}
		}

		public bool AreAutoCommandsSupported => ((Enum)(object)CapabilityFlag).HasFlag((Enum)(object)RelayHBridgeCapabilityFlagType2.SupportsAutoCommands);

		public bool IsFinePositionSupported => ((Enum)(object)CapabilityFlag).HasFlag((Enum)(object)RelayHBridgeCapabilityFlagType2.SupportsFinePosition);

		public bool IsHomingSupported => ((Enum)(object)CapabilityFlag).HasFlag((Enum)(object)RelayHBridgeCapabilityFlagType2.SupportsHoming);

		public bool IsAwningSensorSupported => ((Enum)(object)CapabilityFlag).HasFlag((Enum)(object)RelayHBridgeCapabilityFlagType2.SupportsAwningSensor);

		public PhysicalSwitchTypeCapability PhysicalSwitchType => (PhysicalSwitchTypeCapability)((base.RawValue & 0x18) >> 3);

		public AllLightsGroupBehaviorCapability AllLightsGroupBehavior => AllLightsGroupBehaviorCapability.FeatureNotSupported;

		public LogicalDeviceRelayHBridgeCapabilityType2(Nullable<byte> rawCapability)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(rawCapability);
		}

		public LogicalDeviceRelayHBridgeCapabilityType2(RelayHBridgeCapabilityFlagType2 capabilityFlags)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(new Nullable<byte>((byte)capabilityFlags));
		}

		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsSoftwareConfigurableFuseSupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("AreAutoCommandsSupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsFinePositionSupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsHomingSupported");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}
	}
	public class LogicalDeviceRelayHBridgeCommandFactoryMomentaryType2 : Object, ILogicalDeviceRelayHBridgeCommandFactory
	{
		public ILogicalDeviceRelayHBridgeCommand MakeRelayCommand(LogicalDeviceRelayHBridgeDirection relayDirection)
		{
			return new LogicalDeviceRelayHBridgeMomentaryCommandType2(relayDirection);
		}

		public ILogicalDeviceRelayHBridgeCommand MakeRelayStopCommand()
		{
			return new LogicalDeviceRelayHBridgeMomentaryCommandType2(clearUserClearRequiredLatch: false);
		}

		public ILogicalDeviceRelayHBridgeCommand MakeClearFaultCommand()
		{
			return new LogicalDeviceRelayHBridgeMomentaryCommandType2(clearUserClearRequiredLatch: true);
		}

		public ILogicalDeviceRelayHBridgeCommand MakeHomeResetCommand()
		{
			return LogicalDeviceRelayHBridgeMomentaryCommandType2.MakeHomeResetCommand();
		}

		public ILogicalDeviceRelayHBridgeCommand MakeAutoForwardCommand()
		{
			return LogicalDeviceRelayHBridgeMomentaryCommandType2.MakeAutoCommand(HBridgeCommand.AutoForward);
		}

		public ILogicalDeviceRelayHBridgeCommand MakeAutoReverseCommand()
		{
			return LogicalDeviceRelayHBridgeMomentaryCommandType2.MakeAutoCommand(HBridgeCommand.AutoReverse);
		}
	}
	public class LogicalDeviceRelayHBridgeMomentaryCommandType2 : LogicalDeviceCommandPacket, ILogicalDeviceRelayHBridgeHomeResetCommand, ILogicalDeviceRelayHBridgeCommand, IDeviceCommandPacket, IDeviceDataPacket, IEquatable<LogicalDeviceCommandPacket>
	{
		public bool ClearingFault => Command == HBridgeCommand.ClearUserClearRequiredLatch;

		public bool Latching => false;

		[field: CompilerGenerated]
		public bool TurningOnRelay1
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public bool TurningOnRelay2
		{
			[CompilerGenerated]
			get;
		}

		public bool IsForwardCommand => Command == HBridgeCommand.Forward;

		public bool IsReverseCommand => Command == HBridgeCommand.Reverse;

		public RelayHBridgeDirection Direction => ToDirection(Command);

		public bool IsStopCommand => Command == HBridgeCommand.Stop;

		public bool IsHomeResetCommand => Command == HBridgeCommand.HomeReset;

		public bool IsAutoForwardCommand => Command == HBridgeCommand.AutoForward;

		public bool IsAutoReverseCommand => Command == HBridgeCommand.AutoReverse;

		public HBridgeCommand Command => (HBridgeCommand)((LogicalDeviceCommandPacket)this).CommandByte;

		private static HBridgeCommand ToCommand(RelayHBridgeDirection direction)
		{
			return direction switch
			{
				RelayHBridgeDirection.Forward => HBridgeCommand.Forward, 
				RelayHBridgeDirection.Reverse => HBridgeCommand.Reverse, 
				_ => HBridgeCommand.Stop, 
			};
		}

		private static RelayHBridgeDirection ToDirection(HBridgeCommand command)
		{
			switch (command)
			{
			case HBridgeCommand.Stop:
			case HBridgeCommand.ClearUserClearRequiredLatch:
				return RelayHBridgeDirection.Stop;
			case HBridgeCommand.Forward:
				return RelayHBridgeDirection.Forward;
			case HBridgeCommand.Reverse:
				return RelayHBridgeDirection.Reverse;
			default:
				return RelayHBridgeDirection.Unknown;
			}
		}

		public LogicalDeviceRelayHBridgeMomentaryCommandType2(bool clearUserClearRequiredLatch)
			: this(clearUserClearRequiredLatch ? HBridgeCommand.ClearUserClearRequiredLatch : HBridgeCommand.Stop)
		{
		}

		public LogicalDeviceRelayHBridgeMomentaryCommandType2(ILogicalDeviceId logicalId, HBridgeCommand command)
			: this(command)
		{
			RelayHBridgeEnergized relayHBridgeEnergized = Direction.ConvertToRelayEnergized(logicalId);
			TurningOnRelay1 = relayHBridgeEnergized == RelayHBridgeEnergized.Relay1;
			TurningOnRelay2 = relayHBridgeEnergized == RelayHBridgeEnergized.Relay2;
		}

		public LogicalDeviceRelayHBridgeMomentaryCommandType2(LogicalDeviceRelayHBridgeDirection relayDirection)
			: this(relayDirection.LogicalId, ToCommand(relayDirection.RelayDirection))
		{
		}

		private LogicalDeviceRelayHBridgeMomentaryCommandType2(HBridgeCommand command)
			: base((byte)command, 200)
		{
			TurningOnRelay1 = false;
			TurningOnRelay2 = false;
		}

		public static LogicalDeviceRelayHBridgeMomentaryCommandType2 MakeHomeResetCommand()
		{
			return new LogicalDeviceRelayHBridgeMomentaryCommandType2(HBridgeCommand.HomeReset);
		}

		public static LogicalDeviceRelayHBridgeMomentaryCommandType2 MakeAutoCommand(HBridgeCommand command)
		{
			return new LogicalDeviceRelayHBridgeMomentaryCommandType2(command);
		}

		public override string ToString()
		{
			return String.Format("{0}", (object)Command);
		}
	}
	public class LogicalDeviceRelayHBridgeMomentaryType2 : LogicalDeviceRelayHBridgeMomentary<LogicalDeviceRelayHBridgeStatusType2, LogicalDeviceRelayHBridgeCommandFactoryMomentaryType2, LogicalDeviceRelayHBridgeCapabilityType2>, ILogicalDeviceRelayHBridgeWithAssociatedAwningSensor, ILogicalDeviceRelayHBridgeWithAssociatedDevice, ILogicalDeviceRelayHBridge, IRelayHBridge, IDevicesCommon, INotifyPropertyChanged, IRelayAutoOperations, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceRelayHBridgeWithAssociatedLight, ILogicalDeviceWithStatusAlerts
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass51_0 : Object
		{
			public CancellationTokenSource exclusiveOperationCts;

			internal void <TryPerformAutoOperationAsync>b__0()
			{
				CancellationTokenSourceExtension.TryCancelAndDispose(exclusiveOperationCts);
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass54_0 : Object
		{
			public LogicalDeviceTagAppAssociatedAwningLight tag;

			internal bool <GetAppAssociatedLight>b__0(ILogicalDevice logicalDevice)
			{
				if (logicalDevice is ILogicalDeviceLight)
				{
					return logicalDevice.LogicalId.ToLdiStringEncoding() == tag.AppAssociatedLightLogicalIdString;
				}
				return false;
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetAssociatedCircuitIdRoleAsync>d__26 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<LogicalDeviceRelayHBridgeCircuitIdRole> <>t__builder;

			public LogicalDeviceRelayHBridgeMomentaryType2 <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<byte> <>u__1;

			private void MoveNext()
			{
				//IL_007c: Expected O, but got Unknown
				//IL_00a2: Expected O, but got Unknown
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002a: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_003f: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayHBridgeMomentaryType2 logicalDeviceRelayHBridgeMomentaryType = <>4__this;
				LogicalDeviceRelayHBridgeCircuitIdRole result;
				try
				{
					try
					{
						TaskAwaiter<byte> val;
						if (num != 0)
						{
							val = logicalDeviceRelayHBridgeMomentaryType.MomentaryHBridgeCircuitRolePid.ReadByteAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<byte>, <TryGetAssociatedCircuitIdRoleAsync>d__26>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<byte>);
							num = (<>1__state = -1);
						}
						result = (LogicalDeviceRelayHBridgeCircuitIdRole)val.GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Warning("LogicalDeviceRelayHBridgeMomentaryType2", String.Concat("Unable to get Circuit ID Role ", ex2.Message), Array.Empty<object>());
						result = LogicalDeviceRelayHBridgeCircuitIdRole.None;
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetAwningWindProtectionLevelAsync>d__34 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<AwningWindStrength> <>t__builder;

			public LogicalDeviceRelayHBridgeMomentaryType2 <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<byte> <>u__1;

			private void MoveNext()
			{
				//IL_010c: Expected O, but got Unknown
				//IL_0131: Expected O, but got Unknown
				//IL_0012: Unknown result type (might be due to invalid IL or missing references)
				//IL_0082: Unknown result type (might be due to invalid IL or missing references)
				//IL_0087: Unknown result type (might be due to invalid IL or missing references)
				//IL_008f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0043: Unknown result type (might be due to invalid IL or missing references)
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_0069: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayHBridgeMomentaryType2 logicalDeviceRelayHBridgeMomentaryType = <>4__this;
				AwningWindStrength result;
				try
				{
					if (num == 0)
					{
						goto IL_0039;
					}
					if ((int)((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)logicalDeviceRelayHBridgeMomentaryType).ActiveConnection == 0)
					{
						result = AwningWindStrength.Unknown;
					}
					else
					{
						if (((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)logicalDeviceRelayHBridgeMomentaryType).DeviceCapability.IsAwningSensorSupported)
						{
							goto IL_0039;
						}
						result = AwningWindStrength.None;
					}
					goto end_IL_000e;
					IL_0039:
					try
					{
						TaskAwaiter<byte> val;
						if (num != 0)
						{
							val = ((ILogicalDevicePid<byte>)(object)logicalDeviceRelayHBridgeMomentaryType.AwningWindEventSettingPid).ReadAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<byte>, <TryGetAwningWindProtectionLevelAsync>d__34>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<byte>);
							num = (<>1__state = -1);
						}
						byte result2 = val.GetResult();
						switch (result2)
						{
						case 0:
							result = AwningWindStrength.None;
							break;
						case 1:
							result = AwningWindStrength.Low;
							break;
						case 2:
							result = AwningWindStrength.Medium;
							break;
						case 3:
							result = AwningWindStrength.High;
							break;
						case 255:
							result = AwningWindStrength.Unknown;
							break;
						default:
							TaggedLog.Warning("LogicalDeviceRelayHBridgeMomentaryType2", String.Format("{0} received undefined wind strength 0x{1:X}", (object)"TryGetAwningWindProtectionLevelAsync", (object)result2), Array.Empty<object>());
							result = AwningWindStrength.Unknown;
							break;
						}
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Error("LogicalDeviceRelayHBridgeMomentaryType2", String.Format("Exception getting wind event setting: {0}", (object)ex2), Array.Empty<object>());
						result = AwningWindStrength.Unknown;
					}
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryPerformAutoOperationAsync>d__51 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public RelayHBridgeDirection requestedDirection;

			public LogicalDeviceRelayHBridgeMomentaryType2 <>4__this;

			public CancellationToken cancellationToken;

			private <>c__DisplayClass51_0 <>8__1;

			private int <commandRetries>5__2;

			private bool <moving>5__3;

			private int <operationRetries>5__4;

			private bool <inProgress>5__5;

			private CancellationToken <linkedToken>5__6;

			private IDisposable <startedExclusiveOperation>5__7;

			private TaskAwaiter <>u__1;

			private object <>7__wrap7;

			private int <>7__wrap8;

			private CommandResult <>7__wrap9;

			private TaskAwaiter<CommandResult> <>u__2;

			private TaskAwaiter<bool> <>u__3;

			private int <i>5__11;

			private void MoveNext()
			{
				//IL_0111: Unknown result type (might be due to invalid IL or missing references)
				//IL_061c: Expected O, but got Unknown
				//IL_066d: Unknown result type (might be due to invalid IL or missing references)
				//IL_067f: Expected O, but got Unknown
				//IL_07f8: Expected O, but got Unknown
				//IL_0839: Unknown result type (might be due to invalid IL or missing references)
				//IL_06d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_06db: Unknown result type (might be due to invalid IL or missing references)
				//IL_06e3: Unknown result type (might be due to invalid IL or missing references)
				//IL_073b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0740: Unknown result type (might be due to invalid IL or missing references)
				//IL_0748: Unknown result type (might be due to invalid IL or missing references)
				//IL_06f4: Unknown result type (might be due to invalid IL or missing references)
				//IL_06fc: Unknown result type (might be due to invalid IL or missing references)
				//IL_0706: Unknown result type (might be due to invalid IL or missing references)
				//IL_070b: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00db: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0097: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0720: Unknown result type (might be due to invalid IL or missing references)
				//IL_0722: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0697: Unknown result type (might be due to invalid IL or missing references)
				//IL_06a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_06a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bd: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b1: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b6: Unknown result type (might be due to invalid IL or missing references)
				//IL_02be: Unknown result type (might be due to invalid IL or missing references)
				//IL_0397: Unknown result type (might be due to invalid IL or missing references)
				//IL_039c: Unknown result type (might be due to invalid IL or missing references)
				//IL_03a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_0421: Unknown result type (might be due to invalid IL or missing references)
				//IL_0426: Unknown result type (might be due to invalid IL or missing references)
				//IL_042e: Unknown result type (might be due to invalid IL or missing references)
				//IL_06bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_06bd: Unknown result type (might be due to invalid IL or missing references)
				//IL_011d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0127: Expected O, but got Unknown
				//IL_0128: Unknown result type (might be due to invalid IL or missing references)
				//IL_0138: Unknown result type (might be due to invalid IL or missing references)
				//IL_0145: Unknown result type (might be due to invalid IL or missing references)
				//IL_014a: Unknown result type (might be due to invalid IL or missing references)
				//IL_016b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0175: Expected O, but got Unknown
				//IL_02cf: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0197: Unknown result type (might be due to invalid IL or missing references)
				//IL_02da: Unknown result type (might be due to invalid IL or missing references)
				//IL_02dd: Invalid comparison between Unknown and I4
				//IL_03d5: Unknown result type (might be due to invalid IL or missing references)
				//IL_045c: Unknown result type (might be due to invalid IL or missing references)
				//IL_01cd: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d3: Invalid comparison between Unknown and I4
				//IL_0613: Unknown result type (might be due to invalid IL or missing references)
				//IL_07d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_07dc: Unknown result type (might be due to invalid IL or missing references)
				//IL_03e2: Unknown result type (might be due to invalid IL or missing references)
				//IL_03ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_03f1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0302: Unknown result type (might be due to invalid IL or missing references)
				//IL_0304: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_01dc: Invalid comparison between Unknown and I4
				//IL_0406: Unknown result type (might be due to invalid IL or missing references)
				//IL_0408: Unknown result type (might be due to invalid IL or missing references)
				//IL_053b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0545: Invalid comparison between Unknown and I4
				//IL_04df: Unknown result type (might be due to invalid IL or missing references)
				//IL_04e9: Invalid comparison between Unknown and I4
				//IL_0200: Unknown result type (might be due to invalid IL or missing references)
				//IL_0358: Unknown result type (might be due to invalid IL or missing references)
				//IL_0362: Unknown result type (might be due to invalid IL or missing references)
				//IL_0367: Unknown result type (might be due to invalid IL or missing references)
				//IL_032f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0346: Unknown result type (might be due to invalid IL or missing references)
				//IL_0348: Unknown result type (might be due to invalid IL or missing references)
				//IL_0569: Unknown result type (might be due to invalid IL or missing references)
				//IL_0573: Invalid comparison between Unknown and I4
				//IL_055e: Unknown result type (might be due to invalid IL or missing references)
				//IL_04cc: Unknown result type (might be due to invalid IL or missing references)
				//IL_021d: Unknown result type (might be due to invalid IL or missing references)
				//IL_037c: Unknown result type (might be due to invalid IL or missing references)
				//IL_037e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0596: Unknown result type (might be due to invalid IL or missing references)
				//IL_05a0: Invalid comparison between Unknown and I4
				//IL_058b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0530: Unknown result type (might be due to invalid IL or missing references)
				//IL_05a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_05ad: Invalid comparison between Unknown and I4
				//IL_05b0: Unknown result type (might be due to invalid IL or missing references)
				//IL_05ba: Invalid comparison between Unknown and I4
				//IL_0272: Unknown result type (might be due to invalid IL or missing references)
				//IL_027c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0281: Unknown result type (might be due to invalid IL or missing references)
				//IL_0264: Unknown result type (might be due to invalid IL or missing references)
				//IL_05c7: Unknown result type (might be due to invalid IL or missing references)
				//IL_05e3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0296: Unknown result type (might be due to invalid IL or missing references)
				//IL_0298: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayHBridgeMomentaryType2 logicalDeviceRelayHBridgeMomentaryType = <>4__this;
				CommandResult result = default(CommandResult);
				try
				{
					TaskAwaiter val;
					TaskAwaiter<CommandResult> val2;
					object obj2;
					switch (num)
					{
					default:
						<>8__1 = new <>c__DisplayClass51_0();
						<commandRetries>5__2 = 0;
						<moving>5__3 = false;
						<operationRetries>5__4 = 0;
						<inProgress>5__5 = false;
						if ((requestedDirection != RelayHBridgeDirection.Forward || logicalDeviceRelayHBridgeMomentaryType.AutoForwardAllowed) && (requestedDirection != RelayHBridgeDirection.Reverse || logicalDeviceRelayHBridgeMomentaryType.AutoReverseAllowed))
						{
							goto case 0;
						}
						TaggedLog.Error("LogicalDeviceRelayHBridgeMomentaryType2", "TryPerformAutoOperationAsync failed because requested direction was not allowed.", Array.Empty<object>());
						result = (CommandResult)11;
						goto end_IL_000e;
					case 0:
					{
						try
						{
							if (num != 0)
							{
								val = logicalDeviceRelayHBridgeMomentaryType.ActivateSession(cancellationToken).GetAwaiter();
								if (!((TaskAwaiter)(ref val)).IsCompleted)
								{
									num = (<>1__state = 0);
									<>u__1 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <TryPerformAutoOperationAsync>d__51>(ref val, ref this);
									return;
								}
							}
							else
							{
								val = <>u__1;
								<>u__1 = default(TaskAwaiter);
								num = (<>1__state = -1);
							}
							((TaskAwaiter)(ref val)).GetResult();
						}
						catch (Object)
						{
							TaggedLog.Error("LogicalDeviceRelayHBridgeMomentaryType2", "TryPerformAutoOperationAsync failed to activate a session.", Array.Empty<object>());
							result = (CommandResult)8;
							goto end_IL_000e;
						}
						<>8__1.exclusiveOperationCts = new CancellationTokenSource();
						CancellationTokenSource val4 = CancellationTokenSource.CreateLinkedTokenSource(cancellationToken, <>8__1.exclusiveOperationCts.Token);
						<linkedToken>5__6 = val4.Token;
						LogicalDeviceExclusiveOperation exclusiveOperation = ((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)logicalDeviceRelayHBridgeMomentaryType).DeviceService.GetExclusiveOperation<IRelayAutoOperations>();
						<startedExclusiveOperation>5__7 = exclusiveOperation.Start((Action)delegate
						{
							CancellationTokenSourceExtension.TryCancelAndDispose(<>8__1.exclusiveOperationCts);
						});
						if (<startedExclusiveOperation>5__7 != null)
						{
							<>7__wrap7 = null;
							<>7__wrap8 = 0;
							goto case 1;
						}
						TaggedLog.Error("LogicalDeviceRelayHBridgeMomentaryType2", "TryPerformAutoOperationAsync failed to start an exclusive operation.", Array.Empty<object>());
						result = (CommandResult)7;
						goto end_IL_000e;
					}
					case 1:
					case 2:
					case 3:
						try
						{
							_ = num - 1;
							_ = 2;
							try
							{
								TaskAwaiter<bool> val3;
								CommandResult result2;
								switch (num)
								{
								case 1:
									val2 = <>u__2;
									<>u__2 = default(TaskAwaiter<CommandResult>);
									num = (<>1__state = -1);
									goto IL_02cd;
								case 2:
									val3 = <>u__3;
									<>u__3 = default(TaskAwaiter<bool>);
									num = (<>1__state = -1);
									goto IL_03b3;
								case 3:
									val3 = <>u__3;
									<>u__3 = default(TaskAwaiter<bool>);
									num = (<>1__state = -1);
									goto IL_043d;
								default:
									{
										if (!((CancellationToken)(ref <linkedToken>5__6)).IsCancellationRequested)
										{
											if ((int)((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)logicalDeviceRelayHBridgeMomentaryType).ActiveConnection == 2 || (int)((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)logicalDeviceRelayHBridgeMomentaryType).ActiveConnection == 3)
											{
												TaggedLog.Error("LogicalDeviceRelayHBridgeMomentaryType2", "TryPerformAutoOperationAsync failed because ActiveConnection is remote.", Array.Empty<object>());
												<>7__wrap9 = (CommandResult)10;
												break;
											}
											if ((int)((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)logicalDeviceRelayHBridgeMomentaryType).ActiveConnection == 0)
											{
												TaggedLog.Error("LogicalDeviceRelayHBridgeMomentaryType2", "TryPerformAutoOperationAsync failed because ActiveConnection is offline.", Array.Empty<object>());
												<>7__wrap9 = (CommandResult)6;
												break;
											}
											HBridgeCommand hBridgeCommand = ((requestedDirection == RelayHBridgeDirection.Forward) ? HBridgeCommand.AutoForward : HBridgeCommand.AutoReverse);
											logicalDeviceRelayHBridgeMomentaryType.CommandDirectionLastSetTimer.Restart();
											if (((CancellationToken)(ref <linkedToken>5__6)).IsCancellationRequested)
											{
												TaggedLog.Information("LogicalDeviceRelayHBridgeMomentaryType2", "TryPerformAutoOperationAsync failed because a cancellation was requested.", Array.Empty<object>());
												<>7__wrap9 = (CommandResult)1;
												break;
											}
											val2 = logicalDeviceRelayHBridgeMomentaryType.SendDirectionCommand(hBridgeCommand, <linkedToken>5__6).GetAwaiter();
											if (!val2.IsCompleted)
											{
												num = (<>1__state = 1);
												<>u__2 = val2;
												<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <TryPerformAutoOperationAsync>d__51>(ref val2, ref this);
												return;
											}
											goto IL_02cd;
										}
										TaggedLog.Error("LogicalDeviceRelayHBridgeMomentaryType2", "TryPerformAutoOperationAsync failed because the operation was canceled.", Array.Empty<object>());
										<>7__wrap9 = (CommandResult)1;
										break;
									}
									IL_02cd:
									result2 = val2.GetResult();
									if ((int)result2 != 0)
									{
										if ((int)result2 == 1)
										{
											TaggedLog.Error("LogicalDeviceRelayHBridgeMomentaryType2", "TryPerformAutoOperationAsync failed because SendDirectionCommand result was canceled.", Array.Empty<object>());
											<>7__wrap9 = result2;
											break;
										}
										if (++<commandRetries>5__2 > 4)
										{
											TaggedLog.Error("LogicalDeviceRelayHBridgeMomentaryType2", String.Format("TryPerformAutoOperationAsync failed because MaxConsecutiveCommandRetries was reached, commandResult: {0}.", (object)result2), Array.Empty<object>());
											<>7__wrap9 = result2;
											break;
										}
										val3 = TaskExtension.TryDelay(500, <linkedToken>5__6).GetAwaiter();
										if (!val3.IsCompleted)
										{
											num = (<>1__state = 2);
											<>u__3 = val3;
											<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <TryPerformAutoOperationAsync>d__51>(ref val3, ref this);
											return;
										}
										goto IL_03b3;
									}
									<commandRetries>5__2 = 0;
									val3 = TaskExtension.TryDelay(100, <linkedToken>5__6).GetAwaiter();
									if (!val3.IsCompleted)
									{
										num = (<>1__state = 3);
										<>u__3 = val3;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <TryPerformAutoOperationAsync>d__51>(ref val3, ref this);
										return;
									}
									goto IL_043d;
									IL_043d:
									if (!val3.GetResult())
									{
										TaggedLog.Error("LogicalDeviceRelayHBridgeMomentaryType2", "TryPerformAutoOperationAsync failed because TryDelay failed.", Array.Empty<object>());
										<>7__wrap9 = (CommandResult)1;
										break;
									}
									if (!<moving>5__3)
									{
										if (logicalDeviceRelayHBridgeMomentaryType.RelayEnergized.ConvertToDirection(((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)logicalDeviceRelayHBridgeMomentaryType).LogicalId) == requestedDirection)
										{
											<operationRetries>5__4 = 0;
											<moving>5__3 = true;
										}
										else if (++<operationRetries>5__4 > 10)
										{
											TaggedLog.Error("LogicalDeviceRelayHBridgeMomentaryType2", "TryPerformAutoOperationAsync failed because MaxConsecutiveOperationRetries was reached and relay was not moving yet.", Array.Empty<object>());
											<>7__wrap9 = (CommandResult)12;
											break;
										}
									}
									else if (!<inProgress>5__5)
									{
										if ((int)logicalDeviceRelayHBridgeMomentaryType.UserMessageDtc == 1735)
										{
											<operationRetries>5__4 = 0;
											<inProgress>5__5 = true;
										}
										else if (++<operationRetries>5__4 > 10)
										{
											TaggedLog.Error("LogicalDeviceRelayHBridgeMomentaryType2", "TryPerformAutoOperationAsync failed because MaxConsecutiveOperationRetries was reached and auto operation was not in progress yet.", Array.Empty<object>());
											<>7__wrap9 = (CommandResult)12;
											break;
										}
									}
									else
									{
										if ((int)logicalDeviceRelayHBridgeMomentaryType.UserMessageDtc == 1849)
										{
											TaggedLog.Error("LogicalDeviceRelayHBridgeMomentaryType2", "TryPerformAutoOperationAsync failed because UserMessageDtc was USER_AUTO_OPERATION_ERROR.", Array.Empty<object>());
											<>7__wrap9 = (CommandResult)12;
											break;
										}
										if ((int)logicalDeviceRelayHBridgeMomentaryType.UserMessageDtc == 1831)
										{
											TaggedLog.Information("LogicalDeviceRelayHBridgeMomentaryType2", "TryPerformAutoOperationAsync finished with UserMessageDtc USER_AUTO_OPERATION_COMPLETE.", Array.Empty<object>());
											<>7__wrap9 = (CommandResult)0;
											break;
										}
										if ((int)logicalDeviceRelayHBridgeMomentaryType.UserMessageDtc != 1735 && (int)logicalDeviceRelayHBridgeMomentaryType.UserMessageDtc != 1849 && (int)logicalDeviceRelayHBridgeMomentaryType.UserMessageDtc != 1831)
										{
											TaggedLog.Error("LogicalDeviceRelayHBridgeMomentaryType2", String.Format("TryPerformAutoOperationAsync failed because UserMessageDtc was an unexpected value: {0}.", (object)logicalDeviceRelayHBridgeMomentaryType.UserMessageDtc), Array.Empty<object>());
											<>7__wrap9 = (CommandResult)12;
											break;
										}
									}
									goto default;
									IL_03b3:
									if (!val3.GetResult())
									{
										TaggedLog.Error("LogicalDeviceRelayHBridgeMomentaryType2", "TryPerformAutoOperationAsync failed because TryDelay failed.", Array.Empty<object>());
										<>7__wrap9 = (CommandResult)1;
										break;
									}
									goto default;
								}
							}
							catch (Exception ex)
							{
								Exception ex2 = ex;
								TaggedLog.Error("LogicalDeviceRelayHBridgeMomentaryType2", String.Format("Unable to complete {0} auto-operation for {1} - {2}: {3}", (object[])(object)new Object[4]
								{
									(object)requestedDirection,
									(Object)((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)logicalDeviceRelayHBridgeMomentaryType).DeviceName,
									(Object)((MemberInfo)ex2.GetType()).Name,
									(Object)ex2.Message
								}), Array.Empty<object>());
								<>7__wrap9 = (CommandResult)7;
							}
							<>7__wrap8 = 1;
						}
						catch (Object obj)
						{
							obj2 = (object)obj;
							<>7__wrap7 = obj2;
						}
						<i>5__11 = 0;
						goto IL_0770;
					case 4:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_06f2;
					case 5:
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
							goto IL_0757;
						}
						IL_0757:
						((TaskAwaiter)(ref val)).GetResult();
						<i>5__11++;
						goto IL_0770;
						IL_0770:
						if (<i>5__11 >= 5 || logicalDeviceRelayHBridgeMomentaryType.RelayEnergized.ConvertToDirection(((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)logicalDeviceRelayHBridgeMomentaryType).LogicalId) == RelayHBridgeDirection.Stop)
						{
							break;
						}
						val2 = logicalDeviceRelayHBridgeMomentaryType.SendDirectionCommand(HBridgeCommand.Stop, CancellationToken.None).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 4);
							<>u__2 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <TryPerformAutoOperationAsync>d__51>(ref val2, ref this);
							return;
						}
						goto IL_06f2;
						IL_06f2:
						val2.GetResult();
						val = Task.Delay(100, CancellationToken.None).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 5);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <TryPerformAutoOperationAsync>d__51>(ref val, ref this);
							return;
						}
						goto IL_0757;
					}
					logicalDeviceRelayHBridgeMomentaryType.DeactivateSession();
					IDisposable obj4 = <startedExclusiveOperation>5__7;
					if (obj4 != null)
					{
						obj4.Dispose();
					}
					obj2 = <>7__wrap7;
					if (obj2 != null)
					{
						ExceptionDispatchInfo.Capture((Exception)(((obj2 is Exception) ? obj2 : null) ?? throw obj2)).Throw();
					}
					int num2 = <>7__wrap8;
					if (num2 == 1)
					{
						result = <>7__wrap9;
					}
					else
					{
						<>7__wrap7 = null;
						<>8__1 = null;
						<startedExclusiveOperation>5__7 = null;
					}
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>8__1 = null;
					<startedExclusiveOperation>5__7 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				<startedExclusiveOperation>5__7 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TrySetAssociatedCircuitIdRoleAsync>d__27 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceRelayHBridgeMomentaryType2 <>4__this;

			public LogicalDeviceRelayHBridgeCircuitIdRole circuitRole;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0084: Expected O, but got Unknown
				//IL_00aa: Expected O, but got Unknown
				//IL_005c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_002c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayHBridgeMomentaryType2 logicalDeviceRelayHBridgeMomentaryType = <>4__this;
				bool result;
				try
				{
					try
					{
						TaskAwaiter val;
						if (num != 0)
						{
							val = logicalDeviceRelayHBridgeMomentaryType.MomentaryHBridgeCircuitRolePid.WriteByteAsync((byte)circuitRole, cancellationToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <TrySetAssociatedCircuitIdRoleAsync>d__27>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val)).GetResult();
						result = true;
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Warning("LogicalDeviceRelayHBridgeMomentaryType2", String.Concat("Unable to set Circuit ID Role ", ex2.Message), Array.Empty<object>());
						result = false;
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceRelayHBridgeMomentaryType2";

		private const int AutoOperationLoopDelayMs = 100;

		private const int CommandErrorDelayMs = 500;

		private const int MaxConsecutiveCommandRetries = 4;

		private const int MaxConsecutiveOperationRetries = 10;

		private new const int MaxStopCommands = 5;

		private const byte WindRetractEventAlertId = 0;

		private const string WindRetractEventAlertName = "WindRetractEvent";

		private const byte AlertActiveBitmask = 128;

		private const byte AlertCountBitmask = 127;

		private const byte AlertActiveFlag = 128;

		private static readonly IReadOnlyList<DTC_ID> AutoOperationDtcs;

		public ILogicalDevicePidByte AwningWindEventSettingPid;

		public ILogicalDevicePidUInt16 AwningWindEventProtectionCountPid;

		public ILogicalDevicePidByte AutoOperationSafetyConfigPid;

		public ILogicalDevicePidByte MomentaryHBridgeCircuitRolePid;

		private const uint DebugUpdateDeviceStatusChangedThrottleTimeMs = 60000u;

		private readonly Stopwatch _debugUpdateDeviceStatusChangedThrottleTimer = Stopwatch.StartNew();

		private uint _debugUpdateDeviceStatusChangedThrottleCount;

		private readonly ConcurrentDictionary<string, ILogicalDeviceAlert> _alertDict = new ConcurrentDictionary<string, ILogicalDeviceAlert>();

		public IEnumerable<ILogicalDeviceAlert> Alerts => (IEnumerable<ILogicalDeviceAlert>)(object)_alertDict.Values;

		public override bool IsAutoOperationInProgress => (int)base.UserMessageDtc == 1735;

		public override bool IsWindSensorAutoOperationInProgress => (int)base.UserMessageDtc == 1736;

		public override bool IsAutoOperation => Enumerable.Contains<DTC_ID>((IEnumerable<DTC_ID>)(object)AutoOperationDtcs, base.UserMessageDtc);

		public override bool AutoForwardAllowed
		{
			get
			{
				if (((LogicalDevice<LogicalDeviceRelayHBridgeStatusType2, LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceStatus.CommandForwardAllowed((ILogicalDeviceWithStatus<ILogicalDeviceRelayHBridgeStatus>)(object)this) && base.AreAutoCommandsSupported)
				{
					return !HasWindSensorUserMessageDtcErrors();
				}
				return false;
			}
		}

		public override bool AutoReverseAllowed
		{
			get
			{
				if (((LogicalDevice<LogicalDeviceRelayHBridgeStatusType2, LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceStatus.CommandReverseAllowed((ILogicalDeviceWithStatus<ILogicalDeviceRelayHBridgeStatus>)(object)this) && base.AreAutoCommandsSupported)
				{
					return !HasWindSensorUserMessageDtcErrors();
				}
				return false;
			}
		}

		public LogicalDeviceRelayHBridgeMomentaryType2(ILogicalDeviceId logicalDeviceId, LogicalDeviceRelayHBridgeCapabilityType2 capability, ILogicalDeviceService service = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, capability, service, isFunctionClassChangeable)
		{
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0038: Expected O, but got Unknown
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			//IL_004f: Expected O, but got Unknown
			//IL_005c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0066: Expected O, but got Unknown
			//IL_0073: Unknown result type (might be due to invalid IL or missing references)
			//IL_007d: Expected O, but got Unknown
			AwningWindEventSettingPid = (ILogicalDevicePidByte)new LogicalDevicePidByte((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)343), (LogicalDeviceSessionType)2);
			AwningWindEventProtectionCountPid = (ILogicalDevicePidUInt16)new LogicalDevicePidUInt16((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)386), (LogicalDeviceSessionType)2);
			AutoOperationSafetyConfigPid = (ILogicalDevicePidByte)new LogicalDevicePidByte((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)385), (LogicalDeviceSessionType)2);
			MomentaryHBridgeCircuitRolePid = (ILogicalDevicePidByte)new LogicalDevicePidByte((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)387), (LogicalDeviceSessionType)2);
		}

		protected override void DebugUpdateDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, uint dataLength, string optionalText = "")
		{
			if (LogicalDeviceRelayStatusType2<RelayHBridgeDirection>.IsSignificantlyDifferent(oldStatusData, statusData))
			{
				base.DebugUpdateDeviceStatusChanged(oldStatusData, statusData, dataLength, optionalText);
				_debugUpdateDeviceStatusChangedThrottleTimer.Restart();
				_debugUpdateDeviceStatusChangedThrottleCount = 1u;
			}
			else if (_debugUpdateDeviceStatusChangedThrottleCount != 0 && _debugUpdateDeviceStatusChangedThrottleTimer.ElapsedMilliseconds < 60000)
			{
				_debugUpdateDeviceStatusChangedThrottleCount++;
			}
			else
			{
				base.DebugUpdateDeviceStatusChanged(oldStatusData, statusData, dataLength, String.Format(" found {0} changes over {1}ms", (object)_debugUpdateDeviceStatusChangedThrottleCount, (object)(UInt32)60000));
				_debugUpdateDeviceStatusChangedThrottleTimer.Restart();
				_debugUpdateDeviceStatusChangedThrottleCount = 1u;
			}
		}

		public void UpdateAlert(string alertName, bool isActive, Nullable<int> count)
		{
			//IL_0003: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDevice<LogicalDeviceRelayHBridgeStatusType2, LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).UpdateAlertDefaultImpl(alertName, isActive, count, _alertDict);
		}

		public void UpdateAlert(byte alertId, byte rawData)
		{
			//IL_0020: Unknown result type (might be due to invalid IL or missing references)
			if (alertId == 0)
			{
				bool isActive = (rawData & 0x80) == 128;
				int num = rawData & 0x7F;
				UpdateAlert("WindRetractEvent", isActive, new Nullable<int>(num));
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<LogicalDeviceRelayHBridgeCircuitIdRole> TryGetAssociatedCircuitIdRoleAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetAssociatedCircuitIdRoleAsync>d__26 <TryGetAssociatedCircuitIdRoleAsync>d__ = default(<TryGetAssociatedCircuitIdRoleAsync>d__26);
			<TryGetAssociatedCircuitIdRoleAsync>d__.<>t__builder = AsyncTaskMethodBuilder<LogicalDeviceRelayHBridgeCircuitIdRole>.Create();
			<TryGetAssociatedCircuitIdRoleAsync>d__.<>4__this = this;
			<TryGetAssociatedCircuitIdRoleAsync>d__.cancellationToken = cancellationToken;
			<TryGetAssociatedCircuitIdRoleAsync>d__.<>1__state = -1;
			<TryGetAssociatedCircuitIdRoleAsync>d__.<>t__builder.Start<<TryGetAssociatedCircuitIdRoleAsync>d__26>(ref <TryGetAssociatedCircuitIdRoleAsync>d__);
			return <TryGetAssociatedCircuitIdRoleAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TrySetAssociatedCircuitIdRoleAsync(LogicalDeviceRelayHBridgeCircuitIdRole circuitRole, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<TrySetAssociatedCircuitIdRoleAsync>d__27 <TrySetAssociatedCircuitIdRoleAsync>d__ = default(<TrySetAssociatedCircuitIdRoleAsync>d__27);
			<TrySetAssociatedCircuitIdRoleAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TrySetAssociatedCircuitIdRoleAsync>d__.<>4__this = this;
			<TrySetAssociatedCircuitIdRoleAsync>d__.circuitRole = circuitRole;
			<TrySetAssociatedCircuitIdRoleAsync>d__.cancellationToken = cancellationToken;
			<TrySetAssociatedCircuitIdRoleAsync>d__.<>1__state = -1;
			<TrySetAssociatedCircuitIdRoleAsync>d__.<>t__builder.Start<<TrySetAssociatedCircuitIdRoleAsync>d__27>(ref <TrySetAssociatedCircuitIdRoleAsync>d__);
			return <TrySetAssociatedCircuitIdRoleAsync>d__.<>t__builder.Task;
		}

		public ILogicalDeviceLight? GetCircuitIdAssociatedLight()
		{
			ILogicalDeviceManager deviceManager = ((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceService.DeviceManager;
			List<ILogicalDeviceLight> val = ((deviceManager != null) ? deviceManager.FindLogicalDevices<ILogicalDeviceLight>((Func<ILogicalDeviceLight, bool>)([CompilerGenerated] (ILogicalDeviceLight ld) => GetCircuitIdAssociatedLightAssociation(ld) == DeviceAssociation.AssociatedToSelf)) : null);
			val?.Sort((Comparison<ILogicalDeviceLight>)delegate(ILogicalDeviceLight light1, ILogicalDeviceLight light2)
			{
				if (((ILogicalDevice)light1).LogicalId.ProductMacAddress == null && ((ILogicalDevice)light2).LogicalId.ProductMacAddress == null)
				{
					return 0;
				}
				if (((ILogicalDevice)light1).LogicalId.ProductMacAddress == null)
				{
					return 1;
				}
				return (((ILogicalDevice)light2).LogicalId.ProductMacAddress == null) ? (-1) : ((PhysicalAddress)((ILogicalDevice)light1).LogicalId.ProductMacAddress).CompareTo((PhysicalAddress)(object)((ILogicalDevice)light2).LogicalId.ProductMacAddress);
			});
			if (val != null && val.Count > 1)
			{
				TaggedLog.Warning("LogicalDeviceRelayHBridgeMomentaryType2", String.Format("{0} associated lights found for momentary relay, only 1 is expected.", (object)val.Count), Array.Empty<object>());
			}
			if (val == null)
			{
				return null;
			}
			return Enumerable.FirstOrDefault<ILogicalDeviceLight>((IEnumerable<ILogicalDeviceLight>)(object)val);
		}

		public DeviceAssociation GetCircuitIdAssociatedLightAssociation(ILogicalDeviceLight light)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0053: Unknown result type (might be due to invalid IL or missing references)
			//IL_0063: Unknown result type (might be due to invalid IL or missing references)
			if ((int)((IDevicesCommon)light).ActiveConnection == 0)
			{
				return DeviceAssociation.Unknown;
			}
			if (!(light is ILogicalDeviceLatchingRelayLight) || ((ILogicalDevice)light).LogicalId.ProductMacAddress == null || (PhysicalAddress)(object)((ILogicalDevice)light).LogicalId.ProductMacAddress != (PhysicalAddress)(object)((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).LogicalId.ProductMacAddress)
			{
				return DeviceAssociation.NotSupported;
			}
			if (!((ILogicalDevice)light).CircuitId.HasValueBeenLoaded)
			{
				return DeviceAssociation.Supported;
			}
			if (CIRCUIT_ID.op_Implicit(((ILogicalDevice)light).CircuitId.Value) == CIRCUIT_ID.op_Implicit(((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).CircuitId.Value))
			{
				return DeviceAssociation.AssociatedToSelf;
			}
			return DeviceAssociation.AssociatedToOther;
		}

		public ILogicalDeviceAwningSensor? GetAssociatedAwningSensor()
		{
			ILogicalDeviceManager deviceManager = ((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceService.DeviceManager;
			List<ILogicalDeviceAwningSensor> val = ((deviceManager != null) ? deviceManager.FindLogicalDevices<ILogicalDeviceAwningSensor>((Func<ILogicalDeviceAwningSensor, bool>)([CompilerGenerated] (ILogicalDeviceAwningSensor ld) => GetAwningSensorAssociation(ld) == DeviceAssociation.AssociatedToSelf)) : null);
			val?.Sort((Comparison<ILogicalDeviceAwningSensor>)delegate(ILogicalDeviceAwningSensor awningSensor1, ILogicalDeviceAwningSensor awningSensor2)
			{
				if (((ILogicalDevice)awningSensor1).LogicalId.ProductMacAddress == null && ((ILogicalDevice)awningSensor2).LogicalId.ProductMacAddress == null)
				{
					return 0;
				}
				if (((ILogicalDevice)awningSensor1).LogicalId.ProductMacAddress == null)
				{
					return 1;
				}
				return (((ILogicalDevice)awningSensor2).LogicalId.ProductMacAddress == null) ? (-1) : ((PhysicalAddress)((ILogicalDevice)awningSensor1).LogicalId.ProductMacAddress).CompareTo((PhysicalAddress)(object)((ILogicalDevice)awningSensor2).LogicalId.ProductMacAddress);
			});
			if (val != null && val.Count > 1)
			{
				TaggedLog.Warning("LogicalDeviceRelayHBridgeMomentaryType2", String.Format("{0} associated awning sensors found for momentary relay, only 1 is expected.", (object)val.Count), Array.Empty<object>());
			}
			if (val == null)
			{
				return null;
			}
			return Enumerable.FirstOrDefault<ILogicalDeviceAwningSensor>((IEnumerable<ILogicalDeviceAwningSensor>)(object)val);
		}

		public DeviceAssociation GetAwningSensorAssociation(ILogicalDeviceAwningSensor awningSensor)
		{
			//IL_0018: Unknown result type (might be due to invalid IL or missing references)
			if (awningSensor == null)
			{
				return DeviceAssociation.Unknown;
			}
			uint num = awningSensor.TryGetLinkId();
			if (num == 0)
			{
				return DeviceAssociation.Unknown;
			}
			if (num == CIRCUIT_ID.op_Implicit(((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).CircuitId.Value))
			{
				return DeviceAssociation.AssociatedToSelf;
			}
			return DeviceAssociation.AssociatedToOther;
		}

		public AwningProtectionState GetAwningAutoRetractProtectionState()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0049: Unknown result type (might be due to invalid IL or missing references)
			//IL_0053: Unknown result type (might be due to invalid IL or missing references)
			//IL_0059: Invalid comparison between Unknown and I4
			//IL_005e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0068: Invalid comparison between Unknown and I4
			if ((int)((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).ActiveConnection == 0)
			{
				return AwningProtectionState.Offline;
			}
			if (!((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceCapability.IsAwningSensorSupported)
			{
				return AwningProtectionState.NotSupported;
			}
			if (((LogicalDevice<LogicalDeviceRelayHBridgeStatusType2, LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceStatus.WindProtectionLevel == AwningWindStrength.None)
			{
				return AwningProtectionState.WindProtectionOff;
			}
			if (((LogicalDevice<LogicalDeviceRelayHBridgeStatusType2, LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceStatus.WindProtectionLevel == AwningWindStrength.Unknown)
			{
				return AwningProtectionState.NotSupported;
			}
			ILogicalDeviceAwningSensor associatedAwningSensor = GetAssociatedAwningSensor();
			if (associatedAwningSensor == null)
			{
				return AwningProtectionState.NotConfigured;
			}
			if ((int)((IDevicesCommon)associatedAwningSensor).ActiveConnection == 0)
			{
				return AwningProtectionState.CommunicationError;
			}
			if ((int)((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).InTransitLockout == 2)
			{
				return AwningProtectionState.OperationSafetyLockout;
			}
			if ((int)base.UserMessageDtc == 1832)
			{
				return AwningProtectionState.AutoProtected;
			}
			if (HasWindSensorUserMessageDtcErrors())
			{
				return AwningProtectionState.CommunicationError;
			}
			return AwningProtectionState.AutoProtectReady;
		}

		public AwningWindStrength GetAwningWindProtectionLevel()
		{
			return ((LogicalDevice<LogicalDeviceRelayHBridgeStatusType2, LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceStatus.WindProtectionLevel;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<AwningWindStrength> TryGetAwningWindProtectionLevelAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetAwningWindProtectionLevelAsync>d__34 <TryGetAwningWindProtectionLevelAsync>d__ = default(<TryGetAwningWindProtectionLevelAsync>d__34);
			<TryGetAwningWindProtectionLevelAsync>d__.<>t__builder = AsyncTaskMethodBuilder<AwningWindStrength>.Create();
			<TryGetAwningWindProtectionLevelAsync>d__.<>4__this = this;
			<TryGetAwningWindProtectionLevelAsync>d__.cancellationToken = cancellationToken;
			<TryGetAwningWindProtectionLevelAsync>d__.<>1__state = -1;
			<TryGetAwningWindProtectionLevelAsync>d__.<>t__builder.Start<<TryGetAwningWindProtectionLevelAsync>d__34>(ref <TryGetAwningWindProtectionLevelAsync>d__);
			return <TryGetAwningWindProtectionLevelAsync>d__.<>t__builder.Task;
		}

		public Task SetAwningAutoRetractWindProtectionLevelAsync(AwningWindStrength windSetting, CancellationToken cancellationToken)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			return ((ILogicalDevicePid<byte>)(object)AwningWindEventSettingPid).WriteAsync((byte)windSetting, cancellationToken);
		}

		public override void OnDeviceCapabilityChanged()
		{
			((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).OnDeviceCapabilityChanged();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("AutoForwardAllowed", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("AutoReverseAllowed", true);
		}

		public override void OnInTransitLockoutChanged()
		{
			((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).OnInTransitLockoutChanged();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("AutoForwardAllowed", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("AutoReverseAllowed", true);
		}

		public override void OnDeviceStatusChanged()
		{
			base.OnDeviceStatusChanged();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("AutoForwardAllowed", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("AutoReverseAllowed", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsAutoOperationInProgress", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsWindSensorAutoOperationInProgress", true);
		}

		public override Task<CommandResult> TryAutoReverseAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			return TryPerformAutoOperationAsync(RelayHBridgeDirection.Reverse, cancellationToken);
		}

		public override Task<CommandResult> TryAutoForwardAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			return TryPerformAutoOperationAsync(RelayHBridgeDirection.Forward, cancellationToken);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task<CommandResult> TryPerformAutoOperationAsync(RelayHBridgeDirection requestedDirection, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<TryPerformAutoOperationAsync>d__51 <TryPerformAutoOperationAsync>d__ = default(<TryPerformAutoOperationAsync>d__51);
			<TryPerformAutoOperationAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<TryPerformAutoOperationAsync>d__.<>4__this = this;
			<TryPerformAutoOperationAsync>d__.requestedDirection = requestedDirection;
			<TryPerformAutoOperationAsync>d__.cancellationToken = cancellationToken;
			<TryPerformAutoOperationAsync>d__.<>1__state = -1;
			<TryPerformAutoOperationAsync>d__.<>t__builder.Start<<TryPerformAutoOperationAsync>d__51>(ref <TryPerformAutoOperationAsync>d__);
			return <TryPerformAutoOperationAsync>d__.<>t__builder.Task;
		}

		private bool HasWindSensorUserMessageDtcErrors()
		{
			//IL_0010: Unknown result type (might be due to invalid IL or missing references)
			//IL_0015: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_001c: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Invalid comparison between Unknown and I4
			//IL_0021: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			//IL_002a: Invalid comparison between Unknown and I4
			if (!((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceCapability.IsAwningSensorSupported)
			{
				return false;
			}
			DTC_ID userMessageDtc = base.UserMessageDtc;
			if (userMessageDtc - 1738 <= 15 || userMessageDtc - 1833 <= 15)
			{
				return true;
			}
			return false;
		}

		private LogicalDeviceTagAppAssociatedAwningLight? GetAppAssociatedAwningLightTag()
		{
			return LogicalDeviceTagAppAssociatedAwningLight.GetTag(this);
		}

		public ILogicalDeviceLight? GetAppAssociatedLight()
		{
			<>c__DisplayClass54_0 CS$<>8__locals3 = new <>c__DisplayClass54_0();
			CS$<>8__locals3.tag = GetAppAssociatedAwningLightTag();
			if ((object)CS$<>8__locals3.tag == null)
			{
				return null;
			}
			ILogicalDeviceService deviceService = ((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceService;
			object obj;
			if (deviceService == null)
			{
				obj = null;
			}
			else
			{
				ILogicalDeviceManager deviceManager = deviceService.DeviceManager;
				obj = ((deviceManager != null) ? deviceManager.FindLogicalDevice((Func<ILogicalDevice, bool>)((ILogicalDevice logicalDevice) => logicalDevice is ILogicalDeviceLight && logicalDevice.LogicalId.ToLdiStringEncoding() == CS$<>8__locals3.tag.AppAssociatedLightLogicalIdString)) : null);
			}
			if (!(obj is ILogicalDeviceLight result))
			{
				return null;
			}
			return result;
		}

		public bool TrySaveAppAssociatedLight(ILogicalDeviceLight deviceLight)
		{
			//IL_0046: Expected O, but got Unknown
			try
			{
				LogicalDeviceTagAppAssociatedAwningLight appAssociatedAwningLightTag = GetAppAssociatedAwningLightTag();
				string text = ((ILogicalDevice)deviceLight).LogicalId.ToLdiStringEncoding();
				if ((object)appAssociatedAwningLightTag != null && appAssociatedAwningLightTag.AppAssociatedLightLogicalIdString == text)
				{
					return true;
				}
				if ((object)appAssociatedAwningLightTag != null)
				{
					LogicalDeviceTagAppAssociatedAwningLight.RemoveTag(this, appAssociatedAwningLightTag);
				}
				LogicalDeviceTagAppAssociatedAwningLight tag = new LogicalDeviceTagAppAssociatedAwningLight(text);
				LogicalDeviceTagAppAssociatedAwningLight.SetTag(this, tag);
				return true;
			}
			catch (Exception ex)
			{
				Exception ex2 = ex;
				TaggedLog.Error("LogicalDeviceRelayHBridgeMomentaryType2", String.Concat("Failed to save App Associated Awning Light Tag: ", ex2.Message), Array.Empty<object>());
				return false;
			}
		}

		static LogicalDeviceRelayHBridgeMomentaryType2()
		{
			List<DTC_ID> obj = new List<DTC_ID>();
			obj.Add((DTC_ID)1736);
			obj.Add((DTC_ID)1850);
			obj.Add((DTC_ID)1832);
			obj.Add((DTC_ID)1735);
			obj.Add((DTC_ID)1849);
			obj.Add((DTC_ID)1831);
			AutoOperationDtcs = (IReadOnlyList<DTC_ID>)(object)obj;
		}
	}
	public class LogicalDeviceRelayHBridgeMomentaryType2Sim : LogicalDeviceRelayHBridgeMomentaryType2, ILogicalDeviceCommandRunnerIdsCan, INotifyPropertyChanged, ICommonDisposable, IDisposable, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, IDevicesCommon
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <<-ctor>b__16_0>d : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceRelayHBridgeMomentaryType2Sim <>4__this;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_00b0: Expected O, but got Unknown
				//IL_007a: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0086: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				//IL_004a: Unknown result type (might be due to invalid IL or missing references)
				//IL_004f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0063: Unknown result type (might be due to invalid IL or missing references)
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRelayHBridgeMomentaryType2Sim logicalDeviceRelayHBridgeMomentaryType2Sim = <>4__this;
				try
				{
					if (num != 0)
					{
						goto IL_009d;
					}
					TaskAwaiter<bool> val = <>u__1;
					<>u__1 = default(TaskAwaiter<bool>);
					num = (<>1__state = -1);
					goto IL_0095;
					IL_0095:
					val.GetResult();
					goto IL_009d;
					IL_009d:
					if (!logicalDeviceRelayHBridgeMomentaryType2Sim._relaySimTaskCancelSource.IsCancellationRequested)
					{
						((LogicalDevice<LogicalDeviceRelayHBridgeStatusType2, LogicalDeviceRelayHBridgeCapabilityType2>)(object)logicalDeviceRelayHBridgeMomentaryType2Sim).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayHBridgeMomentaryType2Sim._relayStatus).Data, (uint)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayHBridgeMomentaryType2Sim._relayStatus).Data.Length);
						val = TaskExtension.TryDelay(250, logicalDeviceRelayHBridgeMomentaryType2Sim._relaySimTaskCancelSource.Token).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<-ctor>b__16_0>d>(ref val, ref this);
							return;
						}
						goto IL_0095;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryAutoForwardAsync>d__25 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public CancellationToken token;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0071: Expected O, but got Unknown
				//IL_004a: Unknown result type (might be due to invalid IL or missing references)
				//IL_004f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_0010: Unknown result type (might be due to invalid IL or missing references)
				//IL_001a: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_006d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0033: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_0095: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				CommandResult result;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						val = Task.Delay(1000, token).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <TryAutoForwardAsync>d__25>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
					result = (CommandResult)0;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryAutoReverseAsync>d__24 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public CancellationToken token;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0071: Expected O, but got Unknown
				//IL_004a: Unknown result type (might be due to invalid IL or missing references)
				//IL_004f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_0010: Unknown result type (might be due to invalid IL or missing references)
				//IL_001a: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_006d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0033: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_0095: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				CommandResult result;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						val = Task.Delay(1000, token).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <TryAutoReverseAsync>d__24>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
					result = (CommandResult)0;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceRelayHBridgeMomentaryType2Sim";

		private CancellationTokenSource? _relaySimTaskCancelSource = new CancellationTokenSource();

		private readonly LogicalDeviceRelayHBridgeStatusType2 _relayStatus = new LogicalDeviceRelayHBridgeStatusType2();

		private readonly Stopwatch _autoCommandTimer = new Stopwatch();

		private const int AutoCommandFinishedTimeoutMs = 5000;

		private const byte CapabilitiesEnabled = 255;

		private readonly ILogicalDeviceAwningSensor? _awningSensor;

		private bool _runningAutoCommand;

		private bool _commandSessionActivated;

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public override bool ActiveSession => CommandSessionActivated;

		public bool IsRunningCommands => false;

		public bool HasQueuedCommands => false;

		public override bool CommandSessionActivated => _commandSessionActivated;

		public LogicalDeviceRelayHBridgeMomentaryType2Sim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service = null)
			: base(logicalDeviceId, new LogicalDeviceRelayHBridgeCapabilityType2(RelayHBridgeCapabilityFlagType2.None), service)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			//IL_0021: Expected O, but got Unknown
			//IL_003c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0046: Expected O, but got Unknown
			//IL_0052: Unknown result type (might be due to invalid IL or missing references)
			//IL_005c: Expected O, but got Unknown
			//IL_0068: Unknown result type (might be due to invalid IL or missing references)
			//IL_0072: Expected O, but got Unknown
			//IL_007e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0088: Expected O, but got Unknown
			//IL_0095: Unknown result type (might be due to invalid IL or missing references)
			//IL_009f: Expected O, but got Unknown
			//IL_00ac: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d4: Unknown result type (might be due to invalid IL or missing references)
			AwningWindEventSettingPid = (ILogicalDevicePidByte)new LogicalDevicePidSimByte(PidExtension.ConvertToPid((Pid)343), (byte)0);
			AwningWindEventProtectionCountPid = (ILogicalDevicePidUInt16)new LogicalDevicePidSimUInt16(PidExtension.ConvertToPid((Pid)386), (ushort)0);
			AutoOperationSafetyConfigPid = (ILogicalDevicePidByte)new LogicalDevicePidSimByte(PidExtension.ConvertToPid((Pid)385), (byte)0);
			BatteryVoltagePidCan = (ILogicalDevicePidFixedPoint)new LogicalDevicePidSimFixedPoint((FixedPointType)1, PID.BATTERY_VOLTAGE, 11.2f);
			MomentaryHBridgeCircuitRolePid = (ILogicalDevicePidByte)new LogicalDevicePidByte((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)387), (LogicalDeviceSessionType)2);
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)(object)this;
			((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).UpdateDeviceCapability(new Nullable<byte>((byte)255));
			_awningSensor = GetAssociatedAwningSensor();
			Task.Run((Func<Task>)([AsyncStateMachine(/*Could not decode attribute arguments.*/)] [CompilerGenerated] () =>
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<-ctor>b__16_0>d <<-ctor>b__16_0>d = default(<<-ctor>b__16_0>d);
				<<-ctor>b__16_0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<-ctor>b__16_0>d.<>4__this = this;
				<<-ctor>b__16_0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<-ctor>b__16_0>d.<>t__builder)).Start<<<-ctor>b__16_0>d>(ref <<-ctor>b__16_0>d);
				return ((AsyncTaskMethodBuilder)(ref <<-ctor>b__16_0>d.<>t__builder)).Task;
			}), _relaySimTaskCancelSource.Token);
		}

		public Task CommandActivateSession(CancellationToken cancelToken, bool activateSessionNow = true)
		{
			bool flag = !CommandSessionActivated;
			TaggedLog.Debug("LogicalDeviceRelayHBridgeMomentaryType2Sim", String.Format("CommandActivateSession (SIM) for {0} - Start ChangingState={1} - user_clear_required={2}", (object)((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceName, (object)flag, (object)_relayStatus.UserClearRequired), Array.Empty<object>());
			_commandSessionActivated = true;
			if (flag)
			{
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("ActiveSession", true);
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("CommandSessionActivated", true);
			}
			TaggedLog.Debug("LogicalDeviceRelayHBridgeMomentaryType2Sim", String.Concat("CommandActivateSession (SIM) for ", ((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceName, " - Stop"), Array.Empty<object>());
			return (Task)(object)Task.FromResult<int>(0);
		}

		public void CommandDeactivateSession(bool closeSession = true)
		{
			bool commandSessionActivated = CommandSessionActivated;
			TaggedLog.Debug("LogicalDeviceRelayHBridgeMomentaryType2Sim", String.Format("CommandDeactivateSession (SIM) for {0} - Start ChangingState={1}", (object)((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceName, (object)commandSessionActivated), Array.Empty<object>());
			_commandSessionActivated = false;
			if (commandSessionActivated)
			{
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("ActiveSession", true);
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("CommandSessionActivated", true);
			}
			TaggedLog.Debug("LogicalDeviceRelayHBridgeMomentaryType2Sim", String.Concat("CommandDeactivateSession (SIM) for ", ((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceName, " - Stop"), Array.Empty<object>());
		}

		public Task<CommandResult> SendCommandAsync(IDeviceCommandPacket dataPacket, CancellationToken cancelToken, Func<ILogicalDevice, CommandControl> cmdControl = null, CommandSendOption options = (CommandSendOption)0)
		{
			//IL_0019: Unknown result type (might be due to invalid IL or missing references)
			//IL_001b: Unknown result type (might be due to invalid IL or missing references)
			return SendCommandAsync(dataPacket.CommandByte, ((IDeviceDataPacket)dataPacket).CopyCurrentData(), ((IDeviceDataPacket)dataPacket).Size, dataPacket.CommandResponseTimeMs, cancelToken, cmdControl, options);
		}

		public Task<CommandResult> SendCommandAsync(byte commandByte, byte[] data, uint dataSize, int responseTimeMs, CancellationToken cancelToken, Func<ILogicalDevice, CommandControl> cmdControl = null, CommandSendOption options = (CommandSendOption)0)
		{
			if (dataSize != 0)
			{
				return Task.FromResult<CommandResult>((CommandResult)7);
			}
			switch (new LogicalDeviceRelayHBridgeMomentaryCommandType2(((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).LogicalId, (HBridgeCommand)commandByte).Command)
			{
			case HBridgeCommand.Stop:
				_relayStatus.SetState(RelayHBridgeDirection.Stop);
				break;
			case HBridgeCommand.Forward:
				_relayStatus.SetState(RelayHBridgeDirection.Forward);
				break;
			case HBridgeCommand.Reverse:
				_relayStatus.SetState(RelayHBridgeDirection.Reverse);
				break;
			case HBridgeCommand.ClearUserClearRequiredLatch:
				_relayStatus.SetUserClearRequired(disabled: false);
				break;
			case HBridgeCommand.AutoForward:
				SimulateAutoForwardCommand();
				break;
			case HBridgeCommand.AutoReverse:
				SimulateAutoReverseCommand();
				break;
			default:
				return Task.FromResult<CommandResult>((CommandResult)7);
			}
			return Task.FromResult<CommandResult>((CommandResult)0);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public override Task<CommandResult> TryAutoReverseAsync(CancellationToken token)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_000e: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			<TryAutoReverseAsync>d__24 <TryAutoReverseAsync>d__ = default(<TryAutoReverseAsync>d__24);
			<TryAutoReverseAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<TryAutoReverseAsync>d__.token = token;
			<TryAutoReverseAsync>d__.<>1__state = -1;
			<TryAutoReverseAsync>d__.<>t__builder.Start<<TryAutoReverseAsync>d__24>(ref <TryAutoReverseAsync>d__);
			return <TryAutoReverseAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public override Task<CommandResult> TryAutoForwardAsync(CancellationToken token)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_000e: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			<TryAutoForwardAsync>d__25 <TryAutoForwardAsync>d__ = default(<TryAutoForwardAsync>d__25);
			<TryAutoForwardAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<TryAutoForwardAsync>d__.token = token;
			<TryAutoForwardAsync>d__.<>1__state = -1;
			<TryAutoForwardAsync>d__.<>t__builder.Start<<TryAutoForwardAsync>d__25>(ref <TryAutoForwardAsync>d__);
			return <TryAutoForwardAsync>d__.<>t__builder.Task;
		}

		public override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
			CancellationTokenSource? relaySimTaskCancelSource = _relaySimTaskCancelSource;
			if (relaySimTaskCancelSource != null)
			{
				relaySimTaskCancelSource.Cancel();
			}
			CancellationTokenSource? relaySimTaskCancelSource2 = _relaySimTaskCancelSource;
			if (relaySimTaskCancelSource2 != null)
			{
				relaySimTaskCancelSource2.Dispose();
			}
			_relaySimTaskCancelSource = null;
		}

		protected override void DebugUpdateDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, uint dataLength, string optionalText = "")
		{
			TaggedLog.Information("LogicalDeviceRelayHBridgeMomentaryType2Sim", String.Format("Data Changed {0}: Relay1(right) = {1}, Relay2(left) = {2}, Faults = {3} {4} UserClearRequired={5} {6}", (object[])(object)new Object[7]
			{
				(Object)((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).LogicalId,
				(object)((LogicalDevice<LogicalDeviceRelayHBridgeStatusType2, LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceStatus.Relay1State(((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).LogicalId),
				(object)((LogicalDevice<LogicalDeviceRelayHBridgeStatusType2, LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceStatus.Relay2State(((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).LogicalId),
				(object)((LogicalDevice<LogicalDeviceRelayHBridgeStatusType2, LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceStatus.IsFaulted,
				(Object)ArrayExtension.DebugDump(((LogicalDeviceDataPacketMutableDoubleBuffer)_relayStatus).Data, " ", false),
				(object)_relayStatus.UserClearRequired,
				(Object)optionalText
			}), Array.Empty<object>());
		}

		public void SimSetUserClearRequired(bool clearRequired)
		{
			_relayStatus.SetUserClearRequired(clearRequired);
		}

		public void SimSetUserMessageDtc(DTC_ID dtc)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			_relayStatus.SetUserMessageDtc(dtc);
		}

		private void SimulateAutoForwardCommand()
		{
			if (!((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceCapability.AreAutoCommandsSupported)
			{
				SimSetUserMessageDtc((DTC_ID)1737);
				return;
			}
			if (!_runningAutoCommand)
			{
				_runningAutoCommand = true;
				_autoCommandTimer.Restart();
				_relayStatus.SetState(RelayHBridgeDirection.Forward);
			}
			SimSetUserMessageDtc((DTC_ID)1735);
			if (_autoCommandTimer.ElapsedMilliseconds > 5000)
			{
				SimSetUserMessageDtc((DTC_ID)1831);
				_runningAutoCommand = false;
			}
		}

		private void SimulateAutoReverseCommand()
		{
			if (!((LogicalDevice<LogicalDeviceRelayHBridgeCapabilityType2>)(object)this).DeviceCapability.AreAutoCommandsSupported)
			{
				SimSetUserMessageDtc((DTC_ID)1737);
				return;
			}
			if (!_runningAutoCommand)
			{
				_runningAutoCommand = true;
				_autoCommandTimer.Restart();
				_relayStatus.SetState(RelayHBridgeDirection.Reverse);
			}
			SimSetUserMessageDtc((DTC_ID)1735);
			if (_autoCommandTimer.ElapsedMilliseconds > 5000)
			{
				SimSetUserMessageDtc((DTC_ID)1831);
				_runningAutoCommand = false;
			}
		}
	}
	public class LogicalDeviceRelayHBridgeStatusType2 : LogicalDeviceRelayStatusType2<RelayHBridgeDirection>, ILogicalDeviceRelayHBridgeStatus, IDeviceDataPacketMutable, IDeviceDataPacket, ILogicalDeviceStatus<LogicalDeviceRelayHBridgeStatusType2Serializable>, ILogicalDeviceStatus, INotifyPropertyChanged
	{
		public const BasicBitMask ReverseCommandAllowedBitmask = (BasicBitMask)64;

		public const BasicBitMask ForwardCommandAllowedBitmask = (BasicBitMask)128;

		public override RelayHBridgeDirection State
		{
			get
			{
				switch (OutputState)
				{
				case RelayHBridgeOutputState.Stop:
				case RelayHBridgeOutputState.Homing:
					return RelayHBridgeDirection.Stop;
				case RelayHBridgeOutputState.Forward:
					return RelayHBridgeDirection.Forward;
				case RelayHBridgeOutputState.Reverse:
					return RelayHBridgeDirection.Reverse;
				default:
					return RelayHBridgeDirection.Unknown;
				}
			}
		}

		public RelayHBridgeOutputState OutputState => (RelayHBridgeOutputState)(base.RawOutputState & 0xF);

		public bool IsStopped
		{
			get
			{
				if (State != RelayHBridgeDirection.Unknown)
				{
					return State == RelayHBridgeDirection.Stop;
				}
				return true;
			}
		}

		public bool IsHoming => OutputState == RelayHBridgeOutputState.Homing;

		public bool CommandForwardNotHazardous => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)128, 0);

		public bool CommandReverseNotHazardous => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)64, 0);

		public AwningWindStrength WindProtectionLevel
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_0006: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				//IL_000d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Expected I4, but got Unknown
				DTC_ID userMessageDtc = base.UserMessageDtc;
				return (userMessageDtc - 1851) switch
				{
					0 => AwningWindStrength.None, 
					1 => AwningWindStrength.Low, 
					2 => AwningWindStrength.Medium, 
					3 => AwningWindStrength.High, 
					_ => AwningWindStrength.Unknown, 
				};
			}
		}

		public bool Relay1State(ILogicalDeviceId logicalId)
		{
			return State.ConvertToRelayEnergized(logicalId) == RelayHBridgeEnergized.Relay1;
		}

		public bool Relay2State(ILogicalDeviceId logicalId)
		{
			return State.ConvertToRelayEnergized(logicalId) == RelayHBridgeEnergized.Relay2;
		}

		public RelayHBridgeDirection GetHBridgeDirection(ILogicalDeviceId logicalId)
		{
			return State;
		}

		public void SetState(bool relay1State, bool relay2State, ILogicalDeviceId logicalId)
		{
			if (relay1State && relay2State)
			{
				Log.Error("LogicalDeviceRelayHBridgeStatusType2 Doesn't support breaking (both relays on) switching to 'off' state");
				SetState(RelayHBridgeDirection.Stop);
			}
			else if (!relay1State && !relay2State)
			{
				SetState(RelayHBridgeDirection.Stop);
			}
			else
			{
				RelayHBridgeDirection state = RelayHBridgeDirectionExtension.ConvertToHBridgeDirection(relay1State, relay2State, logicalId);
				SetState(state);
			}
		}

		public bool SetCommandForwardNotHazardous(bool notHazardous)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)128, notHazardous, 0);
			return true;
		}

		public bool SetCommandReverseNotHazardous(bool notHazardous)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)64, notHazardous, 0);
			return true;
		}

		public bool CommandForwardAllowed(ILogicalDeviceWithStatus<ILogicalDeviceRelayHBridgeStatus> logicalDevice)
		{
			return RelayHBridgeDirection.Forward.Allowed(logicalDevice);
		}

		public bool CommandReverseAllowed(ILogicalDeviceWithStatus<ILogicalDeviceRelayHBridgeStatus> logicalDevice)
		{
			return RelayHBridgeDirection.Reverse.Allowed(logicalDevice);
		}

		public LogicalDeviceRelayHBridgeStatusType2()
			: base(6u)
		{
		}

		public LogicalDeviceRelayHBridgeStatusType2Serializable CopyAsSerializable()
		{
			return new LogicalDeviceRelayHBridgeStatusType2Serializable(this);
		}

		public ILogicalDeviceRelayHBridgeStatus CopyStatus()
		{
			LogicalDeviceRelayHBridgeStatusType2 logicalDeviceRelayHBridgeStatusType = new LogicalDeviceRelayHBridgeStatusType2();
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayHBridgeStatusType).Update(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data.Length, false);
			return logicalDeviceRelayHBridgeStatusType;
		}

		public override string ToString()
		{
			return String.Format("OutputState = {0}, {1}", (object)OutputState, (object)ArrayExtension.DebugDump(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, " ", false));
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	internal record LogicalDeviceTagAppAssociatedAwningLight : Object, ILogicalDeviceSnapshotTag, ILogicalDeviceTag, IEquatable<ILogicalDeviceTag>, IJsonSerializerClass
	{
		[CompilerGenerated]
		protected virtual Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceTagAppAssociatedAwningLight);
			}
		}

		[JsonProperty]
		public virtual string SerializerClass => ((MemberInfo)((Object)this).GetType()).Name;

		[JsonProperty]
		public string? AppAssociatedLightLogicalIdString
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		}

		[JsonConstructor]
		public LogicalDeviceTagAppAssociatedAwningLight(string? ldiStringEncodedLogicalId)
		{
			AppAssociatedLightLogicalIdString = ldiStringEncodedLogicalId ?? null;
		}

		public virtual bool Equals(ILogicalDeviceTag other)
		{
			return ((Object)this).Equals((object)other);
		}

		static LogicalDeviceTagAppAssociatedAwningLight()
		{
			Type declaringType = ((MemberInfo)MethodBase.GetCurrentMethod()).DeclaringType;
			TypeRegistry.Register(((MemberInfo)declaringType).Name, declaringType);
		}

		public override string ToString()
		{
			return String.Concat("Ldi String Encoded Logical Id: ", AppAssociatedLightLogicalIdString);
		}

		public static LogicalDeviceTagAppAssociatedAwningLight? GetTag(ILogicalDeviceRelayHBridge logicalDevice)
		{
			return Enumerable.FirstOrDefault<LogicalDeviceTagAppAssociatedAwningLight>(((ILogicalDevice)logicalDevice).DeviceService.DeviceManager.TagManager.GetTags<LogicalDeviceTagAppAssociatedAwningLight>((ILogicalDevice)logicalDevice));
		}

		public static void RemoveTag(ILogicalDeviceRelayHBridge logicalDevice, LogicalDeviceTagAppAssociatedAwningLight tag)
		{
			((ILogicalDevice)logicalDevice).DeviceService.DeviceManager.TagManager.RemoveTag((ILogicalDeviceTag)(object)tag, (ILogicalDevice)logicalDevice);
		}

		public static void SetTag(ILogicalDeviceRelayHBridge logicalDevice, LogicalDeviceTagAppAssociatedAwningLight tag)
		{
			LogicalDeviceTagManager tagManager = ((ILogicalDevice)logicalDevice).DeviceService.DeviceManager.TagManager;
			LogicalDeviceTagAppAssociatedAwningLight tag2 = GetTag(logicalDevice);
			if ((object)tag != tag2)
			{
				if ((object)tag2 != null)
				{
					tagManager.RemoveTag((ILogicalDeviceTag)(object)tag2, (ILogicalDevice)logicalDevice);
				}
				tagManager.AddTag((ILogicalDeviceTag)(object)tag, (ILogicalDevice)logicalDevice);
			}
		}

		[CompilerGenerated]
		protected virtual bool PrintMembers(StringBuilder builder)
		{
			RuntimeHelpers.EnsureSufficientExecutionStack();
			builder.Append("SerializerClass = ");
			builder.Append((object)SerializerClass);
			builder.Append(", AppAssociatedLightLogicalIdString = ");
			builder.Append((object)AppAssociatedLightLogicalIdString);
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return EqualityComparer<Type>.Default.GetHashCode(EqualityContract) * -1521134295 + EqualityComparer<string>.Default.GetHashCode(AppAssociatedLightLogicalIdString);
		}

		[CompilerGenerated]
		public virtual bool Equals(LogicalDeviceTagAppAssociatedAwningLight? other)
		{
			if ((object)this != other)
			{
				if ((object)other != null && EqualityContract == other.EqualityContract)
				{
					return EqualityComparer<string>.Default.Equals(AppAssociatedLightLogicalIdString, other.AppAssociatedLightLogicalIdString);
				}
				return false;
			}
			return true;
		}

		[CompilerGenerated]
		protected LogicalDeviceTagAppAssociatedAwningLight(LogicalDeviceTagAppAssociatedAwningLight original)
		{
			AppAssociatedLightLogicalIdString = original.AppAssociatedLightLogicalIdString;
		}
	}
	public class RvKindNotSupportedException : Exception
	{
	}
	public class RvKindOperationCanceledException : OperationCanceledException
	{
	}
	public class RvKindTimeoutException : TimeoutException
	{
	}
	public class RvKindException : Exception
	{
		public RvKindException(string message, Exception nested)
			: base(message, nested)
		{
		}
	}
	public class LogicalDeviceRvKindEx : LogicalDeviceExBase<ILogicalDevice>
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ReadRvKindAsync>d__8 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<RvKind> <>t__builder;

			public LogicalDeviceRvKindEx <>4__this;

			public CancellationToken cancellationToken;

			private ILogicalDevice <logicalDevice>5__2;

			private int <year>5__3;

			private int <makeId>5__4;

			private int <modelId>5__5;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_0398: Expected O, but got Unknown
				//IL_03cc: Expected O, but got Unknown
				//IL_0400: Expected O, but got Unknown
				//IL_043c: Expected O, but got Unknown
				//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0196: Unknown result type (might be due to invalid IL or missing references)
				//IL_019b: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0240: Unknown result type (might be due to invalid IL or missing references)
				//IL_0245: Unknown result type (might be due to invalid IL or missing references)
				//IL_024d: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ea: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ef: Unknown result type (might be due to invalid IL or missing references)
				//IL_02f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_0151: Unknown result type (might be due to invalid IL or missing references)
				//IL_0157: Unknown result type (might be due to invalid IL or missing references)
				//IL_0161: Unknown result type (might be due to invalid IL or missing references)
				//IL_0166: Unknown result type (might be due to invalid IL or missing references)
				//IL_01fb: Unknown result type (might be due to invalid IL or missing references)
				//IL_0201: Unknown result type (might be due to invalid IL or missing references)
				//IL_020b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0210: Unknown result type (might be due to invalid IL or missing references)
				//IL_02a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ab: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b5: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_017b: Unknown result type (might be due to invalid IL or missing references)
				//IL_017d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0225: Unknown result type (might be due to invalid IL or missing references)
				//IL_0227: Unknown result type (might be due to invalid IL or missing references)
				//IL_02cf: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ad: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bc: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d3: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceRvKindEx logicalDeviceRvKindEx = <>4__this;
				RvKind result;
				try
				{
					if ((uint)num > 3u)
					{
						<logicalDevice>5__2 = logicalDeviceRvKindEx.FindPreferredLogicalDevice();
					}
					try
					{
						TaskAwaiter<ulong> val;
						ulong result2;
						switch (num)
						{
						default:
							if (<logicalDevice>5__2 == null)
							{
								throw new RvKindNotSupportedException();
							}
							if (!(<logicalDevice>5__2 is ILogicalDeviceSimulated))
							{
								val = new LogicalDevicePid(<logicalDevice>5__2, PID.RV_YEAR, (LogicalDeviceSessionType)0, (Func<ulong, bool>)null).ReadValueAsync(cancellationToken).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 0);
									<>u__1 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <ReadRvKindAsync>d__8>(ref val, ref this);
									return;
								}
								goto IL_0108;
							}
							result = new RvKind(new RvDetail<int>(2020, 2020, "2020"), new RvDetail<string>(1), new RvDetail<string>(2), new RvDetail<string>(3));
							goto end_IL_001f;
						case 0:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<ulong>);
							num = (<>1__state = -1);
							goto IL_0108;
						case 1:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<ulong>);
							num = (<>1__state = -1);
							goto IL_01b2;
						case 2:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<ulong>);
							num = (<>1__state = -1);
							goto IL_025c;
						case 3:
							{
								val = <>u__1;
								<>u__1 = default(TaskAwaiter<ulong>);
								num = (<>1__state = -1);
								break;
							}
							IL_025c:
							result2 = val.GetResult();
							<modelId>5__5 = (int)result2;
							TaggedLog.Information(((LogicalDeviceExBase<ILogicalDevice>)logicalDeviceRvKindEx).LogTag, String.Format("{0}: Read Model {1}", (object)"ReadRvKindAsync", (object)<modelId>5__5), Array.Empty<object>());
							val = new LogicalDevicePid(<logicalDevice>5__2, PID.RV_FLOORPLAN_ID, (LogicalDeviceSessionType)0, (Func<ulong, bool>)null).ReadValueAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 3);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <ReadRvKindAsync>d__8>(ref val, ref this);
								return;
							}
							break;
							IL_01b2:
							result2 = val.GetResult();
							<makeId>5__4 = (int)result2;
							TaggedLog.Information(((LogicalDeviceExBase<ILogicalDevice>)logicalDeviceRvKindEx).LogTag, String.Format("{0}: Read Make {1}", (object)"ReadRvKindAsync", (object)<makeId>5__4), Array.Empty<object>());
							val = new LogicalDevicePid(<logicalDevice>5__2, PID.RV_MODEL_ID, (LogicalDeviceSessionType)0, (Func<ulong, bool>)null).ReadValueAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 2);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <ReadRvKindAsync>d__8>(ref val, ref this);
								return;
							}
							goto IL_025c;
							IL_0108:
							result2 = val.GetResult();
							<year>5__3 = (int)result2;
							TaggedLog.Information(((LogicalDeviceExBase<ILogicalDevice>)logicalDeviceRvKindEx).LogTag, String.Format("{0}: Read Year {1}", (object)"ReadRvKindAsync", (object)<year>5__3), Array.Empty<object>());
							val = new LogicalDevicePid(<logicalDevice>5__2, PID.RV_MAKE_ID, (LogicalDeviceSessionType)0, (Func<ulong, bool>)null).ReadValueAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <ReadRvKindAsync>d__8>(ref val, ref this);
								return;
							}
							goto IL_01b2;
						}
						int num2 = (int)val.GetResult();
						TaggedLog.Information(((LogicalDeviceExBase<ILogicalDevice>)logicalDeviceRvKindEx).LogTag, String.Format("{0}: Read Floor Plan {1}", (object)"ReadRvKindAsync", (object)num2), Array.Empty<object>());
						result = new RvKind(new RvDetail<int>(<year>5__3, <year>5__3, ((Int32)(ref <year>5__3)).ToString()), new RvDetail<string>(<makeId>5__4), new RvDetail<string>(<modelId>5__5), new RvDetail<string>(num2), isHardwareRead: true);
						end_IL_001f:;
					}
					catch (RvKindNotSupportedException)
					{
						throw;
					}
					catch (PhysicalDeviceNotFoundException)
					{
						throw;
					}
					catch (TaskCanceledException ex3)
					{
						TaskCanceledException ex4 = ex3;
						TaggedLog.Error(((LogicalDeviceExBase<ILogicalDevice>)logicalDeviceRvKindEx).LogTag, String.Format("{0}: Canceled for {1}: {2}", (object)"ReadRvKindAsync", (object)<logicalDevice>5__2, (object)((Exception)ex4).Message), Array.Empty<object>());
						throw new RvKindOperationCanceledException();
					}
					catch (TimeoutException ex5)
					{
						TimeoutException ex6 = ex5;
						TaggedLog.Error(((LogicalDeviceExBase<ILogicalDevice>)logicalDeviceRvKindEx).LogTag, String.Format("{0}: Timeout for {1}: {2}", (object)"ReadRvKindAsync", (object)<logicalDevice>5__2, (object)((Exception)ex6).Message), Array.Empty<object>());
						throw new RvKindTimeoutException();
					}
					catch (Exception ex7)
					{
						Exception ex8 = ex7;
						string text = String.Format("{0}: Exception for {1}: {2}", (object)"ReadRvKindAsync", (object)<logicalDevice>5__2, (object)ex8.Message);
						TaggedLog.Error(((LogicalDeviceExBase<ILogicalDevice>)logicalDeviceRvKindEx).LogTag, text, Array.Empty<object>());
						throw new RvKindException(text, ex8);
					}
				}
				catch (Exception ex9)
				{
					Exception exception = ex9;
					<>1__state = -2;
					<logicalDevice>5__2 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<logicalDevice>5__2 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		protected override string LogTag => "LogicalDeviceRvKindEx";

		public bool IsRvKindAvailable => FindPreferredLogicalDevice() != null;

		public static ILogicalDeviceEx LogicalDeviceExFactory(ILogicalDevice logicalDevice)
		{
			return LogicalDeviceExBase<ILogicalDevice>.LogicalDeviceExFactory<LogicalDeviceRvKindEx>(logicalDevice, (Func<ILogicalDevice, LogicalDeviceExScope>)GetLogicalDeviceScope);
		}

		protected static LogicalDeviceExScope GetLogicalDeviceScope(ILogicalDevice logicalDevice)
		{
			if (RvKindSupported(logicalDevice))
			{
				return (LogicalDeviceExScope)2;
			}
			return (LogicalDeviceExScope)0;
		}

		private static bool RvKindSupported(ILogicalDevice logicalDevice)
		{
			if (DEVICE_TYPE.op_Implicit(logicalDevice.LogicalId.DeviceType) != 32 && DEVICE_TYPE.op_Implicit(logicalDevice.LogicalId.DeviceType) != 33)
			{
				return DEVICE_TYPE.op_Implicit(logicalDevice.LogicalId.DeviceType) == 30;
			}
			return true;
		}

		public ILogicalDevice FindPreferredLogicalDevice()
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0024: Unknown result type (might be due to invalid IL or missing references)
			//IL_0025: Unknown result type (might be due to invalid IL or missing references)
			//IL_003b: Expected I4, but got Unknown
			Enumerator<ILogicalDevice> enumerator = base.GetAttachedLogicalDevices().GetEnumerator();
			try
			{
				while (enumerator.MoveNext())
				{
					ILogicalDevice current = enumerator.Current;
					if (RvKindSupported(current))
					{
						LogicalDeviceActiveConnection activeConnection = ((IDevicesCommon)current).ActiveConnection;
						switch ((int)activeConnection)
						{
						case 1:
						case 3:
							return current;
						}
					}
				}
			}
			finally
			{
				((IDisposable)enumerator/*cast due to .constrained prefix*/).Dispose();
			}
			return null;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<RvKind> ReadRvKindAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ReadRvKindAsync>d__8 <ReadRvKindAsync>d__ = default(<ReadRvKindAsync>d__8);
			<ReadRvKindAsync>d__.<>t__builder = AsyncTaskMethodBuilder<RvKind>.Create();
			<ReadRvKindAsync>d__.<>4__this = this;
			<ReadRvKindAsync>d__.cancellationToken = cancellationToken;
			<ReadRvKindAsync>d__.<>1__state = -1;
			<ReadRvKindAsync>d__.<>t__builder.Start<<ReadRvKindAsync>d__8>(ref <ReadRvKindAsync>d__);
			return <ReadRvKindAsync>d__.<>t__builder.Task;
		}

		public override void LogicalDeviceAttached(ILogicalDevice logicalDevice)
		{
			base.LogicalDeviceAttached(logicalDevice);
			TaggedLog.Debug(((LogicalDeviceExBase<ILogicalDevice>)this).LogTag, String.Format("LogicalDeviceRvKindEx LogicalDeviceAttached: {0}", (object)logicalDevice), Array.Empty<object>());
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public class RvDetail<TValue> : JsonSerializable<RvDetail<TValue>>, IEquatable<RvDetail<TValue>>
	{
		public const int UnknownLciId = -1;

		[JsonPropertyName("PID")]
		[JsonProperty(/*Could not decode attribute arguments.*/)]
		public int LciId
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		public TValue Value
		{
			[CompilerGenerated]
			get;
		}

		[JsonPropertyName("Id")]
		[JsonProperty(/*Could not decode attribute arguments.*/)]
		public string SalesforceId
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		public string Name
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		public string DisplayName
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		public string Year
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		public string Priority
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		[JsonConstructor]
		public RvDetail(int lciId, TValue value = default(TValue), string salesforceId = null, string name = null, string displayName = null, string year = null, string priority = null)
		{
			//IL_0090: Unknown result type (might be due to invalid IL or missing references)
			//IL_0096: Expected I4, but got Unknown
			((JsonSerializable<RvDetail<RvDetail<TValue>>>)(object)this)..ctor();
			LciId = lciId;
			Value = value;
			SalesforceId = salesforceId;
			Name = name;
			DisplayName = displayName;
			Year = year;
			Priority = priority;
			if (lciId != 0 && value is Int32)
			{
				Value = (TValue)(object)LciId;
				int lciId2 = LciId;
				DisplayName = ((Int32)(ref lciId2)).ToString();
			}
			if (lciId == 0 && value is Int32)
			{
				object obj = value;
				int num = (int)(Int32)((obj is Int32) ? obj : null);
				LciId = num;
			}
		}

		public bool Equals(RvDetail<TValue> other)
		{
			if (other != null && LciId == other.LciId && Object.Equals((object)Value, (object)other.Value) && String.Equals(SalesforceId, other.SalesforceId) && String.Equals(Name, other.Name) && String.Equals(DisplayName, other.DisplayName) && String.Equals(Year, other.Year))
			{
				return String.Equals(Priority, other.Priority);
			}
			return false;
		}

		public override bool Equals(object obj)
		{
			if (obj == null)
			{
				return false;
			}
			if (this == obj)
			{
				return true;
			}
			if (obj is RvDetail<TValue> other)
			{
				return Equals(other);
			}
			return false;
		}

		public override int GetHashCode()
		{
			return HashCode.Hash<string>(HashCode.Hash<string>(HashCode.Hash<string>(HashCode.Hash<string>(HashCode.Hash<string>(HashCode.Hash<TValue>(HashCode.Hash<int>(17, LciId), Value), SalesforceId), Name), DisplayName), Year), Priority);
		}

		public override string ToString()
		{
			return String.Format("LciId({0}), Value({1}), SalesforceId({2}), Name({3}), DisplayName({4}), Year({5}), Priority({6})", (object[])(object)new Object[7]
			{
				(object)LciId,
				(object)Value,
				(Object)SalesforceId,
				(Object)Name,
				(Object)DisplayName,
				(Object)Year,
				(Object)Priority
			});
		}
	}
	public interface IRvKind : IEquatable<IRvKind>, IJsonSerializable, IJsonSerializerClass
	{
		RvDetail<int>? Year { get; }

		RvDetail<string>? Make { get; }

		RvDetail<string>? Model { get; }

		RvDetail<string>? FloorPlan { get; }

		bool IsHardwareRead { get; }

		string? Vin { get; }

		bool IsHardwareReadVin { get; }

		bool LciIdsAreSupplied();

		bool IsAllInformationSupplied();

		bool ValuesAreSupplied();
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public class RvKind : JsonSerializable<RvKind>, IRvKind, IEquatable<IRvKind>, IJsonSerializable, IJsonSerializerClass
	{
		public static readonly RvKind None;

		public static readonly int RvMinimumManufacturedYear;

		[JsonProperty]
		public string SerializerClass => ((MemberInfo)((Object)this).GetType()).Name;

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		[field: CompilerGenerated]
		public RvDetail<int>? Year
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		[field: CompilerGenerated]
		public RvDetail<string>? Make
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		[field: CompilerGenerated]
		public RvDetail<string>? Model
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		[field: CompilerGenerated]
		public RvDetail<string>? FloorPlan
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public bool IsHardwareRead
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		[field: CompilerGenerated]
		public string? Vin
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public bool IsHardwareReadVin
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public RvKind(RvDetail<int>? year, RvDetail<string>? make, RvDetail<string>? model, RvDetail<string>? floorPlan, bool isHardwareRead = false, string? vin = null, bool isHardwareReadVin = false)
		{
			Year = year;
			Make = make;
			Model = model;
			FloorPlan = floorPlan;
			IsHardwareRead = isHardwareRead;
			Vin = vin;
			IsHardwareReadVin = isHardwareReadVin;
		}

		public bool ValuesAreSupplied()
		{
			//IL_001a: Unknown result type (might be due to invalid IL or missing references)
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0012: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			RvDetail<int>? year = Year;
			Nullable<int> val = ((year != null) ? new Nullable<int>(year.Value) : default(Nullable<int>));
			int rvMinimumManufacturedYear = RvMinimumManufacturedYear;
			if (((val.GetValueOrDefault() > rvMinimumManufacturedYear) & val.HasValue) && !String.IsNullOrWhiteSpace(Make?.Name) && !String.IsNullOrWhiteSpace(Model?.Name))
			{
				return !String.IsNullOrWhiteSpace(FloorPlan?.Name);
			}
			return false;
		}

		public bool LciIdsAreSupplied()
		{
			//IL_001a: Unknown result type (might be due to invalid IL or missing references)
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0012: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			RvDetail<int>? year = Year;
			Nullable<int> val = ((year != null) ? new Nullable<int>(year.LciId) : default(Nullable<int>));
			int rvMinimumManufacturedYear = RvMinimumManufacturedYear;
			if ((val.GetValueOrDefault() > rvMinimumManufacturedYear) & val.HasValue)
			{
				RvDetail<string>? make = Make;
				if (make != null)
				{
					_ = make.LciId;
					if (true)
					{
						RvDetail<string>? model = Model;
						if (model != null)
						{
							_ = model.LciId;
							if (true)
							{
								RvDetail<string>? floorPlan = FloorPlan;
								if (floorPlan == null)
								{
									return false;
								}
								_ = floorPlan.LciId;
								return true;
							}
						}
					}
				}
			}
			return false;
		}

		internal bool SalesforceIdsAreSupplied()
		{
			int num = default(int);
			if (!String.IsNullOrWhiteSpace(Year?.SalesforceId) && Int32.TryParse(Year?.SalesforceId, ref num) && num > RvMinimumManufacturedYear && !String.IsNullOrWhiteSpace(Make?.SalesforceId) && !String.IsNullOrWhiteSpace(Model?.SalesforceId))
			{
				RvDetail<string>? floorPlan = FloorPlan;
				if (floorPlan == null || floorPlan.LciId != -1)
				{
					return !String.IsNullOrWhiteSpace(FloorPlan?.SalesforceId);
				}
				return true;
			}
			return false;
		}

		public bool IsAllInformationSupplied()
		{
			if (ValuesAreSupplied() && LciIdsAreSupplied())
			{
				return SalesforceIdsAreSupplied();
			}
			return false;
		}

		public bool Equals(IRvKind other)
		{
			if (this == other)
			{
				return true;
			}
			if (other == null)
			{
				return false;
			}
			if (Object.Equals((object)Year, (object)other.Year) && Object.Equals((object)Make, (object)other.Make) && Object.Equals((object)Model, (object)other.Model))
			{
				return Object.Equals((object)FloorPlan, (object)other.FloorPlan);
			}
			return false;
		}

		public override bool Equals(object obj)
		{
			if (obj == null)
			{
				return false;
			}
			if (this == obj)
			{
				return true;
			}
			if (!(obj is IRvKind other))
			{
				return false;
			}
			return Equals(other);
		}

		public override int GetHashCode()
		{
			return HashCode.Hash<RvDetail<string>>(HashCode.Hash<RvDetail<string>>(HashCode.Hash<RvDetail<string>>(HashCode.Hash<RvDetail<int>>(17, Year), Make), Model), FloorPlan);
		}

		static RvKind()
		{
			None = new RvKind(null, null, null, null);
			RvMinimumManufacturedYear = 1930;
			MethodBase currentMethod = MethodBase.GetCurrentMethod();
			Type val = ((currentMethod != null) ? ((MemberInfo)currentMethod).DeclaringType : null);
			if (val != (Type)null)
			{
				TypeRegistry.Register(((MemberInfo)val).Name, val);
			}
		}

		public override string ToString()
		{
			return String.Format("Year({0}), Make({1}), Model({2}), FloorPlan({3}), Vin({4})", (object[])(object)new Object[5]
			{
				(Object)Year,
				(Object)Make,
				(Object)Model,
				(Object)FloorPlan,
				(Object)Vin
			});
		}
	}
	[AttributeUsage(/*Could not decode attribute arguments.*/)]
	public class TankSensorTypeAttribute : Attribute
	{
		[field: CompilerGenerated]
		public string FunctionNameIdentifier
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public int SortPriority
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public TankHoldingType HoldingType
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public TankLevelThresholdType ThresholdType
		{
			[CompilerGenerated]
			get;
		}

		public TankSensorTypeAttribute(string functionNameIdentifier, int sortPriority, TankHoldingType holdingType, TankLevelThresholdType thresholdType)
		{
			FunctionNameIdentifier = functionNameIdentifier.ToUpper();
			SortPriority = sortPriority;
			HoldingType = holdingType;
			ThresholdType = thresholdType;
		}
	}
	public enum TankSensorType : Enum
	{
		[TankSensorType("Black", 6, TankHoldingType.Waste, TankLevelThresholdType.High)]
		BlackTank,
		[TankSensorType("Grey", 5, TankHoldingType.Waste, TankLevelThresholdType.High)]
		GreyTank,
		[TankSensorType("Fresh", 4, TankHoldingType.Supply, TankLevelThresholdType.Low)]
		FreshTank,
		[TankSensorType("Fuel", 3, TankHoldingType.Supply, TankLevelThresholdType.Low)]
		FuelTank,
		[TankSensorType("LP Tank", 2, TankHoldingType.Supply, TankLevelThresholdType.Low)]
		LpTank,
		[TankSensorType("Unknown", 1, TankHoldingType.Unknown, TankLevelThresholdType.Unknown)]
		UnknownTank
	}
	public enum TankHoldingType : Enum
	{
		Supply,
		Waste,
		Unknown
	}
	public enum TankLevelThresholdType : Enum
	{
		Low = 0,
		High = 1,
		Unknown = 255
	}
	public enum TankSensorAlertId : Enum
	{
		TankLevelAlert,
		BatteryLevelAlert
	}
	public interface ITankSensor
	{
		byte Level { get; }

		Nullable<byte> BatteryLevel { get; }

		Nullable<byte> MeasurementQuality { get; }

		Nullable<float> XAcceleration { get; }

		Nullable<float> YAcceleration { get; }

		TankSensorType SensorType { get; }

		TankHoldingType HoldingType { get; }

		bool IsEmbeddedTank { get; }

		bool IsTankLevelOutsideThreshold { get; }

		[Obsolete("Use the SensorPrecisionType property instead")]
		bool IsHighPrecisionTank { get; }

		SensorPrecisionType SensorPrecisionType { get; }

		bool IsLegacyTank { get; }

		bool IsSetAlertTankLevelThresholdSupported { get; }

		bool IsTankCapacitySupported { get; }

		bool IsTankHeightOrientationSupported { get; }

		Nullable<TankSensorCapacity> TankCapacity { get; set; }

		AsyncValueCachedState TankCapacityState { get; }

		TankSensorAlertThreshold AlertThreshold { get; set; }

		AsyncValueCachedState AlertThresholdState { get; }

		Task<LogicalDeviceTankSensor.TankOrientationData?> GetTankOrientationDataAsync(CancellationToken cancellationToken = default(CancellationToken));

		Task SetVerticalTankConfigurationAsync(int heightInMillimeters, CancellationToken cancellationToken = default(CancellationToken));

		Task SetHorizontalTankConfigurationAsync(int heightInMillimeters, CancellationToken cancellationToken = default(CancellationToken));

		Task<Nullable<TankSensorCapacity>> GetTankCapacityAsync(CancellationToken cancellationToken);

		Task SetTankCapacity(TankSensorCapacity value, CancellationToken cancellationToken);

		Task<TankSensorAlertThreshold> GetAlertTankLevelThresholdAsync(CancellationToken cancellationToken);

		Task SetAlertTankLevelThreshold(TankSensorAlertThreshold alertThreshold, CancellationToken cancellationToken);
	}
	public interface ILogicalDeviceTankSensor : ITankSensor, ILogicalDeviceWithStatus<LogicalDeviceTankSensorStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceTankSensorStatus>, ILogicalDeviceWithStatusAlerts, ILogicalDeviceWithStatusAlertsLocap, ILogicalDeviceAccessory, IAccessoryDevice, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement
	{
	}
	public interface ILogicalDeviceDirectTankSensor : ILogicalDeviceTankSensor, ITankSensor, ILogicalDeviceWithStatus<LogicalDeviceTankSensorStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceTankSensorStatus>, ILogicalDeviceWithStatusAlerts, ILogicalDeviceWithStatusAlertsLocap, ILogicalDeviceAccessory, IAccessoryDevice, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public interface ILogicalDeviceRemoteTankSensor : ILogicalDeviceTankSensor, ITankSensor, ILogicalDeviceWithStatus<LogicalDeviceTankSensorStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceTankSensorStatus>, ILogicalDeviceWithStatusAlerts, ILogicalDeviceWithStatusAlertsLocap, ILogicalDeviceAccessory, IAccessoryDevice, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceRemote
	{
	}
	public class LogicalDeviceTankSensor : LogicalDevice<LogicalDeviceTankSensorStatus, ILogicalDeviceTankSensorCapability>, ILogicalDeviceDirectTankSensor, ILogicalDeviceTankSensor, ITankSensor, ILogicalDeviceWithStatus<LogicalDeviceTankSensorStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceTankSensorStatus>, ILogicalDeviceWithStatusAlerts, ILogicalDeviceWithStatusAlertsLocap, ILogicalDeviceAccessory, IAccessoryDevice, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink, ILogicalDeviceRemoteTankSensor, ILogicalDeviceRemote
	{
		public class TankOrientationData : Object
		{
			[field: CompilerGenerated]
			public bool IsHorizontal
			{
				[CompilerGenerated]
				get;
			}

			[field: CompilerGenerated]
			public ushort HeightOrDiameterMm
			{
				[CompilerGenerated]
				get;
			}

			[field: CompilerGenerated]
			public Nullable<ushort> MinHeightMm
			{
				[CompilerGenerated]
				get;
			}

			public TankOrientationData(bool isHorizontal, ushort heightOrDiameterMm, Nullable<ushort> minHeightMm)
			{
				//IL_0015: Unknown result type (might be due to invalid IL or missing references)
				//IL_0016: Unknown result type (might be due to invalid IL or missing references)
				IsHorizontal = isHorizontal;
				HeightOrDiameterMm = heightOrDiameterMm;
				MinHeightMm = minHeightMm;
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <GetAlertTankLevelThresholdAsync>d__94 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<TankSensorAlertThreshold> <>t__builder;

			public LogicalDeviceTankSensor <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<TankSensorAlertThreshold> <>u__1;

			private void MoveNext()
			{
				//IL_00e5: Expected O, but got Unknown
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0043: Unknown result type (might be due to invalid IL or missing references)
				//IL_0058: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTankSensor logicalDeviceTankSensor = <>4__this;
				TankSensorAlertThreshold result;
				try
				{
					TaskAwaiter<TankSensorAlertThreshold> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<TankSensorAlertThreshold>);
						num = (<>1__state = -1);
						goto IL_008f;
					}
					if (logicalDeviceTankSensor.HoldingType == TankHoldingType.Unknown)
					{
						throw new TankSensorHoldingTypeUnknownException(logicalDeviceTankSensor);
					}
					if (logicalDeviceTankSensor.IsSetAlertTankLevelThresholdSupported)
					{
						val = logicalDeviceTankSensor.AlertTankLevelThresholdsPid.ReadAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<TankSensorAlertThreshold>, <GetAlertTankLevelThresholdAsync>d__94>(ref val, ref this);
							return;
						}
						goto IL_008f;
					}
					result = logicalDeviceTankSensor.GetLegacyAlertTankLevelThreshold();
					goto end_IL_000e;
					IL_008f:
					TankSensorAlertThreshold result2 = val.GetResult();
					TankLevelThresholdType thresholdType = result2.ThresholdType;
					TankHoldingType holdingType = logicalDeviceTankSensor.HoldingType;
					if (thresholdType != TankLevelThresholdType.Unknown)
					{
						goto IL_00d2;
					}
					TankSensorAlertThreshold tankSensorAlertThreshold;
					if (holdingType != TankHoldingType.Supply)
					{
						if (holdingType != TankHoldingType.Waste)
						{
							goto IL_00d2;
						}
						tankSensorAlertThreshold = new TankSensorAlertThreshold(TankLevelThresholdType.High, 255);
					}
					else
					{
						tankSensorAlertThreshold = new TankSensorAlertThreshold(TankLevelThresholdType.Low, 0);
					}
					goto IL_00d5;
					IL_00d5:
					result = tankSensorAlertThreshold;
					goto end_IL_000e;
					IL_00d2:
					tankSensorAlertThreshold = result2;
					goto IL_00d5;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <GetTankCapacityAsync>d__73 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<Nullable<TankSensorCapacity>> <>t__builder;

			public LogicalDeviceTankSensor <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<TankSensorCapacity> <>u__1;

			private void MoveNext()
			{
				//IL_0095: Expected O, but got Unknown
				//IL_005c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_0069: Unknown result type (might be due to invalid IL or missing references)
				//IL_0081: Unknown result type (might be due to invalid IL or missing references)
				//IL_0086: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0020: Unknown result type (might be due to invalid IL or missing references)
				//IL_002a: Unknown result type (might be due to invalid IL or missing references)
				//IL_002f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTankSensor logicalDeviceTankSensor = <>4__this;
				Nullable<TankSensorCapacity> result;
				try
				{
					TaskAwaiter<TankSensorCapacity> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<TankSensorCapacity>);
						num = (<>1__state = -1);
						goto IL_0078;
					}
					if (logicalDeviceTankSensor.IsTankCapacitySupported)
					{
						val = logicalDeviceTankSensor.TankCapacityPid.ReadAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<TankSensorCapacity>, <GetTankCapacityAsync>d__73>(ref val, ref this);
							return;
						}
						goto IL_0078;
					}
					result = default(Nullable<TankSensorCapacity>);
					goto end_IL_000e;
					IL_0078:
					TankSensorCapacity result2 = val.GetResult();
					result = new Nullable<TankSensorCapacity>(result2);
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <GetTankOrientationDataAsync>d__110 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<TankOrientationData> <>t__builder;

			public LogicalDeviceTankSensor <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_00d1: Expected O, but got Unknown
				//IL_0066: Unknown result type (might be due to invalid IL or missing references)
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b6: Unknown result type (might be due to invalid IL or missing references)
				//IL_004b: Unknown result type (might be due to invalid IL or missing references)
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTankSensor logicalDeviceTankSensor = <>4__this;
				TankOrientationData result;
				try
				{
					TaskAwaiter<ulong> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ulong>);
						num = (<>1__state = -1);
						goto IL_0082;
					}
					if (logicalDeviceTankSensor.IsTankHeightOrientationSupported)
					{
						val = logicalDeviceTankSensor._tankHeightOrientationPid.ReadAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <GetTankOrientationDataAsync>d__110>(ref val, ref this);
							return;
						}
						goto IL_0082;
					}
					result = null;
					goto end_IL_000e;
					IL_0082:
					ulong result2 = val.GetResult();
					ushort num2 = (ushort)(result2 & 0x1FF);
					ushort heightOrDiameterMm = (ushort)((result2 >> 9) & 0x3FFF);
					bool flag = ((result2 >> 23) & 1) == 1;
					result = new TankOrientationData(flag, heightOrDiameterMm, flag ? default(Nullable<ushort>) : new Nullable<ushort>(num2));
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SetHorizontalTankConfigurationAsync>d__108 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceTankSensor <>4__this;

			public ushort diameterMm;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_00ab: Expected O, but got Unknown
				//IL_0085: Unknown result type (might be due to invalid IL or missing references)
				//IL_008a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0091: Unknown result type (might be due to invalid IL or missing references)
				//IL_004b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				//IL_001e: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTankSensor logicalDeviceTankSensor = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						if (!logicalDeviceTankSensor.IsTankHeightOrientationSupported)
						{
							throw new NotSupportedException("Tank configuration not supported by this device.");
						}
						ulong num2 = 0uL;
						num2 |= (ulong)((long)(diameterMm & 0x3FFF) << 9);
						num2 |= 0x800000;
						val = logicalDeviceTankSensor._tankHeightOrientationPid.WriteAsync(num2, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SetHorizontalTankConfigurationAsync>d__108>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SetVerticalTankConfigurationAsync>d__107 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceTankSensor <>4__this;

			public ushort minHeightMm;

			public ushort heightMm;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_00e9: Expected O, but got Unknown
				//IL_00c3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cf: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				//IL_0093: Unknown result type (might be due to invalid IL or missing references)
				//IL_0098: Unknown result type (might be due to invalid IL or missing references)
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ac: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ad: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTankSensor logicalDeviceTankSensor = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						if (!logicalDeviceTankSensor.IsTankHeightOrientationSupported)
						{
							throw new NotSupportedException("Tank configuration not supported by this device.");
						}
						ulong num2 = 0uL;
						num2 |= (ulong)(minHeightMm & 0x1FF);
						num2 |= (ulong)((long)(heightMm & 0x3FFF) << 9);
						num2 |= 0;
						TaggedLog.Debug("LogicalDeviceTankSensor", String.Format("Writing tank config: minHeight={0}, height={1}", (object)minHeightMm, (object)heightMm), Array.Empty<object>());
						val = logicalDeviceTankSensor._tankHeightOrientationPid.WriteAsync(num2, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SetVerticalTankConfigurationAsync>d__107>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const string LogTag = "LogicalDeviceTankSensor";

		public const string TankLevelAlertKey = "TankLevelAlert";

		public const string TankLowThresholdExceededAlertKey = "TankLowThresholdExceededAlert";

		public const string TankHighThresholdExceededAlertKey = "TankHighThresholdExceededAlert";

		public const string TankUnknownThresholdExceededAlertKey = "TankUnknownThresholdExceededAlert";

		public const string LowBatteryAlertKey = "LowBatteryAlert";

		private const byte UnknownLowThreshold = 0;

		private const byte UnknownHighThreshold = 255;

		public static readonly TankSensorAlertThreshold LegacyTankSensorHighAlertThreshold = new TankSensorAlertThreshold(TankLevelThresholdType.High, 66);

		public static readonly TankSensorAlertThreshold LegacyTankSensorLowAlertThreshold = new TankSensorAlertThreshold(TankLevelThresholdType.Low, 33);

		public static readonly TankSensorAlertThreshold LegacyTankSensorUnknownAlertThreshold = new TankSensorAlertThreshold(TankLevelThresholdType.Unknown, 0);

		private LogicalDevicePidULong _tankHeightOrientationPid;

		private const int BackgroundAlertDelayMs = 30000;

		private readonly ConcurrentDictionary<string, ILogicalDeviceAlert> _alertDict = new ConcurrentDictionary<string, ILogicalDeviceAlert>();

		private const byte AlertActiveFlag = 128;

		private const byte AlertCountBitmask = 127;

		public const int MaxAlertCount = 2;

		private ILogicalDevicePidFixedPoint _batteryVoltagePidCan;

		private static PRODUCT_ID MopekaLpSensorProductId = PRODUCT_ID.BOTTLECHECK_WIRELESS_LP_TANK_SENSOR;

		private static PRODUCT_ID LoCapLpSensorProductId = PRODUCT_ID.LP_TANK_SENSOR_ASSEMBLY;

		[field: CompilerGenerated]
		public RemoteOnline RemoteOnline
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteTankSensor RemoteTankSensor
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public override bool IsLegacyDeviceHazardous => false;

		public byte Level => ((LogicalDevice<LogicalDeviceTankSensorStatus, ILogicalDeviceTankSensorCapability>)this).DeviceStatus.Level;

		public Nullable<byte> BatteryLevel => ((LogicalDevice<LogicalDeviceTankSensorStatus, ILogicalDeviceTankSensorCapability>)this).DeviceStatus.BatteryLevel;

		public Nullable<byte> MeasurementQuality => ((LogicalDevice<LogicalDeviceTankSensorStatus, ILogicalDeviceTankSensorCapability>)this).DeviceStatus.MeasurementQuality;

		public Nullable<float> XAcceleration => ((LogicalDevice<LogicalDeviceTankSensorStatus, ILogicalDeviceTankSensorCapability>)this).DeviceStatus.XAcceleration;

		public Nullable<float> YAcceleration => ((LogicalDevice<LogicalDeviceTankSensorStatus, ILogicalDeviceTankSensorCapability>)this).DeviceStatus.YAcceleration;

		public TankSensorType SensorType => GetTankSensorType(((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).LogicalId);

		public TankHoldingType HoldingType => EnumExtensions.GetAttribute<TankSensorTypeAttribute>((Enum)(object)SensorType, true)?.HoldingType ?? TankHoldingType.Unknown;

		public bool AllowAutoOfflineLogicalDeviceRemoval => IsEmbeddedTank;

		public override bool IsRemoteAccessAvailable
		{
			get
			{
				ILogicalDeviceRemoteManager remoteManager = ((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).DeviceService.RemoteManager;
				if (remoteManager == null)
				{
					return false;
				}
				return remoteManager.IsRemoteAccessAvailable((ILogicalDeviceRemote)(object)this, (IRemoteChannelDef)(RemoteTankSensor?.Channel));
			}
		}

		public IRemoteChannelDefOnline RemoteOnlineChannel => RemoteOnline?.Channel;

		public IEnumerable<ILogicalDeviceAlert> Alerts => (IEnumerable<ILogicalDeviceAlert>)(object)_alertDict.Values;

		public virtual LogicalDeviceExScope VoltageMeasurementBatteryPidScope => (LogicalDeviceExScope)2;

		public virtual ILogicalDevicePidFixedPoint VoltageMeasurementBatteryPid
		{
			get
			{
				//IL_0014: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Expected O, but got Unknown
				//IL_0020: Expected O, but got Unknown
				ILogicalDevicePidFixedPoint obj = _batteryVoltagePidCan;
				if (obj == null)
				{
					LogicalDevicePidFixedPoint val = new LogicalDevicePidFixedPoint((FixedPointType)1, (ILogicalDevice)(object)this, PID.BATTERY_VOLTAGE, (LogicalDeviceSessionType)0, (Func<ulong, bool>)null);
					ILogicalDevicePidFixedPoint val2 = (ILogicalDevicePidFixedPoint)val;
					_batteryVoltagePidCan = (ILogicalDevicePidFixedPoint)val;
					obj = val2;
				}
				return obj;
			}
		}

		public bool IsVoltagePidReadSupported => IsEmbeddedTank;

		public bool IsEmbeddedTank
		{
			get
			{
				if (((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).LogicalId.ProductId != MopekaLpSensorProductId)
				{
					return ((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).LogicalId.ProductId != LoCapLpSensorProductId;
				}
				return false;
			}
		}

		[field: CompilerGenerated]
		public LogicalDevicePidProxyTankSensorCapacity TankCapacityPid
		{
			[CompilerGenerated]
			get;
		}

		public bool IsTankCapacitySupported => ((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).DeviceCapability.IsTankCapacitySupported;

		public Nullable<TankSensorCapacity> TankCapacity
		{
			get
			{
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_000a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0010: Unknown result type (might be due to invalid IL or missing references)
				if (!IsTankCapacitySupported)
				{
					return default(Nullable<TankSensorCapacity>);
				}
				return new Nullable<TankSensorCapacity>(TankCapacityPid.Capacity);
			}
			set
			{
				TankCapacityPid.Capacity = (value.HasValue ? value.Value : TankCapacityPid.Capacity);
			}
		}

		public AsyncValueCachedState TankCapacityState => ((LogicalDevicePidProxy<ILogicalDevicePidULong>)TankCapacityPid).ValueState;

		[field: CompilerGenerated]
		public LogicalDevicePidProxyTankSensorAlertThreshold AlertTankLevelThresholdsPid
		{
			[CompilerGenerated]
			get;
		}

		public bool IsTankLevelOutsideThreshold
		{
			get
			{
				if (IsSetAlertTankLevelThresholdSupported)
				{
					return ((LogicalDevice<LogicalDeviceTankSensorStatus, ILogicalDeviceTankSensorCapability>)this).DeviceStatus.IsTankLevelAlertActive;
				}
				if (SensorType == TankSensorType.UnknownTank)
				{
					return false;
				}
				TankSensorAlertThreshold legacyAlertTankLevelThreshold = GetLegacyAlertTankLevelThreshold();
				bool num = legacyAlertTankLevelThreshold.ThresholdType == TankLevelThresholdType.High && Level >= legacyAlertTankLevelThreshold.TankLevel;
				bool flag = legacyAlertTankLevelThreshold.ThresholdType == TankLevelThresholdType.Low && Level <= legacyAlertTankLevelThreshold.TankLevel;
				return num || flag;
			}
		}

		[Obsolete("Use the SensorPrecisionType property instead")]
		public bool IsHighPrecisionTank => ((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).DeviceCapability.SensorPrecisionType == SensorPrecisionType.HighPrecision;

		public SensorPrecisionType SensorPrecisionType => ((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).DeviceCapability.SensorPrecisionType;

		public bool IsLegacyTank
		{
			get
			{
				if (!IsHighPrecisionTank && !IsSetAlertTankLevelThresholdSupported)
				{
					return IsEmbeddedTank;
				}
				return false;
			}
		}

		public bool IsSetAlertTankLevelThresholdSupported => ((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).DeviceCapability.AreTankAlertsSupported;

		public TankSensorAlertThreshold AlertThreshold
		{
			get
			{
				if (!IsLegacyTank)
				{
					return AlertTankLevelThresholdsPid.ValueAlertThreshold;
				}
				return GetLegacyAlertTankLevelThreshold();
			}
			set
			{
				AlertTankLevelThresholdsPid.ValueAlertThreshold = value;
			}
		}

		public AsyncValueCachedState AlertThresholdState => ((LogicalDevicePidProxy<ILogicalDevicePidULong>)AlertTankLevelThresholdsPid).ValueState;

		public bool IsTankHeightOrientationSupported => ((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).DeviceCapability.IsTankHeightOrientationSupported;

		public bool IsAccessoryGatewaySupported
		{
			get
			{
				if (((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).LogicalId.ProductId != MopekaLpSensorProductId)
				{
					return ((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).LogicalId.ProductId == LoCapLpSensorProductId;
				}
				return true;
			}
		}

		public LogicalDeviceTankSensor(ILogicalDeviceId logicalDeviceId, ILogicalDeviceTankSensorCapability capability, ILogicalDeviceService deviceService, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceTankSensorStatus(), capability, deviceService, isFunctionClassChangeable)
		{
			//IL_003a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0044: Expected O, but got Unknown
			//IL_0063: Unknown result type (might be due to invalid IL or missing references)
			//IL_006d: Expected O, but got Unknown
			//IL_0084: Unknown result type (might be due to invalid IL or missing references)
			//IL_008e: Expected O, but got Unknown
			//IL_00bb: Unknown result type (might be due to invalid IL or missing references)
			//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d0: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
			AlertTankLevelThresholdsPid = new LogicalDevicePidProxyTankSensorAlertThreshold((ILogicalDevice)(object)this, (Pid)345, (LogicalDeviceSessionType)2);
			((CommonNotifyPropertyChanged)AlertTankLevelThresholdsPid).PropertyChanged += new PropertyChangedEventHandler(AlertTankLevelThresholdsPidOnPropertyChanged);
			TankCapacityPid = new LogicalDevicePidProxyTankSensorCapacity((ILogicalDevice)(object)this, (Pid)346, (LogicalDeviceSessionType)2);
			((CommonNotifyPropertyChanged)TankCapacityPid).PropertyChanged += new PropertyChangedEventHandler(TankCapacityPidOnPropertyChanged);
			_tankHeightOrientationPid = new LogicalDevicePidULong((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)347), (LogicalDeviceSessionType)2, (Func<ulong, bool>)null, 72057594037927935uL);
			RemoteOnline = new RemoteOnline((ILogicalDeviceRemote)(object)this, ((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).RemoteChannels);
			RemoteTankSensor = new RemoteTankSensor(this, ((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).RemoteChannels);
			UpdateAlert("TankLevelAlert", isActive: false, default(Nullable<int>));
			UpdateAlert("LowBatteryAlert", isActive: false, default(Nullable<int>));
		}

		public override void OnDeviceStatusChanged()
		{
			//IL_006a: Unknown result type (might be due to invalid IL or missing references)
			base.OnDeviceStatusChanged();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("Level", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("BatteryLevel", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("MeasurementQuality", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("XAcceleration", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("YAcceleration", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsTankLevelOutsideThreshold", true);
			UpdateAlert("TankLevelAlert", ((LogicalDevice<LogicalDeviceTankSensorStatus, ILogicalDeviceTankSensorCapability>)this).DeviceStatus.IsTankLevelAlertActive, new Nullable<int>(((LogicalDevice<LogicalDeviceTankSensorStatus, ILogicalDeviceTankSensorCapability>)this).DeviceStatus.TankLevelAlertCount));
		}

		public override void OnLogicalIdChanged()
		{
			((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).OnLogicalIdChanged();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("SensorType", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("HoldingType", true);
		}

		private static TankSensorType GetTankSensorType(ILogicalDeviceId logicalDeviceId)
		{
			if (DeviceCategory.GetDeviceCategory(logicalDeviceId) == DeviceCategory.LiquidPropane)
			{
				return TankSensorType.LpTank;
			}
			if (DeviceCategory.GetDeviceCategory(logicalDeviceId) != DeviceCategory.Tank)
			{
				return TankSensorType.UnknownTank;
			}
			string text = logicalDeviceId.FunctionName.Name.ToUpper();
			if (text.Contains(EnumExtensions.GetAttribute<TankSensorTypeAttribute>((Enum)(object)TankSensorType.BlackTank, true).FunctionNameIdentifier))
			{
				return TankSensorType.BlackTank;
			}
			if (text.Contains(EnumExtensions.GetAttribute<TankSensorTypeAttribute>((Enum)(object)TankSensorType.GreyTank, true).FunctionNameIdentifier))
			{
				return TankSensorType.GreyTank;
			}
			if (text.Contains(EnumExtensions.GetAttribute<TankSensorTypeAttribute>((Enum)(object)TankSensorType.FreshTank, true).FunctionNameIdentifier))
			{
				return TankSensorType.FreshTank;
			}
			if (text.Contains(EnumExtensions.GetAttribute<TankSensorTypeAttribute>((Enum)(object)TankSensorType.FuelTank, true).FunctionNameIdentifier))
			{
				return TankSensorType.FuelTank;
			}
			if (text.Contains(EnumExtensions.GetAttribute<TankSensorTypeAttribute>((Enum)(object)TankSensorType.LpTank, true).FunctionNameIdentifier))
			{
				return TankSensorType.LpTank;
			}
			return TankSensorType.UnknownTank;
		}

		public void UpdateAlert(string alertName, bool isActive, Nullable<int> count)
		{
			//IL_0010: Unknown result type (might be due to invalid IL or missing references)
			//IL_004c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0060: Unknown result type (might be due to invalid IL or missing references)
			//IL_0074: Unknown result type (might be due to invalid IL or missing references)
			if (alertName == "LowBatteryAlert")
			{
				base.UpdateAlertDefaultImpl(alertName, isActive, count, _alertDict);
				return;
			}
			switch (EnumExtensions.GetAttribute<TankSensorTypeAttribute>((Enum)(object)SensorType, true).ThresholdType)
			{
			case TankLevelThresholdType.Low:
				base.UpdateAlertDefaultImpl("TankLowThresholdExceededAlert", isActive, count, _alertDict);
				break;
			case TankLevelThresholdType.High:
				base.UpdateAlertDefaultImpl("TankHighThresholdExceededAlert", isActive, count, _alertDict);
				break;
			default:
				base.UpdateAlertDefaultImpl("TankUnknownThresholdExceededAlert", isActive, count, _alertDict);
				break;
			}
		}

		public void UpdateAlert(byte alertId, byte rawData)
		{
			//IL_001b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0020: Unknown result type (might be due to invalid IL or missing references)
			//IL_0025: Unknown result type (might be due to invalid IL or missing references)
			//IL_0031: Unknown result type (might be due to invalid IL or missing references)
			//IL_0046: Unknown result type (might be due to invalid IL or missing references)
			//IL_0088: Unknown result type (might be due to invalid IL or missing references)
			bool flag = (rawData & 0x80) != 0;
			byte b = (byte)(rawData & 0x7F);
			switch (alertId)
			{
			case 0:
			{
				DateTime lastUpdatedTimestamp = base.LastUpdatedTimestamp;
				DateTime now = DateTime.Now;
				if (!(lastUpdatedTimestamp > ((DateTime)(ref now)).AddMilliseconds(-30000.0)))
				{
					UpdateAlert("TankLevelAlert", flag, new Nullable<int>((int)b));
					if (((LogicalDevice<LogicalDeviceTankSensorStatus, ILogicalDeviceTankSensorCapability>)this).DeviceStatus.IsTankLevelAlertActive != flag || ((LogicalDevice<LogicalDeviceTankSensorStatus, ILogicalDeviceTankSensorCapability>)this).DeviceStatus.TankLevelAlertCount != b)
					{
						((LogicalDevice<LogicalDeviceTankSensorStatus, ILogicalDeviceTankSensorCapability>)this).DeviceStatus.SetTankLevelAlert(flag, b);
						((LogicalDevice<LogicalDeviceTankSensorStatus, ILogicalDeviceTankSensorCapability>)this).OnDeviceStatusChanged();
					}
				}
				break;
			}
			case 1:
				UpdateAlert("LowBatteryAlert", flag, new Nullable<int>((int)b));
				break;
			default:
				TaggedLog.Warning("LogicalDeviceTankSensor", String.Format("Received and ignoring unknown Alert Id 0x{0:X} for {1}", (object)alertId, (object)this), Array.Empty<object>());
				break;
			}
		}

		public bool UpdateDeviceStatusAlerts(byte[] alertData)
		{
			//IL_0053: Expected O, but got Unknown
			//IL_003e: Unknown result type (might be due to invalid IL or missing references)
			try
			{
				int num = alertData.Length;
				if (num == 0)
				{
					return false;
				}
				byte b = 0;
				while (b < 2)
				{
					TankSensorAlertId tankSensorAlertId = (TankSensorAlertId)b;
					if ((uint)tankSensorAlertId <= 1u)
					{
						UpdateAlert(b, alertData[b]);
						b++;
						continue;
					}
					throw new ArgumentException(String.Format("Invalid Status Alert Size of {0}: {1} for {2}", (object)num, (object)ArrayExtension.DebugDump(alertData, " ", false), (object)this));
				}
				return true;
			}
			catch (Exception ex)
			{
				Exception ex2 = ex;
				TaggedLog.Error("LogicalDeviceTankSensor", String.Format("{0} - Exception updating alert status {1}: {2}", (object)this, (object)ex2, (object)ex2.Message), Array.Empty<object>());
				return false;
			}
		}

		public Task<float> ReadVoltageMeasurementAsync(CancellationToken cancellationToken)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return LogicalDeviceVoltageExtension.ReadVoltageMeasurementAsync(VoltageMeasurementBatteryPid, cancellationToken);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<Nullable<TankSensorCapacity>> GetTankCapacityAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<GetTankCapacityAsync>d__73 <GetTankCapacityAsync>d__ = default(<GetTankCapacityAsync>d__73);
			<GetTankCapacityAsync>d__.<>t__builder = AsyncTaskMethodBuilder<Nullable<TankSensorCapacity>>.Create();
			<GetTankCapacityAsync>d__.<>4__this = this;
			<GetTankCapacityAsync>d__.cancellationToken = cancellationToken;
			<GetTankCapacityAsync>d__.<>1__state = -1;
			<GetTankCapacityAsync>d__.<>t__builder.Start<<GetTankCapacityAsync>d__73>(ref <GetTankCapacityAsync>d__);
			return <GetTankCapacityAsync>d__.<>t__builder.Task;
		}

		public Task SetTankCapacity(TankSensorCapacity value, CancellationToken cancellationToken)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			return TankCapacityPid.WriteAsync(value, cancellationToken);
		}

		private void TankCapacityPidOnPropertyChanged(object sender, PropertyChangedEventArgs e)
		{
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("TankCapacity", true);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<TankSensorAlertThreshold> GetAlertTankLevelThresholdAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<GetAlertTankLevelThresholdAsync>d__94 <GetAlertTankLevelThresholdAsync>d__ = default(<GetAlertTankLevelThresholdAsync>d__94);
			<GetAlertTankLevelThresholdAsync>d__.<>t__builder = AsyncTaskMethodBuilder<TankSensorAlertThreshold>.Create();
			<GetAlertTankLevelThresholdAsync>d__.<>4__this = this;
			<GetAlertTankLevelThresholdAsync>d__.cancellationToken = cancellationToken;
			<GetAlertTankLevelThresholdAsync>d__.<>1__state = -1;
			<GetAlertTankLevelThresholdAsync>d__.<>t__builder.Start<<GetAlertTankLevelThresholdAsync>d__94>(ref <GetAlertTankLevelThresholdAsync>d__);
			return <GetAlertTankLevelThresholdAsync>d__.<>t__builder.Task;
		}

		private TankSensorAlertThreshold GetLegacyAlertTankLevelThreshold()
		{
			return HoldingType switch
			{
				TankHoldingType.Supply => LegacyTankSensorLowAlertThreshold, 
				TankHoldingType.Waste => LegacyTankSensorHighAlertThreshold, 
				TankHoldingType.Unknown => LegacyTankSensorUnknownAlertThreshold, 
				_ => LegacyTankSensorUnknownAlertThreshold, 
			};
		}

		public Task SetAlertTankLevelThreshold(TankSensorAlertThreshold alertThreshold, CancellationToken cancellationToken)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			return AlertTankLevelThresholdsPid.WriteAsync(alertThreshold, cancellationToken);
		}

		private void AlertTankLevelThresholdsPidOnPropertyChanged(object sender, PropertyChangedEventArgs e)
		{
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("AlertThreshold", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("AlertThresholdState", true);
		}

		public Task SetVerticalTankConfigurationAsync(int heightInMillimeters, CancellationToken cancellationToken = default(CancellationToken))
		{
			//IL_0005: Unknown result type (might be due to invalid IL or missing references)
			return SetVerticalTankConfigurationAsync(38, (ushort)heightInMillimeters, cancellationToken);
		}

		public Task SetHorizontalTankConfigurationAsync(int heightInMillimeters, CancellationToken cancellationToken = default(CancellationToken))
		{
			//IL_0003: Unknown result type (might be due to invalid IL or missing references)
			return SetHorizontalTankConfigurationAsync((ushort)heightInMillimeters, cancellationToken);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task SetVerticalTankConfigurationAsync(ushort minHeightMm, ushort heightMm, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<SetVerticalTankConfigurationAsync>d__107 <SetVerticalTankConfigurationAsync>d__ = default(<SetVerticalTankConfigurationAsync>d__107);
			<SetVerticalTankConfigurationAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SetVerticalTankConfigurationAsync>d__.<>4__this = this;
			<SetVerticalTankConfigurationAsync>d__.minHeightMm = minHeightMm;
			<SetVerticalTankConfigurationAsync>d__.heightMm = heightMm;
			<SetVerticalTankConfigurationAsync>d__.cancellationToken = cancellationToken;
			<SetVerticalTankConfigurationAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SetVerticalTankConfigurationAsync>d__.<>t__builder)).Start<<SetVerticalTankConfigurationAsync>d__107>(ref <SetVerticalTankConfigurationAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SetVerticalTankConfigurationAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task SetHorizontalTankConfigurationAsync(ushort diameterMm, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<SetHorizontalTankConfigurationAsync>d__108 <SetHorizontalTankConfigurationAsync>d__ = default(<SetHorizontalTankConfigurationAsync>d__108);
			<SetHorizontalTankConfigurationAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SetHorizontalTankConfigurationAsync>d__.<>4__this = this;
			<SetHorizontalTankConfigurationAsync>d__.diameterMm = diameterMm;
			<SetHorizontalTankConfigurationAsync>d__.cancellationToken = cancellationToken;
			<SetHorizontalTankConfigurationAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SetHorizontalTankConfigurationAsync>d__.<>t__builder)).Start<<SetHorizontalTankConfigurationAsync>d__108>(ref <SetHorizontalTankConfigurationAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SetHorizontalTankConfigurationAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<TankOrientationData?> GetTankOrientationDataAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<GetTankOrientationDataAsync>d__110 <GetTankOrientationDataAsync>d__ = default(<GetTankOrientationDataAsync>d__110);
			<GetTankOrientationDataAsync>d__.<>t__builder = AsyncTaskMethodBuilder<TankOrientationData>.Create();
			<GetTankOrientationDataAsync>d__.<>4__this = this;
			<GetTankOrientationDataAsync>d__.cancellationToken = cancellationToken;
			<GetTankOrientationDataAsync>d__.<>1__state = -1;
			<GetTankOrientationDataAsync>d__.<>t__builder.Start<<GetTankOrientationDataAsync>d__110>(ref <GetTankOrientationDataAsync>d__);
			return <GetTankOrientationDataAsync>d__.<>t__builder.Task;
		}

		public override void Dispose(bool disposing)
		{
			//IL_0014: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Expected O, but got Unknown
			//IL_0036: Unknown result type (might be due to invalid IL or missing references)
			//IL_0040: Expected O, but got Unknown
			base.Dispose(disposing);
			((CommonNotifyPropertyChanged)AlertTankLevelThresholdsPid).PropertyChanged -= new PropertyChangedEventHandler(AlertTankLevelThresholdsPidOnPropertyChanged);
			((CommonDisposableNotifyPropertyChanged)AlertTankLevelThresholdsPid).TryDispose();
			((CommonNotifyPropertyChanged)TankCapacityPid).PropertyChanged -= new PropertyChangedEventHandler(TankCapacityPidOnPropertyChanged);
			((CommonDisposableNotifyPropertyChanged)TankCapacityPid).TryDispose();
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).LastReceivedNetworkStatus;
		}

		TRemoteChannelDef ILogicalDeviceRemote.GetRemoteChannelForChannelId<TRemoteChannelDef>(string channelId)
		{
			return ((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).GetRemoteChannelForChannelId<TRemoteChannelDef>(channelId);
		}
	}
	public interface ILogicalDeviceTankSensorCapability : ILogicalDeviceCapability, INotifyPropertyChanged
	{
		SensorPrecisionType SensorPrecisionType { get; }

		bool AreTankAlertsSupported { get; }

		bool IsBatteryLevelSupported { get; }

		bool IsTankCapacitySupported { get; }

		bool IsTankHeightOrientationSupported { get; }

		float SensorPrecision { get; }
	}
	public enum SensorFluidType : Enum
	{
		Water,
		Fuel
	}
	public enum SensorPrecisionType : Enum
	{
		LowPrecision,
		MediumPrecision,
		HighPrecision
	}
	public class LogicalDeviceTankSensorCapability : LogicalDeviceCapability, ILogicalDeviceTankSensorCapability, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		private const byte SensorFluidTypeBitmask = 1;

		private const byte SensorPrecisionTypeBitmask = 2;

		private const byte SupportsTankAlertsBitmask = 4;

		private const byte SupportsBatteryLevelBitmask = 8;

		private const byte SupportsTankCapacityBitmask = 16;

		private const byte SupportsTankHeightOrientationBitmask = 32;

		private SensorFluidType SensorFluidType
		{
			get
			{
				if ((base.RawValue & 1) != 1)
				{
					return SensorFluidType.Water;
				}
				return SensorFluidType.Fuel;
			}
		}

		public SensorPrecisionType SensorPrecisionType
		{
			get
			{
				if ((base.RawValue & 2) == 2)
				{
					return SensorPrecisionType.HighPrecision;
				}
				if ((base.RawValue & 1) == 1)
				{
					return SensorPrecisionType.MediumPrecision;
				}
				return SensorPrecisionType.LowPrecision;
			}
		}

		public float SensorPrecision
		{
			get
			{
				if (SensorPrecisionType == SensorPrecisionType.HighPrecision)
				{
					return 1f;
				}
				if (SensorFluidType == SensorFluidType.Fuel)
				{
					return 11f;
				}
				return 33f;
			}
		}

		public bool AreTankAlertsSupported => (base.RawValue & 4) == 4;

		public bool IsBatteryLevelSupported => (base.RawValue & 8) == 8;

		public bool IsTankCapacitySupported => (base.RawValue & 0x10) == 16;

		public bool IsTankHeightOrientationSupported => (base.RawValue & 0x20) == 32;

		public LogicalDeviceTankSensorCapability()
			: this(default(Nullable<byte>))
		{
		}//IL_0003: Unknown result type (might be due to invalid IL or missing references)
		//IL_0009: Unknown result type (might be due to invalid IL or missing references)


		public LogicalDeviceTankSensorCapability(Nullable<byte> rawCapability)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(rawCapability);
		}

		public LogicalDeviceTankSensorCapability(SensorPrecisionType sensorPrecisionType, bool supportsTankAlerts)
			: this(new Nullable<byte>(MakeRawCapability(sensorPrecisionType, supportsTankAlerts)))
		{
		}//IL_0008: Unknown result type (might be due to invalid IL or missing references)


		private static byte MakeRawCapability(SensorPrecisionType sensorPrecisionType, bool supportsTankAlerts)
		{
			byte b = 0;
			if (sensorPrecisionType == SensorPrecisionType.HighPrecision)
			{
				b |= 2;
			}
			if (supportsTankAlerts)
			{
				b |= 4;
			}
			return b;
		}

		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("SensorFluidType");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("SensorPrecisionType");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("AreTankAlertsSupported");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}
	}
	public class LogicalDeviceTankSensorFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 10)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceTankSensor(logicalDeviceId, new LogicalDeviceTankSensorCapability(rawCapability), service);
		}
	}
	public class LogicalDeviceTankSensorSim : LogicalDeviceTankSensor, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		private static readonly Random LevelRnd = new Random();

		private readonly IDisposable? _tankLevelDisposable;

		private LogicalDeviceTankSensorStatus _tankStatus = new LogicalDeviceTankSensorStatus();

		private bool _isOnline = true;

		private int _sweepDirection = 1;

		private byte _sweepLevel;

		public override bool IsLegacyDeviceHazardous => false;

		public override LogicalDeviceActiveConnection ActiveConnection
		{
			get
			{
				if (IsOnline)
				{
					return (LogicalDeviceActiveConnection)1;
				}
				return (LogicalDeviceActiveConnection)0;
			}
		}

		public virtual bool IsOnline
		{
			get
			{
				return _isOnline;
			}
			protected set
			{
				if (((CommonNotifyPropertyChanged)this).SetBackingField<bool>(ref _isOnline, value, "IsOnline", Array.Empty<string>()))
				{
					((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).UpdateDeviceOnline(value);
				}
			}
		}

		[field: CompilerGenerated]
		public override ILogicalDevicePidFixedPoint VoltageMeasurementBatteryPid
		{
			[CompilerGenerated]
			get;
		} = (ILogicalDevicePidFixedPoint)new LogicalDevicePidSimFixedPoint((FixedPointType)1, PID.BATTERY_VOLTAGE, 13f);

		public override void UpdateDeviceOnline(bool online)
		{
			IsOnline = online;
		}

		private LogicalDeviceTankSensorSim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceTankSensorCapability capability, ILogicalDeviceService deviceService = null, bool isFunctionClassChangeable = false, int randomizeLevelOnIntervalSec = 0, bool sweepLevel = false, Nullable<byte> tankCapacity = default(Nullable<byte>))
			: base(logicalDeviceId, capability, deviceService, isFunctionClassChangeable)
		{
			//IL_0025: Unknown result type (might be due to invalid IL or missing references)
			//IL_002f: Expected O, but got Unknown
			//IL_0050: Unknown result type (might be due to invalid IL or missing references)
			//IL_005a: Expected O, but got Unknown
			//IL_008b: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ae: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d5: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ff: Unknown result type (might be due to invalid IL or missing references)
			//IL_0109: Expected O, but got Unknown
			//IL_0117: Unknown result type (might be due to invalid IL or missing references)
			//IL_012b: Unknown result type (might be due to invalid IL or missing references)
			//IL_015a: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDevicePidProxy<ILogicalDevicePidULong>)base.AlertTankLevelThresholdsPid).DevicePid = (ILogicalDevicePidULong)new LogicalDevicePidSimULong(PidExtension.ConvertToPid((Pid)345), 255uL);
			switch (base.HoldingType)
			{
			case TankHoldingType.Supply:
				base.AlertTankLevelThresholdsPid.WriteAsync(new TankSensorAlertThreshold(TankLevelThresholdType.Low, LogicalDeviceTankSensor.LegacyTankSensorLowAlertThreshold.TankLevel), CancellationToken.None);
				break;
			case TankHoldingType.Waste:
				base.AlertTankLevelThresholdsPid.WriteAsync(new TankSensorAlertThreshold(TankLevelThresholdType.High, LogicalDeviceTankSensor.LegacyTankSensorHighAlertThreshold.TankLevel), CancellationToken.None);
				break;
			default:
				base.AlertTankLevelThresholdsPid.WriteAsync(new TankSensorAlertThreshold(TankLevelThresholdType.Unknown, LogicalDeviceTankSensor.LegacyTankSensorUnknownAlertThreshold.TankLevel), CancellationToken.None);
				break;
			}
			if (tankCapacity.HasValue)
			{
				((LogicalDevicePidProxy<ILogicalDevicePidULong>)base.TankCapacityPid).DevicePid = (ILogicalDevicePidULong)new LogicalDevicePidSimULong(PidExtension.ConvertToPid((Pid)346), 255uL);
				((LogicalDevicePidProxy<ILogicalDevicePidULong>)base.TankCapacityPid).WriteValueAsync((ulong)tankCapacity.Value, CancellationToken.None);
			}
			if (randomizeLevelOnIntervalSec > 0)
			{
				_tankLevelDisposable = ObservableExtensions.Subscribe<long>(Observable.Interval(TimeSpan.FromSeconds((double)randomizeLevelOnIntervalSec)), (Action<long>)([CompilerGenerated] (long _) =>
				{
					//IL_0001: Unknown result type (might be due to invalid IL or missing references)
					//IL_0007: Invalid comparison between Unknown and I4
					if ((int)((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).ActiveConnection == 1)
					{
						byte level = Convert.ToByte(LevelRnd.Next(0, 100));
						_tankStatus.SetLevel(level);
						((LogicalDevice<LogicalDeviceTankSensorStatus, ILogicalDeviceTankSensorCapability>)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)_tankStatus).Data, 1u);
					}
				}));
			}
			else
			{
				if (!sweepLevel)
				{
					return;
				}
				_tankLevelDisposable = ObservableExtensions.Subscribe<long>(Observable.Interval(TimeSpan.FromMilliseconds(500.0)), (Action<long>)([CompilerGenerated] (long _) =>
				{
					//IL_0001: Unknown result type (might be due to invalid IL or missing references)
					//IL_0007: Invalid comparison between Unknown and I4
					if ((int)((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).ActiveConnection != 1)
					{
						return;
					}
					_sweepLevel = (byte)(_sweepLevel + 10 * _sweepDirection);
					int sweepDirection = _sweepDirection;
					int sweepDirection2;
					if (sweepDirection <= 0)
					{
						if (sweepDirection >= 0 || _sweepLevel != 0)
						{
							goto IL_004c;
						}
						sweepDirection2 = 1;
					}
					else
					{
						if (_sweepLevel != 100)
						{
							goto IL_004c;
						}
						sweepDirection2 = -1;
					}
					goto IL_0053;
					IL_0053:
					_sweepDirection = sweepDirection2;
					LogicalDeviceTankSensorStatus tankStatus = _tankStatus;
					byte level;
					if (base.IsHighPrecisionTank)
					{
						level = _sweepLevel;
					}
					else
					{
						byte b;
						switch (_sweepLevel)
						{
						case 100:
							b = 100;
							break;
						case 66:
						case 67:
						case 68:
						case 69:
						case 70:
						case 71:
						case 72:
						case 73:
						case 74:
						case 75:
						case 76:
						case 77:
						case 78:
						case 79:
						case 80:
						case 81:
						case 82:
						case 83:
						case 84:
						case 85:
						case 86:
						case 87:
						case 88:
						case 89:
						case 90:
						case 91:
						case 92:
						case 93:
						case 94:
						case 95:
						case 96:
						case 97:
						case 98:
						case 99:
							b = 66;
							break;
						case 33:
						case 34:
						case 35:
						case 36:
						case 37:
						case 38:
						case 39:
						case 40:
						case 41:
						case 42:
						case 43:
						case 44:
						case 45:
						case 46:
						case 47:
						case 48:
						case 49:
						case 50:
						case 51:
						case 52:
						case 53:
						case 54:
						case 55:
						case 56:
						case 57:
						case 58:
						case 59:
						case 60:
						case 61:
						case 62:
						case 63:
						case 64:
						case 65:
							b = 33;
							break;
						default:
							b = 0;
							break;
						}
						level = b;
					}
					tankStatus.SetLevel(level);
					((LogicalDevice<LogicalDeviceTankSensorStatus, ILogicalDeviceTankSensorCapability>)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)_tankStatus).Data, 1u);
					return;
					IL_004c:
					sweepDirection2 = _sweepDirection;
					goto IL_0053;
				}));
			}
		}

		public LogicalDeviceTankSensorSim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceTankSensorCapability capability, ILogicalDeviceService deviceService = null, bool isFunctionClassChangeable = false, bool sweepLevel = false)
			: this(logicalDeviceId, capability, deviceService, isFunctionClassChangeable, 0, sweepLevel)
		{
		}//IL_000b: Unknown result type (might be due to invalid IL or missing references)
		//IL_0011: Unknown result type (might be due to invalid IL or missing references)


		public LogicalDeviceTankSensorSim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceTankSensorCapability capability, ILogicalDeviceService deviceService = null, bool isFunctionClassChangeable = false, int randomizeLevelOnIntervalSec = 0, Nullable<byte> tankCapcity = default(Nullable<byte>))
			: this(logicalDeviceId, capability, deviceService, isFunctionClassChangeable, randomizeLevelOnIntervalSec, sweepLevel: false, tankCapcity)
		{
		}//IL_0009: Unknown result type (might be due to invalid IL or missing references)


		public override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
			IDisposable? tankLevelDisposable = _tankLevelDisposable;
			if (tankLevelDisposable != null)
			{
				IDisposableExtensions.TryDispose(tankLevelDisposable);
			}
		}
	}
	public class LogicalDeviceTankSensorStatus : LogicalDeviceStatusPacketMutable, ILogicalDeviceStatus<LogicalDeviceTankSensorStatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		public static readonly int MaximumStatusPacketSize = 8;

		public static readonly int PercentByteIndex = 0;

		public static readonly int BatteryLevelIndex = 1;

		public static readonly int MeasurementQualityIndex = 2;

		public static readonly int XAccelerationIndex = 3;

		public static readonly int YAccelerationIndex = 4;

		public static readonly int TankLevelAlertIndex = 5;

		public static readonly int UserMessageStartIndex = 6;

		public const byte BatteryLevelUnknown = 255;

		public const byte MeasurementQualityUnknown = 255;

		public const byte StatusBitmaskPercent = 127;

		public const byte MeasurementQualityBitmask = 127;

		public const byte FullByteBitMask = 255;

		public const byte AlertActiveBitmask = 128;

		public const byte AlertCountBitmask = 127;

		public const byte AccelUnknown = 128;

		public const float AccelCoefficient = 0.0009765625f;

		public const int IdsCanTankSensorV1StatusSize = 1;

		public const int MopekaProprietaryProtocolSize = 5;

		public const int IdsCanTankSensorHighPrecisionStatusSize = 7;

		public byte Level => (byte)MathCommon.Clamp(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[PercentByteIndex] & 0x7F, 0, 100);

		public Nullable<byte> BatteryLevel
		{
			get
			{
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data.Length < MaximumStatusPacketSize || ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[BatteryLevelIndex] > 100)
				{
					return default(Nullable<byte>);
				}
				return new Nullable<byte>(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[BatteryLevelIndex]);
			}
		}

		public Nullable<byte> MeasurementQuality
		{
			get
			{
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data.Length < MaximumStatusPacketSize || ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[MeasurementQualityIndex] > 100)
				{
					return default(Nullable<byte>);
				}
				return new Nullable<byte>(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[MeasurementQualityIndex]);
			}
		}

		public Nullable<float> XAcceleration
		{
			get
			{
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data.Length >= MaximumStatusPacketSize && ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[XAccelerationIndex] != 128)
				{
					return new Nullable<float>((float)(sbyte)((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[XAccelerationIndex] * 0.0009765625f);
				}
				return default(Nullable<float>);
			}
		}

		public Nullable<float> YAcceleration
		{
			get
			{
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data.Length >= MaximumStatusPacketSize && ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[YAccelerationIndex] != 128)
				{
					return new Nullable<float>((float)(sbyte)((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[YAccelerationIndex] * 0.0009765625f);
				}
				return default(Nullable<float>);
			}
		}

		public bool IsTankLevelAlertActive => (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[TankLevelAlertIndex] & 0x80) == 128;

		public int TankLevelAlertCount => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[TankLevelAlertIndex] & 0x7F;

		public ushort UserMessage => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetUInt16((uint)UserMessageStartIndex);

		public LogicalDeviceTankSensorStatus()
			: this(1)
		{
		}

		public LogicalDeviceTankSensorStatus(int size)
			: base((uint)size, (uint)MaximumStatusPacketSize, (byte)0)
		{
			SetLevel(0);
			SetBatteryLevel(255);
			SetMeasurementQuality(255);
			SetXAcceleration(128);
			SetYAcceleration(128);
			SetTankLevelAlert(active: false, 0);
			SetUserMessage(0);
		}

		public LogicalDeviceTankSensorStatus(byte tankLevel, byte batteryLevel, byte measurementQuality, byte xAcceleration, byte yAcceleration)
			: this(5)
		{
			SetLevel(tankLevel);
			SetBatteryLevel(batteryLevel);
			SetMeasurementQuality(measurementQuality);
			SetXAcceleration(xAcceleration);
			SetYAcceleration(yAcceleration);
		}

		public LogicalDeviceTankSensorStatus(byte tankLevel, byte batteryLevel, byte measurementQuality, byte xAcceleration, byte yAcceleration, bool tankLevelActive, byte tankLevelCount, ushort userMessage)
			: this(7)
		{
			SetLevel(tankLevel);
			SetBatteryLevel(batteryLevel);
			SetMeasurementQuality(measurementQuality);
			SetXAcceleration(xAcceleration);
			SetYAcceleration(yAcceleration);
			SetTankLevelAlert(tankLevelActive, tankLevelCount);
			SetUserMessage(userMessage);
		}

		public LogicalDeviceTankSensorStatus(LogicalDeviceTankSensorStatus originalSensorStatus)
			: this()
		{
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalSensorStatus).Data;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(data, data.Length, false);
		}

		public LogicalDeviceTankSensorStatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceTankSensorStatusSerializable(this);
		}

		public void SetLevel(byte percent)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)127, (byte)MathCommon.Clamp((int)percent, 0, 100), PercentByteIndex);
		}

		public void SetBatteryLevel(byte percent)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)127, (byte)MathCommon.Clamp((int)percent, 0, 100), BatteryLevelIndex);
		}

		public void SetMeasurementQuality(byte measurementQuality)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)127, (byte)MathCommon.Clamp((int)measurementQuality, 0, 100), MeasurementQualityIndex);
		}

		public void SetXAcceleration(byte xAcceleration)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, xAcceleration, XAccelerationIndex);
		}

		public void SetYAcceleration(byte yAcceleration)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, yAcceleration, YAccelerationIndex);
		}

		public void SetTankLevelAlert(bool active, byte count)
		{
			byte b = (byte)(count & 0x7F);
			if (active)
			{
				b |= 0x80;
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b, TankLevelAlertIndex);
		}

		public void SetUserMessage(ushort userMessage)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt16(userMessage, UserMessageStartIndex);
		}

		public override string ToString()
		{
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			//IL_002c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0037: Unknown result type (might be due to invalid IL or missing references)
			//IL_0042: Unknown result type (might be due to invalid IL or missing references)
			return String.Concat(String.Format("Device Status: {0} Level: {1} BatteryLevel: {2} ", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)this).ToString(), (object)Level, (object)BatteryLevel), String.Format("MeasurementQuality: {0} XAcceleration: {1} YAcceleration: {2} ", (object)MeasurementQuality, (object)XAcceleration, (object)YAcceleration), String.Format("TankLevelAlertActive: {0} AlertCount: {1} UserMessage: {2}", (object)IsTankLevelAlertActive, (object)TankLevelAlertCount, (object)UserMessage));
		}
	}
	public readonly struct TankSensorAlertThreshold : ValueType
	{
		public const byte ThresholdLevelMin = 0;

		public const byte ThresholdLevelMax = 100;

		[field: CompilerGenerated]
		public TankLevelThresholdType ThresholdType
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public byte TankLevel
		{
			[CompilerGenerated]
			get;
		}

		public bool IsDisabled
		{
			get
			{
				if (ThresholdType != TankLevelThresholdType.Unknown)
				{
					return TankLevel > 100;
				}
				return true;
			}
		}

		public TankSensorAlertThreshold(TankLevelThresholdType thresholdType, byte tankLevel)
		{
			ThresholdType = TankLevelThresholdType.Unknown;
			ThresholdType = thresholdType;
			TankLevel = tankLevel;
		}

		public override string ToString()
		{
			return String.Format("TankSensorAlertThreshold ThresholdType: {0} TankLevel: {1}", (object)ThresholdType, (object)TankLevel);
		}
	}
	public class LogicalDevicePidProxyTankSensorAlertThreshold : LogicalDevicePidProxy<ILogicalDevicePidULong>, ILogicalDevicePidProperty<TankSensorAlertThreshold>, ILogicalDevicePid<TankSensorAlertThreshold>, ILogicalDevicePid, ILogicalDevicePidProperty, ICommonDisposable, IDisposable, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ReadAsync>d__7 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<TankSensorAlertThreshold> <>t__builder;

			public LogicalDevicePidProxyTankSensorAlertThreshold <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_0079: Expected O, but got Unknown
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyTankSensorAlertThreshold logicalDevicePidProxyTankSensorAlertThreshold = <>4__this;
				TankSensorAlertThreshold result;
				try
				{
					TaskAwaiter<ulong> val;
					if (num != 0)
					{
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyTankSensorAlertThreshold).ReadValueAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <ReadAsync>d__7>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ulong>);
						num = (<>1__state = -1);
					}
					result = Decode(val.GetResult());
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <WriteAsync>d__8 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDevicePidProxyTankSensorAlertThreshold <>4__this;

			public TankSensorAlertThreshold value;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0091: Expected O, but got Unknown
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyTankSensorAlertThreshold logicalDevicePidProxyTankSensorAlertThreshold = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						if (((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyTankSensorAlertThreshold).IsReadOnly)
						{
							throw new LogicalDevicePidValueWriteNotSupportedException(((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyTankSensorAlertThreshold).PropertyId);
						}
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyTankSensorAlertThreshold).WriteValueAsync(Encode(value), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <WriteAsync>d__8>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const string LogTag = "LogicalDevicePidProxyTankSensorAlertThreshold";

		internal static readonly BitPositionValue64 ThresholdLevelPosition = new BitPositionValue64(255uL, 0, 1);

		internal static readonly BitPositionValue64 ThresholdTypePosition = new BitPositionValue64(65280uL, 0, 1);

		public TankSensorAlertThreshold ValueAlertThreshold
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				return Decode(UInt48.op_Implicit(base.ValueRaw));
			}
			set
			{
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				base.ValueRaw = (UInt48)Encode(value);
			}
		}

		public LogicalDevicePidProxyTankSensorAlertThreshold(ILogicalDevicePidULong devicePid = null)
			: base(devicePid)
		{
		}

		public LogicalDevicePidProxyTankSensorAlertThreshold(ILogicalDevice logicalDevice, Pid pid, LogicalDeviceSessionType writeAccess = (LogicalDeviceSessionType)0)
			: this((ILogicalDevicePidULong)new LogicalDevicePidULong(logicalDevice, PidExtension.ConvertToPid(pid), writeAccess, (Func<ulong, bool>)null, 72057594037927935uL))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_001d: Expected O, but got Unknown


		public static TankSensorAlertThreshold Decode(ulong value)
		{
			byte tankLevel = (byte)MathCommon.Clamp((float)((BitPositionValue64)(ref ThresholdLevelPosition)).DecodeValue(value), 0f, 100f);
			return new TankSensorAlertThreshold((TankLevelThresholdType)(byte)((BitPositionValue64)(ref ThresholdTypePosition)).DecodeValue(value), tankLevel);
		}

		public static ulong Encode(TankSensorAlertThreshold alertThreshold)
		{
			ulong num = 0uL;
			num = ((BitPositionValue64)(ref ThresholdLevelPosition)).EncodeValue((ulong)alertThreshold.TankLevel, num);
			return ((BitPositionValue64)(ref ThresholdTypePosition)).EncodeValue((ulong)(byte)alertThreshold.ThresholdType, num);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<TankSensorAlertThreshold> ReadAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ReadAsync>d__7 <ReadAsync>d__ = default(<ReadAsync>d__7);
			<ReadAsync>d__.<>t__builder = AsyncTaskMethodBuilder<TankSensorAlertThreshold>.Create();
			<ReadAsync>d__.<>4__this = this;
			<ReadAsync>d__.cancellationToken = cancellationToken;
			<ReadAsync>d__.<>1__state = -1;
			<ReadAsync>d__.<>t__builder.Start<<ReadAsync>d__7>(ref <ReadAsync>d__);
			return <ReadAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task WriteAsync(TankSensorAlertThreshold value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<WriteAsync>d__8 <WriteAsync>d__ = default(<WriteAsync>d__8);
			<WriteAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<WriteAsync>d__.<>4__this = this;
			<WriteAsync>d__.value = value;
			<WriteAsync>d__.cancellationToken = cancellationToken;
			<WriteAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Start<<WriteAsync>d__8>(ref <WriteAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Task;
		}

		protected override void ValueRawPropertyChanged()
		{
			base.ValueRawPropertyChanged();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("ValueAlertThreshold", true);
		}
	}
	public readonly struct TankSensorCapacity : ValueType
	{
		private const byte NotConfiguredValue = 0;

		[field: CompilerGenerated]
		public bool IsConfigured
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public byte CapacityInGallons
		{
			[CompilerGenerated]
			get;
		}

		public TankSensorCapacity(byte tankCapacity)
		{
			IsConfigured = false;
			CapacityInGallons = tankCapacity;
			IsConfigured = tankCapacity != 0;
		}
	}
	public class LogicalDevicePidProxyTankSensorCapacity : LogicalDevicePidProxy<ILogicalDevicePidULong>, ILogicalDevicePidProperty<TankSensorCapacity>, ILogicalDevicePid<TankSensorCapacity>, ILogicalDevicePid, ILogicalDevicePidProperty, ICommonDisposable, IDisposable, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ReadAsync>d__5 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<TankSensorCapacity> <>t__builder;

			public LogicalDevicePidProxyTankSensorCapacity <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_0079: Expected O, but got Unknown
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyTankSensorCapacity logicalDevicePidProxyTankSensorCapacity = <>4__this;
				TankSensorCapacity result;
				try
				{
					TaskAwaiter<ulong> val;
					if (num != 0)
					{
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyTankSensorCapacity).ReadValueAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <ReadAsync>d__5>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ulong>);
						num = (<>1__state = -1);
					}
					result = Decode(val.GetResult());
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <WriteAsync>d__6 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDevicePidProxyTankSensorCapacity <>4__this;

			public TankSensorCapacity value;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0091: Expected O, but got Unknown
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyTankSensorCapacity logicalDevicePidProxyTankSensorCapacity = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						if (((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyTankSensorCapacity).IsReadOnly)
						{
							throw new LogicalDevicePidValueWriteNotSupportedException(((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyTankSensorCapacity).PropertyId);
						}
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyTankSensorCapacity).WriteValueAsync(Encode(value), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <WriteAsync>d__6>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		internal static readonly BitPositionValue64 TankCapacityPosition = new BitPositionValue64(255uL, 0, 1);

		public TankSensorCapacity Capacity
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				return Decode(UInt48.op_Implicit(base.ValueRaw));
			}
			set
			{
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				base.ValueRaw = (UInt48)Encode(value);
			}
		}

		public LogicalDevicePidProxyTankSensorCapacity(ILogicalDevicePidULong devicePid = null)
			: base(devicePid)
		{
		}

		public LogicalDevicePidProxyTankSensorCapacity(ILogicalDevice logicalDevice, Pid pid, LogicalDeviceSessionType writeAccess = (LogicalDeviceSessionType)0)
			: this((ILogicalDevicePidULong)new LogicalDevicePidULong(logicalDevice, PidExtension.ConvertToPid(pid), writeAccess, (Func<ulong, bool>)null, 72057594037927935uL))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_001d: Expected O, but got Unknown


		public static TankSensorCapacity Decode(ulong value)
		{
			return new TankSensorCapacity((byte)MathCommon.Clamp((float)((BitPositionValue64)(ref TankCapacityPosition)).DecodeValue(value), 0f, 255f));
		}

		public static ulong Encode(TankSensorCapacity capacity)
		{
			return ((BitPositionValue64)(ref TankCapacityPosition)).EncodeValue((ulong)capacity.CapacityInGallons, 0uL);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<TankSensorCapacity> ReadAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ReadAsync>d__5 <ReadAsync>d__ = default(<ReadAsync>d__5);
			<ReadAsync>d__.<>t__builder = AsyncTaskMethodBuilder<TankSensorCapacity>.Create();
			<ReadAsync>d__.<>4__this = this;
			<ReadAsync>d__.cancellationToken = cancellationToken;
			<ReadAsync>d__.<>1__state = -1;
			<ReadAsync>d__.<>t__builder.Start<<ReadAsync>d__5>(ref <ReadAsync>d__);
			return <ReadAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task WriteAsync(TankSensorCapacity value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<WriteAsync>d__6 <WriteAsync>d__ = default(<WriteAsync>d__6);
			<WriteAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<WriteAsync>d__.<>4__this = this;
			<WriteAsync>d__.value = value;
			<WriteAsync>d__.cancellationToken = cancellationToken;
			<WriteAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Start<<WriteAsync>d__6>(ref <WriteAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Task;
		}

		protected override void ValueRawPropertyChanged()
		{
			base.ValueRawPropertyChanged();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("Capacity", true);
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceTpmsStatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceTpmsStatusSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceTpmsStatusSerializable);
			}
		}

		[JsonProperty]
		public byte LearnedSensorCount
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte VehicleConfigSequence
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte SensorConfigSequence
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public TpmsRepeaterMode TpmsRepeaterMode
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public TpmsRepeaterVoltageLevel TpmsRepeaterVoltageLevel
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool RepeaterBatteryLow
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public TpmsRepeaterPowerSource RepeaterPowerSource
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool RepeaterHasHardwareFault
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool RepeaterCharging
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool RepeaterHasBattery
		{
			[CompilerGenerated]
			get;
		}

		public LogicalDeviceTpmsStatusSerializable(LogicalDeviceTpmsStatus status)
			: this(status.LearnedSensorCount, status.VehicleConfigSequence, status.SensorConfigSequence, status.TpmsRepeaterMode, status.TpmsRepeaterVoltageLevel, status.RepeaterBatteryLow, status.RepeaterPowerSource, status.RepeaterHasHardwareFault, status.RepeaterCharging, status.RepeaterHasBattery)
		{
		}

		[JsonConstructor]
		public LogicalDeviceTpmsStatusSerializable(byte learnedSensorCount, byte vehicleConfigSequence, byte sensorConfigSequence, TpmsRepeaterMode tpmsRepeaterMode, TpmsRepeaterVoltageLevel tpmsRepeaterVoltageLevel, bool repeaterBatteryLow, TpmsRepeaterPowerSource repeaterPowerSource, bool repeaterHasHardwareFault, bool repeaterCharging, bool repeaterHasBattery)
		{
			LearnedSensorCount = learnedSensorCount;
			VehicleConfigSequence = vehicleConfigSequence;
			SensorConfigSequence = sensorConfigSequence;
			TpmsRepeaterMode = tpmsRepeaterMode;
			TpmsRepeaterVoltageLevel = tpmsRepeaterVoltageLevel;
			RepeaterBatteryLow = repeaterBatteryLow;
			RepeaterPowerSource = repeaterPowerSource;
			RepeaterHasHardwareFault = repeaterHasHardwareFault;
			RepeaterCharging = repeaterCharging;
			RepeaterHasBattery = repeaterHasBattery;
		}

		public override byte[] MakeRawData()
		{
			LogicalDeviceTpmsStatus logicalDeviceTpmsStatus = new LogicalDeviceTpmsStatus();
			logicalDeviceTpmsStatus.SetRepeaterVoltageLevel(TpmsRepeaterVoltageLevel);
			logicalDeviceTpmsStatus.SetRepeaterPowerSource(RepeaterPowerSource);
			logicalDeviceTpmsStatus.SetSensorCount(LearnedSensorCount);
			logicalDeviceTpmsStatus.SetVehicleConfigSequence(VehicleConfigSequence);
			logicalDeviceTpmsStatus.SetSensorConfigSequence(SensorConfigSequence);
			logicalDeviceTpmsStatus.SetRepeaterMode(TpmsRepeaterMode);
			logicalDeviceTpmsStatus.SetRepeaterBatteryLow(RepeaterBatteryLow);
			logicalDeviceTpmsStatus.SetRepeaterHasHardwareFault(RepeaterHasHardwareFault);
			logicalDeviceTpmsStatus.SetRepeaterCharging(RepeaterCharging);
			logicalDeviceTpmsStatus.SetRepeaterHasBattery(RepeaterHasBattery);
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTpmsStatus).CopyCurrentData();
		}

		public static LogicalDeviceTpmsStatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceTpmsStatus logicalDeviceTpmsStatus = new LogicalDeviceTpmsStatus();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTpmsStatus).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTpmsStatus).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTpmsStatus).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTpmsStatus).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTpmsStatus).Update(rawData, rawData.Length, false);
			return new LogicalDeviceTpmsStatusSerializable(logicalDeviceTpmsStatus);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceTpmsStatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceTpmsStatusSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("LearnedSensorCount = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref LearnedSensorCount)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", VehicleConfigSequence = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref VehicleConfigSequence)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", SensorConfigSequence = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref SensorConfigSequence)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TpmsRepeaterMode = ");
			builder.Append(((Object)TpmsRepeaterMode/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TpmsRepeaterVoltageLevel = ");
			builder.Append(((Object)TpmsRepeaterVoltageLevel/*cast due to .constrained prefix*/).ToString());
			builder.Append(", RepeaterBatteryLow = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref RepeaterBatteryLow)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", RepeaterPowerSource = ");
			builder.Append(((Object)RepeaterPowerSource/*cast due to .constrained prefix*/).ToString());
			builder.Append(", RepeaterHasHardwareFault = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref RepeaterHasHardwareFault)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", RepeaterCharging = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref RepeaterCharging)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", RepeaterHasBattery = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref RepeaterHasBattery)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return (((((((((base.GetHashCode() * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(LearnedSensorCount)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(VehicleConfigSequence)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(SensorConfigSequence)) * -1521134295 + EqualityComparer<TpmsRepeaterMode>.Default.GetHashCode(TpmsRepeaterMode)) * -1521134295 + EqualityComparer<TpmsRepeaterVoltageLevel>.Default.GetHashCode(TpmsRepeaterVoltageLevel)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(RepeaterBatteryLow)) * -1521134295 + EqualityComparer<TpmsRepeaterPowerSource>.Default.GetHashCode(RepeaterPowerSource)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(RepeaterHasHardwareFault)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(RepeaterCharging)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(RepeaterHasBattery);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceTpmsStatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceTpmsStatusSerializable(LogicalDeviceTpmsStatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceTpmsStatusSerializable>)original)
		{
			LearnedSensorCount = original.LearnedSensorCount;
			VehicleConfigSequence = original.VehicleConfigSequence;
			SensorConfigSequence = original.SensorConfigSequence;
			TpmsRepeaterMode = original.TpmsRepeaterMode;
			TpmsRepeaterVoltageLevel = original.TpmsRepeaterVoltageLevel;
			RepeaterBatteryLow = original.RepeaterBatteryLow;
			RepeaterPowerSource = original.RepeaterPowerSource;
			RepeaterHasHardwareFault = original.RepeaterHasHardwareFault;
			RepeaterCharging = original.RepeaterCharging;
			RepeaterHasBattery = original.RepeaterHasBattery;
		}
	}
	public class LogicalDeviceUnknownRemote : LogicalDeviceUnknown, ILogicalDeviceRemote, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[field: CompilerGenerated]
		public RemoteOnline RemoteOnline
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public override bool IsRemoteAccessAvailable
		{
			get
			{
				ILogicalDeviceRemoteManager remoteManager = ((LogicalDevice<ILogicalDeviceCapability>)(object)this).DeviceService.RemoteManager;
				if (remoteManager == null)
				{
					return false;
				}
				return remoteManager.IsRemoteAccessAvailable((ILogicalDeviceRemote)(object)this);
			}
		}

		public IRemoteChannelDefOnline RemoteOnlineChannel => RemoteOnline?.Channel;

		public LogicalDeviceUnknownRemote(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
			: base(service, logicalDeviceId, rawCapability)
		{
			//IL_0003: Unknown result type (might be due to invalid IL or missing references)
			RemoteOnline = new RemoteOnline((ILogicalDeviceRemote)(object)this, ((LogicalDevice<ILogicalDeviceCapability>)this).RemoteChannels);
		}

		public override void Dispose(bool disposing)
		{
			RemoteOnline remoteOnline = RemoteOnline;
			if (remoteOnline != null)
			{
				((CommonDisposable)remoteOnline).TryDispose();
			}
			RemoteOnline = null;
			((LogicalDevice<LogicalDeviceStatusPacketMutable, ILogicalDeviceCapability>)this).Dispose(disposing);
		}

		TRemoteChannelDef ILogicalDeviceRemote.GetRemoteChannelForChannelId<TRemoteChannelDef>(string channelId)
		{
			return ((LogicalDevice<ILogicalDeviceCapability>)this).GetRemoteChannelForChannelId<TRemoteChannelDef>(channelId);
		}
	}
	public class LogicalDeviceUnknownRemoteFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceUnknownRemote(service, logicalDeviceId, rawCapability);
		}
	}
}
namespace OneControl.Devices.TPMS
{
	public enum LearnSensorOpCode : Enum
	{
		LearnCancel,
		LearnSensor,
		UnlearnSensor,
		UnconfigureVehicleConfigGroup,
		FactoryReset
	}
	public enum TpmsVehicleTemplate : Enum
	{
		CustomConfiguration = 0,
		TravelTrailer = 1,
		FifthWheel = 2,
		ClassA = 3,
		ClassC = 4,
		Truck = 128,
		Car = 129,
		InvalidUnknown = 255
	}
	public enum WriteSensorConfigurationResponseCode : Enum
	{
		Success = 0,
		Processing = 1,
		UnknownInvalidSensor = 2,
		InvalidTempLimit = 3,
		InvalidPressureLimit = 4,
		UnknownError = 15
	}
	public enum LearnSensorResponseCode : Enum
	{
		Success = 0,
		Processing = 1,
		UnknownInvalidSensor = 2,
		MaximumSensorsReached = 3,
		LearnTimeout = 4,
		MultipleSensorsFound = 5,
		DefaultState = 165,
		UnknownError = 255
	}
	public enum WriteVehicleConfigResponseCode : Enum
	{
		Success = 0,
		Processing = 1,
		RepeaterFull = 2,
		InvalidParameters = 3,
		DefaultState = 165,
		NvsConfiguration = 255
	}
	public enum TpmsGroupId : Enum
	{
		GroupId0 = 0,
		GroupId1 = 1,
		GroupId2 = 2,
		GroupId3 = 3,
		Invalid = 7
	}
	[Flags]
	public enum TpmsGroupIdHasActiveFault : Enum
	{
		None = 0,
		GroupId0 = 1,
		GroupId1 = 2,
		GroupId2 = 4,
		GroupId3 = 8,
		Reserved4 = 0x10,
		Reserved5 = 0x20,
		Reserved6 = 0x40,
		Reserved7 = 0x80
	}
	public enum TpmsRepeaterMode : Enum
	{
		Startup = 0,
		Monitoring = 1,
		Learn = 2,
		Unknown = 255
	}
	public enum TpmsRepeaterStatus : Enum
	{
		Startup = 0,
		Idle = 1,
		Scanning = 2,
		ScanSensorFound = 3,
		ScanNoSensorFound = 4,
		ScanMultipleSensorsFound = 5,
		LearnDone = 6,
		LearnTerminatedOrTimeout = 7,
		LearnCanceled = 8,
		SetIndexAck = 9,
		SetIndexNakOrOutOfRange = 16,
		Unknown = 255
	}
	public enum TpmsPressureStatus : Enum
	{
		Normal,
		FastLeak,
		Reserved,
		Inflation
	}
	public enum TpmsTemperatureFault : Enum
	{
		NoFault,
		HiTemperatureFault,
		Reserved,
		RelativeTemperatureFault
	}
	public enum TpmsPressureFault : Enum
	{
		NoFault,
		HiPressureFault,
		LowPressureFault,
		ReservedOrInvalid
	}
	public enum TpmsAlertId : Enum
	{
		SensorGeneralFaultAlert,
		RepeaterGeneralFaultAlert,
		VehicleConfigGroupFaultFlag
	}
	public enum TpmsRepeaterVoltageLevel : Enum
	{
		Empty = 0,
		TwentyFivePercent = 1,
		FiftyPercent = 2,
		SeventyFivePercent = 3,
		Full = 4,
		Error = 7
	}
	public enum TpmsRepeaterPowerSource : Enum
	{
		TwelveVoltSource,
		LiPoBatterySource
	}
	public interface ITpms
	{
		Task<IReadOnlyList<TpmsSensorConfiguration>> BlockReadSensorConfigurationsAsync(TpmsGroupId groupId, CancellationToken cancellationToken);

		Task<List<TpmsVehicleConfiguration>> BlockReadAllVehicleConfigurationsAsync(CancellationToken cancellationToken);

		Task<TpmsVehicleConfiguration> BlockReadVehicleConfigurationAsync(TpmsGroupId groupId, CancellationToken cancellationToken);

		Task<byte> BlockReadMaxSensorsSupportedAsync(CancellationToken cancellationToken);

		Task<byte> BlockReadMaxVehicleConfigsSupportedAsync(CancellationToken cancellationToken);

		Task<byte> BlockReadMaxSensorsPerVehicleConfigAsync(CancellationToken cancellationToken);

		Task<byte> BlockReadConfiguredSensorCountAsync(CancellationToken cancellationToken);

		Task<WriteSensorConfigurationResponseCode> WriteSensorConfigurationAsync(uint lowPressureLimit, uint highPressureLimit, int relativeTempLimit, int highTempLimit, byte tireIndex, TpmsGroupId groupId, CancellationToken cancellationToken);

		Task<LearnSensorResponseCode> LearnSensorAsync(LearnSensorOpCode opCode, TpmsGroupId groupId, byte tireIndex, CancellationToken cancellationToken);

		Task<LearnSensorResponseCode> FactoryResetRepeaterAsync(CancellationToken cancellationToken);

		Task<TpmsVehicleConfiguration> ReadVehicleConfigurationAsync(TpmsGroupId groupId, CancellationToken cancellationToken);

		Task WriteVehicleConfigurationAsync(TpmsVehicleConfiguration vehicleConfig, CancellationToken cancellationToken);

		Task<LearnSensorResponseCode> RemoveVehicleConfigurationAsync(LearnSensorOpCode opCode, TpmsGroupId groupId, CancellationToken cancellationToken);

		Nullable<TpmsGroupId> GetActiveTrailer();

		bool TrySaveActiveTrailer(TpmsGroupId activeTrailer);

		void UpdateSoftwarePartNumber(string softwarePartNumber);

		Task<string> GetRepeaterAssemblyPartNumberAsync(CancellationToken cancellationToken);
	}
	public interface ILogicalDeviceTpms : ITpms, ILogicalDeviceWithStatus<LogicalDeviceTpmsStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceTpmsStatus>, ILogicalDeviceWithStatusExtendedMultiplexed<LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId>, ILogicalDeviceWithStatusExtendedMultiplexed, ILogicalDeviceWithStatusExtended, ILogicalDeviceWithStatusAlertsLocap, ILogicalDeviceWithCapability<LogicalDeviceTpmsCapability>, ILogicalDeviceAccessory, IAccessoryDevice
	{
		LogicalDeviceTpmsStatusExtended GetDeviceStatusExtended(TpmsGroupId groupId, byte tireIndex);
	}
	public interface ILogicalDeviceTpmsDirect : ILogicalDeviceTpms, ITpms, ILogicalDeviceWithStatus<LogicalDeviceTpmsStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceTpmsStatus>, ILogicalDeviceWithStatusExtendedMultiplexed<LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId>, ILogicalDeviceWithStatusExtendedMultiplexed, ILogicalDeviceWithStatusExtended, ILogicalDeviceWithStatusAlertsLocap, ILogicalDeviceWithCapability<LogicalDeviceTpmsCapability>, ILogicalDeviceAccessory, IAccessoryDevice, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public class LogicalDeviceTpms : LogicalDeviceWithStatusExtendedMultiplexed<LogicalDeviceTpmsStatus, LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId, LogicalDeviceTpmsCapability>, ILogicalDeviceTpmsDirect, ILogicalDeviceTpms, ITpms, ILogicalDeviceWithStatus<LogicalDeviceTpmsStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceTpmsStatus>, ILogicalDeviceWithStatusExtendedMultiplexed<LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId>, ILogicalDeviceWithStatusExtendedMultiplexed, ILogicalDeviceWithStatusExtended, ILogicalDeviceWithStatusAlertsLocap, ILogicalDeviceWithCapability<LogicalDeviceTpmsCapability>, ILogicalDeviceAccessory, IAccessoryDevice, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass153_0 : Object
		{
			public LogicalDeviceTpms <>4__this;

			public TpmsGroupId groupId;

			internal TpmsSensorGroup <GetSensorGroup>b__0(TpmsGroupId id)
			{
				return new TpmsSensorGroup(<>4__this, groupId);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <BlockReadAllVehicleConfigurationsAsync>d__137 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<List<TpmsVehicleConfiguration>> <>t__builder;

			public LogicalDeviceTpms <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<IReadOnlyList<byte>> <>u__1;

			private void MoveNext()
			{
				//IL_01da: Expected O, but got Unknown
				//IL_0074: Unknown result type (might be due to invalid IL or missing references)
				//IL_0079: Unknown result type (might be due to invalid IL or missing references)
				//IL_0081: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_003f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0114: Unknown result type (might be due to invalid IL or missing references)
				//IL_0119: Unknown result type (might be due to invalid IL or missing references)
				//IL_012b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0130: Unknown result type (might be due to invalid IL or missing references)
				//IL_0147: Unknown result type (might be due to invalid IL or missing references)
				//IL_014c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTpms logicalDeviceTpms = <>4__this;
				List<TpmsVehicleConfiguration> result2;
				try
				{
					TaskAwaiter<IReadOnlyList<byte>> val;
					if (num != 0)
					{
						ILogicalDeviceSourceDirect primaryDeviceSourceDirect = ((LogicalDevice<LogicalDeviceTpmsCapability>)(object)logicalDeviceTpms).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceTpms);
						val = ((ILogicalDeviceSourceDirectAccessoryHistoryData)(((primaryDeviceSourceDirect is ILogicalDeviceSourceDirectAccessoryHistoryData) ? primaryDeviceSourceDirect : null) ?? throw new TpmsBlockReadsNotSupportedException())).GetAccessoryHistoryDataAsync((ILogicalDevice)(object)logicalDeviceTpms, (byte)4, (byte)0, (byte)160, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<IReadOnlyList<byte>>, <BlockReadAllVehicleConfigurationsAsync>d__137>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<IReadOnlyList<byte>>);
						num = (<>1__state = -1);
					}
					IReadOnlyList<byte> result = val.GetResult();
					byte[] array = Enumerable.ToArray<byte>((IEnumerable<byte>)(object)result);
					if (((IReadOnlyCollection<byte>)(object)result).Count > 160)
					{
						throw new TpmsBlockReadException(String.Format("Data received exceeds Maximum, received: {0} maximum: {1}", (object)((IReadOnlyCollection<byte>)(object)result).Count, (object)160));
					}
					TaggedLog.Debug("LogicalDeviceTpms", String.Concat("BlockReadVehicleConfig raw data: ", ArrayExtension.DebugDump(array, " ", false)), Array.Empty<object>());
					List<TpmsVehicleConfiguration> val2 = new List<TpmsVehicleConfiguration>();
					int num2 = 0;
					for (int i = 0; i < array.Length; i += 4)
					{
						TpmsVehicleTemplate tpmsVehicleTemplate = (TpmsVehicleTemplate)array[i + 3];
						BitPositionValue val3 = TiresPerAxleBitPosition;
						uint num3 = ((BitPositionValue)(ref val3)).DecodeValueFromBuffer(array, i + 2, 1);
						val3 = HasSpareBitPosition;
						bool flag = Convert.ToBoolean(((BitPositionValue)(ref val3)).DecodeValueFromBuffer(array, i + 1, 1));
						val3 = NumberOfAxlesBitPosition;
						uint num4 = ((BitPositionValue)(ref val3)).DecodeValueFromBuffer(array, i + 1, 1);
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("VehicleConfig vehicleTemplate: {0} tiresPerAxle: {1} hasSpare: {2} numberOfAxles: {3}", (object[])(object)new Object[4]
						{
							(object)tpmsVehicleTemplate,
							(object)num3,
							(object)flag,
							(object)num4
						}), Array.Empty<object>());
						val2.Add(new TpmsVehicleConfiguration((TpmsGroupId)num2, tpmsVehicleTemplate, num3, flag, (byte)num4));
						num2++;
					}
					result2 = val2;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <BlockReadConfiguredSensorCountAsync>d__143 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<byte> <>t__builder;

			public LogicalDeviceTpms <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<IReadOnlyList<byte>> <>u__1;

			private void MoveNext()
			{
				//IL_00fe: Expected O, but got Unknown
				//IL_0072: Unknown result type (might be due to invalid IL or missing references)
				//IL_0077: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0033: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0042: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTpms logicalDeviceTpms = <>4__this;
				byte result2;
				try
				{
					TaskAwaiter<IReadOnlyList<byte>> val;
					if (num != 0)
					{
						ILogicalDeviceSourceDirect primaryDeviceSourceDirect = ((LogicalDevice<LogicalDeviceTpmsCapability>)(object)logicalDeviceTpms).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceTpms);
						val = ((ILogicalDeviceSourceDirectAccessoryHistoryData)(((primaryDeviceSourceDirect is ILogicalDeviceSourceDirectAccessoryHistoryData) ? primaryDeviceSourceDirect : null) ?? throw new TpmsBlockReadsNotSupportedException())).GetAccessoryHistoryDataAsync((ILogicalDevice)(object)logicalDeviceTpms, (byte)9, (byte)0, (byte)25, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<IReadOnlyList<byte>>, <BlockReadConfiguredSensorCountAsync>d__143>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<IReadOnlyList<byte>>);
						num = (<>1__state = -1);
					}
					IReadOnlyList<byte> result = val.GetResult();
					byte[] array = Enumerable.ToArray<byte>((IEnumerable<byte>)(object)result);
					TaggedLog.Debug("LogicalDeviceTpms", String.Concat("BlockReadConfiguredSensorCountAsync raw data: ", ArrayExtension.DebugDump(array, " ", false)), Array.Empty<object>());
					if (((IReadOnlyCollection<byte>)(object)result).Count < 25)
					{
						throw new TpmsBlockReadException(String.Format("Data received is less than requested, received: {0} maximum: {1}", (object)((IReadOnlyCollection<byte>)(object)result).Count, (object)25));
					}
					result2 = result[24];
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <BlockReadMaxSensorsPerVehicleConfigAsync>d__142 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<byte> <>t__builder;

			public LogicalDeviceTpms <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<IReadOnlyList<byte>> <>u__1;

			private void MoveNext()
			{
				//IL_00fe: Expected O, but got Unknown
				//IL_0072: Unknown result type (might be due to invalid IL or missing references)
				//IL_0077: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0033: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0042: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTpms logicalDeviceTpms = <>4__this;
				byte result2;
				try
				{
					TaskAwaiter<IReadOnlyList<byte>> val;
					if (num != 0)
					{
						ILogicalDeviceSourceDirect primaryDeviceSourceDirect = ((LogicalDevice<LogicalDeviceTpmsCapability>)(object)logicalDeviceTpms).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceTpms);
						val = ((ILogicalDeviceSourceDirectAccessoryHistoryData)(((primaryDeviceSourceDirect is ILogicalDeviceSourceDirectAccessoryHistoryData) ? primaryDeviceSourceDirect : null) ?? throw new TpmsBlockReadsNotSupportedException())).GetAccessoryHistoryDataAsync((ILogicalDevice)(object)logicalDeviceTpms, (byte)9, (byte)0, (byte)25, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<IReadOnlyList<byte>>, <BlockReadMaxSensorsPerVehicleConfigAsync>d__142>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<IReadOnlyList<byte>>);
						num = (<>1__state = -1);
					}
					IReadOnlyList<byte> result = val.GetResult();
					byte[] array = Enumerable.ToArray<byte>((IEnumerable<byte>)(object)result);
					TaggedLog.Debug("LogicalDeviceTpms", String.Concat("BlockReadMaxSensorsPerVehicleConfigAsync raw data: ", ArrayExtension.DebugDump(array, " ", false)), Array.Empty<object>());
					if (((IReadOnlyCollection<byte>)(object)result).Count < 25)
					{
						throw new TpmsBlockReadException(String.Format("Data received is less than requested, received: {0} maximum: {1}", (object)((IReadOnlyCollection<byte>)(object)result).Count, (object)25));
					}
					result2 = result[19];
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <BlockReadMaxSensorsSupportedAsync>d__140 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<byte> <>t__builder;

			public LogicalDeviceTpms <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<IReadOnlyList<byte>> <>u__1;

			private void MoveNext()
			{
				//IL_00fe: Expected O, but got Unknown
				//IL_0072: Unknown result type (might be due to invalid IL or missing references)
				//IL_0077: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0033: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0042: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTpms logicalDeviceTpms = <>4__this;
				byte result2;
				try
				{
					TaskAwaiter<IReadOnlyList<byte>> val;
					if (num != 0)
					{
						ILogicalDeviceSourceDirect primaryDeviceSourceDirect = ((LogicalDevice<LogicalDeviceTpmsCapability>)(object)logicalDeviceTpms).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceTpms);
						val = ((ILogicalDeviceSourceDirectAccessoryHistoryData)(((primaryDeviceSourceDirect is ILogicalDeviceSourceDirectAccessoryHistoryData) ? primaryDeviceSourceDirect : null) ?? throw new TpmsBlockReadsNotSupportedException())).GetAccessoryHistoryDataAsync((ILogicalDevice)(object)logicalDeviceTpms, (byte)9, (byte)0, (byte)25, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<IReadOnlyList<byte>>, <BlockReadMaxSensorsSupportedAsync>d__140>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<IReadOnlyList<byte>>);
						num = (<>1__state = -1);
					}
					IReadOnlyList<byte> result = val.GetResult();
					byte[] array = Enumerable.ToArray<byte>((IEnumerable<byte>)(object)result);
					TaggedLog.Debug("LogicalDeviceTpms", String.Concat("BlockReadMaxSensorsSupported raw data: ", ArrayExtension.DebugDump(array, " ", false)), Array.Empty<object>());
					if (((IReadOnlyCollection<byte>)(object)result).Count < 25)
					{
						throw new TpmsBlockReadException(String.Format("Data received is less than requested, received: {0} maximum: {1}", (object)((IReadOnlyCollection<byte>)(object)result).Count, (object)25));
					}
					result2 = result[17];
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <BlockReadMaxVehicleConfigsSupportedAsync>d__141 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<byte> <>t__builder;

			public LogicalDeviceTpms <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<IReadOnlyList<byte>> <>u__1;

			private void MoveNext()
			{
				//IL_00fe: Expected O, but got Unknown
				//IL_0072: Unknown result type (might be due to invalid IL or missing references)
				//IL_0077: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0033: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0042: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTpms logicalDeviceTpms = <>4__this;
				byte result2;
				try
				{
					TaskAwaiter<IReadOnlyList<byte>> val;
					if (num != 0)
					{
						ILogicalDeviceSourceDirect primaryDeviceSourceDirect = ((LogicalDevice<LogicalDeviceTpmsCapability>)(object)logicalDeviceTpms).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceTpms);
						val = ((ILogicalDeviceSourceDirectAccessoryHistoryData)(((primaryDeviceSourceDirect is ILogicalDeviceSourceDirectAccessoryHistoryData) ? primaryDeviceSourceDirect : null) ?? throw new TpmsBlockReadsNotSupportedException())).GetAccessoryHistoryDataAsync((ILogicalDevice)(object)logicalDeviceTpms, (byte)9, (byte)0, (byte)25, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<IReadOnlyList<byte>>, <BlockReadMaxVehicleConfigsSupportedAsync>d__141>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<IReadOnlyList<byte>>);
						num = (<>1__state = -1);
					}
					IReadOnlyList<byte> result = val.GetResult();
					byte[] array = Enumerable.ToArray<byte>((IEnumerable<byte>)(object)result);
					TaggedLog.Debug("LogicalDeviceTpms", String.Concat("BlockReadMaxSensorsSupported raw data: ", ArrayExtension.DebugDump(array, " ", false)), Array.Empty<object>());
					if (((IReadOnlyCollection<byte>)(object)result).Count < 25)
					{
						throw new TpmsBlockReadException(String.Format("Data received is less than requested, received: {0} maximum: {1}", (object)((IReadOnlyCollection<byte>)(object)result).Count, (object)25));
					}
					result2 = result[18];
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <BlockReadSensorConfigurationsAsync>d__136 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<IReadOnlyList<TpmsSensorConfiguration>> <>t__builder;

			public TpmsGroupId groupId;

			public LogicalDeviceTpms <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<IReadOnlyList<byte>> <>u__1;

			private void MoveNext()
			{
				//IL_0431: Expected O, but got Unknown
				//IL_046a: Expected O, but got Unknown
				//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fd: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_01aa: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c0: Unknown result type (might be due to invalid IL or missing references)
				//IL_01fa: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ff: Unknown result type (might be due to invalid IL or missing references)
				//IL_0223: Unknown result type (might be due to invalid IL or missing references)
				//IL_0228: Unknown result type (might be due to invalid IL or missing references)
				//IL_024c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0251: Unknown result type (might be due to invalid IL or missing references)
				//IL_0294: Unknown result type (might be due to invalid IL or missing references)
				//IL_0299: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTpms logicalDeviceTpms = <>4__this;
				IReadOnlyList<TpmsSensorConfiguration> result2;
				try
				{
					TaskAwaiter<IReadOnlyList<byte>> val2;
					if (num != 0)
					{
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("ReadSensorConfigurationsAsync for groupId: {0}", (object)groupId), Array.Empty<object>());
						ILogicalDeviceSourceDirect primaryDeviceSourceDirect = ((LogicalDevice<LogicalDeviceTpmsCapability>)(object)logicalDeviceTpms).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceTpms);
						ILogicalDeviceSourceDirectAccessoryHistoryData val = (ILogicalDeviceSourceDirectAccessoryHistoryData)(object)((primaryDeviceSourceDirect is ILogicalDeviceSourceDirectAccessoryHistoryData) ? primaryDeviceSourceDirect : null);
						if (val == null)
						{
							throw new TpmsBlockReadsNotSupportedException();
						}
						val2 = val.GetAccessoryHistoryDataAsync((ILogicalDevice)(object)logicalDeviceTpms, groupId switch
						{
							TpmsGroupId.GroupId0 => 0, 
							TpmsGroupId.GroupId1 => 1, 
							TpmsGroupId.GroupId2 => 2, 
							TpmsGroupId.GroupId3 => 3, 
							_ => throw new TpmsInvalidGroupIdException(groupId), 
						}, (byte)0, (byte)160, cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<IReadOnlyList<byte>>, <BlockReadSensorConfigurationsAsync>d__136>(ref val2, ref this);
							return;
						}
					}
					else
					{
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<IReadOnlyList<byte>>);
						num = (<>1__state = -1);
					}
					IReadOnlyList<byte> result = val2.GetResult();
					byte[] array = Enumerable.ToArray<byte>((IEnumerable<byte>)(object)result);
					TaggedLog.Debug("LogicalDeviceTpms", String.Format("ReadSensorConfigsAsync response count: {0} raw data: {1}", (object)((IReadOnlyCollection<byte>)(object)result).Count, (object)ArrayExtension.DebugDump(array, " ", false)), Array.Empty<object>());
					if (((IReadOnlyCollection<byte>)(object)result).Count > 160)
					{
						throw new TpmsBlockReadException(String.Format("Data received exceeds Maximum, received: {0} maximum: {1}", (object)((IReadOnlyCollection<byte>)(object)result).Count, (object)160));
					}
					List<TpmsSensorConfiguration> val3 = new List<TpmsSensorConfiguration>();
					for (int i = 0; i < ((IReadOnlyCollection<byte>)(object)result).Count; i += 10)
					{
						try
						{
							TpmsPositionalSensorId positionalSensorId = new TpmsPositionalSensorId(result[i]);
							BitPositionValue val4 = BlockReadHighTempLimitBitPosition;
							uint num2 = ((BitPositionValue)(ref val4)).DecodeValue((uint)((result[i + 5] << 8) | result[i + 6]));
							float num3 = (float)num2 / 4f;
							float num4 = Temperature.ConvertCelsiusToFahrenheit(num3);
							int num5 = result[i + 4] * 2;
							if (num5 < 1)
							{
								num5 = 1;
							}
							val4 = BlockReadHighPsiLimitBitPosition;
							uint num6 = ((BitPositionValue)(ref val4)).DecodeValue((uint)((result[i + 1] << 8) | result[i + 2]));
							val4 = BlockReadLowPsiLimitBitPosition;
							uint num7 = ((BitPositionValue)(ref val4)).DecodeValue((uint)((result[i + 2] << 8) | result[i + 3]));
							val4 = SensorMacBitPosition;
							uint num8 = ((BitPositionValue)(ref val4)).DecodeValue((uint)((result[i + 6] << 24) | (result[i + 7] << 16) | (result[i + 8] << 8) | result[i + 9]));
							val4 = SensorModelBitPosition;
							byte b = (byte)((BitPositionValue)(ref val4)).DecodeValue((uint)result[i + 9]);
							TaggedLog.Debug("LogicalDeviceTpms", String.Format("ReadSensorConfigsAsync highPressureLimit raw: {0} lowPressureLimit raw: {1}", (object)num6, (object)num7), Array.Empty<object>());
							float num9 = (float)num7 / 128f;
							num7 = Convert.ToUInt32(num9 * 14.50377f);
							float num10 = (float)num6 / 128f;
							num6 = Convert.ToUInt32(num10 * 14.50377f);
							TaggedLog.Debug("LogicalDeviceTpms", String.Concat(String.Format("ReadSensorConfigsAsync response data - index: {0} positionalSensorId raw: {1} groupId: {2} tireIndex: {3} ", (object[])(object)new Object[4]
							{
								(object)i,
								(object)result[i],
								(object)positionalSensorId.GroupId,
								(object)positionalSensorId.TireIndex
							}), String.Format("highTempLimit: {0} highTempLimit: {1} highTempLimitConverted: {2} highTempLimitRounded: {3} relativeTempLimit: {4} highPressureLimitConverted: {5} ", (object[])(object)new Object[6]
							{
								(object)num2,
								(object)num3,
								(object)num4,
								(object)Convert.ToUInt32(num4),
								(object)num5,
								(object)num10
							}), String.Format("highPressureLimit: {0} lowPressureLimitConverted: {1} lowPressureLimit: {2}  mac: {3:X}", (object[])(object)new Object[4]
							{
								(object)num6,
								(object)num9,
								(object)num7,
								(object)num8
							}), String.Format(" sensorModel: {0}", (object)b)), Array.Empty<object>());
							TpmsSensorConfiguration tpmsSensorConfiguration = new TpmsSensorConfiguration(positionalSensorId, Convert.ToInt32(num4), Convert.ToInt32(num5), num6, num7, num8, b);
							val3.Add(tpmsSensorConfiguration);
						}
						catch (Exception ex)
						{
							Exception ex2 = ex;
							TaggedLog.Error("LogicalDeviceTpms", String.Format("Error decoding sensor configuration data: {0}", (object)ex2), Array.Empty<object>());
						}
					}
					result2 = (IReadOnlyList<TpmsSensorConfiguration>)(object)val3;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <BlockReadSensorStatusesAsync>d__139 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<IReadOnlyList<LogicalDeviceTpmsStatusExtended>> <>t__builder;

			public LogicalDeviceTpms <>4__this;

			public TpmsGroupId groupId;

			public CancellationToken cancellationToken;

			private TaskAwaiter<IReadOnlyList<byte>> <>u__1;

			private void MoveNext()
			{
				//IL_0194: Expected O, but got Unknown
				//IL_00cc: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_008d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0097: Unknown result type (might be due to invalid IL or missing references)
				//IL_009c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0152: Unknown result type (might be due to invalid IL or missing references)
				//IL_0165: Unknown result type (might be due to invalid IL or missing references)
				//IL_016b: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b3: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTpms logicalDeviceTpms = <>4__this;
				IReadOnlyList<LogicalDeviceTpmsStatusExtended> result2;
				try
				{
					TaskAwaiter<IReadOnlyList<byte>> val2;
					if (num != 0)
					{
						ILogicalDeviceSourceDirect primaryDeviceSourceDirect = ((LogicalDevice<LogicalDeviceTpmsCapability>)(object)logicalDeviceTpms).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceTpms);
						ILogicalDeviceSourceDirectAccessoryHistoryData val = (ILogicalDeviceSourceDirectAccessoryHistoryData)(object)((primaryDeviceSourceDirect is ILogicalDeviceSourceDirectAccessoryHistoryData) ? primaryDeviceSourceDirect : null);
						if (val == null)
						{
							throw new TpmsBlockReadsNotSupportedException();
						}
						val2 = val.GetAccessoryHistoryDataAsync((ILogicalDevice)(object)logicalDeviceTpms, groupId switch
						{
							TpmsGroupId.GroupId0 => 5, 
							TpmsGroupId.GroupId1 => 6, 
							TpmsGroupId.GroupId2 => 7, 
							TpmsGroupId.GroupId3 => 8, 
							_ => throw new TpmsInvalidGroupIdException(groupId), 
						}, (byte)0, (byte)160, cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<IReadOnlyList<byte>>, <BlockReadSensorStatusesAsync>d__139>(ref val2, ref this);
							return;
						}
					}
					else
					{
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<IReadOnlyList<byte>>);
						num = (<>1__state = -1);
					}
					IReadOnlyList<byte> result = val2.GetResult();
					byte[] array = Enumerable.ToArray<byte>((IEnumerable<byte>)(object)result);
					if (((IReadOnlyCollection<byte>)(object)result).Count > 160)
					{
						throw new TpmsBlockReadException(String.Format("Data received exceeds Maximum, received: {0} maximum: {1}", (object)((IReadOnlyCollection<byte>)(object)result).Count, (object)160));
					}
					List<LogicalDeviceTpmsStatusExtended> val3 = new List<LogicalDeviceTpmsStatusExtended>();
					ArraySegment<byte> val4 = default(ArraySegment<byte>);
					for (int i = 0; i < ((IReadOnlyCollection<byte>)(object)result).Count; i += 8)
					{
						LogicalDeviceTpmsStatusExtended logicalDeviceTpmsStatusExtended = new LogicalDeviceTpmsStatusExtended();
						val4..ctor(array, i + 1, 7);
						((LogicalDeviceStatusPacketMutableExtended)logicalDeviceTpmsStatusExtended).Update((IReadOnlyList<byte>)(object)val4, 7u, result[i], default(Nullable<DateTime>));
						val3.Add(logicalDeviceTpmsStatusExtended);
					}
					result2 = (IReadOnlyList<LogicalDeviceTpmsStatusExtended>)(object)val3;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <BlockReadVehicleConfigurationAsync>d__138 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<TpmsVehicleConfiguration> <>t__builder;

			public LogicalDeviceTpms <>4__this;

			public CancellationToken cancellationToken;

			public TpmsGroupId groupId;

			private TaskAwaiter<IReadOnlyList<byte>> <>u__1;

			private void MoveNext()
			{
				//IL_024a: Expected O, but got Unknown
				//IL_0074: Unknown result type (might be due to invalid IL or missing references)
				//IL_0079: Unknown result type (might be due to invalid IL or missing references)
				//IL_0081: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_003f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0111: Unknown result type (might be due to invalid IL or missing references)
				//IL_0116: Unknown result type (might be due to invalid IL or missing references)
				//IL_0128: Unknown result type (might be due to invalid IL or missing references)
				//IL_012d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0144: Unknown result type (might be due to invalid IL or missing references)
				//IL_0149: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTpms logicalDeviceTpms = <>4__this;
				TpmsVehicleConfiguration result2;
				try
				{
					TaskAwaiter<IReadOnlyList<byte>> val;
					if (num != 0)
					{
						ILogicalDeviceSourceDirect primaryDeviceSourceDirect = ((LogicalDevice<LogicalDeviceTpmsCapability>)(object)logicalDeviceTpms).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceTpms);
						val = ((ILogicalDeviceSourceDirectAccessoryHistoryData)(((primaryDeviceSourceDirect is ILogicalDeviceSourceDirectAccessoryHistoryData) ? primaryDeviceSourceDirect : null) ?? throw new TpmsBlockReadsNotSupportedException())).GetAccessoryHistoryDataAsync((ILogicalDevice)(object)logicalDeviceTpms, (byte)4, (byte)0, (byte)160, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<IReadOnlyList<byte>>, <BlockReadVehicleConfigurationAsync>d__138>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<IReadOnlyList<byte>>);
						num = (<>1__state = -1);
					}
					IReadOnlyList<byte> result = val.GetResult();
					byte[] array = Enumerable.ToArray<byte>((IEnumerable<byte>)(object)result);
					if (((IReadOnlyCollection<byte>)(object)result).Count > 160)
					{
						throw new TpmsBlockReadException(String.Format("Data received exceeds Maximum, received: {0} maximum: {1}", (object)((IReadOnlyCollection<byte>)(object)result).Count, (object)160));
					}
					TaggedLog.Debug("LogicalDeviceTpms", String.Concat("BlockReadVehicleConfig raw data: ", ArrayExtension.DebugDump(array, " ", false)), Array.Empty<object>());
					List<TpmsVehicleConfiguration> val2 = new List<TpmsVehicleConfiguration>();
					for (int i = 0; i < array.Length; i += 4)
					{
						TpmsVehicleTemplate tpmsVehicleTemplate = (TpmsVehicleTemplate)array[i + 3];
						BitPositionValue val3 = TiresPerAxleBitPosition;
						uint num2 = ((BitPositionValue)(ref val3)).DecodeValueFromBuffer(array, i + 2, 1);
						val3 = HasSpareBitPosition;
						bool flag = Convert.ToBoolean(((BitPositionValue)(ref val3)).DecodeValueFromBuffer(array, i + 1, 1));
						val3 = NumberOfAxlesBitPosition;
						uint num3 = ((BitPositionValue)(ref val3)).DecodeValueFromBuffer(array, i + 1, 1);
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("VehicleConfig vehicleTemplate: {0} tiresPerAxle: {1} hasSpare: {2} numberOfAxles: {3}", (object[])(object)new Object[4]
						{
							(object)tpmsVehicleTemplate,
							(object)num2,
							(object)flag,
							(object)num3
						}), Array.Empty<object>());
						val2.Add(new TpmsVehicleConfiguration((TpmsGroupId)i, tpmsVehicleTemplate, num2, flag, (byte)num3));
					}
					result2 = groupId switch
					{
						TpmsGroupId.GroupId0 => val2[(int)groupId], 
						TpmsGroupId.GroupId1 => val2[(int)groupId], 
						TpmsGroupId.GroupId2 => val2[(int)groupId], 
						TpmsGroupId.GroupId3 => val2[(int)groupId], 
						_ => throw new TpmsInvalidGroupIdException(groupId), 
					};
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <FactoryResetRepeaterAsync>d__133 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<LearnSensorResponseCode> <>t__builder;

			public LogicalDeviceTpms <>4__this;

			public CancellationToken cancellationToken;

			private byte[] <pidBytes>5__2;

			private uint <oldSequenceCount>5__3;

			private uint <learnSensorPidUpdateSequenceCount>5__4;

			private Nullable<LearnSensorOpCode> <opCodeResponse>5__5;

			private LearnSensorResponseCode <learnSensorResponse>5__6;

			private TaskAwaiter<byte[]> <>u__1;

			private TaskAwaiter <>u__2;

			private int <attempts>5__7;

			private TaskAwaiter<bool> <>u__3;

			private void MoveNext()
			{
				//IL_02ad: Expected O, but got Unknown
				//IL_048e: Expected O, but got Unknown
				//IL_02eb: Unknown result type (might be due to invalid IL or missing references)
				//IL_009c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_016f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0174: Unknown result type (might be due to invalid IL or missing references)
				//IL_017c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0226: Unknown result type (might be due to invalid IL or missing references)
				//IL_022b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0233: Unknown result type (might be due to invalid IL or missing references)
				//IL_03af: Unknown result type (might be due to invalid IL or missing references)
				//IL_03b4: Unknown result type (might be due to invalid IL or missing references)
				//IL_03bc: Unknown result type (might be due to invalid IL or missing references)
				//IL_005d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0370: Unknown result type (might be due to invalid IL or missing references)
				//IL_037a: Unknown result type (might be due to invalid IL or missing references)
				//IL_037f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0130: Unknown result type (might be due to invalid IL or missing references)
				//IL_013a: Unknown result type (might be due to invalid IL or missing references)
				//IL_013f: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0081: Unknown result type (might be due to invalid IL or missing references)
				//IL_0083: Unknown result type (might be due to invalid IL or missing references)
				//IL_0394: Unknown result type (might be due to invalid IL or missing references)
				//IL_0396: Unknown result type (might be due to invalid IL or missing references)
				//IL_0154: Unknown result type (might be due to invalid IL or missing references)
				//IL_0156: Unknown result type (might be due to invalid IL or missing references)
				//IL_027b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0280: Unknown result type (might be due to invalid IL or missing references)
				//IL_029f: Unknown result type (might be due to invalid IL or missing references)
				//IL_02a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f1: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0416: Unknown result type (might be due to invalid IL or missing references)
				//IL_020b: Unknown result type (might be due to invalid IL or missing references)
				//IL_020d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0449: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTpms logicalDeviceTpms = <>4__this;
				LearnSensorResponseCode result3;
				try
				{
					TaskAwaiter val3;
					TaskAwaiter<byte[]> val2;
					TaskAwaiter<bool> val;
					byte[] result;
					BitPositionValue learnSensorPidUpdateSequenceCountBitPosition;
					byte[] result2;
					switch (num)
					{
					default:
						TaggedLog.Debug("LogicalDeviceTpms", "FactoryResetRepeater called.", Array.Empty<object>());
						<pidBytes>5__2 = (byte[])(object)new Byte[6];
						<pidBytes>5__2[5] = 4;
						<pidBytes>5__2[4] = 0;
						val2 = ((ILogicalDevicePid<byte[]>)(object)logicalDeviceTpms.LearnSensorAckPid).ReadAsync(cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<byte[]>, <FactoryResetRepeaterAsync>d__133>(ref val2, ref this);
							return;
						}
						goto IL_00b8;
					case 0:
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<byte[]>);
						num = (<>1__state = -1);
						goto IL_00b8;
					case 1:
						val3 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_018b;
					case 2:
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<byte[]>);
						num = (<>1__state = -1);
						goto IL_0242;
					case 3:
						{
							val = <>u__3;
							<>u__3 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_03cb;
						}
						IL_0242:
						result = val2.GetResult();
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("FactoryResetRepeater response length: {0} raw data: {1}", (object)result.Length, (object)ArrayExtension.DebugDump(result, " ", false)), Array.Empty<object>());
						try
						{
							learnSensorPidUpdateSequenceCountBitPosition = LearnSensorPidUpdateSequenceCountBitPosition;
							<learnSensorPidUpdateSequenceCount>5__4 = ((BitPositionValue)(ref learnSensorPidUpdateSequenceCountBitPosition)).DecodeValueFromBuffer(result);
							<learnSensorResponse>5__6 = (LearnSensorResponseCode)result[1];
							<opCodeResponse>5__5 = new Nullable<LearnSensorOpCode>((LearnSensorOpCode)result[3]);
						}
						catch (Exception ex)
						{
							Exception ex2 = ex;
							TaggedLog.Debug("LogicalDeviceTpms", String.Format("FactoryResetRepeater problem decoding data from pid: {0}", (object)ex2), Array.Empty<object>());
						}
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("FactoryResetRepeater learnSensorResponse: {0} opCodeResponse: {1} oldSequenceCount: {2} sequenceCount: {3}.", (object[])(object)new Object[4]
						{
							(object)<learnSensorResponse>5__6,
							(object)<opCodeResponse>5__5,
							(object)<oldSequenceCount>5__3,
							(object)<learnSensorPidUpdateSequenceCount>5__4
						}), Array.Empty<object>());
						if (<learnSensorResponse>5__6 != LearnSensorResponseCode.Processing && <learnSensorResponse>5__6 != LearnSensorResponseCode.DefaultState && <opCodeResponse>5__5.GetValueOrDefault() == LearnSensorOpCode.FactoryReset && <learnSensorPidUpdateSequenceCount>5__4 != <oldSequenceCount>5__3)
						{
							break;
						}
						TaggedLog.Debug("LogicalDeviceTpms", "FactoryResetRepeater delaying before reading pid.", Array.Empty<object>());
						val = TaskExtension.TryDelay(500, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 3);
							<>u__3 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <FactoryResetRepeaterAsync>d__133>(ref val, ref this);
							return;
						}
						goto IL_03cb;
						IL_00b8:
						result2 = val2.GetResult();
						learnSensorPidUpdateSequenceCountBitPosition = LearnSensorPidUpdateSequenceCountBitPosition;
						<oldSequenceCount>5__3 = ((BitPositionValue)(ref learnSensorPidUpdateSequenceCountBitPosition)).DecodeValueFromBuffer(result2);
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("FactoryResetRepeater oldSequenceCount: {0}.", (object)<oldSequenceCount>5__3), Array.Empty<object>());
						TaggedLog.Debug("LogicalDeviceTpms", String.Concat("FactoryResetRepeater writing raw data: ", ArrayExtension.DebugDump(<pidBytes>5__2, " ", false)), Array.Empty<object>());
						val3 = ((ILogicalDevicePid<byte[]>)(object)logicalDeviceTpms.LearnSensorCommandPid).WriteAsync(<pidBytes>5__2, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val3)).IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val3;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <FactoryResetRepeaterAsync>d__133>(ref val3, ref this);
							return;
						}
						goto IL_018b;
						IL_03cb:
						val.GetResult();
						<attempts>5__7++;
						goto IL_03e5;
						IL_018b:
						((TaskAwaiter)(ref val3)).GetResult();
						TaggedLog.Debug("LogicalDeviceTpms", "FactoryResetRepeater finished writing pid.", Array.Empty<object>());
						<learnSensorPidUpdateSequenceCount>5__4 = 0u;
						<opCodeResponse>5__5 = default(Nullable<LearnSensorOpCode>);
						<learnSensorResponse>5__6 = LearnSensorResponseCode.UnknownInvalidSensor;
						<attempts>5__7 = 0;
						goto IL_03e5;
						IL_03e5:
						if (<attempts>5__7 >= 180)
						{
							break;
						}
						TaggedLog.Debug("LogicalDeviceTpms", "FactoryResetRepeater reading pid.", Array.Empty<object>());
						val2 = ((ILogicalDevicePid<byte[]>)(object)logicalDeviceTpms.LearnSensorAckPid).ReadAsync(cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__1 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<byte[]>, <FactoryResetRepeaterAsync>d__133>(ref val2, ref this);
							return;
						}
						goto IL_0242;
					}
					TaggedLog.Debug("LogicalDeviceTpms", String.Format("FactoryResetRepeater response data - sequenceCount: {0} learnSensorResponse: {1} opCode: {2}", (object)<learnSensorPidUpdateSequenceCount>5__4, (object)<learnSensorResponse>5__6, (object)<opCodeResponse>5__5), Array.Empty<object>());
					if (<opCodeResponse>5__5.GetValueOrDefault() != LearnSensorOpCode.FactoryReset)
					{
						throw new TpmsInvalidResponseDataException(String.Format("Sent opCode: {0} received: {1}", (object)LearnSensorOpCode.FactoryReset, (object)<opCodeResponse>5__5));
					}
					TaggedLog.Debug("LogicalDeviceTpms", String.Format("FactoryReset learnSensorResponse: {0}", (object)<learnSensorResponse>5__6), Array.Empty<object>());
					result3 = <learnSensorResponse>5__6;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<pidBytes>5__2 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<pidBytes>5__2 = null;
				<>t__builder.SetResult(result3);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <LearnSensorAsync>d__131 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<LearnSensorResponseCode> <>t__builder;

			public LearnSensorOpCode opCode;

			public TpmsGroupId groupId;

			public byte tireIndex;

			public LogicalDeviceTpms <>4__this;

			public CancellationToken cancellationToken;

			private byte[] <pidBytes>5__2;

			private uint <oldSequenceCount>5__3;

			private uint <learnSensorPidUpdateSequenceCount>5__4;

			private Nullable<LearnSensorOpCode> <opCodeResponse>5__5;

			private Nullable<TpmsGroupId> <groupIdResponse>5__6;

			private Nullable<byte> <tireIndexResponse>5__7;

			private LearnSensorResponseCode <learnSensorResponse>5__8;

			private TaskAwaiter<byte[]> <>u__1;

			private TaskAwaiter <>u__2;

			private int <attempts>5__9;

			private TaskAwaiter<bool> <>u__3;

			private void MoveNext()
			{
				//IL_04c5: Expected O, but got Unknown
				//IL_07bb: Expected O, but got Unknown
				//IL_0503: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b2: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_0285: Unknown result type (might be due to invalid IL or missing references)
				//IL_028a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0292: Unknown result type (might be due to invalid IL or missing references)
				//IL_037b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0380: Unknown result type (might be due to invalid IL or missing references)
				//IL_0388: Unknown result type (might be due to invalid IL or missing references)
				//IL_0403: Unknown result type (might be due to invalid IL or missing references)
				//IL_0408: Unknown result type (might be due to invalid IL or missing references)
				//IL_0410: Unknown result type (might be due to invalid IL or missing references)
				//IL_05da: Unknown result type (might be due to invalid IL or missing references)
				//IL_05df: Unknown result type (might be due to invalid IL or missing references)
				//IL_05e7: Unknown result type (might be due to invalid IL or missing references)
				//IL_059b: Unknown result type (might be due to invalid IL or missing references)
				//IL_05a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_05aa: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01dc: Unknown result type (might be due to invalid IL or missing references)
				//IL_0246: Unknown result type (might be due to invalid IL or missing references)
				//IL_0250: Unknown result type (might be due to invalid IL or missing references)
				//IL_0255: Unknown result type (might be due to invalid IL or missing references)
				//IL_02c9: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d5: Unknown result type (might be due to invalid IL or missing references)
				//IL_02e1: Unknown result type (might be due to invalid IL or missing references)
				//IL_05bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_05c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0556: Unknown result type (might be due to invalid IL or missing references)
				//IL_055b: Unknown result type (might be due to invalid IL or missing references)
				//IL_026a: Unknown result type (might be due to invalid IL or missing references)
				//IL_026c: Unknown result type (might be due to invalid IL or missing references)
				//IL_03c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_03ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_03d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0458: Unknown result type (might be due to invalid IL or missing references)
				//IL_045d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0478: Unknown result type (might be due to invalid IL or missing references)
				//IL_047d: Unknown result type (might be due to invalid IL or missing references)
				//IL_048a: Unknown result type (might be due to invalid IL or missing references)
				//IL_048f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0495: Unknown result type (might be due to invalid IL or missing references)
				//IL_049a: Unknown result type (might be due to invalid IL or missing references)
				//IL_04a8: Unknown result type (might be due to invalid IL or missing references)
				//IL_04ad: Unknown result type (might be due to invalid IL or missing references)
				//IL_04b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_04bc: Unknown result type (might be due to invalid IL or missing references)
				//IL_064f: Unknown result type (might be due to invalid IL or missing references)
				//IL_065d: Unknown result type (might be due to invalid IL or missing references)
				//IL_066b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0686: Unknown result type (might be due to invalid IL or missing references)
				//IL_068b: Unknown result type (might be due to invalid IL or missing references)
				//IL_03e8: Unknown result type (might be due to invalid IL or missing references)
				//IL_03ea: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fe: Unknown result type (might be due to invalid IL or missing references)
				//IL_033c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0346: Unknown result type (might be due to invalid IL or missing references)
				//IL_034b: Unknown result type (might be due to invalid IL or missing references)
				//IL_06d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_06d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_06bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_0173: Unknown result type (might be due to invalid IL or missing references)
				//IL_017d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0182: Unknown result type (might be due to invalid IL or missing references)
				//IL_0360: Unknown result type (might be due to invalid IL or missing references)
				//IL_0362: Unknown result type (might be due to invalid IL or missing references)
				//IL_071e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0723: Unknown result type (might be due to invalid IL or missing references)
				//IL_0707: Unknown result type (might be due to invalid IL or missing references)
				//IL_0197: Unknown result type (might be due to invalid IL or missing references)
				//IL_0199: Unknown result type (might be due to invalid IL or missing references)
				//IL_0741: Unknown result type (might be due to invalid IL or missing references)
				//IL_0730: Unknown result type (might be due to invalid IL or missing references)
				//IL_0736: Unknown result type (might be due to invalid IL or missing references)
				//IL_0746: Unknown result type (might be due to invalid IL or missing references)
				//IL_0776: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTpms logicalDeviceTpms = <>4__this;
				LearnSensorResponseCode result3;
				try
				{
					BitPositionValue val4;
					TaskAwaiter val3;
					TaskAwaiter<byte[]> val2;
					TaskAwaiter<bool> val;
					byte[] result;
					byte[] result2;
					Nullable<LearnSensorOpCode> val5;
					switch (num)
					{
					default:
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("LearnSensorAsync opCode: {0} groupId: {1} tireIndex: {2}", (object)opCode, (object)groupId, (object)tireIndex), Array.Empty<object>());
						<pidBytes>5__2 = (byte[])(object)new Byte[6];
						<pidBytes>5__2[5] = (byte)opCode;
						if (tireIndex > 31)
						{
							throw new TpmsTireIndexOutOfRangeException(tireIndex, 31);
						}
						if (groupId > TpmsGroupId.GroupId3)
						{
							throw new TpmsInvalidGroupIdException(groupId);
						}
						switch (opCode)
						{
						case LearnSensorOpCode.LearnCancel:
							<pidBytes>5__2[4] = 0;
							break;
						case LearnSensorOpCode.LearnSensor:
						case LearnSensorOpCode.UnlearnSensor:
						{
							val4 = LearnSensorGroupIdBitPosition;
							uint num2 = ((BitPositionValue)(ref val4)).EncodeValue((uint)groupId, 0u);
							val4 = LearnSensorTireIndexBitPosition;
							uint num3 = ((BitPositionValue)(ref val4)).EncodeValue((uint)tireIndex, 0u);
							uint num4 = num2 | num3;
							<pidBytes>5__2[4] = (byte)num4;
							TaggedLog.Debug("LogicalDeviceTpms", String.Format("LearnSensorAsync groupIdByte: {0} tireIndexByte: {1} learnSensorPayload: {2}", (object)num2, (object)num3, (object)num4), Array.Empty<object>());
							break;
						}
						case LearnSensorOpCode.UnconfigureVehicleConfigGroup:
							<pidBytes>5__2[4] = (byte)groupId;
							break;
						case LearnSensorOpCode.FactoryReset:
							<pidBytes>5__2[4] = 0;
							break;
						}
						val2 = ((ILogicalDevicePid<byte[]>)(object)logicalDeviceTpms.LearnSensorAckPid).ReadAsync(cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<byte[]>, <LearnSensorAsync>d__131>(ref val2, ref this);
							return;
						}
						goto IL_01ce;
					case 0:
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<byte[]>);
						num = (<>1__state = -1);
						goto IL_01ce;
					case 1:
						val3 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_02a1;
					case 2:
						val3 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_0397;
					case 3:
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<byte[]>);
						num = (<>1__state = -1);
						goto IL_041f;
					case 4:
						{
							val = <>u__3;
							<>u__3 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_05f6;
						}
						IL_0397:
						((TaskAwaiter)(ref val3)).GetResult();
						((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
						goto IL_03a9;
						IL_02a1:
						((TaskAwaiter)(ref val3)).GetResult();
						TaggedLog.Debug("LogicalDeviceTpms", "LearnSensorAsync finished writing pid.", Array.Empty<object>());
						<learnSensorPidUpdateSequenceCount>5__4 = 0u;
						<opCodeResponse>5__5 = default(Nullable<LearnSensorOpCode>);
						<groupIdResponse>5__6 = default(Nullable<TpmsGroupId>);
						<tireIndexResponse>5__7 = default(Nullable<byte>);
						<learnSensorResponse>5__8 = LearnSensorResponseCode.UnknownInvalidSensor;
						<attempts>5__9 = 0;
						goto IL_0610;
						IL_0610:
						if (<attempts>5__9 >= 180)
						{
							break;
						}
						if (((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
						{
							TaggedLog.Debug("LogicalDeviceTpms", "Cancellation requested, writing LearnCancel and throwing.", Array.Empty<object>());
							<pidBytes>5__2[5] = 0;
							<pidBytes>5__2[4] = 0;
							val3 = ((ILogicalDevicePid<byte[]>)(object)logicalDeviceTpms.LearnSensorCommandPid).WriteAsync(<pidBytes>5__2, CancellationToken.None).GetAwaiter();
							if (!((TaskAwaiter)(ref val3)).IsCompleted)
							{
								num = (<>1__state = 2);
								<>u__2 = val3;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <LearnSensorAsync>d__131>(ref val3, ref this);
								return;
							}
							goto IL_0397;
						}
						goto IL_03a9;
						IL_03a9:
						TaggedLog.Debug("LogicalDeviceTpms", "LearnSensorAsync reading pid.", Array.Empty<object>());
						val2 = ((ILogicalDevicePid<byte[]>)(object)logicalDeviceTpms.LearnSensorAckPid).ReadAsync(cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 3);
							<>u__1 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<byte[]>, <LearnSensorAsync>d__131>(ref val2, ref this);
							return;
						}
						goto IL_041f;
						IL_05f6:
						val.GetResult();
						<attempts>5__9++;
						goto IL_0610;
						IL_041f:
						result = val2.GetResult();
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("LearnSensorAsync response length: {0} raw data: {1}", (object)result.Length, (object)ArrayExtension.DebugDump(result, " ", false)), Array.Empty<object>());
						try
						{
							val4 = LearnSensorPidUpdateSequenceCountBitPosition;
							<learnSensorPidUpdateSequenceCount>5__4 = ((BitPositionValue)(ref val4)).DecodeValueFromBuffer(result);
							<learnSensorResponse>5__8 = (LearnSensorResponseCode)result[1];
							val4 = LearnSensorGroupIdBitPosition;
							<groupIdResponse>5__6 = new Nullable<TpmsGroupId>((TpmsGroupId)((BitPositionValue)(ref val4)).DecodeValueFromBuffer(result, 2, 1));
							val4 = LearnSensorTireIndexBitPosition;
							<tireIndexResponse>5__7 = new Nullable<byte>((byte)((BitPositionValue)(ref val4)).DecodeValueFromBuffer(result, 2, 1));
							<opCodeResponse>5__5 = new Nullable<LearnSensorOpCode>((LearnSensorOpCode)result[3]);
						}
						catch (Exception ex)
						{
							Exception ex2 = ex;
							TaggedLog.Debug("LogicalDeviceTpms", String.Format("LearnSensorAsync problem decoding data from pid: {0}", (object)ex2), Array.Empty<object>());
						}
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("LearnSensorAsync learnSensorResponse: {0} opCodeResponse: {1} oldSequenceCount: {2} sequenceCount: {3}.", (object[])(object)new Object[4]
						{
							(object)<learnSensorResponse>5__8,
							(object)<opCodeResponse>5__5,
							(object)<oldSequenceCount>5__3,
							(object)<learnSensorPidUpdateSequenceCount>5__4
						}), Array.Empty<object>());
						if (<learnSensorResponse>5__8 != LearnSensorResponseCode.Processing && <learnSensorResponse>5__8 != LearnSensorResponseCode.DefaultState)
						{
							LearnSensorOpCode num5 = opCode;
							val5 = <opCodeResponse>5__5;
							if (((num5 == val5.GetValueOrDefault()) & val5.HasValue) && <learnSensorPidUpdateSequenceCount>5__4 != <oldSequenceCount>5__3)
							{
								break;
							}
						}
						TaggedLog.Debug("LogicalDeviceTpms", "LearnSensorAsync delaying before reading pid.", Array.Empty<object>());
						val = TaskExtension.TryDelay(500, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 4);
							<>u__3 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <LearnSensorAsync>d__131>(ref val, ref this);
							return;
						}
						goto IL_05f6;
						IL_01ce:
						result2 = val2.GetResult();
						val4 = LearnSensorPidUpdateSequenceCountBitPosition;
						<oldSequenceCount>5__3 = ((BitPositionValue)(ref val4)).DecodeValueFromBuffer(result2);
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("LearnSensorAsync oldSequenceCount: {0}.", (object)<oldSequenceCount>5__3), Array.Empty<object>());
						TaggedLog.Debug("LogicalDeviceTpms", String.Concat("LearnSensorAsync writing raw data: ", ArrayExtension.DebugDump(<pidBytes>5__2, " ", false)), Array.Empty<object>());
						val3 = ((ILogicalDevicePid<byte[]>)(object)logicalDeviceTpms.LearnSensorCommandPid).WriteAsync(<pidBytes>5__2, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val3)).IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val3;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <LearnSensorAsync>d__131>(ref val3, ref this);
							return;
						}
						goto IL_02a1;
					}
					TaggedLog.Debug("LogicalDeviceTpms", String.Format("LearnSensorAsync response data - sequenceCount: {0} learnSensorResponse: {1} opCode: {2} groupId: {3} tireIndex: {4}", (object[])(object)new Object[5]
					{
						(object)<learnSensorPidUpdateSequenceCount>5__4,
						(object)<learnSensorResponse>5__8,
						(object)<opCodeResponse>5__5,
						(object)<groupIdResponse>5__6,
						(object)<tireIndexResponse>5__7
					}), Array.Empty<object>());
					val5 = <opCodeResponse>5__5;
					LearnSensorOpCode learnSensorOpCode = opCode;
					if (!((val5.GetValueOrDefault() == learnSensorOpCode) & val5.HasValue))
					{
						throw new TpmsInvalidResponseDataException(String.Format("Sent opCode: {0} received: {1}", (object)opCode, (object)<opCodeResponse>5__5));
					}
					Nullable<TpmsGroupId> val6 = <groupIdResponse>5__6;
					TpmsGroupId tpmsGroupId = groupId;
					if (!((val6.GetValueOrDefault() == tpmsGroupId) & val6.HasValue))
					{
						throw new TpmsInvalidResponseDataException(String.Format("Sent groupId: {0} received: {1}", (object)groupId, (object)<groupIdResponse>5__6));
					}
					Nullable<byte> val7 = <tireIndexResponse>5__7;
					Nullable<int> val8 = (val7.HasValue ? new Nullable<int>((int)val7.GetValueOrDefault()) : default(Nullable<int>));
					int num6 = tireIndex;
					if (!((val8.GetValueOrDefault() == num6) & val8.HasValue))
					{
						throw new TpmsInvalidResponseDataException(String.Format("Sent tireIndex: {0} received: {1}", (object)tireIndex, (object)<tireIndexResponse>5__7));
					}
					TaggedLog.Debug("LogicalDeviceTpms", String.Format("LearnSensorAsync learnSensorResponse: {0}", (object)<learnSensorResponse>5__8), Array.Empty<object>());
					result3 = <learnSensorResponse>5__8;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<pidBytes>5__2 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<pidBytes>5__2 = null;
				<>t__builder.SetResult(result3);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ReadVehicleConfigurationAsync>d__134 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<TpmsVehicleConfiguration> <>t__builder;

			public TpmsGroupId groupId;

			public LogicalDeviceTpms <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<byte[]> <>u__1;

			private void MoveNext()
			{
				//IL_01a4: Expected O, but got Unknown
				//IL_00a7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ac: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b4: Unknown result type (might be due to invalid IL or missing references)
				//IL_0103: Unknown result type (might be due to invalid IL or missing references)
				//IL_0108: Unknown result type (might be due to invalid IL or missing references)
				//IL_0117: Unknown result type (might be due to invalid IL or missing references)
				//IL_011c: Unknown result type (might be due to invalid IL or missing references)
				//IL_012b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0130: Unknown result type (might be due to invalid IL or missing references)
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				//IL_0072: Unknown result type (might be due to invalid IL or missing references)
				//IL_0077: Unknown result type (might be due to invalid IL or missing references)
				//IL_008c: Unknown result type (might be due to invalid IL or missing references)
				//IL_008e: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTpms logicalDeviceTpms = <>4__this;
				TpmsVehicleConfiguration result2;
				try
				{
					TaskAwaiter<byte[]> val;
					if (num != 0)
					{
						val = ((ILogicalDevicePid<byte[]>)(groupId switch
						{
							TpmsGroupId.GroupId0 => logicalDeviceTpms.VehicleConfigurationGroup0Pid, 
							TpmsGroupId.GroupId1 => logicalDeviceTpms.VehicleConfigurationGroup1Pid, 
							TpmsGroupId.GroupId2 => logicalDeviceTpms.VehicleConfigurationGroup2Pid, 
							TpmsGroupId.GroupId3 => logicalDeviceTpms.VehicleConfigurationGroup3Pid, 
							_ => throw new TpmsInvalidGroupIdException(groupId), 
						})).ReadAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<byte[]>, <ReadVehicleConfigurationAsync>d__134>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<byte[]>);
						num = (<>1__state = -1);
					}
					byte[] result = val.GetResult();
					TaggedLog.Debug("LogicalDeviceTpms", String.Format("ReadVehicleConfigurationAsync for groupId: {0}, response raw data: {1}", (object)groupId, (object)ArrayExtension.DebugDump(result, " ", false)), Array.Empty<object>());
					TpmsVehicleTemplate tpmsVehicleTemplate = (TpmsVehicleTemplate)result[0];
					BitPositionValue val2 = TiresPerAxleBitPosition;
					uint num2 = ((BitPositionValue)(ref val2)).DecodeValueFromBuffer(result, 1, 1);
					val2 = HasSpareBitPosition;
					uint num3 = ((BitPositionValue)(ref val2)).DecodeValueFromBuffer(result, 2, 1);
					val2 = NumberOfAxlesBitPosition;
					uint num4 = ((BitPositionValue)(ref val2)).DecodeValueFromBuffer(result, 2, 1);
					TaggedLog.Debug("LogicalDeviceTpms", String.Format("ReadVehicleConfigurationAsync responses - vehicleTemplate: {0} numberOfTiresPerAxle: {1} hasSpare: {2} numberOfAxles: {3}", (object[])(object)new Object[4]
					{
						(object)tpmsVehicleTemplate,
						(object)num2,
						(object)num3,
						(object)num4
					}), Array.Empty<object>());
					result2 = new TpmsVehicleConfiguration(groupId, tpmsVehicleTemplate, num2, Convert.ToBoolean(num3), (byte)num4);
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <RemoveVehicleConfigurationAsync>d__132 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<LearnSensorResponseCode> <>t__builder;

			public LearnSensorOpCode opCode;

			public TpmsGroupId groupId;

			public LogicalDeviceTpms <>4__this;

			public CancellationToken cancellationToken;

			private byte[] <pidBytes>5__2;

			private uint <oldSequenceCount>5__3;

			private uint <learnSensorPidUpdateSequenceCount>5__4;

			private Nullable<LearnSensorOpCode> <opCodeResponse>5__5;

			private Nullable<TpmsGroupId> <groupIdResponse>5__6;

			private LearnSensorResponseCode <learnSensorResponse>5__7;

			private TaskAwaiter<byte[]> <>u__1;

			private TaskAwaiter <>u__2;

			private int <attempts>5__8;

			private TaskAwaiter<bool> <>u__3;

			private void MoveNext()
			{
				//IL_0305: Expected O, but got Unknown
				//IL_057e: Expected O, but got Unknown
				//IL_0343: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00de: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e6: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ac: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b1: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b9: Unknown result type (might be due to invalid IL or missing references)
				//IL_026f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0274: Unknown result type (might be due to invalid IL or missing references)
				//IL_027c: Unknown result type (might be due to invalid IL or missing references)
				//IL_041a: Unknown result type (might be due to invalid IL or missing references)
				//IL_041f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0427: Unknown result type (might be due to invalid IL or missing references)
				//IL_03db: Unknown result type (might be due to invalid IL or missing references)
				//IL_03e5: Unknown result type (might be due to invalid IL or missing references)
				//IL_03ea: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fe: Unknown result type (might be due to invalid IL or missing references)
				//IL_0103: Unknown result type (might be due to invalid IL or missing references)
				//IL_016d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0177: Unknown result type (might be due to invalid IL or missing references)
				//IL_017c: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f0: Unknown result type (might be due to invalid IL or missing references)
				//IL_01fc: Unknown result type (might be due to invalid IL or missing references)
				//IL_009a: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_03ff: Unknown result type (might be due to invalid IL or missing references)
				//IL_0401: Unknown result type (might be due to invalid IL or missing references)
				//IL_0396: Unknown result type (might be due to invalid IL or missing references)
				//IL_039b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0191: Unknown result type (might be due to invalid IL or missing references)
				//IL_0193: Unknown result type (might be due to invalid IL or missing references)
				//IL_02c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_02c9: Unknown result type (might be due to invalid IL or missing references)
				//IL_02e8: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ed: Unknown result type (might be due to invalid IL or missing references)
				//IL_02f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_02fc: Unknown result type (might be due to invalid IL or missing references)
				//IL_00be: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0230: Unknown result type (might be due to invalid IL or missing references)
				//IL_023a: Unknown result type (might be due to invalid IL or missing references)
				//IL_023f: Unknown result type (might be due to invalid IL or missing references)
				//IL_048f: Unknown result type (might be due to invalid IL or missing references)
				//IL_049d: Unknown result type (might be due to invalid IL or missing references)
				//IL_04b8: Unknown result type (might be due to invalid IL or missing references)
				//IL_04bd: Unknown result type (might be due to invalid IL or missing references)
				//IL_0254: Unknown result type (might be due to invalid IL or missing references)
				//IL_0256: Unknown result type (might be due to invalid IL or missing references)
				//IL_0504: Unknown result type (might be due to invalid IL or missing references)
				//IL_0509: Unknown result type (might be due to invalid IL or missing references)
				//IL_04ed: Unknown result type (might be due to invalid IL or missing references)
				//IL_0539: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTpms logicalDeviceTpms = <>4__this;
				LearnSensorResponseCode result3;
				try
				{
					TaskAwaiter val3;
					TaskAwaiter<byte[]> val2;
					TaskAwaiter<bool> val;
					byte[] result;
					BitPositionValue learnSensorPidUpdateSequenceCountBitPosition;
					byte[] result2;
					Nullable<LearnSensorOpCode> val4;
					switch (num)
					{
					default:
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("RemoveVehicleConfigurationAsync opCode: {0} groupId: {1}", (object)opCode, (object)groupId), Array.Empty<object>());
						<pidBytes>5__2 = (byte[])(object)new Byte[6];
						<pidBytes>5__2[5] = (byte)opCode;
						if (groupId > TpmsGroupId.GroupId3)
						{
							throw new TpmsInvalidGroupIdException(groupId);
						}
						<pidBytes>5__2[4] = (byte)groupId;
						val2 = ((ILogicalDevicePid<byte[]>)(object)logicalDeviceTpms.LearnSensorAckPid).ReadAsync(cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<byte[]>, <RemoveVehicleConfigurationAsync>d__132>(ref val2, ref this);
							return;
						}
						goto IL_00f5;
					case 0:
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<byte[]>);
						num = (<>1__state = -1);
						goto IL_00f5;
					case 1:
						val3 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_01c8;
					case 2:
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<byte[]>);
						num = (<>1__state = -1);
						goto IL_028b;
					case 3:
						{
							val = <>u__3;
							<>u__3 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_0436;
						}
						IL_01c8:
						((TaskAwaiter)(ref val3)).GetResult();
						TaggedLog.Debug("LogicalDeviceTpms", "RemoveVehicleConfigurationAsync finished writing pid.", Array.Empty<object>());
						<learnSensorPidUpdateSequenceCount>5__4 = 0u;
						<opCodeResponse>5__5 = default(Nullable<LearnSensorOpCode>);
						<groupIdResponse>5__6 = default(Nullable<TpmsGroupId>);
						<learnSensorResponse>5__7 = LearnSensorResponseCode.UnknownInvalidSensor;
						<attempts>5__8 = 0;
						goto IL_0450;
						IL_0450:
						if (<attempts>5__8 >= 180)
						{
							break;
						}
						TaggedLog.Debug("LogicalDeviceTpms", "RemoveVehicleConfigurationAsync reading pid.", Array.Empty<object>());
						val2 = ((ILogicalDevicePid<byte[]>)(object)logicalDeviceTpms.LearnSensorAckPid).ReadAsync(cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__1 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<byte[]>, <RemoveVehicleConfigurationAsync>d__132>(ref val2, ref this);
							return;
						}
						goto IL_028b;
						IL_028b:
						result = val2.GetResult();
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("RemoveVehicleConfigurationAsync response length: {0} raw data: {1}", (object)result.Length, (object)ArrayExtension.DebugDump(result, " ", false)), Array.Empty<object>());
						try
						{
							learnSensorPidUpdateSequenceCountBitPosition = LearnSensorPidUpdateSequenceCountBitPosition;
							<learnSensorPidUpdateSequenceCount>5__4 = ((BitPositionValue)(ref learnSensorPidUpdateSequenceCountBitPosition)).DecodeValueFromBuffer(result);
							<learnSensorResponse>5__7 = (LearnSensorResponseCode)result[1];
							<groupIdResponse>5__6 = new Nullable<TpmsGroupId>((TpmsGroupId)result[2]);
							<opCodeResponse>5__5 = new Nullable<LearnSensorOpCode>((LearnSensorOpCode)result[3]);
						}
						catch (Exception ex)
						{
							Exception ex2 = ex;
							TaggedLog.Debug("LogicalDeviceTpms", String.Format("RemoveVehicleConfigurationAsync problem decoding data from pid: {0}", (object)ex2), Array.Empty<object>());
						}
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("RemoveVehicleConfigurationAsync learnSensorResponse: {0} opCodeResponse: {1} oldSequenceCount: {2} sequenceCount: {3}.", (object[])(object)new Object[4]
						{
							(object)<learnSensorResponse>5__7,
							(object)<opCodeResponse>5__5,
							(object)<oldSequenceCount>5__3,
							(object)<learnSensorPidUpdateSequenceCount>5__4
						}), Array.Empty<object>());
						if (<learnSensorResponse>5__7 != LearnSensorResponseCode.Processing && <learnSensorResponse>5__7 != LearnSensorResponseCode.DefaultState)
						{
							LearnSensorOpCode num2 = opCode;
							val4 = <opCodeResponse>5__5;
							if (((num2 == val4.GetValueOrDefault()) & val4.HasValue) && <learnSensorPidUpdateSequenceCount>5__4 != <oldSequenceCount>5__3)
							{
								break;
							}
						}
						TaggedLog.Debug("LogicalDeviceTpms", "RemoveVehicleConfigurationAsync delaying before reading pid.", Array.Empty<object>());
						val = TaskExtension.TryDelay(500, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 3);
							<>u__3 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <RemoveVehicleConfigurationAsync>d__132>(ref val, ref this);
							return;
						}
						goto IL_0436;
						IL_00f5:
						result2 = val2.GetResult();
						learnSensorPidUpdateSequenceCountBitPosition = LearnSensorPidUpdateSequenceCountBitPosition;
						<oldSequenceCount>5__3 = ((BitPositionValue)(ref learnSensorPidUpdateSequenceCountBitPosition)).DecodeValueFromBuffer(result2);
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("RemoveVehicleConfigurationAsync oldSequenceCount: {0}.", (object)<oldSequenceCount>5__3), Array.Empty<object>());
						TaggedLog.Debug("LogicalDeviceTpms", String.Concat("RemoveVehicleConfigurationAsync writing raw data: ", ArrayExtension.DebugDump(<pidBytes>5__2, " ", false)), Array.Empty<object>());
						val3 = ((ILogicalDevicePid<byte[]>)(object)logicalDeviceTpms.LearnSensorCommandPid).WriteAsync(<pidBytes>5__2, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val3)).IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val3;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <RemoveVehicleConfigurationAsync>d__132>(ref val3, ref this);
							return;
						}
						goto IL_01c8;
						IL_0436:
						val.GetResult();
						<attempts>5__8++;
						goto IL_0450;
					}
					TaggedLog.Debug("LogicalDeviceTpms", String.Format("RemoveVehicleConfigurationAsync response data - sequenceCount: {0} learnSensorResponse: {1} opCode: {2} groupId: {3}", (object[])(object)new Object[4]
					{
						(object)<learnSensorPidUpdateSequenceCount>5__4,
						(object)<learnSensorResponse>5__7,
						(object)<opCodeResponse>5__5,
						(object)<groupIdResponse>5__6
					}), Array.Empty<object>());
					val4 = <opCodeResponse>5__5;
					LearnSensorOpCode learnSensorOpCode = opCode;
					if (!((val4.GetValueOrDefault() == learnSensorOpCode) & val4.HasValue))
					{
						throw new TpmsInvalidResponseDataException(String.Format("Sent opCode: {0} received: {1}", (object)opCode, (object)<opCodeResponse>5__5));
					}
					Nullable<TpmsGroupId> val5 = <groupIdResponse>5__6;
					TpmsGroupId tpmsGroupId = groupId;
					if (!((val5.GetValueOrDefault() == tpmsGroupId) & val5.HasValue))
					{
						throw new TpmsInvalidResponseDataException(String.Format("Sent groupId: {0} received: {1}", (object)groupId, (object)<groupIdResponse>5__6));
					}
					TaggedLog.Debug("LogicalDeviceTpms", String.Format("RemoveVehicleConfigurationAsync learnSensorResponse: {0}", (object)<learnSensorResponse>5__7), Array.Empty<object>());
					result3 = <learnSensorResponse>5__7;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<pidBytes>5__2 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<pidBytes>5__2 = null;
				<>t__builder.SetResult(result3);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <WriteSensorConfigurationAsync>d__130 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<WriteSensorConfigurationResponseCode> <>t__builder;

			public uint lowPressureLimit;

			public uint highPressureLimit;

			public int relativeTempLimit;

			public int highTempLimit;

			public byte tireIndex;

			public TpmsGroupId groupId;

			public LogicalDeviceTpms <>4__this;

			public CancellationToken cancellationToken;

			private byte <relativeTempLimitByte>5__2;

			private double <highTempLimitCelsius>5__3;

			private uint <highTempLimitValue>5__4;

			private uint <lowPressureLimitRaw>5__5;

			private uint <highPressureLimitRaw>5__6;

			private uint <oldSequenceCount>5__7;

			private uint <sensorConfigPidUpdateSequenceCount>5__8;

			private WriteSensorConfigurationResponseCode <writeConfigResponse>5__9;

			private Nullable<byte> <tireIndexResponse>5__10;

			private Nullable<TpmsGroupId> <groupIdResponse>5__11;

			private TaskAwaiter<UInt48> <>u__1;

			private TaskAwaiter <>u__2;

			private int <attempts>5__12;

			private TaskAwaiter<bool> <>u__3;

			private void MoveNext()
			{
				//IL_0839: Expected O, but got Unknown
				//IL_01bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_01cc: Unknown result type (might be due to invalid IL or missing references)
				//IL_03f9: Unknown result type (might be due to invalid IL or missing references)
				//IL_03fe: Unknown result type (might be due to invalid IL or missing references)
				//IL_0406: Unknown result type (might be due to invalid IL or missing references)
				//IL_04c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_04c6: Unknown result type (might be due to invalid IL or missing references)
				//IL_04ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_06b5: Unknown result type (might be due to invalid IL or missing references)
				//IL_06ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_06c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_01dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e2: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e9: Unknown result type (might be due to invalid IL or missing references)
				//IL_03b4: Unknown result type (might be due to invalid IL or missing references)
				//IL_03ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_03c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_03c9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0431: Unknown result type (might be due to invalid IL or missing references)
				//IL_043d: Unknown result type (might be due to invalid IL or missing references)
				//IL_04df: Unknown result type (might be due to invalid IL or missing references)
				//IL_04e4: Unknown result type (might be due to invalid IL or missing references)
				//IL_04ef: Unknown result type (might be due to invalid IL or missing references)
				//IL_04f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_0510: Unknown result type (might be due to invalid IL or missing references)
				//IL_0527: Unknown result type (might be due to invalid IL or missing references)
				//IL_053e: Unknown result type (might be due to invalid IL or missing references)
				//IL_054a: Unknown result type (might be due to invalid IL or missing references)
				//IL_054f: Unknown result type (might be due to invalid IL or missing references)
				//IL_055a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0566: Unknown result type (might be due to invalid IL or missing references)
				//IL_056b: Unknown result type (might be due to invalid IL or missing references)
				//IL_05bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_03de: Unknown result type (might be due to invalid IL or missing references)
				//IL_03e0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0676: Unknown result type (might be due to invalid IL or missing references)
				//IL_0680: Unknown result type (might be due to invalid IL or missing references)
				//IL_0685: Unknown result type (might be due to invalid IL or missing references)
				//IL_0726: Unknown result type (might be due to invalid IL or missing references)
				//IL_0731: Unknown result type (might be due to invalid IL or missing references)
				//IL_0750: Unknown result type (might be due to invalid IL or missing references)
				//IL_0755: Unknown result type (might be due to invalid IL or missing references)
				//IL_069a: Unknown result type (might be due to invalid IL or missing references)
				//IL_069c: Unknown result type (might be due to invalid IL or missing references)
				//IL_05ed: Unknown result type (might be due to invalid IL or missing references)
				//IL_05f2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0482: Unknown result type (might be due to invalid IL or missing references)
				//IL_048c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0491: Unknown result type (might be due to invalid IL or missing references)
				//IL_0773: Unknown result type (might be due to invalid IL or missing references)
				//IL_0762: Unknown result type (might be due to invalid IL or missing references)
				//IL_0768: Unknown result type (might be due to invalid IL or missing references)
				//IL_0610: Unknown result type (might be due to invalid IL or missing references)
				//IL_05ff: Unknown result type (might be due to invalid IL or missing references)
				//IL_0605: Unknown result type (might be due to invalid IL or missing references)
				//IL_04a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_04a8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0778: Unknown result type (might be due to invalid IL or missing references)
				//IL_0615: Unknown result type (might be due to invalid IL or missing references)
				//IL_07bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_07c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_07a8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0635: Unknown result type (might be due to invalid IL or missing references)
				//IL_063a: Unknown result type (might be due to invalid IL or missing references)
				//IL_07f4: Unknown result type (might be due to invalid IL or missing references)
				//IL_0180: Unknown result type (might be due to invalid IL or missing references)
				//IL_018a: Unknown result type (might be due to invalid IL or missing references)
				//IL_018f: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a6: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTpms logicalDeviceTpms = <>4__this;
				WriteSensorConfigurationResponseCode result2;
				try
				{
					TaskAwaiter val3;
					TaskAwaiter<UInt48> val2;
					TaskAwaiter<bool> val;
					ulong num2;
					UInt48 result;
					Nullable<byte> val4;
					Nullable<int> val5;
					int num3;
					Nullable<TpmsGroupId> val6;
					TpmsGroupId tpmsGroupId;
					switch (num)
					{
					default:
						if (lowPressureLimit > 1023)
						{
							throw new TpmsPressureLimitOutOfRangeException(lowPressureLimit, 1023u);
						}
						if (highPressureLimit > 1023)
						{
							throw new TpmsPressureLimitOutOfRangeException(lowPressureLimit, 1023u);
						}
						if ((relativeTempLimit < 0 || relativeTempLimit > 126) ? true : false)
						{
							throw new TpmsTempLimitOutOfRangeException(relativeTempLimit, 32, 492);
						}
						<relativeTempLimitByte>5__2 = Convert.ToByte(relativeTempLimit / 2);
						if ((highTempLimit < 32 || highTempLimit > 492) ? true : false)
						{
							throw new TpmsTempLimitOutOfRangeException(highTempLimit, 32, 492);
						}
						<highTempLimitCelsius>5__3 = Temperature.ConvertFahrenheitToCelsius((double)highTempLimit);
						<highTempLimitValue>5__4 = Convert.ToUInt32(<highTempLimitCelsius>5__3 * 4.0);
						if (tireIndex > 31)
						{
							throw new TpmsTireIndexOutOfRangeException(tireIndex, 31);
						}
						if (groupId > TpmsGroupId.GroupId3)
						{
							throw new TpmsInvalidGroupIdException(groupId);
						}
						<lowPressureLimitRaw>5__5 = Convert.ToUInt32((float)lowPressureLimit / 14.50377f * 128f);
						<highPressureLimitRaw>5__6 = Convert.ToUInt32((float)highPressureLimit / 14.50377f * 128f);
						val2 = ((ILogicalDevicePid<UInt48>)(object)logicalDeviceTpms.SensorConfigurationCommandAckUInt48).ReadAsync(cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<UInt48>, <WriteSensorConfigurationAsync>d__130>(ref val2, ref this);
							return;
						}
						goto IL_01db;
					case 0:
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<UInt48>);
						num = (<>1__state = -1);
						goto IL_01db;
					case 1:
						val3 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_0415;
					case 2:
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<UInt48>);
						num = (<>1__state = -1);
						goto IL_04dd;
					case 3:
						{
							val = <>u__3;
							<>u__3 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_06d1;
						}
						IL_01db:
						result = val2.GetResult();
						<oldSequenceCount>5__7 = (uint)((BitPositionValue64)(ref SensorConfigPidUpdateSequenceCountBitPosition64)).DecodeValue(UInt48.op_Implicit(result));
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("WriteSensorConfigurationAsync oldSequenceCount: {0}", (object)<oldSequenceCount>5__7), Array.Empty<object>());
						TaggedLog.Debug("LogicalDeviceTpms", String.Concat((string[])(object)new String[5]
						{
							String.Format("WriteSensorConfigurationAsync: lowPressureLimit: {0} ", (object)lowPressureLimit),
							String.Format("lowPressureLimitRaw: {0} ", (object)<lowPressureLimitRaw>5__5),
							String.Format("highPressureLimit: {0} ", (object)highPressureLimit),
							String.Format("relativeTempLimit: {0} highTempLimit: {1} highTempLimitCelsius: {2} highTempLimitConverted: {3} tireIndex: {4} ", (object[])(object)new Object[5]
							{
								(object)<relativeTempLimitByte>5__2,
								(object)highTempLimit,
								(object)<highTempLimitCelsius>5__3,
								(object)<highTempLimitValue>5__4,
								(object)tireIndex
							}),
							String.Format("groupId: {0}", (object)groupId)
						}), Array.Empty<object>());
						num2 = 0uL;
						num2 |= ((BitPositionValue64)(ref LowPressureLimitBitPosition64)).EncodeValue((ulong)<lowPressureLimitRaw>5__5, num2);
						num2 |= ((BitPositionValue64)(ref HighPressureLimitBitPosition64)).EncodeValue((ulong)<highPressureLimitRaw>5__6, num2);
						num2 |= ((BitPositionValue64)(ref RelativeTempLimitBitPosition64)).EncodeValue((ulong)<relativeTempLimitByte>5__2, num2);
						num2 |= ((BitPositionValue64)(ref HighTempLimitBitPosition64)).EncodeValue((ulong)<highTempLimitValue>5__4, num2);
						num2 |= ((BitPositionValue64)(ref TireIndexBitPosition64)).EncodeValue((ulong)tireIndex, num2);
						num2 |= ((BitPositionValue64)(ref GroupIdBitPosition64)).EncodeValue((ulong)(uint)groupId, num2);
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("WriteSensorConfigurationAsync writing raw data: {0} hex: {1:X}", (object)num2, (object)num2), Array.Empty<object>());
						val3 = ((ILogicalDevicePid<UInt48>)(object)logicalDeviceTpms.SensorConfigurationCommandUInt48).WriteAsync((UInt48)num2, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val3)).IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val3;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <WriteSensorConfigurationAsync>d__130>(ref val3, ref this);
							return;
						}
						goto IL_0415;
						IL_04dd:
						result = val2.GetResult();
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("WriteSensorConfigurationAsync raw response UInt48: {0} hex: {1:X}", (object)result, (object)result), Array.Empty<object>());
						<sensorConfigPidUpdateSequenceCount>5__8 = (uint)((BitPositionValue64)(ref SensorConfigPidUpdateSequenceCountBitPosition64)).DecodeValue(UInt48.op_Implicit(result));
						<writeConfigResponse>5__9 = (WriteSensorConfigurationResponseCode)((BitPositionValue64)(ref WriteSensorConfigResponseBitPosition64)).DecodeValue(UInt48.op_Implicit(result));
						<tireIndexResponse>5__10 = new Nullable<byte>((byte)((BitPositionValue64)(ref TireIndexBitPosition64)).DecodeValue(UInt48.op_Implicit(result)));
						<groupIdResponse>5__11 = new Nullable<TpmsGroupId>((TpmsGroupId)((BitPositionValue64)(ref GroupIdBitPosition64)).DecodeValue(UInt48.op_Implicit(result)));
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("writeConfigResponse: {0} oldSequenceCount: {1} newSequenceCount: {2} groupId: {3} tireIndex: {4}", (object[])(object)new Object[5]
						{
							(object)<writeConfigResponse>5__9,
							(object)<oldSequenceCount>5__7,
							(object)<sensorConfigPidUpdateSequenceCount>5__8,
							(object)groupId,
							(object)<tireIndexResponse>5__10
						}), Array.Empty<object>());
						if (<writeConfigResponse>5__9 != WriteSensorConfigurationResponseCode.Processing && <sensorConfigPidUpdateSequenceCount>5__8 != <oldSequenceCount>5__7)
						{
							val4 = <tireIndexResponse>5__10;
							val5 = (val4.HasValue ? new Nullable<int>((int)val4.GetValueOrDefault()) : default(Nullable<int>));
							num3 = tireIndex;
							if ((val5.GetValueOrDefault() == num3) & val5.HasValue)
							{
								val6 = <groupIdResponse>5__11;
								tpmsGroupId = groupId;
								if ((val6.GetValueOrDefault() == tpmsGroupId) & val6.HasValue)
								{
									break;
								}
							}
						}
						TaggedLog.Debug("LogicalDeviceTpms", "WriteSensorConfig delaying before reading pid.", Array.Empty<object>());
						val = TaskExtension.TryDelay(500, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 3);
							<>u__3 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <WriteSensorConfigurationAsync>d__130>(ref val, ref this);
							return;
						}
						goto IL_06d1;
						IL_06eb:
						if (<attempts>5__12 >= 180)
						{
							break;
						}
						if (((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
						{
							TaggedLog.Debug("LogicalDeviceTpms", "WriteSensorConfigurationAsync Cancellation requested, throwing.", Array.Empty<object>());
							((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
						}
						val2 = ((ILogicalDevicePid<UInt48>)(object)logicalDeviceTpms.SensorConfigurationCommandAckUInt48).ReadAsync(cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__1 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<UInt48>, <WriteSensorConfigurationAsync>d__130>(ref val2, ref this);
							return;
						}
						goto IL_04dd;
						IL_06d1:
						val.GetResult();
						<attempts>5__12++;
						goto IL_06eb;
						IL_0415:
						((TaskAwaiter)(ref val3)).GetResult();
						<sensorConfigPidUpdateSequenceCount>5__8 = 0u;
						<writeConfigResponse>5__9 = WriteSensorConfigurationResponseCode.UnknownError;
						<tireIndexResponse>5__10 = default(Nullable<byte>);
						<groupIdResponse>5__11 = default(Nullable<TpmsGroupId>);
						<attempts>5__12 = 0;
						goto IL_06eb;
					}
					TaggedLog.Debug("LogicalDeviceTpms", String.Concat(String.Format("WriteSensorConfigurationAsync response data - sequenceCount: {0} writeConfigResponse: {1}", (object)<sensorConfigPidUpdateSequenceCount>5__8, (object)<writeConfigResponse>5__9), String.Format(" tireIndex: {0} groupId: {1} ", (object)<tireIndexResponse>5__10, (object)<groupIdResponse>5__11)), Array.Empty<object>());
					val4 = <tireIndexResponse>5__10;
					val5 = (val4.HasValue ? new Nullable<int>((int)val4.GetValueOrDefault()) : default(Nullable<int>));
					num3 = tireIndex;
					if (!((val5.GetValueOrDefault() == num3) & val5.HasValue))
					{
						throw new TpmsInvalidResponseDataException(String.Format("Sent tireIndex: {0} received: {1}", (object)tireIndex, (object)<tireIndexResponse>5__10));
					}
					val6 = <groupIdResponse>5__11;
					tpmsGroupId = groupId;
					if (!((val6.GetValueOrDefault() == tpmsGroupId) & val6.HasValue))
					{
						throw new TpmsInvalidResponseDataException(String.Format("Sent groupId: {0} received: {1}", (object)groupId, (object)<groupIdResponse>5__11));
					}
					TaggedLog.Debug("LogicalDeviceTpms", String.Format("WriteSensorConfigurationAsync writeConfigResponse: {0}", (object)<writeConfigResponse>5__9), Array.Empty<object>());
					result2 = <writeConfigResponse>5__9;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <WriteVehicleConfigurationAsync>d__135 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public TpmsVehicleConfiguration vehicleConfig;

			public LogicalDeviceTpms <>4__this;

			public CancellationToken cancellationToken;

			private ILogicalDevicePidArrayBytes <groupPid>5__2;

			private uint <oldSequenceCount>5__3;

			private uint <vehicleConfigPidUpdateSequenceCount>5__4;

			private WriteVehicleConfigResponseCode <learnSensorResponse>5__5;

			private TpmsVehicleTemplate <vehicleTemplateResponse>5__6;

			private uint <tiresPerAxleResponse>5__7;

			private Nullable<bool> <hasSpareResponse>5__8;

			private uint <numberOfAxlesResponse>5__9;

			private TaskAwaiter<byte[]> <>u__1;

			private TaskAwaiter <>u__2;

			private int <attempts>5__10;

			private TaskAwaiter<bool> <>u__3;

			private void MoveNext()
			{
				//IL_076d: Expected O, but got Unknown
				//IL_017a: Unknown result type (might be due to invalid IL or missing references)
				//IL_017f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0187: Unknown result type (might be due to invalid IL or missing references)
				//IL_0317: Unknown result type (might be due to invalid IL or missing references)
				//IL_031c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0324: Unknown result type (might be due to invalid IL or missing references)
				//IL_03bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_03c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_03cc: Unknown result type (might be due to invalid IL or missing references)
				//IL_0579: Unknown result type (might be due to invalid IL or missing references)
				//IL_057e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0586: Unknown result type (might be due to invalid IL or missing references)
				//IL_019f: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_0258: Unknown result type (might be due to invalid IL or missing references)
				//IL_025d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0272: Unknown result type (might be due to invalid IL or missing references)
				//IL_0277: Unknown result type (might be due to invalid IL or missing references)
				//IL_0291: Unknown result type (might be due to invalid IL or missing references)
				//IL_0296: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d8: Unknown result type (might be due to invalid IL or missing references)
				//IL_02e2: Unknown result type (might be due to invalid IL or missing references)
				//IL_02e7: Unknown result type (might be due to invalid IL or missing references)
				//IL_0360: Unknown result type (might be due to invalid IL or missing references)
				//IL_0415: Unknown result type (might be due to invalid IL or missing references)
				//IL_041a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0435: Unknown result type (might be due to invalid IL or missing references)
				//IL_043a: Unknown result type (might be due to invalid IL or missing references)
				//IL_044d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0452: Unknown result type (might be due to invalid IL or missing references)
				//IL_0464: Unknown result type (might be due to invalid IL or missing references)
				//IL_0469: Unknown result type (might be due to invalid IL or missing references)
				//IL_046f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0474: Unknown result type (might be due to invalid IL or missing references)
				//IL_04d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_02fc: Unknown result type (might be due to invalid IL or missing references)
				//IL_02fe: Unknown result type (might be due to invalid IL or missing references)
				//IL_053a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0544: Unknown result type (might be due to invalid IL or missing references)
				//IL_0549: Unknown result type (might be due to invalid IL or missing references)
				//IL_0380: Unknown result type (might be due to invalid IL or missing references)
				//IL_038a: Unknown result type (might be due to invalid IL or missing references)
				//IL_038f: Unknown result type (might be due to invalid IL or missing references)
				//IL_060a: Unknown result type (might be due to invalid IL or missing references)
				//IL_055e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0560: Unknown result type (might be due to invalid IL or missing references)
				//IL_03a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_03a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_06d5: Unknown result type (might be due to invalid IL or missing references)
				//IL_06da: Unknown result type (might be due to invalid IL or missing references)
				//IL_013b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0145: Unknown result type (might be due to invalid IL or missing references)
				//IL_014a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0714: Unknown result type (might be due to invalid IL or missing references)
				//IL_015f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0161: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTpms logicalDeviceTpms = <>4__this;
				try
				{
					TaskAwaiter val3;
					TaskAwaiter<byte[]> val2;
					TaskAwaiter<bool> val;
					byte[] result;
					BitPositionValue val4;
					byte[] array;
					byte[] result2;
					switch (num)
					{
					default:
						if (vehicleConfig.VehicleTemplate == TpmsVehicleTemplate.InvalidUnknown)
						{
							throw new TpmsInvalidVehicleTemplateException(vehicleConfig.VehicleTemplate);
						}
						if (vehicleConfig.TiresPerAxle > 1023)
						{
							throw new TpmsInvalidTiresPerAxleException(vehicleConfig.TiresPerAxle, 1023u);
						}
						if (vehicleConfig.NumberOfAxles > 9)
						{
							throw new TpmsInvalidNumberOfAxlesException(vehicleConfig.NumberOfAxles, 9);
						}
						if (vehicleConfig.GroupId > TpmsGroupId.GroupId3)
						{
							throw new TpmsInvalidGroupIdException(vehicleConfig.GroupId);
						}
						switch (vehicleConfig.GroupId)
						{
						case TpmsGroupId.GroupId0:
							<groupPid>5__2 = logicalDeviceTpms.VehicleConfigurationGroup0Pid;
							break;
						case TpmsGroupId.GroupId1:
							<groupPid>5__2 = logicalDeviceTpms.VehicleConfigurationGroup1Pid;
							break;
						case TpmsGroupId.GroupId2:
							<groupPid>5__2 = logicalDeviceTpms.VehicleConfigurationGroup2Pid;
							break;
						case TpmsGroupId.GroupId3:
							<groupPid>5__2 = logicalDeviceTpms.VehicleConfigurationGroup3Pid;
							break;
						default:
							throw new TpmsInvalidGroupIdException(vehicleConfig.GroupId);
						}
						val2 = ((ILogicalDevicePid<byte[]>)(object)logicalDeviceTpms.VehicleConfigurationAckPid).ReadAsync(cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<byte[]>, <WriteVehicleConfigurationAsync>d__135>(ref val2, ref this);
							return;
						}
						goto IL_0196;
					case 0:
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<byte[]>);
						num = (<>1__state = -1);
						goto IL_0196;
					case 1:
						val3 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_0333;
					case 2:
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<byte[]>);
						num = (<>1__state = -1);
						goto IL_03db;
					case 3:
						{
							val = <>u__3;
							<>u__3 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_0595;
						}
						IL_0196:
						result = val2.GetResult();
						val4 = VehicleConfigPidUpdateSequenceCountBitPosition;
						<oldSequenceCount>5__3 = ((BitPositionValue)(ref val4)).DecodeValueFromBuffer(result);
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("WriteVehicleConfigurationAsync oldSequenceCount: {0}", (object)<oldSequenceCount>5__3), Array.Empty<object>());
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("WriteVehicleConfigurationAsync vehicleTemplate: {0} numberOfTiresPerAxle: {1} hasSpare: {2} numberOfAxles: {3}", (object[])(object)new Object[4]
						{
							(object)vehicleConfig.VehicleTemplate,
							(object)vehicleConfig.TiresPerAxle,
							(object)vehicleConfig.HasSpare,
							(object)vehicleConfig.NumberOfAxles
						}), Array.Empty<object>());
						array = (byte[])(object)new Byte[6]
						{
							default(Byte),
							default(Byte),
							default(Byte),
							(byte)vehicleConfig.VehicleTemplate,
							default(Byte),
							default(Byte)
						};
						val4 = TiresPerAxleBitPosition;
						((BitPositionValue)(ref val4)).EncodeValueToBuffer(vehicleConfig.TiresPerAxle, array);
						val4 = HasSpareBitPosition;
						((BitPositionValue)(ref val4)).EncodeValueToBuffer(Convert.ToUInt32(vehicleConfig.HasSpare), array);
						val4 = NumberOfAxlesBitPosition;
						((BitPositionValue)(ref val4)).EncodeValueToBuffer((uint)vehicleConfig.NumberOfAxles, array);
						TaggedLog.Debug("LogicalDeviceTpms", String.Concat("WriteVehicleConfigurationAsync raw data: ", ArrayExtension.DebugDump(array, " ", false)), Array.Empty<object>());
						val3 = ((ILogicalDevicePid<byte[]>)(object)<groupPid>5__2).WriteAsync(array, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val3)).IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val3;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <WriteVehicleConfigurationAsync>d__135>(ref val3, ref this);
							return;
						}
						goto IL_0333;
						IL_0595:
						val.GetResult();
						<attempts>5__10++;
						goto IL_05af;
						IL_0333:
						((TaskAwaiter)(ref val3)).GetResult();
						<vehicleConfigPidUpdateSequenceCount>5__4 = 0u;
						<learnSensorResponse>5__5 = WriteVehicleConfigResponseCode.Processing;
						<vehicleTemplateResponse>5__6 = TpmsVehicleTemplate.InvalidUnknown;
						<tiresPerAxleResponse>5__7 = 0u;
						<hasSpareResponse>5__8 = default(Nullable<bool>);
						<numberOfAxlesResponse>5__9 = 0u;
						<attempts>5__10 = 0;
						goto IL_05af;
						IL_05af:
						if (<attempts>5__10 >= 180)
						{
							break;
						}
						val2 = ((ILogicalDevicePid<byte[]>)(object)logicalDeviceTpms.VehicleConfigurationAckPid).ReadAsync(cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__1 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<byte[]>, <WriteVehicleConfigurationAsync>d__135>(ref val2, ref this);
							return;
						}
						goto IL_03db;
						IL_03db:
						result2 = val2.GetResult();
						TaggedLog.Debug("LogicalDeviceTpms", String.Concat("WriteVehicleConfigurationAsync response raw data: ", ArrayExtension.DebugDump(result2, " ", false)), Array.Empty<object>());
						<learnSensorResponse>5__5 = (WriteVehicleConfigResponseCode)result2[4];
						val4 = VehicleConfigPidUpdateSequenceCountBitPosition;
						<vehicleConfigPidUpdateSequenceCount>5__4 = ((BitPositionValue)(ref val4)).DecodeValueFromBuffer(result2);
						<vehicleTemplateResponse>5__6 = (TpmsVehicleTemplate)result2[1];
						val4 = TiresPerAxleBitPosition;
						<tiresPerAxleResponse>5__7 = ((BitPositionValue)(ref val4)).DecodeValueFromBuffer(result2, 2, 1);
						val4 = HasSpareBitPosition;
						<hasSpareResponse>5__8 = new Nullable<bool>(Convert.ToBoolean(((BitPositionValue)(ref val4)).DecodeValueFromBuffer(result2, 3, 1)));
						val4 = NumberOfAxlesBitPosition;
						<numberOfAxlesResponse>5__9 = ((BitPositionValue)(ref val4)).DecodeValueFromBuffer(result2, 3, 1);
						TaggedLog.Debug("LogicalDeviceTpms", String.Format("WriteVehicleConfigurationAsync oldSequenceCount: {0} newSequenceCount: {1} vehicleTemplate: {2} tiresPerAxle: {3} hasSpare: {4} numberOfAxles: {5}.", (object[])(object)new Object[6]
						{
							(object)<oldSequenceCount>5__3,
							(object)<vehicleConfigPidUpdateSequenceCount>5__4,
							(object)<vehicleTemplateResponse>5__6,
							(object)<tiresPerAxleResponse>5__7,
							(object)<hasSpareResponse>5__8,
							(object)<numberOfAxlesResponse>5__9
						}), Array.Empty<object>());
						if (<learnSensorResponse>5__5 != WriteVehicleConfigResponseCode.Processing && <learnSensorResponse>5__5 != WriteVehicleConfigResponseCode.DefaultState && <oldSequenceCount>5__3 != <vehicleConfigPidUpdateSequenceCount>5__4)
						{
							break;
						}
						TaggedLog.Debug("LogicalDeviceTpms", "WriteVehicleConfigurationAsync delaying before reading response again.", Array.Empty<object>());
						val = TaskExtension.TryDelay(500, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 3);
							<>u__3 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <WriteVehicleConfigurationAsync>d__135>(ref val, ref this);
							return;
						}
						goto IL_0595;
					}
					TaggedLog.Debug("LogicalDeviceTpms", String.Format("WriteVehicleConfigurationAsync responses - sequenceCount: {0} learnSensorResponse: {1} vehicleTemplate: {2} numberOfTiresPerAxle: {3} hasSpare: {4} numberOfAxles: {5}", (object[])(object)new Object[6]
					{
						(object)<vehicleConfigPidUpdateSequenceCount>5__4,
						(object)<learnSensorResponse>5__5,
						(object)<vehicleTemplateResponse>5__6,
						(object)<tiresPerAxleResponse>5__7,
						(object)<hasSpareResponse>5__8,
						(object)<numberOfAxlesResponse>5__9
					}), Array.Empty<object>());
					if (<learnSensorResponse>5__5 != WriteVehicleConfigResponseCode.Success)
					{
						throw new TpmsInvalidResponseDataException(String.Format("Error writing vehicle config, error code: {0}", (object)<learnSensorResponse>5__5));
					}
					if (<vehicleTemplateResponse>5__6 != vehicleConfig.VehicleTemplate)
					{
						throw new TpmsInvalidResponseDataException(String.Format("Sent vehicleTemplate: {0} received: {1}", (object)vehicleConfig.VehicleTemplate, (object)<vehicleTemplateResponse>5__6));
					}
					if (<tiresPerAxleResponse>5__7 != vehicleConfig.TiresPerAxle)
					{
						throw new TpmsInvalidResponseDataException(String.Format("Sent tiresPerAxle: {0} received: {1}", (object)vehicleConfig.TiresPerAxle, (object)<tiresPerAxleResponse>5__7));
					}
					Nullable<bool> val5 = <hasSpareResponse>5__8;
					bool hasSpare = vehicleConfig.HasSpare;
					if (!((val5.GetValueOrDefault() == hasSpare) & val5.HasValue))
					{
						throw new TpmsInvalidResponseDataException(String.Format("Sent hasSpare: {0} received: {1}", (object)vehicleConfig.HasSpare, (object)<hasSpareResponse>5__8));
					}
					if (<numberOfAxlesResponse>5__9 != vehicleConfig.NumberOfAxles)
					{
						throw new TpmsInvalidResponseDataException(String.Format("Sent numberOfAxles: {0} received: {1}", (object)vehicleConfig.NumberOfAxles, (object)<numberOfAxlesResponse>5__9));
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<groupPid>5__2 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<groupPid>5__2 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private readonly CompositeDisposable _disposables = new CompositeDisposable();

		private const string LogTag = "LogicalDeviceTpms";

		private const byte AlertActiveFlag = 128;

		private const byte AlertCountBitmask = 127;

		public const string SensorGeneralFaultAlertKey = "SensorGeneralFault";

		public const string RepeaterGeneralFaultAlertKey = "RepeaterGeneralFault";

		private const int MaxAlertCount = 2;

		private const int PidBytesLength = 6;

		private const int OpCodeIndex = 5;

		private const int OpCodeResponseIndex = 3;

		private const int LearnSensorPayloadIndex = 4;

		private const int LearnSensorPayloadResponseIndex = 2;

		private const int LearnSensorPayloadLength = 1;

		private const int MaxTireIndex = 31;

		private const int MaxPidReadAttempts = 180;

		private const int LearnSensorResponseCodeIndex = 1;

		private const int LearnSensorReadDelayMs = 500;

		private const int VehicleTemplateIndex = 3;

		private const int TiresPerAxleIndex = 4;

		private const int HasSpareIndex = 5;

		private const int TiresPerAxleAckIndex = 2;

		private const int HasSpareAckIndex = 3;

		private const float TirePressureScale = 0.025f;

		private const float PsiConverter = 14.50377f;

		private const int TpmsTempMinimum = 32;

		private const int TpmsTempMaximum = 492;

		private const int TpmsRelativeTempMinimum = 0;

		private const int TpmsRelativeTempMaximum = 126;

		private const int TireTempOffset = 50;

		private const int MinimumRelativeTempLimit = 1;

		private const int RelativeTempDivisor = 2;

		private const int MaxBlockReadBytes = 160;

		private const int VehicleConfigLength = 4;

		private const int SensorConfigBytesLength = 10;

		private const int WriteVehicleConfigResponseIndex = 4;

		private const int VehicleGroup0SensorConfigBlockIndex = 0;

		private const int VehicleGroup1SensorConfigBlockIndex = 1;

		private const int VehicleGroup2SensorConfigBlockIndex = 2;

		private const int VehicleGroup3SensorConfigBlockIndex = 3;

		private const int VehicleConfigurationBlockIndex = 4;

		private const int VehicleGroup0SensorStatusBlockIndex = 5;

		private const int VehicleGroup1SensorStatusBlockIndex = 6;

		private const int VehicleGroup2SensorStatusBlockIndex = 7;

		private const int VehicleGroup3SensorStatusBlockIndex = 8;

		private const int AdditionalDataBlock9Index = 9;

		private const int BlockReadHighTempLimitIndex0 = 5;

		private const int BlockReadHighTempLimitIndex1 = 6;

		private const int BlockReadMaxSensorsSupportedIndex = 17;

		private const int BlockReadMaxVehicleConfigsIndex = 18;

		private const int BlockReadMaxSensorsPerVehicleIndex = 19;

		private const int BlockReadConfiguredSensorCountIndex = 24;

		private const int AdditionalDataBytesLength = 25;

		private const int ExtendedByteLength = 1;

		private const uint InvalidPressureValue = 1023u;

		private const uint MaximumTiresPerAxle = 1023u;

		private const byte MaximumNumberOfAxles = 9;

		private const int TiresPerAxleResponseIndex = 1;

		private const int HasSpareResponseIndex = 2;

		private const int NumberOfAxlesResponseIndex = 2;

		private const int BlockReadRelativeTempLimitIndex = 4;

		private const int BlockReadHighPsiLimitIndex0 = 1;

		private const int BlockReadHighPsiLimitIndex1 = 2;

		private const int BlockReadLowPsiLimitIndex0 = 2;

		private const int BlockReadLowPsiLimitIndex1 = 3;

		private const int BlockReadSensorMacIndex0 = 6;

		private const int BlockReadSensorMacIndex1 = 7;

		private const int BlockReadSensorMacIndex2 = 8;

		private const int BlockReadSensorMacIndex3 = 9;

		private const int BlockReadSensorModelIndex = 9;

		private const int BlockReadVehicleTemplateIndex = 3;

		private const int BlockReadTiresPerAxleIndex = 2;

		private const int BlockReadSpareAxlesIndex = 1;

		private const int VehicleTemplateResponseIndex = 0;

		private const int VehicleTemplateAckIndex = 1;

		private const int HighTempFixedPointMultiplier = 4;

		private const int PressureFixedPointMultiplier = 128;

		private static readonly BitPositionValue64 LowPressureLimitBitPosition64 = new BitPositionValue64(4095uL, 0, 1);

		private static readonly BitPositionValue64 HighPressureLimitBitPosition64 = new BitPositionValue64(16773120uL, 0, 1);

		private static readonly BitPositionValue64 RelativeTempLimitBitPosition64 = new BitPositionValue64(1056964608uL, 0, 1);

		private static readonly BitPositionValue64 HighTempLimitBitPosition64 = new BitPositionValue64(1098437885952uL, 0, 1);

		private static readonly BitPositionValue64 TireIndexBitPosition64 = new BitPositionValue64(34084860461056uL, 0, 1);

		private static readonly BitPositionValue64 GroupIdBitPosition64 = new BitPositionValue64(246290604621824uL, 0, 1);

		private static readonly BitPositionValue64 SensorConfigPidUpdateSequenceCountBitPosition64 = new BitPositionValue64(7uL, 0, 1);

		private static readonly BitPositionValue LearnSensorPidUpdateSequenceCountBitPosition = new BitPositionValue(7u, 0, 1);

		private static readonly BitPositionValue64 WriteSensorConfigResponseBitPosition64 = new BitPositionValue64(56uL, 0, 1);

		private static readonly BitPositionValue LearnSensorTireIndexBitPosition = new BitPositionValue(31u, 0, 1);

		private static readonly BitPositionValue LearnSensorGroupIdBitPosition = new BitPositionValue(224u, 0, 1);

		private static readonly BitPositionValue TiresPerAxleBitPosition = new BitPositionValue(31u, 4, 1);

		private static readonly BitPositionValue HasSpareBitPosition = new BitPositionValue(4u, 5, 1);

		private static readonly BitPositionValue NumberOfAxlesBitPosition = new BitPositionValue(120u, 5, 1);

		private static readonly BitPositionValue BlockReadHighPsiLimitBitPosition = new BitPositionValue(65520u, 0, 1);

		private static readonly BitPositionValue BlockReadLowPsiLimitBitPosition = new BitPositionValue(4095u, 0, 1);

		private static readonly BitPositionValue BlockReadHighTempLimitBitPosition = new BitPositionValue(65472u, 0, 1);

		private static readonly BitPositionValue SensorMacBitPosition = new BitPositionValue(268435440u, 0, 1);

		private static readonly BitPositionValue SensorModelBitPosition = new BitPositionValue(15u, 0, 1);

		private static readonly BitPositionValue VehicleConfigPidUpdateSequenceCountBitPosition = new BitPositionValue(7u, 0, 1);

		private string _softwarePartNumber = "";

		public ILogicalDevicePidArrayBytes SensorConfigurationCommandPid;

		public ILogicalDevicePidUInt48 SensorConfigurationCommandUInt48;

		public ILogicalDevicePidUInt48 SensorConfigurationCommandAckUInt48;

		public ILogicalDevicePidArrayBytes SensorConfigurationAckPid;

		public ILogicalDevicePidArrayBytes LearnSensorCommandPid;

		public ILogicalDevicePidArrayBytes LearnSensorAckPid;

		public ILogicalDevicePidArrayBytes VehicleConfigurationGroup0Pid;

		public ILogicalDevicePidArrayBytes VehicleConfigurationGroup1Pid;

		public ILogicalDevicePidArrayBytes VehicleConfigurationGroup2Pid;

		public ILogicalDevicePidArrayBytes VehicleConfigurationGroup3Pid;

		public ILogicalDevicePidText RepeaterAssemblyPartNumberPid;

		public ILogicalDevicePidArrayBytes VehicleConfigurationAckPid;

		public TpmsGroupId ActiveTrailer;

		private readonly ConcurrentDictionary<string, ILogicalDeviceAlert> _alertDict = new ConcurrentDictionary<string, ILogicalDeviceAlert>();

		private readonly ConcurrentDictionary<TpmsGroupId, TpmsSensorGroup> _sensorGroupDictionary = new ConcurrentDictionary<TpmsGroupId, TpmsSensorGroup>();

		[field: CompilerGenerated]
		public TpmsGroupIdHasActiveFault GroupIdsWithActiveFault
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			private set;
		}

		public bool IsAccessoryGatewaySupported => true;

		public bool AllowAutoOfflineLogicalDeviceRemoval => false;

		public IEnumerable<ILogicalDeviceAlert> Alerts => (IEnumerable<ILogicalDeviceAlert>)(object)_alertDict.Values;

		public LogicalDeviceTpms(ILogicalDeviceId logicalDeviceId, LogicalDeviceTpmsCapability capability, ILogicalDeviceService deviceService, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceTpmsStatus(), new LogicalDeviceTpmsStatusExtended(), capability, deviceService, isFunctionClassChangeable)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_004f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0059: Expected O, but got Unknown
			//IL_0067: Unknown result type (might be due to invalid IL or missing references)
			//IL_0071: Expected O, but got Unknown
			//IL_007f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0089: Expected O, but got Unknown
			//IL_0097: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a1: Expected O, but got Unknown
			//IL_00af: Unknown result type (might be due to invalid IL or missing references)
			//IL_00b9: Expected O, but got Unknown
			//IL_00c7: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d1: Expected O, but got Unknown
			//IL_00df: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e9: Expected O, but got Unknown
			//IL_00f7: Unknown result type (might be due to invalid IL or missing references)
			//IL_0101: Expected O, but got Unknown
			//IL_010f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0119: Expected O, but got Unknown
			//IL_0127: Unknown result type (might be due to invalid IL or missing references)
			//IL_0131: Expected O, but got Unknown
			//IL_0140: Unknown result type (might be due to invalid IL or missing references)
			//IL_014a: Expected O, but got Unknown
			//IL_0158: Unknown result type (might be due to invalid IL or missing references)
			//IL_0162: Expected O, but got Unknown
			//IL_016b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0171: Unknown result type (might be due to invalid IL or missing references)
			//IL_0180: Unknown result type (might be due to invalid IL or missing references)
			//IL_0186: Unknown result type (might be due to invalid IL or missing references)
			SensorConfigurationCommandPid = (ILogicalDevicePidArrayBytes)new LogicalDevicePidArrayBytes((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)345), (LogicalDeviceSessionType)2, 6);
			SensorConfigurationCommandUInt48 = (ILogicalDevicePidUInt48)new LogicalDevicePidUInt48((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)345), (LogicalDeviceSessionType)2, (Func<ulong, bool>)null);
			SensorConfigurationAckPid = (ILogicalDevicePidArrayBytes)new LogicalDevicePidArrayBytes((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)346), (LogicalDeviceSessionType)2, 6);
			SensorConfigurationCommandAckUInt48 = (ILogicalDevicePidUInt48)new LogicalDevicePidUInt48((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)346), (LogicalDeviceSessionType)2, (Func<ulong, bool>)null);
			LearnSensorCommandPid = (ILogicalDevicePidArrayBytes)new LogicalDevicePidArrayBytes((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)347), (LogicalDeviceSessionType)2, 6);
			LearnSensorAckPid = (ILogicalDevicePidArrayBytes)new LogicalDevicePidArrayBytes((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)348), (LogicalDeviceSessionType)2, 6);
			VehicleConfigurationGroup0Pid = (ILogicalDevicePidArrayBytes)new LogicalDevicePidArrayBytes((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)349), (LogicalDeviceSessionType)2, 6);
			VehicleConfigurationGroup1Pid = (ILogicalDevicePidArrayBytes)new LogicalDevicePidArrayBytes((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)350), (LogicalDeviceSessionType)2, 6);
			VehicleConfigurationGroup2Pid = (ILogicalDevicePidArrayBytes)new LogicalDevicePidArrayBytes((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)351), (LogicalDeviceSessionType)2, 6);
			VehicleConfigurationGroup3Pid = (ILogicalDevicePidArrayBytes)new LogicalDevicePidArrayBytes((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)352), (LogicalDeviceSessionType)2, 6);
			RepeaterAssemblyPartNumberPid = (ILogicalDevicePidText)new LogicalDevicePidText((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)353), (LogicalDeviceSessionType)2, (LogicalDevicePidTextEncoding)0, (Func<ulong, bool>)null);
			VehicleConfigurationAckPid = (ILogicalDevicePidArrayBytes)new LogicalDevicePidArrayBytes((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)354), (LogicalDeviceSessionType)2, 6);
			UpdateAlert("SensorGeneralFault", isActive: false, default(Nullable<int>));
			UpdateAlert("RepeaterGeneralFault", isActive: false, default(Nullable<int>));
		}

		public LogicalDeviceTpmsStatusExtended GetDeviceStatusExtended(TpmsGroupId groupId, byte tireIndex)
		{
			LogicalDeviceTpmsStatusExtended logicalDeviceTpmsStatusExtended = default(LogicalDeviceTpmsStatusExtended);
			if (base.DeviceStatusExtendedDictionary.TryGetValue(new TpmsPositionalSensorId(groupId, tireIndex), ref logicalDeviceTpmsStatusExtended) && logicalDeviceTpmsStatusExtended != null)
			{
				return logicalDeviceTpmsStatusExtended;
			}
			return LogicalDeviceTpmsStatusExtended.MakeDefaultExtendedStatus();
		}

		public override void OnDeviceStatusChanged()
		{
			((LogicalDevice<LogicalDeviceTpmsStatus, LogicalDeviceTpmsCapability>)(object)this).OnDeviceStatusChanged();
		}

		public void UpdateAlert(string alertName, bool isActive, Nullable<int> count)
		{
			//IL_0003: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDevice<LogicalDeviceTpmsStatus, LogicalDeviceTpmsCapability>)(object)this).UpdateAlertDefaultImpl(alertName, isActive, count, _alertDict);
		}

		public void UpdateAlert(byte alertId, byte rawData)
		{
			//IL_002d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0040: Unknown result type (might be due to invalid IL or missing references)
			bool isActive = (rawData & 0x80) != 0;
			byte b = (byte)(rawData & 0x7F);
			switch (alertId)
			{
			case 0:
				UpdateAlert("SensorGeneralFault", isActive, new Nullable<int>((int)b));
				break;
			case 1:
				UpdateAlert("RepeaterGeneralFault", isActive, new Nullable<int>((int)b));
				break;
			case 2:
				SetGroupIdsWithActiveFault(rawData);
				break;
			default:
				TaggedLog.Warning("LogicalDeviceTpms", String.Format("Received and ignoring unknown Alert Id 0x{0:X} for {1}", (object)alertId, (object)this), Array.Empty<object>());
				break;
			}
		}

		public bool UpdateDeviceStatusAlerts(byte[] alertData)
		{
			//IL_0053: Expected O, but got Unknown
			//IL_003e: Unknown result type (might be due to invalid IL or missing references)
			try
			{
				int num = alertData.Length;
				if (num == 0)
				{
					return false;
				}
				byte b = 0;
				while (b < 2)
				{
					TpmsAlertId tpmsAlertId = (TpmsAlertId)b;
					if ((uint)tpmsAlertId <= 1u)
					{
						UpdateAlert(b, alertData[b]);
						b++;
						continue;
					}
					throw new ArgumentException(String.Format("Invalid Status Alert Size of {0}: {1} for {2}", (object)num, (object)ArrayExtension.DebugDump(alertData, " ", false), (object)this));
				}
				return true;
			}
			catch (Exception ex)
			{
				Exception ex2 = ex;
				TaggedLog.Error("LogicalDeviceTpms", String.Format("{0} - Exception updating alert status {1}: {2}", (object)this, (object)ex2, (object)ex2.Message), Array.Empty<object>());
				return false;
			}
		}

		private void SetGroupIdsWithActiveFault(byte rawData)
		{
			GroupIdsWithActiveFault = (TpmsGroupIdHasActiveFault)rawData;
		}

		public override TpmsPositionalSensorId ToExtendedByteKey(byte extendedByte)
		{
			return new TpmsPositionalSensorId(extendedByte);
		}

		protected override LogicalDeviceTpmsStatusExtended MakeNewStatusExtendedFromMultiplexedData(TpmsPositionalSensorId extendedByteKey)
		{
			return new LogicalDeviceTpmsStatusExtended();
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<WriteSensorConfigurationResponseCode> WriteSensorConfigurationAsync(uint lowPressureLimit, uint highPressureLimit, int relativeTempLimit, int highTempLimit, byte tireIndex, TpmsGroupId groupId, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0049: Unknown result type (might be due to invalid IL or missing references)
			//IL_004b: Unknown result type (might be due to invalid IL or missing references)
			<WriteSensorConfigurationAsync>d__130 <WriteSensorConfigurationAsync>d__ = default(<WriteSensorConfigurationAsync>d__130);
			<WriteSensorConfigurationAsync>d__.<>t__builder = AsyncTaskMethodBuilder<WriteSensorConfigurationResponseCode>.Create();
			<WriteSensorConfigurationAsync>d__.<>4__this = this;
			<WriteSensorConfigurationAsync>d__.lowPressureLimit = lowPressureLimit;
			<WriteSensorConfigurationAsync>d__.highPressureLimit = highPressureLimit;
			<WriteSensorConfigurationAsync>d__.relativeTempLimit = relativeTempLimit;
			<WriteSensorConfigurationAsync>d__.highTempLimit = highTempLimit;
			<WriteSensorConfigurationAsync>d__.tireIndex = tireIndex;
			<WriteSensorConfigurationAsync>d__.groupId = groupId;
			<WriteSensorConfigurationAsync>d__.cancellationToken = cancellationToken;
			<WriteSensorConfigurationAsync>d__.<>1__state = -1;
			<WriteSensorConfigurationAsync>d__.<>t__builder.Start<<WriteSensorConfigurationAsync>d__130>(ref <WriteSensorConfigurationAsync>d__);
			return <WriteSensorConfigurationAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<LearnSensorResponseCode> LearnSensorAsync(LearnSensorOpCode opCode, TpmsGroupId groupId, byte tireIndex, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0030: Unknown result type (might be due to invalid IL or missing references)
			<LearnSensorAsync>d__131 <LearnSensorAsync>d__ = default(<LearnSensorAsync>d__131);
			<LearnSensorAsync>d__.<>t__builder = AsyncTaskMethodBuilder<LearnSensorResponseCode>.Create();
			<LearnSensorAsync>d__.<>4__this = this;
			<LearnSensorAsync>d__.opCode = opCode;
			<LearnSensorAsync>d__.groupId = groupId;
			<LearnSensorAsync>d__.tireIndex = tireIndex;
			<LearnSensorAsync>d__.cancellationToken = cancellationToken;
			<LearnSensorAsync>d__.<>1__state = -1;
			<LearnSensorAsync>d__.<>t__builder.Start<<LearnSensorAsync>d__131>(ref <LearnSensorAsync>d__);
			return <LearnSensorAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<LearnSensorResponseCode> RemoveVehicleConfigurationAsync(LearnSensorOpCode opCode, TpmsGroupId groupId, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<RemoveVehicleConfigurationAsync>d__132 <RemoveVehicleConfigurationAsync>d__ = default(<RemoveVehicleConfigurationAsync>d__132);
			<RemoveVehicleConfigurationAsync>d__.<>t__builder = AsyncTaskMethodBuilder<LearnSensorResponseCode>.Create();
			<RemoveVehicleConfigurationAsync>d__.<>4__this = this;
			<RemoveVehicleConfigurationAsync>d__.opCode = opCode;
			<RemoveVehicleConfigurationAsync>d__.groupId = groupId;
			<RemoveVehicleConfigurationAsync>d__.cancellationToken = cancellationToken;
			<RemoveVehicleConfigurationAsync>d__.<>1__state = -1;
			<RemoveVehicleConfigurationAsync>d__.<>t__builder.Start<<RemoveVehicleConfigurationAsync>d__132>(ref <RemoveVehicleConfigurationAsync>d__);
			return <RemoveVehicleConfigurationAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<LearnSensorResponseCode> FactoryResetRepeaterAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<FactoryResetRepeaterAsync>d__133 <FactoryResetRepeaterAsync>d__ = default(<FactoryResetRepeaterAsync>d__133);
			<FactoryResetRepeaterAsync>d__.<>t__builder = AsyncTaskMethodBuilder<LearnSensorResponseCode>.Create();
			<FactoryResetRepeaterAsync>d__.<>4__this = this;
			<FactoryResetRepeaterAsync>d__.cancellationToken = cancellationToken;
			<FactoryResetRepeaterAsync>d__.<>1__state = -1;
			<FactoryResetRepeaterAsync>d__.<>t__builder.Start<<FactoryResetRepeaterAsync>d__133>(ref <FactoryResetRepeaterAsync>d__);
			return <FactoryResetRepeaterAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task<TpmsVehicleConfiguration> ReadVehicleConfigurationAsync(TpmsGroupId groupId, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<ReadVehicleConfigurationAsync>d__134 <ReadVehicleConfigurationAsync>d__ = default(<ReadVehicleConfigurationAsync>d__134);
			<ReadVehicleConfigurationAsync>d__.<>t__builder = AsyncTaskMethodBuilder<TpmsVehicleConfiguration>.Create();
			<ReadVehicleConfigurationAsync>d__.<>4__this = this;
			<ReadVehicleConfigurationAsync>d__.groupId = groupId;
			<ReadVehicleConfigurationAsync>d__.cancellationToken = cancellationToken;
			<ReadVehicleConfigurationAsync>d__.<>1__state = -1;
			<ReadVehicleConfigurationAsync>d__.<>t__builder.Start<<ReadVehicleConfigurationAsync>d__134>(ref <ReadVehicleConfigurationAsync>d__);
			return <ReadVehicleConfigurationAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task WriteVehicleConfigurationAsync(TpmsVehicleConfiguration vehicleConfig, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<WriteVehicleConfigurationAsync>d__135 <WriteVehicleConfigurationAsync>d__ = default(<WriteVehicleConfigurationAsync>d__135);
			<WriteVehicleConfigurationAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<WriteVehicleConfigurationAsync>d__.<>4__this = this;
			<WriteVehicleConfigurationAsync>d__.vehicleConfig = vehicleConfig;
			<WriteVehicleConfigurationAsync>d__.cancellationToken = cancellationToken;
			<WriteVehicleConfigurationAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <WriteVehicleConfigurationAsync>d__.<>t__builder)).Start<<WriteVehicleConfigurationAsync>d__135>(ref <WriteVehicleConfigurationAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <WriteVehicleConfigurationAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task<IReadOnlyList<TpmsSensorConfiguration>> BlockReadSensorConfigurationsAsync(TpmsGroupId groupId, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<BlockReadSensorConfigurationsAsync>d__136 <BlockReadSensorConfigurationsAsync>d__ = default(<BlockReadSensorConfigurationsAsync>d__136);
			<BlockReadSensorConfigurationsAsync>d__.<>t__builder = AsyncTaskMethodBuilder<IReadOnlyList<TpmsSensorConfiguration>>.Create();
			<BlockReadSensorConfigurationsAsync>d__.<>4__this = this;
			<BlockReadSensorConfigurationsAsync>d__.groupId = groupId;
			<BlockReadSensorConfigurationsAsync>d__.cancellationToken = cancellationToken;
			<BlockReadSensorConfigurationsAsync>d__.<>1__state = -1;
			<BlockReadSensorConfigurationsAsync>d__.<>t__builder.Start<<BlockReadSensorConfigurationsAsync>d__136>(ref <BlockReadSensorConfigurationsAsync>d__);
			return <BlockReadSensorConfigurationsAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task<List<TpmsVehicleConfiguration>> BlockReadAllVehicleConfigurationsAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<BlockReadAllVehicleConfigurationsAsync>d__137 <BlockReadAllVehicleConfigurationsAsync>d__ = default(<BlockReadAllVehicleConfigurationsAsync>d__137);
			<BlockReadAllVehicleConfigurationsAsync>d__.<>t__builder = AsyncTaskMethodBuilder<List<TpmsVehicleConfiguration>>.Create();
			<BlockReadAllVehicleConfigurationsAsync>d__.<>4__this = this;
			<BlockReadAllVehicleConfigurationsAsync>d__.cancellationToken = cancellationToken;
			<BlockReadAllVehicleConfigurationsAsync>d__.<>1__state = -1;
			<BlockReadAllVehicleConfigurationsAsync>d__.<>t__builder.Start<<BlockReadAllVehicleConfigurationsAsync>d__137>(ref <BlockReadAllVehicleConfigurationsAsync>d__);
			return <BlockReadAllVehicleConfigurationsAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task<TpmsVehicleConfiguration> BlockReadVehicleConfigurationAsync(TpmsGroupId groupId, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<BlockReadVehicleConfigurationAsync>d__138 <BlockReadVehicleConfigurationAsync>d__ = default(<BlockReadVehicleConfigurationAsync>d__138);
			<BlockReadVehicleConfigurationAsync>d__.<>t__builder = AsyncTaskMethodBuilder<TpmsVehicleConfiguration>.Create();
			<BlockReadVehicleConfigurationAsync>d__.<>4__this = this;
			<BlockReadVehicleConfigurationAsync>d__.groupId = groupId;
			<BlockReadVehicleConfigurationAsync>d__.cancellationToken = cancellationToken;
			<BlockReadVehicleConfigurationAsync>d__.<>1__state = -1;
			<BlockReadVehicleConfigurationAsync>d__.<>t__builder.Start<<BlockReadVehicleConfigurationAsync>d__138>(ref <BlockReadVehicleConfigurationAsync>d__);
			return <BlockReadVehicleConfigurationAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task<IReadOnlyList<LogicalDeviceTpmsStatusExtended>> BlockReadSensorStatusesAsync(TpmsGroupId groupId, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<BlockReadSensorStatusesAsync>d__139 <BlockReadSensorStatusesAsync>d__ = default(<BlockReadSensorStatusesAsync>d__139);
			<BlockReadSensorStatusesAsync>d__.<>t__builder = AsyncTaskMethodBuilder<IReadOnlyList<LogicalDeviceTpmsStatusExtended>>.Create();
			<BlockReadSensorStatusesAsync>d__.<>4__this = this;
			<BlockReadSensorStatusesAsync>d__.groupId = groupId;
			<BlockReadSensorStatusesAsync>d__.cancellationToken = cancellationToken;
			<BlockReadSensorStatusesAsync>d__.<>1__state = -1;
			<BlockReadSensorStatusesAsync>d__.<>t__builder.Start<<BlockReadSensorStatusesAsync>d__139>(ref <BlockReadSensorStatusesAsync>d__);
			return <BlockReadSensorStatusesAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task<byte> BlockReadMaxSensorsSupportedAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<BlockReadMaxSensorsSupportedAsync>d__140 <BlockReadMaxSensorsSupportedAsync>d__ = default(<BlockReadMaxSensorsSupportedAsync>d__140);
			<BlockReadMaxSensorsSupportedAsync>d__.<>t__builder = AsyncTaskMethodBuilder<byte>.Create();
			<BlockReadMaxSensorsSupportedAsync>d__.<>4__this = this;
			<BlockReadMaxSensorsSupportedAsync>d__.cancellationToken = cancellationToken;
			<BlockReadMaxSensorsSupportedAsync>d__.<>1__state = -1;
			<BlockReadMaxSensorsSupportedAsync>d__.<>t__builder.Start<<BlockReadMaxSensorsSupportedAsync>d__140>(ref <BlockReadMaxSensorsSupportedAsync>d__);
			return <BlockReadMaxSensorsSupportedAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task<byte> BlockReadMaxVehicleConfigsSupportedAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<BlockReadMaxVehicleConfigsSupportedAsync>d__141 <BlockReadMaxVehicleConfigsSupportedAsync>d__ = default(<BlockReadMaxVehicleConfigsSupportedAsync>d__141);
			<BlockReadMaxVehicleConfigsSupportedAsync>d__.<>t__builder = AsyncTaskMethodBuilder<byte>.Create();
			<BlockReadMaxVehicleConfigsSupportedAsync>d__.<>4__this = this;
			<BlockReadMaxVehicleConfigsSupportedAsync>d__.cancellationToken = cancellationToken;
			<BlockReadMaxVehicleConfigsSupportedAsync>d__.<>1__state = -1;
			<BlockReadMaxVehicleConfigsSupportedAsync>d__.<>t__builder.Start<<BlockReadMaxVehicleConfigsSupportedAsync>d__141>(ref <BlockReadMaxVehicleConfigsSupportedAsync>d__);
			return <BlockReadMaxVehicleConfigsSupportedAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task<byte> BlockReadMaxSensorsPerVehicleConfigAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<BlockReadMaxSensorsPerVehicleConfigAsync>d__142 <BlockReadMaxSensorsPerVehicleConfigAsync>d__ = default(<BlockReadMaxSensorsPerVehicleConfigAsync>d__142);
			<BlockReadMaxSensorsPerVehicleConfigAsync>d__.<>t__builder = AsyncTaskMethodBuilder<byte>.Create();
			<BlockReadMaxSensorsPerVehicleConfigAsync>d__.<>4__this = this;
			<BlockReadMaxSensorsPerVehicleConfigAsync>d__.cancellationToken = cancellationToken;
			<BlockReadMaxSensorsPerVehicleConfigAsync>d__.<>1__state = -1;
			<BlockReadMaxSensorsPerVehicleConfigAsync>d__.<>t__builder.Start<<BlockReadMaxSensorsPerVehicleConfigAsync>d__142>(ref <BlockReadMaxSensorsPerVehicleConfigAsync>d__);
			return <BlockReadMaxSensorsPerVehicleConfigAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task<byte> BlockReadConfiguredSensorCountAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<BlockReadConfiguredSensorCountAsync>d__143 <BlockReadConfiguredSensorCountAsync>d__ = default(<BlockReadConfiguredSensorCountAsync>d__143);
			<BlockReadConfiguredSensorCountAsync>d__.<>t__builder = AsyncTaskMethodBuilder<byte>.Create();
			<BlockReadConfiguredSensorCountAsync>d__.<>4__this = this;
			<BlockReadConfiguredSensorCountAsync>d__.cancellationToken = cancellationToken;
			<BlockReadConfiguredSensorCountAsync>d__.<>1__state = -1;
			<BlockReadConfiguredSensorCountAsync>d__.<>t__builder.Start<<BlockReadConfiguredSensorCountAsync>d__143>(ref <BlockReadConfiguredSensorCountAsync>d__);
			return <BlockReadConfiguredSensorCountAsync>d__.<>t__builder.Task;
		}

		private LogicalDeviceTagTpms? GetActiveTrailerTag()
		{
			return LogicalDeviceTagTpms.GetTag(this);
		}

		public Nullable<TpmsGroupId> GetActiveTrailer()
		{
			//IL_0019: Unknown result type (might be due to invalid IL or missing references)
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0012: Unknown result type (might be due to invalid IL or missing references)
			LogicalDeviceTagTpms? activeTrailerTag = GetActiveTrailerTag();
			if ((object)activeTrailerTag == null)
			{
				return default(Nullable<TpmsGroupId>);
			}
			return new Nullable<TpmsGroupId>(activeTrailerTag.ActiveTrailer);
		}

		public bool TrySaveActiveTrailer(TpmsGroupId activeTrailer)
		{
			//IL_0039: Expected O, but got Unknown
			//IL_0022: Unknown result type (might be due to invalid IL or missing references)
			try
			{
				LogicalDeviceTagTpms activeTrailerTag = GetActiveTrailerTag();
				if ((object)activeTrailerTag != null && activeTrailerTag.ActiveTrailer == activeTrailer)
				{
					return true;
				}
				if ((object)activeTrailerTag != null)
				{
					LogicalDeviceTagTpms.RemoveTag(this, activeTrailerTag);
				}
				LogicalDeviceTagTpms tag = new LogicalDeviceTagTpms(new Nullable<TpmsGroupId>(activeTrailer));
				LogicalDeviceTagTpms.SetTag(this, tag);
				return true;
			}
			catch (Exception ex)
			{
				Exception ex2 = ex;
				TaggedLog.Error("LogicalDeviceTpms", String.Concat("Failed to save TPMS Active Trailer: ", ex2.Message), Array.Empty<object>());
				return false;
			}
		}

		public void UpdateSoftwarePartNumber(string softwarePartNumber)
		{
			_softwarePartNumber = softwarePartNumber;
		}

		public override Task<string> GetSoftwarePartNumberAsync(CancellationToken cancellationToken)
		{
			return Task.FromResult<string>(_softwarePartNumber);
		}

		public Task<string> GetRepeaterAssemblyPartNumberAsync(CancellationToken cancellationToken)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return RepeaterAssemblyPartNumberPid.ReadTextAsync(cancellationToken);
		}

		public override string ToString()
		{
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			IEnumerator<KeyValuePair<TpmsPositionalSensorId, LogicalDeviceTpmsStatusExtended>> enumerator = ((IEnumerable<KeyValuePair<TpmsPositionalSensorId, LogicalDeviceTpmsStatusExtended>>)(object)base.DeviceStatusExtendedDictionary).GetEnumerator();
			try
			{
				while (((IEnumerator)enumerator).MoveNext())
				{
					_ = enumerator.Current;
				}
			}
			finally
			{
				if (enumerator != null)
				{
					((IDisposable)enumerator).Dispose();
				}
			}
			return String.Format("{0} Status = {1}", (object)((LogicalDevice<LogicalDeviceTpmsCapability>)(object)this).LogicalId, (object)((LogicalDevice<LogicalDeviceTpmsStatus, LogicalDeviceTpmsCapability>)(object)this).DeviceStatus);
		}

		public override void Dispose(bool disposing)
		{
			_disposables.Dispose();
			IEnumerator<TpmsSensorGroup> enumerator = ((IEnumerable<TpmsSensorGroup>)(object)_sensorGroupDictionary.Values).GetEnumerator();
			try
			{
				while (((IEnumerator)enumerator).MoveNext())
				{
					((CommonDisposable)enumerator.Current).Dispose();
				}
			}
			finally
			{
				if (enumerator != null)
				{
					((IDisposable)enumerator).Dispose();
				}
			}
			_sensorGroupDictionary.Clear();
			((CommonDisposableNotifyPropertyChanged)this).Dispose();
		}

		public TpmsSensorGroup GetSensorGroup(TpmsGroupId groupId)
		{
			//IL_0032: Unknown result type (might be due to invalid IL or missing references)
			<>c__DisplayClass153_0 CS$<>8__locals7 = new <>c__DisplayClass153_0();
			CS$<>8__locals7.<>4__this = this;
			CS$<>8__locals7.groupId = groupId;
			if (CS$<>8__locals7.groupId == TpmsGroupId.Invalid)
			{
				throw new ArgumentOutOfRangeException("groupId", (object)CS$<>8__locals7.groupId, "Invalid GroupId");
			}
			return _sensorGroupDictionary.GetOrAdd(CS$<>8__locals7.groupId, (Func<TpmsGroupId, TpmsSensorGroup>)((TpmsGroupId id) => new TpmsSensorGroup(CS$<>8__locals7.<>4__this, CS$<>8__locals7.groupId)));
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<LogicalDeviceTpmsCapability>)(object)this).LastReceivedNetworkStatus;
		}
	}
	public class LogicalDeviceTpmsCapability : LogicalDeviceCapability
	{
		private LogicalDeviceTpmsCapability(byte rawCapability)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(new Nullable<byte>(rawCapability));
		}

		public LogicalDeviceTpmsCapability(Nullable<byte> rawCapability)
			: this(rawCapability.GetValueOrDefault())
		{
		}

		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}
	}
	public class LogicalDeviceTpmsSim : LogicalDeviceTpms, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <BlockReadSensorConfigurationsAsync>d__23 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<IReadOnlyList<TpmsSensorConfiguration>> <>t__builder;

			public LogicalDeviceTpmsSim <>4__this;

			private void MoveNext()
			{
				//IL_0011: Expected O, but got Unknown
				LogicalDeviceTpmsSim logicalDeviceTpmsSim = <>4__this;
				IReadOnlyList<TpmsSensorConfiguration> sensorConfigs;
				try
				{
					sensorConfigs = (IReadOnlyList<TpmsSensorConfiguration>)(object)logicalDeviceTpmsSim._sensorConfigs;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(sensorConfigs);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ReadVehicleConfigurationAsync>d__22 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<TpmsVehicleConfiguration> <>t__builder;

			public LogicalDeviceTpmsSim <>4__this;

			private void MoveNext()
			{
				//IL_0011: Expected O, but got Unknown
				LogicalDeviceTpmsSim logicalDeviceTpmsSim = <>4__this;
				TpmsVehicleConfiguration vehicleConfig;
				try
				{
					vehicleConfig = logicalDeviceTpmsSim._vehicleConfig;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(vehicleConfig);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SimulatorAsync>d__21 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceTpmsSim <>4__this;

			public CancellationToken cancellationToken;

			private Random <random>5__2;

			private int <loopCount>5__3;

			private int <faultCount>5__4;

			private uint <tireIndex>5__5;

			private Enumerator<TpmsSensorConfiguration> <>7__wrap5;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_0322: Expected O, but got Unknown
				//IL_02ea: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ef: Unknown result type (might be due to invalid IL or missing references)
				//IL_02f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Expected O, but got Unknown
				//IL_0212: Unknown result type (might be due to invalid IL or missing references)
				//IL_0217: Unknown result type (might be due to invalid IL or missing references)
				//IL_021f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_0165: Unknown result type (might be due to invalid IL or missing references)
				//IL_016b: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_01dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e2: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ae: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b8: Unknown result type (might be due to invalid IL or missing references)
				//IL_02bd: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f9: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d4: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTpmsSim logicalDeviceTpmsSim = <>4__this;
				try
				{
					if (num == 0)
					{
						goto IL_004f;
					}
					if (num != 1)
					{
						<random>5__2 = new Random();
						<loopCount>5__3 = 0;
						<faultCount>5__4 = 0;
						goto IL_030e;
					}
					TaskAwaiter<bool> val = <>u__1;
					<>u__1 = default(TaskAwaiter<bool>);
					num = (<>1__state = -1);
					goto IL_0306;
					IL_030e:
					if (!((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
					{
						<tireIndex>5__5 = 0u;
						<>7__wrap5 = logicalDeviceTpmsSim._sensorConfigs.GetEnumerator();
						goto IL_004f;
					}
					goto end_IL_000e;
					IL_004f:
					try
					{
						if (num != 0)
						{
							goto IL_0236;
						}
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_022e;
						IL_022e:
						val.GetResult();
						goto IL_0236;
						IL_0236:
						if (<>7__wrap5.MoveNext())
						{
							_ = <>7__wrap5.Current;
							logicalDeviceTpmsSim._simStatusExtended.SetTireIndex(<tireIndex>5__5);
							logicalDeviceTpmsSim._simStatusExtended.SetGroupId(0u);
							logicalDeviceTpmsSim._simStatusExtended.SetBatteryVoltage((float)((double)<random>5__2.Next(11, 14) + <random>5__2.NextDouble()));
							logicalDeviceTpmsSim._simStatusExtended.SetLowBattery(lowBattery: false);
							logicalDeviceTpmsSim._simStatusExtended.SetSensorLowFrequencyTrigger(enabled: false);
							logicalDeviceTpmsSim._simStatusExtended.SetTpmsPressureStatus(TpmsPressureStatus.Normal);
							logicalDeviceTpmsSim._simStatusExtended.SetTireTempCelsius(<random>5__2.Next(65, 75));
							logicalDeviceTpmsSim._simStatusExtended.SetTirePressure((uint)<random>5__2.Next(35, 50));
							logicalDeviceTpmsSim._simStatusExtended.SetRssi((sbyte)<random>5__2.Next(60, 90));
							logicalDeviceTpmsSim._simStatusExtended.SetSensorBatteryFault(faultDetected: false);
							logicalDeviceTpmsSim._simStatusExtended.SetSensorMissing(missing: false);
							logicalDeviceTpmsSim._simStatusExtended.SetSensorDataReceivedSincePowerOn(enabled: true);
							logicalDeviceTpmsSim._simStatusExtended.SetSensorConfigured(configured: true);
							logicalDeviceTpmsSim._simStatusExtended.SetSensorRotating(rotating: true);
							((LogicalDeviceWithStatusExtendedMultiplexed<LogicalDeviceTpmsStatus, LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId, LogicalDeviceTpmsCapability>)logicalDeviceTpmsSim).UpdateDeviceStatusExtended(logicalDeviceTpmsSim._simStatusExtended, default(Nullable<DateTime>));
							TpmsPressureFault pressureFault = TpmsPressureFault.NoFault;
							TpmsTemperatureFault temperatureFault = TpmsTemperatureFault.NoFault;
							if (<faultCount>5__4 % 17 == 0)
							{
								pressureFault = TpmsPressureFault.HiPressureFault;
							}
							if (<faultCount>5__4 % 30 == 0)
							{
								temperatureFault = TpmsTemperatureFault.HiTemperatureFault;
							}
							logicalDeviceTpmsSim._simStatusExtended.SetPressureFault(pressureFault);
							logicalDeviceTpmsSim._simStatusExtended.SetTemperatureFault(temperatureFault);
							<tireIndex>5__5++;
							<faultCount>5__4++;
							val = TaskExtension.TryDelay(500, cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SimulatorAsync>d__21>(ref val, ref this);
								return;
							}
							goto IL_022e;
						}
					}
					finally
					{
						if (num < 0)
						{
							((IDisposable)<>7__wrap5/*cast due to .constrained prefix*/).Dispose();
						}
					}
					if (<loopCount>5__3 % 10 == 0)
					{
						logicalDeviceTpmsSim._repeaterHwFault = !logicalDeviceTpmsSim._repeaterHwFault;
						logicalDeviceTpmsSim._simStatus.SetRepeaterHasHardwareFault(logicalDeviceTpmsSim._repeaterHwFault);
					}
					((LogicalDevice<LogicalDeviceTpmsStatus, LogicalDeviceTpmsCapability>)(object)logicalDeviceTpmsSim).UpdateDeviceStatus(logicalDeviceTpmsSim._simStatus);
					<loopCount>5__3++;
					val = TaskExtension.TryDelay(10000, cancellationToken).GetAwaiter();
					if (!val.IsCompleted)
					{
						num = (<>1__state = 1);
						<>u__1 = val;
						((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SimulatorAsync>d__21>(ref val, ref this);
						return;
					}
					goto IL_0306;
					IL_0306:
					val.GetResult();
					goto IL_030e;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<random>5__2 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<random>5__2 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private readonly BackgroundOperation _simulator;

		private readonly LogicalDeviceTpmsStatus _simStatus = new LogicalDeviceTpmsStatus();

		private readonly LogicalDeviceTpmsStatusExtended _simStatusExtended = new LogicalDeviceTpmsStatusExtended();

		private const int TickIntervalDelayMs = 10000;

		private const int SensorBroadcastDelayMs = 500;

		private const int SensorCount = 15;

		private const TpmsRepeaterMode RepeaterMode = TpmsRepeaterMode.Monitoring;

		private const TpmsRepeaterPowerSource RepeaterPowerSource = TpmsRepeaterPowerSource.TwelveVoltSource;

		private const bool RepeaterCharging = false;

		private const bool HasBattery = false;

		private const bool RepeaterBatteryLow = false;

		private readonly TpmsVehicleConfiguration _vehicleConfig = new TpmsVehicleConfiguration(TpmsGroupId.GroupId0, TpmsVehicleTemplate.CustomConfiguration, 30u, hasSpare: false, 6);

		private readonly List<TpmsSensorConfiguration> _sensorConfigs = new List<TpmsSensorConfiguration>();

		private byte _vehicleConfigSequence = 1;

		private byte _sensorConfigSequence = 1;

		private TpmsRepeaterVoltageLevel _repeaterVoltageLevel = TpmsRepeaterVoltageLevel.SeventyFivePercent;

		private bool _repeaterHwFault;

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public override void UpdateDeviceOnline(bool canOnline)
		{
		}

		public LogicalDeviceTpmsSim(ILogicalDeviceId logicalDeviceId, LogicalDeviceTpmsCapability capability, ILogicalDeviceService deviceService, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, capability, deviceService, isFunctionClassChangeable)
		{
			//IL_0062: Unknown result type (might be due to invalid IL or missing references)
			//IL_006c: Expected O, but got Unknown
			//IL_0130: Unknown result type (might be due to invalid IL or missing references)
			//IL_013a: Expected O, but got Unknown
			//IL_0135: Unknown result type (might be due to invalid IL or missing references)
			//IL_013f: Expected O, but got Unknown
			RepeaterAssemblyPartNumberPid = (ILogicalDevicePidText)new LogicalDevicePidSimText(PidExtension.ConvertToPid((Pid)353), "SIM123");
			_simStatus.SetSensorCount(15);
			_simStatus.SetVehicleConfigSequence(_vehicleConfigSequence);
			_simStatus.SetSensorConfigSequence(_sensorConfigSequence);
			_simStatus.SetRepeaterMode(TpmsRepeaterMode.Monitoring);
			_simStatus.SetRepeaterVoltageLevel(_repeaterVoltageLevel);
			_simStatus.SetRepeaterBatteryLow(batteryLow: false);
			_simStatus.SetRepeaterPowerSource(TpmsRepeaterPowerSource.TwelveVoltSource);
			_simStatus.SetRepeaterHasHardwareFault(_repeaterHwFault);
			_simStatus.SetRepeaterCharging(charging: false);
			_simStatus.SetRepeaterHasBattery(hasBattery: false);
			for (int i = 0; i < 15; i++)
			{
				_sensorConfigs.Add(new TpmsSensorConfiguration(new TpmsPositionalSensorId(TpmsGroupId.GroupId0, (byte)i), 100, 20, 50u, 20u, (uint)i, 0));
			}
			_simulator = new BackgroundOperation(new BackgroundOperationFunc(SimulatorAsync));
			_simulator.Start();
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task SimulatorAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SimulatorAsync>d__21 <SimulatorAsync>d__ = default(<SimulatorAsync>d__21);
			<SimulatorAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SimulatorAsync>d__.<>4__this = this;
			<SimulatorAsync>d__.cancellationToken = cancellationToken;
			<SimulatorAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Start<<SimulatorAsync>d__21>(ref <SimulatorAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public override Task<TpmsVehicleConfiguration> ReadVehicleConfigurationAsync(TpmsGroupId groupId, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<ReadVehicleConfigurationAsync>d__22 <ReadVehicleConfigurationAsync>d__ = default(<ReadVehicleConfigurationAsync>d__22);
			<ReadVehicleConfigurationAsync>d__.<>t__builder = AsyncTaskMethodBuilder<TpmsVehicleConfiguration>.Create();
			<ReadVehicleConfigurationAsync>d__.<>4__this = this;
			<ReadVehicleConfigurationAsync>d__.<>1__state = -1;
			<ReadVehicleConfigurationAsync>d__.<>t__builder.Start<<ReadVehicleConfigurationAsync>d__22>(ref <ReadVehicleConfigurationAsync>d__);
			return <ReadVehicleConfigurationAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public override Task<IReadOnlyList<TpmsSensorConfiguration>> BlockReadSensorConfigurationsAsync(TpmsGroupId groupId, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<BlockReadSensorConfigurationsAsync>d__23 <BlockReadSensorConfigurationsAsync>d__ = default(<BlockReadSensorConfigurationsAsync>d__23);
			<BlockReadSensorConfigurationsAsync>d__.<>t__builder = AsyncTaskMethodBuilder<IReadOnlyList<TpmsSensorConfiguration>>.Create();
			<BlockReadSensorConfigurationsAsync>d__.<>4__this = this;
			<BlockReadSensorConfigurationsAsync>d__.<>1__state = -1;
			<BlockReadSensorConfigurationsAsync>d__.<>t__builder.Start<<BlockReadSensorConfigurationsAsync>d__23>(ref <BlockReadSensorConfigurationsAsync>d__);
			return <BlockReadSensorConfigurationsAsync>d__.<>t__builder.Task;
		}
	}
	public class LogicalDeviceTpmsStatus : LogicalDeviceStatusPacketMutable, ILogicalDeviceStatus<LogicalDeviceTpmsStatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		private const string LogTag = "LogicalDeviceTpmsStatus";

		public const int MinimumStatusPacketSize = 5;

		private const int SensorCountIndex = 0;

		private const int VehicleConfigSequenceIndex = 1;

		private const int SensorConfigSequenceIndex = 2;

		private const int RepeaterModeIndex = 3;

		private const int RepeaterBatteryHwStatusIndex = 4;

		private const byte RepeaterBatteryLowBitmask = 8;

		private const byte RepeaterPowerSourceBitmask = 16;

		private const byte RepeaterHwFaultBitmask = 32;

		private const byte RepeaterChargingStatusBitmask = 64;

		private const byte HasBatteryBitmask = 128;

		private static readonly BitPositionValue RepeaterVoltageLevelBitPosition = new BitPositionValue(7u, 4, 1);

		public byte LearnedSensorCount => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0];

		public byte VehicleConfigSequence => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[1];

		public byte SensorConfigSequence => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[2];

		public TpmsRepeaterMode TpmsRepeaterMode
		{
			get
			{
				byte b = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3];
				if (!Enum.IsDefined(typeof(TpmsRepeaterMode), (object)(Int32)b))
				{
					TaggedLog.Warning("LogicalDeviceTpmsStatus", String.Format("Current TPMS Repeater Mode is invalid, raw value: {0}", (object)b), Array.Empty<object>());
					return TpmsRepeaterMode.Unknown;
				}
				return (TpmsRepeaterMode)b;
			}
		}

		public TpmsRepeaterVoltageLevel TpmsRepeaterVoltageLevel
		{
			get
			{
				//IL_0000: Unknown result type (might be due to invalid IL or missing references)
				//IL_0005: Unknown result type (might be due to invalid IL or missing references)
				BitPositionValue repeaterVoltageLevelBitPosition = RepeaterVoltageLevelBitPosition;
				uint num = ((BitPositionValue)(ref repeaterVoltageLevelBitPosition)).DecodeValueFromBuffer(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data);
				if (!Enum.IsDefined(typeof(TpmsRepeaterVoltageLevel), (object)(Int32)num))
				{
					TaggedLog.Warning("LogicalDeviceTpmsStatus", String.Format("Current TPMS Repeater Voltage Level is invalid, raw value: {0}", (object)num), Array.Empty<object>());
					return TpmsRepeaterVoltageLevel.Error;
				}
				return (TpmsRepeaterVoltageLevel)num;
			}
		}

		public bool RepeaterBatteryLow => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)8, 4);

		public TpmsRepeaterPowerSource RepeaterPowerSource
		{
			get
			{
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)16, 4))
				{
					return TpmsRepeaterPowerSource.TwelveVoltSource;
				}
				return TpmsRepeaterPowerSource.LiPoBatterySource;
			}
		}

		public bool RepeaterHasHardwareFault => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)32, 4);

		public bool RepeaterCharging => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)64, 4);

		public bool RepeaterHasBattery => !((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)128, 4);

		public void SetSensorCount(byte sensorCount)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, sensorCount, 0);
		}

		public void SetVehicleConfigSequence(byte axleConfigSequence)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, axleConfigSequence, 1);
		}

		public void SetSensorConfigSequence(byte sensorConfigSequence)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, sensorConfigSequence, 2);
		}

		public void SetRepeaterMode(TpmsRepeaterMode tpmsRepeaterMode)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)tpmsRepeaterMode, 3);
		}

		public void SetRepeaterVoltageLevel(TpmsRepeaterVoltageLevel voltageLevel)
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0005: Unknown result type (might be due to invalid IL or missing references)
			BitPositionValue repeaterVoltageLevelBitPosition = RepeaterVoltageLevelBitPosition;
			((BitPositionValue)(ref repeaterVoltageLevelBitPosition)).EncodeValueToBuffer((uint)voltageLevel, ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data);
		}

		public void SetRepeaterBatteryLow(bool batteryLow)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)8, batteryLow);
		}

		public void SetRepeaterPowerSource(TpmsRepeaterPowerSource powerSource)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)16, powerSource == TpmsRepeaterPowerSource.LiPoBatterySource);
		}

		public void SetRepeaterHasHardwareFault(bool hasHardwareFault)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)32, hasHardwareFault);
		}

		public void SetRepeaterCharging(bool charging)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)64, charging);
		}

		public void SetRepeaterHasBattery(bool hasBattery)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)128, hasBattery);
		}

		public LogicalDeviceTpmsStatus()
			: base(5u)
		{
		}

		public LogicalDeviceTpmsStatus(LogicalDeviceTpmsStatus originalStatus)
		{
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalStatus).Data;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(data, data.Length, false);
		}

		public override string ToString()
		{
			return String.Concat(String.Format("Device Status: {0} LearnedSensorCount: {1} VehicleConfigSequence: {2} ", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)this).ToString(), (object)LearnedSensorCount, (object)VehicleConfigSequence), String.Format("SensorConfigSequence: {0} TpmsRepeaterMode: {1} TpmsRepeaterVoltageLevel: {2} ", (object)SensorConfigSequence, (object)TpmsRepeaterMode, (object)TpmsRepeaterVoltageLevel), String.Format("RepeaterBatteryLow: {0} RepeaterPowerSource: {1} RepeaterHasHardwareFault: {2} ", (object)RepeaterBatteryLow, (object)RepeaterPowerSource, (object)RepeaterHasHardwareFault), String.Format("RepeaterCharging: {0} RepeaterHasBattery: {1}", (object)RepeaterCharging, (object)RepeaterHasBattery));
		}

		public LogicalDeviceTpmsStatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceTpmsStatusSerializable(this);
		}
	}
	public class LogicalDeviceTpmsStatusExtended : LogicalDeviceStatusPacketMutableExtended
	{
		public const int MinimumStatusPacketSize = 7;

		public const int TireIndexBitmask = 31;

		public const int GroupIdBitmask = 224;

		private const int ExtendedByteStartIndex = 0;

		private const int PressureStatusIndex = 0;

		private const int TireTempIndex = 1;

		private const int TirePressureIndex = 2;

		private const int RssiIndex = 4;

		private const int SensorDataIndex = 5;

		private const int RotationStatusIndex = 6;

		private const int SensorLowFrequencyTriggerBitmask = 4;

		private const int LowBatteryBitmask = 8;

		private const int SensorLearnedBitmask = 1;

		private const int SensorDataReceivedBitmask = 2;

		private const int SensorMissingBitmask = 4;

		private const int SensorBatteryFaultBitmask = 8;

		private const int SensorRotatingBitmask = 128;

		private const float BatteryVoltageScale = 0.1f;

		private const float BatteryVoltageOffset = 1.9f;

		private const int TirePressureNumberOfBytes = 2;

		private const float TirePressureScale = 0.025f;

		private const float PsiMultiplier = 14.50377f;

		private const int TireTempOffset = 50;

		private const int TireTempMin = -50;

		private const int TireTempMax = 205;

		private static readonly BitPositionValue TireIndexBitPosition = new BitPositionValue(31u, 0, 1);

		private static readonly BitPositionValue GroupIdBitPosition = new BitPositionValue(224u, 0, 1);

		private static readonly BitPositionValue TpmsPressureStatusBitPosition = new BitPositionValue(3u, 0, 1);

		private static readonly BitPositionValue BatteryVoltageBitPosition = new BitPositionValue(240u, 0, 1);

		private static readonly BitPositionValue TirePressureBitPosition = new BitPositionValue(65472u, 2, 2);

		private static readonly BitPositionValue TemperatureFaultBitPosition = new BitPositionValue(48u, 5, 1);

		private static readonly BitPositionValue PressureFaultBitPosition = new BitPositionValue(192u, 5, 1);

		private static readonly BitPositionValue NewSensorRxMessageCountBitPosition = new BitPositionValue(127u, 6, 1);

		public uint TireIndex
		{
			get
			{
				//IL_0000: Unknown result type (might be due to invalid IL or missing references)
				//IL_0005: Unknown result type (might be due to invalid IL or missing references)
				BitPositionValue tireIndexBitPosition = TireIndexBitPosition;
				return ((BitPositionValue)(ref tireIndexBitPosition)).DecodeValue((uint)((LogicalDeviceStatusPacketMutableExtended)this).ExtendedByte);
			}
		}

		public uint GroupId
		{
			get
			{
				//IL_0000: Unknown result type (might be due to invalid IL or missing references)
				//IL_0005: Unknown result type (might be due to invalid IL or missing references)
				BitPositionValue groupIdBitPosition = GroupIdBitPosition;
				return ((BitPositionValue)(ref groupIdBitPosition)).DecodeValue((uint)((LogicalDeviceStatusPacketMutableExtended)this).ExtendedByte);
			}
		}

		public TpmsPositionalSensorId SensorId => new TpmsPositionalSensorId((TpmsGroupId)GroupId, (byte)TireIndex);

		public TpmsPressureStatus TpmsPressureStatus => (TpmsPressureStatus)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(TpmsPressureStatusBitPosition);

		public bool SensorLowFrequencyTrigger => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)4, 0);

		public bool LowBattery => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)8, 0);

		public float BatteryVoltage => (float)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(BatteryVoltageBitPosition) * 0.1f + 1.9f;

		public int TireTempCelsius => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[1] - 50;

		public int TireTempFahrenheit => TireTempCelsius * 9 / 5 + 32;

		public float TirePressure => (float)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(TirePressureBitPosition) * 0.025f * 14.50377f;

		public sbyte Rssi => (sbyte)((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[4];

		public bool SensorLearned => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)1, 5);

		public bool SensorDataReceivedSincePowerOn => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)2, 5);

		public bool SensorMissing => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)4, 5);

		public bool SensorBatteryFault => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)8, 5);

		public TpmsTemperatureFault TpmsTemperatureFault => (TpmsTemperatureFault)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(TemperatureFaultBitPosition);

		public TpmsPressureFault TpmsPressureFault => (TpmsPressureFault)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(PressureFaultBitPosition);

		public bool SensorRotating => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)128, 6);

		public byte NewSensorRxMessageCount => (byte)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(NewSensorRxMessageCountBitPosition);

		public LogicalDeviceTpmsStatusExtended()
			: base(7u)
		{
		}

		public LogicalDeviceTpmsStatusExtended(LogicalDeviceTpmsStatusExtended originalStatus)
		{
		}

		public static LogicalDeviceTpmsStatusExtended MakeDefaultExtendedStatus()
		{
			LogicalDeviceTpmsStatusExtended logicalDeviceTpmsStatusExtended = new LogicalDeviceTpmsStatusExtended();
			byte[] array = (byte[])(object)new Byte[7];
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTpmsStatusExtended).Update(array, array.Length, false);
			return logicalDeviceTpmsStatusExtended;
		}

		public void SetTireIndex(uint tireIndex)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			BitPositionValue tireIndexBitPosition = TireIndexBitPosition;
			((LogicalDeviceStatusPacketMutableExtended)this).ExtendedByte = (byte)((BitPositionValue)(ref tireIndexBitPosition)).EncodeValue(tireIndex, (uint)((LogicalDeviceStatusPacketMutableExtended)this).ExtendedByte);
		}

		public void SetGroupId(uint groupId)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			BitPositionValue groupIdBitPosition = GroupIdBitPosition;
			((LogicalDeviceStatusPacketMutableExtended)this).ExtendedByte = (byte)((BitPositionValue)(ref groupIdBitPosition)).EncodeValue(groupId, (uint)((LogicalDeviceStatusPacketMutableExtended)this).ExtendedByte);
		}

		public void SetTpmsPressureStatus(TpmsPressureStatus pressureStatus)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)pressureStatus, TpmsPressureStatusBitPosition);
		}

		public void SetSensorLowFrequencyTrigger(bool enabled)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)4, enabled, 0);
		}

		public void SetLowBattery(bool lowBattery)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)8, lowBattery, 0);
		}

		public void SetBatteryVoltage(float batteryVoltage)
		{
			//IL_0011: Unknown result type (might be due to invalid IL or missing references)
			float num = (batteryVoltage - 1.9f) / 0.1f;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)num, BatteryVoltageBitPosition);
		}

		public void SetTireTempCelsius(int tireTempCelsius)
		{
			int num = MathCommon.Clamp(tireTempCelsius, -50, 205) + 50;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)num, 1);
		}

		public void SetTirePressure(float pressure)
		{
			//IL_0015: Unknown result type (might be due to invalid IL or missing references)
			float num = pressure / 14.50377f / 0.025f;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue(Convert.ToUInt32(num), TirePressureBitPosition);
		}

		public void SetRssi(sbyte rssi)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[4] = (byte)rssi;
		}

		public void SetSensorConfigured(bool configured)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)1, configured, 5);
		}

		public void SetSensorDataReceivedSincePowerOn(bool enabled)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)2, enabled, 5);
		}

		public void SetSensorMissing(bool missing)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)4, missing, 5);
		}

		public void SetSensorBatteryFault(bool faultDetected)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)8, faultDetected, 5);
		}

		public void SetTemperatureFault(TpmsTemperatureFault temperatureFault)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)temperatureFault, TemperatureFaultBitPosition);
		}

		public void SetPressureFault(TpmsPressureFault pressureFault)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)pressureFault, PressureFaultBitPosition);
		}

		public void SetSensorRotating(bool rotating)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)128, rotating);
		}

		public void SetNewSensorRxMessageCount(int count)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)count, NewSensorRxMessageCountBitPosition);
		}

		public override string ToString()
		{
			return String.Concat((string[])(object)new String[8]
			{
				String.Format("SensorId: {0} TpmsPressureStatus: {1} ", (object)SensorId, (object)TpmsPressureStatus),
				String.Format("SensorLowFrequencyTrigger: {0} LowBattery: {1} ", (object)SensorLowFrequencyTrigger, (object)LowBattery),
				String.Format("BatteryVoltage: {0} TireTempCelsius: {1} TireTempFahrenheit: {2} ", (object)BatteryVoltage, (object)TireTempCelsius, (object)TireTempFahrenheit),
				String.Format("TirePressure: {0} Rssi: {1} SensorLearned: {2} ", (object)TirePressure, (object)Rssi, (object)SensorLearned),
				String.Format("SensorDataReceivedSincePowerOn: {0} SensorMissing: {1} ", (object)SensorDataReceivedSincePowerOn, (object)SensorMissing),
				String.Format("SensorBatteryFault: {0} TpmsTempFault: {1} ", (object)SensorBatteryFault, (object)TpmsTemperatureFault),
				String.Format("TpmsPressureFault: {0} SensorRotating: {1} ", (object)TpmsPressureFault, (object)SensorRotating),
				String.Format("NewSensorRxMessageCount: {0} Raw Data: {1}", (object)NewSensorRxMessageCount, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)this).ToString())
			});
		}
	}
	public record LogicalDeviceTpmsStatusExtendedSerializable : LogicalDeviceStatusExtendedSerializableBase<LogicalDeviceBatteryMonitorStatusExtendedSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceTpmsStatusExtendedSerializable);
			}
		}

		[JsonProperty]
		public byte EnhancedByte
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public uint TireIndex
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public uint GroupId
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public TpmsPositionalSensorId SensorId
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public TpmsPressureStatus TpmsPressureStatus
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool SensorLowFrequencyTrigger
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool LowBattery
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public float BatteryVoltage
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public int TireTempCelsius
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public int TireTempFahrenheit
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public float TirePressure
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public sbyte Rssi
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool SensorLearned
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool SensorDataReceivedSincePowerOn
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool SensorMissing
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool SensorBatteryFault
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public TpmsTemperatureFault TpmsTemperatureFault
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public TpmsPressureFault TpmsPressureFault
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool SensorRotating
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte NewSensorRxMessageCount
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceTpmsStatusExtendedSerializable(byte enhancedByte, uint tireIndex, uint groupId, TpmsPositionalSensorId sensorId, TpmsPressureStatus tpmsPressureStatus, bool sensorLowFrequencyTrigger, bool lowBattery, float batteryVoltage, int tireTempCelsius, int tireTempFahrenheit, float tirePressure, sbyte rssi, bool sensorLearned, bool sensorDataReceivedSincePowerOn, bool sensorMissing, bool sensorBatteryFault, TpmsTemperatureFault tpmsTemperatureFault, TpmsPressureFault tpmsPressureFault, bool sensorRotating, byte newSensorRxMessageCount)
		{
			EnhancedByte = enhancedByte;
			TireIndex = tireIndex;
			GroupId = groupId;
			SensorId = sensorId;
			TpmsPressureStatus = tpmsPressureStatus;
			SensorLowFrequencyTrigger = sensorLowFrequencyTrigger;
			LowBattery = lowBattery;
			BatteryVoltage = batteryVoltage;
			TireTempCelsius = tireTempCelsius;
			TireTempFahrenheit = tireTempFahrenheit;
			TirePressure = tirePressure;
			Rssi = rssi;
			SensorLearned = sensorLearned;
			SensorDataReceivedSincePowerOn = sensorDataReceivedSincePowerOn;
			SensorMissing = sensorMissing;
			SensorBatteryFault = sensorBatteryFault;
			TpmsTemperatureFault = tpmsTemperatureFault;
			TpmsPressureFault = tpmsPressureFault;
			SensorRotating = sensorRotating;
			NewSensorRxMessageCount = newSensorRxMessageCount;
		}

		public LogicalDeviceTpmsStatusExtendedSerializable(LogicalDeviceTpmsStatusExtended tpmsStatusExtended)
			: this(((LogicalDeviceStatusPacketMutableExtended)tpmsStatusExtended).ExtendedByte, tpmsStatusExtended.TireIndex, tpmsStatusExtended.GroupId, tpmsStatusExtended.SensorId, tpmsStatusExtended.TpmsPressureStatus, tpmsStatusExtended.SensorLowFrequencyTrigger, tpmsStatusExtended.LowBattery, tpmsStatusExtended.BatteryVoltage, tpmsStatusExtended.TireTempCelsius, tpmsStatusExtended.TireTempFahrenheit, tpmsStatusExtended.TirePressure, tpmsStatusExtended.Rssi, tpmsStatusExtended.SensorLearned, tpmsStatusExtended.SensorDataReceivedSincePowerOn, tpmsStatusExtended.SensorMissing, tpmsStatusExtended.SensorBatteryFault, tpmsStatusExtended.TpmsTemperatureFault, tpmsStatusExtended.TpmsPressureFault, tpmsStatusExtended.SensorRotating, tpmsStatusExtended.NewSensorRxMessageCount)
		{
		}

		public override IReadOnlyDictionary<byte, byte[]> MakeRawDataExtended()
		{
			LogicalDeviceTpmsStatusExtended logicalDeviceTpmsStatusExtended = new LogicalDeviceTpmsStatusExtended();
			logicalDeviceTpmsStatusExtended.SetTireIndex((byte)TireIndex);
			logicalDeviceTpmsStatusExtended.SetGroupId((byte)GroupId);
			logicalDeviceTpmsStatusExtended.SetTpmsPressureStatus(TpmsPressureStatus);
			logicalDeviceTpmsStatusExtended.SetSensorLowFrequencyTrigger(SensorLowFrequencyTrigger);
			logicalDeviceTpmsStatusExtended.SetLowBattery(LowBattery);
			logicalDeviceTpmsStatusExtended.SetBatteryVoltage(BatteryVoltage);
			logicalDeviceTpmsStatusExtended.SetTireTempCelsius(TireTempCelsius);
			logicalDeviceTpmsStatusExtended.SetRssi(Rssi);
			logicalDeviceTpmsStatusExtended.SetSensorDataReceivedSincePowerOn(SensorDataReceivedSincePowerOn);
			logicalDeviceTpmsStatusExtended.SetSensorMissing(SensorMissing);
			logicalDeviceTpmsStatusExtended.SetSensorBatteryFault(SensorBatteryFault);
			logicalDeviceTpmsStatusExtended.SetSensorRotating(SensorRotating);
			logicalDeviceTpmsStatusExtended.SetNewSensorRxMessageCount(NewSensorRxMessageCount);
			logicalDeviceTpmsStatusExtended.SetSensorConfigured(SensorLearned);
			logicalDeviceTpmsStatusExtended.SetTemperatureFault(TpmsTemperatureFault);
			logicalDeviceTpmsStatusExtended.SetPressureFault(TpmsPressureFault);
			logicalDeviceTpmsStatusExtended.SetTirePressure(TirePressure);
			return (IReadOnlyDictionary<byte, byte[]>)(object)new Dictionary<byte, byte[]> { [EnhancedByte] = ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTpmsStatusExtended).CopyCurrentData() };
		}

		public static LogicalDeviceTpmsStatusExtendedSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceTpmsStatusExtended logicalDeviceTpmsStatusExtended = new LogicalDeviceTpmsStatusExtended();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTpmsStatusExtended).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTpmsStatusExtended).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTpmsStatusExtended).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTpmsStatusExtended).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTpmsStatusExtended).Update(rawData, rawData.Length, false);
			return new LogicalDeviceTpmsStatusExtendedSerializable(logicalDeviceTpmsStatusExtended);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceTpmsStatusExtendedSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusExtendedSerializableBase<LogicalDeviceBatteryMonitorStatusExtendedSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("EnhancedByte = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref EnhancedByte)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TireIndex = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<uint, UInt32>(ref TireIndex)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", GroupId = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<uint, UInt32>(ref GroupId)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", SensorId = ");
			builder.Append(((Object)SensorId/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TpmsPressureStatus = ");
			builder.Append(((Object)TpmsPressureStatus/*cast due to .constrained prefix*/).ToString());
			builder.Append(", SensorLowFrequencyTrigger = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref SensorLowFrequencyTrigger)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LowBattery = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref LowBattery)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", BatteryVoltage = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref BatteryVoltage)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TireTempCelsius = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref TireTempCelsius)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TireTempFahrenheit = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref TireTempFahrenheit)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TirePressure = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref TirePressure)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Rssi = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<sbyte, SByte>(ref Rssi)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", SensorLearned = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref SensorLearned)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", SensorDataReceivedSincePowerOn = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref SensorDataReceivedSincePowerOn)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", SensorMissing = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref SensorMissing)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", SensorBatteryFault = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref SensorBatteryFault)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TpmsTemperatureFault = ");
			builder.Append(((Object)TpmsTemperatureFault/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TpmsPressureFault = ");
			builder.Append(((Object)TpmsPressureFault/*cast due to .constrained prefix*/).ToString());
			builder.Append(", SensorRotating = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref SensorRotating)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", NewSensorRxMessageCount = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref NewSensorRxMessageCount)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return (((((((((((((((((((base.GetHashCode() * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(EnhancedByte)) * -1521134295 + EqualityComparer<uint>.Default.GetHashCode(TireIndex)) * -1521134295 + EqualityComparer<uint>.Default.GetHashCode(GroupId)) * -1521134295 + EqualityComparer<TpmsPositionalSensorId>.Default.GetHashCode(SensorId)) * -1521134295 + EqualityComparer<TpmsPressureStatus>.Default.GetHashCode(TpmsPressureStatus)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(SensorLowFrequencyTrigger)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(LowBattery)) * -1521134295 + EqualityComparer<float>.Default.GetHashCode(BatteryVoltage)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(TireTempCelsius)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(TireTempFahrenheit)) * -1521134295 + EqualityComparer<float>.Default.GetHashCode(TirePressure)) * -1521134295 + EqualityComparer<sbyte>.Default.GetHashCode(Rssi)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(SensorLearned)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(SensorDataReceivedSincePowerOn)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(SensorMissing)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(SensorBatteryFault)) * -1521134295 + EqualityComparer<TpmsTemperatureFault>.Default.GetHashCode(TpmsTemperatureFault)) * -1521134295 + EqualityComparer<TpmsPressureFault>.Default.GetHashCode(TpmsPressureFault)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(SensorRotating)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(NewSensorRxMessageCount);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusExtendedSerializableBase<LogicalDeviceBatteryMonitorStatusExtendedSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceTpmsStatusExtendedSerializable(LogicalDeviceTpmsStatusExtendedSerializable original)
			: base((LogicalDeviceStatusExtendedSerializableBase<LogicalDeviceBatteryMonitorStatusExtendedSerializable>)original)
		{
			EnhancedByte = original.EnhancedByte;
			TireIndex = original.TireIndex;
			GroupId = original.GroupId;
			SensorId = original.SensorId;
			TpmsPressureStatus = original.TpmsPressureStatus;
			SensorLowFrequencyTrigger = original.SensorLowFrequencyTrigger;
			LowBattery = original.LowBattery;
			BatteryVoltage = original.BatteryVoltage;
			TireTempCelsius = original.TireTempCelsius;
			TireTempFahrenheit = original.TireTempFahrenheit;
			TirePressure = original.TirePressure;
			Rssi = original.Rssi;
			SensorLearned = original.SensorLearned;
			SensorDataReceivedSincePowerOn = original.SensorDataReceivedSincePowerOn;
			SensorMissing = original.SensorMissing;
			SensorBatteryFault = original.SensorBatteryFault;
			TpmsTemperatureFault = original.TpmsTemperatureFault;
			TpmsPressureFault = original.TpmsPressureFault;
			SensorRotating = original.SensorRotating;
			NewSensorRxMessageCount = original.NewSensorRxMessageCount;
		}
	}
	public class TpmsException : Exception
	{
		public TpmsException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}
	}
	public class TpmsExtendedStatusHasNoDataException : TpmsException
	{
		public TpmsExtendedStatusHasNoDataException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}

		public TpmsExtendedStatusHasNoDataException(Exception? innerException = null)
			: this("Extended Status Has No Data", innerException)
		{
		}
	}
	public class TpmsTireIndexOutOfRangeException : TpmsException
	{
		public TpmsTireIndexOutOfRangeException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}

		public TpmsTireIndexOutOfRangeException(int index, int maxIndex, Exception? innerException = null)
			: this(String.Format("Tire index is out of range, current index: {0} max index: {1}", (object)index, (object)maxIndex), innerException)
		{
		}
	}
	public class TpmsInvalidGroupIdException : TpmsException
	{
		public TpmsInvalidGroupIdException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}

		public TpmsInvalidGroupIdException(TpmsGroupId id, Exception? innerException = null)
			: this(String.Format("Invalid Tpms Group Id, group id: {0}", (object)id), innerException)
		{
		}
	}
	public class TpmsTempLimitOutOfRangeException : TpmsException
	{
		public TpmsTempLimitOutOfRangeException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}

		public TpmsTempLimitOutOfRangeException(int temp, int minLimit, int maxLimit, Exception? innerException = null)
			: this(String.Format("Tpms temperature limit is out of range, temp: {0} min: {1} max: {2}", (object)temp, (object)minLimit, (object)maxLimit), innerException)
		{
		}
	}
	public class TpmsPressureLimitOutOfRangeException : TpmsException
	{
		public TpmsPressureLimitOutOfRangeException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}

		public TpmsPressureLimitOutOfRangeException(uint pressure, uint maxPressure, Exception? innerException = null)
			: this(String.Format("Tpms pressure exceeds maximum, pressure: {0} max: {1}", (object)pressure, (object)maxPressure), innerException)
		{
		}
	}
	public class TpmsInvalidVehicleTemplateException : TpmsException
	{
		public TpmsInvalidVehicleTemplateException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}

		public TpmsInvalidVehicleTemplateException(TpmsVehicleTemplate template, Exception? innerException = null)
			: this(String.Format("Tpms vehicle template is invalid, {0}", (object)template), innerException)
		{
		}
	}
	public class TpmsInvalidTiresPerAxleException : TpmsException
	{
		public TpmsInvalidTiresPerAxleException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}

		public TpmsInvalidTiresPerAxleException(uint tiresPerAxle, uint max, Exception? innerException = null)
			: this(String.Format("Tpms invalid tires per axle, tires per axle value: {0} max: {1}", (object)tiresPerAxle, (object)max), innerException)
		{
		}
	}
	public class TpmsInvalidNumberOfAxlesException : TpmsException
	{
		public TpmsInvalidNumberOfAxlesException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}

		public TpmsInvalidNumberOfAxlesException(byte numberOfAxles, byte max, Exception? innerException = null)
			: this(String.Format("Tpms invalid number of axles, number of axles: {0} max: {1}", (object)numberOfAxles, (object)max), innerException)
		{
		}
	}
	public class TpmsInvalidResponseDataException : TpmsException
	{
		public TpmsInvalidResponseDataException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}
	}
	public class TpmsBlockReadsNotSupportedException : TpmsException
	{
		public TpmsBlockReadsNotSupportedException(Exception? innerException = null)
			: base("The TPMS device source does not support block reads.", innerException)
		{
		}
	}
	public class TpmsBlockReadException : TpmsException
	{
		public TpmsBlockReadException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}
	}
	public readonly record struct TpmsPositionalSensorId : ValueType
	{
		public TpmsGroupId GroupId
		{
			[CompilerGenerated]
			get;
		}

		public byte TireIndex
		{
			[CompilerGenerated]
			get;
		}

		public TpmsPositionalSensorId(TpmsGroupId groupId, byte tireIndex)
		{
			GroupId = groupId;
			TireIndex = tireIndex;
		}

		public TpmsPositionalSensorId(byte extendedByte)
		{
			GroupId = (TpmsGroupId)((extendedByte & 0xE0) >> 5);
			TireIndex = (byte)(extendedByte & 0x1F);
		}

		public TpmsPositionalSensorId(LogicalDeviceTpmsStatusExtended extendedStatus)
			: this((TpmsGroupId)extendedStatus.GroupId, (byte)extendedStatus.TireIndex)
		{
			if (!((LogicalDeviceDataPacketMutableDoubleBuffer)extendedStatus).HasData)
			{
				throw new TpmsExtendedStatusHasNoDataException();
			}
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("TpmsPositionalSensorId");
			val.Append(" { ");
			if (PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		private bool PrintMembers(StringBuilder builder)
		{
			builder.Append("GroupId = ");
			builder.Append(((Object)GroupId/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TireIndex = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref TireIndex)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return EqualityComparer<TpmsGroupId>.Default.GetHashCode(GroupId) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(TireIndex);
		}

		[CompilerGenerated]
		public bool Equals(TpmsPositionalSensorId other)
		{
			if (EqualityComparer<TpmsGroupId>.Default.Equals(GroupId, other.GroupId))
			{
				return EqualityComparer<byte>.Default.Equals(TireIndex, other.TireIndex);
			}
			return false;
		}
	}
	public readonly record struct TpmsSensorConfiguration : ValueType
	{
		public TpmsPositionalSensorId PositionalSensorId
		{
			[CompilerGenerated]
			get;
		}

		public int HighTempLimit
		{
			[CompilerGenerated]
			get;
		}

		public int RelativeTempLimit
		{
			[CompilerGenerated]
			get;
		}

		public uint HighPressureLimit
		{
			[CompilerGenerated]
			get;
		}

		public uint LowPressureLimit
		{
			[CompilerGenerated]
			get;
		}

		public uint SensorMac
		{
			[CompilerGenerated]
			get;
		}

		public byte SensorModel
		{
			[CompilerGenerated]
			get;
		}

		public TpmsSensorConfiguration(TpmsPositionalSensorId positionalSensorId, int highTempLimit, int relativeTempLimit, uint highPressureLimit, uint lowPressureLimit, uint sensorMac, byte sensorModel)
		{
			PositionalSensorId = positionalSensorId;
			HighTempLimit = highTempLimit;
			RelativeTempLimit = relativeTempLimit;
			HighPressureLimit = highPressureLimit;
			LowPressureLimit = lowPressureLimit;
			SensorMac = sensorMac;
			SensorModel = sensorModel;
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("TpmsSensorConfiguration");
			val.Append(" { ");
			if (PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		private bool PrintMembers(StringBuilder builder)
		{
			builder.Append("PositionalSensorId = ");
			builder.Append(((Object)PositionalSensorId/*cast due to .constrained prefix*/).ToString());
			builder.Append(", HighTempLimit = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref HighTempLimit)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", RelativeTempLimit = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref RelativeTempLimit)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", HighPressureLimit = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<uint, UInt32>(ref HighPressureLimit)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LowPressureLimit = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<uint, UInt32>(ref LowPressureLimit)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", SensorMac = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<uint, UInt32>(ref SensorMac)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", SensorModel = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref SensorModel)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return (((((EqualityComparer<TpmsPositionalSensorId>.Default.GetHashCode(PositionalSensorId) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(HighTempLimit)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(RelativeTempLimit)) * -1521134295 + EqualityComparer<uint>.Default.GetHashCode(HighPressureLimit)) * -1521134295 + EqualityComparer<uint>.Default.GetHashCode(LowPressureLimit)) * -1521134295 + EqualityComparer<uint>.Default.GetHashCode(SensorMac)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(SensorModel);
		}

		[CompilerGenerated]
		public bool Equals(TpmsSensorConfiguration other)
		{
			if (EqualityComparer<TpmsPositionalSensorId>.Default.Equals(PositionalSensorId, other.PositionalSensorId) && EqualityComparer<int>.Default.Equals(HighTempLimit, other.HighTempLimit) && EqualityComparer<int>.Default.Equals(RelativeTempLimit, other.RelativeTempLimit) && EqualityComparer<uint>.Default.Equals(HighPressureLimit, other.HighPressureLimit) && EqualityComparer<uint>.Default.Equals(LowPressureLimit, other.LowPressureLimit) && EqualityComparer<uint>.Default.Equals(SensorMac, other.SensorMac))
			{
				return EqualityComparer<byte>.Default.Equals(SensorModel, other.SensorModel);
			}
			return false;
		}
	}
	public class TpmsSensorGroup : CommonDisposable
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass11_0 : Object
		{
			public TpmsGroupId groupId;

			public TpmsSensorGroup <>4__this;

			internal bool <.ctor>b__0(LogicalDeviceTpmsStatusExtended statusExtended)
			{
				return statusExtended.SensorId.GroupId == groupId;
			}

			internal void <.ctor>b__1(IChangeSet<LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId> changeSet)
			{
				//IL_000d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0012: Unknown result type (might be due to invalid IL or missing references)
				//IL_0015: Unknown result type (might be due to invalid IL or missing references)
				//IL_001a: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0051: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Expected O, but got Unknown
				//IL_001e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0020: Invalid comparison between Unknown and I4
				//IL_00ab: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b5: Expected O, but got Unknown
				IEnumerator<Change<LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId>> enumerator = ((IEnumerable<Change<LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId>>)(object)changeSet).GetEnumerator();
				try
				{
					while (((IEnumerator)enumerator).MoveNext())
					{
						Change<LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId> current = enumerator.Current;
						ChangeReason reason = current.Reason;
						if ((int)reason != 0)
						{
							if ((int)reason == 2)
							{
								((Collection<LogicalDeviceTpmsStatusExtended>)(object)<>4__this.SensorCollection).Remove(current.Current);
								((CommonNotifyPropertyChanged)current.Current).PropertyChanged -= new PropertyChangedEventHandler(<>4__this.SensorAddedOrRemoved);
								<>4__this.SensorDataChanged?.Invoke((object)<>4__this, current.Current);
							}
						}
						else
						{
							((Collection<LogicalDeviceTpmsStatusExtended>)(object)<>4__this.SensorCollection).Add(current.Current);
							((CommonNotifyPropertyChanged)current.Current).PropertyChanged += new PropertyChangedEventHandler(<>4__this.SensorAddedOrRemoved);
							<>4__this.SensorDataChanged?.Invoke((object)<>4__this, current.Current);
						}
					}
				}
				finally
				{
					if (enumerator != null)
					{
						((IDisposable)enumerator).Dispose();
					}
				}
			}
		}

		private readonly IDisposable _deviceStatusExtendedObservableCacheSubscription;

		private readonly LogicalDeviceTpms _logicalDeviceTpms;

		[CompilerGenerated]
		private EventHandler<LogicalDeviceTpmsStatusExtended> m_SensorDataChanged;

		[field: CompilerGenerated]
		public TpmsGroupId GroupId
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public ObservableCollection<LogicalDeviceTpmsStatusExtended> SensorCollection
		{
			[CompilerGenerated]
			get;
		} = new ObservableCollection<LogicalDeviceTpmsStatusExtended>();

		public event EventHandler<LogicalDeviceTpmsStatusExtended> SensorDataChanged
		{
			[CompilerGenerated]
			add
			{
				EventHandler<LogicalDeviceTpmsStatusExtended> val = this.m_SensorDataChanged;
				EventHandler<LogicalDeviceTpmsStatusExtended> val2;
				do
				{
					val2 = val;
					EventHandler<LogicalDeviceTpmsStatusExtended> val3 = (EventHandler<LogicalDeviceTpmsStatusExtended>)(object)Delegate.Combine((Delegate)(object)val2, (Delegate)(object)value);
					val = Interlocked.CompareExchange<EventHandler<LogicalDeviceTpmsStatusExtended>>(ref this.m_SensorDataChanged, val3, val2);
				}
				while (val != val2);
			}
			[CompilerGenerated]
			remove
			{
				EventHandler<LogicalDeviceTpmsStatusExtended> val = this.m_SensorDataChanged;
				EventHandler<LogicalDeviceTpmsStatusExtended> val2;
				do
				{
					val2 = val;
					EventHandler<LogicalDeviceTpmsStatusExtended> val3 = (EventHandler<LogicalDeviceTpmsStatusExtended>)(object)Delegate.Remove((Delegate)(object)val2, (Delegate)(object)value);
					val = Interlocked.CompareExchange<EventHandler<LogicalDeviceTpmsStatusExtended>>(ref this.m_SensorDataChanged, val3, val2);
				}
				while (val != val2);
			}
		}

		public TpmsSensorGroup(LogicalDeviceTpms logicalDeviceTpms, TpmsGroupId groupId)
		{
			//IL_0043: Unknown result type (might be due to invalid IL or missing references)
			<>c__DisplayClass11_0 CS$<>8__locals13 = new <>c__DisplayClass11_0
			{
				groupId = groupId
			};
			((CommonDisposable)this)..ctor();
			CS$<>8__locals13.<>4__this = this;
			if (CS$<>8__locals13.groupId == TpmsGroupId.Invalid)
			{
				throw new ArgumentOutOfRangeException("groupId", (object)CS$<>8__locals13.groupId, "Invalid GroupId");
			}
			_logicalDeviceTpms = logicalDeviceTpms;
			GroupId = CS$<>8__locals13.groupId;
			_deviceStatusExtendedObservableCacheSubscription = ObservableExtensions.Subscribe<IChangeSet<LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId>>(ObservableCacheEx.Filter<LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId>(((IConnectableCache<LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId>)(object)((LogicalDeviceWithStatusExtendedMultiplexed<LogicalDeviceTpmsStatus, LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId, LogicalDeviceTpmsCapability>)logicalDeviceTpms).DeviceStatusExtendedObservableCache).Connect((Func<LogicalDeviceTpmsStatusExtended, bool>)null, true), (Func<LogicalDeviceTpmsStatusExtended, bool>)((LogicalDeviceTpmsStatusExtended statusExtended) => statusExtended.SensorId.GroupId == CS$<>8__locals13.groupId), true), (Action<IChangeSet<LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId>>)delegate(IChangeSet<LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId> changeSet)
			{
				//IL_000d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0012: Unknown result type (might be due to invalid IL or missing references)
				//IL_0015: Unknown result type (might be due to invalid IL or missing references)
				//IL_001a: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0051: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Expected O, but got Unknown
				//IL_001e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0020: Invalid comparison between Unknown and I4
				//IL_00ab: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b5: Expected O, but got Unknown
				IEnumerator<Change<LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId>> enumerator = ((IEnumerable<Change<LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId>>)(object)changeSet).GetEnumerator();
				try
				{
					while (((IEnumerator)enumerator).MoveNext())
					{
						Change<LogicalDeviceTpmsStatusExtended, TpmsPositionalSensorId> current = enumerator.Current;
						ChangeReason reason = current.Reason;
						if ((int)reason != 0)
						{
							if ((int)reason == 2)
							{
								((Collection<LogicalDeviceTpmsStatusExtended>)(object)CS$<>8__locals13.<>4__this.SensorCollection).Remove(current.Current);
								((CommonNotifyPropertyChanged)current.Current).PropertyChanged -= new PropertyChangedEventHandler(CS$<>8__locals13.<>4__this.SensorAddedOrRemoved);
								CS$<>8__locals13.<>4__this.SensorDataChanged?.Invoke((object)CS$<>8__locals13.<>4__this, current.Current);
							}
						}
						else
						{
							((Collection<LogicalDeviceTpmsStatusExtended>)(object)CS$<>8__locals13.<>4__this.SensorCollection).Add(current.Current);
							((CommonNotifyPropertyChanged)current.Current).PropertyChanged += new PropertyChangedEventHandler(CS$<>8__locals13.<>4__this.SensorAddedOrRemoved);
							CS$<>8__locals13.<>4__this.SensorDataChanged?.Invoke((object)CS$<>8__locals13.<>4__this, current.Current);
						}
					}
				}
				finally
				{
					if (enumerator != null)
					{
						((IDisposable)enumerator).Dispose();
					}
				}
			});
		}

		private void SensorAddedOrRemoved(object sender, PropertyChangedEventArgs e)
		{
			if (sender is LogicalDeviceTpmsStatusExtended logicalDeviceTpmsStatusExtended)
			{
				this.SensorDataChanged?.Invoke((object)this, logicalDeviceTpmsStatusExtended);
			}
		}

		public override void Dispose(bool disposing)
		{
			IDisposableExtensions.TryDispose(_deviceStatusExtendedObservableCacheSubscription);
			((CommonDisposable)this).Dispose();
		}
	}
	public readonly record struct TpmsVehicleConfiguration : ValueType
	{
		public TpmsGroupId GroupId
		{
			[CompilerGenerated]
			get;
		}

		public TpmsVehicleTemplate VehicleTemplate
		{
			[CompilerGenerated]
			get;
		}

		public uint TiresPerAxle
		{
			[CompilerGenerated]
			get;
		}

		public bool HasSpare
		{
			[CompilerGenerated]
			get;
		}

		public byte NumberOfAxles
		{
			[CompilerGenerated]
			get;
		}

		public TpmsVehicleConfiguration(TpmsGroupId groupId, TpmsVehicleTemplate vehicleTemplate, uint tiresPerAxle, bool hasSpare, byte numberOfAxles)
		{
			GroupId = groupId;
			VehicleTemplate = vehicleTemplate;
			TiresPerAxle = tiresPerAxle;
			HasSpare = hasSpare;
			NumberOfAxles = numberOfAxles;
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("TpmsVehicleConfiguration");
			val.Append(" { ");
			if (PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		private bool PrintMembers(StringBuilder builder)
		{
			builder.Append("GroupId = ");
			builder.Append(((Object)GroupId/*cast due to .constrained prefix*/).ToString());
			builder.Append(", VehicleTemplate = ");
			builder.Append(((Object)VehicleTemplate/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TiresPerAxle = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<uint, UInt32>(ref TiresPerAxle)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", HasSpare = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref HasSpare)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", NumberOfAxles = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref NumberOfAxles)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return (((EqualityComparer<TpmsGroupId>.Default.GetHashCode(GroupId) * -1521134295 + EqualityComparer<TpmsVehicleTemplate>.Default.GetHashCode(VehicleTemplate)) * -1521134295 + EqualityComparer<uint>.Default.GetHashCode(TiresPerAxle)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(HasSpare)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(NumberOfAxles);
		}

		[CompilerGenerated]
		public bool Equals(TpmsVehicleConfiguration other)
		{
			if (EqualityComparer<TpmsGroupId>.Default.Equals(GroupId, other.GroupId) && EqualityComparer<TpmsVehicleTemplate>.Default.Equals(VehicleTemplate, other.VehicleTemplate) && EqualityComparer<uint>.Default.Equals(TiresPerAxle, other.TiresPerAxle) && EqualityComparer<bool>.Default.Equals(HasSpare, other.HasSpare))
			{
				return EqualityComparer<byte>.Default.Equals(NumberOfAxles, other.NumberOfAxles);
			}
			return false;
		}
	}
}
namespace OneControl.Devices.TextDevice
{
	public interface ITextDevice
	{
		string Title { get; }

		string Notes { get; }

		TimeSpan Duration { get; }

		bool IsReminder { get; }
	}
	public interface ILogicalDeviceText : ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ITextDevice
	{
	}
	public class LogicalDeviceText : LogicalDevice<LogicalDeviceCapability>, ILogicalDeviceText, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ITextDevice
	{
		public const string LogTag = "LogicalDeviceText";

		public string Title => (base.LogicalId as LogicalDeviceTextId)?.Title ?? String.Empty;

		public string Notes => (base.LogicalId as LogicalDeviceTextId)?.Notes ?? String.Empty;

		public TimeSpan Duration => (TimeSpan)(((??)(base.LogicalId as LogicalDeviceTextId)?.Duration) ?? default(TimeSpan));

		public bool IsReminder => (base.LogicalId as LogicalDeviceTextId)?.IsReminder ?? false;

		public override string DeviceName => Title;

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public override Version ProtocolVersion => new Version(1, 0);

		public LogicalDeviceText(LogicalDeviceTextId logicalDeviceId, ILogicalDeviceService deviceService)
			: base((ILogicalDeviceId)(object)logicalDeviceId, new LogicalDeviceCapability(), deviceService, false)
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_000e: Expected O, but got Unknown


		public override string ToString()
		{
			//IL_005c: Unknown result type (might be due to invalid IL or missing references)
			return String.Format("TITLE[{0}] = \"{1}\", NOTES = {2}, DURATION = {3}", (object[])(object)new Object[4]
			{
				(object)base.LogicalId.DeviceInstance,
				(Object)Title,
				(Object)((Notes.Length > 15) ? String.Concat(Notes.Substring(0, 15), "...") : Notes),
				(object)Duration
			});
		}

		public override Task<string> GetSoftwarePartNumberAsync(CancellationToken cancelToken)
		{
			return Task.FromResult<string>(String.Empty);
		}
	}
	public class LogicalDeviceTextFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (!(logicalDeviceId is LogicalDeviceTextId logicalDeviceId2))
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceText(logicalDeviceId2, service);
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public class LogicalDeviceTextId : LogicalDeviceId
	{
		public const string LogTag = "LogicalDeviceTextId";

		[JsonProperty]
		[field: CompilerGenerated]
		public string Title
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[field: CompilerGenerated]
		public string Notes
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[field: CompilerGenerated]
		public TimeSpan Duration
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[field: CompilerGenerated]
		public bool IsReminder
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public override string SerializerClass => ((MemberInfo)((Object)this).GetType()).Name;

		public LogicalDeviceTextId(string title, string notes, TimeSpan duration, bool isReminder, int deviceInstance, MAC productMacAddress)
			: this(DEVICE_TYPE.op_Implicit((byte)1), deviceInstance, FUNCTION_NAME.op_Implicit((ushort)262), 0, PRODUCT_ID.LCI_ONECONTROL_ANDROID_MOBILE_APPLICATION, productMacAddress, title, notes, duration, isReminder)
		{
		}//IL_001d: Unknown result type (might be due to invalid IL or missing references)


		[JsonConstructor]
		protected LogicalDeviceTextId(DEVICE_TYPE deviceType, int deviceInstance, FUNCTION_NAME functionName, int functionInstance, PRODUCT_ID productId, MAC productMacAddress, string title, string notes, TimeSpan duration, bool isReminder)
			: base(deviceType, deviceInstance, functionName, functionInstance, productId, productMacAddress)
		{
			//IL_0018: Unknown result type (might be due to invalid IL or missing references)
			//IL_001a: Unknown result type (might be due to invalid IL or missing references)
			Title = title;
			Duration = duration;
			Notes = notes;
			IsReminder = isReminder;
		}

		public override ILogicalDeviceId Clone()
		{
			//IL_0031: Unknown result type (might be due to invalid IL or missing references)
			return (ILogicalDeviceId)(object)new LogicalDeviceTextId(((LogicalDeviceId)this).DeviceType, ((LogicalDeviceId)this).DeviceInstance, ((LogicalDeviceId)this).FunctionName, ((LogicalDeviceId)this).FunctionInstance, ((LogicalDeviceId)this).ProductId, ((LogicalDeviceId)this).ProductMacAddress, Title, Notes, Duration, IsReminder);
		}

		static LogicalDeviceTextId()
		{
			Type declaringType = ((MemberInfo)MethodBase.GetCurrentMethod()).DeclaringType;
			if (!(declaringType == (Type)null))
			{
				TypeRegistry.Register(((MemberInfo)declaringType).Name, declaringType);
			}
		}

		public override bool Equals(object obj)
		{
			//IL_0058: Unknown result type (might be due to invalid IL or missing references)
			//IL_005e: Unknown result type (might be due to invalid IL or missing references)
			if (obj == null)
			{
				return false;
			}
			if (this == obj)
			{
				return true;
			}
			if (!((LogicalDeviceId)this).Equals(obj))
			{
				return false;
			}
			if (!(obj is LogicalDeviceTextId logicalDeviceTextId))
			{
				return false;
			}
			if (!((LogicalDeviceId)this).Equals((ILogicalDeviceId)(object)this))
			{
				return false;
			}
			if (!String.Equals(Title, logicalDeviceTextId.Title))
			{
				return false;
			}
			if (!String.Equals(Notes, logicalDeviceTextId.Notes))
			{
				return false;
			}
			if (Duration != logicalDeviceTextId.Duration)
			{
				return false;
			}
			if (IsReminder != logicalDeviceTextId.IsReminder)
			{
				return false;
			}
			return true;
		}

		public override int GetHashCode()
		{
			//IL_001d: Unknown result type (might be due to invalid IL or missing references)
			return HashCode.Hash<bool>(HashCode.Hash<TimeSpan>(HashCode.Hash<string>(HashCode.Hash<string>(((LogicalDeviceId)this).GetHashCode(), Title), Notes), Duration), IsReminder);
		}
	}
}
namespace OneControl.Devices.TemperatureSensor
{
	public interface ITemperatureSensor : IAccessoryDevice
	{
		int SensorBatteryChargePercent { get; }

		float TemperatureCelsius { get; }

		bool IsTemperatureValid { get; }

		float SensorBatteryVoltage { get; }

		bool IsSensorBatteryVoltageValid { get; }

		bool IsBatteryLow { get; }

		bool IsTemperatureHigh { get; }

		bool IsTemperatureLow { get; }

		bool IsTemperatureInRange { get; }

		int LowBatteryAlertCount { get; }

		int TemperatureHighAlertCount { get; }

		int TemperatureLowAlertCount { get; }

		int TemperatureInRangeAlertCount { get; }

		Task<Nullable<float>> TryGetTemperatureHighAlertTriggerValueAsync(TemperatureScale scale, CancellationToken cancellationToken);

		Task TrySetTemperatureHighAlertTriggerValueAsync(Nullable<float> value, TemperatureScale scale, CancellationToken cancellationToken);

		Task<Nullable<float>> TryGetTemperatureLowAlertTriggerValueAsync(TemperatureScale scale, CancellationToken cancellationToken);

		Task TrySetTemperatureLowAlertTriggerValueAsync(Nullable<float> value, TemperatureScale scale, CancellationToken cancellationToken);

		void SetTemperatureAlertTriggerCachedValues(Nullable<float> lowValue, Nullable<float> highValue, TemperatureScale scale);
	}
	public interface ILogicalDeviceTemperatureSensor : ITemperatureSensor, IAccessoryDevice, ILogicalDeviceWithStatus<LogicalDeviceTemperatureSensorStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusAlertsLocap, ILogicalDeviceAccessory
	{
		Task RequestTransitionToSleepMode(CancellationToken cancellationToken);
	}
	public interface ILogicalDeviceTemperatureSensorDirect : ILogicalDeviceTemperatureSensor, ITemperatureSensor, IAccessoryDevice, ILogicalDeviceWithStatus<LogicalDeviceTemperatureSensorStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusAlertsLocap, ILogicalDeviceAccessory, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public class LogicalDeviceTemperatureSensor : LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>, ILogicalDeviceTemperatureSensorDirect, ILogicalDeviceTemperatureSensor, ITemperatureSensor, IAccessoryDevice, ILogicalDeviceWithStatus<LogicalDeviceTemperatureSensorStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusAlertsLocap, ILogicalDeviceAccessory, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
		protected enum TemperatureSensorModeRequest : Enum
		{
			Off,
			Accessory,
			Link,
			Sleep
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetTemperatureAlertTriggerValueAsync>d__49 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<Nullable<float>> <>t__builder;

			public LogicalDeviceTemperatureSensor <>4__this;

			public Pid pid;

			public CancellationToken cancellationToken;

			public ushort alertDisabledValue;

			public TemperatureScale scale;

			private TaskAwaiter<UInt48> <>u__1;

			private void MoveNext()
			{
				//IL_013d: Expected O, but got Unknown
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				//IL_0069: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_0082: Unknown result type (might be due to invalid IL or missing references)
				//IL_0087: Unknown result type (might be due to invalid IL or missing references)
				//IL_0088: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_004b: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cc: Expected I4, but got Unknown
				//IL_0099: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00de: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0101: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Unknown result type (might be due to invalid IL or missing references)
				//IL_0162: Unknown result type (might be due to invalid IL or missing references)
				//IL_0133: Unknown result type (might be due to invalid IL or missing references)
				//IL_0138: Unknown result type (might be due to invalid IL or missing references)
				//IL_011c: Unknown result type (might be due to invalid IL or missing references)
				//IL_012b: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTemperatureSensor logicalDeviceTemperatureSensor = <>4__this;
				Nullable<float> result2;
				try
				{
					TaskAwaiter<UInt48> val;
					if (num != 0)
					{
						val = new LogicalDevicePidUInt48((ILogicalDevice)(object)logicalDeviceTemperatureSensor, PidExtension.ConvertToPid(pid), (LogicalDeviceSessionType)2, (Func<ulong, bool>)null).ReadAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<UInt48>, <TryGetTemperatureAlertTriggerValueAsync>d__49>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<UInt48>);
						num = (<>1__state = -1);
					}
					UInt48 result = val.GetResult();
					if (UInt48.op_Implicit(result) == alertDisabledValue)
					{
						result2 = default(Nullable<float>);
					}
					else
					{
						float num2 = FixedPointSignedBigEndian8X8.ToFloat((short)result);
						TemperatureScale val2 = scale;
						result2 = new Nullable<float>((int)val2 switch
						{
							0 => (float)Temperature.ConvertToScale((Decimal)num2, (TemperatureScale)1, scale, default(Nullable<double>)), 
							1 => num2, 
							2 => throw new ArgumentOutOfRangeException("scale", (object)scale, "Only Fahrenheit and Celsius are supported."), 
							_ => throw new ArgumentOutOfRangeException("scale", (object)scale, "Only Fahrenheit and Celsius are supported."), 
						});
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceTemperatureSensor";

		private const Pid PidHighTemperatureAlertThreshold = (Pid)345;

		private const Pid PidLowTemperatureAlertThreshold = (Pid)346;

		protected ILogicalDevicePidByte RequestModePid;

		public const string LowTemperatureAlertKey = "LowTemperatureAlert";

		public const string HighTemperatureAlertKey = "HighTemperatureAlert";

		public const string TemperatureInRangeAlertKey = "TemperatureInRangeAlert";

		public const string LowBatteryAlertKey = "LowBatteryAlert";

		private const int AlertsByteSize = 4;

		private const ushort LowTemperatureAlertThresholdDisabled = 32768;

		private const ushort HighTemperatureAlertThresholdDisabled = 32767;

		private UInt48 TemperatureAlertMask = UInt48.op_Implicit((ushort)65535);

		private readonly ConcurrentDictionary<string, ILogicalDeviceAlert> _alertDict = new ConcurrentDictionary<string, ILogicalDeviceAlert>();

		public override bool IsLegacyDeviceHazardous => false;

		public bool AllowAutoOfflineLogicalDeviceRemoval => false;

		public float TemperatureCelsius => ((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.TemperatureCelsius;

		public bool IsTemperatureValid => ((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.IsTemperatureValid;

		public float SensorBatteryVoltage => ((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.SensorBatteryVoltage;

		public int SensorBatteryChargePercent => ((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.BatteryChargePercent;

		public bool IsSensorBatteryVoltageValid
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus).HasData)
				{
					return ((LogicalDevice<LogicalDeviceTemperatureSensorCapability>)(object)this).DeviceCapability.IsCoinCellBatterySupported;
				}
				return false;
			}
		}

		public bool IsBatteryLow => ((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.IsBatteryLow;

		public bool IsTemperatureHigh => ((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.IsTemperatureHigh;

		public bool IsTemperatureLow => ((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.IsTemperatureLow;

		public bool IsTemperatureInRange => ((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.IsTemperatureInRange;

		public int LowBatteryAlertCount => ((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.LowBatteryAlertCount;

		public int TemperatureHighAlertCount => ((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.TemperatureHighAlertCount;

		public int TemperatureLowAlertCount => ((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.TemperatureLowAlertCount;

		public int TemperatureInRangeAlertCount => ((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.TemperatureInRangeAlertCount;

		public bool IsAccessoryGatewaySupported => true;

		public IEnumerable<ILogicalDeviceAlert> Alerts => (IEnumerable<ILogicalDeviceAlert>)(object)_alertDict.Values;

		public LogicalDeviceTemperatureSensor(ILogicalDeviceId logicalDeviceId, LogicalDeviceTemperatureSensorCapability capability, ILogicalDeviceService deviceService = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceTemperatureSensorStatus(), capability, deviceService, isFunctionClassChangeable)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0033: Unknown result type (might be due to invalid IL or missing references)
			//IL_003d: Expected O, but got Unknown
			//IL_0046: Unknown result type (might be due to invalid IL or missing references)
			//IL_004c: Unknown result type (might be due to invalid IL or missing references)
			//IL_005b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0061: Unknown result type (might be due to invalid IL or missing references)
			//IL_0070: Unknown result type (might be due to invalid IL or missing references)
			//IL_0076: Unknown result type (might be due to invalid IL or missing references)
			//IL_0085: Unknown result type (might be due to invalid IL or missing references)
			//IL_008b: Unknown result type (might be due to invalid IL or missing references)
			RequestModePid = (ILogicalDevicePidByte)new LogicalDevicePidByte((ILogicalDevice)(object)this, PID.ACC_REQUEST_MODE, (LogicalDeviceSessionType)2);
			UpdateAlert("LowTemperatureAlert", isActive: false, default(Nullable<int>));
			UpdateAlert("HighTemperatureAlert", isActive: false, default(Nullable<int>));
			UpdateAlert("TemperatureInRangeAlert", isActive: false, default(Nullable<int>));
			UpdateAlert("LowBatteryAlert", isActive: false, default(Nullable<int>));
		}

		public override void OnDeviceStatusChanged()
		{
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0020: Expected O, but got Unknown
			//IL_003d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0047: Expected O, but got Unknown
			//IL_0064: Unknown result type (might be due to invalid IL or missing references)
			//IL_006e: Expected O, but got Unknown
			//IL_008b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0095: Expected O, but got Unknown
			//IL_0095: Unknown result type (might be due to invalid IL or missing references)
			//IL_009a: Unknown result type (might be due to invalid IL or missing references)
			base.OnDeviceStatusChanged();
			List<Action> obj = new List<Action>();
			int num = 0;
			obj.Insert(num, (Action)([CompilerGenerated] () =>
			{
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				UpdateAlert("LowTemperatureAlert", ((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.IsTemperatureLow, new Nullable<int>(((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.TemperatureLowAlertCount));
			}));
			num++;
			obj.Insert(((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.IsTemperatureHigh ? num : 0, (Action)([CompilerGenerated] () =>
			{
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				UpdateAlert("HighTemperatureAlert", ((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.IsTemperatureHigh, new Nullable<int>(((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.TemperatureHighAlertCount));
			}));
			num++;
			obj.Insert(((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.IsTemperatureInRange ? num : 0, (Action)([CompilerGenerated] () =>
			{
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				UpdateAlert("TemperatureInRangeAlert", ((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.IsTemperatureInRange, new Nullable<int>(((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.TemperatureInRangeAlertCount));
			}));
			num++;
			obj.Insert(((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.IsBatteryLow ? num : 0, (Action)([CompilerGenerated] () =>
			{
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				UpdateAlert("LowBatteryAlert", ((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.IsBatteryLow, new Nullable<int>(((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus.LowBatteryAlertCount));
			}));
			Enumerator<Action> enumerator = obj.GetEnumerator();
			try
			{
				while (enumerator.MoveNext())
				{
					enumerator.Current.Invoke();
				}
			}
			finally
			{
				((IDisposable)enumerator/*cast due to .constrained prefix*/).Dispose();
			}
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("TemperatureCelsius", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsTemperatureValid", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("SensorBatteryVoltage", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsSensorBatteryVoltageValid", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("SensorBatteryChargePercent", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsBatteryLow", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsTemperatureHigh", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsTemperatureLow", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsTemperatureInRange", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("LowBatteryAlertCount", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("TemperatureHighAlertCount", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("TemperatureLowAlertCount", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("TemperatureInRangeAlertCount", true);
		}

		public bool UpdateDeviceStatusAlerts(byte[] alertData)
		{
			//IL_0114: Expected O, but got Unknown
			//IL_002b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0066: Unknown result type (might be due to invalid IL or missing references)
			//IL_004a: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
			try
			{
				int num = ((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus).Data.Length;
				int num2 = alertData.Length;
				if (num2 != 4)
				{
					throw new ArgumentException(String.Format("{0} is expected to be {1} bytes in length.", (object)"alertData", (object)4));
				}
				if (num < num2)
				{
					throw new ArgumentException(String.Format("{0} is expected to be larger than {1} bytes in length.", (object)"Data", (object)4));
				}
				ArraySegment<byte> val = default(ArraySegment<byte>);
				val..ctor(((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus).Data, num - num2, num2);
				if (Enumerable.SequenceEqual<byte>((IEnumerable<byte>)(object)val, (IEnumerable<byte>)(object)alertData))
				{
					TaggedLog.Information("LogicalDeviceTemperatureSensor", String.Format("{0} - Temperature Sensor UUID background advertisement found with the values: {1}. These values match the last scan and will be ignored.", (object)this, (object)ArrayExtension.DebugDump((IReadOnlyList<byte>)(object)alertData, 0, alertData.Length, " ", false)), Array.Empty<object>());
					return false;
				}
				for (int i = 1; i <= num2; i++)
				{
					((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DeviceStatus).Data[num - i] = alertData[num2 - i];
				}
				TaggedLog.Information("LogicalDeviceTemperatureSensor", String.Format("{0} - Alert information in the Status changed from {1} to {2}", (object)this, (object)ArrayExtension.DebugDump((IReadOnlyList<byte>)(object)val, 0, num2, " ", false), (object)ArrayExtension.DebugDump((IReadOnlyList<byte>)(object)alertData, 0, alertData.Length, " ", false)), Array.Empty<object>());
				((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).OnDeviceStatusChanged();
				return true;
			}
			catch (Exception ex)
			{
				Exception ex2 = ex;
				TaggedLog.Error("LogicalDeviceTemperatureSensor", String.Format("{0} - Exception updating alert status {1}: {2}", (object)this, (object)ex2, (object)ex2.Message), Array.Empty<object>());
				return false;
			}
		}

		public virtual Task<Nullable<float>> TryGetTemperatureHighAlertTriggerValueAsync(TemperatureScale scale, CancellationToken cancellationToken)
		{
			//IL_000b: Unknown result type (might be due to invalid IL or missing references)
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			return TryGetTemperatureAlertTriggerValueAsync((Pid)345, 32767, scale, cancellationToken);
		}

		public virtual Task<Nullable<float>> TryGetTemperatureLowAlertTriggerValueAsync(TemperatureScale scale, CancellationToken cancellationToken)
		{
			//IL_000b: Unknown result type (might be due to invalid IL or missing references)
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			return TryGetTemperatureAlertTriggerValueAsync((Pid)346, 32768, scale, cancellationToken);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task<Nullable<float>> TryGetTemperatureAlertTriggerValueAsync(Pid pid, ushort alertDisabledValue, TemperatureScale scale, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0030: Unknown result type (might be due to invalid IL or missing references)
			<TryGetTemperatureAlertTriggerValueAsync>d__49 <TryGetTemperatureAlertTriggerValueAsync>d__ = default(<TryGetTemperatureAlertTriggerValueAsync>d__49);
			<TryGetTemperatureAlertTriggerValueAsync>d__.<>t__builder = AsyncTaskMethodBuilder<Nullable<float>>.Create();
			<TryGetTemperatureAlertTriggerValueAsync>d__.<>4__this = this;
			<TryGetTemperatureAlertTriggerValueAsync>d__.pid = pid;
			<TryGetTemperatureAlertTriggerValueAsync>d__.alertDisabledValue = alertDisabledValue;
			<TryGetTemperatureAlertTriggerValueAsync>d__.scale = scale;
			<TryGetTemperatureAlertTriggerValueAsync>d__.cancellationToken = cancellationToken;
			<TryGetTemperatureAlertTriggerValueAsync>d__.<>1__state = -1;
			<TryGetTemperatureAlertTriggerValueAsync>d__.<>t__builder.Start<<TryGetTemperatureAlertTriggerValueAsync>d__49>(ref <TryGetTemperatureAlertTriggerValueAsync>d__);
			return <TryGetTemperatureAlertTriggerValueAsync>d__.<>t__builder.Task;
		}

		public virtual Task TrySetTemperatureHighAlertTriggerValueAsync(Nullable<float> value, TemperatureScale scale, CancellationToken cancellationToken)
		{
			//IL_000b: Unknown result type (might be due to invalid IL or missing references)
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			return TrySetTemperatureAlertTriggerValueAsync((Pid)345, 32767, value, scale, cancellationToken);
		}

		public virtual Task TrySetTemperatureLowAlertTriggerValueAsync(Nullable<float> value, TemperatureScale scale, CancellationToken cancellationToken)
		{
			//IL_000b: Unknown result type (might be due to invalid IL or missing references)
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			return TrySetTemperatureAlertTriggerValueAsync((Pid)346, 32768, value, scale, cancellationToken);
		}

		private Task TrySetTemperatureAlertTriggerValueAsync(Pid pid, ushort alertDisabledValue, Nullable<float> value, TemperatureScale scale, CancellationToken cancellationToken)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0009: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Expected O, but got Unknown
			//IL_00b4: Unknown result type (might be due to invalid IL or missing references)
			//IL_00b9: Unknown result type (might be due to invalid IL or missing references)
			//IL_001b: Unknown result type (might be due to invalid IL or missing references)
			//IL_002e: Expected I4, but got Unknown
			//IL_00bb: Unknown result type (might be due to invalid IL or missing references)
			//IL_00bc: Unknown result type (might be due to invalid IL or missing references)
			//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
			//IL_0037: Unknown result type (might be due to invalid IL or missing references)
			//IL_003c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0041: Unknown result type (might be due to invalid IL or missing references)
			//IL_0047: Unknown result type (might be due to invalid IL or missing references)
			//IL_0049: Unknown result type (might be due to invalid IL or missing references)
			//IL_0054: Unknown result type (might be due to invalid IL or missing references)
			//IL_0059: Unknown result type (might be due to invalid IL or missing references)
			//IL_005d: Unknown result type (might be due to invalid IL or missing references)
			//IL_005e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0067: Unknown result type (might be due to invalid IL or missing references)
			//IL_0073: Unknown result type (might be due to invalid IL or missing references)
			//IL_014f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0155: Unknown result type (might be due to invalid IL or missing references)
			//IL_015b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0171: Unknown result type (might be due to invalid IL or missing references)
			//IL_0172: Unknown result type (might be due to invalid IL or missing references)
			//IL_00cb: Unknown result type (might be due to invalid IL or missing references)
			//IL_00cc: Unknown result type (might be due to invalid IL or missing references)
			//IL_0090: Unknown result type (might be due to invalid IL or missing references)
			//IL_0092: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a0: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ab: Unknown result type (might be due to invalid IL or missing references)
			//IL_00b0: Unknown result type (might be due to invalid IL or missing references)
			//IL_007e: Unknown result type (might be due to invalid IL or missing references)
			//IL_008a: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e5: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ef: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
			//IL_00df: Unknown result type (might be due to invalid IL or missing references)
			//IL_00f4: Unknown result type (might be due to invalid IL or missing references)
			//IL_00f6: Unknown result type (might be due to invalid IL or missing references)
			//IL_011d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0123: Unknown result type (might be due to invalid IL or missing references)
			//IL_0129: Unknown result type (might be due to invalid IL or missing references)
			LogicalDevicePidUInt48 val = new LogicalDevicePidUInt48((ILogicalDevice)(object)this, PidExtension.ConvertToPid(pid), (LogicalDeviceSessionType)2, (Func<ulong, bool>)null);
			UInt48 val2 = ((!value.HasValue) ? UInt48.op_Implicit(alertDisabledValue) : ((UInt48)FixedPointSignedBigEndian8X8.ToFixedPoint(((Nullable<float>)((int)scale switch
			{
				0 => new Nullable<float>((float)Temperature.ConvertToScale((Decimal)value.Value, scale, (TemperatureScale)1, default(Nullable<double>))), 
				1 => value, 
				2 => throw new ArgumentOutOfRangeException("scale", (object)scale, "Only Fahrenheit and Celsius are supported."), 
				_ => throw new ArgumentOutOfRangeException("scale", (object)scale, "Only Fahrenheit and Celsius are supported."), 
			})).Value) & TemperatureAlertMask));
			Nullable<UInt48> cachedPidRawValue = ((LogicalDevice<LogicalDeviceTemperatureSensorCapability>)(object)this).GetCachedPidRawValue(pid);
			if (cachedPidRawValue.HasValue)
			{
				Nullable<UInt48> val3 = cachedPidRawValue;
				Nullable<long> val4 = (val3.HasValue ? new Nullable<long>(UInt48.op_Implicit(val3.GetValueOrDefault())) : default(Nullable<long>));
				long num = UInt48.op_Implicit(val2);
				if ((val4.GetValueOrDefault() == num) & val4.HasValue)
				{
					TaggedLog.Debug("LogicalDeviceTemperatureSensor", String.Format("Pid Write for {0} ignored as matches current cached value 0x{1:X}({2})", (object)pid, (object)val2, (object)value), Array.Empty<object>());
					return (Task)(object)Task.FromResult<bool>(false);
				}
			}
			TaggedLog.Debug("LogicalDeviceTemperatureSensor", String.Format("Pid Write for {0} called with 0x{1:X}({2})", (object)pid, (object)val2, (object)value), Array.Empty<object>());
			return val.WriteAsync(val2, cancellationToken);
		}

		public void SetTemperatureAlertTriggerCachedValues(Nullable<float> lowValue, Nullable<float> highValue, TemperatureScale scale)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0013: Unknown result type (might be due to invalid IL or missing references)
			//IL_0014: Unknown result type (might be due to invalid IL or missing references)
			SetTemperatureAlertTriggerCachedValue(lowValue, scale, (Pid)346, 32768);
			SetTemperatureAlertTriggerCachedValue(highValue, scale, (Pid)345, 32767);
		}

		private void SetTemperatureAlertTriggerCachedValue(Nullable<float> alertThreshold, TemperatureScale scale, Pid alertThresholdPid, ushort alertDisabledValue)
		{
			//IL_0018: Unknown result type (might be due to invalid IL or missing references)
			//IL_002a: Expected I4, but got Unknown
			//IL_000a: Unknown result type (might be due to invalid IL or missing references)
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0033: Unknown result type (might be due to invalid IL or missing references)
			//IL_0038: Unknown result type (might be due to invalid IL or missing references)
			//IL_003c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0042: Unknown result type (might be due to invalid IL or missing references)
			//IL_0043: Unknown result type (might be due to invalid IL or missing references)
			//IL_004e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0053: Unknown result type (might be due to invalid IL or missing references)
			//IL_0056: Unknown result type (might be due to invalid IL or missing references)
			//IL_0057: Unknown result type (might be due to invalid IL or missing references)
			//IL_005f: Unknown result type (might be due to invalid IL or missing references)
			//IL_006a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0086: Unknown result type (might be due to invalid IL or missing references)
			//IL_0087: Unknown result type (might be due to invalid IL or missing references)
			//IL_0097: Unknown result type (might be due to invalid IL or missing references)
			//IL_0099: Unknown result type (might be due to invalid IL or missing references)
			//IL_0075: Unknown result type (might be due to invalid IL or missing references)
			//IL_0080: Unknown result type (might be due to invalid IL or missing references)
			if (!alertThreshold.HasValue)
			{
				((LogicalDevice<LogicalDeviceTemperatureSensorCapability>)(object)this).SetCachedPidRawValue(alertThresholdPid, UInt48.op_Implicit(alertDisabledValue));
				return;
			}
			short num = FixedPointSignedBigEndian8X8.ToFixedPoint(((Nullable<float>)((int)scale switch
			{
				0 => new Nullable<float>((float)Temperature.ConvertToScale((Decimal)alertThreshold.Value, scale, (TemperatureScale)1, default(Nullable<double>))), 
				1 => alertThreshold, 
				2 => throw new ArgumentOutOfRangeException("scale", (object)scale, "Only Fahrenheit and Celsius are supported."), 
				_ => throw new ArgumentOutOfRangeException("scale", (object)scale, "Only Fahrenheit and Celsius are supported."), 
			})).Value);
			((LogicalDevice<LogicalDeviceTemperatureSensorCapability>)(object)this).SetCachedPidRawValue(alertThresholdPid, (UInt48)num);
		}

		public void UpdateAlert(string alertName, bool isActive, Nullable<int> count)
		{
			//IL_0048: Unknown result type (might be due to invalid IL or missing references)
			//IL_0011: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0068: Unknown result type (might be due to invalid IL or missing references)
			//IL_0058: Unknown result type (might be due to invalid IL or missing references)
			//IL_0059: Unknown result type (might be due to invalid IL or missing references)
			//IL_0063: Expected O, but got Unknown
			//IL_002a: Unknown result type (might be due to invalid IL or missing references)
			//IL_003a: Unknown result type (might be due to invalid IL or missing references)
			//IL_003b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0045: Expected O, but got Unknown
			ILogicalDeviceAlert val = default(ILogicalDeviceAlert);
			if (_alertDict.TryGetValue(alertName, ref val))
			{
				if (!val.Count.HasValue && count.HasValue && (int)((LogicalDevice<LogicalDeviceTemperatureSensorCapability>)(object)this).ActiveConnection == 0)
				{
					_alertDict.TryAdd(alertName, (ILogicalDeviceAlert)new LogicalDeviceAlert(alertName, isActive, count));
					return;
				}
			}
			else if ((int)((LogicalDevice<LogicalDeviceTemperatureSensorCapability>)(object)this).ActiveConnection == 0)
			{
				_alertDict.TryAdd(alertName, (ILogicalDeviceAlert)new LogicalDeviceAlert(alertName, isActive, count));
				return;
			}
			base.UpdateAlertDefaultImpl(alertName, isActive, count, _alertDict);
		}

		public void UpdateAlert(byte alertId, byte rawData)
		{
			TaggedLog.Information("LogicalDeviceTemperatureSensor", "UpdateAlert(byte, byte) is not supported for this device", Array.Empty<object>());
		}

		public virtual Task RequestTransitionToSleepMode(CancellationToken cancellationToken)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			return RequestModePid.WriteByteAsync((byte)3, cancellationToken);
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<LogicalDeviceTemperatureSensorCapability>)(object)this).LastReceivedNetworkStatus;
		}
	}
	[Flags]
	public enum TemperatureSensorSupportedCapabilities : Enum
	{
		None = 0,
		CoinCellBattery = 1,
		TemperatureHighAlert = 2,
		TemperatureLowAlert = 4,
		BatteryAlert = 8,
		TemperatureInRangeAlert = 0x10,
		BatteryCapacityReporting = 0x20,
		ValidFlags = 0x3F
	}
	public interface ILogicalDeviceTemperatureSensorCapability : ILogicalDeviceCapability, INotifyPropertyChanged
	{
		bool IsCoinCellBatterySupported { get; }

		bool IsHighTemperatureAlertSupported { get; }

		bool IsLowTemperatureAlertSupported { get; }

		bool IsLowBatteryAlertSupported { get; }

		bool IsTemperatureInRangeAlertSupported { get; }

		bool IsBatteryCapacityReportingSupported { get; }
	}
	public class LogicalDeviceTemperatureSensorCapability : LogicalDeviceCapability, ILogicalDeviceTemperatureSensorCapability, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		public bool IsCoinCellBatterySupported => ((Enum)(object)(TemperatureSensorSupportedCapabilities)base.RawValue).HasFlag((Enum)(object)TemperatureSensorSupportedCapabilities.CoinCellBattery);

		public bool IsHighTemperatureAlertSupported => ((Enum)(object)(TemperatureSensorSupportedCapabilities)base.RawValue).HasFlag((Enum)(object)TemperatureSensorSupportedCapabilities.TemperatureHighAlert);

		public bool IsLowTemperatureAlertSupported => ((Enum)(object)(TemperatureSensorSupportedCapabilities)base.RawValue).HasFlag((Enum)(object)TemperatureSensorSupportedCapabilities.TemperatureLowAlert);

		public bool IsLowBatteryAlertSupported => ((Enum)(object)(TemperatureSensorSupportedCapabilities)base.RawValue).HasFlag((Enum)(object)TemperatureSensorSupportedCapabilities.BatteryAlert);

		public bool IsTemperatureInRangeAlertSupported => ((Enum)(object)(TemperatureSensorSupportedCapabilities)base.RawValue).HasFlag((Enum)(object)TemperatureSensorSupportedCapabilities.TemperatureInRangeAlert);

		public bool IsBatteryCapacityReportingSupported => ((Enum)(object)(TemperatureSensorSupportedCapabilities)base.RawValue).HasFlag((Enum)(object)TemperatureSensorSupportedCapabilities.BatteryCapacityReporting);

		public LogicalDeviceTemperatureSensorCapability(TemperatureSensorSupportedCapabilities capabilityFlags)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(new Nullable<byte>((byte)capabilityFlags));
		}

		public LogicalDeviceTemperatureSensorCapability(Nullable<byte> rawCapabilities)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(rawCapabilities);
		}

		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsCoinCellBatterySupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsHighTemperatureAlertSupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsLowTemperatureAlertSupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsLowBatteryAlertSupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsTemperatureInRangeAlertSupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsBatteryCapacityReportingSupported");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}
	}
	public class LogicalDeviceTemperatureSensorFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 25)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceTemperatureSensor(logicalDeviceId, new LogicalDeviceTemperatureSensorCapability(rawCapability), service);
		}
	}
	public class LogicalDeviceTemperatureSensorSim : LogicalDeviceTemperatureSensor, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SimulatorAsync>d__30 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceTemperatureSensorSim <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_01cb: Expected O, but got Unknown
				//IL_0088: Unknown result type (might be due to invalid IL or missing references)
				//IL_008d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0094: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fa: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ff: Unknown result type (might be due to invalid IL or missing references)
				//IL_0106: Unknown result type (might be due to invalid IL or missing references)
				//IL_016c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0171: Unknown result type (might be due to invalid IL or missing references)
				//IL_0178: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bd: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cc: Unknown result type (might be due to invalid IL or missing references)
				//IL_012f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0139: Unknown result type (might be due to invalid IL or missing references)
				//IL_013e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0152: Unknown result type (might be due to invalid IL or missing references)
				//IL_0153: Unknown result type (might be due to invalid IL or missing references)
				//IL_0026: Unknown result type (might be due to invalid IL or missing references)
				//IL_002c: Invalid comparison between Unknown and I4
				//IL_004b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTemperatureSensorSim logicalDeviceTemperatureSensorSim = <>4__this;
				try
				{
					TaskAwaiter<bool> val;
					switch (num)
					{
					case 0:
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_00a3;
					case 1:
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_0115;
					case 2:
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_0187;
					default:
						{
							while (!((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
							{
								if ((int)((LogicalDevice<LogicalDeviceTemperatureSensorCapability>)(object)logicalDeviceTemperatureSensorSim).ActiveConnection != 1)
								{
									continue;
								}
								((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTemperatureSensorSim._simStatus).Update(logicalDeviceTemperatureSensorSim._statusData, 8, false);
								val = TaskExtension.TryDelay(3000, cancellationToken).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 0);
									<>u__1 = val;
									((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SimulatorAsync>d__30>(ref val, ref this);
									return;
								}
								goto IL_00a3;
							}
							break;
						}
						IL_00a3:
						val.GetResult();
						logicalDeviceTemperatureSensorSim.UpdateTemperature(logicalDeviceTemperatureSensorSim._simStatus);
						val = TaskExtension.TryDelay(250, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SimulatorAsync>d__30>(ref val, ref this);
							return;
						}
						goto IL_0115;
						IL_0187:
						val.GetResult();
						logicalDeviceTemperatureSensorSim.UpdateBatteryChargePercentage(logicalDeviceTemperatureSensorSim._simStatus);
						((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)logicalDeviceTemperatureSensorSim).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTemperatureSensorSim._simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTemperatureSensorSim._simStatus).Size);
						goto default;
						IL_0115:
						val.GetResult();
						logicalDeviceTemperatureSensorSim.UpdateVoltage(logicalDeviceTemperatureSensorSim._simStatus);
						val = TaskExtension.TryDelay(250, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SimulatorAsync>d__30>(ref val, ref this);
							return;
						}
						goto IL_0187;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetTemperatureHighAlertTriggerValueAsync>d__34 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<Nullable<float>> <>t__builder;

			public CancellationToken cancellationToken;

			public LogicalDeviceTemperatureSensorSim <>4__this;

			public TemperatureScale scale;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_012a: Expected O, but got Unknown
				//IL_005f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_002c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				//IL_009f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b9: Expected I4, but got Unknown
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bd: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fd: Unknown result type (might be due to invalid IL or missing references)
				//IL_014f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0120: Unknown result type (might be due to invalid IL or missing references)
				//IL_0125: Unknown result type (might be due to invalid IL or missing references)
				//IL_0109: Unknown result type (might be due to invalid IL or missing references)
				//IL_0118: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTemperatureSensorSim logicalDeviceTemperatureSensorSim = <>4__this;
				Nullable<float> result;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
						val = Task.Delay(1500, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <TryGetTemperatureHighAlertTriggerValueAsync>d__34>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
					if (logicalDeviceTemperatureSensorSim.IsTemperatureHighAlertTriggerDisabled)
					{
						result = default(Nullable<float>);
					}
					else
					{
						float temperatureHighAlertTriggerValueCelsius = logicalDeviceTemperatureSensorSim.TemperatureHighAlertTriggerValueCelsius;
						TemperatureScale val2 = scale;
						result = new Nullable<float>((int)val2 switch
						{
							0 => (float)Temperature.ConvertToScale((Decimal)temperatureHighAlertTriggerValueCelsius, (TemperatureScale)1, scale, default(Nullable<double>)), 
							1 => temperatureHighAlertTriggerValueCelsius, 
							2 => throw new ArgumentOutOfRangeException("scale", (object)scale, "Only Fahrenheit and Celsius are supported."), 
							_ => throw new ArgumentOutOfRangeException("scale", (object)scale, "Only Fahrenheit and Celsius are supported."), 
						});
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetTemperatureLowAlertTriggerValueAsync>d__35 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<Nullable<float>> <>t__builder;

			public CancellationToken cancellationToken;

			public LogicalDeviceTemperatureSensorSim <>4__this;

			public TemperatureScale scale;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_012a: Expected O, but got Unknown
				//IL_005f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_002c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				//IL_009f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b9: Expected I4, but got Unknown
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bd: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fd: Unknown result type (might be due to invalid IL or missing references)
				//IL_014f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0120: Unknown result type (might be due to invalid IL or missing references)
				//IL_0125: Unknown result type (might be due to invalid IL or missing references)
				//IL_0109: Unknown result type (might be due to invalid IL or missing references)
				//IL_0118: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTemperatureSensorSim logicalDeviceTemperatureSensorSim = <>4__this;
				Nullable<float> result;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
						val = Task.Delay(1500, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <TryGetTemperatureLowAlertTriggerValueAsync>d__35>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
					if (logicalDeviceTemperatureSensorSim.IsTemperatureLowAlertTriggerDisabled)
					{
						result = default(Nullable<float>);
					}
					else
					{
						float temperatureLowAlertTriggerValueCelsius = logicalDeviceTemperatureSensorSim.TemperatureLowAlertTriggerValueCelsius;
						TemperatureScale val2 = scale;
						result = new Nullable<float>((int)val2 switch
						{
							0 => (float)Temperature.ConvertToScale((Decimal)temperatureLowAlertTriggerValueCelsius, (TemperatureScale)1, scale, default(Nullable<double>)), 
							1 => temperatureLowAlertTriggerValueCelsius, 
							2 => throw new ArgumentOutOfRangeException("scale", (object)scale, "Only Fahrenheit and Celsius are supported."), 
							_ => throw new ArgumentOutOfRangeException("scale", (object)scale, "Only Fahrenheit and Celsius are supported."), 
						});
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TrySetTemperatureHighAlertTriggerValueAsync>d__36 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public CancellationToken cancellationToken;

			public Nullable<float> value;

			public LogicalDeviceTemperatureSensorSim <>4__this;

			public TemperatureScale scale;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0142: Expected O, but got Unknown
				//IL_005f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_002c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bc: Expected I4, but got Unknown
				//IL_00c9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cf: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_00df: Unknown result type (might be due to invalid IL or missing references)
				//IL_0104: Unknown result type (might be due to invalid IL or missing references)
				//IL_0113: Unknown result type (might be due to invalid IL or missing references)
				//IL_011f: Unknown result type (might be due to invalid IL or missing references)
				//IL_012e: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTemperatureSensorSim logicalDeviceTemperatureSensorSim = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
						val = Task.Delay(1500, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <TrySetTemperatureHighAlertTriggerValueAsync>d__36>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
					if (!value.HasValue)
					{
						logicalDeviceTemperatureSensorSim.IsTemperatureHighAlertTriggerDisabled = true;
					}
					else
					{
						logicalDeviceTemperatureSensorSim.IsTemperatureHighAlertTriggerDisabled = false;
						TemperatureScale val2 = scale;
						logicalDeviceTemperatureSensorSim.TemperatureHighAlertTriggerValueCelsius = (int)val2 switch
						{
							0 => (float)Temperature.ConvertToScale((Decimal)value.Value, scale, (TemperatureScale)1, default(Nullable<double>)), 
							1 => value.Value, 
							2 => throw new ArgumentOutOfRangeException("scale", (object)scale, "Only Fahrenheit and Celsius are supported."), 
							_ => throw new ArgumentOutOfRangeException("scale", (object)scale, "Only Fahrenheit and Celsius are supported."), 
						};
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TrySetTemperatureLowAlertTriggerValueAsync>d__37 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public CancellationToken cancellationToken;

			public Nullable<float> value;

			public LogicalDeviceTemperatureSensorSim <>4__this;

			public TemperatureScale scale;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0142: Expected O, but got Unknown
				//IL_005f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_002c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bc: Expected I4, but got Unknown
				//IL_00c9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cf: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_00df: Unknown result type (might be due to invalid IL or missing references)
				//IL_0104: Unknown result type (might be due to invalid IL or missing references)
				//IL_0113: Unknown result type (might be due to invalid IL or missing references)
				//IL_011f: Unknown result type (might be due to invalid IL or missing references)
				//IL_012e: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTemperatureSensorSim logicalDeviceTemperatureSensorSim = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
						val = Task.Delay(1500, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <TrySetTemperatureLowAlertTriggerValueAsync>d__37>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
					if (!value.HasValue)
					{
						logicalDeviceTemperatureSensorSim.IsTemperatureLowAlertTriggerDisabled = true;
					}
					else
					{
						logicalDeviceTemperatureSensorSim.IsTemperatureLowAlertTriggerDisabled = false;
						TemperatureScale val2 = scale;
						logicalDeviceTemperatureSensorSim.TemperatureLowAlertTriggerValueCelsius = (int)val2 switch
						{
							0 => (float)Temperature.ConvertToScale((Decimal)value.Value, scale, (TemperatureScale)1, default(Nullable<double>)), 
							1 => value.Value, 
							2 => throw new ArgumentOutOfRangeException("scale", (object)scale, "Only Fahrenheit and Celsius are supported."), 
							_ => throw new ArgumentOutOfRangeException("scale", (object)scale, "Only Fahrenheit and Celsius are supported."), 
						};
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const string LogTag = "LogicalDeviceTemperatureSensorSim";

		private const int TickIntervalMs = 3000;

		private const int TickIntervalDelayMs = 250;

		private const int StatusLength = 8;

		private const int FlagsIndex = 4;

		private const float TempHighLimit = 24f;

		private const float TempLowLimit = 18f;

		private const float BatteryHighLimit = 3f;

		private const float BatteryLowLimit = 0.1f;

		private const int BatteryPercentHighLimit = 100;

		private const int BatteryPercentLowLimit = 0;

		private readonly LogicalDeviceTemperatureSensorStatus _simStatus = new LogicalDeviceTemperatureSensorStatus();

		private readonly BackgroundOperation _simulator;

		private byte[] _statusData;

		private float _tempChangeValue;

		private float _batteryChangeValue;

		private int _batteryPercentValue;

		private const int SimulatedActivityDelayMs = 1500;

		private bool IsTemperatureLowAlertTriggerDisabled;

		private bool IsTemperatureHighAlertTriggerDisabled;

		private float TemperatureLowAlertTriggerValueCelsius;

		private float TemperatureHighAlertTriggerValueCelsius;

		private bool _isOnline;

		private const uint DelayStatusChangedLogMessageThrottleTimeMs = 60000u;

		private readonly Stopwatch _delayStatusChangedLogMessageThrottleTimer;

		public override LogicalDeviceActiveConnection ActiveConnection
		{
			get
			{
				if (IsOnline)
				{
					return (LogicalDeviceActiveConnection)1;
				}
				return (LogicalDeviceActiveConnection)0;
			}
		}

		public virtual bool IsOnline
		{
			get
			{
				return _isOnline;
			}
			protected set
			{
				if (((CommonNotifyPropertyChanged)this).SetBackingField<bool>(ref _isOnline, value, "IsOnline", Array.Empty<string>()))
				{
					((LogicalDevice<LogicalDeviceTemperatureSensorCapability>)(object)this).UpdateDeviceOnline(value);
				}
			}
		}

		public LogicalDeviceTemperatureSensorSim(LogicalDeviceId deviceId, LogicalDeviceTemperatureSensorCapability capability, ILogicalDeviceService deviceService)
		{
			//IL_0078: Unknown result type (might be due to invalid IL or missing references)
			//IL_0082: Expected O, but got Unknown
			//IL_00bb: Unknown result type (might be due to invalid IL or missing references)
			//IL_00c5: Expected O, but got Unknown
			//IL_00c0: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ca: Expected O, but got Unknown
			Byte[] array = new Byte[8];
			RuntimeHelpers.InitializeArray((Array)(object)array, (RuntimeFieldHandle)/*OpCode not supported: LdMemberToken*/);
			_statusData = (byte[])(object)array;
			_tempChangeValue = 0.1f;
			_batteryChangeValue = 0.1f;
			_batteryPercentValue = 1;
			TemperatureLowAlertTriggerValueCelsius = -18f;
			TemperatureHighAlertTriggerValueCelsius = 27f;
			_isOnline = true;
			_delayStatusChangedLogMessageThrottleTimer = Stopwatch.StartNew();
			base..ctor((ILogicalDeviceId)(object)deviceId, capability, deviceService);
			RequestModePid = (ILogicalDevicePidByte)new LogicalDevicePidSimByte(PID.ACC_REQUEST_MODE, (byte)1);
			((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Update(_statusData, 8, false);
			((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Size);
			_simulator = new BackgroundOperation(new BackgroundOperationFunc(SimulatorAsync));
			_simulator.Start();
		}

		public override void UpdateDeviceOnline(bool online)
		{
			IsOnline = online;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task SimulatorAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SimulatorAsync>d__30 <SimulatorAsync>d__ = default(<SimulatorAsync>d__30);
			<SimulatorAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SimulatorAsync>d__.<>4__this = this;
			<SimulatorAsync>d__.cancellationToken = cancellationToken;
			<SimulatorAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Start<<SimulatorAsync>d__30>(ref <SimulatorAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Task;
		}

		private void UpdateTemperature(LogicalDeviceTemperatureSensorStatus simStatus)
		{
			float num = base.TemperatureCelsius + _tempChangeValue;
			if (num > 24f)
			{
				num = 24f;
				_tempChangeValue = -0.1f;
			}
			else if (num < 18f)
			{
				num = 18f;
				_tempChangeValue = 0.1f;
			}
			simStatus.SetTemperatureCelsius(num);
			if (simStatus.TemperatureCelsius < TemperatureLowAlertTriggerValueCelsius)
			{
				if (!simStatus.IsTemperatureLow && !IsTemperatureLowAlertTriggerDisabled)
				{
					simStatus.SetTemperatureLowAlert(active: true, (byte)(simStatus.TemperatureLowAlertCount + 1));
				}
				else
				{
					simStatus.SetTemperatureHighAlert(active: true, (byte)simStatus.TemperatureLowAlertCount);
				}
				simStatus.SetTemperatureHighAlert(active: false, (byte)simStatus.TemperatureHighAlertCount);
				simStatus.SetTemperatureInRangeAlert(active: false, (byte)simStatus.TemperatureInRangeAlertCount);
			}
			else if (simStatus.TemperatureCelsius >= TemperatureLowAlertTriggerValueCelsius && simStatus.TemperatureCelsius <= TemperatureHighAlertTriggerValueCelsius)
			{
				if (!simStatus.IsTemperatureInRange && !IsTemperatureLowAlertTriggerDisabled && !IsTemperatureHighAlertTriggerDisabled)
				{
					simStatus.SetTemperatureInRangeAlert(active: true, (byte)(simStatus.TemperatureInRangeAlertCount + 1));
				}
				else
				{
					simStatus.SetTemperatureHighAlert(active: true, (byte)simStatus.TemperatureInRangeAlertCount);
				}
				simStatus.SetTemperatureLowAlert(active: false, (byte)simStatus.TemperatureLowAlertCount);
				simStatus.SetTemperatureHighAlert(active: false, (byte)simStatus.TemperatureHighAlertCount);
			}
			else if (simStatus.TemperatureCelsius > TemperatureHighAlertTriggerValueCelsius)
			{
				if (!simStatus.IsTemperatureHigh && !IsTemperatureHighAlertTriggerDisabled)
				{
					simStatus.SetTemperatureHighAlert(active: true, (byte)(simStatus.TemperatureHighAlertCount + 1));
				}
				else
				{
					simStatus.SetTemperatureHighAlert(active: true, (byte)simStatus.TemperatureHighAlertCount);
				}
				simStatus.SetTemperatureLowAlert(active: false, (byte)simStatus.TemperatureLowAlertCount);
				simStatus.SetTemperatureInRangeAlert(active: false, (byte)simStatus.TemperatureInRangeAlertCount);
			}
		}

		private void UpdateVoltage(LogicalDeviceTemperatureSensorStatus simStatus)
		{
			float num = base.SensorBatteryVoltage + _batteryChangeValue;
			if (num < 0.1f)
			{
				num = 0.1f;
				_batteryChangeValue = 0.1f;
			}
			else if (num > 3f)
			{
				num = 3f;
				_batteryChangeValue = -0.1f;
			}
			simStatus.SetSensorBatteryVoltage(num);
		}

		private void UpdateBatteryChargePercentage(LogicalDeviceTemperatureSensorStatus simStatus)
		{
			int num = base.SensorBatteryChargePercent + _batteryPercentValue;
			if (num < 0)
			{
				num = 0;
				_batteryPercentValue = 1;
			}
			else if (num > 100)
			{
				num = 100;
				_batteryPercentValue = -1;
			}
			simStatus.SetSensorBatteryVoltage(num);
			if (simStatus.BatteryChargePercent <= 25)
			{
				if (!simStatus.IsBatteryLow)
				{
					simStatus.SetLowBatteryAlert(active: true, (byte)(simStatus.LowBatteryAlertCount + 1));
				}
				else
				{
					simStatus.SetLowBatteryAlert(active: true, (byte)simStatus.LowBatteryAlertCount);
				}
			}
			else
			{
				simStatus.SetLowBatteryAlert(active: false, (byte)simStatus.LowBatteryAlertCount);
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public override Task<Nullable<float>> TryGetTemperatureHighAlertTriggerValueAsync(TemperatureScale scale, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<TryGetTemperatureHighAlertTriggerValueAsync>d__34 <TryGetTemperatureHighAlertTriggerValueAsync>d__ = default(<TryGetTemperatureHighAlertTriggerValueAsync>d__34);
			<TryGetTemperatureHighAlertTriggerValueAsync>d__.<>t__builder = AsyncTaskMethodBuilder<Nullable<float>>.Create();
			<TryGetTemperatureHighAlertTriggerValueAsync>d__.<>4__this = this;
			<TryGetTemperatureHighAlertTriggerValueAsync>d__.scale = scale;
			<TryGetTemperatureHighAlertTriggerValueAsync>d__.cancellationToken = cancellationToken;
			<TryGetTemperatureHighAlertTriggerValueAsync>d__.<>1__state = -1;
			<TryGetTemperatureHighAlertTriggerValueAsync>d__.<>t__builder.Start<<TryGetTemperatureHighAlertTriggerValueAsync>d__34>(ref <TryGetTemperatureHighAlertTriggerValueAsync>d__);
			return <TryGetTemperatureHighAlertTriggerValueAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public override Task<Nullable<float>> TryGetTemperatureLowAlertTriggerValueAsync(TemperatureScale scale, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<TryGetTemperatureLowAlertTriggerValueAsync>d__35 <TryGetTemperatureLowAlertTriggerValueAsync>d__ = default(<TryGetTemperatureLowAlertTriggerValueAsync>d__35);
			<TryGetTemperatureLowAlertTriggerValueAsync>d__.<>t__builder = AsyncTaskMethodBuilder<Nullable<float>>.Create();
			<TryGetTemperatureLowAlertTriggerValueAsync>d__.<>4__this = this;
			<TryGetTemperatureLowAlertTriggerValueAsync>d__.scale = scale;
			<TryGetTemperatureLowAlertTriggerValueAsync>d__.cancellationToken = cancellationToken;
			<TryGetTemperatureLowAlertTriggerValueAsync>d__.<>1__state = -1;
			<TryGetTemperatureLowAlertTriggerValueAsync>d__.<>t__builder.Start<<TryGetTemperatureLowAlertTriggerValueAsync>d__35>(ref <TryGetTemperatureLowAlertTriggerValueAsync>d__);
			return <TryGetTemperatureLowAlertTriggerValueAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public override Task TrySetTemperatureHighAlertTriggerValueAsync(Nullable<float> value, TemperatureScale scale, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<TrySetTemperatureHighAlertTriggerValueAsync>d__36 <TrySetTemperatureHighAlertTriggerValueAsync>d__ = default(<TrySetTemperatureHighAlertTriggerValueAsync>d__36);
			<TrySetTemperatureHighAlertTriggerValueAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<TrySetTemperatureHighAlertTriggerValueAsync>d__.<>4__this = this;
			<TrySetTemperatureHighAlertTriggerValueAsync>d__.value = value;
			<TrySetTemperatureHighAlertTriggerValueAsync>d__.scale = scale;
			<TrySetTemperatureHighAlertTriggerValueAsync>d__.cancellationToken = cancellationToken;
			<TrySetTemperatureHighAlertTriggerValueAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <TrySetTemperatureHighAlertTriggerValueAsync>d__.<>t__builder)).Start<<TrySetTemperatureHighAlertTriggerValueAsync>d__36>(ref <TrySetTemperatureHighAlertTriggerValueAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <TrySetTemperatureHighAlertTriggerValueAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public override Task TrySetTemperatureLowAlertTriggerValueAsync(Nullable<float> value, TemperatureScale scale, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<TrySetTemperatureLowAlertTriggerValueAsync>d__37 <TrySetTemperatureLowAlertTriggerValueAsync>d__ = default(<TrySetTemperatureLowAlertTriggerValueAsync>d__37);
			<TrySetTemperatureLowAlertTriggerValueAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<TrySetTemperatureLowAlertTriggerValueAsync>d__.<>4__this = this;
			<TrySetTemperatureLowAlertTriggerValueAsync>d__.value = value;
			<TrySetTemperatureLowAlertTriggerValueAsync>d__.scale = scale;
			<TrySetTemperatureLowAlertTriggerValueAsync>d__.cancellationToken = cancellationToken;
			<TrySetTemperatureLowAlertTriggerValueAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <TrySetTemperatureLowAlertTriggerValueAsync>d__.<>t__builder)).Start<<TrySetTemperatureLowAlertTriggerValueAsync>d__37>(ref <TrySetTemperatureLowAlertTriggerValueAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <TrySetTemperatureLowAlertTriggerValueAsync>d__.<>t__builder)).Task;
		}

		protected override void DebugUpdateDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, uint dataLength, string optionalText = "")
		{
			if (_delayStatusChangedLogMessageThrottleTimer.ElapsedMilliseconds >= 60000)
			{
				((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).DebugUpdateDeviceStatusChanged(oldStatusData, statusData, dataLength, String.Format("Skipped debug messages over {0}ms", (object)(UInt32)60000));
				_delayStatusChangedLogMessageThrottleTimer.Restart();
			}
		}

		public override Task RequestTransitionToSleepMode(CancellationToken cancellationToken)
		{
			TaggedLog.Information("LogicalDeviceTemperatureSensorSim", String.Format("Request Transition to Sleep Mode Ignored for Simulated device: {0}", (object)this), Array.Empty<object>());
			return Task.CompletedTask;
		}

		public override void Dispose(bool disposing)
		{
			((LogicalDevice<LogicalDeviceTemperatureSensorStatus, LogicalDeviceTemperatureSensorCapability>)this).Dispose(disposing);
			_simulator.Stop();
		}
	}
	[Flags]
	public enum TemperatureSensorFlags : Enum
	{
		None = 0,
		LowBatteryAlert = 1,
		HighTemperatureAlert = 2,
		LowTemperatureAlert = 4,
		TemperatureInRangeAlert = 8,
		Reserved1 = 0x10,
		Reserved2 = 0x20,
		Reserved3 = 0x40,
		Reserved4 = 0x80
	}
	public class LogicalDeviceTemperatureSensorStatus : LogicalDeviceStatusPacketMutable, ILogicalDeviceStatus<LogicalDeviceTemperatureSensorStatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		public const int MinimumStatusPacketSize = 8;

		private const ushort InvalidTemperature = 32767;

		private const byte AlertActiveFlag = 128;

		private const byte AlertActiveBitmask = 128;

		private const byte AlertCountBitmask = 127;

		private const int TemperatureCelsiusStartIndex = 0;

		private const int BatteryVoltageIndex = 2;

		private const int BatteryChargeLevelIndex = 3;

		private const int BatteryLowAlertIndex = 4;

		private const int TemperatureHighAlertIndex = 5;

		private const int TemperatureLowAlertIndex = 6;

		private const int TemperatureInRangeAlertIndex = 7;

		private const int BatteryVoltageScaleFactor = 64;

		public float TemperatureCelsius => FixedPointSignedBigEndian8X8.ToFloat(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 0u);

		public bool IsTemperatureValid
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetUInt16(0u) != 32767;
				}
				return false;
			}
		}

		public float SensorBatteryVoltage => (float)(int)((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[2] / 64f;

		public int BatteryChargePercent => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3];

		public TemperatureSensorFlags SensorFlags
		{
			get
			{
				TemperatureSensorFlags temperatureSensorFlags = TemperatureSensorFlags.None;
				if (IsBatteryLow)
				{
					temperatureSensorFlags |= TemperatureSensorFlags.LowBatteryAlert;
				}
				if (IsTemperatureHigh)
				{
					temperatureSensorFlags |= TemperatureSensorFlags.HighTemperatureAlert;
				}
				if (IsTemperatureLow)
				{
					temperatureSensorFlags |= TemperatureSensorFlags.LowTemperatureAlert;
				}
				if (IsTemperatureInRange)
				{
					temperatureSensorFlags |= TemperatureSensorFlags.TemperatureInRangeAlert;
				}
				return temperatureSensorFlags;
			}
		}

		public bool IsBatteryLow => (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[4] & 0x80) == 128;

		public bool IsTemperatureHigh => (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[5] & 0x80) == 128;

		public bool IsTemperatureLow => (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[6] & 0x80) == 128;

		public bool IsTemperatureInRange => (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[7] & 0x80) == 128;

		public int LowBatteryAlertCount => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[4] & 0x7F;

		public int TemperatureHighAlertCount => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[5] & 0x7F;

		public int TemperatureLowAlertCount => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[6] & 0x7F;

		public int TemperatureInRangeAlertCount => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[7] & 0x7F;

		public LogicalDeviceTemperatureSensorStatus()
			: base(8u)
		{
		}

		public void SetTemperatureCelsius(float celsius)
		{
			FixedPointSignedBigEndian8X8.FromFloat(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 0u, celsius);
		}

		public void SetTemperatureCelsiusToUnknown()
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt16((ushort)32767, 0);
		}

		public void SetSensorBatteryVoltage(float voltage)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[2] = (byte)(voltage * 64f);
		}

		public void SetBatteryChargeLevel(int percent)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3] = (byte)MathCommon.Clamp(percent, 0, 100);
		}

		public void SetLowBatteryAlert(bool active, byte count)
		{
			byte b = (byte)(count & 0x7F);
			if (active)
			{
				b |= 0x80;
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b, 4);
		}

		public void SetTemperatureHighAlert(bool active, byte count)
		{
			byte b = (byte)(count & 0x7F);
			if (active)
			{
				b |= 0x80;
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b, 5);
		}

		public void SetTemperatureLowAlert(bool active, byte count)
		{
			byte b = (byte)(count & 0x7F);
			if (active)
			{
				b |= 0x80;
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b, 6);
		}

		public void SetTemperatureInRangeAlert(bool active, byte count)
		{
			byte b = (byte)(count & 0x7F);
			if (active)
			{
				b |= 0x80;
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b, 7);
		}

		public LogicalDeviceTemperatureSensorStatus(LogicalDeviceTemperatureSensorStatus originalStatus)
		{
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalStatus).Data;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(data, data.Length, false);
		}

		public LogicalDeviceTemperatureSensorStatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceTemperatureSensorStatusSerializable(this);
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceTemperatureSensorStatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceTemperatureSensorStatusSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceTemperatureSensorStatusSerializable);
			}
		}

		[JsonProperty]
		public float TemperatureCelsius
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public float SensorBatteryVoltage
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public int BatteryChargePercent
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool IsBatteryLow
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool IsTemperatureHigh
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool IsTemperatureLow
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool IsTemperatureInRange
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public int LowBatteryAlertCount
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public int TemperatureHighAlertCount
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public int TemperatureLowAlertCount
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public int TemperatureInRangeAlertCount
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceTemperatureSensorStatusSerializable(float temperatureCelsius, float sensorBatteryVoltage, int batteryChargePercent, bool isBatteryLow, bool isTemperatureHigh, bool isTemperatureLow, bool isTemperatureInRange, int lowBatteryAlertCount, int temperatureHighAlertCount, int temperatureLowAlertCount, int temperatureInRangeAlertCount)
		{
			TemperatureCelsius = temperatureCelsius;
			SensorBatteryVoltage = sensorBatteryVoltage;
			BatteryChargePercent = batteryChargePercent;
			IsBatteryLow = isBatteryLow;
			IsTemperatureHigh = isTemperatureHigh;
			IsTemperatureLow = isTemperatureLow;
			IsTemperatureInRange = isTemperatureInRange;
			LowBatteryAlertCount = lowBatteryAlertCount;
			TemperatureHighAlertCount = temperatureHighAlertCount;
			TemperatureLowAlertCount = temperatureLowAlertCount;
			TemperatureInRangeAlertCount = temperatureInRangeAlertCount;
		}

		public LogicalDeviceTemperatureSensorStatusSerializable(LogicalDeviceTemperatureSensorStatus tempSensorStatus)
			: this(tempSensorStatus.TemperatureCelsius, tempSensorStatus.SensorBatteryVoltage, tempSensorStatus.BatteryChargePercent, tempSensorStatus.IsBatteryLow, tempSensorStatus.IsTemperatureHigh, tempSensorStatus.IsTemperatureLow, tempSensorStatus.IsTemperatureInRange, tempSensorStatus.LowBatteryAlertCount, tempSensorStatus.TemperatureHighAlertCount, tempSensorStatus.TemperatureLowAlertCount, tempSensorStatus.TemperatureInRangeAlertCount)
		{
		}

		public override byte[] MakeRawData()
		{
			LogicalDeviceTemperatureSensorStatus logicalDeviceTemperatureSensorStatus = new LogicalDeviceTemperatureSensorStatus();
			logicalDeviceTemperatureSensorStatus.SetTemperatureCelsius(TemperatureCelsius);
			logicalDeviceTemperatureSensorStatus.SetSensorBatteryVoltage(SensorBatteryVoltage);
			logicalDeviceTemperatureSensorStatus.SetBatteryChargeLevel(BatteryChargePercent);
			logicalDeviceTemperatureSensorStatus.SetLowBatteryAlert(IsBatteryLow, (byte)LowBatteryAlertCount);
			logicalDeviceTemperatureSensorStatus.SetTemperatureHighAlert(IsTemperatureHigh, (byte)TemperatureHighAlertCount);
			logicalDeviceTemperatureSensorStatus.SetTemperatureLowAlert(IsTemperatureLow, (byte)TemperatureLowAlertCount);
			logicalDeviceTemperatureSensorStatus.SetTemperatureInRangeAlert(IsTemperatureInRange, (byte)TemperatureInRangeAlertCount);
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTemperatureSensorStatus).CopyCurrentData();
		}

		public static LogicalDeviceTemperatureSensorStatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceTemperatureSensorStatus logicalDeviceTemperatureSensorStatus = new LogicalDeviceTemperatureSensorStatus();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTemperatureSensorStatus).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTemperatureSensorStatus).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTemperatureSensorStatus).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTemperatureSensorStatus).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTemperatureSensorStatus).Update(rawData, rawData.Length, false);
			return new LogicalDeviceTemperatureSensorStatusSerializable(logicalDeviceTemperatureSensorStatus);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceTemperatureSensorStatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceTemperatureSensorStatusSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("TemperatureCelsius = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref TemperatureCelsius)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", SensorBatteryVoltage = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref SensorBatteryVoltage)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", BatteryChargePercent = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref BatteryChargePercent)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IsBatteryLow = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsBatteryLow)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IsTemperatureHigh = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsTemperatureHigh)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IsTemperatureLow = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsTemperatureLow)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IsTemperatureInRange = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsTemperatureInRange)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LowBatteryAlertCount = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref LowBatteryAlertCount)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TemperatureHighAlertCount = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref TemperatureHighAlertCount)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TemperatureLowAlertCount = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref TemperatureLowAlertCount)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TemperatureInRangeAlertCount = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref TemperatureInRangeAlertCount)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return ((((((((((base.GetHashCode() * -1521134295 + EqualityComparer<float>.Default.GetHashCode(TemperatureCelsius)) * -1521134295 + EqualityComparer<float>.Default.GetHashCode(SensorBatteryVoltage)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(BatteryChargePercent)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsBatteryLow)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsTemperatureHigh)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsTemperatureLow)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsTemperatureInRange)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(LowBatteryAlertCount)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(TemperatureHighAlertCount)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(TemperatureLowAlertCount)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(TemperatureInRangeAlertCount);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceTemperatureSensorStatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceTemperatureSensorStatusSerializable(LogicalDeviceTemperatureSensorStatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceTemperatureSensorStatusSerializable>)original)
		{
			TemperatureCelsius = original.TemperatureCelsius;
			SensorBatteryVoltage = original.SensorBatteryVoltage;
			BatteryChargePercent = original.BatteryChargePercent;
			IsBatteryLow = original.IsBatteryLow;
			IsTemperatureHigh = original.IsTemperatureHigh;
			IsTemperatureLow = original.IsTemperatureLow;
			IsTemperatureInRange = original.IsTemperatureInRange;
			LowBatteryAlertCount = original.LowBatteryAlertCount;
			TemperatureHighAlertCount = original.TemperatureHighAlertCount;
			TemperatureLowAlertCount = original.TemperatureLowAlertCount;
			TemperatureInRangeAlertCount = original.TemperatureInRangeAlertCount;
		}
	}
}
namespace OneControl.Devices.TankSensor
{
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceTankSensorStatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceTankSensorStatusSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceTankSensorStatusSerializable);
			}
		}

		[JsonProperty]
		public byte Level
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public Nullable<byte> BatteryLevel
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public Nullable<float> XAcceleration
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public Nullable<float> YAcceleration
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceTankSensorStatusSerializable(byte level, Nullable<byte> batteryLevel, Nullable<float> xAcceleration, Nullable<float> yAcceleration)
		{
			//IL_000e: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0015: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_001c: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			Level = level;
			BatteryLevel = batteryLevel;
			XAcceleration = xAcceleration;
			YAcceleration = yAcceleration;
		}

		public LogicalDeviceTankSensorStatusSerializable(LogicalDeviceTankSensorStatus tankSensorStatus)
			: this(tankSensorStatus.Level, tankSensorStatus.BatteryLevel, tankSensorStatus.XAcceleration, tankSensorStatus.YAcceleration)
		{
		}//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_000e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0014: Unknown result type (might be due to invalid IL or missing references)


		public override byte[] MakeRawData()
		{
			//IL_0013: Unknown result type (might be due to invalid IL or missing references)
			//IL_0018: Unknown result type (might be due to invalid IL or missing references)
			//IL_0037: Unknown result type (might be due to invalid IL or missing references)
			//IL_003c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0024: Unknown result type (might be due to invalid IL or missing references)
			//IL_0029: Unknown result type (might be due to invalid IL or missing references)
			//IL_005c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0061: Unknown result type (might be due to invalid IL or missing references)
			//IL_0048: Unknown result type (might be due to invalid IL or missing references)
			//IL_004d: Unknown result type (might be due to invalid IL or missing references)
			//IL_006d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0072: Unknown result type (might be due to invalid IL or missing references)
			LogicalDeviceTankSensorStatus logicalDeviceTankSensorStatus = new LogicalDeviceTankSensorStatus();
			logicalDeviceTankSensorStatus.SetLevel(Level);
			if (BatteryLevel.HasValue)
			{
				logicalDeviceTankSensorStatus.SetBatteryLevel(BatteryLevel.Value);
			}
			if (XAcceleration.HasValue)
			{
				logicalDeviceTankSensorStatus.SetXAcceleration((byte)XAcceleration.Value);
			}
			if (YAcceleration.HasValue)
			{
				logicalDeviceTankSensorStatus.SetYAcceleration((byte)YAcceleration.Value);
			}
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTankSensorStatus).CopyCurrentData();
		}

		public static LogicalDeviceTankSensorStatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceTankSensorStatus logicalDeviceTankSensorStatus = new LogicalDeviceTankSensorStatus();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTankSensorStatus).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTankSensorStatus).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTankSensorStatus).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTankSensorStatus).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceTankSensorStatus).Update(rawData, rawData.Length, false);
			return new LogicalDeviceTankSensorStatusSerializable(logicalDeviceTankSensorStatus);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceTankSensorStatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceTankSensorStatusSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			//IL_004a: Unknown result type (might be due to invalid IL or missing references)
			//IL_004f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0071: Unknown result type (might be due to invalid IL or missing references)
			//IL_0076: Unknown result type (might be due to invalid IL or missing references)
			//IL_0098: Unknown result type (might be due to invalid IL or missing references)
			//IL_009d: Unknown result type (might be due to invalid IL or missing references)
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("Level = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref Level)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", BatteryLevel = ");
			builder.Append(((Object)BatteryLevel/*cast due to .constrained prefix*/).ToString());
			builder.Append(", XAcceleration = ");
			builder.Append(((Object)XAcceleration/*cast due to .constrained prefix*/).ToString());
			builder.Append(", YAcceleration = ");
			builder.Append(((Object)YAcceleration/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			//IL_0029: Unknown result type (might be due to invalid IL or missing references)
			//IL_0040: Unknown result type (might be due to invalid IL or missing references)
			//IL_0057: Unknown result type (might be due to invalid IL or missing references)
			return (((base.GetHashCode() * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(Level)) * -1521134295 + EqualityComparer<Nullable<byte>>.Default.GetHashCode(BatteryLevel)) * -1521134295 + EqualityComparer<Nullable<float>>.Default.GetHashCode(XAcceleration)) * -1521134295 + EqualityComparer<Nullable<float>>.Default.GetHashCode(YAcceleration);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceTankSensorStatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceTankSensorStatusSerializable(LogicalDeviceTankSensorStatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceTankSensorStatusSerializable>)original)
		{
			//IL_0015: Unknown result type (might be due to invalid IL or missing references)
			//IL_001a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0021: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_002d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0032: Unknown result type (might be due to invalid IL or missing references)
			Level = original.Level;
			BatteryLevel = original.BatteryLevel;
			XAcceleration = original.XAcceleration;
			YAcceleration = original.YAcceleration;
		}
	}
	public class TankSensorException : LogicalDeviceException
	{
		public TankSensorException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}
	}
	public class TankSensorHoldingTypeUnknownException : TankSensorException
	{
		public TankSensorHoldingTypeUnknownException(ILogicalDeviceTankSensor tankSensorLogicalDevice, Exception? innerException = null)
			: base(String.Format("{0} has an 'Unknown' Holding Type.", (object)tankSensorLogicalDevice), innerException)
		{
		}
	}
}
namespace OneControl.Devices.TankSensor.Mopeka
{
	public struct CalibrationOffsets : ValueType
	{
		[field: CompilerGenerated]
		public float XOffset
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		}

		[field: CompilerGenerated]
		public float YOffset
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		}

		public CalibrationOffsets(float xOffset, float yOffset)
		{
			XOffset = xOffset;
			YOffset = yOffset;
		}
	}
	public interface ILPSettingsRepository
	{
		Task CreateSettings(ILogicalDeviceTankSensor device, LPTankName name, ILPTankSize size, bool isNotificationEnabled, int notificationThreshold, float accelXOffset, float accelYOffset, TankHeightUnits preferredUnits, CancellationToken token = default(CancellationToken));

		Task DeleteSettings(ILogicalDeviceTankSensor device, CancellationToken token = default(CancellationToken));

		Task<bool> HasLPSettings(ILogicalDeviceTankSensor device, CancellationToken token = default(CancellationToken));

		Task<LPTankName> GetTankName(ILogicalDeviceTankSensor device, CancellationToken token = default(CancellationToken));

		Task SetTankName(ILogicalDeviceTankSensor device, LPTankName name, CancellationToken token = default(CancellationToken));

		Task<ILPTankSize> GetTankSize(ILogicalDeviceTankSensor device, CancellationToken token = default(CancellationToken));

		Task SetTankSize(ILogicalDeviceTankSensor device, ILPTankSize size, CancellationToken token = default(CancellationToken));

		Task<bool> IsThresholdNotificationEnabled(ILogicalDeviceTankSensor device, CancellationToken token = default(CancellationToken));

		Task EnableThresholdNotification(ILogicalDeviceTankSensor device, CancellationToken token = default(CancellationToken));

		Task DisableThresholdNotification(ILogicalDeviceTankSensor device, CancellationToken token = default(CancellationToken));

		Task<int> GetNotificationThreshold(ILogicalDeviceTankSensor device, CancellationToken token = default(CancellationToken));

		Task SetNotificationThreshold(ILogicalDeviceTankSensor device, int tankLevelPercent, CancellationToken token = default(CancellationToken));

		Task<CalibrationOffsets> GetPositionCalibrationOffsets(ILogicalDeviceTankSensor device, CancellationToken token = default(CancellationToken));

		Task SetPositionCalibrationOffsets(ILogicalDeviceTankSensor device, float xOffset, float yOffset, CancellationToken token = default(CancellationToken));

		Task SetFaulted(LPFaultType faultType, ILogicalDeviceTankSensor device, bool isFaulted, CancellationToken token = default(CancellationToken));

		Task<bool> IsFaulted(LPFaultType faultType, ILogicalDeviceTankSensor device, CancellationToken token = default(CancellationToken));

		Task SetPreferredUnits(ILogicalDeviceTankSensor device, TankHeightUnits preferredUnits, CancellationToken token = default(CancellationToken));

		Task<TankHeightUnits> GetPreferredUnits(ILogicalDeviceTankSensor device, CancellationToken token = default(CancellationToken));
	}
	public class LogicalDeviceTankBottleCheckSensorSim : LogicalDeviceTankSensor, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <<-ctor>b__12_0>d : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceTankBottleCheckSensorSim <>4__this;

			private int <level>5__2;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_0147: Expected O, but got Unknown
				//IL_00f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fa: Unknown result type (might be due to invalid IL or missing references)
				//IL_0102: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_002d: Invalid comparison between Unknown and I4
				//IL_00b9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_00df: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceTankBottleCheckSensorSim logicalDeviceTankBottleCheckSensorSim = <>4__this;
				try
				{
					if (num != 0)
					{
						goto IL_0133;
					}
					TaskAwaiter<bool> val = <>u__1;
					<>u__1 = default(TaskAwaiter<bool>);
					num = (<>1__state = -1);
					goto IL_0111;
					IL_0111:
					val.GetResult();
					goto IL_0119;
					IL_0133:
					if (!logicalDeviceTankBottleCheckSensorSim._tankSensorSimTaskCancelSource.IsCancellationRequested)
					{
						<level>5__2 = 30;
						goto IL_0127;
					}
					goto end_IL_000e;
					IL_0119:
					<level>5__2 -= 2;
					goto IL_0127;
					IL_0127:
					if (<level>5__2 >= 0)
					{
						if ((int)((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)logicalDeviceTankBottleCheckSensorSim).ActiveConnection == 1)
						{
							int num2 = rng.Next(-5, 5);
							<level>5__2 += num2;
							LogicalDeviceTankSensorStatus logicalDeviceTankSensorStatus = new LogicalDeviceTankSensorStatus();
							logicalDeviceTankSensorStatus.SetLevel((byte)<level>5__2);
							logicalDeviceTankSensorStatus.SetMeasurementQuality(100);
							logicalDeviceTankSensorStatus.SetBatteryLevel((byte)<level>5__2);
							logicalDeviceTankSensorStatus.SetXAcceleration((byte)rng.Next(-127, 128));
							logicalDeviceTankSensorStatus.SetYAcceleration((byte)rng.Next(-127, 128));
							((LogicalDevice<LogicalDeviceTankSensorStatus, ILogicalDeviceTankSensorCapability>)logicalDeviceTankBottleCheckSensorSim).UpdateDeviceStatus(logicalDeviceTankSensorStatus);
							val = TaskExtension.TryDelay(15000, logicalDeviceTankBottleCheckSensorSim._tankSensorSimTaskCancelSource.Token).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<-ctor>b__12_0>d>(ref val, ref this);
								return;
							}
							goto IL_0111;
						}
						goto IL_0119;
					}
					goto IL_0133;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private static readonly Random rng = new Random();

		private CancellationTokenSource _tankSensorSimTaskCancelSource = new CancellationTokenSource();

		private LogicalDeviceTankSensorStatus _tankStatus = new LogicalDeviceTankSensorStatus();

		private bool _isOnline = true;

		public override bool IsLegacyDeviceHazardous => false;

		public override LogicalDeviceActiveConnection ActiveConnection
		{
			get
			{
				if (IsOnline)
				{
					return (LogicalDeviceActiveConnection)1;
				}
				return (LogicalDeviceActiveConnection)0;
			}
		}

		public virtual bool IsOnline
		{
			get
			{
				return _isOnline;
			}
			protected set
			{
				if (((CommonNotifyPropertyChanged)this).SetBackingField<bool>(ref _isOnline, value, "IsOnline", Array.Empty<string>()))
				{
					((LogicalDevice<ILogicalDeviceTankSensorCapability>)(object)this).UpdateDeviceOnline(value);
				}
			}
		}

		[field: CompilerGenerated]
		public override ILogicalDevicePidFixedPoint VoltageMeasurementBatteryPid
		{
			[CompilerGenerated]
			get;
		} = (ILogicalDevicePidFixedPoint)new LogicalDevicePidSimFixedPoint((FixedPointType)1, PID.BATTERY_VOLTAGE, 13f);

		public override void UpdateDeviceOnline(bool online)
		{
			IsOnline = online;
		}

		public LogicalDeviceTankBottleCheckSensorSim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService deviceService = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceTankSensorCapability(), deviceService, isFunctionClassChangeable)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_0029: Unknown result type (might be due to invalid IL or missing references)
			//IL_0033: Expected O, but got Unknown
			//IL_0053: Unknown result type (might be due to invalid IL or missing references)
			Task.Run((Func<Task>)([AsyncStateMachine(/*Could not decode attribute arguments.*/)] [CompilerGenerated] () =>
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<-ctor>b__12_0>d <<-ctor>b__12_0>d = default(<<-ctor>b__12_0>d);
				<<-ctor>b__12_0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<-ctor>b__12_0>d.<>4__this = this;
				<<-ctor>b__12_0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<-ctor>b__12_0>d.<>t__builder)).Start<<<-ctor>b__12_0>d>(ref <<-ctor>b__12_0>d);
				return ((AsyncTaskMethodBuilder)(ref <<-ctor>b__12_0>d.<>t__builder)).Task;
			}), _tankSensorSimTaskCancelSource.Token);
		}

		public override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
			CancellationTokenSource tankSensorSimTaskCancelSource = _tankSensorSimTaskCancelSource;
			if (tankSensorSimTaskCancelSource != null)
			{
				CancellationTokenSourceExtension.TryCancelAndDispose(tankSensorSimTaskCancelSource);
			}
			_tankSensorSimTaskCancelSource = null;
		}
	}
	public enum LPFaultType : Enum
	{
		Tank,
		Battery
	}
	public class LPTankName : Object
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass25_0 : Object
		{
			public FunctionName functionName;

			public int functionInstance;

			internal bool <GetByFunctionNameAndInstance>b__0(LPTankName x)
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_000e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Unknown result type (might be due to invalid IL or missing references)
				FunctionName val = x.FunctionName;
				byte b = x.FunctionInstance;
				FunctionName val2 = functionName;
				int num = functionInstance;
				if (val == val2)
				{
					return b == num;
				}
				return false;
			}
		}

		public static readonly LPTankName Rv1 = new LPTankName((FunctionName)345, 0, isSupportedByOctp: true, isOver100LbTank: false);

		public static readonly LPTankName Rv2 = new LPTankName((FunctionName)345, 1, isSupportedByOctp: true, isOver100LbTank: false);

		public static readonly LPTankName Rv3 = new LPTankName((FunctionName)345, 2, isSupportedByOctp: true, isOver100LbTank: false);

		public static readonly LPTankName Home1 = new LPTankName((FunctionName)346, 0, isSupportedByOctp: false, isOver100LbTank: false);

		public static readonly LPTankName Home2 = new LPTankName((FunctionName)346, 1, isSupportedByOctp: false, isOver100LbTank: false);

		public static readonly LPTankName Home3 = new LPTankName((FunctionName)346, 2, isSupportedByOctp: false, isOver100LbTank: false);

		public static readonly LPTankName Cabin1 = new LPTankName((FunctionName)347, 0, isSupportedByOctp: false, isOver100LbTank: true);

		public static readonly LPTankName Cabin2 = new LPTankName((FunctionName)347, 1, isSupportedByOctp: false, isOver100LbTank: true);

		public static readonly LPTankName Cabin3 = new LPTankName((FunctionName)347, 2, isSupportedByOctp: false, isOver100LbTank: true);

		public static readonly LPTankName Bbq1 = new LPTankName((FunctionName)348, 0, isSupportedByOctp: true, isOver100LbTank: false);

		public static readonly LPTankName Bbq2 = new LPTankName((FunctionName)348, 1, isSupportedByOctp: true, isOver100LbTank: false);

		public static readonly LPTankName Bbq3 = new LPTankName((FunctionName)348, 2, isSupportedByOctp: true, isOver100LbTank: false);

		public static readonly LPTankName Grill1 = new LPTankName((FunctionName)349, 0, isSupportedByOctp: true, isOver100LbTank: false);

		public static readonly LPTankName Grill2 = new LPTankName((FunctionName)349, 1, isSupportedByOctp: true, isOver100LbTank: false);

		public static readonly LPTankName Grill3 = new LPTankName((FunctionName)349, 2, isSupportedByOctp: true, isOver100LbTank: false);

		public static readonly LPTankName Submarine1 = new LPTankName((FunctionName)350, 0, isSupportedByOctp: false, isOver100LbTank: true);

		public static readonly LPTankName Submarine2 = new LPTankName((FunctionName)350, 1, isSupportedByOctp: false, isOver100LbTank: true);

		public static readonly LPTankName Submarine3 = new LPTankName((FunctionName)350, 2, isSupportedByOctp: false, isOver100LbTank: true);

		public static readonly LPTankName Other1 = new LPTankName((FunctionName)351, 0, isSupportedByOctp: true, isOver100LbTank: false);

		public static readonly LPTankName Other2 = new LPTankName((FunctionName)351, 1, isSupportedByOctp: true, isOver100LbTank: false);

		public static readonly LPTankName Other3 = new LPTankName((FunctionName)351, 2, isSupportedByOctp: true, isOver100LbTank: false);

		private const string LogTag = "LPTankName";

		[field: CompilerGenerated]
		public static IEnumerable<LPTankName> Values
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public FunctionName FunctionName
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public byte FunctionInstance
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public string Name
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public bool IsSupportedByOCTP
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public bool IsOver100LbTank
		{
			[CompilerGenerated]
			get;
		}

		public static LPTankName GetByFunctionNameAndInstance(FunctionName functionName, int functionInstance)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			//IL_005d: Expected O, but got Unknown
			<>c__DisplayClass25_0 CS$<>8__locals6 = new <>c__DisplayClass25_0();
			CS$<>8__locals6.functionName = functionName;
			CS$<>8__locals6.functionInstance = functionInstance;
			TaggedLog.Debug("LPTankName", String.Format("LPTankName GetByFunctionNameAndInstance: {0}, {1}", (object)CS$<>8__locals6.functionName, (object)CS$<>8__locals6.functionInstance), Array.Empty<object>());
			try
			{
				return Enumerable.First<LPTankName>(Values, (Func<LPTankName, bool>)delegate(LPTankName x)
				{
					//IL_0001: Unknown result type (might be due to invalid IL or missing references)
					//IL_000e: Unknown result type (might be due to invalid IL or missing references)
					//IL_0013: Unknown result type (might be due to invalid IL or missing references)
					//IL_001b: Unknown result type (might be due to invalid IL or missing references)
					FunctionName functionName2 = x.FunctionName;
					byte functionInstance2 = x.FunctionInstance;
					FunctionName val = CS$<>8__locals6.functionName;
					int num = CS$<>8__locals6.functionInstance;
					return functionName2 == val && functionInstance2 == num;
				});
			}
			catch (Exception ex)
			{
				Exception ex2 = ex;
				TaggedLog.Error("LPTankName", String.Format("Error getting LPTankName: {0}", (object)ex2), Array.Empty<object>());
				return Rv1;
			}
		}

		private LPTankName(FunctionName functionName, byte functionInstance, bool isSupportedByOctp, bool isOver100LbTank)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			//IL_0015: Unknown result type (might be due to invalid IL or missing references)
			FunctionName = functionName;
			FunctionInstance = functionInstance;
			Name = LogicalDeviceIdFormatExtension.FormatFunctionNameWithFunctionInstance(FunctionNameExtension.ToFunctionName(functionName), (int)functionInstance, false);
			IsSupportedByOCTP = isSupportedByOctp;
			IsOver100LbTank = isOver100LbTank;
		}

		public override string ToString()
		{
			return Name;
		}

		static LPTankName()
		{
			List<LPTankName> obj = new List<LPTankName>();
			obj.Add(Rv1);
			obj.Add(Rv2);
			obj.Add(Rv3);
			obj.Add(Home1);
			obj.Add(Home2);
			obj.Add(Home3);
			obj.Add(Cabin1);
			obj.Add(Cabin2);
			obj.Add(Cabin3);
			obj.Add(Bbq1);
			obj.Add(Bbq2);
			obj.Add(Bbq3);
			obj.Add(Grill1);
			obj.Add(Grill2);
			obj.Add(Grill3);
			obj.Add(Submarine1);
			obj.Add(Submarine2);
			obj.Add(Submarine3);
			obj.Add(Other1);
			obj.Add(Other2);
			obj.Add(Other3);
			Values = (IEnumerable<LPTankName>)(object)obj;
		}
	}
	public enum TankHeightUnits : Enum
	{
		Centimeters,
		Inches
	}
	public enum LPTankUnit : Enum
	{
		Lb,
		Gal,
		Kilogram
	}
	public enum LPTankOrientation : Enum
	{
		Vertical,
		Horizontal
	}
	public interface ILPTankSize
	{
		int Id { get; }

		float TankHeightInMm { get; }

		float Amount { get; }

		LPTankUnit Unit { get; }

		LPTankOrientation Orientation { get; }
	}
	public static class LPTankSizes : Object
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass16_0 : Object
		{
			public int id;

			internal bool <GetById>b__0(LPTankSize x)
			{
				return x.Id == id;
			}
		}

		public static readonly int ArbitraryTankSizeId = 0;

		public static readonly LPTankSize Lp20lbVertical = new LPTankSize(1, 20f, LPTankUnit.Lb, LPTankOrientation.Vertical, 254f);

		public static readonly LPTankSize Lp30lbVertical = new LPTankSize(2, 30f, LPTankUnit.Lb, LPTankOrientation.Vertical, 381f);

		public static readonly LPTankSize Lp40lbVertical = new LPTankSize(3, 40f, LPTankUnit.Lb, LPTankOrientation.Vertical, 508f);

		public static readonly LPTankSize Lp100lbVertical = new LPTankSize(4, 100f, LPTankUnit.Lb, LPTankOrientation.Vertical, 812.8f);

		public static readonly LPTankSize Lp120galVertical = new LPTankSize(5, 120f, LPTankUnit.Gal, LPTankOrientation.Vertical, 975.36f);

		public static readonly LPTankSize Lp120galHorizontal = new LPTankSize(6, 120f, LPTankUnit.Gal, LPTankOrientation.Horizontal, 609.6f);

		public static readonly LPTankSize Lp150galHorizontal = new LPTankSize(7, 150f, LPTankUnit.Gal, LPTankOrientation.Horizontal, 609.6f);

		public static readonly LPTankSize Lp250galHorizontal = new LPTankSize(8, 250f, LPTankUnit.Gal, LPTankOrientation.Horizontal, 762f);

		public static readonly LPTankSize Lp500galHorizontal = new LPTankSize(9, 500f, LPTankUnit.Gal, LPTankOrientation.Horizontal, 939.8f);

		public static readonly LPTankSize Lp1000galHorizontal = new LPTankSize(10, 1000f, LPTankUnit.Gal, LPTankOrientation.Horizontal, 1041.4f);

		public static readonly LPTankSize Lp3_7kgVertical = new LPTankSize(11, 3.7f, LPTankUnit.Kilogram, LPTankOrientation.Vertical, 235f);

		public static readonly LPTankSize Lp8_5kgVertical = new LPTankSize(12, 8.5f, LPTankUnit.Kilogram, LPTankOrientation.Vertical, 342f);

		[field: CompilerGenerated]
		public static IEnumerable<LPTankSize> KnownSizes
		{
			[CompilerGenerated]
			get;
		}

		public static LPTankSize GetById(int id)
		{
			<>c__DisplayClass16_0 CS$<>8__locals2 = new <>c__DisplayClass16_0();
			CS$<>8__locals2.id = id;
			return Enumerable.First<LPTankSize>(KnownSizes, (Func<LPTankSize, bool>)((LPTankSize x) => x.Id == CS$<>8__locals2.id));
		}

		static LPTankSizes()
		{
			List<LPTankSize> obj = new List<LPTankSize>();
			obj.Add(Lp20lbVertical);
			obj.Add(Lp30lbVertical);
			obj.Add(Lp40lbVertical);
			obj.Add(Lp100lbVertical);
			obj.Add(Lp120galVertical);
			obj.Add(Lp120galHorizontal);
			obj.Add(Lp150galHorizontal);
			obj.Add(Lp250galHorizontal);
			obj.Add(Lp500galHorizontal);
			obj.Add(Lp1000galHorizontal);
			obj.Add(Lp3_7kgVertical);
			obj.Add(Lp8_5kgVertical);
			KnownSizes = (IEnumerable<LPTankSize>)(object)obj;
		}
	}
	public class LPTankSize : Object, ILPTankSize
	{
		[field: CompilerGenerated]
		public int Id
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public float Amount
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LPTankUnit Unit
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LPTankOrientation Orientation
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public float TankHeightInMm
		{
			[CompilerGenerated]
			get;
		}

		internal LPTankSize(int id, float amount, LPTankUnit unit, LPTankOrientation orientation, float tankHeightInMm)
		{
			Id = id;
			Amount = amount;
			Unit = unit;
			Orientation = orientation;
			TankHeightInMm = tankHeightInMm;
		}
	}
	public class ArbitraryTankSize : Object, ILPTankSize
	{
		public int Id => LPTankSizes.ArbitraryTankSizeId;

		[field: CompilerGenerated]
		public float TankHeightInMm
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		}

		[field: CompilerGenerated]
		public float Amount
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LPTankUnit Unit
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LPTankOrientation Orientation
		{
			[CompilerGenerated]
			get;
		}

		public ArbitraryTankSize(float tankHeightInMm)
		{
			TankHeightInMm = tankHeightInMm;
		}

		public ArbitraryTankSize(float tankHeightInMm, float amount, LPTankUnit unit, LPTankOrientation orientation)
		{
			TankHeightInMm = tankHeightInMm;
			Amount = amount;
			Unit = unit;
			Orientation = orientation;
		}
	}
	public class NotificationSettingsUpdatedEventArgs : Object
	{
		[field: CompilerGenerated]
		public static string MessageId
		{
			[CompilerGenerated]
			get;
		} = "NotificationSettingsUpdatedEventArgs";

		[field: CompilerGenerated]
		public ILogicalDeviceTankSensor Device
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public bool IsThresholdNotificationEnabled
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public int NotificationThresholdAsPercent
		{
			[CompilerGenerated]
			get;
		}

		public NotificationSettingsUpdatedEventArgs(ILogicalDeviceTankSensor device, bool isThresholdNotificationEnabled, int notificationThresholdAsPercent)
		{
			Device = device;
			IsThresholdNotificationEnabled = isThresholdNotificationEnabled;
			NotificationThresholdAsPercent = notificationThresholdAsPercent;
		}
	}
}
namespace OneControl.Devices.RelayHBridge.Type2
{
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceRelayHBridgeStatusType2Serializable : LogicalDeviceStatusSerializableBase<LogicalDeviceRelayHBridgeStatusType2Serializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceRelayHBridgeStatusType2Serializable);
			}
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public RelayHBridgeDirection State
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool UserClearRequired
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool ReverseCommandNotHazardous
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool ForwardCommandNotHazardous
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte Position
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public float CurrentDrawAmps
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public DTC_ID UserMessageDtc
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceRelayHBridgeStatusType2Serializable(RelayHBridgeDirection state, bool userClearRequired, bool reverseCommandNotHazardous, bool forwardCommandNotHazardous, byte position, float currentDrawAmps, DTC_ID userMessageDtc)
		{
			//IL_0034: Unknown result type (might be due to invalid IL or missing references)
			//IL_0036: Unknown result type (might be due to invalid IL or missing references)
			State = state;
			UserClearRequired = userClearRequired;
			ReverseCommandNotHazardous = reverseCommandNotHazardous;
			ForwardCommandNotHazardous = forwardCommandNotHazardous;
			Position = position;
			CurrentDrawAmps = currentDrawAmps;
			UserMessageDtc = userMessageDtc;
		}

		public LogicalDeviceRelayHBridgeStatusType2Serializable(LogicalDeviceRelayHBridgeStatusType2 relayStatus)
			: this(relayStatus.State, relayStatus.UserClearRequired, relayStatus.CommandReverseNotHazardous, relayStatus.CommandForwardNotHazardous, relayStatus.Position, relayStatus.CurrentDrawAmps, relayStatus.UserMessageDtc)
		{
		}//IL_0026: Unknown result type (might be due to invalid IL or missing references)


		public override byte[] MakeRawData()
		{
			//IL_0054: Unknown result type (might be due to invalid IL or missing references)
			LogicalDeviceRelayHBridgeStatusType2 logicalDeviceRelayHBridgeStatusType = new LogicalDeviceRelayHBridgeStatusType2();
			logicalDeviceRelayHBridgeStatusType.SetState(State);
			logicalDeviceRelayHBridgeStatusType.SetUserClearRequired(UserClearRequired);
			logicalDeviceRelayHBridgeStatusType.SetCommandReverseNotHazardous(ReverseCommandNotHazardous);
			logicalDeviceRelayHBridgeStatusType.SetCommandForwardNotHazardous(ForwardCommandNotHazardous);
			logicalDeviceRelayHBridgeStatusType.SetPosition(Position);
			logicalDeviceRelayHBridgeStatusType.SetCurrentDrawAmps(CurrentDrawAmps);
			logicalDeviceRelayHBridgeStatusType.SetUserMessageDtc(UserMessageDtc);
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayHBridgeStatusType).CopyCurrentData();
		}

		public static LogicalDeviceRelayHBridgeStatusType2Serializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceRelayHBridgeStatusType2 logicalDeviceRelayHBridgeStatusType = new LogicalDeviceRelayHBridgeStatusType2();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayHBridgeStatusType).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayHBridgeStatusType).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayHBridgeStatusType).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayHBridgeStatusType).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceRelayHBridgeStatusType).Update(rawData, rawData.Length, false);
			return new LogicalDeviceRelayHBridgeStatusType2Serializable(logicalDeviceRelayHBridgeStatusType);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceRelayHBridgeStatusType2Serializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceRelayHBridgeStatusType2Serializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			//IL_010d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0112: Unknown result type (might be due to invalid IL or missing references)
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("State = ");
			builder.Append(((Object)State/*cast due to .constrained prefix*/).ToString());
			builder.Append(", UserClearRequired = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref UserClearRequired)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ReverseCommandNotHazardous = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref ReverseCommandNotHazardous)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ForwardCommandNotHazardous = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref ForwardCommandNotHazardous)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Position = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref Position)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", CurrentDrawAmps = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref CurrentDrawAmps)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", UserMessageDtc = ");
			builder.Append(((Object)UserMessageDtc/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			//IL_009c: Unknown result type (might be due to invalid IL or missing references)
			return ((((((base.GetHashCode() * -1521134295 + EqualityComparer<RelayHBridgeDirection>.Default.GetHashCode(State)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(UserClearRequired)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(ReverseCommandNotHazardous)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(ForwardCommandNotHazardous)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(Position)) * -1521134295 + EqualityComparer<float>.Default.GetHashCode(CurrentDrawAmps)) * -1521134295 + EqualityComparer<DTC_ID>.Default.GetHashCode(UserMessageDtc);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceRelayHBridgeStatusType2Serializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceRelayHBridgeStatusType2Serializable(LogicalDeviceRelayHBridgeStatusType2Serializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceRelayHBridgeStatusType2Serializable>)original)
		{
			//IL_0051: Unknown result type (might be due to invalid IL or missing references)
			//IL_0056: Unknown result type (might be due to invalid IL or missing references)
			State = original.State;
			UserClearRequired = original.UserClearRequired;
			ReverseCommandNotHazardous = original.ReverseCommandNotHazardous;
			ForwardCommandNotHazardous = original.ForwardCommandNotHazardous;
			Position = original.Position;
			CurrentDrawAmps = original.CurrentDrawAmps;
			UserMessageDtc = original.UserMessageDtc;
		}
	}
}
namespace OneControl.Devices.RelayBasic.Remote
{
	public class RemoteRelayBasic<TRelayBasicStatus> : RemoteSwitch<ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus>> where TRelayBasicStatus : class, ILogicalDeviceRelayBasicStatus, new()
	{
		protected override void RemoteUpdateSwitchState(bool value)
		{
			if (!(((ILogicalDeviceWithStatus<TRelayBasicStatus>)LogicalDevice).DeviceStatus.CopyStatus() is TRelayBasicStatus val))
			{
				Log.Error<Type>("RemoteRelayBasic: Unexpected type received.  Can't convert to {Type}", typeof(TRelayBasicStatus));
				return;
			}
			val.SetState(value);
			((ILogicalDeviceWithStatusUpdate<TRelayBasicStatus>)LogicalDevice).UpdateDeviceStatus(val);
		}

		public RemoteRelayBasic(ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus> logicalDevice, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "switch", commandControl, channelCollection)
		{
		}
	}
	public class RemoteRelayBasicCurrentDraw<TRelayBasicStatus> : RemoteBase<ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus>, IRemoteChannelDefCurrentDraw> where TRelayBasicStatus : class, ILogicalDeviceRelayBasicStatus, new()
	{
		public RemoteRelayBasicCurrentDraw(ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus> logicalDevice, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "current", channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<float>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannel;
			}
		}

		public void UpdateChannel(IRemoteChannelDef remoteChannelDef, float current)
		{
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			if (LogicalDevice == null || ((CommonDisposable)this).IsDisposed)
			{
				return;
			}
			ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus> logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				if (!(((ILogicalDeviceWithStatus<TRelayBasicStatus>)LogicalDevice).DeviceStatus.CopyStatus() is TRelayBasicStatus val))
				{
					Log.Error<Type>("RemoteRelayPosition: Unexpected type received.  Can't convert to {Type}", typeof(TRelayBasicStatus));
					return;
				}
				val.SetCurrentDrawAmps(current);
				((ILogicalDeviceWithStatusUpdate<TRelayBasicStatus>)LogicalDevice).UpdateDeviceStatus(val);
			}
		}
	}
	public class RemoteRelayBasicFault<TRelayBasicStatus> : RemoteFault<ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus>> where TRelayBasicStatus : class, ILogicalDeviceRelayBasicStatus, new()
	{
		public RemoteRelayBasicFault(ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus> logicalDevice, RemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, commandControl, channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<bool>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateFault;
			}
		}

		public void UpdateFault(IRemoteChannelDef remoteChannelDef, bool isFaulted)
		{
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			if (LogicalDevice == null || ((CommonDisposable)this).IsDisposed)
			{
				return;
			}
			ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus> logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				if (!(((ILogicalDeviceWithStatus<TRelayBasicStatus>)LogicalDevice).DeviceStatus.CopyStatus() is TRelayBasicStatus val))
				{
					Log.Error<Type>("RemoteRelayFault: Unexpected type received.  Can't convert to {Type}", typeof(TRelayBasicStatus));
					return;
				}
				val.SetFault(isFaulted);
				((ILogicalDeviceWithStatusUpdate<TRelayBasicStatus>)LogicalDevice).UpdateDeviceStatus(val);
			}
		}
	}
	public class RemoteRelayBasicPosition<TRelayBasicStatus> : RemoteBase<ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus>, IRemoteChannelDefPosition> where TRelayBasicStatus : class, ILogicalDeviceRelayBasicStatus, new()
	{
		public RemoteRelayBasicPosition(ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus> logicalDevice, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "percent", channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<uint>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannel;
			}
		}

		public void UpdateChannel(IRemoteChannelDef remoteChannelDef, uint position)
		{
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			if (LogicalDevice == null || ((CommonDisposable)this).IsDisposed)
			{
				return;
			}
			ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus> logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				if (position > 255)
				{
					Log.Error<uint>("RemoteRelayPosition: Unexpected value of {Position} received", position);
					return;
				}
				if (!(((ILogicalDeviceWithStatus<TRelayBasicStatus>)LogicalDevice).DeviceStatus.CopyStatus() is TRelayBasicStatus val))
				{
					Log.Error<Type>("RemoteRelayPosition: Unexpected type received.  Can't convert to {Type}", typeof(TRelayBasicStatus));
					return;
				}
				val.SetPosition((byte)position);
				((ILogicalDeviceWithStatusUpdate<TRelayBasicStatus>)LogicalDevice).UpdateDeviceStatus(val);
			}
		}
	}
	public class RemoteRelayBasicUserClearRequired<TRelayBasicStatus> : RemoteUserClearRequired<ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus>> where TRelayBasicStatus : class, ILogicalDeviceRelayBasicStatus, new()
	{
		public RemoteRelayBasicUserClearRequired(ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus> logicalDevice, RemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, commandControl, channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<bool>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateFault;
			}
		}

		public void UpdateFault(IRemoteChannelDef remoteChannelDef, bool isFaulted)
		{
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			if (LogicalDevice == null || ((CommonDisposable)this).IsDisposed)
			{
				return;
			}
			ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus> logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				if (!(((ILogicalDeviceWithStatus<TRelayBasicStatus>)LogicalDevice).DeviceStatus.CopyStatus() is TRelayBasicStatus val))
				{
					Log.Error<Type>("RemoteRelayUserClearRequired: Unexpected type received.  Can't convert to {Type}", typeof(TRelayBasicStatus));
					return;
				}
				val.SetUserClearRequired(isFaulted);
				((ILogicalDeviceWithStatusUpdate<TRelayBasicStatus>)LogicalDevice).UpdateDeviceStatus(val);
			}
		}
	}
	public class RemoteRelayBasicUserMessageDtc<TRelayBasicStatus> : RemoteBase<ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus>, IRemoteChannelDefDtcId> where TRelayBasicStatus : class, ILogicalDeviceRelayBasicStatus, new()
	{
		public RemoteRelayBasicUserMessageDtc(ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus> logicalDevice, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "output-disable-cause", channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<DTC_ID>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannel;
			}
		}

		public void UpdateChannel(IRemoteChannelDef remoteChannelDef, DTC_ID dtc)
		{
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0077: Unknown result type (might be due to invalid IL or missing references)
			if (LogicalDevice == null || ((CommonDisposable)this).IsDisposed)
			{
				return;
			}
			ILogicalDeviceLatchingRelayRemote<TRelayBasicStatus> logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				if (!(((ILogicalDeviceWithStatus<TRelayBasicStatus>)LogicalDevice).DeviceStatus.CopyStatus() is TRelayBasicStatus val))
				{
					Log.Error<Type>("RemoteRelayPosition: Unexpected type received.  Can't convert to {Type}", typeof(TRelayBasicStatus));
					return;
				}
				val.SetUserMessageDtc(dtc);
				((ILogicalDeviceWithStatusUpdate<TRelayBasicStatus>)LogicalDevice).UpdateDeviceStatus(val);
			}
		}
	}
}
namespace OneControl.Devices.OneControlTouchPanel
{
	public interface IOneControlTouchPanel
	{
	}
	public interface ILogicalDeviceOneControlTouchPanel : IOneControlTouchPanel, ILogicalDeviceWithCapability<ILogicalDeviceOneControlTouchPanelCapability>, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatus<LogicalDeviceOneControlTouchPanelStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceOneControlTouchPanelStatus>, IHighResolutionTankSupport
	{
	}
	public interface ILogicalDeviceOneControlTouchPanelDirect : ILogicalDeviceOneControlTouchPanel, IOneControlTouchPanel, ILogicalDeviceWithCapability<ILogicalDeviceOneControlTouchPanelCapability>, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatus<LogicalDeviceOneControlTouchPanelStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceOneControlTouchPanelStatus>, IHighResolutionTankSupport, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public class LogicalDeviceOneControlTouchPanel : LogicalDevice<LogicalDeviceOneControlTouchPanelStatus, ILogicalDeviceOneControlTouchPanelCapability>, ILogicalDeviceOneControlTouchPanelDirect, ILogicalDeviceOneControlTouchPanel, IOneControlTouchPanel, ILogicalDeviceWithCapability<ILogicalDeviceOneControlTouchPanelCapability>, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatus<LogicalDeviceOneControlTouchPanelStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceOneControlTouchPanelStatus>, IHighResolutionTankSupport, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryAreHighResolutionTanksSupportedAsync>d__4 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceOneControlTouchPanel <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<string> <>u__1;

			private void MoveNext()
			{
				//IL_008b: Expected O, but got Unknown
				//IL_00ad: Expected O, but got Unknown
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_005f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				//IL_0039: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceOneControlTouchPanel logicalDeviceOneControlTouchPanel = <>4__this;
				bool result2;
				try
				{
					TaskAwaiter<string> val;
					if (num != 0)
					{
						val = ((LogicalDevice<ILogicalDeviceOneControlTouchPanelCapability>)(object)logicalDeviceOneControlTouchPanel).GetSoftwarePartNumberAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<string>, <TryAreHighResolutionTanksSupportedAsync>d__4>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<string>);
						num = (<>1__state = -1);
					}
					string result = val.GetResult();
					try
					{
						result2 = Version.Parse(result) >= HighResolutionTankSupportVersion;
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Error("LogicalDeviceOneControlTouchPanel", String.Format("Error parsing OCTP partNumber: {0} {1}", (object)result, (object)ex2), Array.Empty<object>());
						result2 = false;
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceOneControlTouchPanel";

		private static readonly Version HighResolutionTankSupportVersion = Version.Parse("10.0.0");

		public LogicalDeviceOneControlTouchPanel(ILogicalDeviceId logicalDeviceId, ILogicalDeviceOneControlTouchPanelCapability capability, LogicalDeviceOneControlTouchPanelStatus status, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, status, capability, service, isFunctionClassChangeable)
		{
		}

		public LogicalDeviceOneControlTouchPanel(ILogicalDeviceId logicalDeviceId, LogicalDeviceOneControlTouchPanelCapability capability, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: this(logicalDeviceId, capability, new LogicalDeviceOneControlTouchPanelStatus(), service, isFunctionClassChangeable)
		{
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TryAreHighResolutionTanksSupportedAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryAreHighResolutionTanksSupportedAsync>d__4 <TryAreHighResolutionTanksSupportedAsync>d__ = default(<TryAreHighResolutionTanksSupportedAsync>d__4);
			<TryAreHighResolutionTanksSupportedAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TryAreHighResolutionTanksSupportedAsync>d__.<>4__this = this;
			<TryAreHighResolutionTanksSupportedAsync>d__.cancellationToken = cancellationToken;
			<TryAreHighResolutionTanksSupportedAsync>d__.<>1__state = -1;
			<TryAreHighResolutionTanksSupportedAsync>d__.<>t__builder.Start<<TryAreHighResolutionTanksSupportedAsync>d__4>(ref <TryAreHighResolutionTanksSupportedAsync>d__);
			return <TryAreHighResolutionTanksSupportedAsync>d__.<>t__builder.Task;
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceOneControlTouchPanelCapability>)(object)this).LastReceivedNetworkStatus;
		}
	}
	[Flags]
	public enum OneControlTouchPanelCapabilityFlag : Enum
	{
		None = 0,
		SupportsHighResolutionTanks = 1,
		HasStaticMacAddress = 2,
		Reserved2 = 4,
		Reserved3 = 8,
		Reserved4 = 0x10,
		Reserved5 = 0x20,
		Reserved6 = 0x40,
		Reserved7 = 0x80
	}
	public interface ILogicalDeviceOneControlTouchPanelCapability : ILogicalDeviceCapability, INotifyPropertyChanged
	{
		bool IsHighResolutionTanksSupported { get; }

		bool HasStaticMacAddress { get; }
	}
	public class LogicalDeviceOneControlTouchPanelCapability : LogicalDeviceCapability, ILogicalDeviceOneControlTouchPanelCapability, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		private OneControlTouchPanelCapabilityFlag _capabilityFlag => (OneControlTouchPanelCapabilityFlag)base.RawValue;

		public bool IsHighResolutionTanksSupported => ((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)OneControlTouchPanelCapabilityFlag.SupportsHighResolutionTanks);

		public bool HasStaticMacAddress => ((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)OneControlTouchPanelCapabilityFlag.HasStaticMacAddress);

		public LogicalDeviceOneControlTouchPanelCapability(Nullable<byte> rawCapability)
			: base(rawCapability)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(rawCapability);
		}

		public LogicalDeviceOneControlTouchPanelCapability(OneControlTouchPanelCapabilityFlag capabilityFlags)
			: this(new Nullable<byte>((byte)capabilityFlags))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)


		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsHighResolutionTanksSupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("HasStaticMacAddress");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}
	}
	public class LogicalDeviceOneControlTouchPanelFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice? MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 21)
			{
				return null;
			}
			return (ILogicalDevice?)(object)new LogicalDeviceOneControlTouchPanel(logicalDeviceId, new LogicalDeviceOneControlTouchPanelCapability(rawCapability), service);
		}
	}
	public class LogicalDeviceOneControlTouchPanelSim : LogicalDeviceOneControlTouchPanel, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SimulatorAsync>d__10 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public CancellationToken cancellationToken;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_007f: Expected O, but got Unknown
				//IL_004c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0051: Unknown result type (might be due to invalid IL or missing references)
				//IL_0058: Unknown result type (might be due to invalid IL or missing references)
				//IL_0012: Unknown result type (might be due to invalid IL or missing references)
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				try
				{
					if (num != 0)
					{
						goto IL_006f;
					}
					TaskAwaiter<bool> val = <>u__1;
					<>u__1 = default(TaskAwaiter<bool>);
					num = (<>1__state = -1);
					goto IL_0067;
					IL_0067:
					val.GetResult();
					goto IL_006f;
					IL_006f:
					if (!((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
					{
						val = TaskExtension.TryDelay(1000, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SimulatorAsync>d__10>(ref val, ref this);
							return;
						}
						goto IL_0067;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceOneControlTouchPanelSim";

		private const int StatusLength = 0;

		private readonly LogicalDeviceOneControlTouchPanelStatus _simStatus = new LogicalDeviceOneControlTouchPanelStatus();

		private readonly BackgroundOperation _simulator;

		public const int TickIntervalMs = 1000;

		private readonly byte[] _statusData = (byte[])(object)new Byte[0];

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public LogicalDeviceOneControlTouchPanelSim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceOneControlTouchPanelCapability capability, LogicalDeviceOneControlTouchPanelStatus status, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, capability, status, service, isFunctionClassChangeable)
		{
			//IL_005d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0067: Expected O, but got Unknown
			//IL_0062: Unknown result type (might be due to invalid IL or missing references)
			//IL_006c: Expected O, but got Unknown
			((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Update(_statusData, 0, false);
			((LogicalDevice<LogicalDeviceOneControlTouchPanelStatus, ILogicalDeviceOneControlTouchPanelCapability>)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Size);
			_simulator = new BackgroundOperation(new BackgroundOperationFunc(SimulatorAsync));
			_simulator.Start();
		}

		public override void UpdateDeviceOnline(bool online)
		{
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task SimulatorAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_000e: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			<SimulatorAsync>d__10 <SimulatorAsync>d__ = default(<SimulatorAsync>d__10);
			<SimulatorAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SimulatorAsync>d__.cancellationToken = cancellationToken;
			<SimulatorAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Start<<SimulatorAsync>d__10>(ref <SimulatorAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Task;
		}

		public override void Dispose(bool disposing)
		{
			((LogicalDevice<LogicalDeviceOneControlTouchPanelStatus, ILogicalDeviceOneControlTouchPanelCapability>)this).Dispose(disposing);
			_simulator.Stop();
		}
	}
	public class LogicalDeviceOneControlTouchPanelStatus : LogicalDeviceStatusPacketMutable
	{
		public const int MinimumStatusPacketSize = 0;

		public LogicalDeviceOneControlTouchPanelStatus()
			: base(0u)
		{
		}

		public LogicalDeviceOneControlTouchPanelStatus(LogicalDeviceOneControlTouchPanelStatus newStatus)
		{
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)newStatus).Data;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(data, (int)((LogicalDeviceDataPacketMutableDoubleBuffer)newStatus).Size, false);
		}
	}
}
namespace OneControl.Devices.LightRgb
{
	public class LogicalDeviceLightRgbCommand : LogicalDeviceCommandPacket
	{
		public const int CommandPacketSize = 8;

		public const uint LightModeByteIndex = 0u;

		public const uint ColorRedByteIndex = 1u;

		public const uint ColorGreenByteIndex = 2u;

		public const uint ColorBlueByteIndex = 3u;

		public const uint AutoOffDurationByteIndex = 4u;

		public const uint IntervalMsbIndex = 5u;

		public const uint IntervalLsbIndex = 6u;

		public const uint UnusedByteIndex = 7u;

		public RgbLightModeCommand Mode
		{
			get
			{
				try
				{
					return LogicalDeviceLightRgbMode.RgbLightModeCommandFromByte(((LogicalDeviceCommandPacket)this).Data[0]);
				}
				catch (Object)
				{
					return RgbLightModeCommand.Off;
				}
			}
		}

		public RgbColor Color => new RgbColor(((LogicalDeviceCommandPacket)this).Data[1], ((LogicalDeviceCommandPacket)this).Data[2], ((LogicalDeviceCommandPacket)this).Data[3]);

		public byte AutoOffDuration => ((LogicalDeviceCommandPacket)this).Data[4];

		public bool OnOffIntervalValid => Mode == RgbLightModeCommand.Blink;

		public byte OnInterval => ((LogicalDeviceCommandPacket)this).Data[5];

		public byte OffInterval => ((LogicalDeviceCommandPacket)this).Data[6];

		public bool IntervalValid => ((int)Mode > 2) & ((int)Mode < 127);

		public ushort Interval => (ushort)((((LogicalDeviceCommandPacket)this).Data[5] << 8) | ((LogicalDeviceCommandPacket)this).Data[6]);

		public IReadOnlyList<byte> DataMinimum
		{
			get
			{
				//IL_0029: Unknown result type (might be due to invalid IL or missing references)
				//IL_0085: Unknown result type (might be due to invalid IL or missing references)
				switch (Mode)
				{
				case RgbLightModeCommand.Off:
				case RgbLightModeCommand.On:
				case RgbLightModeCommand.Blink:
				case RgbLightModeCommand.Restore:
					return (IReadOnlyList<byte>)(object)new ArraySegment<byte>(((LogicalDeviceCommandPacket)this).Data, 0, DataMinimumLength(Mode));
				case RgbLightModeCommand.Jump3:
				case RgbLightModeCommand.Jump7:
				case RgbLightModeCommand.Fade3:
				case RgbLightModeCommand.Fade7:
				case RgbLightModeCommand.Rainbow:
				{
					Byte[] array = new Byte[DataMinimumLength(Mode)];
					array[0] = (Byte)Mode;
					array[1] = ((LogicalDeviceCommandPacket)this).Data[4];
					array[2] = ((LogicalDeviceCommandPacket)this).Data[5];
					array[3] = ((LogicalDeviceCommandPacket)this).Data[6];
					return (IReadOnlyList<byte>)(object)array;
				}
				default:
					throw new NotSupportedException(String.Format("Command {0} not supported", (object)Mode));
				}
			}
		}

		public static LogicalDeviceLightRgbCommand MakeOffCommand(LogicalDeviceLightRgbStatus lastKnownStatus)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0005: Unknown result type (might be due to invalid IL or missing references)
			return new LogicalDeviceLightRgbCommand(RgbLightModeCommand.Off, lastKnownStatus?.Color ?? RgbColor.op_Implicit(0), lastKnownStatus?.AutoOffDuration ?? 0, lastKnownStatus?.Interval ?? 0);
		}

		public static LogicalDeviceLightRgbCommand MakeOnCommand(RgbColor color, byte autoOffDuration, LogicalDeviceLightRgbStatus lastKnownStatus)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return new LogicalDeviceLightRgbCommand(RgbLightModeCommand.On, color, autoOffDuration, lastKnownStatus?.Interval ?? 0);
		}

		public static LogicalDeviceLightRgbCommand MakeBlinkCommand(RgbColor color, byte autoOffDuration, byte onInterval, byte offInterval)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return new LogicalDeviceLightRgbCommand(RgbLightModeCommand.Blink, color, autoOffDuration, onInterval, offInterval);
		}

		public static LogicalDeviceLightRgbCommand MakeTrasitionModeCommand(RgbLightTransitionMode mode, byte autoOffDuration, ushort interval)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			return new LogicalDeviceLightRgbCommand(LogicalDeviceLightRgbMode.RgbLightModeCommandFromByte((byte)mode), RgbColor.op_Implicit(0), autoOffDuration, interval);
		}

		public static LogicalDeviceLightRgbCommand MakeSleepDurationCommand(RgbLightMode mode, RgbColor color, byte autoOffDuration, ushort interval, bool forceTimerReset)
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_00b6: Unknown result type (might be due to invalid IL or missing references)
			RgbColor color2 = color;
			if (forceTimerReset)
			{
				if (((RgbColor)(ref color)).Red >= ((RgbColor)(ref color)).Green && ((RgbColor)(ref color)).Red >= ((RgbColor)(ref color)).Blue)
				{
					((RgbColor)(ref color2))..ctor(ToggleLowBit(((RgbColor)(ref color)).Red), ((RgbColor)(ref color)).Green, ((RgbColor)(ref color)).Blue);
				}
				else if (((RgbColor)(ref color)).Green >= ((RgbColor)(ref color)).Red && ((RgbColor)(ref color)).Green >= ((RgbColor)(ref color)).Blue)
				{
					((RgbColor)(ref color2))..ctor(((RgbColor)(ref color)).Red, ToggleLowBit(((RgbColor)(ref color)).Green), ((RgbColor)(ref color)).Blue);
				}
				else
				{
					((RgbColor)(ref color2))..ctor(((RgbColor)(ref color)).Red, ((RgbColor)(ref color)).Green, ToggleLowBit(((RgbColor)(ref color)).Blue));
				}
			}
			return new LogicalDeviceLightRgbCommand(LogicalDeviceLightRgbMode.RgbLightModeCommandFromByte((byte)mode), color2, autoOffDuration, interval);
			[CompilerGenerated]
			static byte ToggleLowBit(byte colorByte)
			{
				byte b = (((colorByte & 1) == 0) ? ((byte)1) : ((byte)0));
				return (byte)((colorByte & 0xFE) | b);
			}
		}

		public static LogicalDeviceLightRgbCommand MakeRestoreCommand()
		{
			//IL_0003: Unknown result type (might be due to invalid IL or missing references)
			return new LogicalDeviceLightRgbCommand(RgbLightModeCommand.Restore, RgbColor.op_Implicit(0), 0, 0);
		}

		public LogicalDeviceLightRgbCommand()
			: this(RgbLightModeCommand.Off, RgbColor.op_Implicit(0), 0, 0)
		{
		}//IL_0003: Unknown result type (might be due to invalid IL or missing references)


		public LogicalDeviceLightRgbCommand(byte commandByte, IReadOnlyList<byte> data)
			: base(commandByte, data, 200)
		{
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			if (((IReadOnlyCollection<byte>)(object)data).Count != 8)
			{
				throw new ArgumentOutOfRangeException(String.Format("LogicalDeviceLightRgbCommand only supports data with a byte length of {0}", (object)8));
			}
		}

		internal LogicalDeviceLightRgbCommand(RgbLightModeCommand mode, RgbColor color, byte autoOffDuration, ushort interval)
			: this(mode, color, autoOffDuration, (byte)((interval & 0xFF00) >> 8), (byte)(interval & 0xFF))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)


		private LogicalDeviceLightRgbCommand(RgbLightModeCommand mode, RgbColor color, byte autoOffDuration, byte onInterval, byte offInterval)
			: this(0, (IReadOnlyList<byte>)(object)new Byte[8])
		{
			((LogicalDeviceCommandPacket)this).Data[0] = (byte)mode;
			((LogicalDeviceCommandPacket)this).Data[1] = ((RgbColor)(ref color)).Red;
			((LogicalDeviceCommandPacket)this).Data[2] = ((RgbColor)(ref color)).Green;
			((LogicalDeviceCommandPacket)this).Data[3] = ((RgbColor)(ref color)).Blue;
			((LogicalDeviceCommandPacket)this).Data[4] = autoOffDuration;
			((LogicalDeviceCommandPacket)this).Data[5] = onInterval;
			((LogicalDeviceCommandPacket)this).Data[6] = offInterval;
			((LogicalDeviceCommandPacket)this).Data[7] = 0;
		}

		public override string ToString()
		{
			//IL_0060: Unknown result type (might be due to invalid IL or missing references)
			//IL_0097: Unknown result type (might be due to invalid IL or missing references)
			switch (Mode)
			{
			case RgbLightModeCommand.Off:
			case RgbLightModeCommand.Restore:
				return String.Format("{0}", (object)Mode);
			case RgbLightModeCommand.On:
				return String.Format("{0} {1} {2}", (object)Mode, (object)Color, (object)AutoOffDuration);
			case RgbLightModeCommand.Blink:
				return String.Format("{0} {1} {2} {3}/{4}", (object[])(object)new Object[5]
				{
					(object)Mode,
					(object)Color,
					(object)AutoOffDuration,
					(object)OnInterval,
					(object)OffInterval
				});
			case RgbLightModeCommand.Jump3:
			case RgbLightModeCommand.Jump7:
			case RgbLightModeCommand.Fade3:
			case RgbLightModeCommand.Fade7:
			case RgbLightModeCommand.Rainbow:
				return String.Format("{0} {1} {2}", (object)Mode, (object)AutoOffDuration, (object)Interval);
			default:
				return String.Format("{0} (Unknown mode)", (object)Mode);
			}
		}

		public int DataMinimumLength(RgbLightModeCommand mode)
		{
			//IL_0047: Unknown result type (might be due to invalid IL or missing references)
			switch (mode)
			{
			case RgbLightModeCommand.Off:
			case RgbLightModeCommand.Restore:
				return 1;
			case RgbLightModeCommand.On:
				return 5;
			case RgbLightModeCommand.Blink:
				return 7;
			case RgbLightModeCommand.Jump3:
			case RgbLightModeCommand.Jump7:
			case RgbLightModeCommand.Fade3:
			case RgbLightModeCommand.Fade7:
			case RgbLightModeCommand.Rainbow:
				return 4;
			default:
				throw new NotSupportedException(String.Format("Command {0} not supported", (object)mode));
			}
		}
	}
	public enum RgbLightModeCommand : Enum
	{
		Off = 0,
		On = 1,
		Blink = 2,
		Jump3 = 4,
		Jump7 = 5,
		Fade3 = 6,
		Fade7 = 7,
		Rainbow = 8,
		Restore = 127
	}
	public interface ILightRgb
	{
		RgbLightMode Mode { get; }

		RgbColor Color { get; }

		byte OnInterval { get; }

		byte OffInterval { get; }

		ushort Interval { get; }

		bool ColorEnabled { get; }

		bool OnOffIntervalEnabled { get; }

		bool IntervalEnabled { get; }

		byte MaxBrightness { get; }

		Task<CommandResult> SendCommandOffAsync();

		Task<CommandResult> SendCommandColorAsync(RgbColor color);

		Task<CommandResult> SendCommandOnAsync(RgbColor color, byte autoOffDuration = 0, bool waitForCurrentStatus = true);

		Task<CommandResult> SendCommandBlinkAsync(RgbColor color, byte autoOffDuration, byte onInterval, byte offInterval, bool waitForCurrentStatus = true);

		Task<CommandResult> SendCommandTransitionAsync(RgbLightTransitionMode mode, byte autoOffDuration, ushort interval, bool waitForCurrentStatus = true);

		Task<CommandResult> SendCommandRestoreAsync(bool waitForCurrentStatus = true);
	}
	public interface ILogicalDeviceLightRgb : ILightRgb, ILogicalDeviceSwitchableLight, ILogicalDeviceSwitchable, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceLight, ILogicalDeviceWithStatus, ILogicalDeviceWithStatus<LogicalDeviceLightRgbStatus>, ILogicalDeviceWithStatusUpdate<LogicalDeviceLightRgbStatus>, ILogicalDeviceLightSpeedInterval, ILogicalDeviceDimmableBrightness, IDimmableBrightness, ILogicalDeviceAutoOffSwitchable, ILogicalDeviceAutoOff, IAutoOff, ILogicalDeviceCommandable<RgbLightMode>, ILogicalDeviceCommandable, ICommandable<RgbLightMode>, ILogicalDeviceCommandable<LogicalDeviceLightSpeedInterval>, ICommandable<LogicalDeviceLightSpeedInterval>
	{
	}
	public interface ILogicalDeviceLightRgbDirect : ILogicalDeviceLightRgb, ILightRgb, ILogicalDeviceSwitchableLight, ILogicalDeviceSwitchable, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceLight, ILogicalDeviceWithStatus, ILogicalDeviceWithStatus<LogicalDeviceLightRgbStatus>, ILogicalDeviceWithStatusUpdate<LogicalDeviceLightRgbStatus>, ILogicalDeviceLightSpeedInterval, ILogicalDeviceDimmableBrightness, IDimmableBrightness, ILogicalDeviceAutoOffSwitchable, ILogicalDeviceAutoOff, IAutoOff, ILogicalDeviceCommandable<RgbLightMode>, ILogicalDeviceCommandable, ICommandable<RgbLightMode>, ILogicalDeviceCommandable<LogicalDeviceLightSpeedInterval>, ICommandable<LogicalDeviceLightSpeedInterval>, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public interface ILogicalDeviceLightRgbRemote : ILogicalDeviceLightRgb, ILightRgb, ILogicalDeviceSwitchableLight, ILogicalDeviceSwitchable, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceLight, ILogicalDeviceWithStatus, ILogicalDeviceWithStatus<LogicalDeviceLightRgbStatus>, ILogicalDeviceWithStatusUpdate<LogicalDeviceLightRgbStatus>, ILogicalDeviceLightSpeedInterval, ILogicalDeviceDimmableBrightness, IDimmableBrightness, ILogicalDeviceAutoOffSwitchable, ILogicalDeviceAutoOff, IAutoOff, ILogicalDeviceCommandable<RgbLightMode>, ILogicalDeviceCommandable, ICommandable<RgbLightMode>, ILogicalDeviceCommandable<LogicalDeviceLightSpeedInterval>, ICommandable<LogicalDeviceLightSpeedInterval>, ILogicalDeviceDimmableBrightnessRemote, ILogicalDeviceRemote
	{
		Task<CommandResult> SendRemoteCommandAsync(LogicalDeviceLightRgbCommand command, CancellationToken cancelToken);
	}
	public interface IDirectCommandLightRgb : ILogicalDeviceSourceDirect, ILogicalDeviceSource
	{
		Task<CommandResult> SendDirectCommandLightRgb(ILogicalDeviceLightRgb logicalDevice, LogicalDeviceLightRgbCommand command, CancellationToken cancelToken);
	}
	public class LogicalDeviceLightRgb : LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>, ILogicalDeviceLightRgbDirect, ILogicalDeviceLightRgb, ILightRgb, ILogicalDeviceSwitchableLight, ILogicalDeviceSwitchable, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDeviceLight, ILogicalDeviceWithStatus, ILogicalDeviceWithStatus<LogicalDeviceLightRgbStatus>, ILogicalDeviceWithStatusUpdate<LogicalDeviceLightRgbStatus>, ILogicalDeviceLightSpeedInterval, ILogicalDeviceDimmableBrightness, IDimmableBrightness, ILogicalDeviceAutoOffSwitchable, ILogicalDeviceAutoOff, IAutoOff, ILogicalDeviceCommandable<RgbLightMode>, ILogicalDeviceCommandable, ICommandable<RgbLightMode>, ILogicalDeviceCommandable<LogicalDeviceLightSpeedInterval>, ICommandable<LogicalDeviceLightSpeedInterval>, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink, ILogicalDeviceLightRgbRemote, ILogicalDeviceDimmableBrightnessRemote, ILogicalDeviceRemote
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass88_0 : Object
		{
			public LogicalDeviceLightRgbCommand command;

			public LogicalDeviceLightRgb <>4__this;

			internal Task<CommandResult> <SendCommandAsync>b__1(CancellationToken cancelToken)
			{
				//IL_000c: Unknown result type (might be due to invalid IL or missing references)
				return <>4__this.SendRemoteCommandAsync(command, cancelToken);
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass88_1 : Object
		{
			public IDirectCommandLightRgb directManager;

			public <>c__DisplayClass88_0 CS$<>8__locals1;

			internal Task<CommandResult> <SendCommandAsync>b__2(CancellationToken cancelToken)
			{
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				return directManager.SendDirectCommandLightRgb(CS$<>8__locals1.<>4__this, CS$<>8__locals1.command, cancelToken);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformCommand>d__117 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightRgb <>4__this;

			public RgbLightMode mode;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_02d8: Unknown result type (might be due to invalid IL or missing references)
				//IL_02dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_02e2: Unknown result type (might be due to invalid IL or missing references)
				//IL_02e7: Expected O, but got Unknown
				//IL_030c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0077: Unknown result type (might be due to invalid IL or missing references)
				//IL_007c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0083: Unknown result type (might be due to invalid IL or missing references)
				//IL_010c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0111: Unknown result type (might be due to invalid IL or missing references)
				//IL_0119: Unknown result type (might be due to invalid IL or missing references)
				//IL_017d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0182: Unknown result type (might be due to invalid IL or missing references)
				//IL_018a: Unknown result type (might be due to invalid IL or missing references)
				//IL_022a: Unknown result type (might be due to invalid IL or missing references)
				//IL_022f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0237: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ac: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b1: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b9: Unknown result type (might be due to invalid IL or missing references)
				//IL_003a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_012a: Unknown result type (might be due to invalid IL or missing references)
				//IL_012f: Unknown result type (might be due to invalid IL or missing references)
				//IL_019b: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0248: Unknown result type (might be due to invalid IL or missing references)
				//IL_024d: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ca: Unknown result type (might be due to invalid IL or missing references)
				//IL_02cf: Unknown result type (might be due to invalid IL or missing references)
				//IL_005d: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dc: Unknown result type (might be due to invalid IL or missing references)
				//IL_0137: Unknown result type (might be due to invalid IL or missing references)
				//IL_0148: Unknown result type (might be due to invalid IL or missing references)
				//IL_014d: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_027a: Unknown result type (might be due to invalid IL or missing references)
				//IL_027f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0162: Unknown result type (might be due to invalid IL or missing references)
				//IL_0164: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e0: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_01fa: Unknown result type (might be due to invalid IL or missing references)
				//IL_0294: Unknown result type (might be due to invalid IL or missing references)
				//IL_0296: Unknown result type (might be due to invalid IL or missing references)
				//IL_020f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0211: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgb logicalDeviceLightRgb = <>4__this;
				CommandResult result;
				try
				{
					_ = 4;
					try
					{
						TaskAwaiter val2;
						TaskAwaiter<CommandResult> val;
						RgbLightTransitionMode rgbLightTransitionMode;
						byte b;
						byte b2;
						switch (num)
						{
						default:
							val2 = ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)logicalDeviceLightRgb).WaitForDeviceStatusToHaveDataAsync((int)logicalDeviceLightRgb.MSCommandTimeout, logicalDeviceLightRgb._commandCancelSource.Token).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <PerformCommand>d__117>(ref val2, ref this);
								return;
							}
							goto IL_0092;
						case 0:
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
							goto IL_0092;
						case 1:
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0128;
						case 2:
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0199;
						case 3:
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0246;
						case 4:
							{
								val = <>u__2;
								<>u__2 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								break;
							}
							IL_0199:
							result = val.GetResult();
							goto end_IL_0013;
							IL_0092:
							((TaskAwaiter)(ref val2)).GetResult();
							switch (mode)
							{
							case RgbLightMode.Off:
								break;
							case RgbLightMode.On:
								goto IL_0135;
							case RgbLightMode.Blink:
								goto IL_01a6;
							case RgbLightMode.Jump3:
							case RgbLightMode.Jump7:
							case RgbLightMode.Fade3:
							case RgbLightMode.Fade7:
							case RgbLightMode.Rainbow:
								goto IL_0253;
							default:
								result = (CommandResult)7;
								goto end_IL_0013;
							}
							val = logicalDeviceLightRgb.SendCommandOffAsync().GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <PerformCommand>d__117>(ref val, ref this);
								return;
							}
							goto IL_0128;
							IL_0253:
							rgbLightTransitionMode = LogicalDeviceLightRgbMode.RgbLightTransitionModeFromByte((byte)mode);
							val = logicalDeviceLightRgb.SendCommandTransitionAsync(rgbLightTransitionMode, logicalDeviceLightRgb.AutoOffDurationMinutes, _lightSpeedIntervalCycleTimeRainbowDict[LogicalDeviceLightSpeedInterval.Slow]).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 4);
								<>u__2 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <PerformCommand>d__117>(ref val, ref this);
								return;
							}
							break;
							IL_0246:
							result = val.GetResult();
							goto end_IL_0013;
							IL_01a6:
							b = logicalDeviceLightRgb.OnInterval;
							b2 = logicalDeviceLightRgb.OffInterval;
							if (logicalDeviceLightRgb.Mode != mode && (b != b2 || b == 0))
							{
								b = (b2 = _lightSpeedIntervalCycleTimeDict[LogicalDeviceLightSpeedInterval.Slow]);
							}
							val = logicalDeviceLightRgb.SendCommandBlinkAsync(logicalDeviceLightRgb.Color, logicalDeviceLightRgb.AutoOffDurationMinutes, b, b2, waitForCurrentStatus: false).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 3);
								<>u__2 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <PerformCommand>d__117>(ref val, ref this);
								return;
							}
							goto IL_0246;
							IL_0128:
							result = val.GetResult();
							goto end_IL_0013;
							IL_0135:
							val = logicalDeviceLightRgb.SendCommandOnAsync(logicalDeviceLightRgb.Color, logicalDeviceLightRgb.AutoOffDurationMinutes, waitForCurrentStatus: false).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 2);
								<>u__2 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <PerformCommand>d__117>(ref val, ref this);
								return;
							}
							goto IL_0199;
						}
						result = val.GetResult();
						end_IL_0013:;
					}
					catch (TimeoutException)
					{
						result = (CommandResult)5;
					}
					catch (OperationCanceledException)
					{
						result = (CommandResult)1;
					}
					catch (Object)
					{
						result = (CommandResult)7;
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformCommand>d__125 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightRgb <>4__this;

			public LogicalDeviceLightSpeedInterval speedInterval;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0074: Expected O, but got Unknown
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				//IL_0099: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgb logicalDeviceLightRgb = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceLightRgb.SetSpeedIntervalAsync(speedInterval).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <PerformCommand>d__125>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandAsync>d__88 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightRgbCommand command;

			public LogicalDeviceLightRgb <>4__this;

			public bool waitForCurrentStatus;

			private <>c__DisplayClass88_0 <>8__1;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_0106: Unknown result type (might be due to invalid IL or missing references)
				//IL_010e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0116: Unknown result type (might be due to invalid IL or missing references)
				//IL_0582: Expected O, but got Unknown
				//IL_05b5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00df: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00aa: Unknown result type (might be due to invalid IL or missing references)
				//IL_00af: Unknown result type (might be due to invalid IL or missing references)
				//IL_0076: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c6: Unknown result type (might be due to invalid IL or missing references)
				//IL_035a: Unknown result type (might be due to invalid IL or missing references)
				//IL_035f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0367: Unknown result type (might be due to invalid IL or missing references)
				//IL_042b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0430: Unknown result type (might be due to invalid IL or missing references)
				//IL_0438: Unknown result type (might be due to invalid IL or missing references)
				//IL_04be: Unknown result type (might be due to invalid IL or missing references)
				//IL_04c3: Unknown result type (might be due to invalid IL or missing references)
				//IL_04cb: Unknown result type (might be due to invalid IL or missing references)
				//IL_02e0: Unknown result type (might be due to invalid IL or missing references)
				//IL_02e6: Invalid comparison between Unknown and I4
				//IL_007e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0378: Unknown result type (might be due to invalid IL or missing references)
				//IL_037d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0449: Unknown result type (might be due to invalid IL or missing references)
				//IL_044e: Unknown result type (might be due to invalid IL or missing references)
				//IL_04dc: Unknown result type (might be due to invalid IL or missing references)
				//IL_04e1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0308: Unknown result type (might be due to invalid IL or missing references)
				//IL_0325: Unknown result type (might be due to invalid IL or missing references)
				//IL_032a: Unknown result type (might be due to invalid IL or missing references)
				//IL_04f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_046c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0489: Unknown result type (might be due to invalid IL or missing references)
				//IL_048e: Unknown result type (might be due to invalid IL or missing references)
				//IL_03d8: Unknown result type (might be due to invalid IL or missing references)
				//IL_03f6: Unknown result type (might be due to invalid IL or missing references)
				//IL_03fb: Unknown result type (might be due to invalid IL or missing references)
				//IL_033f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0341: Unknown result type (might be due to invalid IL or missing references)
				//IL_019b: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_0235: Unknown result type (might be due to invalid IL or missing references)
				//IL_057c: Unknown result type (might be due to invalid IL or missing references)
				//IL_057d: Unknown result type (might be due to invalid IL or missing references)
				//IL_04a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_04a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_0410: Unknown result type (might be due to invalid IL or missing references)
				//IL_0412: Unknown result type (might be due to invalid IL or missing references)
				//IL_02c9: Unknown result type (might be due to invalid IL or missing references)
				//IL_026c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgb logicalDeviceLightRgb = <>4__this;
				CommandResult result;
				try
				{
					if (num == 0)
					{
						goto IL_0090;
					}
					if ((uint)(num - 1) <= 2u)
					{
						goto IL_02cb;
					}
					<>8__1 = new <>c__DisplayClass88_0();
					<>8__1.command = command;
					<>8__1.<>4__this = <>4__this;
					if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLightRgb).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceLightRgb", String.Concat(((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)logicalDeviceLightRgb).DeviceName, " SendCommandAsync ignored as logical device has been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else
					{
						if ((int)((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)logicalDeviceLightRgb).ActiveConnection != 0)
						{
							if (waitForCurrentStatus)
							{
								goto IL_0090;
							}
							goto IL_011c;
						}
						result = (CommandResult)6;
					}
					goto end_IL_000e;
					IL_011c:
					object lockForceUseCommandStatus = logicalDeviceLightRgb._lockForceUseCommandStatus;
					bool flag = false;
					try
					{
						Monitor.Enter(lockForceUseCommandStatus, ref flag);
						LogicalDeviceLightRgbStatus logicalDeviceLightRgbStatus = new LogicalDeviceLightRgbStatus();
						switch (<>8__1.command.Mode)
						{
						case RgbLightModeCommand.Off:
							logicalDeviceLightRgbStatus.SetModeOff();
							break;
						case RgbLightModeCommand.On:
							logicalDeviceLightRgbStatus.SetModeOn(<>8__1.command.Color, <>8__1.command.AutoOffDuration, <>8__1.command.Interval);
							break;
						case RgbLightModeCommand.Blink:
							logicalDeviceLightRgbStatus.SetModeBlink(<>8__1.command.Color, <>8__1.command.AutoOffDuration, <>8__1.command.OnInterval, <>8__1.command.OffInterval);
							break;
						case RgbLightModeCommand.Jump3:
						case RgbLightModeCommand.Jump7:
						case RgbLightModeCommand.Fade3:
						case RgbLightModeCommand.Fade7:
						case RgbLightModeCommand.Rainbow:
							logicalDeviceLightRgbStatus.SetModeTransition(LogicalDeviceLightRgbMode.RgbLightTransitionModeFromByte((byte)<>8__1.command.Mode), <>8__1.command.Color, <>8__1.command.AutoOffDuration, <>8__1.command.Interval);
							break;
						case RgbLightModeCommand.Restore:
							if (logicalDeviceLightRgb.Mode == RgbLightMode.Off)
							{
								logicalDeviceLightRgbStatus.SetModeOn(logicalDeviceLightRgb.Color, ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)logicalDeviceLightRgb).DeviceStatus.AutoOffDuration, logicalDeviceLightRgb.Interval);
							}
							break;
						}
						logicalDeviceLightRgb.SyncWithStatus(logicalDeviceLightRgbStatus);
						logicalDeviceLightRgb.NumberOfCommandsRunning++;
						((CommonNotifyPropertyChanged)logicalDeviceLightRgb).NotifyPropertyChanged("IsRunningCommands", true);
						((CommonNotifyPropertyChanged)logicalDeviceLightRgb).NotifyPropertyChanged("SwitchInTransition", true);
					}
					finally
					{
						if (num < 0 && flag)
						{
							Monitor.Exit(lockForceUseCommandStatus);
						}
					}
					CommandResult val = (CommandResult)7;
					goto IL_02cb;
					IL_0090:
					try
					{
						TaskAwaiter val2;
						if (num != 0)
						{
							val2 = ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)logicalDeviceLightRgb).WaitForDeviceStatusToHaveDataAsync((int)logicalDeviceLightRgb.MSCommandTimeout, logicalDeviceLightRgb._commandCancelSource.Token).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SendCommandAsync>d__88>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
					}
					catch (TimeoutException)
					{
						result = (CommandResult)5;
						goto end_IL_000e;
					}
					catch (OperationCanceledException)
					{
						result = (CommandResult)1;
						goto end_IL_000e;
					}
					catch (Object)
					{
						result = (CommandResult)7;
						goto end_IL_000e;
					}
					goto IL_011c;
					IL_02cb:
					try
					{
						TaskAwaiter<CommandResult> val3;
						switch (num)
						{
						default:
						{
							if ((int)((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)logicalDeviceLightRgb).ActiveConnection == 2)
							{
								val3 = logicalDeviceLightRgb.BasicCommandRunner.SendCommandAsync((Func<CancellationToken, Task<CommandResult>>)((CancellationToken cancelToken) => <>8__1.<>4__this.SendRemoteCommandAsync(<>8__1.command, cancelToken)), logicalDeviceLightRgb._commandCancelSource.Token, (ILogicalDevice)(object)logicalDeviceLightRgb, (Func<ILogicalDevice, CommandControl>)CheckCommandExecution, (CommandSendOption)1).GetAwaiter();
								if (!val3.IsCompleted)
								{
									num = (<>1__state = 1);
									<>u__2 = val3;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandAsync>d__88>(ref val3, ref this);
									return;
								}
								goto IL_0376;
							}
							<>c__DisplayClass88_1 CS$<>8__locals6 = new <>c__DisplayClass88_1
							{
								CS$<>8__locals1 = <>8__1
							};
							ILogicalDeviceSourceDirect primaryDeviceSourceDirect = ((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)logicalDeviceLightRgb).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceLightRgb);
							CS$<>8__locals6.directManager = primaryDeviceSourceDirect as IDirectCommandLightRgb;
							if (CS$<>8__locals6.directManager != null)
							{
								val3 = logicalDeviceLightRgb.BasicCommandRunner.SendCommandAsync((Func<CancellationToken, Task<CommandResult>>)((CancellationToken cancelToken) => CS$<>8__locals6.directManager.SendDirectCommandLightRgb(CS$<>8__locals6.CS$<>8__locals1.<>4__this, CS$<>8__locals6.CS$<>8__locals1.command, cancelToken)), logicalDeviceLightRgb._commandCancelSource.Token, (ILogicalDevice)(object)logicalDeviceLightRgb, (Func<ILogicalDevice, CommandControl>)CheckCommandExecution, (CommandSendOption)1).GetAwaiter();
								if (!val3.IsCompleted)
								{
									num = (<>1__state = 2);
									<>u__2 = val3;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandAsync>d__88>(ref val3, ref this);
									return;
								}
								goto IL_0447;
							}
							val3 = logicalDeviceLightRgb.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)(object)CS$<>8__locals6.CS$<>8__locals1.command, logicalDeviceLightRgb._commandCancelSource.Token, (Func<ILogicalDevice, CommandControl>)CheckCommandExecution, (CommandSendOption)0).GetAwaiter();
							if (!val3.IsCompleted)
							{
								num = (<>1__state = 3);
								<>u__2 = val3;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandAsync>d__88>(ref val3, ref this);
								return;
							}
							goto IL_04da;
						}
						case 1:
							val3 = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0376;
						case 2:
							val3 = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0447;
						case 3:
							{
								val3 = <>u__2;
								<>u__2 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								goto IL_04da;
							}
							IL_0447:
							val = val3.GetResult();
							break;
							IL_04da:
							val = val3.GetResult();
							break;
							IL_0376:
							val = val3.GetResult();
							break;
						}
						TaggedLog.Debug("LogicalDeviceLightRgb", String.Format("SendCommandAsync for {0} with result {1}", (object)<>8__1.command, (object)val), Array.Empty<object>());
					}
					finally
					{
						if (num < 0)
						{
							lockForceUseCommandStatus = logicalDeviceLightRgb._lockForceUseCommandStatus;
							flag = false;
							try
							{
								Monitor.Enter(lockForceUseCommandStatus, ref flag);
								if (logicalDeviceLightRgb.NumberOfCommandsRunning != 0)
								{
									logicalDeviceLightRgb.NumberOfCommandsRunning--;
								}
								_ = logicalDeviceLightRgb.NumberOfCommandsRunning;
								logicalDeviceLightRgb.SyncWithStatus(((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)logicalDeviceLightRgb).DeviceStatus);
								((CommonNotifyPropertyChanged)logicalDeviceLightRgb).NotifyPropertyChanged("IsRunningCommands", true);
								((CommonNotifyPropertyChanged)logicalDeviceLightRgb).NotifyPropertyChanged("SwitchInTransition", true);
							}
							finally
							{
								if (num < 0 && flag)
								{
									Monitor.Exit(lockForceUseCommandStatus);
								}
							}
						}
					}
					result = val;
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>8__1 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				<>t__builder.SetResult(result);
				CommandControl CheckCommandExecution(ILogicalDevice logicalDevice)
				{
					//IL_008d: Unknown result type (might be due to invalid IL or missing references)
					//IL_0092: Unknown result type (might be due to invalid IL or missing references)
					//IL_009b: Unknown result type (might be due to invalid IL or missing references)
					//IL_00ff: Unknown result type (might be due to invalid IL or missing references)
					//IL_0104: Unknown result type (might be due to invalid IL or missing references)
					//IL_010d: Unknown result type (might be due to invalid IL or missing references)
					bool flag2 = false;
					RgbColor color;
					int num2;
					int num3;
					switch (((<>c__DisplayClass88_0)this).command.Mode)
					{
					case RgbLightModeCommand.Off:
						flag2 = ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)((<>c__DisplayClass88_0)this).<>4__this).DeviceStatus.Mode == RgbLightMode.Off;
						break;
					case RgbLightModeCommand.On:
					{
						RgbLightMode rgbLightMode2 = LogicalDeviceLightRgbMode.RgbLightModeFromByte((byte)((<>c__DisplayClass88_0)this).command.Mode);
						if (((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)((<>c__DisplayClass88_0)this).<>4__this).DeviceStatus.Mode == rgbLightMode2)
						{
							color = ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)((<>c__DisplayClass88_0)this).<>4__this).DeviceStatus.Color;
							if (((RgbColor)(ref color)).IsCloseToColor(((<>c__DisplayClass88_0)this).command.Color, 3))
							{
								num2 = ((((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)((<>c__DisplayClass88_0)this).<>4__this).DeviceStatus.AutoOffDuration == ((<>c__DisplayClass88_0)this).command.AutoOffDuration) ? 1 : 0);
								goto IL_00c8;
							}
						}
						num2 = 0;
						goto IL_00c8;
					}
					case RgbLightModeCommand.Blink:
					{
						RgbLightMode rgbLightMode3 = LogicalDeviceLightRgbMode.RgbLightModeFromByte((byte)((<>c__DisplayClass88_0)this).command.Mode);
						if (((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)((<>c__DisplayClass88_0)this).<>4__this).DeviceStatus.Mode == rgbLightMode3)
						{
							color = ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)((<>c__DisplayClass88_0)this).<>4__this).DeviceStatus.Color;
							if (((RgbColor)(ref color)).IsCloseToColor(((<>c__DisplayClass88_0)this).command.Color, 3) && ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)((<>c__DisplayClass88_0)this).<>4__this).DeviceStatus.AutoOffDuration == ((<>c__DisplayClass88_0)this).command.AutoOffDuration && ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)((<>c__DisplayClass88_0)this).<>4__this).DeviceStatus.OnInterval == ((<>c__DisplayClass88_0)this).command.OnInterval)
							{
								num3 = ((((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)((<>c__DisplayClass88_0)this).<>4__this).DeviceStatus.OffInterval == ((<>c__DisplayClass88_0)this).command.OffInterval) ? 1 : 0);
								goto IL_0174;
							}
						}
						num3 = 0;
						goto IL_0174;
					}
					case RgbLightModeCommand.Jump3:
					case RgbLightModeCommand.Jump7:
					case RgbLightModeCommand.Fade3:
					case RgbLightModeCommand.Fade7:
					case RgbLightModeCommand.Rainbow:
					{
						RgbLightMode rgbLightMode = LogicalDeviceLightRgbMode.RgbLightModeFromByte((byte)((<>c__DisplayClass88_0)this).command.Mode);
						flag2 = ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)((<>c__DisplayClass88_0)this).<>4__this).DeviceStatus.Mode == rgbLightMode && ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)((<>c__DisplayClass88_0)this).<>4__this).DeviceStatus.AutoOffDuration == ((<>c__DisplayClass88_0)this).command.AutoOffDuration && ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)((<>c__DisplayClass88_0)this).<>4__this).DeviceStatus.Interval == ((<>c__DisplayClass88_0)this).command.Interval;
						break;
					}
					case RgbLightModeCommand.Restore:
						flag2 = ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)((<>c__DisplayClass88_0)this).<>4__this).DeviceStatus.Mode != RgbLightMode.Off;
						break;
					default:
						{
							flag2 = false;
							break;
						}
						IL_00c8:
						flag2 = (byte)num2 != 0;
						break;
						IL_0174:
						flag2 = (byte)num3 != 0;
						break;
					}
					if (flag2)
					{
						return (CommandControl)0;
					}
					return (CommandControl)1;
				}
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandBlinkAsync>d__85 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightRgb <>4__this;

			public RgbColor color;

			public byte autoOffDuration;

			public byte onInterval;

			public byte offInterval;

			public bool waitForCurrentStatus;

			private ConfiguredTaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_009b: Expected O, but got Unknown
				//IL_0074: Unknown result type (might be due to invalid IL or missing references)
				//IL_0079: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_0091: Unknown result type (might be due to invalid IL or missing references)
				//IL_0096: Unknown result type (might be due to invalid IL or missing references)
				//IL_005d: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c0: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgb logicalDeviceLightRgb = <>4__this;
				CommandResult result;
				try
				{
					ConfiguredTaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceLightRgb.SendCommandAsync(LogicalDeviceLightRgbCommand.MakeBlinkCommand(color, autoOffDuration, onInterval, offInterval), waitForCurrentStatus).ConfigureAwait(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<CommandResult>, <SendCommandBlinkAsync>d__85>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandColorAsync>d__83 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightRgb <>4__this;

			public RgbColor color;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_00c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ca: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_01cb: Expected O, but got Unknown
				//IL_01f0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0135: Unknown result type (might be due to invalid IL or missing references)
				//IL_013a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0142: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a8: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0153: Unknown result type (might be due to invalid IL or missing references)
				//IL_0158: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_009c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a8: Unknown result type (might be due to invalid IL or missing references)
				//IL_005f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0069: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0082: Unknown result type (might be due to invalid IL or missing references)
				//IL_0083: Unknown result type (might be due to invalid IL or missing references)
				//IL_0160: Unknown result type (might be due to invalid IL or missing references)
				//IL_0171: Unknown result type (might be due to invalid IL or missing references)
				//IL_0176: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0100: Unknown result type (might be due to invalid IL or missing references)
				//IL_0105: Unknown result type (might be due to invalid IL or missing references)
				//IL_018b: Unknown result type (might be due to invalid IL or missing references)
				//IL_018d: Unknown result type (might be due to invalid IL or missing references)
				//IL_011a: Unknown result type (might be due to invalid IL or missing references)
				//IL_011c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgb logicalDeviceLightRgb = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					switch (num)
					{
					default:
						if (!((CommonDisposableNotifyPropertyChanged)logicalDeviceLightRgb).IsDisposed)
						{
							goto case 0;
						}
						TaggedLog.Debug("LogicalDeviceLightRgb", String.Concat(((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)logicalDeviceLightRgb).DeviceName, " SendCommandAsync ignored as logical device has been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
						goto end_IL_000e;
					case 0:
						try
						{
							TaskAwaiter val2;
							if (num != 0)
							{
								val2 = ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)logicalDeviceLightRgb).WaitForDeviceStatusToHaveDataAsync((int)logicalDeviceLightRgb.MSCommandTimeout, logicalDeviceLightRgb._commandCancelSource.Token).GetAwaiter();
								if (!((TaskAwaiter)(ref val2)).IsCompleted)
								{
									num = (<>1__state = 0);
									<>u__1 = val2;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SendCommandColorAsync>d__83>(ref val2, ref this);
									return;
								}
							}
							else
							{
								val2 = <>u__1;
								<>u__1 = default(TaskAwaiter);
								num = (<>1__state = -1);
							}
							((TaskAwaiter)(ref val2)).GetResult();
						}
						catch (TimeoutException)
						{
							result = (CommandResult)5;
							goto end_IL_000e;
						}
						catch (OperationCanceledException)
						{
							result = (CommandResult)1;
							goto end_IL_000e;
						}
						catch (Object)
						{
							result = (CommandResult)7;
							goto end_IL_000e;
						}
						if (logicalDeviceLightRgb.Mode == RgbLightMode.Blink)
						{
							val = logicalDeviceLightRgb.SendCommandBlinkAsync(color, logicalDeviceLightRgb.AutoOffDurationMinutes, logicalDeviceLightRgb.OnInterval, logicalDeviceLightRgb.OffInterval, waitForCurrentStatus: false).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandColorAsync>d__83>(ref val, ref this);
								return;
							}
							goto IL_0151;
						}
						val = logicalDeviceLightRgb.SendCommandOnAsync(color, logicalDeviceLightRgb.AutoOffDurationMinutes, waitForCurrentStatus: false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandColorAsync>d__83>(ref val, ref this);
							return;
						}
						break;
					case 1:
						val = <>u__2;
						<>u__2 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_0151;
					case 2:
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							break;
						}
						IL_0151:
						result = val.GetResult();
						goto end_IL_000e;
					}
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandOffAsync>d__82 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightRgb <>4__this;

			private ConfiguredTaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0084: Expected O, but got Unknown
				//IL_005d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0069: Unknown result type (might be due to invalid IL or missing references)
				//IL_0024: Unknown result type (might be due to invalid IL or missing references)
				//IL_0029: Unknown result type (might be due to invalid IL or missing references)
				//IL_002d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_007a: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				//IL_0047: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgb logicalDeviceLightRgb = <>4__this;
				CommandResult result;
				try
				{
					ConfiguredTaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceLightRgb.SendCommandAsync(LogicalDeviceLightRgbCommand.MakeOffCommand(((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)logicalDeviceLightRgb).DeviceStatus), waitForCurrentStatus: true).ConfigureAwait(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<CommandResult>, <SendCommandOffAsync>d__82>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandOnAsync>d__84 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightRgb <>4__this;

			public RgbColor color;

			public byte autoOffDuration;

			public bool waitForCurrentStatus;

			private ConfiguredTaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0095: Expected O, but got Unknown
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_007a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_003a: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0043: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0090: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_0058: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgb logicalDeviceLightRgb = <>4__this;
				CommandResult result;
				try
				{
					ConfiguredTaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceLightRgb.SendCommandAsync(LogicalDeviceLightRgbCommand.MakeOnCommand(color, autoOffDuration, ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)logicalDeviceLightRgb).DeviceStatus), waitForCurrentStatus).ConfigureAwait(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<CommandResult>, <SendCommandOnAsync>d__84>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandRestoreAsync>d__87 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightRgb <>4__this;

			public bool waitForCurrentStatus;

			private ConfiguredTaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0083: Expected O, but got Unknown
				//IL_005c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_002c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_0079: Unknown result type (might be due to invalid IL or missing references)
				//IL_007e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a8: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgb logicalDeviceLightRgb = <>4__this;
				CommandResult result;
				try
				{
					ConfiguredTaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceLightRgb.SendCommandAsync(LogicalDeviceLightRgbCommand.MakeRestoreCommand(), waitForCurrentStatus).ConfigureAwait(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<CommandResult>, <SendCommandRestoreAsync>d__87>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandTransitionAsync>d__86 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightRgb <>4__this;

			public RgbLightTransitionMode mode;

			public byte autoOffDuration;

			public ushort interval;

			public bool waitForCurrentStatus;

			private ConfiguredTaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0095: Expected O, but got Unknown
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_007a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_003a: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0043: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0090: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_0058: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgb logicalDeviceLightRgb = <>4__this;
				CommandResult result;
				try
				{
					ConfiguredTaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceLightRgb.SendCommandAsync(LogicalDeviceLightRgbCommand.MakeTrasitionModeCommand(mode, autoOffDuration, interval), waitForCurrentStatus).ConfigureAwait(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<CommandResult>, <SendCommandTransitionAsync>d__86>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendDimmableBrightnessCommandAsync>d__105 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightRgb <>4__this;

			public byte brightness;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_00d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dc: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e4: Unknown result type (might be due to invalid IL or missing references)
				//IL_0296: Expected O, but got Unknown
				//IL_02bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01cc: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_0240: Unknown result type (might be due to invalid IL or missing references)
				//IL_0245: Unknown result type (might be due to invalid IL or missing references)
				//IL_024d: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e5: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ea: Unknown result type (might be due to invalid IL or missing references)
				//IL_025e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0263: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ad: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_007d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_0092: Unknown result type (might be due to invalid IL or missing references)
				//IL_0094: Unknown result type (might be due to invalid IL or missing references)
				//IL_011c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0121: Unknown result type (might be due to invalid IL or missing references)
				//IL_0125: Unknown result type (might be due to invalid IL or missing references)
				//IL_012a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0144: Unknown result type (might be due to invalid IL or missing references)
				//IL_0149: Unknown result type (might be due to invalid IL or missing references)
				//IL_0291: Unknown result type (might be due to invalid IL or missing references)
				//IL_0184: Unknown result type (might be due to invalid IL or missing references)
				//IL_0192: Unknown result type (might be due to invalid IL or missing references)
				//IL_0197: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f1: Unknown result type (might be due to invalid IL or missing references)
				//IL_020b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0210: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ac: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ae: Unknown result type (might be due to invalid IL or missing references)
				//IL_0225: Unknown result type (might be due to invalid IL or missing references)
				//IL_0227: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgb logicalDeviceLightRgb = <>4__this;
				CommandResult result;
				try
				{
					RgbColor color2;
					TaskAwaiter<CommandResult> val;
					switch (num)
					{
					default:
						if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLightRgb).IsDisposed)
						{
							TaggedLog.Debug("LogicalDeviceLightRgb", String.Concat(((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)logicalDeviceLightRgb).DeviceName, " SendDimmableBrightnessCommandAsync ignored as logical device has been disposed"), Array.Empty<object>());
							result = (CommandResult)7;
						}
						else
						{
							if (brightness != 0)
							{
								goto case 0;
							}
							result = (CommandResult)2;
						}
						goto end_IL_000e;
					case 0:
					{
						try
						{
							TaskAwaiter val2;
							if (num != 0)
							{
								val2 = ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)logicalDeviceLightRgb).WaitForDeviceStatusToHaveDataAsync((int)logicalDeviceLightRgb.MSCommandTimeout, logicalDeviceLightRgb._commandCancelSource.Token).GetAwaiter();
								if (!((TaskAwaiter)(ref val2)).IsCompleted)
								{
									num = (<>1__state = 0);
									<>u__1 = val2;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SendDimmableBrightnessCommandAsync>d__105>(ref val2, ref this);
									return;
								}
							}
							else
							{
								val2 = <>u__1;
								<>u__1 = default(TaskAwaiter);
								num = (<>1__state = -1);
							}
							((TaskAwaiter)(ref val2)).GetResult();
						}
						catch (TimeoutException)
						{
							result = (CommandResult)5;
							goto end_IL_000e;
						}
						catch (OperationCanceledException)
						{
							result = (CommandResult)1;
							goto end_IL_000e;
						}
						catch (Object)
						{
							result = (CommandResult)7;
							goto end_IL_000e;
						}
						float num2 = (float)MathCommon.InverseLinearlyInterpolate((double)(int)(byte)MathCommon.Clamp((int)brightness, 5, 250), 5.0, 250.0);
						RgbColor color = ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)logicalDeviceLightRgb).DeviceStatus.Color;
						HsvColor val3 = ((RgbColor)(ref color)).ToHsv();
						((HsvColor)(ref val3))..ctor(((HsvColor)(ref val3)).Hue, ((HsvColor)(ref val3)).Saturation, num2);
						color2 = ((HsvColor)(ref val3)).ToRgb();
						switch (logicalDeviceLightRgb.Mode)
						{
						case RgbLightMode.On:
							break;
						case RgbLightMode.Blink:
							goto IL_01f0;
						default:
							TaggedLog.Warning("LogicalDeviceLightRgb", String.Format("Warning brightness change ignored as current mode {0} doesn't support color/brightness {1}", (object)logicalDeviceLightRgb.Mode, (object)((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)logicalDeviceLightRgb).DeviceName), Array.Empty<object>());
							result = (CommandResult)7;
							goto end_IL_000e;
						}
						val = logicalDeviceLightRgb.SendCommandOnAsync(color2, logicalDeviceLightRgb.AutoOffDurationMinutes, waitForCurrentStatus: false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendDimmableBrightnessCommandAsync>d__105>(ref val, ref this);
							return;
						}
						goto IL_01e3;
					}
					case 1:
						val = <>u__2;
						<>u__2 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_01e3;
					case 2:
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							break;
						}
						IL_01e3:
						result = val.GetResult();
						goto end_IL_000e;
						IL_01f0:
						val = logicalDeviceLightRgb.SendCommandBlinkAsync(color2, logicalDeviceLightRgb.AutoOffDurationMinutes, logicalDeviceLightRgb.OnInterval, logicalDeviceLightRgb.OffInterval, waitForCurrentStatus: false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendDimmableBrightnessCommandAsync>d__105>(ref val, ref this);
							return;
						}
						break;
					}
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendRemoteCommandAsync>d__89 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightRgb <>4__this;

			public CancellationToken cancelToken;

			public LogicalDeviceLightRgbCommand command;

			private NativeColor <newColor>5__2;

			private byte <newOnDuration>5__3;

			private uint <newTimeInterval>5__4;

			private bool <updatedColor>5__5;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_080e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0813: Unknown result type (might be due to invalid IL or missing references)
				//IL_0818: Expected O, but got Unknown
				//IL_083a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0843: Expected O, but got Unknown
				//IL_0868: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_010e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0113: Unknown result type (might be due to invalid IL or missing references)
				//IL_011b: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_01de: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0240: Unknown result type (might be due to invalid IL or missing references)
				//IL_0245: Unknown result type (might be due to invalid IL or missing references)
				//IL_024d: Unknown result type (might be due to invalid IL or missing references)
				//IL_02a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_02aa: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b2: Unknown result type (might be due to invalid IL or missing references)
				//IL_030a: Unknown result type (might be due to invalid IL or missing references)
				//IL_030f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0317: Unknown result type (might be due to invalid IL or missing references)
				//IL_036f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0374: Unknown result type (might be due to invalid IL or missing references)
				//IL_037c: Unknown result type (might be due to invalid IL or missing references)
				//IL_03d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_03d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_03e1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0439: Unknown result type (might be due to invalid IL or missing references)
				//IL_043e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0446: Unknown result type (might be due to invalid IL or missing references)
				//IL_049e: Unknown result type (might be due to invalid IL or missing references)
				//IL_04a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_04ab: Unknown result type (might be due to invalid IL or missing references)
				//IL_0506: Unknown result type (might be due to invalid IL or missing references)
				//IL_050b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0513: Unknown result type (might be due to invalid IL or missing references)
				//IL_0614: Unknown result type (might be due to invalid IL or missing references)
				//IL_0619: Unknown result type (might be due to invalid IL or missing references)
				//IL_0621: Unknown result type (might be due to invalid IL or missing references)
				//IL_06a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_06ab: Unknown result type (might be due to invalid IL or missing references)
				//IL_06b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0738: Unknown result type (might be due to invalid IL or missing references)
				//IL_073d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0745: Unknown result type (might be due to invalid IL or missing references)
				//IL_07e6: Unknown result type (might be due to invalid IL or missing references)
				//IL_07eb: Unknown result type (might be due to invalid IL or missing references)
				//IL_07f3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ac: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b2: Invalid comparison between Unknown and I4
				//IL_004f: Unknown result type (might be due to invalid IL or missing references)
				//IL_012c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0131: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01fe: Unknown result type (might be due to invalid IL or missing references)
				//IL_025e: Unknown result type (might be due to invalid IL or missing references)
				//IL_02c3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0328: Unknown result type (might be due to invalid IL or missing references)
				//IL_038d: Unknown result type (might be due to invalid IL or missing references)
				//IL_03f2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0457: Unknown result type (might be due to invalid IL or missing references)
				//IL_04bc: Unknown result type (might be due to invalid IL or missing references)
				//IL_0524: Unknown result type (might be due to invalid IL or missing references)
				//IL_052b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0632: Unknown result type (might be due to invalid IL or missing references)
				//IL_06c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_0756: Unknown result type (might be due to invalid IL or missing references)
				//IL_0804: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b9: Unknown result type (might be due to invalid IL or missing references)
				//IL_005f: Unknown result type (might be due to invalid IL or missing references)
				//IL_054a: Unknown result type (might be due to invalid IL or missing references)
				//IL_054f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0554: Unknown result type (might be due to invalid IL or missing references)
				//IL_055f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0564: Unknown result type (might be due to invalid IL or missing references)
				//IL_05b2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0646: Unknown result type (might be due to invalid IL or missing references)
				//IL_06d8: Unknown result type (might be due to invalid IL or missing references)
				//IL_076a: Unknown result type (might be due to invalid IL or missing references)
				//IL_083e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cf: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00de: Unknown result type (might be due to invalid IL or missing references)
				//IL_0670: Unknown result type (might be due to invalid IL or missing references)
				//IL_0675: Unknown result type (might be due to invalid IL or missing references)
				//IL_0702: Unknown result type (might be due to invalid IL or missing references)
				//IL_0707: Unknown result type (might be due to invalid IL or missing references)
				//IL_0781: Unknown result type (might be due to invalid IL or missing references)
				//IL_078c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_05d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_05de: Unknown result type (might be due to invalid IL or missing references)
				//IL_05e3: Unknown result type (might be due to invalid IL or missing references)
				//IL_068b: Unknown result type (might be due to invalid IL or missing references)
				//IL_068d: Unknown result type (might be due to invalid IL or missing references)
				//IL_071d: Unknown result type (might be due to invalid IL or missing references)
				//IL_071f: Unknown result type (might be due to invalid IL or missing references)
				//IL_07a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_07b0: Unknown result type (might be due to invalid IL or missing references)
				//IL_07b5: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_020b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0210: Unknown result type (might be due to invalid IL or missing references)
				//IL_0270: Unknown result type (might be due to invalid IL or missing references)
				//IL_0275: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d5: Unknown result type (might be due to invalid IL or missing references)
				//IL_02da: Unknown result type (might be due to invalid IL or missing references)
				//IL_033a: Unknown result type (might be due to invalid IL or missing references)
				//IL_033f: Unknown result type (might be due to invalid IL or missing references)
				//IL_039f: Unknown result type (might be due to invalid IL or missing references)
				//IL_03a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_0404: Unknown result type (might be due to invalid IL or missing references)
				//IL_0409: Unknown result type (might be due to invalid IL or missing references)
				//IL_0469: Unknown result type (might be due to invalid IL or missing references)
				//IL_046e: Unknown result type (might be due to invalid IL or missing references)
				//IL_05f9: Unknown result type (might be due to invalid IL or missing references)
				//IL_05fb: Unknown result type (might be due to invalid IL or missing references)
				//IL_07cb: Unknown result type (might be due to invalid IL or missing references)
				//IL_07cd: Unknown result type (might be due to invalid IL or missing references)
				//IL_01be: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0225: Unknown result type (might be due to invalid IL or missing references)
				//IL_0227: Unknown result type (might be due to invalid IL or missing references)
				//IL_028a: Unknown result type (might be due to invalid IL or missing references)
				//IL_028c: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ef: Unknown result type (might be due to invalid IL or missing references)
				//IL_02f1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0354: Unknown result type (might be due to invalid IL or missing references)
				//IL_0356: Unknown result type (might be due to invalid IL or missing references)
				//IL_03b9: Unknown result type (might be due to invalid IL or missing references)
				//IL_03bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_041e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0420: Unknown result type (might be due to invalid IL or missing references)
				//IL_0483: Unknown result type (might be due to invalid IL or missing references)
				//IL_0485: Unknown result type (might be due to invalid IL or missing references)
				//IL_04d0: Unknown result type (might be due to invalid IL or missing references)
				//IL_04d5: Unknown result type (might be due to invalid IL or missing references)
				//IL_04eb: Unknown result type (might be due to invalid IL or missing references)
				//IL_04ed: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgb logicalDeviceLightRgb = <>4__this;
				CommandResult result;
				try
				{
					if ((uint)num <= 13u)
					{
						goto IL_0066;
					}
					if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLightRgb).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceLightRgb", String.Concat(((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)logicalDeviceLightRgb).DeviceName, " SendDirectCommandAsync ignored as logical device has been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else if (((CancellationToken)(ref cancelToken)).IsCancellationRequested)
					{
						result = (CommandResult)1;
					}
					else
					{
						if (((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)logicalDeviceLightRgb).IsRemoteAccessAvailable)
						{
							goto IL_0066;
						}
						result = (CommandResult)9;
					}
					goto end_IL_000e;
					IL_0066:
					try
					{
						RemoteRgbMode remoteRgbMode;
						TaskAwaiter<CommandResult> val;
						RgbLightModeCommand rgbLightModeCommand;
						HsvColor asHsvColor;
						byte b;
						switch (num)
						{
						default:
							remoteRgbMode = logicalDeviceLightRgb.RemoteRgbMode;
							if ((int)((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)logicalDeviceLightRgb).ActiveConnection == 2 && remoteRgbMode != null)
							{
								if (remoteRgbMode.IsCommandOneShotSupported)
								{
									val = remoteRgbMode.SendRemoteCommandAsync(command, cancelToken).GetAwaiter();
									if (!val.IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__89>(ref val, ref this);
										return;
									}
									goto IL_012a;
								}
								if (command.Mode != ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)logicalDeviceLightRgb).DeviceStatus.Mode.ConvertToCommandMode())
								{
									switch (command.Mode)
									{
									case RgbLightModeCommand.Off:
										break;
									case RgbLightModeCommand.On:
										goto IL_0204;
									case RgbLightModeCommand.Blink:
										goto IL_0269;
									case RgbLightModeCommand.Jump3:
										goto IL_02ce;
									case RgbLightModeCommand.Jump7:
										goto IL_0333;
									case RgbLightModeCommand.Fade3:
										goto IL_0398;
									case RgbLightModeCommand.Fade7:
										goto IL_03fd;
									case RgbLightModeCommand.Rainbow:
										goto IL_0462;
									case RgbLightModeCommand.Restore:
										goto IL_04c4;
									default:
										goto IL_0531;
									}
									val = remoteRgbMode.SendModeCommand(RemoteRgbModeChoice.Off).GetAwaiter();
									if (!val.IsCompleted)
									{
										num = (<>1__state = 1);
										<>u__1 = val;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__89>(ref val, ref this);
										return;
									}
									goto IL_01f5;
								}
								goto IL_0531;
							}
							result = (CommandResult)9;
							goto end_IL_0066;
						case 0:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_012a;
						case 1:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_01f5;
						case 2:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_025c;
						case 3:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_02c1;
						case 4:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0326;
						case 5:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_038b;
						case 6:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_03f0;
						case 7:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0455;
						case 8:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_04ba;
						case 9:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0522;
						case 10:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0630;
						case 11:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_06c2;
						case 12:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_0754;
						case 13:
							{
								val = <>u__1;
								<>u__1 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								break;
							}
							IL_0630:
							val.GetResult();
							goto IL_0638;
							IL_02c1:
							val.GetResult();
							goto IL_0531;
							IL_0204:
							val = remoteRgbMode.SendModeCommand(RemoteRgbModeChoice.On).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 2);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__89>(ref val, ref this);
								return;
							}
							goto IL_025c;
							IL_025c:
							val.GetResult();
							goto IL_0531;
							IL_012a:
							result = val.GetResult();
							goto end_IL_0066;
							IL_0638:
							if (!((CancellationToken)(ref cancelToken)).IsCancellationRequested)
							{
								if (<newOnDuration>5__3 != ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)logicalDeviceLightRgb).DeviceStatus.AutoOffDuration)
								{
									val = logicalDeviceLightRgb.RemoteRgbSleepMinutes.SendCommandDuration(<newOnDuration>5__3).GetAwaiter();
									if (!val.IsCompleted)
									{
										num = (<>1__state = 11);
										<>u__1 = val;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__89>(ref val, ref this);
										return;
									}
									goto IL_06c2;
								}
								goto IL_06ca;
							}
							result = (CommandResult)1;
							goto end_IL_0066;
							IL_01f5:
							val.GetResult();
							result = (CommandResult)0;
							goto end_IL_0066;
							IL_04c4:
							val = logicalDeviceLightRgb.RemoteRgbSwitchRestore.SendCommandSetSwitch(value: true).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 9);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__89>(ref val, ref this);
								return;
							}
							goto IL_0522;
							IL_0531:
							rgbLightModeCommand = LogicalDeviceLightRgbMode.RgbLightModeCommandFromByte((byte)command.Mode);
							<newColor>5__2 = new NativeColor(command.Color);
							asHsvColor = ((NativeColor)(ref <newColor>5__2)).AsHsvColor;
							b = (byte)((double)((HsvColor)(ref asHsvColor)).Brightness * 255.0);
							<newOnDuration>5__3 = command.AutoOffDuration;
							<newTimeInterval>5__4 = command.Interval;
							<updatedColor>5__5 = false;
							if (!((CancellationToken)(ref cancelToken)).IsCancellationRequested)
							{
								if (b != logicalDeviceLightRgb.MaxBrightness && rgbLightModeCommand != RgbLightModeCommand.Off)
								{
									<updatedColor>5__5 = true;
									val = logicalDeviceLightRgb.RemoteRgbColorAsNative.SendCommand(<newColor>5__2).GetAwaiter();
									if (!val.IsCompleted)
									{
										num = (<>1__state = 10);
										<>u__1 = val;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__89>(ref val, ref this);
										return;
									}
									goto IL_0630;
								}
								goto IL_0638;
							}
							result = (CommandResult)1;
							goto end_IL_0066;
							IL_0522:
							val.GetResult();
							result = (CommandResult)0;
							goto end_IL_0066;
							IL_0462:
							val = remoteRgbMode.SendModeCommand(RemoteRgbModeChoice.Rainbow).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 8);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__89>(ref val, ref this);
								return;
							}
							goto IL_04ba;
							IL_06ca:
							if (!((CancellationToken)(ref cancelToken)).IsCancellationRequested)
							{
								if (<newTimeInterval>5__4 != ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)logicalDeviceLightRgb).DeviceStatus.Interval)
								{
									val = logicalDeviceLightRgb.RemoteRgbTimeInterval.SendCommand(<newTimeInterval>5__4).GetAwaiter();
									if (!val.IsCompleted)
									{
										num = (<>1__state = 12);
										<>u__1 = val;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__89>(ref val, ref this);
										return;
									}
									goto IL_0754;
								}
								goto IL_075c;
							}
							result = (CommandResult)1;
							goto end_IL_0066;
							IL_04ba:
							val.GetResult();
							goto IL_0531;
							IL_03fd:
							val = remoteRgbMode.SendModeCommand(RemoteRgbModeChoice.FadePrimarySecondary).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 7);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__89>(ref val, ref this);
								return;
							}
							goto IL_0455;
							IL_0269:
							val = remoteRgbMode.SendModeCommand(RemoteRgbModeChoice.Blink).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 3);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__89>(ref val, ref this);
								return;
							}
							goto IL_02c1;
							IL_0455:
							val.GetResult();
							goto IL_0531;
							IL_0398:
							val = remoteRgbMode.SendModeCommand(RemoteRgbModeChoice.FadePrimary).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 6);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__89>(ref val, ref this);
								return;
							}
							goto IL_03f0;
							IL_0754:
							val.GetResult();
							goto IL_075c;
							IL_03f0:
							val.GetResult();
							goto IL_0531;
							IL_0333:
							val = remoteRgbMode.SendModeCommand(RemoteRgbModeChoice.BlinkPrimarySecondary).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 5);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__89>(ref val, ref this);
								return;
							}
							goto IL_038b;
							IL_075c:
							if (!((CancellationToken)(ref cancelToken)).IsCancellationRequested)
							{
								if (!<updatedColor>5__5 && command.Color != ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)logicalDeviceLightRgb).DeviceStatus.Color)
								{
									<updatedColor>5__5 = true;
									val = logicalDeviceLightRgb.RemoteRgbColorAsNative.SendCommand(<newColor>5__2).GetAwaiter();
									if (!val.IsCompleted)
									{
										num = (<>1__state = 13);
										<>u__1 = val;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__89>(ref val, ref this);
										return;
									}
									break;
								}
								goto IL_083d;
							}
							result = (CommandResult)1;
							goto end_IL_0066;
							IL_038b:
							val.GetResult();
							goto IL_0531;
							IL_02ce:
							val = remoteRgbMode.SendModeCommand(RemoteRgbModeChoice.BlinkPrimary).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 4);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendRemoteCommandAsync>d__89>(ref val, ref this);
								return;
							}
							goto IL_0326;
							IL_06c2:
							val.GetResult();
							goto IL_06ca;
							IL_0326:
							val.GetResult();
							goto IL_0531;
						}
						val.GetResult();
						goto IL_083d;
						end_IL_0066:;
					}
					catch (TimeoutException)
					{
						result = (CommandResult)5;
					}
					catch (OperationCanceledException)
					{
						result = (CommandResult)1;
					}
					catch (Exception ex3)
					{
						Exception ex4 = ex3;
						TaggedLog.Error("LogicalDeviceLightRgb", String.Format("SendDirectCommandAsync failed for {0}: {1}", (object)logicalDeviceLightRgb, (object)ex4.Message), Array.Empty<object>());
						result = (CommandResult)7;
					}
					goto end_IL_000e;
					IL_083d:
					result = (CommandResult)0;
					end_IL_000e:;
				}
				catch (Exception ex5)
				{
					Exception exception = ex5;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SetAutoOffDurationAsync>d__116 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightRgb <>4__this;

			public byte newDuration;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_0138: Unknown result type (might be due to invalid IL or missing references)
				//IL_013d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0142: Unknown result type (might be due to invalid IL or missing references)
				//IL_0147: Expected O, but got Unknown
				//IL_016c: Unknown result type (might be due to invalid IL or missing references)
				//IL_003a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0095: Unknown result type (might be due to invalid IL or missing references)
				//IL_009a: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dc: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e1: Unknown result type (might be due to invalid IL or missing references)
				//IL_010e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0113: Unknown result type (might be due to invalid IL or missing references)
				//IL_011b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0058: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_012c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0133: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f8: Unknown result type (might be due to invalid IL or missing references)
				//IL_007b: Unknown result type (might be due to invalid IL or missing references)
				//IL_007c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgb logicalDeviceLightRgb = <>4__this;
				CommandResult result;
				try
				{
					if ((uint)num > 1u && ((CommonDisposableNotifyPropertyChanged)logicalDeviceLightRgb).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceLightRgb", String.Concat(((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)logicalDeviceLightRgb).DeviceName, " SetAutoOffDurationAsync ignored as logical device has been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else
					{
						try
						{
							TaskAwaiter<CommandResult> val;
							TaskAwaiter val2;
							if (num != 0)
							{
								if (num == 1)
								{
									val = <>u__2;
									<>u__2 = default(TaskAwaiter<CommandResult>);
									num = (<>1__state = -1);
									goto IL_012a;
								}
								val2 = ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)logicalDeviceLightRgb).WaitForDeviceStatusToHaveDataAsync((int)logicalDeviceLightRgb.MSCommandTimeout, logicalDeviceLightRgb._commandCancelSource.Token).GetAwaiter();
								if (!((TaskAwaiter)(ref val2)).IsCompleted)
								{
									num = (<>1__state = 0);
									<>u__1 = val2;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SetAutoOffDurationAsync>d__116>(ref val2, ref this);
									return;
								}
							}
							else
							{
								val2 = <>u__1;
								<>u__1 = default(TaskAwaiter);
								num = (<>1__state = -1);
							}
							((TaskAwaiter)(ref val2)).GetResult();
							val = logicalDeviceLightRgb.SendCommandAsync(LogicalDeviceLightRgbCommand.MakeSleepDurationCommand(logicalDeviceLightRgb.Mode, logicalDeviceLightRgb.Color, newDuration, logicalDeviceLightRgb.Interval, forceTimerReset: true), waitForCurrentStatus: false).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SetAutoOffDurationAsync>d__116>(ref val, ref this);
								return;
							}
							goto IL_012a;
							IL_012a:
							val.GetResult();
							result = (CommandResult)0;
						}
						catch (TimeoutException)
						{
							result = (CommandResult)5;
						}
						catch (OperationCanceledException)
						{
							result = (CommandResult)1;
						}
						catch (Object)
						{
							result = (CommandResult)7;
						}
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SetSpeedIntervalAsync>d__124 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightRgb <>4__this;

			public LogicalDeviceLightSpeedInterval speedInterval;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_0241: Unknown result type (might be due to invalid IL or missing references)
				//IL_0246: Unknown result type (might be due to invalid IL or missing references)
				//IL_024b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0250: Expected O, but got Unknown
				//IL_0275: Unknown result type (might be due to invalid IL or missing references)
				//IL_003a: Unknown result type (might be due to invalid IL or missing references)
				//IL_009f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ac: Unknown result type (might be due to invalid IL or missing references)
				//IL_0188: Unknown result type (might be due to invalid IL or missing references)
				//IL_018d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0195: Unknown result type (might be due to invalid IL or missing references)
				//IL_0219: Unknown result type (might be due to invalid IL or missing references)
				//IL_021e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0226: Unknown result type (might be due to invalid IL or missing references)
				//IL_0060: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ab: Unknown result type (might be due to invalid IL or missing references)
				//IL_0237: Unknown result type (might be due to invalid IL or missing references)
				//IL_023c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0084: Unknown result type (might be due to invalid IL or missing references)
				//IL_0086: Unknown result type (might be due to invalid IL or missing references)
				//IL_0119: Unknown result type (might be due to invalid IL or missing references)
				//IL_013e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0153: Unknown result type (might be due to invalid IL or missing references)
				//IL_0158: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_016d: Unknown result type (might be due to invalid IL or missing references)
				//IL_016f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0201: Unknown result type (might be due to invalid IL or missing references)
				//IL_0203: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgb logicalDeviceLightRgb = <>4__this;
				CommandResult result;
				try
				{
					if ((uint)num > 2u && ((CommonDisposableNotifyPropertyChanged)logicalDeviceLightRgb).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceLightRgb", String.Concat(((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)logicalDeviceLightRgb).DeviceName, " SetAutoOffDurationAsync ignored as logical device has been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else
					{
						try
						{
							TaskAwaiter val2;
							TaskAwaiter<CommandResult> val;
							RgbLightMode mode;
							byte b;
							ushort interval;
							RgbLightTransitionMode mode2;
							switch (num)
							{
							default:
								val2 = ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)logicalDeviceLightRgb).WaitForDeviceStatusToHaveDataAsync((int)logicalDeviceLightRgb.MSCommandTimeout, logicalDeviceLightRgb._commandCancelSource.Token).GetAwaiter();
								if (!((TaskAwaiter)(ref val2)).IsCompleted)
								{
									num = (<>1__state = 0);
									<>u__1 = val2;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SetSpeedIntervalAsync>d__124>(ref val2, ref this);
									return;
								}
								goto IL_00bb;
							case 0:
								val2 = <>u__1;
								<>u__1 = default(TaskAwaiter);
								num = (<>1__state = -1);
								goto IL_00bb;
							case 1:
								val = <>u__2;
								<>u__2 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								goto IL_01a4;
							case 2:
								{
									val = <>u__2;
									<>u__2 = default(TaskAwaiter<CommandResult>);
									num = (<>1__state = -1);
									break;
								}
								IL_01a4:
								result = val.GetResult();
								goto end_IL_0041;
								IL_00bb:
								((TaskAwaiter)(ref val2)).GetResult();
								mode = logicalDeviceLightRgb.Mode;
								switch (mode)
								{
								default:
									TaggedLog.Warning("LogicalDeviceLightRgb", String.Format("Warning speed change ignored as current mode {0} doesn't support speed {1}", (object)mode, (object)((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)logicalDeviceLightRgb).DeviceName), Array.Empty<object>());
									result = (CommandResult)7;
									goto end_IL_0041;
								case RgbLightMode.Blink:
									break;
								case RgbLightMode.Jump3:
								case RgbLightMode.Jump7:
								case RgbLightMode.Fade3:
								case RgbLightMode.Fade7:
								case RgbLightMode.Rainbow:
									goto IL_01b1;
								}
								b = DictionaryExtension.TryGetWithCustomDefaultValue<LogicalDeviceLightSpeedInterval, byte>(_lightSpeedIntervalCycleTimeDict, speedInterval, _lightSpeedIntervalCycleTimeDict[LogicalDeviceLightSpeedInterval.Slow]);
								val = logicalDeviceLightRgb.SendCommandBlinkAsync(logicalDeviceLightRgb.Color, logicalDeviceLightRgb.AutoOffDurationMinutes, b, b, waitForCurrentStatus: false).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 1);
									<>u__2 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SetSpeedIntervalAsync>d__124>(ref val, ref this);
									return;
								}
								goto IL_01a4;
								IL_01b1:
								interval = DictionaryExtension.TryGetWithCustomDefaultValue<LogicalDeviceLightSpeedInterval, ushort>(_lightSpeedIntervalCycleTimeRainbowDict, speedInterval, _lightSpeedIntervalCycleTimeRainbowDict[LogicalDeviceLightSpeedInterval.Slow]);
								mode2 = LogicalDeviceLightRgbMode.RgbLightTransitionModeFromByte((byte)mode);
								val = logicalDeviceLightRgb.SendCommandTransitionAsync(mode2, logicalDeviceLightRgb.AutoOffDurationMinutes, interval, waitForCurrentStatus: false).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 2);
									<>u__2 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SetSpeedIntervalAsync>d__124>(ref val, ref this);
									return;
								}
								break;
							}
							result = val.GetResult();
							end_IL_0041:;
						}
						catch (TimeoutException)
						{
							result = (CommandResult)5;
						}
						catch (OperationCanceledException)
						{
							result = (CommandResult)1;
						}
						catch (Object)
						{
							result = (CommandResult)7;
						}
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ToggleAsync>d__94 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceLightRgb <>4__this;

			public bool restore;

			private ConfiguredTaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_00f8: Expected O, but got Unknown
				//IL_0063: Unknown result type (might be due to invalid IL or missing references)
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_0098: Unknown result type (might be due to invalid IL or missing references)
				//IL_009d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_002c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0030: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_004a: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgb logicalDeviceLightRgb = <>4__this;
				bool result;
				try
				{
					ConfiguredTaskAwaiter<bool> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_007e;
					}
					if (num != 1)
					{
						if (logicalDeviceLightRgb.On)
						{
							val = logicalDeviceLightRgb.TurnOffAsync().ConfigureAwait(false).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<bool>, <ToggleAsync>d__94>(ref val, ref this);
								return;
							}
							goto IL_007e;
						}
						val = logicalDeviceLightRgb.TurnOnAsync(restore).ConfigureAwait(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<bool>, <ToggleAsync>d__94>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<bool>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
					goto end_IL_000e;
					IL_007e:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TurnOffAsync>d__96 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceLightRgb <>4__this;

			private ConfiguredTaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_007b: Expected O, but got Unknown
				//IL_0051: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_005d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0018: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_0026: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0074: Invalid comparison between Unknown and I4
				//IL_003a: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgb logicalDeviceLightRgb = <>4__this;
				bool result;
				try
				{
					ConfiguredTaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceLightRgb.SendCommandOffAsync().ConfigureAwait(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<CommandResult>, <TurnOffAsync>d__96>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = (int)val.GetResult() == 0;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TurnOnAsync>d__95 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public bool restore;

			public LogicalDeviceLightRgb <>4__this;

			private ConfiguredTaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0098: Expected O, but got Unknown
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_007a: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0091: Invalid comparison between Unknown and I4
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_003a: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0043: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_0058: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgb logicalDeviceLightRgb = <>4__this;
				bool result;
				try
				{
					ConfiguredTaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = (restore ? logicalDeviceLightRgb.SendCommandRestoreAsync() : logicalDeviceLightRgb.SendCommandOnAsync(RgbColor.op_Implicit(16777215), 0)).ConfigureAwait(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<CommandResult>, <TurnOnAsync>d__95>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = (int)val.GetResult() == 0;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceLightRgb";

		protected ILogicalDeviceCommandRunnerIdsCan IdsCanCommandRunner;

		private CancellationTokenSource _commandCancelSource = new CancellationTokenSource();

		protected uint NumberOfCommandsRunning;

		private readonly object _lockForceUseCommandStatus = (object)new Object();

		private LogicalDeviceLightRgbStatus _shownStatus = new LogicalDeviceLightRgbStatus();

		protected RemoteCommandControl RemoteCommandControl = new RemoteCommandControl();

		protected ILogicalDeviceCommandControlRunner BasicCommandRunner = (ILogicalDeviceCommandControlRunner)new LogicalDeviceCommandControlRunner();

		public const byte BrightnessSetMin = 5;

		public const byte BrightnessSetMax = 250;

		private static readonly IReadOnlyDictionary<LogicalDeviceLightSpeedInterval, byte> _lightSpeedIntervalCycleTimeDict;

		private static readonly IReadOnlyDictionary<LogicalDeviceLightSpeedInterval, ushort> _lightSpeedIntervalCycleTimeRainbowDict;

		public virtual uint MSCommandTimeout => 5000u;

		public virtual uint MSSessionTimeout => 0u;

		public override bool IsLegacyDeviceHazardous => false;

		public bool IsRunningCommands => NumberOfCommandsRunning != 0;

		[field: CompilerGenerated]
		public RemoteOnline RemoteOnline
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteRgbSwitchRestore RemoteRgbSwitchRestore
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteRgbMode RemoteRgbMode
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteRgbSleepMinutes RemoteRgbSleepMinutes
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteRgbColorAsNative RemoteRgbColorAsNative
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RemoteRgbTimeInterval10Ms RemoteRgbTimeInterval
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RgbLightMode Mode
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public RgbColor Color
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		} = RgbColor.op_Implicit(0);

		[field: CompilerGenerated]
		public byte AutoOffDurationMinutes
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		} = 255;

		[field: CompilerGenerated]
		public byte OnInterval
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public byte OffInterval
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ushort Interval
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public bool ColorEnabled
		{
			get
			{
				if (Mode != RgbLightMode.On)
				{
					return Mode == RgbLightMode.Blink;
				}
				return true;
			}
		}

		public bool IsAutoOffDurationEnabled => Mode != RgbLightMode.Off;

		public bool OnOffIntervalEnabled => Mode == RgbLightMode.Blink;

		public bool IntervalEnabled => (int)Mode > 2;

		public byte MaxBrightness
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_0006: Unknown result type (might be due to invalid IL or missing references)
				//IL_0009: Unknown result type (might be due to invalid IL or missing references)
				//IL_000e: Unknown result type (might be due to invalid IL or missing references)
				RgbColor color = Color;
				HsvColor val = ((RgbColor)(ref color)).ToHsv();
				return (byte)(((HsvColor)(ref val)).Brightness * 255f);
			}
		}

		public bool On => Mode != RgbLightMode.Off;

		public bool IsCurrentlyOn
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)this).DeviceStatus).HasData)
				{
					return ((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)this).DeviceStatus.Mode != RgbLightMode.Off;
				}
				return false;
			}
		}

		public bool IsMasterSwitchControllable
		{
			get
			{
				if (((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).DeviceCapability.AllLightsGroupBehavior != AllLightsGroupBehaviorCapability.FeatureNotSupported)
				{
					return ((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).DeviceCapability.AllLightsGroupBehavior == AllLightsGroupBehaviorCapability.FeatureSupportedAndEnabled;
				}
				return !IsSecurityLight;
			}
		}

		public SwitchTransition SwitchInTransition
		{
			get
			{
				if (!On == (((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)this).DeviceStatus.Mode == RgbLightMode.Off) || NumberOfCommandsRunning == 0)
				{
					return SwitchTransition.No;
				}
				return SwitchTransition.Transitioning;
			}
		}

		public SwitchUsage UsedFor => SwitchUsage.Light;

		public byte DimmableBrightness => MaxBrightness;

		public bool IsDimmableBrightnessEnabled
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if ((int)((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).ActiveConnection != 0)
				{
					if (Mode != RgbLightMode.On)
					{
						return Mode == RgbLightMode.Blink;
					}
					return true;
				}
				return false;
			}
		}

		public override bool IsRemoteAccessAvailable
		{
			get
			{
				ILogicalDeviceRemoteManager remoteManager = ((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).DeviceService.RemoteManager;
				bool num = remoteManager != null && remoteManager.IsRemoteAccessAvailable((ILogicalDeviceRemote)(object)this, (IRemoteChannelDef)(RemoteRgbSwitchRestore?.Channel));
				ILogicalDeviceRemoteManager remoteManager2 = ((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).DeviceService.RemoteManager;
				bool flag = remoteManager2 != null && remoteManager2.IsRemoteAccessAvailable((ILogicalDeviceRemote)(object)this, (IRemoteChannelDef)(RemoteRgbMode?.Channel));
				return num && flag;
			}
		}

		public IRemoteChannelDefOnline RemoteOnlineChannel => RemoteOnline?.Channel;

		public bool IsSecurityLight => FunctionNameExtension.IsSecurityLight(((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).LogicalId.FunctionName);

		public bool SpeedIntervalEnabled
		{
			get
			{
				switch (Mode)
				{
				default:
					TaggedLog.Information("LogicalDeviceLightRgb", String.Format("SpeedIntervalEnabled FALSE: {0}: {1}", (object)Mode, (object)this), Array.Empty<object>());
					return false;
				case RgbLightMode.Blink:
				case RgbLightMode.Jump3:
				case RgbLightMode.Jump7:
				case RgbLightMode.Fade3:
				case RgbLightMode.Fade7:
				case RgbLightMode.Rainbow:
					TaggedLog.Information("LogicalDeviceLightRgb", String.Format("SpeedIntervalEnabled TRUE: {0}: {1}", (object)Mode, (object)this), Array.Empty<object>());
					return true;
				}
			}
		}

		public LogicalDeviceLightSpeedInterval SpeedInterval
		{
			get
			{
				ushort num = (OnOffIntervalEnabled ? Math.Max(OnInterval, OffInterval) : Interval);
				if (num == 0 || num >= _lightSpeedIntervalCycleTimeRainbowDict[LogicalDeviceLightSpeedInterval.Slow])
				{
					return LogicalDeviceLightSpeedInterval.Slow;
				}
				if (num >= _lightSpeedIntervalCycleTimeRainbowDict[LogicalDeviceLightSpeedInterval.Medium])
				{
					return LogicalDeviceLightSpeedInterval.Medium;
				}
				return LogicalDeviceLightSpeedInterval.Fast;
			}
		}

		public LogicalDeviceLightRgb(ILogicalDeviceId logicalDeviceId, ILogicalDeviceLightRgbCapability rgbCapability, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceLightRgbStatus(), rgbCapability, service, isFunctionClassChangeable)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Expected O, but got Unknown
			//IL_002d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0037: Expected O, but got Unknown
			//IL_0039: Unknown result type (might be due to invalid IL or missing references)
			//IL_003e: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ea: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ef: Unknown result type (might be due to invalid IL or missing references)
			//IL_00fb: Expected O, but got Unknown
			//IL_00fb: Unknown result type (might be due to invalid IL or missing references)
			//IL_0107: Expected O, but got Unknown
			//IL_010c: Expected O, but got Unknown
			RemoteOnline = new RemoteOnline((ILogicalDeviceRemote)(object)this, ((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).RemoteChannels);
			RemoteRgbSwitchRestore = new RemoteRgbSwitchRestore(this, RemoteCommandControl, ((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).RemoteChannels);
			RemoteRgbMode = new RemoteRgbMode(this, RemoteCommandControl, ((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).RemoteChannels);
			RemoteRgbSleepMinutes = new RemoteRgbSleepMinutes(this, RemoteCommandControl, ((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).RemoteChannels);
			RemoteRgbColorAsNative = new RemoteRgbColorAsNative(this, RemoteCommandControl, ((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).RemoteChannels);
			RemoteRgbTimeInterval = new RemoteRgbTimeInterval10Ms(this, RemoteCommandControl, ((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).RemoteChannels);
			LogicalDeviceCommandRunnerIdsCan val = new LogicalDeviceCommandRunnerIdsCan((ILogicalDevice)(object)this);
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).CommandProcessingTime = MSCommandTimeout;
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).SessionKeepAliveTime = MSSessionTimeout;
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)val;
		}

		public override void OnDeviceStatusChanged()
		{
			lock (_lockForceUseCommandStatus)
			{
				if (NumberOfCommandsRunning == 0)
				{
					SyncWithStatus(((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)this).DeviceStatus, sendChangedNotifications: false);
				}
			}
			LightSendNotifyPropertyChangeMessages();
			base.OnDeviceStatusChanged();
		}

		private void LightSendNotifyPropertyChangeMessages()
		{
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("Mode", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("On", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsCurrentlyOn", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("ColorEnabled", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsAutoOffDurationEnabled", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("OnOffIntervalEnabled", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IntervalEnabled", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsDimmableBrightnessEnabled", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("DimmableBrightness", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("SpeedIntervalEnabled", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("SpeedInterval", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("Color", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("MaxBrightness", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("AutoOffDurationMinutes", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("OnInterval", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("OffInterval", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("Interval", true);
		}

		public override void UpdateDeviceOnline(bool online)
		{
			((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).UpdateDeviceOnline(online);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsDimmableBrightnessEnabled", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("DimmableBrightness", true);
		}

		public override void UpdateRemoteAccessAvailable()
		{
			((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).UpdateRemoteAccessAvailable();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsDimmableBrightnessEnabled", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("DimmableBrightness", true);
		}

		protected void SyncWithStatus(LogicalDeviceLightRgbStatus status, bool sendChangedNotifications = true)
		{
			//IL_001b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0021: Unknown result type (might be due to invalid IL or missing references)
			//IL_002f: Unknown result type (might be due to invalid IL or missing references)
			if (Mode != status.Mode)
			{
				Mode = status.Mode;
			}
			if (Color != status.Color)
			{
				Color = status.Color;
			}
			if (AutoOffDurationMinutes != status.AutoOffDuration)
			{
				AutoOffDurationMinutes = status.AutoOffDuration;
			}
			if (Interval != status.Interval)
			{
				OnInterval = status.OnInterval;
				OffInterval = status.OffInterval;
				Interval = status.Interval;
			}
			if (sendChangedNotifications)
			{
				LightSendNotifyPropertyChangeMessages();
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommandOffAsync()
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandOffAsync>d__82 <SendCommandOffAsync>d__ = default(<SendCommandOffAsync>d__82);
			<SendCommandOffAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandOffAsync>d__.<>4__this = this;
			<SendCommandOffAsync>d__.<>1__state = -1;
			<SendCommandOffAsync>d__.<>t__builder.Start<<SendCommandOffAsync>d__82>(ref <SendCommandOffAsync>d__);
			return <SendCommandOffAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task<CommandResult> SendCommandColorAsync(RgbColor color)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandColorAsync>d__83 <SendCommandColorAsync>d__ = default(<SendCommandColorAsync>d__83);
			<SendCommandColorAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandColorAsync>d__.<>4__this = this;
			<SendCommandColorAsync>d__.color = color;
			<SendCommandColorAsync>d__.<>1__state = -1;
			<SendCommandColorAsync>d__.<>t__builder.Start<<SendCommandColorAsync>d__83>(ref <SendCommandColorAsync>d__);
			return <SendCommandColorAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommandOnAsync(RgbColor color, byte autoOffDuration = 0, bool waitForCurrentStatus = true)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandOnAsync>d__84 <SendCommandOnAsync>d__ = default(<SendCommandOnAsync>d__84);
			<SendCommandOnAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandOnAsync>d__.<>4__this = this;
			<SendCommandOnAsync>d__.color = color;
			<SendCommandOnAsync>d__.autoOffDuration = autoOffDuration;
			<SendCommandOnAsync>d__.waitForCurrentStatus = waitForCurrentStatus;
			<SendCommandOnAsync>d__.<>1__state = -1;
			<SendCommandOnAsync>d__.<>t__builder.Start<<SendCommandOnAsync>d__84>(ref <SendCommandOnAsync>d__);
			return <SendCommandOnAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommandBlinkAsync(RgbColor color, byte autoOffDuration, byte onInterval, byte offInterval, bool waitForCurrentStatus = true)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandBlinkAsync>d__85 <SendCommandBlinkAsync>d__ = default(<SendCommandBlinkAsync>d__85);
			<SendCommandBlinkAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandBlinkAsync>d__.<>4__this = this;
			<SendCommandBlinkAsync>d__.color = color;
			<SendCommandBlinkAsync>d__.autoOffDuration = autoOffDuration;
			<SendCommandBlinkAsync>d__.onInterval = onInterval;
			<SendCommandBlinkAsync>d__.offInterval = offInterval;
			<SendCommandBlinkAsync>d__.waitForCurrentStatus = waitForCurrentStatus;
			<SendCommandBlinkAsync>d__.<>1__state = -1;
			<SendCommandBlinkAsync>d__.<>t__builder.Start<<SendCommandBlinkAsync>d__85>(ref <SendCommandBlinkAsync>d__);
			return <SendCommandBlinkAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommandTransitionAsync(RgbLightTransitionMode mode, byte autoOffDuration, ushort interval, bool waitForCurrentStatus = true)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandTransitionAsync>d__86 <SendCommandTransitionAsync>d__ = default(<SendCommandTransitionAsync>d__86);
			<SendCommandTransitionAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandTransitionAsync>d__.<>4__this = this;
			<SendCommandTransitionAsync>d__.mode = mode;
			<SendCommandTransitionAsync>d__.autoOffDuration = autoOffDuration;
			<SendCommandTransitionAsync>d__.interval = interval;
			<SendCommandTransitionAsync>d__.waitForCurrentStatus = waitForCurrentStatus;
			<SendCommandTransitionAsync>d__.<>1__state = -1;
			<SendCommandTransitionAsync>d__.<>t__builder.Start<<SendCommandTransitionAsync>d__86>(ref <SendCommandTransitionAsync>d__);
			return <SendCommandTransitionAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommandRestoreAsync(bool waitForCurrentStatus = true)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandRestoreAsync>d__87 <SendCommandRestoreAsync>d__ = default(<SendCommandRestoreAsync>d__87);
			<SendCommandRestoreAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandRestoreAsync>d__.<>4__this = this;
			<SendCommandRestoreAsync>d__.waitForCurrentStatus = waitForCurrentStatus;
			<SendCommandRestoreAsync>d__.<>1__state = -1;
			<SendCommandRestoreAsync>d__.<>t__builder.Start<<SendCommandRestoreAsync>d__87>(ref <SendCommandRestoreAsync>d__);
			return <SendCommandRestoreAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommandAsync(LogicalDeviceLightRgbCommand command, bool waitForCurrentStatus)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandAsync>d__88 <SendCommandAsync>d__ = default(<SendCommandAsync>d__88);
			<SendCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandAsync>d__.<>4__this = this;
			<SendCommandAsync>d__.command = command;
			<SendCommandAsync>d__.waitForCurrentStatus = waitForCurrentStatus;
			<SendCommandAsync>d__.<>1__state = -1;
			<SendCommandAsync>d__.<>t__builder.Start<<SendCommandAsync>d__88>(ref <SendCommandAsync>d__);
			return <SendCommandAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendRemoteCommandAsync(LogicalDeviceLightRgbCommand command, CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<SendRemoteCommandAsync>d__89 <SendRemoteCommandAsync>d__ = default(<SendRemoteCommandAsync>d__89);
			<SendRemoteCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendRemoteCommandAsync>d__.<>4__this = this;
			<SendRemoteCommandAsync>d__.command = command;
			<SendRemoteCommandAsync>d__.cancelToken = cancelToken;
			<SendRemoteCommandAsync>d__.<>1__state = -1;
			<SendRemoteCommandAsync>d__.<>t__builder.Start<<SendRemoteCommandAsync>d__89>(ref <SendRemoteCommandAsync>d__);
			return <SendRemoteCommandAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> ToggleAsync(bool restore = true)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<ToggleAsync>d__94 <ToggleAsync>d__ = default(<ToggleAsync>d__94);
			<ToggleAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<ToggleAsync>d__.<>4__this = this;
			<ToggleAsync>d__.restore = restore;
			<ToggleAsync>d__.<>1__state = -1;
			<ToggleAsync>d__.<>t__builder.Start<<ToggleAsync>d__94>(ref <ToggleAsync>d__);
			return <ToggleAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TurnOnAsync(bool restore = true)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<TurnOnAsync>d__95 <TurnOnAsync>d__ = default(<TurnOnAsync>d__95);
			<TurnOnAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TurnOnAsync>d__.<>4__this = this;
			<TurnOnAsync>d__.restore = restore;
			<TurnOnAsync>d__.<>1__state = -1;
			<TurnOnAsync>d__.<>t__builder.Start<<TurnOnAsync>d__95>(ref <TurnOnAsync>d__);
			return <TurnOnAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TurnOffAsync()
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<TurnOffAsync>d__96 <TurnOffAsync>d__ = default(<TurnOffAsync>d__96);
			<TurnOffAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TurnOffAsync>d__.<>4__this = this;
			<TurnOffAsync>d__.<>1__state = -1;
			<TurnOffAsync>d__.<>t__builder.Start<<TurnOffAsync>d__96>(ref <TurnOffAsync>d__);
			return <TurnOffAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendDimmableBrightnessCommandAsync(byte brightness)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendDimmableBrightnessCommandAsync>d__105 <SendDimmableBrightnessCommandAsync>d__ = default(<SendDimmableBrightnessCommandAsync>d__105);
			<SendDimmableBrightnessCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendDimmableBrightnessCommandAsync>d__.<>4__this = this;
			<SendDimmableBrightnessCommandAsync>d__.brightness = brightness;
			<SendDimmableBrightnessCommandAsync>d__.<>1__state = -1;
			<SendDimmableBrightnessCommandAsync>d__.<>t__builder.Start<<SendDimmableBrightnessCommandAsync>d__105>(ref <SendDimmableBrightnessCommandAsync>d__);
			return <SendDimmableBrightnessCommandAsync>d__.<>t__builder.Task;
		}

		public override void OnLogicalIdChanged()
		{
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsSecurityLight", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsMasterSwitchControllable", true);
			((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).OnLogicalIdChanged();
		}

		public override void Dispose(bool disposing)
		{
			CancellationTokenSourceExtension.TryCancelAndDispose(_commandCancelSource);
			_commandCancelSource = null;
			RemoteOnline remoteOnline = RemoteOnline;
			if (remoteOnline != null)
			{
				((CommonDisposable)remoteOnline).TryDispose();
			}
			RemoteOnline = null;
			RemoteRgbSwitchRestore remoteRgbSwitchRestore = RemoteRgbSwitchRestore;
			if (remoteRgbSwitchRestore != null)
			{
				((CommonDisposable)remoteRgbSwitchRestore).TryDispose();
			}
			RemoteRgbSwitchRestore = null;
			RemoteRgbMode remoteRgbMode = RemoteRgbMode;
			if (remoteRgbMode != null)
			{
				((CommonDisposable)remoteRgbMode).TryDispose();
			}
			RemoteRgbMode = null;
			RemoteRgbSleepMinutes remoteRgbSleepMinutes = RemoteRgbSleepMinutes;
			if (remoteRgbSleepMinutes != null)
			{
				((CommonDisposable)remoteRgbSleepMinutes).TryDispose();
			}
			RemoteRgbSleepMinutes = null;
			RemoteRgbColorAsNative remoteRgbColorAsNative = RemoteRgbColorAsNative;
			if (remoteRgbColorAsNative != null)
			{
				((CommonDisposable)remoteRgbColorAsNative).TryDispose();
			}
			RemoteRgbColorAsNative = null;
			RemoteRgbTimeInterval10Ms remoteRgbTimeInterval = RemoteRgbTimeInterval;
			if (remoteRgbTimeInterval != null)
			{
				((CommonDisposable)remoteRgbTimeInterval).TryDispose();
			}
			RemoteRgbTimeInterval = null;
			RemoteCommandControl remoteCommandControl = RemoteCommandControl;
			if (remoteCommandControl != null)
			{
				((CommonDisposable)remoteCommandControl).TryDispose();
			}
			RemoteCommandControl = null;
			ILogicalDeviceCommandRunnerIdsCan idsCanCommandRunner = IdsCanCommandRunner;
			if (idsCanCommandRunner != null)
			{
				((ICommonDisposable)idsCanCommandRunner).TryDispose();
			}
			ILogicalDeviceCommandControlRunner basicCommandRunner = BasicCommandRunner;
			if (basicCommandRunner != null)
			{
				((ICommonDisposable)basicCommandRunner).TryDispose();
			}
			base.Dispose(disposing);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SetAutoOffDurationAsync(byte newDuration)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SetAutoOffDurationAsync>d__116 <SetAutoOffDurationAsync>d__ = default(<SetAutoOffDurationAsync>d__116);
			<SetAutoOffDurationAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SetAutoOffDurationAsync>d__.<>4__this = this;
			<SetAutoOffDurationAsync>d__.newDuration = newDuration;
			<SetAutoOffDurationAsync>d__.<>1__state = -1;
			<SetAutoOffDurationAsync>d__.<>t__builder.Start<<SetAutoOffDurationAsync>d__116>(ref <SetAutoOffDurationAsync>d__);
			return <SetAutoOffDurationAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> PerformCommand(RgbLightMode mode)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<PerformCommand>d__117 <PerformCommand>d__ = default(<PerformCommand>d__117);
			<PerformCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<PerformCommand>d__.<>4__this = this;
			<PerformCommand>d__.mode = mode;
			<PerformCommand>d__.<>1__state = -1;
			<PerformCommand>d__.<>t__builder.Start<<PerformCommand>d__117>(ref <PerformCommand>d__);
			return <PerformCommand>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SetSpeedIntervalAsync(LogicalDeviceLightSpeedInterval speedInterval)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SetSpeedIntervalAsync>d__124 <SetSpeedIntervalAsync>d__ = default(<SetSpeedIntervalAsync>d__124);
			<SetSpeedIntervalAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SetSpeedIntervalAsync>d__.<>4__this = this;
			<SetSpeedIntervalAsync>d__.speedInterval = speedInterval;
			<SetSpeedIntervalAsync>d__.<>1__state = -1;
			<SetSpeedIntervalAsync>d__.<>t__builder.Start<<SetSpeedIntervalAsync>d__124>(ref <SetSpeedIntervalAsync>d__);
			return <SetSpeedIntervalAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> PerformCommand(LogicalDeviceLightSpeedInterval speedInterval)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<PerformCommand>d__125 <PerformCommand>d__ = default(<PerformCommand>d__125);
			<PerformCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<PerformCommand>d__.<>4__this = this;
			<PerformCommand>d__.speedInterval = speedInterval;
			<PerformCommand>d__.<>1__state = -1;
			<PerformCommand>d__.<>t__builder.Start<<PerformCommand>d__125>(ref <PerformCommand>d__);
			return <PerformCommand>d__.<>t__builder.Task;
		}

		static LogicalDeviceLightRgb()
		{
			Dictionary<LogicalDeviceLightSpeedInterval, byte> obj = new Dictionary<LogicalDeviceLightSpeedInterval, byte>();
			obj.Add(LogicalDeviceLightSpeedInterval.Slow, (byte)207);
			obj.Add(LogicalDeviceLightSpeedInterval.Medium, (byte)87);
			obj.Add(LogicalDeviceLightSpeedInterval.Fast, (byte)15);
			_lightSpeedIntervalCycleTimeDict = (IReadOnlyDictionary<LogicalDeviceLightSpeedInterval, byte>)(object)obj;
			Dictionary<LogicalDeviceLightSpeedInterval, ushort> obj2 = new Dictionary<LogicalDeviceLightSpeedInterval, ushort>();
			obj2.Add(LogicalDeviceLightSpeedInterval.Slow, (ushort)750);
			obj2.Add(LogicalDeviceLightSpeedInterval.Medium, (ushort)500);
			obj2.Add(LogicalDeviceLightSpeedInterval.Fast, (ushort)250);
			_lightSpeedIntervalCycleTimeRainbowDict = (IReadOnlyDictionary<LogicalDeviceLightSpeedInterval, ushort>)(object)obj2;
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).LastReceivedNetworkStatus;
		}

		TRemoteChannelDef ILogicalDeviceRemote.GetRemoteChannelForChannelId<TRemoteChannelDef>(string channelId)
		{
			return ((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).GetRemoteChannelForChannelId<TRemoteChannelDef>(channelId);
		}
	}
	public enum RgbLightMode : Enum
	{
		Off = 0,
		On = 1,
		Blink = 2,
		Jump3 = 4,
		Jump7 = 5,
		Fade3 = 6,
		Fade7 = 7,
		Rainbow = 8
	}
	public enum RgbLightTransitionMode : Enum
	{
		Jump3 = 4,
		Jump7,
		Fade3,
		Fade7,
		Rainbow
	}
	public static class LogicalDeviceLightRgbMode : Object
	{
		public static RgbLightMode RgbLightModeFromByte(byte rawValue)
		{
			//IL_004c: Unknown result type (might be due to invalid IL or missing references)
			return rawValue switch
			{
				0 => RgbLightMode.Off, 
				1 => RgbLightMode.On, 
				2 => RgbLightMode.Blink, 
				4 => RgbLightMode.Jump3, 
				5 => RgbLightMode.Jump7, 
				6 => RgbLightMode.Fade3, 
				7 => RgbLightMode.Fade7, 
				8 => RgbLightMode.Rainbow, 
				_ => throw new ArgumentOutOfRangeException(String.Format("Unknown RgbLightMode value 0x{0:x2}", (object)rawValue)), 
			};
		}

		public static RgbLightTransitionMode RgbLightTransitionModeFromByte(byte rawValue)
		{
			//IL_0038: Unknown result type (might be due to invalid IL or missing references)
			return rawValue switch
			{
				4 => RgbLightTransitionMode.Jump3, 
				5 => RgbLightTransitionMode.Jump7, 
				6 => RgbLightTransitionMode.Fade3, 
				7 => RgbLightTransitionMode.Fade7, 
				8 => RgbLightTransitionMode.Rainbow, 
				_ => throw new ArgumentOutOfRangeException(String.Format("Unknown RgbLightTransitionMode value 0x{0:x2}", (object)rawValue)), 
			};
		}

		public static RgbLightModeCommand RgbLightModeCommandFromByte(byte rawValue)
		{
			//IL_0054: Unknown result type (might be due to invalid IL or missing references)
			return rawValue switch
			{
				0 => RgbLightModeCommand.Off, 
				1 => RgbLightModeCommand.On, 
				2 => RgbLightModeCommand.Blink, 
				4 => RgbLightModeCommand.Jump3, 
				5 => RgbLightModeCommand.Jump7, 
				6 => RgbLightModeCommand.Fade3, 
				7 => RgbLightModeCommand.Fade7, 
				8 => RgbLightModeCommand.Rainbow, 
				127 => RgbLightModeCommand.Restore, 
				_ => throw new ArgumentOutOfRangeException(String.Format("Unknown RgbLightModeCommand value 0x{0:x2}", (object)rawValue)), 
			};
		}
	}
	public static class RgbLightModeExtension : Object
	{
		public static RgbLightModeCommand ConvertToCommandMode(this RgbLightMode mode)
		{
			//IL_004c: Unknown result type (might be due to invalid IL or missing references)
			return mode switch
			{
				RgbLightMode.Off => RgbLightModeCommand.Off, 
				RgbLightMode.On => RgbLightModeCommand.On, 
				RgbLightMode.Blink => RgbLightModeCommand.Blink, 
				RgbLightMode.Jump3 => RgbLightModeCommand.Jump3, 
				RgbLightMode.Jump7 => RgbLightModeCommand.Jump7, 
				RgbLightMode.Fade3 => RgbLightModeCommand.Fade3, 
				RgbLightMode.Fade7 => RgbLightModeCommand.Fade7, 
				RgbLightMode.Rainbow => RgbLightModeCommand.Rainbow, 
				_ => throw new ArgumentOutOfRangeException(String.Format("Unknown ToRgbLightMode value {0}", (object)mode)), 
			};
		}
	}
	public class LogicalDeviceLightRgbSim : LogicalDeviceLightRgb, ILogicalDeviceCommandRunnerIdsCan, INotifyPropertyChanged, ICommonDisposable, IDisposable, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, IDevicesCommon
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <<-ctor>b__15_0>d : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceLightRgbSim <>4__this;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_00b4: Expected O, but got Unknown
				//IL_007e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0083: Unknown result type (might be due to invalid IL or missing references)
				//IL_008a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				//IL_004e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0053: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgbSim logicalDeviceLightRgbSim = <>4__this;
				try
				{
					if (num != 0)
					{
						goto IL_00a1;
					}
					TaskAwaiter<bool> val = <>u__1;
					<>u__1 = default(TaskAwaiter<bool>);
					num = (<>1__state = -1);
					goto IL_0099;
					IL_0099:
					val.GetResult();
					goto IL_00a1;
					IL_00a1:
					if (!logicalDeviceLightRgbSim._simTaskCancelSource.IsCancellationRequested)
					{
						((LogicalDevice<LogicalDeviceLightRgbStatus, ILogicalDeviceLightRgbCapability>)logicalDeviceLightRgbSim).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLightRgbSim._simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLightRgbSim._simStatus).MinSize);
						logicalDeviceLightRgbSim.SimTick();
						val = TaskExtension.TryDelay(250, logicalDeviceLightRgbSim._simTaskCancelSource.Token).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<-ctor>b__15_0>d>(ref val, ref this);
							return;
						}
						goto IL_0099;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandColorAsync>d__23 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceLightRgbSim <>4__this;

			public RgbColor color;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_00dd: Expected O, but got Unknown
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_0079: Unknown result type (might be due to invalid IL or missing references)
				//IL_0083: Unknown result type (might be due to invalid IL or missing references)
				//IL_0088: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d8: Unknown result type (might be due to invalid IL or missing references)
				//IL_009d: Unknown result type (might be due to invalid IL or missing references)
				//IL_009f: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0102: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLightRgbSim logicalDeviceLightRgbSim = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					TaskAwaiter val2;
					if (num != 0)
					{
						if (num == 1)
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_00d1;
						}
						val2 = Task.Delay(500).GetAwaiter();
						if (!((TaskAwaiter)(ref val2)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <SendCommandColorAsync>d__23>(ref val2, ref this);
							return;
						}
					}
					else
					{
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val2)).GetResult();
					val = ((LogicalDeviceLightRgb)logicalDeviceLightRgbSim).SendCommandColorAsync(color).GetAwaiter();
					if (!val.IsCompleted)
					{
						num = (<>1__state = 1);
						<>u__2 = val;
						<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandColorAsync>d__23>(ref val, ref this);
						return;
					}
					goto IL_00d1;
					IL_00d1:
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceLightRgbSim";

		private const int _tickIntervalMs = 250;

		private CancellationTokenSource _simTaskCancelSource = new CancellationTokenSource();

		private LogicalDeviceLightRgbStatus _simStatus = new LogicalDeviceLightRgbStatus();

		private RgbLightMode _lastOnMode = RgbLightMode.On;

		private RgbColor _lastOnColor;

		private bool _onlineStatus = true;

		private bool _commandSessionActivated;

		private int _simDurationTimeMs;

		private HsvColor _simCurrentRainbowColor = RgbColor.op_Implicit(RgbColor.ColorRed);

		private int _simRainbowHueDeltaPerTick;

		private float _simRainbowHue;

		private List<RgbColor> _colorJumpList = new List<RgbColor>();

		private int _colorJumpListIndex;

		private int _colorJumpDelayMs;

		public override bool IsLegacyDeviceHazardous => false;

		public override LogicalDeviceActiveConnection ActiveConnection
		{
			get
			{
				if (_onlineStatus)
				{
					return (LogicalDeviceActiveConnection)1;
				}
				return (LogicalDeviceActiveConnection)0;
			}
		}

		public override bool ActiveSession => CommandSessionActivated;

		public bool HasQueuedCommands => false;

		public bool CommandSessionActivated => _commandSessionActivated;

		public LogicalDeviceLightRgbSim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceLightRgbCapability rgbCapability, ILogicalDeviceService service, bool isFunctionClassChangeable = false, bool onlineStatus = true)
			: base(logicalDeviceId, rgbCapability, service, isFunctionClassChangeable)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_0025: Unknown result type (might be due to invalid IL or missing references)
			//IL_002a: Unknown result type (might be due to invalid IL or missing references)
			//IL_002f: Unknown result type (might be due to invalid IL or missing references)
			//IL_005f: Unknown result type (might be due to invalid IL or missing references)
			//IL_006a: Unknown result type (might be due to invalid IL or missing references)
			//IL_006f: Unknown result type (might be due to invalid IL or missing references)
			//IL_008c: Unknown result type (might be due to invalid IL or missing references)
			_onlineStatus = onlineStatus;
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)(object)this;
			_simStatus.SetRgbColor(RgbColor.ColorWhite);
			_lastOnColor = RgbColor.ColorWhite;
			RestartSim();
			Task.Run((Func<Task>)([AsyncStateMachine(/*Could not decode attribute arguments.*/)] [CompilerGenerated] () =>
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<-ctor>b__15_0>d <<-ctor>b__15_0>d = default(<<-ctor>b__15_0>d);
				<<-ctor>b__15_0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<-ctor>b__15_0>d.<>4__this = this;
				<<-ctor>b__15_0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<-ctor>b__15_0>d.<>t__builder)).Start<<<-ctor>b__15_0>d>(ref <<-ctor>b__15_0>d);
				return ((AsyncTaskMethodBuilder)(ref <<-ctor>b__15_0>d.<>t__builder)).Task;
			}), _simTaskCancelSource.Token);
		}

		public Task CommandActivateSession(CancellationToken cancelToken, bool activateSessionNow = true)
		{
			bool flag = !CommandSessionActivated;
			TaggedLog.Debug("LogicalDeviceLightRgbSim", String.Format("CommandActivateSession (SIM) for {0} - Start ChangingState={1}", (object)((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).DeviceName, (object)flag), Array.Empty<object>());
			_commandSessionActivated = true;
			if (flag)
			{
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("ActiveSession", true);
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("CommandSessionActivated", true);
			}
			TaggedLog.Debug("LogicalDeviceLightRgbSim", String.Concat("CommandActivateSession (SIM) for ", ((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).DeviceName, " - Stop"), Array.Empty<object>());
			return (Task)(object)Task.FromResult<int>(0);
		}

		public void CommandDeactivateSession(bool closeSession = true)
		{
			bool commandSessionActivated = CommandSessionActivated;
			TaggedLog.Debug("LogicalDeviceLightRgbSim", String.Format("CommandDeactivateSession (SIM) for {0} - Start ChangingState={1}", (object)((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).DeviceName, (object)commandSessionActivated), Array.Empty<object>());
			_commandSessionActivated = false;
			if (commandSessionActivated)
			{
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("ActiveSession", true);
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("CommandSessionActivated", true);
			}
			TaggedLog.Debug("LogicalDeviceLightRgbSim", String.Concat("CommandDeactivateSession (SIM) for ", ((LogicalDevice<ILogicalDeviceLightRgbCapability>)(object)this).DeviceName, " - Stop"), Array.Empty<object>());
		}

		public Task<CommandResult> SendCommandAsync(IDeviceCommandPacket dataPacket, CancellationToken cancelToken, Func<ILogicalDevice, CommandControl> cmdControl = null, CommandSendOption options = (CommandSendOption)0)
		{
			//IL_0019: Unknown result type (might be due to invalid IL or missing references)
			//IL_001b: Unknown result type (might be due to invalid IL or missing references)
			return SendCommandAsync(dataPacket.CommandByte, ((IDeviceDataPacket)dataPacket).CopyCurrentData(), ((IDeviceDataPacket)dataPacket).Size, dataPacket.CommandResponseTimeMs, cancelToken, cmdControl, options);
		}

		public Task<CommandResult> SendCommandAsync(byte commandByte, byte[] data, uint dataSize, int responseTimeMs, CancellationToken cancelToken, Func<ILogicalDevice, CommandControl> cmdControl = null, CommandSendOption options = (CommandSendOption)0)
		{
			//IL_0071: Unknown result type (might be due to invalid IL or missing references)
			//IL_0076: Unknown result type (might be due to invalid IL or missing references)
			//IL_0082: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ab: Unknown result type (might be due to invalid IL or missing references)
			//IL_00b7: Unknown result type (might be due to invalid IL or missing references)
			//IL_00fa: Unknown result type (might be due to invalid IL or missing references)
			//IL_012a: Unknown result type (might be due to invalid IL or missing references)
			if (dataSize != 8 || data.Length < 8)
			{
				return Task.FromResult<CommandResult>((CommandResult)7);
			}
			LogicalDeviceLightRgbCommand logicalDeviceLightRgbCommand = new LogicalDeviceLightRgbCommand(commandByte, (IReadOnlyList<byte>)(object)data);
			switch (logicalDeviceLightRgbCommand.Mode)
			{
			case RgbLightModeCommand.Off:
				_simStatus.SetMode(RgbLightMode.Off);
				break;
			case RgbLightModeCommand.On:
				_lastOnMode = RgbLightMode.On;
				_lastOnColor = logicalDeviceLightRgbCommand.Color;
				_simStatus.SetModeOn(logicalDeviceLightRgbCommand.Color, logicalDeviceLightRgbCommand.AutoOffDuration, logicalDeviceLightRgbCommand.Interval);
				break;
			case RgbLightModeCommand.Blink:
				_lastOnMode = RgbLightMode.Blink;
				_lastOnColor = logicalDeviceLightRgbCommand.Color;
				_simStatus.SetModeBlink(logicalDeviceLightRgbCommand.Color, logicalDeviceLightRgbCommand.AutoOffDuration, logicalDeviceLightRgbCommand.OnInterval, logicalDeviceLightRgbCommand.OffInterval);
				break;
			case RgbLightModeCommand.Jump3:
			case RgbLightModeCommand.Jump7:
			case RgbLightModeCommand.Fade3:
			case RgbLightModeCommand.Fade7:
			case RgbLightModeCommand.Rainbow:
			{
				_lastOnMode = LogicalDeviceLightRgbMode.RgbLightModeFromByte((byte)logicalDeviceLightRgbCommand.Mode);
				RgbLightTransitionMode mode = LogicalDeviceLightRgbMode.RgbLightTransitionModeFromByte((byte)logicalDeviceLightRgbCommand.Mode);
				_simStatus.SetModeTransition(mode, logicalDeviceLightRgbCommand.Color, logicalDeviceLightRgbCommand.AutoOffDuration, logicalDeviceLightRgbCommand.Interval);
				break;
			}
			case RgbLightModeCommand.Restore:
				_simStatus.SetMode(_lastOnMode);
				_simStatus.SetRgbColor(_lastOnColor);
				break;
			}
			RestartSim();
			return Task.FromResult<CommandResult>((CommandResult)0);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public override Task<CommandResult> SendCommandColorAsync(RgbColor color)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandColorAsync>d__23 <SendCommandColorAsync>d__ = default(<SendCommandColorAsync>d__23);
			<SendCommandColorAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandColorAsync>d__.<>4__this = this;
			<SendCommandColorAsync>d__.color = color;
			<SendCommandColorAsync>d__.<>1__state = -1;
			<SendCommandColorAsync>d__.<>t__builder.Start<<SendCommandColorAsync>d__23>(ref <SendCommandColorAsync>d__);
			return <SendCommandColorAsync>d__.<>t__builder.Task;
		}

		public override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
			CancellationTokenSource simTaskCancelSource = _simTaskCancelSource;
			if (simTaskCancelSource != null)
			{
				CancellationTokenSourceExtension.TryCancelAndDispose(simTaskCancelSource);
			}
			_simTaskCancelSource = null;
		}

		private void RestartSim()
		{
			//IL_0066: Unknown result type (might be due to invalid IL or missing references)
			//IL_0076: Unknown result type (might be due to invalid IL or missing references)
			//IL_0086: Unknown result type (might be due to invalid IL or missing references)
			//IL_00b8: Unknown result type (might be due to invalid IL or missing references)
			//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d8: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e8: Unknown result type (might be due to invalid IL or missing references)
			//IL_00f8: Unknown result type (might be due to invalid IL or missing references)
			//IL_0108: Unknown result type (might be due to invalid IL or missing references)
			//IL_012e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0133: Unknown result type (might be due to invalid IL or missing references)
			//IL_0138: Unknown result type (might be due to invalid IL or missing references)
			_simDurationTimeMs = _simStatus.AutoOffDuration * 60000;
			switch (_simStatus.Mode)
			{
			case RgbLightMode.Jump3:
				_colorJumpListIndex = 0;
				_colorJumpList.Clear();
				_colorJumpList.Add(RgbColor.ColorRed);
				_colorJumpList.Add(RgbColor.ColorGreen);
				_colorJumpList.Add(RgbColor.ColorBlue);
				_colorJumpDelayMs = _simStatus.Interval * 10 + 250;
				break;
			case RgbLightMode.Jump7:
				_colorJumpListIndex = 0;
				_colorJumpList.Add(RgbColor.ColorRed);
				_colorJumpList.Add(RgbColor.ColorGreen);
				_colorJumpList.Add(RgbColor.ColorBlue);
				_colorJumpList.Add(RgbColor.ColorCyan);
				_colorJumpList.Add(RgbColor.ColorMagenta);
				_colorJumpList.Add(RgbColor.ColorWhite);
				_colorJumpDelayMs = _simStatus.Interval * 10 + 250;
				break;
			case RgbLightMode.Fade3:
			case RgbLightMode.Fade7:
			case RgbLightMode.Rainbow:
			{
				_simCurrentRainbowColor = RgbColor.op_Implicit(RgbColor.ColorRed);
				_simRainbowHue = ((HsvColor)(ref _simCurrentRainbowColor)).Hue;
				float num = Math.Max((int)_simStatus.Interval, 15);
				num = Math.Min(num, 255f);
				float num2 = 1f - num / 255f;
				_simRainbowHueDeltaPerTick = (int)(20f * num2 + 10f);
				break;
			}
			case RgbLightMode.Off:
			case RgbLightMode.On:
			case RgbLightMode.Blink:
			case (RgbLightMode)3:
				break;
			}
		}

		private void SimTick()
		{
			//IL_0183: Unknown result type (might be due to invalid IL or missing references)
			//IL_0188: Unknown result type (might be due to invalid IL or missing references)
			//IL_0194: Unknown result type (might be due to invalid IL or missing references)
			//IL_0199: Unknown result type (might be due to invalid IL or missing references)
			//IL_0124: Unknown result type (might be due to invalid IL or missing references)
			if (_simStatus.AutoOffDuration != 0)
			{
				_simDurationTimeMs -= 250;
				if (_simDurationTimeMs <= 0)
				{
					_simStatus.SetMode(RgbLightMode.Off);
				}
				else
				{
					_simStatus.SetAutoOffDuration((byte)(_simDurationTimeMs / 60000 + 1));
				}
			}
			switch (_simStatus.Mode)
			{
			case RgbLightMode.Jump3:
			case RgbLightMode.Jump7:
				try
				{
					if (_colorJumpList.Count != 0)
					{
						_colorJumpDelayMs -= 250;
						if (_colorJumpDelayMs <= 0)
						{
							_colorJumpDelayMs = _simStatus.Interval * 10 + 250;
							_colorJumpListIndex = (_colorJumpListIndex + 1) % _colorJumpList.Count;
							TaggedLog.Debug("LogicalDeviceLightRgbSim", String.Format("Show Jump Color index = {0}", (object)_colorJumpListIndex), Array.Empty<object>());
							_simStatus.SetRgbColor(_colorJumpList[_colorJumpListIndex]);
						}
					}
					break;
				}
				catch (Object)
				{
					break;
				}
			case RgbLightMode.Fade3:
			case RgbLightMode.Fade7:
			case RgbLightMode.Rainbow:
				_simRainbowHue += _simRainbowHueDeltaPerTick;
				if (_simRainbowHue > 360f)
				{
					_simRainbowHue -= 360f;
				}
				_simCurrentRainbowColor = new HsvColor(_simRainbowHue, ((HsvColor)(ref _simCurrentRainbowColor)).Saturation, ((HsvColor)(ref _simCurrentRainbowColor)).Value);
				_simStatus.SetRgbColor(HsvColor.op_Implicit(_simCurrentRainbowColor));
				break;
			case RgbLightMode.Off:
			case RgbLightMode.On:
			case RgbLightMode.Blink:
			case (RgbLightMode)3:
				break;
			}
		}

		private void SimTickBlink()
		{
		}
	}
	public class LogicalDeviceLightRgbStatus : LogicalDeviceStatusPacketMutable, ILogicalDeviceStatus<LogicalDeviceLightRgbStatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		private const int StatusPacketSize = 8;

		public const uint LightModeByteIndex = 0u;

		public const uint ColorRedByteIndex = 1u;

		public const uint ColorGreenByteIndex = 2u;

		public const uint ColorBlueByteIndex = 3u;

		public const uint AutoOffDurationByteIndex = 4u;

		public const uint IntervalMsbIndex = 5u;

		public const uint IntervalLsbIndex = 6u;

		public const uint UnsuedByteIndex = 7u;

		public bool On
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0] > 0;
				}
				return false;
			}
		}

		public RgbLightMode Mode
		{
			get
			{
				try
				{
					return LogicalDeviceLightRgbMode.RgbLightModeFromByte(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0]);
				}
				catch (Object)
				{
					return RgbLightMode.Off;
				}
			}
		}

		public RgbColor Color => new RgbColor(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[1], ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[2], ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3]);

		public byte AutoOffDuration => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[4];

		public bool OnOffIntervalValid => Mode == RgbLightMode.Blink;

		public byte OnInterval => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[5];

		public byte OffInterval => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[6];

		public bool IntervalValid => (int)Mode > 2;

		public ushort Interval => (ushort)((((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[5] << 8) | ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[6]);

		public LogicalDeviceLightRgbStatus()
			: base(8u)
		{
		}

		public LogicalDeviceLightRgbStatus(LogicalDeviceLightRgbStatus originalStatus)
		{
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalStatus).Data;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(data, data.Length, false);
		}

		public LogicalDeviceLightRgbStatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceLightRgbStatusSerializable(this);
		}

		public override string ToString()
		{
			//IL_002a: Unknown result type (might be due to invalid IL or missing references)
			return String.Format("RgbLightStatusPacket: On={0}, Mode={1}, Color={2}, AutoOffDuration={3}, Interval=0x{4:x4}", (object[])(object)new Object[5]
			{
				(object)On,
				(object)Mode,
				(object)Color,
				(object)AutoOffDuration,
				(object)Interval
			});
		}

		public void SetMode(RgbLightMode mode)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)mode, 0);
		}

		public void SetRgbColor(RgbColor color)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, ((RgbColor)(ref color)).Red, 1);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, ((RgbColor)(ref color)).Green, 2);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, ((RgbColor)(ref color)).Blue, 3);
		}

		public void SetAutoOffDuration(byte autoOffDuration)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, autoOffDuration, 4);
		}

		public void SetModeOff()
		{
			//IL_0003: Unknown result type (might be due to invalid IL or missing references)
			SetStatusPacket(RgbLightMode.Off, Color, AutoOffDuration, Interval);
		}

		public void SetModeOn(RgbColor color, byte autoOffDuration = 0, ushort interval = 0)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			SetStatusPacket(RgbLightMode.On, color, autoOffDuration, interval);
		}

		public void SetModeBlink(RgbColor color, byte autoOffDuration, byte onInterval, byte offInterval)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			SetStatusPacket(RgbLightMode.Blink, color, autoOffDuration, onInterval, offInterval);
		}

		public void SetModeTransition(RgbLightTransitionMode mode, RgbColor color, byte autoOffDuration, ushort interval)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			SetStatusPacket(LogicalDeviceLightRgbMode.RgbLightModeFromByte((byte)mode), color, autoOffDuration, interval);
		}

		public void SetInterval(ushort interval)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			SetStatusPacket(Mode, Color, AutoOffDuration, interval);
		}

		private void SetStatusPacket(RgbLightMode mode, RgbColor color, byte autoOffDuration, ushort interval)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			SetStatusPacket(mode, color, autoOffDuration, (byte)((interval & 0xFF00) >> 8), (byte)(interval & 0xFF));
		}

		private void SetStatusPacket(RgbLightMode mode, RgbColor color, byte autoOffDuration, byte onInterval, byte offInterval)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			SetMode(mode);
			SetRgbColor(color);
			SetAutoOffDuration(autoOffDuration);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, onInterval, 5);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, offInterval, 6);
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceLightRgbStatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceLightRgbStatusSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceLightRgbStatusSerializable);
			}
		}

		[JsonProperty]
		public bool IsOn
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public RgbLightMode Mode
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte ColorRed
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte ColorGreen
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte ColorBlue
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte AutoOffDuration
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool OnOffIntervalValid
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte OnInterval
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte OffInterval
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool IntervalValid
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public ushort Interval
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceLightRgbStatusSerializable(bool isOn, RgbLightMode mode, byte colorRed, byte colorGreen, byte colorBlue, byte autoOffDuration, bool onOffIntervalValid, byte onInterval, byte offInterval, bool intervalValid, ushort interval)
		{
			IsOn = isOn;
			Mode = mode;
			ColorRed = colorRed;
			ColorGreen = colorGreen;
			ColorBlue = colorBlue;
			AutoOffDuration = autoOffDuration;
			OnOffIntervalValid = onOffIntervalValid;
			OnInterval = onInterval;
			OffInterval = offInterval;
			IntervalValid = intervalValid;
			Interval = interval;
		}

		public LogicalDeviceLightRgbStatusSerializable(LogicalDeviceLightRgbStatus rgbStatus)
		{
			//IL_000e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0013: Unknown result type (might be due to invalid IL or missing references)
			//IL_001c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0021: Unknown result type (might be due to invalid IL or missing references)
			//IL_002a: Unknown result type (might be due to invalid IL or missing references)
			//IL_002f: Unknown result type (might be due to invalid IL or missing references)
			bool isOn = rgbStatus.On;
			RgbLightMode mode = rgbStatus.Mode;
			RgbColor color = rgbStatus.Color;
			byte red = ((RgbColor)(ref color)).Red;
			color = rgbStatus.Color;
			byte green = ((RgbColor)(ref color)).Green;
			color = rgbStatus.Color;
			this..ctor(isOn, mode, red, green, ((RgbColor)(ref color)).Blue, rgbStatus.AutoOffDuration, rgbStatus.OnOffIntervalValid, rgbStatus.OnInterval, rgbStatus.OffInterval, rgbStatus.IntervalValid, rgbStatus.Interval);
		}

		public override byte[] MakeRawData()
		{
			//IL_0067: Unknown result type (might be due to invalid IL or missing references)
			//IL_007c: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
			LogicalDeviceLightRgbStatus logicalDeviceLightRgbStatus = new LogicalDeviceLightRgbStatus();
			logicalDeviceLightRgbStatus.SetMode(Mode);
			RgbColor color = default(RgbColor);
			((RgbColor)(ref color))..ctor(ColorRed, ColorGreen, ColorBlue);
			switch (Mode)
			{
			case RgbLightMode.Off:
				logicalDeviceLightRgbStatus.SetModeOff();
				break;
			case RgbLightMode.On:
				logicalDeviceLightRgbStatus.SetModeOn(color, AutoOffDuration, Interval);
				break;
			case RgbLightMode.Blink:
				logicalDeviceLightRgbStatus.SetModeBlink(color, AutoOffDuration, OnInterval, OffInterval);
				break;
			case RgbLightMode.Jump3:
			case RgbLightMode.Jump7:
			case RgbLightMode.Fade3:
			case RgbLightMode.Fade7:
			case RgbLightMode.Rainbow:
			{
				RgbLightTransitionMode mode = LogicalDeviceLightRgbMode.RgbLightTransitionModeFromByte((byte)Mode);
				logicalDeviceLightRgbStatus.SetModeTransition(mode, color, AutoOffDuration, Interval);
				break;
			}
			}
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLightRgbStatus).CopyCurrentData();
		}

		public static LogicalDeviceLightRgbStatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceLightRgbStatus logicalDeviceLightRgbStatus = new LogicalDeviceLightRgbStatus();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLightRgbStatus).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLightRgbStatus).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLightRgbStatus).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLightRgbStatus).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLightRgbStatus).Update(rawData, rawData.Length, false);
			return new LogicalDeviceLightRgbStatusSerializable(logicalDeviceLightRgbStatus);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceLightRgbStatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceLightRgbStatusSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("IsOn = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsOn)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Mode = ");
			builder.Append(((Object)Mode/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ColorRed = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref ColorRed)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ColorGreen = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref ColorGreen)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ColorBlue = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref ColorBlue)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", AutoOffDuration = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref AutoOffDuration)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", OnOffIntervalValid = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref OnOffIntervalValid)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", OnInterval = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref OnInterval)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", OffInterval = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref OffInterval)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IntervalValid = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IntervalValid)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Interval = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<ushort, UInt16>(ref Interval)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return ((((((((((base.GetHashCode() * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsOn)) * -1521134295 + EqualityComparer<RgbLightMode>.Default.GetHashCode(Mode)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(ColorRed)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(ColorGreen)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(ColorBlue)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(AutoOffDuration)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(OnOffIntervalValid)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(OnInterval)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(OffInterval)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IntervalValid)) * -1521134295 + EqualityComparer<ushort>.Default.GetHashCode(Interval);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceLightRgbStatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceLightRgbStatusSerializable(LogicalDeviceLightRgbStatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceLightRgbStatusSerializable>)original)
		{
			IsOn = original.IsOn;
			Mode = original.Mode;
			ColorRed = original.ColorRed;
			ColorGreen = original.ColorGreen;
			ColorBlue = original.ColorBlue;
			AutoOffDuration = original.AutoOffDuration;
			OnOffIntervalValid = original.OnOffIntervalValid;
			OnInterval = original.OnInterval;
			OffInterval = original.OffInterval;
			IntervalValid = original.IntervalValid;
			Interval = original.Interval;
		}
	}
}
namespace OneControl.Devices.Leveler
{
	public enum LevelerConfigurationChassis : Enum
	{
		ClassA,
		ClassC,
		FifthWheel,
		TravelTrailer
	}
	public enum LevelerConfigurationJack : Enum
	{
		ThreeJack = 0,
		FourJack = 1,
		FourJackTongue = 2,
		SixJack = 3,
		TwoJackTongue = 6
	}
	public static class LevelerConfigurationJackExtension : Object
	{
		public static bool HasJackTongue(this LevelerConfigurationJack jack)
		{
			if (jack != LevelerConfigurationJack.FourJackTongue)
			{
				return jack == LevelerConfigurationJack.TwoJackTongue;
			}
			return true;
		}
	}
	public enum LevelerConfigurationJackDrive : Enum
	{
		Hydraulic,
		Electric
	}
	internal sealed class SimBubbleLevel : Object
	{
		private const int DurationForResetInSeconds = 30;

		private const int DefaultTimeToReachZeroInSeconds = 8;

		private readonly int _ticksPerSeconds;

		private uint _angleTick;

		private int _angleStepDeg;

		private int _durationInSecondsX;

		private int _durationInSecondsY;

		private int _numTicksX;

		private int _numTicksY;

		private float _startX;

		private float _startY;

		private float _radiusX;

		private float _radiusY;

		private int _ticksAtZero;

		private Random _random;

		private int _resetDelayInSeconds;

		private int _timeToReachZeroInSeconds;

		private int _ticksWaitingForResetDelay;

		private bool _isWaitingForResetDelay;

		public SimBubbleLevel(int tickIntervalMs, int timeToReachZeroInSeconds = 8)
		{
			//IL_0010: Unknown result type (might be due to invalid IL or missing references)
			//IL_0015: Unknown result type (might be due to invalid IL or missing references)
			//IL_002d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0037: Expected O, but got Unknown
			TimeSpan val = TimeSpan.FromSeconds(1.0);
			_ticksPerSeconds = (int)((TimeSpan)(ref val)).TotalMilliseconds / tickIntervalMs;
			_timeToReachZeroInSeconds = timeToReachZeroInSeconds;
			_random = new Random();
			_angleTick = 0u;
			Reset();
		}

		public void Reset(int delayUntilNextResetInSeconds = 0)
		{
			if (delayUntilNextResetInSeconds > 0)
			{
				if (!_isWaitingForResetDelay)
				{
					_isWaitingForResetDelay = true;
					_resetDelayInSeconds = delayUntilNextResetInSeconds;
					_ticksWaitingForResetDelay = 0;
				}
				else
				{
					if (_ticksWaitingForResetDelay < _resetDelayInSeconds * _ticksPerSeconds)
					{
						return;
					}
					_ticksAtZero = 0;
					_resetDelayInSeconds = 0;
					_isWaitingForResetDelay = false;
				}
			}
			_angleStepDeg = 5;
			_durationInSecondsX = _timeToReachZeroInSeconds;
			_durationInSecondsY = _random.Next(7, 9);
			_numTicksX = _ticksPerSeconds * _durationInSecondsX;
			_numTicksY = _ticksPerSeconds * _durationInSecondsY;
			_startX = _random.Next(12, 18);
			_startY = _random.Next(14, 20);
			_radiusX = _startX;
			_radiusY = _startY;
			_ticksAtZero = 0;
		}

		public ValueTuple<float, float> UpdateAngle()
		{
			//IL_00e9: Unknown result type (might be due to invalid IL or missing references)
			if (_radiusX > 0f)
			{
				_radiusX -= _startX / (float)_numTicksX;
			}
			if (_radiusY > 0f)
			{
				_radiusY -= _startY / (float)_numTicksY;
			}
			_angleTick = (uint)(_angleTick + _angleStepDeg) % 360;
			float num = (float)MathCommon.DegreeToRadian((double)_angleTick);
			float num2 = (float)((double)_radiusX * Math.Cos((double)num));
			float num3 = (float)((double)_radiusY * Math.Sin((double)num));
			if (num2 <= 0f && num3 <= 0f)
			{
				_ticksAtZero++;
				if (_ticksAtZero >= 30 * _ticksPerSeconds)
				{
					Reset();
				}
			}
			if (_isWaitingForResetDelay)
			{
				_ticksWaitingForResetDelay++;
			}
			return new ValueTuple<float, float>(num2, num3);
		}
	}
}
namespace OneControl.Devices.Leveler.Type5
{
	public enum AirbagFillTimeType : Enum
	{
		[Description("Short")]
		Short = 0,
		[Description("Long")]
		Long = 1,
		[Description("Unknown")]
		Unknown = 255
	}
	public enum LevelerAutoOperationAck : Enum
	{
		Cancel,
		Continue
	}
	public enum LevelerAutoOperationExtendJacks : Enum
	{
		Front = 0,
		Rear = 1,
		Left = 2,
		Right = 3,
		Tongue = 4,
		All = 5,
		AirbagOverrideFill = 6,
		Unknown = 65535
	}
	public enum LevelerAutoOperationRetractJacks : Enum
	{
		All = 1,
		Front = 2,
		Rear = 3,
		Home = 4,
		AirbagOverrideDump = 5,
		AllWithSnooze = 32769,
		FrontWithSnooze = 32770,
		RearWithSnooze = 32771,
		HomeWithSnooze = 32772,
		Unknown = 65535
	}
	[DefaultValue(LevelerAutoOperationSetPoint.Unknown)]
	public enum LevelerAutoOperationSetPoint : Enum
	{
		Factory = 0,
		SetPoint1 = 1,
		SetPoint2 = 2,
		SetPoint3 = 3,
		SetPoint4 = 4,
		SystemOffset = 65534,
		Unknown = 65535
	}
	public enum LevelerAutoOperationStatus : Enum
	{
		Idle,
		InProgress,
		CompletedSuccess
	}
	public enum LevelerAutoOperationStep : Enum
	{
		[Description("")]
		None,
		[Description("Leveling RV")]
		Level,
		[Description("Leveling Front")]
		LevelFront,
		[Description("Leveling Rear")]
		LevelRear,
		[Description("Retracting Jacks")]
		RetractJacks,
		[Description("Retracting Front")]
		RetractFront,
		[Description("Retracting Rear")]
		RetractRear,
		[Description("Retracting Middle")]
		RetractMiddle,
		[Description("Retracting Tongue")]
		RetractTongue,
		[Description("Grounding Jacks")]
		GroundJacks,
		[Description("Grounding Front")]
		GroundFront,
		[Description("Grounding Rear")]
		GroundRear,
		[Description("Grounding Tongue")]
		GroundTongue,
		[Description("Extending Jacks")]
		ExtendJacks,
		[Description("Extending Front")]
		ExtendFront,
		[Description("Extending Rear")]
		ExtendRear,
		[Description("Extending Tongue")]
		ExtendTongue,
		[Description("Verifying Ground Contact")]
		VerifyGround,
		[Description("Finding Hitch Point")]
		FindHitch,
		[Description("Clearing Tongue Jack")]
		ClearTongueJack,
		[Description("Stabilizing")]
		Stabilize,
		[Description("Lifting Front")]
		LeftFront,
		[Description("Lifting Rear")]
		LiftRear,
		[Description("Lowering Front")]
		LowerFront,
		[Description("Lowering Rear")]
		LowerRear,
		[Description("Filling Airbags")]
		FillAirBags,
		[Description("Emptying Airbags")]
		EmptyAirBags,
		[Description("Raising Axle")]
		RaiseAxle,
		[Description("Lowering Axle")]
		LowerAxle,
		[Description("Stowing Axle")]
		StowAxle,
		[Description("Saving Setpoint")]
		ZeroWait
	}
	public static class LevelerAutoOperationStepExtension : Object
	{
		public static string? TryGetUserVisibleTextEnglish(this LevelerAutoOperationStep autoStep)
		{
			if (!Enum.IsDefined(typeof(LevelerAutoOperationStep), (object)autoStep))
			{
				return null;
			}
			string result = default(string);
			if (!EnumExtensions.TryGetDescription((Enum)(object)autoStep, ref result))
			{
				return null;
			}
			return result;
		}
	}
	public enum LevelerOperationCodeProgress : Enum
	{
		None = 0,
		AutoLevel = 1,
		AutoHitch = 2,
		AutoRetract = 3,
		SavingSetPoint = 5,
		AutoExtend = 8
	}
	public interface ILevelerAutoStepsProgress
	{
		LevelerAutoOperationStatus Status { get; }

		int StepCount { get; }

		int StepIndex { get; }

		LevelerAutoOperationStep Step { get; }
	}
	public interface ILevelerAutoStepsProgressExtend : ILevelerAutoStepsProgress
	{
		LevelerAutoOperationExtendJacks AutoLevelJacks { get; }
	}
	public readonly record struct LevelerAutoStepsProgressExtend : ValueType, ILevelerAutoStepsProgressExtend, ILevelerAutoStepsProgress
	{
		public LevelerAutoOperationStatus Status
		{
			[CompilerGenerated]
			get;
		}

		public int StepCount
		{
			[CompilerGenerated]
			get;
		}

		public int StepIndex
		{
			[CompilerGenerated]
			get;
		}

		public LevelerAutoOperationStep Step
		{
			[CompilerGenerated]
			get;
		}

		public LevelerAutoOperationExtendJacks AutoLevelJacks
		{
			[CompilerGenerated]
			get;
		}

		public LevelerAutoStepsProgressExtend(LevelerAutoOperationExtendJacks autoLevelJacks, LevelerAutoOperationStatus status, int stepCount, int stepIndex, LevelerAutoOperationStep step)
		{
			AutoLevelJacks = autoLevelJacks;
			Status = status;
			StepCount = stepCount;
			StepIndex = stepIndex;
			Step = step;
		}

		public LevelerAutoStepsProgressExtend(LogicalDeviceLevelerStatusExtendedType5AutoStep extendedStatus)
			: this(extendedStatus.AutoExtendJacks, extendedStatus.AutoOperationStatus, extendedStatus.AutoStepCount, extendedStatus.AutoStepIndex, extendedStatus.AutoStep)
		{
			if (!((LogicalDeviceDataPacketMutableDoubleBuffer)extendedStatus).HasData)
			{
				throw new LevelerExtendedStatusHasNoDataException();
			}
			if (extendedStatus.OperationCodeProgress != LevelerOperationCodeProgress.AutoExtend)
			{
				throw new LevelerExtendedStatusAutoOperationInvalidException(String.Format("Expect {0} operation but got {1}", (object)LevelerOperationCodeProgress.AutoExtend, (object)extendedStatus.OperationCodeProgress));
			}
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LevelerAutoStepsProgressExtend");
			val.Append(" { ");
			if (PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		private bool PrintMembers(StringBuilder builder)
		{
			builder.Append("Status = ");
			builder.Append(((Object)Status/*cast due to .constrained prefix*/).ToString());
			builder.Append(", StepCount = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref StepCount)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", StepIndex = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref StepIndex)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Step = ");
			builder.Append(((Object)Step/*cast due to .constrained prefix*/).ToString());
			builder.Append(", AutoLevelJacks = ");
			builder.Append(((Object)AutoLevelJacks/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return (((EqualityComparer<LevelerAutoOperationStatus>.Default.GetHashCode(Status) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(StepCount)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(StepIndex)) * -1521134295 + EqualityComparer<LevelerAutoOperationStep>.Default.GetHashCode(Step)) * -1521134295 + EqualityComparer<LevelerAutoOperationExtendJacks>.Default.GetHashCode(AutoLevelJacks);
		}

		[CompilerGenerated]
		public bool Equals(LevelerAutoStepsProgressExtend other)
		{
			if (EqualityComparer<LevelerAutoOperationStatus>.Default.Equals(Status, other.Status) && EqualityComparer<int>.Default.Equals(StepCount, other.StepCount) && EqualityComparer<int>.Default.Equals(StepIndex, other.StepIndex) && EqualityComparer<LevelerAutoOperationStep>.Default.Equals(Step, other.Step))
			{
				return EqualityComparer<LevelerAutoOperationExtendJacks>.Default.Equals(AutoLevelJacks, other.AutoLevelJacks);
			}
			return false;
		}
	}
	public interface ILevelerAutoStepsProgressHitch : ILevelerAutoStepsProgress
	{
	}
	public readonly record struct LevelerAutoStepsProgressHitch : ValueType, ILevelerAutoStepsProgressHitch, ILevelerAutoStepsProgress
	{
		public LevelerAutoOperationStatus Status
		{
			[CompilerGenerated]
			get;
		}

		public int StepCount
		{
			[CompilerGenerated]
			get;
		}

		public int StepIndex
		{
			[CompilerGenerated]
			get;
		}

		public LevelerAutoOperationStep Step
		{
			[CompilerGenerated]
			get;
		}

		public LevelerAutoStepsProgressHitch(LevelerAutoOperationStatus status, int stepCount, int stepIndex, LevelerAutoOperationStep step)
		{
			Status = status;
			StepCount = stepCount;
			StepIndex = stepIndex;
			Step = step;
		}

		public LevelerAutoStepsProgressHitch(LogicalDeviceLevelerStatusExtendedType5AutoStep extendedStatus)
			: this(extendedStatus.AutoOperationStatus, extendedStatus.AutoStepCount, extendedStatus.AutoStepIndex, extendedStatus.AutoStep)
		{
			if (!((LogicalDeviceDataPacketMutableDoubleBuffer)extendedStatus).HasData)
			{
				throw new LevelerExtendedStatusHasNoDataException();
			}
			if (extendedStatus.OperationCodeProgress != LevelerOperationCodeProgress.AutoHitch)
			{
				throw new LevelerExtendedStatusAutoOperationInvalidException(String.Format("Expect {0} operation but got {1}", (object)LevelerOperationCodeProgress.AutoHitch, (object)extendedStatus.OperationCodeProgress));
			}
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LevelerAutoStepsProgressHitch");
			val.Append(" { ");
			if (PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		private bool PrintMembers(StringBuilder builder)
		{
			builder.Append("Status = ");
			builder.Append(((Object)Status/*cast due to .constrained prefix*/).ToString());
			builder.Append(", StepCount = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref StepCount)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", StepIndex = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref StepIndex)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Step = ");
			builder.Append(((Object)Step/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return ((EqualityComparer<LevelerAutoOperationStatus>.Default.GetHashCode(Status) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(StepCount)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(StepIndex)) * -1521134295 + EqualityComparer<LevelerAutoOperationStep>.Default.GetHashCode(Step);
		}

		[CompilerGenerated]
		public bool Equals(LevelerAutoStepsProgressHitch other)
		{
			if (EqualityComparer<LevelerAutoOperationStatus>.Default.Equals(Status, other.Status) && EqualityComparer<int>.Default.Equals(StepCount, other.StepCount) && EqualityComparer<int>.Default.Equals(StepIndex, other.StepIndex))
			{
				return EqualityComparer<LevelerAutoOperationStep>.Default.Equals(Step, other.Step);
			}
			return false;
		}
	}
	public interface ILevelerAutoStepsProgressLevel : ILevelerAutoStepsProgress
	{
		LevelerAutoOperationSetPoint AutoLevelSetPoint { get; }
	}
	public readonly record struct LevelerAutoStepsProgressLevel : ValueType, ILevelerAutoStepsProgressLevel, ILevelerAutoStepsProgress
	{
		public LevelerAutoOperationStatus Status
		{
			[CompilerGenerated]
			get;
		}

		public int StepCount
		{
			[CompilerGenerated]
			get;
		}

		public int StepIndex
		{
			[CompilerGenerated]
			get;
		}

		public LevelerAutoOperationStep Step
		{
			[CompilerGenerated]
			get;
		}

		public LevelerAutoOperationSetPoint AutoLevelSetPoint
		{
			[CompilerGenerated]
			get;
		}

		public LevelerAutoStepsProgressLevel(LevelerAutoOperationSetPoint autoLevelSetPoint, LevelerAutoOperationStatus status, int stepCount, int stepIndex, LevelerAutoOperationStep step)
		{
			AutoLevelSetPoint = autoLevelSetPoint;
			Status = status;
			StepCount = stepCount;
			StepIndex = stepIndex;
			Step = step;
		}

		public LevelerAutoStepsProgressLevel(LogicalDeviceLevelerStatusExtendedType5AutoStep extendedStatus)
			: this(extendedStatus.AutoLevelSetPoint, extendedStatus.AutoOperationStatus, extendedStatus.AutoStepCount, extendedStatus.AutoStepIndex, extendedStatus.AutoStep)
		{
			if (!((LogicalDeviceDataPacketMutableDoubleBuffer)extendedStatus).HasData)
			{
				throw new LevelerExtendedStatusHasNoDataException();
			}
			if (extendedStatus.OperationCodeProgress != LevelerOperationCodeProgress.AutoLevel)
			{
				throw new LevelerExtendedStatusAutoOperationInvalidException(String.Format("Expect {0} operation but got {1}", (object)LevelerOperationCodeProgress.AutoLevel, (object)extendedStatus.OperationCodeProgress));
			}
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LevelerAutoStepsProgressLevel");
			val.Append(" { ");
			if (PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		private bool PrintMembers(StringBuilder builder)
		{
			builder.Append("Status = ");
			builder.Append(((Object)Status/*cast due to .constrained prefix*/).ToString());
			builder.Append(", StepCount = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref StepCount)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", StepIndex = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref StepIndex)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Step = ");
			builder.Append(((Object)Step/*cast due to .constrained prefix*/).ToString());
			builder.Append(", AutoLevelSetPoint = ");
			builder.Append(((Object)AutoLevelSetPoint/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return (((EqualityComparer<LevelerAutoOperationStatus>.Default.GetHashCode(Status) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(StepCount)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(StepIndex)) * -1521134295 + EqualityComparer<LevelerAutoOperationStep>.Default.GetHashCode(Step)) * -1521134295 + EqualityComparer<LevelerAutoOperationSetPoint>.Default.GetHashCode(AutoLevelSetPoint);
		}

		[CompilerGenerated]
		public bool Equals(LevelerAutoStepsProgressLevel other)
		{
			if (EqualityComparer<LevelerAutoOperationStatus>.Default.Equals(Status, other.Status) && EqualityComparer<int>.Default.Equals(StepCount, other.StepCount) && EqualityComparer<int>.Default.Equals(StepIndex, other.StepIndex) && EqualityComparer<LevelerAutoOperationStep>.Default.Equals(Step, other.Step))
			{
				return EqualityComparer<LevelerAutoOperationSetPoint>.Default.Equals(AutoLevelSetPoint, other.AutoLevelSetPoint);
			}
			return false;
		}
	}
	public readonly record struct LevelerAutoStepsProgressNone : ValueType, ILevelerAutoStepsProgressHitch, ILevelerAutoStepsProgress
	{
		public LevelerAutoOperationStatus Status
		{
			[CompilerGenerated]
			get;
		}

		public int StepCount
		{
			[CompilerGenerated]
			get;
		}

		public int StepIndex
		{
			[CompilerGenerated]
			get;
		}

		public LevelerAutoOperationStep Step
		{
			[CompilerGenerated]
			get;
		}

		public LevelerAutoStepsProgressNone()
		{
			Status = LevelerAutoOperationStatus.Idle;
			StepCount = 0;
			StepIndex = 0;
			Step = LevelerAutoOperationStep.None;
		}

		public LevelerAutoStepsProgressNone(LevelerAutoOperationStatus status, int stepCount, int stepIndex, LevelerAutoOperationStep step)
		{
			Status = status;
			StepCount = stepCount;
			StepIndex = stepIndex;
			Step = step;
		}

		public LevelerAutoStepsProgressNone(LogicalDeviceLevelerStatusExtendedType5AutoStep extendedStatus)
			: this(extendedStatus.AutoOperationStatus, extendedStatus.AutoStepCount, extendedStatus.AutoStepIndex, extendedStatus.AutoStep)
		{
			if (!((LogicalDeviceDataPacketMutableDoubleBuffer)extendedStatus).HasData)
			{
				throw new LevelerExtendedStatusHasNoDataException();
			}
			if (extendedStatus.OperationCodeProgress != LevelerOperationCodeProgress.None)
			{
				throw new LevelerExtendedStatusAutoOperationInvalidException(String.Format("Expect {0} operation but got {1}", (object)LevelerOperationCodeProgress.None, (object)extendedStatus.OperationCodeProgress));
			}
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LevelerAutoStepsProgressNone");
			val.Append(" { ");
			if (PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		private bool PrintMembers(StringBuilder builder)
		{
			builder.Append("Status = ");
			builder.Append(((Object)Status/*cast due to .constrained prefix*/).ToString());
			builder.Append(", StepCount = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref StepCount)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", StepIndex = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref StepIndex)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Step = ");
			builder.Append(((Object)Step/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return ((EqualityComparer<LevelerAutoOperationStatus>.Default.GetHashCode(Status) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(StepCount)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(StepIndex)) * -1521134295 + EqualityComparer<LevelerAutoOperationStep>.Default.GetHashCode(Step);
		}

		[CompilerGenerated]
		public bool Equals(LevelerAutoStepsProgressNone other)
		{
			if (EqualityComparer<LevelerAutoOperationStatus>.Default.Equals(Status, other.Status) && EqualityComparer<int>.Default.Equals(StepCount, other.StepCount) && EqualityComparer<int>.Default.Equals(StepIndex, other.StepIndex))
			{
				return EqualityComparer<LevelerAutoOperationStep>.Default.Equals(Step, other.Step);
			}
			return false;
		}
	}
	public interface ILevelerAutoStepsProgressRetract : ILevelerAutoStepsProgress
	{
		LevelerAutoOperationRetractJacks AutoLevelJacks { get; }
	}
	public readonly record struct LevelerAutoStepsProgressRetract : ValueType, ILevelerAutoStepsProgressRetract, ILevelerAutoStepsProgress
	{
		public LevelerAutoOperationStatus Status
		{
			[CompilerGenerated]
			get;
		}

		public int StepCount
		{
			[CompilerGenerated]
			get;
		}

		public int StepIndex
		{
			[CompilerGenerated]
			get;
		}

		public LevelerAutoOperationStep Step
		{
			[CompilerGenerated]
			get;
		}

		public LevelerAutoOperationRetractJacks AutoLevelJacks
		{
			[CompilerGenerated]
			get;
		}

		public LevelerAutoStepsProgressRetract(LevelerAutoOperationRetractJacks autoLevelJacks, LevelerAutoOperationStatus status, int stepCount, int stepIndex, LevelerAutoOperationStep step)
		{
			AutoLevelJacks = autoLevelJacks;
			Status = status;
			StepCount = stepCount;
			StepIndex = stepIndex;
			Step = step;
		}

		public LevelerAutoStepsProgressRetract(LogicalDeviceLevelerStatusExtendedType5AutoStep extendedStatus)
			: this(extendedStatus.AutoLevelJacks, extendedStatus.AutoOperationStatus, extendedStatus.AutoStepCount, extendedStatus.AutoStepIndex, extendedStatus.AutoStep)
		{
			if (!((LogicalDeviceDataPacketMutableDoubleBuffer)extendedStatus).HasData)
			{
				throw new LevelerExtendedStatusHasNoDataException();
			}
			if (extendedStatus.OperationCodeProgress != LevelerOperationCodeProgress.AutoRetract)
			{
				throw new LevelerExtendedStatusAutoOperationInvalidException(String.Format("Expect {0} operation but got {1}", (object)LevelerOperationCodeProgress.AutoRetract, (object)extendedStatus.OperationCodeProgress));
			}
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LevelerAutoStepsProgressRetract");
			val.Append(" { ");
			if (PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		private bool PrintMembers(StringBuilder builder)
		{
			builder.Append("Status = ");
			builder.Append(((Object)Status/*cast due to .constrained prefix*/).ToString());
			builder.Append(", StepCount = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref StepCount)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", StepIndex = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref StepIndex)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Step = ");
			builder.Append(((Object)Step/*cast due to .constrained prefix*/).ToString());
			builder.Append(", AutoLevelJacks = ");
			builder.Append(((Object)AutoLevelJacks/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return (((EqualityComparer<LevelerAutoOperationStatus>.Default.GetHashCode(Status) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(StepCount)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(StepIndex)) * -1521134295 + EqualityComparer<LevelerAutoOperationStep>.Default.GetHashCode(Step)) * -1521134295 + EqualityComparer<LevelerAutoOperationRetractJacks>.Default.GetHashCode(AutoLevelJacks);
		}

		[CompilerGenerated]
		public bool Equals(LevelerAutoStepsProgressRetract other)
		{
			if (EqualityComparer<LevelerAutoOperationStatus>.Default.Equals(Status, other.Status) && EqualityComparer<int>.Default.Equals(StepCount, other.StepCount) && EqualityComparer<int>.Default.Equals(StepIndex, other.StepIndex) && EqualityComparer<LevelerAutoOperationStep>.Default.Equals(Step, other.Step))
			{
				return EqualityComparer<LevelerAutoOperationRetractJacks>.Default.Equals(AutoLevelJacks, other.AutoLevelJacks);
			}
			return false;
		}
	}
	public interface ILevelerAutoStepsProgressSetPointSet : ILevelerAutoStepsProgress
	{
	}
	public readonly record struct LevelerAutoStepsProgressSetPointSet : ValueType, ILevelerAutoStepsProgressSetPointSet, ILevelerAutoStepsProgress
	{
		public LevelerAutoOperationStatus Status
		{
			[CompilerGenerated]
			get;
		}

		public int StepCount
		{
			[CompilerGenerated]
			get;
		}

		public int StepIndex
		{
			[CompilerGenerated]
			get;
		}

		public LevelerAutoOperationStep Step
		{
			[CompilerGenerated]
			get;
		}

		public LevelerAutoStepsProgressSetPointSet(LevelerAutoOperationStatus status, int stepCount, int stepIndex, LevelerAutoOperationStep step)
		{
			Status = status;
			StepCount = stepCount;
			StepIndex = stepIndex;
			Step = step;
		}

		public LevelerAutoStepsProgressSetPointSet(LogicalDeviceLevelerStatusExtendedType5AutoStep extendedStatus)
			: this(extendedStatus.AutoOperationStatus, extendedStatus.AutoStepCount, extendedStatus.AutoStepIndex, extendedStatus.AutoStep)
		{
			if (!((LogicalDeviceDataPacketMutableDoubleBuffer)extendedStatus).HasData)
			{
				throw new LevelerExtendedStatusHasNoDataException();
			}
			if (extendedStatus.OperationCodeProgress != LevelerOperationCodeProgress.SavingSetPoint)
			{
				throw new LevelerExtendedStatusAutoOperationInvalidException(String.Format("Expect {0} operation but got {1}", (object)LevelerOperationCodeProgress.SavingSetPoint, (object)extendedStatus.OperationCodeProgress));
			}
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LevelerAutoStepsProgressSetPointSet");
			val.Append(" { ");
			if (PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		private bool PrintMembers(StringBuilder builder)
		{
			builder.Append("Status = ");
			builder.Append(((Object)Status/*cast due to .constrained prefix*/).ToString());
			builder.Append(", StepCount = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref StepCount)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", StepIndex = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref StepIndex)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Step = ");
			builder.Append(((Object)Step/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return ((EqualityComparer<LevelerAutoOperationStatus>.Default.GetHashCode(Status) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(StepCount)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(StepIndex)) * -1521134295 + EqualityComparer<LevelerAutoOperationStep>.Default.GetHashCode(Step);
		}

		[CompilerGenerated]
		public bool Equals(LevelerAutoStepsProgressSetPointSet other)
		{
			if (EqualityComparer<LevelerAutoOperationStatus>.Default.Equals(Status, other.Status) && EqualityComparer<int>.Default.Equals(StepCount, other.StepCount) && EqualityComparer<int>.Default.Equals(StepIndex, other.StepIndex))
			{
				return EqualityComparer<LevelerAutoOperationStep>.Default.Equals(Step, other.Step);
			}
			return false;
		}
	}
	public interface ILogicalDeviceLevelerCommandType5 : IDeviceCommandPacket, IDeviceDataPacket, IEquatable<LogicalDeviceCommandPacket>
	{
		LogicalDeviceLevelerCommandType5.LevelerCommandCode Command { get; }
	}
	public class LogicalDeviceLevelerCommandAutoExtendType5 : LogicalDeviceLevelerCommandType5
	{
		private const string LogTag = "LogicalDeviceLevelerCommandAutoExtendType5";

		public const LevelerOperationCode LevelerOperation = LevelerOperationCode.AutoExtend;

		public const int RawSize = 3;

		public const int LevelerOperationIndex = 0;

		public const int RetrackJacksStartIndex = 1;

		public LevelerAutoOperationExtendJacks ExtendJacks => Enum<LevelerAutoOperationExtendJacks>.TryConvert((object)ArrayExtension.GetValueUInt16(((LogicalDeviceCommandPacket)this).Data, 1, (Endian)0));

		public LogicalDeviceLevelerCommandAutoExtendType5(LevelerAutoOperationExtendJacks retractJacks, int commandResponseTimeMs = 800)
			: base(LevelerCommandCode.Leveler, MakeRawData(retractJacks), commandResponseTimeMs)
		{
		}

		private static byte[] MakeRawData(LevelerAutoOperationExtendJacks retractJacks)
		{
			Byte[] obj = new Byte[3]
			{
				(Byte)8,
				default(Byte),
				default(Byte)
			};
			SetAutoExtendJacksRawData((byte[])(object)obj, retractJacks);
			return (byte[])(object)obj;
		}

		private static void SetAutoExtendJacksRawData(byte[] rawData, LevelerAutoOperationExtendJacks retractJacks)
		{
			//IL_0018: Unknown result type (might be due to invalid IL or missing references)
			if (retractJacks == LevelerAutoOperationExtendJacks.Unknown)
			{
				throw new ArgumentOutOfRangeException("retractJacks", (object)retractJacks, "Invalid Extend Jacks Specified");
			}
			ArrayExtension.SetValueUInt16(rawData, (ushort)retractJacks, 1, (Endian)0);
		}

		public override string ToString()
		{
			try
			{
				return String.Format("{0}/{1} {2} {3} {4}", (object[])(object)new Object[5]
				{
					(Object)((MemberInfo)((Object)this).GetType()).Name,
					(object)base.Command,
					(object)LevelerOperationCode.AutoExtend,
					(object)ExtendJacks,
					(Object)ArrayExtension.DebugDump(((LogicalDeviceCommandPacket)this).Data, " ", false)
				});
			}
			catch (Object)
			{
				return base.ToString();
			}
		}
	}
	public class LogicalDeviceLevelerCommandAutoHitchType5 : LogicalDeviceLevelerCommandType5
	{
		private const string LogTag = "LogicalDeviceLevelerCommandAutoHitchType5";

		public const LevelerOperationCode LevelerOperation = LevelerOperationCode.AutoHitch;

		public const int RawSize = 3;

		public const int LevelerOperationIndex = 0;

		public const int ArgumentStartIndex = 1;

		public LogicalDeviceLevelerCommandAutoHitchType5(int commandResponseTimeMs = 800)
			: base(LevelerCommandCode.Leveler, MakeRawData(), commandResponseTimeMs)
		{
		}

		private static byte[] MakeRawData()
		{
			Byte[] obj = new Byte[3]
			{
				(Byte)2,
				default(Byte),
				default(Byte)
			};
			ArrayExtension.SetValueUInt16((byte[])(object)obj, (ushort)0, 1, (Endian)0);
			return (byte[])(object)obj;
		}

		public override string ToString()
		{
			try
			{
				return String.Format("{0}/{1} {2} {3}", (object[])(object)new Object[4]
				{
					(Object)((MemberInfo)((Object)this).GetType()).Name,
					(object)base.Command,
					(object)LevelerOperationCode.AutoHitch,
					(Object)ArrayExtension.DebugDump(((LogicalDeviceCommandPacket)this).Data, " ", false)
				});
			}
			catch (Object)
			{
				return base.ToString();
			}
		}
	}
	public class LogicalDeviceLevelerCommandAutoLevelType5 : LogicalDeviceLevelerCommandType5
	{
		private const string LogTag = "LogicalDeviceLevelerCommandAutoLevelType5";

		public const LevelerOperationCode LevelerOperation = LevelerOperationCode.AutoLevel;

		public const int RawSize = 3;

		public const int LevelerOperationIndex = 0;

		public const int ZeroPointStartIndex = 1;

		public LevelerAutoOperationSetPoint ZeroPoint => Enum<LevelerAutoOperationSetPoint>.TryConvert((object)ArrayExtension.GetValueUInt16(((LogicalDeviceCommandPacket)this).Data, 1, (Endian)0));

		public LogicalDeviceLevelerCommandAutoLevelType5(LevelerAutoOperationSetPoint zeroPoint, int commandResponseTimeMs = 800)
			: base(LevelerCommandCode.Leveler, MakeRawData(zeroPoint), commandResponseTimeMs)
		{
		}

		private static byte[] MakeRawData(LevelerAutoOperationSetPoint zeroPoint)
		{
			Byte[] obj = new Byte[3]
			{
				(Byte)1,
				default(Byte),
				default(Byte)
			};
			SetZeroPointToRawData((byte[])(object)obj, zeroPoint);
			return (byte[])(object)obj;
		}

		private static void SetZeroPointToRawData(byte[] rawData, LevelerAutoOperationSetPoint zeroPoint)
		{
			//IL_0030: Unknown result type (might be due to invalid IL or missing references)
			switch (zeroPoint)
			{
			case LevelerAutoOperationSetPoint.Factory:
			case LevelerAutoOperationSetPoint.SetPoint1:
			case LevelerAutoOperationSetPoint.SetPoint2:
			case LevelerAutoOperationSetPoint.SetPoint3:
			case LevelerAutoOperationSetPoint.SetPoint4:
			case LevelerAutoOperationSetPoint.SystemOffset:
				ArrayExtension.SetValueUInt16(rawData, (ushort)zeroPoint, 1, (Endian)0);
				break;
			default:
				throw new ArgumentOutOfRangeException("zeroPoint", (object)zeroPoint, "Invalid Zero Point");
			}
		}

		public override string ToString()
		{
			try
			{
				return String.Format("{0}/{1} {2} {3} {4}", (object[])(object)new Object[5]
				{
					(Object)((MemberInfo)((Object)this).GetType()).Name,
					(object)base.Command,
					(object)LevelerOperationCode.AutoLevel,
					(object)ZeroPoint,
					(Object)ArrayExtension.DebugDump(((LogicalDeviceCommandPacket)this).Data, " ", false)
				});
			}
			catch (Object)
			{
				return base.ToString();
			}
		}
	}
	public class LogicalDeviceLevelerCommandAutoRetractType5 : LogicalDeviceLevelerCommandType5
	{
		private const string LogTag = "LogicalDeviceLevelerCommandAutoRetractType5";

		public const LevelerOperationCode LevelerOperation = LevelerOperationCode.AutoRetract;

		public const int RawSize = 3;

		public const int LevelerOperationIndex = 0;

		public const int RetrackJacksStartIndex = 1;

		public LevelerAutoOperationRetractJacks RetractJacks => Enum<LevelerAutoOperationRetractJacks>.TryConvert((object)ArrayExtension.GetValueUInt16(((LogicalDeviceCommandPacket)this).Data, 1, (Endian)0));

		public LogicalDeviceLevelerCommandAutoRetractType5(LevelerAutoOperationRetractJacks retractJacks, int commandResponseTimeMs = 800)
			: base(LevelerCommandCode.Leveler, MakeRawData(retractJacks), commandResponseTimeMs)
		{
		}

		private static byte[] MakeRawData(LevelerAutoOperationRetractJacks retractJacks)
		{
			Byte[] obj = new Byte[3]
			{
				(Byte)3,
				default(Byte),
				default(Byte)
			};
			SetAutoRetractJacksRawData((byte[])(object)obj, retractJacks);
			return (byte[])(object)obj;
		}

		private static void SetAutoRetractJacksRawData(byte[] rawData, LevelerAutoOperationRetractJacks retractJacks)
		{
			//IL_0034: Unknown result type (might be due to invalid IL or missing references)
			switch (retractJacks)
			{
			case LevelerAutoOperationRetractJacks.All:
			case LevelerAutoOperationRetractJacks.Front:
			case LevelerAutoOperationRetractJacks.Rear:
			case LevelerAutoOperationRetractJacks.Home:
			case LevelerAutoOperationRetractJacks.AllWithSnooze:
			case LevelerAutoOperationRetractJacks.FrontWithSnooze:
			case LevelerAutoOperationRetractJacks.RearWithSnooze:
			case LevelerAutoOperationRetractJacks.HomeWithSnooze:
				ArrayExtension.SetValueUInt16(rawData, (ushort)retractJacks, 1, (Endian)0);
				break;
			default:
				throw new ArgumentOutOfRangeException("retractJacks", (object)retractJacks, "Invalid Retract Jacks Specified");
			}
		}

		public override string ToString()
		{
			try
			{
				return String.Format("{0}/{1} {2} {3} {4}", (object[])(object)new Object[5]
				{
					(Object)((MemberInfo)((Object)this).GetType()).Name,
					(object)base.Command,
					(object)LevelerOperationCode.AutoRetract,
					(object)RetractJacks,
					(Object)ArrayExtension.DebugDump(((LogicalDeviceCommandPacket)this).Data, " ", false)
				});
			}
			catch (Object)
			{
				return base.ToString();
			}
		}
	}
	public class LogicalDeviceLevelerCommandManualType5 : LogicalDeviceLevelerCommandType5
	{
		private const string LogTag = "LogicalDeviceLevelerCommandManualType5";

		public const LevelerOperationCode LevelerOperation = LevelerOperationCode.Manual;

		public const int RawSize = 3;

		public const int LevelerOperationIndex = 0;

		public const int ManualStartIndex = 1;

		public LevelerJacksAndAirBagType5 MovementAndAirbags => Enum<LevelerJacksAndAirBagType5>.TryConvert((object)ArrayExtension.GetValueUInt16(((LogicalDeviceCommandPacket)this).Data, 1, (Endian)0));

		public LogicalDeviceLevelerCommandManualType5(LevelerJacksAndAirBagType5 action, int commandResponseTimeMs = 800)
			: base(LevelerCommandCode.Leveler, MakeRawData(action), commandResponseTimeMs)
		{
		}

		private static byte[] MakeRawData(LevelerJacksAndAirBagType5 movementAndAirbags)
		{
			Byte[] obj = new Byte[3]
			{
				(Byte)4,
				default(Byte),
				default(Byte)
			};
			SetMovementAndAirBags((byte[])(object)obj, movementAndAirbags);
			return (byte[])(object)obj;
		}

		private static void SetMovementAndAirBags(byte[] rawData, LevelerJacksAndAirBagType5 movementAndAirbags)
		{
			ArrayExtension.SetValueUInt16(rawData, (ushort)movementAndAirbags, 1, (Endian)0);
		}

		public override string ToString()
		{
			try
			{
				return String.Format("{0}/{1} {2} {3} {4}", (object[])(object)new Object[5]
				{
					(Object)((MemberInfo)((Object)this).GetType()).Name,
					(object)base.Command,
					(object)LevelerOperationCode.Manual,
					(object)MovementAndAirbags,
					(Object)ArrayExtension.DebugDump(((LogicalDeviceCommandPacket)this).Data, " ", false)
				});
			}
			catch (Object)
			{
				return base.ToString();
			}
		}
	}
	public class LogicalDeviceLevelerCommandManualUnrestrictedType5 : LogicalDeviceLevelerCommandType5
	{
		private const string LogTag = "LogicalDeviceLevelerCommandManualUnrestrictedType5";

		public const LevelerOperationCode LevelerOperation = LevelerOperationCode.ManualUnrestricted;

		public const int RawSize = 3;

		public const int LevelerOperationIndex = 0;

		public const int ManualStartIndex = 1;

		public LevelerJacksAndAirBagType5 MovementAndAirbags => Enum<LevelerJacksAndAirBagType5>.TryConvert((object)ArrayExtension.GetValueUInt16(((LogicalDeviceCommandPacket)this).Data, 1, (Endian)0));

		public LogicalDeviceLevelerCommandManualUnrestrictedType5(LevelerJacksAndAirBagType5 action, int commandResponseTimeMs = 800)
			: base(LevelerCommandCode.Leveler, MakeRawData(action), commandResponseTimeMs)
		{
		}

		private static byte[] MakeRawData(LevelerJacksAndAirBagType5 movementAndAirbags)
		{
			Byte[] obj = new Byte[3]
			{
				(Byte)7,
				default(Byte),
				default(Byte)
			};
			SetMovementAndAirBags((byte[])(object)obj, movementAndAirbags);
			return (byte[])(object)obj;
		}

		private static void SetMovementAndAirBags(byte[] rawData, LevelerJacksAndAirBagType5 movementAndAirbags)
		{
			ArrayExtension.SetValueUInt16(rawData, (ushort)movementAndAirbags, 1, (Endian)0);
		}

		public override string ToString()
		{
			try
			{
				return String.Format("{0}/{1} {2} {3} {4}", (object[])(object)new Object[5]
				{
					(Object)((MemberInfo)((Object)this).GetType()).Name,
					(object)base.Command,
					(object)LevelerOperationCode.ManualUnrestricted,
					(object)MovementAndAirbags,
					(Object)ArrayExtension.DebugDump(((LogicalDeviceCommandPacket)this).Data, " ", false)
				});
			}
			catch (Object)
			{
				return base.ToString();
			}
		}
	}
	[DefaultValue(LevelerMiscConfig.Unknown)]
	public enum LevelerMiscConfig : Enum
	{
		SetAirbagLongTime = 0,
		SetAirbagShortTime = 1,
		ClearFaults = 255,
		Unknown = 65535
	}
	public class LogicalDeviceLevelerCommandMiscConfigType5 : LogicalDeviceLevelerCommandType5
	{
		private const string LogTag = "LogicalDeviceLevelerCommandMiscConfigType5";

		public const LevelerOperationCode LevelerOperation = LevelerOperationCode.MiscConfig;

		public const int RawSize = 3;

		public const int LevelerOperationIndex = 0;

		public const int LevelerMiscConfigIndex = 1;

		public LevelerMiscConfig MiscConfig => Enum<LevelerMiscConfig>.TryConvert((object)ArrayExtension.GetValueUInt16(((LogicalDeviceCommandPacket)this).Data, 1, (Endian)0));

		public LogicalDeviceLevelerCommandMiscConfigType5(LevelerMiscConfig miscConfig, int commandResponseTimeMs = 800)
			: base(LevelerCommandCode.Leveler, MakeRawData(miscConfig), commandResponseTimeMs)
		{
			//IL_0031: Unknown result type (might be due to invalid IL or missing references)
			if (MiscConfig == LevelerMiscConfig.Unknown)
			{
				throw new ArgumentOutOfRangeException("miscConfig", String.Format("Invalid Misc Config command {0}", (object)miscConfig));
			}
		}

		private static byte[] MakeRawData(LevelerMiscConfig miscConfig)
		{
			Byte[] obj = new Byte[3]
			{
				(Byte)6,
				default(Byte),
				default(Byte)
			};
			ArrayExtension.SetValueUInt16((byte[])(object)obj, (ushort)miscConfig, 1, (Endian)0);
			return (byte[])(object)obj;
		}

		public override string ToString()
		{
			try
			{
				return String.Format("{0}/{1} {2} {3} {4}", (object[])(object)new Object[5]
				{
					(Object)((MemberInfo)((Object)this).GetType()).Name,
					(object)base.Command,
					(object)LevelerOperationCode.MiscConfig,
					(object)MiscConfig,
					(Object)ArrayExtension.DebugDump(((LogicalDeviceCommandPacket)this).Data, " ", false)
				});
			}
			catch (Object)
			{
				return base.ToString();
			}
		}
	}
	public class LogicalDeviceLevelerCommandPanicStopType5 : LogicalDeviceLevelerCommandType5
	{
		private const string LogTag = "LogicalDeviceLevelerCommandPanicStopType5";

		public LogicalDeviceLevelerCommandPanicStopType5(int commandResponseTimeMs = 800)
			: base(LevelerCommandCode.PanicStop, commandResponseTimeMs)
		{
		}
	}
	public class LogicalDeviceLevelerCommandType5 : LogicalDeviceCommandPacket, ILogicalDeviceLevelerCommandType5, IDeviceCommandPacket, IDeviceDataPacket, IEquatable<LogicalDeviceCommandPacket>
	{
		public enum LevelerCommandCode : Enum
		{
			PanicStop = 0,
			Leveler = 96
		}

		public enum LevelerOperationCode : Enum
		{
			None,
			AutoLevel,
			AutoHitch,
			AutoRetract,
			Manual,
			SetPointSet,
			MiscConfig,
			ManualUnrestricted,
			AutoExtend
		}

		private const string LogTag = "LogicalDeviceLevelerCommandType5";

		public const int LevelerDefaultCommandResponseTimeMs = 800;

		public LevelerCommandCode Command => (LevelerCommandCode)((LogicalDeviceCommandPacket)this).CommandByte;

		protected LogicalDeviceLevelerCommandType5(LevelerCommandCode command, int commandResponseTimeMs)
			: base((byte)command, commandResponseTimeMs)
		{
		}

		internal LogicalDeviceLevelerCommandType5(LevelerCommandCode command, byte[] data, int commandResponseTimeMs)
			: base((byte)command, data, commandResponseTimeMs)
		{
		}

		public static LogicalDeviceLevelerCommandPanicStopType5 MakePanicStopCommand(int commandResponseTimeMs = 200)
		{
			return new LogicalDeviceLevelerCommandPanicStopType5(commandResponseTimeMs);
		}

		public static LogicalDeviceLevelerCommandAutoLevelType5 MakeAutoLevelCommand(LevelerAutoOperationSetPoint zeroPoint, int commandResponseTimeMs = 200)
		{
			return new LogicalDeviceLevelerCommandAutoLevelType5(zeroPoint, commandResponseTimeMs);
		}

		public static LogicalDeviceLevelerCommandAutoHitchType5 MakeAutoHitchCommand(int commandResponseTimeMs = 200)
		{
			return new LogicalDeviceLevelerCommandAutoHitchType5(commandResponseTimeMs);
		}

		public static LogicalDeviceLevelerCommandAutoRetractType5 MakeAutoRetractCommand(LevelerAutoOperationRetractJacks retractJacks, int commandResponseTimeMs = 200)
		{
			return new LogicalDeviceLevelerCommandAutoRetractType5(retractJacks, commandResponseTimeMs);
		}

		public static LogicalDeviceLevelerCommandAutoExtendType5 MakeAutoExtendCommand(LevelerAutoOperationExtendJacks extendJacks, int commandResponseTimeMs = 200)
		{
			return new LogicalDeviceLevelerCommandAutoExtendType5(extendJacks, commandResponseTimeMs);
		}

		public static LogicalDeviceLevelerCommandManualType5 MakeManualCommand(LevelerJacksAndAirBagType5 action, int commandResponseTimeMs = 200)
		{
			return new LogicalDeviceLevelerCommandManualType5(action, commandResponseTimeMs);
		}

		public static LogicalDeviceLevelerCommandZeroSetType5 MakeSetPointSetCommand(LevelerAutoOperationSetPoint zeroPoint, int commandResponseTimeMs = 200)
		{
			return new LogicalDeviceLevelerCommandZeroSetType5(zeroPoint, commandResponseTimeMs);
		}

		public static LogicalDeviceLevelerCommandMiscConfigType5 MakeSetMiscConfigCommand(LevelerMiscConfig miscConfig, int commandResponseTimeMs = 200)
		{
			return new LogicalDeviceLevelerCommandMiscConfigType5(miscConfig, commandResponseTimeMs);
		}

		public static LogicalDeviceLevelerCommandManualUnrestrictedType5 MakeManualUnrestrictedCommand(LevelerJacksAndAirBagType5 action, int commandResponseTimeMs = 200)
		{
			return new LogicalDeviceLevelerCommandManualUnrestrictedType5(action, commandResponseTimeMs);
		}

		public override string ToString()
		{
			return String.Format("{0}/{1} {2}", (object)((MemberInfo)((Object)this).GetType()).Name, (object)Command, (object)ArrayExtension.DebugDump(((LogicalDeviceCommandPacket)this).Data, " ", false));
		}
	}
	public class LogicalDeviceLevelerCommandZeroSetType5 : LogicalDeviceLevelerCommandType5
	{
		private const string LogTag = "LogicalDeviceLevelerCommandZeroSetType5";

		public const LevelerOperationCode LevelerOperation = LevelerOperationCode.SetPointSet;

		public const int RawSize = 3;

		public const int LevelerOperationIndex = 0;

		public const int ZeroPointStartIndex = 1;

		public LevelerAutoOperationSetPoint ZeroPoint => Enum<LevelerAutoOperationSetPoint>.TryConvert((object)ArrayExtension.GetValueUInt16(((LogicalDeviceCommandPacket)this).Data, 1, (Endian)0));

		public LogicalDeviceLevelerCommandZeroSetType5(LevelerAutoOperationSetPoint zeroPoint, int commandResponseTimeMs = 800)
			: base(LevelerCommandCode.Leveler, MakeRawData(zeroPoint), commandResponseTimeMs)
		{
		}

		private static byte[] MakeRawData(LevelerAutoOperationSetPoint zeroPoint)
		{
			Byte[] obj = new Byte[3]
			{
				(Byte)5,
				default(Byte),
				default(Byte)
			};
			SetZeroPointToRawData((byte[])(object)obj, zeroPoint);
			return (byte[])(object)obj;
		}

		private static void SetZeroPointToRawData(byte[] rawData, LevelerAutoOperationSetPoint zeroPoint)
		{
			//IL_0049: Unknown result type (might be due to invalid IL or missing references)
			if (zeroPoint <= LevelerAutoOperationSetPoint.SetPoint4)
			{
				if (zeroPoint == LevelerAutoOperationSetPoint.Factory)
				{
					ArrayExtension.SetValueUInt16(rawData, (ushort)65534, 1, (Endian)0);
					return;
				}
				if (zeroPoint - 1 <= LevelerAutoOperationSetPoint.SetPoint3)
				{
					goto IL_0021;
				}
			}
			else
			{
				if (zeroPoint == LevelerAutoOperationSetPoint.SystemOffset)
				{
					goto IL_0021;
				}
				if (zeroPoint == LevelerAutoOperationSetPoint.Unknown)
				{
				}
			}
			throw new ArgumentOutOfRangeException("zeroPoint", (object)zeroPoint, "Invalid Zero Point");
			IL_0021:
			ArrayExtension.SetValueUInt16(rawData, (ushort)zeroPoint, 1, (Endian)0);
		}

		public override string ToString()
		{
			try
			{
				return String.Format("{0}/{1} {2} {3} {4}", (object[])(object)new Object[5]
				{
					(Object)((MemberInfo)((Object)this).GetType()).Name,
					(object)base.Command,
					(object)LevelerOperationCode.SetPointSet,
					(object)ZeroPoint,
					(Object)ArrayExtension.DebugDump(((LogicalDeviceCommandPacket)this).Data, " ", false)
				});
			}
			catch (Object)
			{
				return base.ToString();
			}
		}
	}
	public interface ILogicalDeviceLevelerStatusExtendedType5 : IDeviceDataPacketMutableExtended, IDeviceDataPacketMutable, IDeviceDataPacket
	{
	}
	public class LogicalDeviceLevelerStatusExtendedType5AutoStep : LogicalDeviceStatusPacketMutableExtended, ILogicalDeviceLevelerStatusExtendedType5, IDeviceDataPacketMutableExtended, IDeviceDataPacketMutable, IDeviceDataPacket
	{
		public const LogicalDeviceLevelerStatusExtendedType5Kind ExtendedByteAutoStep = LogicalDeviceLevelerStatusExtendedType5Kind.AutoStep;

		private const int EnhancedByteIndex = 0;

		public const int MinimumStatusPacketSize = 7;

		private const int AutoOperationIndex = 0;

		private const int AutoOperationDetailStartIndex = 1;

		private const int AutoOperationStatusIndex = 3;

		private const int AutoStepCurrentCountIndex = 4;

		private const int AutoStepCurrentIndexIndex = 5;

		private const int AutoStepCurrentIndex = 6;

		public const byte EnhancedByte = 0;

		public override byte ExtendedByte
		{
			get
			{
				return 0;
			}
			protected set
			{
				//IL_0024: Unknown result type (might be due to invalid IL or missing references)
				if (value != 0)
				{
					throw new ArgumentException(String.Format("Extended byte must be {0} but was {1} for {2}", (object)LogicalDeviceLevelerStatusExtendedType5Kind.AutoStep, (object)value, (object)((MemberInfo)((Object)this).GetType()).Name));
				}
			}
		}

		public LevelerOperationCodeProgress OperationCodeProgress => (LevelerOperationCodeProgress)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetByte((byte)255, 0);

		public LevelerAutoOperationSetPoint AutoLevelSetPoint
		{
			get
			{
				if (OperationCodeProgress != LevelerOperationCodeProgress.AutoLevel)
				{
					return LevelerAutoOperationSetPoint.Unknown;
				}
				return (LevelerAutoOperationSetPoint)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetUInt16(1u);
			}
		}

		public LevelerAutoOperationRetractJacks AutoLevelJacks
		{
			get
			{
				if (OperationCodeProgress != LevelerOperationCodeProgress.AutoRetract)
				{
					return LevelerAutoOperationRetractJacks.Unknown;
				}
				return (LevelerAutoOperationRetractJacks)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetUInt16(1u);
			}
		}

		public LevelerAutoOperationExtendJacks AutoExtendJacks
		{
			get
			{
				if (OperationCodeProgress != LevelerOperationCodeProgress.AutoExtend)
				{
					return LevelerAutoOperationExtendJacks.Unknown;
				}
				return (LevelerAutoOperationExtendJacks)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetUInt16(1u);
			}
		}

		public LevelerAutoOperationStatus AutoOperationStatus
		{
			get
			{
				return (LevelerAutoOperationStatus)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetByte((byte)255, 3);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)value, 3);
			}
		}

		public int AutoStepCount
		{
			get
			{
				return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetByte((byte)255, 4);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)value, 4);
			}
		}

		public int AutoStepIndex
		{
			get
			{
				return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetByte((byte)255, 5);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)value, 5);
			}
		}

		public LevelerAutoOperationStep AutoStep
		{
			get
			{
				return (LevelerAutoOperationStep)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetByte((byte)255, 6);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)value, 6);
			}
		}

		public LogicalDeviceLevelerStatusExtendedType5AutoStep()
			: base(7u)
		{
		}

		public LogicalDeviceLevelerStatusExtendedType5AutoStep(LogicalDeviceLevelerStatusExtendedType5AutoStep originalStatus)
		{
			//IL_0042: Unknown result type (might be due to invalid IL or missing references)
			//IL_0048: Unknown result type (might be due to invalid IL or missing references)
			//IL_0028: Unknown result type (might be due to invalid IL or missing references)
			if (((LogicalDeviceStatusPacketMutableExtended)originalStatus).ExtendedByte != 0)
			{
				throw new ArgumentException(String.Format("{0} can only be created from a status with an extended byte of {1}", (object)"LogicalDeviceLevelerStatusExtendedType5AutoStep", (object)LogicalDeviceLevelerStatusExtendedType5Kind.AutoStep), "originalStatus");
			}
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalStatus).Data;
			((LogicalDeviceStatusPacketMutableExtended)this).Update((IReadOnlyList<byte>)(object)data, (uint)data.Length, ((LogicalDeviceStatusPacketMutableExtended)originalStatus).ExtendedByte, default(Nullable<DateTime>));
		}

		public static LogicalDeviceLevelerStatusExtendedType5AutoStep MakeDefaultExtendedStatus()
		{
			//IL_0014: Unknown result type (might be due to invalid IL or missing references)
			//IL_001a: Unknown result type (might be due to invalid IL or missing references)
			LogicalDeviceLevelerStatusExtendedType5AutoStep logicalDeviceLevelerStatusExtendedType5AutoStep = new LogicalDeviceLevelerStatusExtendedType5AutoStep();
			byte[] array = (byte[])(object)new Byte[7];
			((LogicalDeviceStatusPacketMutableExtended)logicalDeviceLevelerStatusExtendedType5AutoStep).Update(array, array.Length, (byte)0, default(Nullable<DateTime>));
			return logicalDeviceLevelerStatusExtendedType5AutoStep;
		}

		public void SetAutoOperationLevel(LevelerAutoOperationSetPoint zeroPoint)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)1, 0);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt16((ushort)zeroPoint, 1);
		}

		public void SetAutoOperationHitch()
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)2, 0);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt16((ushort)0, 1);
		}

		public void SetAutoOperationRetract(LevelerAutoOperationRetractJacks jacks)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)3, 0);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt16((ushort)jacks, 1);
		}

		public void SetAutoOperationExtend(LevelerAutoOperationExtendJacks jacks)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)8, 0);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt16((ushort)jacks, 1);
		}

		public void SetAutoOperationSavingSetPoint()
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)5, 0);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt16((ushort)0, 1);
		}

		public void SetAutoOperationNone()
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)0, 0);
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt16((ushort)0, 1);
		}

		public override string ToString()
		{
			return OperationCodeProgress switch
			{
				LevelerOperationCodeProgress.None => "Auto None", 
				LevelerOperationCodeProgress.AutoLevel => String.Format("Auto Level: {0}, {1} {2} of {3} for {4}: {5}", (object[])(object)new Object[6]
				{
					(object)AutoLevelSetPoint,
					(object)AutoOperationStatus,
					(object)(AutoStepIndex + 1),
					(object)AutoStepCount,
					(object)AutoStep,
					(Object)((LogicalDeviceDataPacketMutableDoubleBuffer)this).ToString()
				}), 
				LevelerOperationCodeProgress.AutoHitch => String.Format("Auto Hitch: {0} {1} of {2} for {3}: {4}", (object[])(object)new Object[5]
				{
					(object)AutoOperationStatus,
					(object)(AutoStepIndex + 1),
					(object)AutoStepCount,
					(object)AutoStep,
					(Object)((LogicalDeviceDataPacketMutableDoubleBuffer)this).ToString()
				}), 
				LevelerOperationCodeProgress.AutoRetract => String.Format("Auto Retract: {0}, {1} {2} of {3} for {4}: {5}", (object[])(object)new Object[6]
				{
					(object)AutoLevelJacks,
					(object)AutoOperationStatus,
					(object)(AutoStepIndex + 1),
					(object)AutoStepCount,
					(object)AutoStep,
					(Object)((LogicalDeviceDataPacketMutableDoubleBuffer)this).ToString()
				}), 
				LevelerOperationCodeProgress.AutoExtend => String.Format("Auto Extend: {0}, {1} {2} of {3} for {4}: {5}", (object[])(object)new Object[6]
				{
					(object)AutoExtendJacks,
					(object)AutoOperationStatus,
					(object)(AutoStepIndex + 1),
					(object)AutoStepCount,
					(object)AutoStep,
					(Object)((LogicalDeviceDataPacketMutableDoubleBuffer)this).ToString()
				}), 
				_ => String.Format("Auto Unknown: {0} {1} of {2} for {3}: {4}", (object[])(object)new Object[5]
				{
					(object)AutoOperationStatus,
					(object)(AutoStepIndex + 1),
					(object)AutoStepCount,
					(object)AutoStep,
					(Object)((LogicalDeviceDataPacketMutableDoubleBuffer)this).ToString()
				}), 
			};
		}
	}
	public class LogicalDeviceLevelerStatusExtendedType5JackStrokeLength : LogicalDeviceStatusPacketMutableExtended, ILogicalDeviceLevelerStatusExtendedType5, IDeviceDataPacketMutableExtended, IDeviceDataPacketMutable, IDeviceDataPacket
	{
		public const LogicalDeviceLevelerStatusExtendedType5Kind ExtendedByteJackStrokeLength = LogicalDeviceLevelerStatusExtendedType5Kind.JackStrokeLength;

		private const int EnhancedByteIndex = 0;

		public const int MinimumStatusPacketSize = 8;

		public const int MaxStatusPacketSize = 8;

		public const byte BufferFill = 255;

		public const byte EnhancedByte = 1;

		private const int NumberOfBytesUsedPerJack = 2;

		private const ushort InvalidJackStrokeLength = 1023;

		private const int DecimalResolution = 32;

		private const int LeftFrontJackStartingByte = 0;

		private static readonly BitPositionValue LeftFrontJackInchPosition = new BitPositionValue(65472u, 0, 2);

		private const int RightFrontJackStartingByte = 1;

		private static readonly BitPositionValue RightFrontJackInchPosition = new BitPositionValue(16368u, 1, 2);

		private const int LeftRearJackStartingByte = 2;

		private static readonly BitPositionValue LeftRearJackInchPosition = new BitPositionValue(4092u, 2, 2);

		private const int RightRearJackStartingByte = 3;

		private static readonly BitPositionValue RightRearJackInchPosition = new BitPositionValue(1023u, 3, 2);

		private const int LeftMiddleJackStartingByte = 5;

		private static readonly BitPositionValue LeftMiddleJackInchPosition = new BitPositionValue(65472u, 5, 2);

		private const int RightMiddleJackStartingByte = 6;

		private static readonly BitPositionValue RightMiddleJackInchPosition = new BitPositionValue(16368u, 6, 2);

		public override byte ExtendedByte
		{
			get
			{
				return 1;
			}
			protected set
			{
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				if (value != 1)
				{
					throw new ArgumentException(String.Format("Extended byte must be {0} but was {1} for {2}", (object)LogicalDeviceLevelerStatusExtendedType5Kind.JackStrokeLength, (object)value, (object)((MemberInfo)((Object)this).GetType()).Name));
				}
			}
		}

		public Nullable<float> LeftFrontJackStrokeInInches
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_0017: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				ushort num = (ushort)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(LeftFrontJackInchPosition);
				if (num == 1023)
				{
					return default(Nullable<float>);
				}
				return new Nullable<float>(FixedPointUnsignedBigEndian5X5.ToFloat(num));
			}
			set
			{
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData && value.HasValue)
				{
					float valueOrDefault = value.GetValueOrDefault();
					ushort num = FixedPointUnsignedBigEndian5X5.ToFixedPoint(valueOrDefault);
					((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)num, LeftFrontJackInchPosition);
				}
				else
				{
					((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue(1023u, LeftFrontJackInchPosition);
				}
			}
		}

		public Nullable<float> RightFrontJackStrokeInInches
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_0017: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				ushort num = (ushort)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(RightFrontJackInchPosition);
				if (num == 1023)
				{
					return default(Nullable<float>);
				}
				return new Nullable<float>(FixedPointUnsignedBigEndian5X5.ToFloat(num));
			}
			set
			{
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData && value.HasValue)
				{
					float valueOrDefault = value.GetValueOrDefault();
					ushort num = FixedPointUnsignedBigEndian5X5.ToFixedPoint(valueOrDefault);
					((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)num, RightFrontJackInchPosition);
				}
				else
				{
					((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue(1023u, RightFrontJackInchPosition);
				}
			}
		}

		public Nullable<float> LeftRearJackStrokeInInches
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_0017: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				ushort num = (ushort)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(LeftRearJackInchPosition);
				if (num == 1023)
				{
					return default(Nullable<float>);
				}
				return new Nullable<float>(FixedPointUnsignedBigEndian5X5.ToFloat(num));
			}
			set
			{
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData && value.HasValue)
				{
					float valueOrDefault = value.GetValueOrDefault();
					ushort num = FixedPointUnsignedBigEndian5X5.ToFixedPoint(valueOrDefault);
					((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)num, LeftRearJackInchPosition);
				}
				else
				{
					((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue(1023u, LeftRearJackInchPosition);
				}
			}
		}

		public Nullable<float> RightRearJackStrokeInInches
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_0017: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				ushort num = (ushort)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(RightRearJackInchPosition);
				if (num == 1023)
				{
					return default(Nullable<float>);
				}
				return new Nullable<float>(FixedPointUnsignedBigEndian5X5.ToFloat(num));
			}
			set
			{
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData && value.HasValue)
				{
					float valueOrDefault = value.GetValueOrDefault();
					ushort num = FixedPointUnsignedBigEndian5X5.ToFixedPoint(valueOrDefault);
					((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)num, RightRearJackInchPosition);
				}
				else
				{
					((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue(1023u, RightRearJackInchPosition);
				}
			}
		}

		public Nullable<float> LeftMiddleJackStrokeInInches
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_0017: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				ushort num = (ushort)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(LeftMiddleJackInchPosition);
				if (num == 1023)
				{
					return default(Nullable<float>);
				}
				return new Nullable<float>(FixedPointUnsignedBigEndian5X5.ToFloat(num));
			}
			set
			{
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData && value.HasValue)
				{
					float valueOrDefault = value.GetValueOrDefault();
					ushort num = FixedPointUnsignedBigEndian5X5.ToFixedPoint(valueOrDefault);
					((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)num, LeftMiddleJackInchPosition);
				}
				else
				{
					((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue(1023u, LeftMiddleJackInchPosition);
				}
			}
		}

		public Nullable<float> RightMiddleJackStrokeInInches
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_0017: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				ushort num = (ushort)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(RightMiddleJackInchPosition);
				if (num == 1023)
				{
					return default(Nullable<float>);
				}
				return new Nullable<float>(FixedPointUnsignedBigEndian5X5.ToFloat(num));
			}
			set
			{
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData && value.HasValue)
				{
					float valueOrDefault = value.GetValueOrDefault();
					ushort num = FixedPointUnsignedBigEndian5X5.ToFixedPoint(valueOrDefault);
					((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)num, RightMiddleJackInchPosition);
				}
				else
				{
					((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue(1023u, RightMiddleJackInchPosition);
				}
			}
		}

		public LogicalDeviceLevelerStatusExtendedType5JackStrokeLength()
			: base(8u, 8u, (byte)255)
		{
		}

		public LogicalDeviceLevelerStatusExtendedType5JackStrokeLength(LogicalDeviceLevelerStatusExtendedType5JackStrokeLength originalStatus)
		{
			//IL_0043: Unknown result type (might be due to invalid IL or missing references)
			//IL_0049: Unknown result type (might be due to invalid IL or missing references)
			//IL_0029: Unknown result type (might be due to invalid IL or missing references)
			if (((LogicalDeviceStatusPacketMutableExtended)originalStatus).ExtendedByte != 1)
			{
				throw new ArgumentException(String.Format("{0} can only be created from a status with an extended byte of {1}", (object)"LogicalDeviceLevelerStatusExtendedType5JackStrokeLength", (object)LogicalDeviceLevelerStatusExtendedType5Kind.JackStrokeLength), "originalStatus");
			}
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalStatus).Data;
			((LogicalDeviceStatusPacketMutableExtended)this).Update((IReadOnlyList<byte>)(object)data, (uint)data.Length, ((LogicalDeviceStatusPacketMutableExtended)originalStatus).ExtendedByte, default(Nullable<DateTime>));
		}

		public static LogicalDeviceLevelerStatusExtendedType5JackStrokeLength MakeDefaultExtendedStatus()
		{
			LogicalDeviceLevelerStatusExtendedType5JackStrokeLength logicalDeviceLevelerStatusExtendedType5JackStrokeLength = new LogicalDeviceLevelerStatusExtendedType5JackStrokeLength();
			byte[] array = (byte[])(object)new Byte[8];
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusExtendedType5JackStrokeLength).Update(array, array.Length, false);
			return logicalDeviceLevelerStatusExtendedType5JackStrokeLength;
		}

		public override string ToString()
		{
			//IL_000e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_003e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0056: Unknown result type (might be due to invalid IL or missing references)
			//IL_006e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0086: Unknown result type (might be due to invalid IL or missing references)
			return String.Concat((string[])(object)new String[6]
			{
				String.Format("Left Front Jack Stroke Length: {0} inches\n", (object)LeftFrontJackStrokeInInches),
				String.Format("Right Front Jack Stroke Length: {0} inches\n", (object)RightFrontJackStrokeInInches),
				String.Format("Left Rear Jack Stroke Length: {0} inches\n", (object)LeftRearJackStrokeInInches),
				String.Format("Right Rear Jack Stroke Length: {0} inches\n", (object)RightRearJackStrokeInInches),
				String.Format("Left Middle Jack Stroke Length: {0} inches\n", (object)LeftMiddleJackStrokeInInches),
				String.Format("Right Middle Jack Stroke Length: {0} inches\n", (object)RightMiddleJackStrokeInInches)
			});
		}
	}
	internal static class FixedPointUnsignedBigEndian5X5 : Object
	{
		public const float ScaleFactor = 32f;

		public static ushort ToFixedPoint(float realNumber)
		{
			return Convert.ToUInt16(realNumber * 32f);
		}

		public static float ToFloat(ushort fixedPointNumber)
		{
			return (float)(int)fixedPointNumber / 32f;
		}
	}
	public enum LogicalDeviceLevelerStatusExtendedType5Kind : Enum
	{
		AutoStep,
		JackStrokeLength
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceLevelerStatusExtendedType5Serializable : LogicalDeviceStatusExtendedSerializableBase<LogicalDeviceLevelerStatusExtendedType5Serializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceLevelerStatusExtendedType5Serializable);
			}
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LevelerOperationCodeProgress OperationCodeProgress
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LevelerAutoOperationSetPoint AutoLevelSetPoint
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LevelerAutoOperationRetractJacks AutoRetractJacks
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LevelerAutoOperationExtendJacks AutoExtendJacks
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LevelerAutoOperationStatus AutoOperationStatus
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public int AutoStepCount
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public int AutoStepIndex
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LevelerAutoOperationStep AutoStep
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		public Nullable<float> LeftFrontJackStrokeInInches
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		public Nullable<float> RightFrontJackStrokeInInches
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		public Nullable<float> LeftRearJackStrokeInInches
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		public Nullable<float> RightRearJackStrokeInInches
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		public Nullable<float> LeftMiddleJackStrokeInInches
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		public Nullable<float> RightMiddleJackStrokeInInches
		{
			[CompilerGenerated]
			get;
		}

		public const string LogTag = "LogicalDeviceLevelerStatusExtendedType5Serializable";

		[JsonConstructor]
		public LogicalDeviceLevelerStatusExtendedType5Serializable(LevelerOperationCodeProgress operationCodeProgress, LevelerAutoOperationSetPoint autoLevelSetPoint, LevelerAutoOperationRetractJacks autoRetractJacks, LevelerAutoOperationExtendJacks autoExtendJacks, LevelerAutoOperationStatus autoOperationStatus, int autoStepCount, int autoStepIndex, LevelerAutoOperationStep autoStep, Nullable<float> leftFrontJackStrokeInInches, Nullable<float> rightFrontJackStrokeInInches, Nullable<float> leftRearJackStrokeInInches, Nullable<float> rightRearJackStrokeInInches, Nullable<float> leftMiddleJackStrokeInInches, Nullable<float> rightMiddleJackStrokeInInches)
		{
			//IL_0044: Unknown result type (might be due to invalid IL or missing references)
			//IL_0046: Unknown result type (might be due to invalid IL or missing references)
			//IL_004c: Unknown result type (might be due to invalid IL or missing references)
			//IL_004e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0054: Unknown result type (might be due to invalid IL or missing references)
			//IL_0056: Unknown result type (might be due to invalid IL or missing references)
			//IL_005c: Unknown result type (might be due to invalid IL or missing references)
			//IL_005e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0064: Unknown result type (might be due to invalid IL or missing references)
			//IL_0066: Unknown result type (might be due to invalid IL or missing references)
			//IL_006c: Unknown result type (might be due to invalid IL or missing references)
			//IL_006e: Unknown result type (might be due to invalid IL or missing references)
			OperationCodeProgress = operationCodeProgress;
			AutoLevelSetPoint = autoLevelSetPoint;
			AutoRetractJacks = autoRetractJacks;
			AutoExtendJacks = autoExtendJacks;
			AutoOperationStatus = autoOperationStatus;
			AutoStepCount = autoStepCount;
			AutoStepIndex = autoStepIndex;
			AutoStep = autoStep;
			LeftFrontJackStrokeInInches = leftFrontJackStrokeInInches;
			RightFrontJackStrokeInInches = rightFrontJackStrokeInInches;
			LeftRearJackStrokeInInches = leftRearJackStrokeInInches;
			RightRearJackStrokeInInches = rightRearJackStrokeInInches;
			LeftMiddleJackStrokeInInches = leftMiddleJackStrokeInInches;
			RightMiddleJackStrokeInInches = rightMiddleJackStrokeInInches;
		}

		public LogicalDeviceLevelerStatusExtendedType5Serializable(LogicalDeviceLevelerStatusExtendedType5AutoStep levelerStatus, LogicalDeviceLevelerStatusExtendedType5JackStrokeLength strokeLength)
			: this(levelerStatus.OperationCodeProgress, levelerStatus.AutoLevelSetPoint, levelerStatus.AutoLevelJacks, levelerStatus.AutoExtendJacks, levelerStatus.AutoOperationStatus, levelerStatus.AutoStepCount, levelerStatus.AutoStepIndex, levelerStatus.AutoStep, strokeLength.LeftFrontJackStrokeInInches, strokeLength.RightFrontJackStrokeInInches, strokeLength.LeftRearJackStrokeInInches, strokeLength.RightRearJackStrokeInInches, strokeLength.LeftMiddleJackStrokeInInches, strokeLength.RightMiddleJackStrokeInInches)
		{
		}//IL_0032: Unknown result type (might be due to invalid IL or missing references)
		//IL_0038: Unknown result type (might be due to invalid IL or missing references)
		//IL_003e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0044: Unknown result type (might be due to invalid IL or missing references)
		//IL_004a: Unknown result type (might be due to invalid IL or missing references)
		//IL_0050: Unknown result type (might be due to invalid IL or missing references)


		public override IReadOnlyDictionary<byte, byte[]> MakeRawDataExtended()
		{
			//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d0: Unknown result type (might be due to invalid IL or missing references)
			//IL_00dc: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e8: Unknown result type (might be due to invalid IL or missing references)
			//IL_00f4: Unknown result type (might be due to invalid IL or missing references)
			//IL_0100: Unknown result type (might be due to invalid IL or missing references)
			Dictionary<byte, byte[]> val = new Dictionary<byte, byte[]>();
			LogicalDeviceLevelerStatusExtendedType5AutoStep logicalDeviceLevelerStatusExtendedType5AutoStep = new LogicalDeviceLevelerStatusExtendedType5AutoStep();
			switch (OperationCodeProgress)
			{
			case LevelerOperationCodeProgress.AutoLevel:
				logicalDeviceLevelerStatusExtendedType5AutoStep.SetAutoOperationLevel(AutoLevelSetPoint);
				break;
			case LevelerOperationCodeProgress.AutoHitch:
				logicalDeviceLevelerStatusExtendedType5AutoStep.SetAutoOperationHitch();
				break;
			case LevelerOperationCodeProgress.AutoRetract:
				logicalDeviceLevelerStatusExtendedType5AutoStep.SetAutoOperationRetract(AutoRetractJacks);
				break;
			case LevelerOperationCodeProgress.AutoExtend:
				logicalDeviceLevelerStatusExtendedType5AutoStep.SetAutoOperationExtend(AutoExtendJacks);
				break;
			case LevelerOperationCodeProgress.SavingSetPoint:
				logicalDeviceLevelerStatusExtendedType5AutoStep.SetAutoOperationSavingSetPoint();
				break;
			default:
				logicalDeviceLevelerStatusExtendedType5AutoStep.SetAutoOperationNone();
				break;
			}
			logicalDeviceLevelerStatusExtendedType5AutoStep.AutoOperationStatus = AutoOperationStatus;
			logicalDeviceLevelerStatusExtendedType5AutoStep.AutoStepCount = AutoStepCount;
			logicalDeviceLevelerStatusExtendedType5AutoStep.AutoStepIndex = AutoStepIndex;
			logicalDeviceLevelerStatusExtendedType5AutoStep.AutoStep = AutoStep;
			val[(byte)0] = ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusExtendedType5AutoStep).CopyCurrentData();
			LogicalDeviceLevelerStatusExtendedType5JackStrokeLength logicalDeviceLevelerStatusExtendedType5JackStrokeLength = new LogicalDeviceLevelerStatusExtendedType5JackStrokeLength();
			logicalDeviceLevelerStatusExtendedType5JackStrokeLength.LeftFrontJackStrokeInInches = LeftFrontJackStrokeInInches;
			logicalDeviceLevelerStatusExtendedType5JackStrokeLength.RightFrontJackStrokeInInches = RightFrontJackStrokeInInches;
			logicalDeviceLevelerStatusExtendedType5JackStrokeLength.LeftRearJackStrokeInInches = LeftRearJackStrokeInInches;
			logicalDeviceLevelerStatusExtendedType5JackStrokeLength.RightRearJackStrokeInInches = RightRearJackStrokeInInches;
			logicalDeviceLevelerStatusExtendedType5JackStrokeLength.LeftMiddleJackStrokeInInches = LeftMiddleJackStrokeInInches;
			logicalDeviceLevelerStatusExtendedType5JackStrokeLength.RightMiddleJackStrokeInInches = RightMiddleJackStrokeInInches;
			val[(byte)1] = ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusExtendedType5JackStrokeLength).CopyCurrentData();
			return (IReadOnlyDictionary<byte, byte[]>)(object)val;
		}

		public static LogicalDeviceLevelerStatusExtendedType5Serializable MakeStatusSerializable(IReadOnlyDictionary<byte, byte[]> rawDataDict)
		{
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_001b: Unknown result type (might be due to invalid IL or missing references)
			LogicalDeviceLevelerStatusExtendedType5AutoStep logicalDeviceLevelerStatusExtendedType5AutoStep = new LogicalDeviceLevelerStatusExtendedType5AutoStep();
			LogicalDeviceLevelerStatusExtendedType5JackStrokeLength logicalDeviceLevelerStatusExtendedType5JackStrokeLength = new LogicalDeviceLevelerStatusExtendedType5JackStrokeLength();
			IEnumerator<KeyValuePair<byte, byte[]>> enumerator = ((IEnumerable<KeyValuePair<byte, byte[]>>)(object)rawDataDict).GetEnumerator();
			try
			{
				while (((IEnumerator)enumerator).MoveNext())
				{
					KeyValuePair<byte, byte[]> current = enumerator.Current;
					switch ((LogicalDeviceLevelerStatusExtendedType5Kind)current.Key)
					{
					case LogicalDeviceLevelerStatusExtendedType5Kind.AutoStep:
						((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusExtendedType5AutoStep).Update(current.Value, current.Value.Length, false);
						break;
					case LogicalDeviceLevelerStatusExtendedType5Kind.JackStrokeLength:
						((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusExtendedType5JackStrokeLength).Update(current.Value, current.Value.Length, false);
						break;
					default:
						TaggedLog.Warning("LogicalDeviceLevelerStatusExtendedType5Serializable", String.Format("Ignoring unknown enhanced byte of 0x{0:X2}", (object)current.Key), Array.Empty<object>());
						break;
					}
				}
			}
			finally
			{
				if (enumerator != null)
				{
					((IDisposable)enumerator).Dispose();
				}
			}
			return new LogicalDeviceLevelerStatusExtendedType5Serializable(logicalDeviceLevelerStatusExtendedType5AutoStep, logicalDeviceLevelerStatusExtendedType5JackStrokeLength);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceLevelerStatusExtendedType5Serializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusExtendedSerializableBase<LogicalDeviceLevelerStatusExtendedType5Serializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			//IL_015f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0164: Unknown result type (might be due to invalid IL or missing references)
			//IL_0187: Unknown result type (might be due to invalid IL or missing references)
			//IL_018c: Unknown result type (might be due to invalid IL or missing references)
			//IL_01af: Unknown result type (might be due to invalid IL or missing references)
			//IL_01b4: Unknown result type (might be due to invalid IL or missing references)
			//IL_01d7: Unknown result type (might be due to invalid IL or missing references)
			//IL_01dc: Unknown result type (might be due to invalid IL or missing references)
			//IL_01ff: Unknown result type (might be due to invalid IL or missing references)
			//IL_0204: Unknown result type (might be due to invalid IL or missing references)
			//IL_0227: Unknown result type (might be due to invalid IL or missing references)
			//IL_022c: Unknown result type (might be due to invalid IL or missing references)
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("OperationCodeProgress = ");
			builder.Append(((Object)OperationCodeProgress/*cast due to .constrained prefix*/).ToString());
			builder.Append(", AutoLevelSetPoint = ");
			builder.Append(((Object)AutoLevelSetPoint/*cast due to .constrained prefix*/).ToString());
			builder.Append(", AutoRetractJacks = ");
			builder.Append(((Object)AutoRetractJacks/*cast due to .constrained prefix*/).ToString());
			builder.Append(", AutoExtendJacks = ");
			builder.Append(((Object)AutoExtendJacks/*cast due to .constrained prefix*/).ToString());
			builder.Append(", AutoOperationStatus = ");
			builder.Append(((Object)AutoOperationStatus/*cast due to .constrained prefix*/).ToString());
			builder.Append(", AutoStepCount = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref AutoStepCount)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", AutoStepIndex = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref AutoStepIndex)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", AutoStep = ");
			builder.Append(((Object)AutoStep/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LeftFrontJackStrokeInInches = ");
			builder.Append(((Object)LeftFrontJackStrokeInInches/*cast due to .constrained prefix*/).ToString());
			builder.Append(", RightFrontJackStrokeInInches = ");
			builder.Append(((Object)RightFrontJackStrokeInInches/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LeftRearJackStrokeInInches = ");
			builder.Append(((Object)LeftRearJackStrokeInInches/*cast due to .constrained prefix*/).ToString());
			builder.Append(", RightRearJackStrokeInInches = ");
			builder.Append(((Object)RightRearJackStrokeInInches/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LeftMiddleJackStrokeInInches = ");
			builder.Append(((Object)LeftMiddleJackStrokeInInches/*cast due to .constrained prefix*/).ToString());
			builder.Append(", RightMiddleJackStrokeInInches = ");
			builder.Append(((Object)RightMiddleJackStrokeInInches/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			//IL_00ca: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e1: Unknown result type (might be due to invalid IL or missing references)
			//IL_00f8: Unknown result type (might be due to invalid IL or missing references)
			//IL_010f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0126: Unknown result type (might be due to invalid IL or missing references)
			//IL_013d: Unknown result type (might be due to invalid IL or missing references)
			return (((((((((((((base.GetHashCode() * -1521134295 + EqualityComparer<LevelerOperationCodeProgress>.Default.GetHashCode(OperationCodeProgress)) * -1521134295 + EqualityComparer<LevelerAutoOperationSetPoint>.Default.GetHashCode(AutoLevelSetPoint)) * -1521134295 + EqualityComparer<LevelerAutoOperationRetractJacks>.Default.GetHashCode(AutoRetractJacks)) * -1521134295 + EqualityComparer<LevelerAutoOperationExtendJacks>.Default.GetHashCode(AutoExtendJacks)) * -1521134295 + EqualityComparer<LevelerAutoOperationStatus>.Default.GetHashCode(AutoOperationStatus)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(AutoStepCount)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(AutoStepIndex)) * -1521134295 + EqualityComparer<LevelerAutoOperationStep>.Default.GetHashCode(AutoStep)) * -1521134295 + EqualityComparer<Nullable<float>>.Default.GetHashCode(LeftFrontJackStrokeInInches)) * -1521134295 + EqualityComparer<Nullable<float>>.Default.GetHashCode(RightFrontJackStrokeInInches)) * -1521134295 + EqualityComparer<Nullable<float>>.Default.GetHashCode(LeftRearJackStrokeInInches)) * -1521134295 + EqualityComparer<Nullable<float>>.Default.GetHashCode(RightRearJackStrokeInInches)) * -1521134295 + EqualityComparer<Nullable<float>>.Default.GetHashCode(LeftMiddleJackStrokeInInches)) * -1521134295 + EqualityComparer<Nullable<float>>.Default.GetHashCode(RightMiddleJackStrokeInInches);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusExtendedSerializableBase<LogicalDeviceLevelerStatusExtendedType5Serializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceLevelerStatusExtendedType5Serializable(LogicalDeviceLevelerStatusExtendedType5Serializable original)
			: base((LogicalDeviceStatusExtendedSerializableBase<LogicalDeviceLevelerStatusExtendedType5Serializable>)original)
		{
			//IL_0069: Unknown result type (might be due to invalid IL or missing references)
			//IL_006e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0075: Unknown result type (might be due to invalid IL or missing references)
			//IL_007a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0081: Unknown result type (might be due to invalid IL or missing references)
			//IL_0086: Unknown result type (might be due to invalid IL or missing references)
			//IL_008d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0092: Unknown result type (might be due to invalid IL or missing references)
			//IL_0099: Unknown result type (might be due to invalid IL or missing references)
			//IL_009e: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a5: Unknown result type (might be due to invalid IL or missing references)
			//IL_00aa: Unknown result type (might be due to invalid IL or missing references)
			OperationCodeProgress = original.OperationCodeProgress;
			AutoLevelSetPoint = original.AutoLevelSetPoint;
			AutoRetractJacks = original.AutoRetractJacks;
			AutoExtendJacks = original.AutoExtendJacks;
			AutoOperationStatus = original.AutoOperationStatus;
			AutoStepCount = original.AutoStepCount;
			AutoStepIndex = original.AutoStepIndex;
			AutoStep = original.AutoStep;
			LeftFrontJackStrokeInInches = original.LeftFrontJackStrokeInInches;
			RightFrontJackStrokeInInches = original.RightFrontJackStrokeInInches;
			LeftRearJackStrokeInInches = original.LeftRearJackStrokeInInches;
			RightRearJackStrokeInInches = original.RightRearJackStrokeInInches;
			LeftMiddleJackStrokeInInches = original.LeftMiddleJackStrokeInInches;
			RightMiddleJackStrokeInInches = original.RightMiddleJackStrokeInInches;
		}
	}
	public enum LevelerAirBagConfig : Enum
	{
		LongTime,
		ShortTime
	}
	public interface ILevelerType5
	{
		LevelerJacksAndAirBagType5 JacksOrAirbagMoving { get; }

		LevelerJacksAndAirBagType5 JacksOrAirbagMovementAllowed { get; }

		bool CanCustomSetPointNamesBeSet { get; }

		AsyncValueCachedState CurrentSetPointNamesState { get; }

		LevelerSetPointNames CurrentSetPointNames { get; }

		Task SetCustomSetPointNames(LevelerSetPointNames names, CancellationToken cancellationToken);

		Task UpdateAutoStepsCollectionWithLatestDetailsAsync(int expectedStepsCount, BaseObservableCollection<ValueTuple<LevelerAutoOperationStep, int>> collection, CancellationToken cancelToken);

		Task<IEnumerable<LevelerAutoOperationStep>> GetAutoStepDetailsAsync(int expectedStepsCount, CancellationToken cancelToken);

		Task PerformOperationStopAsync(CancellationToken cancellationToken);

		Task<LevelerCommandResultType5> TryPerformOperationStopAsync(CancellationToken cancellationToken);

		Task PerformOperationAutoLevelAsync(LevelerAutoOperationSetPoint zeroPoint, Func<ILevelerAutoStepsProgressLevel, LevelerAutoOperationAck> progressAck, CancellationToken cancellationToken);

		Task PerformOperationAutoHitchAsync(Func<ILevelerAutoStepsProgressHitch, LevelerAutoOperationAck> progressAck, CancellationToken cancellationToken);

		Task PerformOperationAutoRetractAsync(LevelerAutoOperationRetractJacks retractJacks, Func<ILevelerAutoStepsProgressRetract, LevelerAutoOperationAck> progressAck, CancellationToken cancellationToken);

		Task PerformOperationAutoExtendAsync(LevelerAutoOperationExtendJacks extendJacks, Func<ILevelerAutoStepsProgressExtend, LevelerAutoOperationAck> progressAck, CancellationToken cancellationToken);

		Task PerformOperationManualAsync(LevelerJacksAndAirBagType5 action, Func<LevelerJacksAndAirBagType5, LevelerAutoOperationAck> progressAck, CancellationToken cancellationToken);

		Task PerformOperationSetPointSetAsync(LevelerAutoOperationSetPoint setPoint, Func<ILevelerAutoStepsProgressSetPointSet, LevelerAutoOperationAck> progressAck, CancellationToken cancellationToken);

		Task<LevelerCommandResultType5> TryPerformOperationAirbagConfigSetAsync(LevelerAirBagConfig airBagConfig, CancellationToken cancellationToken);

		Task PerformOperationClearFaultAsync(CancellationToken cancellationToken);

		Task<LevelerCommandResultType5> TryPerformOperationClearFaultAsync(CancellationToken cancellationToken);
	}
	public interface ILogicalDeviceLevelerType5 : ILevelerType5, ILogicalDeviceLeveler, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IDevicesActivation, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceWithStatusAlerts, ILogicalDeviceWithStatus<LogicalDeviceLevelerStatusType5>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusExtendedMultiplexed<ILogicalDeviceLevelerStatusExtendedType5, LogicalDeviceLevelerStatusExtendedType5Kind>, ILogicalDeviceWithStatusExtendedMultiplexed, ILogicalDeviceWithStatusExtended, ILogicalDeviceWithCapability<LogicalDeviceLevelerCapabilityType5>, ILogicalDeviceFirmwareUpdateDevice, ILogicalDeviceJumpToBootloader, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
		LogicalDeviceLevelerStatusExtendedType5AutoStep DeviceStatusExtendedAutoStep { get; }

		LogicalDeviceLevelerStatusExtendedType5JackStrokeLength DeviceStatusExtendedJackStrokeLength { get; }

		ILogicalDeviceLightDimmable? GetAssociatedDimmableLight();
	}
	public interface ILogicalDeviceDirectLevelerType5 : ILogicalDeviceLevelerType5, ILevelerType5, ILogicalDeviceLeveler, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IDevicesActivation, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceWithStatusAlerts, ILogicalDeviceWithStatus<LogicalDeviceLevelerStatusType5>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusExtendedMultiplexed<ILogicalDeviceLevelerStatusExtendedType5, LogicalDeviceLevelerStatusExtendedType5Kind>, ILogicalDeviceWithStatusExtendedMultiplexed, ILogicalDeviceWithStatusExtended, ILogicalDeviceWithCapability<LogicalDeviceLevelerCapabilityType5>, ILogicalDeviceFirmwareUpdateDevice, ILogicalDeviceJumpToBootloader, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public interface IDirectCommandLeveler5 : ILogicalDeviceSourceDirect, ILogicalDeviceSource
	{
		Task<LevelerCommandResultType5> SendDirectCommandLeveler5Async(ILogicalDeviceLevelerType5 logicalDevice, ILogicalDeviceLevelerCommandType5 command, CancellationToken cancelToken);
	}
	public readonly struct LevelerCommandResultType5 : ValueType, ILevelerFaultType5
	{
		[field: CompilerGenerated]
		public CommandResult CommandResult
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LevelerFaultType5 Fault
		{
			[CompilerGenerated]
			get;
		}

		public bool IsFaulted
		{
			get
			{
				//IL_0011: Unknown result type (might be due to invalid IL or missing references)
				//IL_0017: Invalid comparison between Unknown and I4
				if (!Fault.IsFaulted)
				{
					return (int)CommandResult > 0;
				}
				return true;
			}
		}

		public Nullable<DTC_ID> UserMessageDtc => Fault.UserMessageDtc;

		public Nullable<LevelerFaultCustomType5> CustomFault => Fault.CustomFault;

		public bool DoesDtcAllowManualMovement => Fault.DoesDtcAllowManualMovement;

		public bool DoesDtcRequireAutoOperationStopWithoutRetry => Fault.DoesDtcRequireAutoOperationStopWithoutRetry;

		public LevelerCommandResultType5(CommandResult commandResult, LevelerFaultCustomType5 faultType5)
			: this(commandResult, (ushort)faultType5)
		{
		}//IL_0001: Unknown result type (might be due to invalid IL or missing references)


		public LevelerCommandResultType5(CommandResult commandResult, Nullable<DTC_ID> dtcId)
			: this(commandResult, (ushort)(int)dtcId.GetValueOrDefault())
		{
		}//IL_0001: Unknown result type (might be due to invalid IL or missing references)
		//IL_0004: Unknown result type (might be due to invalid IL or missing references)
		//IL_000e: Expected I4, but got Unknown


		public LevelerCommandResultType5(CommandResult commandResult, ushort rawValue)
			: this(commandResult, new Nullable<LevelerFaultType5>(new LevelerFaultType5(rawValue)))
		{
		}//IL_0001: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)


		public LevelerCommandResultType5(CommandResult commandResult)
			: this(commandResult, new Nullable<LevelerFaultType5>(MakeDefaultFaultFromCommandResult(commandResult)))
		{
		}//IL_0001: Unknown result type (might be due to invalid IL or missing references)
		//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)


		public LevelerCommandResultType5(CommandResult commandResult, Nullable<LevelerFaultType5> fault)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			//IL_0009: Unknown result type (might be due to invalid IL or missing references)
			//IL_0013: Unknown result type (might be due to invalid IL or missing references)
			CommandResult = commandResult;
			Nullable<LevelerFaultType5> val = fault;
			Fault = (val.HasValue ? val.GetValueOrDefault() : MakeDefaultFaultFromCommandResult(commandResult));
		}

		private static LevelerFaultType5 MakeDefaultFaultFromCommandResult(CommandResult commandResult)
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			if ((int)commandResult != 0)
			{
				return new LevelerFaultType5(LevelerFaultCustomType5.FaultErrorOther);
			}
			return new LevelerFaultType5();
		}

		public string ToDebugString()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			//IL_0032: Unknown result type (might be due to invalid IL or missing references)
			//IL_0037: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0021: Unknown result type (might be due to invalid IL or missing references)
			//IL_0085: Unknown result type (might be due to invalid IL or missing references)
			//IL_0042: Unknown result type (might be due to invalid IL or missing references)
			//IL_0047: Unknown result type (might be due to invalid IL or missing references)
			//IL_0049: Unknown result type (might be due to invalid IL or missing references)
			//IL_004c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0051: Unknown result type (might be due to invalid IL or missing references)
			//IL_0064: Unknown result type (might be due to invalid IL or missing references)
			//IL_006f: Unknown result type (might be due to invalid IL or missing references)
			if (CustomFault.HasValue)
			{
				return String.Format("{0}.{1}", (object)CommandResult, (object)CustomFault);
			}
			if (UserMessageDtc.HasValue)
			{
				Nullable<DTC_ID> userMessageDtc = UserMessageDtc;
				DTC_ID val = (DTC_ID)0;
				if (!((userMessageDtc.GetValueOrDefault() == val) & userMessageDtc.HasValue))
				{
					return String.Format("{0}.{1}", (object)CommandResult, (object)UserMessageDtc);
				}
			}
			return String.Format("{0}", (object)CommandResult);
		}

		public override string ToString()
		{
			return String.Concat("LevelerCommandResultType5(", ToDebugString(), ")");
		}
	}
	public enum LevelerFaultCustomType5 : Enum
	{
		FaultNone = 0,
		FaultFaultInternalSensor = 61440,
		FaultFaultFeatureDisabled = 61441,
		FaultFrontTooLow = 61442,
		FaultFrontOutOfStroke = 61443,
		FaultJackTimeout = 61444,
		FaultLockout = 61445,
		FaultRemoteSensor = 61446,
		FaultExcessAngleManual = 61447,
		FaultOperationCanceled = 61696,
		FaultErrorOther = 61697,
		FaultCommandBadArgs = 65534,
		FaultCommandUnknown = 65535
	}
	public interface ILevelerFaultType5
	{
		bool IsFaulted { get; }

		Nullable<DTC_ID> UserMessageDtc { get; }

		bool DoesDtcAllowManualMovement { get; }

		bool DoesDtcRequireAutoOperationStopWithoutRetry { get; }

		Nullable<LevelerFaultCustomType5> CustomFault { get; }
	}
	public readonly struct LevelerFaultType5 : ValueType, ILevelerFaultType5
	{
		private readonly ushort _rawValue;

		private static List<DTC_ID> InstantAutoOperationStopDtcs;

		private static List<DTC_ID> ManualSuccessfulOperationDtcs;

		public bool IsFaulted => _rawValue != 0;

		public bool DoesDtcAllowManualMovement
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_0006: Unknown result type (might be due to invalid IL or missing references)
				//IL_0016: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Unknown result type (might be due to invalid IL or missing references)
				//IL_001e: Unknown result type (might be due to invalid IL or missing references)
				if (UserMessageDtc.HasValue)
				{
					return ManualSuccessfulOperationDtcs.Contains(UserMessageDtc.Value);
				}
				return false;
			}
		}

		public bool DoesDtcRequireAutoOperationStopWithoutRetry
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_0006: Unknown result type (might be due to invalid IL or missing references)
				//IL_0016: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Unknown result type (might be due to invalid IL or missing references)
				//IL_001e: Unknown result type (might be due to invalid IL or missing references)
				if (UserMessageDtc.HasValue)
				{
					return InstantAutoOperationStopDtcs.Contains(UserMessageDtc.Value);
				}
				return false;
			}
		}

		public Nullable<DTC_ID> UserMessageDtc
		{
			get
			{
				//IL_002c: Unknown result type (might be due to invalid IL or missing references)
				//IL_001e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0024: Unknown result type (might be due to invalid IL or missing references)
				if (!Enum.IsDefined(typeof(DTC_ID), (object)_rawValue))
				{
					return default(Nullable<DTC_ID>);
				}
				return new Nullable<DTC_ID>((DTC_ID)_rawValue);
			}
		}

		public Nullable<LevelerFaultCustomType5> CustomFault
		{
			get
			{
				//IL_002c: Unknown result type (might be due to invalid IL or missing references)
				//IL_001e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0024: Unknown result type (might be due to invalid IL or missing references)
				if (!Enum.IsDefined(typeof(LevelerFaultCustomType5), (object)_rawValue))
				{
					return default(Nullable<LevelerFaultCustomType5>);
				}
				return new Nullable<LevelerFaultCustomType5>((LevelerFaultCustomType5)_rawValue);
			}
		}

		public LevelerFaultType5(LevelerFaultCustomType5 faultType5)
			: this((ushort)faultType5)
		{
		}

		public LevelerFaultType5(Nullable<DTC_ID> dtcId)
			: this((ushort)(int)dtcId.GetValueOrDefault())
		{
		}//IL_0003: Unknown result type (might be due to invalid IL or missing references)
		//IL_000d: Expected I4, but got Unknown


		public LevelerFaultType5(ushort rawValue)
		{
			_rawValue = 0;
			_rawValue = rawValue;
		}

		public LevelerFaultType5()
		{
			_rawValue = 0;
			_rawValue = 0;
		}

		public string ToDebugString()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			//IL_002c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0037: Unknown result type (might be due to invalid IL or missing references)
			//IL_003c: Unknown result type (might be due to invalid IL or missing references)
			//IL_003e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0041: Unknown result type (might be due to invalid IL or missing references)
			//IL_0046: Unknown result type (might be due to invalid IL or missing references)
			//IL_0059: Unknown result type (might be due to invalid IL or missing references)
			if (CustomFault.HasValue)
			{
				return String.Format("{0}", (object)CustomFault);
			}
			if (UserMessageDtc.HasValue)
			{
				Nullable<DTC_ID> userMessageDtc = UserMessageDtc;
				DTC_ID val = (DTC_ID)0;
				if (!((userMessageDtc.GetValueOrDefault() == val) & userMessageDtc.HasValue))
				{
					return String.Format("{0}", (object)UserMessageDtc);
				}
			}
			return String.Format("{0}", (object)LevelerFaultCustomType5.FaultNone);
		}

		static LevelerFaultType5()
		{
			List<DTC_ID> obj = new List<DTC_ID>();
			obj.Add((DTC_ID)1091);
			obj.Add((DTC_ID)1093);
			obj.Add((DTC_ID)1096);
			obj.Add((DTC_ID)1097);
			obj.Add((DTC_ID)1105);
			obj.Add((DTC_ID)1107);
			obj.Add((DTC_ID)1110);
			obj.Add((DTC_ID)1111);
			obj.Add((DTC_ID)1119);
			obj.Add((DTC_ID)1121);
			obj.Add((DTC_ID)1124);
			obj.Add((DTC_ID)1125);
			obj.Add((DTC_ID)1133);
			obj.Add((DTC_ID)1135);
			obj.Add((DTC_ID)1138);
			obj.Add((DTC_ID)1139);
			obj.Add((DTC_ID)1147);
			obj.Add((DTC_ID)1149);
			obj.Add((DTC_ID)1152);
			obj.Add((DTC_ID)1153);
			obj.Add((DTC_ID)1161);
			obj.Add((DTC_ID)1163);
			obj.Add((DTC_ID)1166);
			obj.Add((DTC_ID)1167);
			obj.Add((DTC_ID)1175);
			obj.Add((DTC_ID)1177);
			obj.Add((DTC_ID)1180);
			obj.Add((DTC_ID)1181);
			InstantAutoOperationStopDtcs = obj;
			List<DTC_ID> obj2 = new List<DTC_ID>();
			obj2.Add((DTC_ID)1856);
			obj2.Add((DTC_ID)1595);
			obj2.Add((DTC_ID)1091);
			obj2.Add((DTC_ID)1095);
			obj2.Add((DTC_ID)1093);
			obj2.Add((DTC_ID)1096);
			obj2.Add((DTC_ID)1097);
			obj2.Add((DTC_ID)1105);
			obj2.Add((DTC_ID)1109);
			obj2.Add((DTC_ID)1107);
			obj2.Add((DTC_ID)1110);
			obj2.Add((DTC_ID)1111);
			obj2.Add((DTC_ID)1119);
			obj2.Add((DTC_ID)1123);
			obj2.Add((DTC_ID)1121);
			obj2.Add((DTC_ID)1124);
			obj2.Add((DTC_ID)1125);
			obj2.Add((DTC_ID)1133);
			obj2.Add((DTC_ID)1137);
			obj2.Add((DTC_ID)1135);
			obj2.Add((DTC_ID)1138);
			obj2.Add((DTC_ID)1139);
			obj2.Add((DTC_ID)1147);
			obj2.Add((DTC_ID)1151);
			obj2.Add((DTC_ID)1149);
			obj2.Add((DTC_ID)1152);
			obj2.Add((DTC_ID)1153);
			obj2.Add((DTC_ID)1161);
			obj2.Add((DTC_ID)1165);
			obj2.Add((DTC_ID)1163);
			obj2.Add((DTC_ID)1166);
			obj2.Add((DTC_ID)1167);
			obj2.Add((DTC_ID)1175);
			obj2.Add((DTC_ID)1179);
			obj2.Add((DTC_ID)1177);
			obj2.Add((DTC_ID)1180);
			obj2.Add((DTC_ID)1181);
			obj2.Add((DTC_ID)1889);
			obj2.Add((DTC_ID)1888);
			ManualSuccessfulOperationDtcs = obj2;
		}
	}
	[Flags]
	public enum LevelerJacksAndAirBagType5 : Enum
	{
		None = 0,
		RightFrontJackExtend = 1,
		RightFrontJackRetract = 2,
		LeftFrontJackExtend = 4,
		LeftFrontJackRetract = 8,
		RightRearJackExtend = 0x10,
		RightRearJackRetract = 0x20,
		LeftRearJackExtend = 0x40,
		LeftRearJackRetract = 0x80,
		LeftMiddleJackExtend = 0x100,
		LeftMiddleJackRetract = 0x200,
		RightMiddleJackExtend = 0x400,
		RightMiddleJackRetract = 0x800,
		TongueJackExtend = 0x1000,
		TongueJackRetract = 0x2000,
		FillAirBag = 0x4000,
		DumpAirBag = 0x8000
	}
	public static class LevelerMovementAndAirBagsType5Extension : Object
	{
		public static LevelerJackDirection RightFrontJackAction(this LevelerJacksAndAirBagType5 jacksAndAirBag)
		{
			return ToJackAction(((Enum)(object)jacksAndAirBag).HasFlag((Enum)(object)LevelerJacksAndAirBagType5.RightFrontJackExtend), ((Enum)(object)jacksAndAirBag).HasFlag((Enum)(object)LevelerJacksAndAirBagType5.RightFrontJackRetract));
		}

		public static LevelerJackDirection LeftFrontJackAction(this LevelerJacksAndAirBagType5 jacksAndAirBag)
		{
			return ToJackAction(((Enum)(object)jacksAndAirBag).HasFlag((Enum)(object)LevelerJacksAndAirBagType5.LeftFrontJackExtend), ((Enum)(object)jacksAndAirBag).HasFlag((Enum)(object)LevelerJacksAndAirBagType5.LeftFrontJackRetract));
		}

		public static LevelerJackDirection RightRearJackAction(this LevelerJacksAndAirBagType5 jacksAndAirBag)
		{
			return ToJackAction(((Enum)(object)jacksAndAirBag).HasFlag((Enum)(object)LevelerJacksAndAirBagType5.RightRearJackExtend), ((Enum)(object)jacksAndAirBag).HasFlag((Enum)(object)LevelerJacksAndAirBagType5.RightRearJackRetract));
		}

		public static LevelerJackDirection LeftRearJackAction(this LevelerJacksAndAirBagType5 jacksAndAirBag)
		{
			return ToJackAction(((Enum)(object)jacksAndAirBag).HasFlag((Enum)(object)LevelerJacksAndAirBagType5.LeftRearJackExtend), ((Enum)(object)jacksAndAirBag).HasFlag((Enum)(object)LevelerJacksAndAirBagType5.LeftRearJackRetract));
		}

		public static LevelerJackDirection LeftMiddleJackAction(this LevelerJacksAndAirBagType5 jacksAndAirBag)
		{
			return ToJackAction(((Enum)(object)jacksAndAirBag).HasFlag((Enum)(object)LevelerJacksAndAirBagType5.LeftMiddleJackExtend), ((Enum)(object)jacksAndAirBag).HasFlag((Enum)(object)LevelerJacksAndAirBagType5.LeftMiddleJackRetract));
		}

		public static LevelerJackDirection RightMiddleJackAction(this LevelerJacksAndAirBagType5 jacksAndAirBag)
		{
			return ToJackAction(((Enum)(object)jacksAndAirBag).HasFlag((Enum)(object)LevelerJacksAndAirBagType5.RightMiddleJackExtend), ((Enum)(object)jacksAndAirBag).HasFlag((Enum)(object)LevelerJacksAndAirBagType5.RightMiddleJackRetract));
		}

		public static LevelerJackDirection TongueJackAction(this LevelerJacksAndAirBagType5 jacksAndAirBag)
		{
			return ToJackAction(((Enum)(object)jacksAndAirBag).HasFlag((Enum)(object)LevelerJacksAndAirBagType5.TongueJackExtend), ((Enum)(object)jacksAndAirBag).HasFlag((Enum)(object)LevelerJacksAndAirBagType5.TongueJackRetract));
		}

		public static LevelerAirbagAction AirBagAction(this LevelerJacksAndAirBagType5 jacksAndAirBag)
		{
			bool flag = ((Enum)(object)jacksAndAirBag).HasFlag((Enum)(object)LevelerJacksAndAirBagType5.FillAirBag);
			bool flag2 = ((Enum)(object)jacksAndAirBag).HasFlag((Enum)(object)LevelerJacksAndAirBagType5.DumpAirBag);
			if (flag && flag2)
			{
				return LevelerAirbagAction.Both;
			}
			if (flag)
			{
				return LevelerAirbagAction.Fill;
			}
			if (flag2)
			{
				return LevelerAirbagAction.Dump;
			}
			return LevelerAirbagAction.None;
		}

		public static LevelerJackDirection ToJackAction(bool extendingAllowed, bool retractingAllowed)
		{
			if (extendingAllowed && retractingAllowed)
			{
				return LevelerJackDirection.Both;
			}
			if (extendingAllowed)
			{
				return LevelerJackDirection.Extend;
			}
			if (retractingAllowed)
			{
				return LevelerJackDirection.Retract;
			}
			return LevelerJackDirection.None;
		}
	}
	public enum LevelerReadyTo : Enum
	{
		Arrive = 0,
		Depart = 1,
		Unknown = 255
	}
	public static class LevelerReadyToExtension : Object
	{
		public static bool IsArrival(this LevelerReadyTo readyTo)
		{
			return readyTo == LevelerReadyTo.Arrive;
		}

		public static bool IsDeparture(this LevelerReadyTo readyTo)
		{
			return readyTo == LevelerReadyTo.Depart;
		}
	}
	public class LogicalDeviceLevelerCapabilityType5 : LogicalDeviceCapability
	{
		private const int JackSupportedStartingBitIndex = 0;

		private const int JackConfigurationStartingBitIndex = 1;

		private const int JackDriveTypeBitIndex = 3;

		private const int ChassisConfigurationStartingBitIndex = 4;

		private const int MultipleSensorBitIndex = 6;

		private const byte JackPositionSupportedBitmask = 1;

		private const byte JackDriveTypeBitmask = 8;

		private const byte MultipleSensorBitmask = 64;

		private static readonly BitPositionValue JackConfigurationBitPosition = new BitPositionValue(6u, 0, 1);

		private static readonly BitPositionValue ChassisConfigurationBitPosition = new BitPositionValue(48u, 0, 1);

		public bool IsJackPositionSupported => (base.RawValue & 1) != 0;

		public bool HasMultipleSensors => (base.RawValue & 0x40) != 0;

		public LevelerConfigurationJack JackConfiguration
		{
			get
			{
				//IL_0000: Unknown result type (might be due to invalid IL or missing references)
				//IL_0005: Unknown result type (might be due to invalid IL or missing references)
				BitPositionValue jackConfigurationBitPosition = JackConfigurationBitPosition;
				return (LevelerConfigurationJack)((BitPositionValue)(ref jackConfigurationBitPosition)).DecodeValue((uint)base.RawValue);
			}
		}

		public LevelerConfigurationChassis Chassis
		{
			get
			{
				//IL_0000: Unknown result type (might be due to invalid IL or missing references)
				//IL_0005: Unknown result type (might be due to invalid IL or missing references)
				BitPositionValue chassisConfigurationBitPosition = ChassisConfigurationBitPosition;
				return (LevelerConfigurationChassis)((BitPositionValue)(ref chassisConfigurationBitPosition)).DecodeValue((uint)base.RawValue);
			}
		}

		public LevelerConfigurationJackDrive JackDrive
		{
			get
			{
				if ((base.RawValue & 8) != 0)
				{
					return LevelerConfigurationJackDrive.Electric;
				}
				return LevelerConfigurationJackDrive.Hydraulic;
			}
		}

		private LogicalDeviceLevelerCapabilityType5(byte rawCapability)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(new Nullable<byte>(rawCapability));
		}

		public LogicalDeviceLevelerCapabilityType5(Nullable<byte> rawCapability)
			: this(rawCapability.GetValueOrDefault())
		{
		}

		public LogicalDeviceLevelerCapabilityType5(LevelerConfigurationChassis chassisType, LevelerConfigurationJack jackType, bool isJackPositionSupported, LevelerConfigurationJackDrive jackDrive, bool hasMultipleSensors)
			: this(MakeRawCapability(chassisType, jackType, isJackPositionSupported, jackDrive, hasMultipleSensors))
		{
		}

		private static byte MakeRawCapability(LevelerConfigurationChassis chassisType, LevelerConfigurationJack jackType, bool isJackPositionSupported, LevelerConfigurationJackDrive jackDrive, bool hasMultipleSensors)
		{
			int num = (isJackPositionSupported ? 1 : 0);
			num |= (int)((uint)(jackType & LevelerConfigurationJack.SixJack) << 1);
			num |= (int)((uint)(chassisType & LevelerConfigurationChassis.TravelTrailer) << 4);
			if (jackDrive == LevelerConfigurationJackDrive.Electric)
			{
				num |= 8;
			}
			if (hasMultipleSensors)
			{
				num |= 0x40;
			}
			return (byte)num;
		}

		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsJackPositionSupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("JackConfiguration");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("Chassis");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("HasMultipleSensors");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("JackDrive");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}
	}
	public class LogicalDeviceLevelerStatusType5 : LogicalDeviceStatusPacketMutable, ILogicalDeviceStatus<LogicalDeviceLevelerType5StatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		private const string LogTag = "LogicalDeviceLevelerStatusType5";

		public const int MinimumStatusPacketSize = 8;

		private const int LevelerFlagsIndex = 0;

		private const int JackMovementFlagsStartIndex = 1;

		private const int AngleStartIndex = 3;

		private const int AngleXInfoStartIndex = 4;

		private const int AngleYInfoStartIndex = 5;

		private const int FaultMessageIndex = 6;

		private const int AngleResolutionValue = 32;

		private const BasicBitMask AutoHitchAvailableBitMask = (BasicBitMask)1;

		private const BasicBitMask AutoRetractAvailableBitMask = (BasicBitMask)2;

		private const BasicBitMask ArriveOrDepartBitMask = (BasicBitMask)4;

		private const BasicBitMask JacksFullyRetractedBitMask = (BasicBitMask)8;

		private const BasicBitMask JacksAreGroundedBitMask = (BasicBitMask)16;

		private const BasicBitMask ExtendedStatusActiveBitMask = (BasicBitMask)32;

		private const BasicBitMask CanOperationsBlockedBitMask = (BasicBitMask)64;

		private const BasicBitMask ActionTakingPlaceBitMask = (BasicBitMask)128;

		private const BasicBitMask BubbleLevelScaleData = (BasicBitMask)1;

		private const BasicBitMask ColdWeatherWarning = (BasicBitMask)1;

		private const BasicBitMask AirbagFillTime = (BasicBitMask)1;

		private const BasicBitMask AirbagPresent = (BasicBitMask)1;

		private static readonly BitPositionValue XAngleBitPosition = new BitPositionValue(240u, 3, 1);

		private static readonly BitPositionValue YAngleBitPosition = new BitPositionValue(15u, 3, 1);

		private static readonly BitPositionValue XAngleFractionBitPosition = new BitPositionValue(248u, 4, 1);

		private static readonly BitPositionValue XAngleSignBitPosition = new BitPositionValue(4u, 4, 1);

		private static readonly BitPositionValue YAngleFractionBitPosition = new BitPositionValue(248u, 5, 1);

		private static readonly BitPositionValue YAngleSignBitPosition = new BitPositionValue(4u, 5, 1);

		public bool IsAutoHitchAvailable
		{
			get
			{
				return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)1, 0);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)1, value, 0);
			}
		}

		public bool IsAutoRetractAvailable
		{
			get
			{
				return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)2, 0);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)2, value, 0);
			}
		}

		public LevelerReadyTo ReadyTo
		{
			get
			{
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return LevelerReadyTo.Unknown;
				}
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)4, 0))
				{
					return LevelerReadyTo.Arrive;
				}
				return LevelerReadyTo.Depart;
			}
			set
			{
				//IL_003a: Unknown result type (might be due to invalid IL or missing references)
				switch (value)
				{
				case LevelerReadyTo.Arrive:
					((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)4, false, 0);
					break;
				case LevelerReadyTo.Depart:
					((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)4, true, 0);
					break;
				default:
					throw new ArgumentOutOfRangeException("ReadyTo", String.Format("{0} not supported for setting!", (object)value));
				}
			}
		}

		public bool JacksFullyRetracted
		{
			get
			{
				return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)8, 0);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)8, value, 0);
			}
		}

		public bool JacksAreGrounded
		{
			get
			{
				return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)16, 0);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)16, value, 0);
			}
		}

		public bool ExtendedStatusActive
		{
			get
			{
				return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)32, 0);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)32, value, 0);
			}
		}

		public bool CanOperationsBlocked
		{
			get
			{
				return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)64, 0);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)64, value, 0);
			}
		}

		public bool ActionTakingPlace
		{
			get
			{
				return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)128, 0);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)128, value, 0);
			}
		}

		public LevelerJacksAndAirBagType5 JacksAndAirbagState
		{
			get
			{
				return (LevelerJacksAndAirBagType5)ArrayExtension.GetValueUInt16(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 1, (Endian)0);
			}
			set
			{
				ArrayExtension.SetValueUInt16(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, (ushort)(byte)value, 1, (Endian)0);
			}
		}

		public float XAngle
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_000c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				uint value = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(XAngleBitPosition);
				uint value2 = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(XAngleFractionBitPosition);
				float num = (float)value + (float)value2 / 32f;
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(XAngleSignBitPosition) != 0)
				{
					num = 0f - num;
				}
				return num;
			}
			set
			{
				//IL_002c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0038: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				float num = Math.Abs(value);
				uint num2 = (uint)Math.Truncate((double)num);
				uint num3 = (uint)Math.Truncate((double)((num - (float)num2) * 32f));
				int num4 = ((!(value >= 0f)) ? 1 : 0);
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue(num2, XAngleBitPosition);
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue(num3, XAngleFractionBitPosition);
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)num4, XAngleSignBitPosition);
			}
		}

		public float YAngle
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_000c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				uint value = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(YAngleBitPosition);
				uint value2 = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(YAngleFractionBitPosition);
				float num = (float)value + (float)value2 / 32f;
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(YAngleSignBitPosition) != 0)
				{
					num = 0f - num;
				}
				return num;
			}
			set
			{
				//IL_002c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0038: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				float num = Math.Abs(value);
				uint num2 = (uint)Math.Truncate((double)num);
				uint num3 = (uint)Math.Truncate((double)((num - (float)num2) * 32f));
				int num4 = ((!(value >= 0f)) ? 1 : 0);
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue(num2, YAngleBitPosition);
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue(num3, YAngleFractionBitPosition);
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)num4, YAngleSignBitPosition);
			}
		}

		private bool IsBubbleLevelScaleData
		{
			get
			{
				return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)1, 4);
			}
			set
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)1, value, 4);
			}
		}

		public bool ShowColdWeatherWarning
		{
			get
			{
				if (!IsBubbleLevelScaleData)
				{
					return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)1, 5);
				}
				return false;
			}
			set
			{
				if (!IsBubbleLevelScaleData)
				{
					((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)1, value, 5);
				}
			}
		}

		public AirbagFillTimeType AirbagsFillTime
		{
			get
			{
				if (!IsBubbleLevelScaleData)
				{
					if (!((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)1, 5))
					{
						return AirbagFillTimeType.Short;
					}
					return AirbagFillTimeType.Long;
				}
				return AirbagFillTimeType.Unknown;
			}
			set
			{
				if (!IsBubbleLevelScaleData)
				{
					((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)1, value == AirbagFillTimeType.Long, 5);
				}
			}
		}

		public bool AirbagsPresent
		{
			get
			{
				if (!IsBubbleLevelScaleData)
				{
					return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetBit((BasicBitMask)1, 4);
				}
				return false;
			}
			set
			{
				if (!IsBubbleLevelScaleData)
				{
					((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetBit((BasicBitMask)1, value, 4);
				}
			}
		}

		public DTC_ID FaultMessageDtc
		{
			get
			{
				return (DTC_ID)ArrayExtension.GetValueUInt16(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 6, (Endian)0);
			}
			set
			{
				//IL_0006: Unknown result type (might be due to invalid IL or missing references)
				//IL_000e: Expected I4, but got Unknown
				ArrayExtension.SetValueUInt16(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, (ushort)(int)value, 6, (Endian)0);
			}
		}

		public LogicalDeviceLevelerStatusType5()
			: base(8u)
		{
		}

		public LogicalDeviceLevelerStatusType5(LogicalDeviceLevelerStatusType5 original)
			: base(8u)
		{
			byte[] array = ((LogicalDeviceDataPacketMutableDoubleBuffer)original).CopyCurrentData();
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(array, array.Length, false);
		}

		public LogicalDeviceLevelerType5StatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceLevelerType5StatusSerializable(this);
		}
	}
	public class LogicalDeviceLevelerType5 : LogicalDeviceWithStatusExtendedMultiplexed<LogicalDeviceLevelerStatusType5, ILogicalDeviceLevelerStatusExtendedType5, LogicalDeviceLevelerStatusExtendedType5Kind, LogicalDeviceLevelerCapabilityType5>, ILogicalDeviceDirectLevelerType5, ILogicalDeviceLevelerType5, ILevelerType5, ILogicalDeviceLeveler, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IDevicesActivation, ILogicalDeviceVoltageMeasurementBatteryPid, ILogicalDeviceVoltageMeasurementBattery, ILogicalDeviceVoltageMeasurement, ILogicalDeviceReadVoltageMeasurement, IReadVoltageMeasurement, ILogicalDeviceWithStatusAlerts, ILogicalDeviceWithStatus<LogicalDeviceLevelerStatusType5>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusExtendedMultiplexed<ILogicalDeviceLevelerStatusExtendedType5, LogicalDeviceLevelerStatusExtendedType5Kind>, ILogicalDeviceWithStatusExtendedMultiplexed, ILogicalDeviceWithStatusExtended, ILogicalDeviceWithCapability<LogicalDeviceLevelerCapabilityType5>, ILogicalDeviceFirmwareUpdateDevice, ILogicalDeviceJumpToBootloader, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
		[Flags]
		public enum FeatureSupport : Enum
		{
			AutoHitch = 1,
			RetractFrontJacks = 2,
			RetractRearJacks = 4,
			ManualAirSuspensionControl = 8,
			RfRemotePairing = 0x10,
			ReHomeJackPositions = 0x20,
			All = 0x3F,
			Unknown = 0x800000
		}

		public enum OperationInProgress : Enum
		{
			None,
			AutoLeveling,
			AutoHitching,
			AutoRetract,
			AutoExtend,
			ManualMoving,
			ManualUnrestrictedMoving,
			SavingSetPoint
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass116_0 : Object
		{
			public Stopwatch operationRunTimeBetweenAcks;

			public Func<ILevelerAutoStepsProgressExtend, LevelerAutoOperationAck> progressAck;

			public bool operationCompleted;

			public LevelerAutoOperationAck operationAck;

			internal void <PerformOperationAutoExtendAsync>b__0(ILevelerAutoStepsProgress progress)
			{
				//IL_00a8: Expected O, but got Unknown
				if (operationCompleted)
				{
					return;
				}
				switch (operationAck)
				{
				case LevelerAutoOperationAck.Cancel:
					TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Operation Progress Ignored because it was previously canceled {0}", (object)progress), Array.Empty<object>());
					break;
				default:
					TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Operation Unknown Ack {0}", (object)operationAck), Array.Empty<object>());
					break;
				case LevelerAutoOperationAck.Continue:
					if (progress is ILevelerAutoStepsProgressExtend levelerAutoStepsProgressExtend)
					{
						try
						{
							operationRunTimeBetweenAcks.Restart();
							operationAck = progressAck.Invoke(levelerAutoStepsProgressExtend);
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Operation Progress ACK {0}: {1}", (object)operationAck, (object)progress), Array.Empty<object>());
						}
						catch (Exception ex)
						{
							Exception ex2 = ex;
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Operation Progress ACK Auto Cancel because of FAILURE {0}: {1}", (object)progress, (object)ex2.Message), Array.Empty<object>());
							operationAck = LevelerAutoOperationAck.Cancel;
							break;
						}
					}
					switch (progress.Status)
					{
					case LevelerAutoOperationStatus.CompletedSuccess:
						TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Extend Operation completed: {0}", (object)progress), Array.Empty<object>());
						operationCompleted = true;
						break;
					default:
						TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Extend Progress status, canceling the operation {0}", (object)progress.Status), Array.Empty<object>());
						operationAck = LevelerAutoOperationAck.Cancel;
						break;
					case LevelerAutoOperationStatus.Idle:
					case LevelerAutoOperationStatus.InProgress:
						break;
					}
					break;
				}
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass117_0 : Object
		{
			public Stopwatch operationRunTimeBetweenAcks;

			public Func<ILevelerAutoStepsProgressHitch, LevelerAutoOperationAck> progressAck;

			public bool operationCompleted;

			public LevelerAutoOperationAck operationAck;

			internal void <PerformOperationAutoHitchAsync>b__0(ILevelerAutoStepsProgress progress)
			{
				//IL_00a8: Expected O, but got Unknown
				if (operationCompleted)
				{
					return;
				}
				switch (operationAck)
				{
				case LevelerAutoOperationAck.Cancel:
					TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Hitch Operation Progress Ignored because it was previously canceled {0}", (object)progress), Array.Empty<object>());
					break;
				default:
					TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Hitch Operation Unknown Ack {0}", (object)operationAck), Array.Empty<object>());
					break;
				case LevelerAutoOperationAck.Continue:
					if (progress is ILevelerAutoStepsProgressHitch levelerAutoStepsProgressHitch)
					{
						try
						{
							operationRunTimeBetweenAcks.Restart();
							operationAck = progressAck.Invoke(levelerAutoStepsProgressHitch);
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Hitch Operation Progress ACK {0}: {1}", (object)operationAck, (object)progress), Array.Empty<object>());
						}
						catch (Exception ex)
						{
							Exception ex2 = ex;
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Hitch Operation Progress ACK Auto Cancel because of FAILURE {0}: {1}", (object)progress, (object)ex2.Message), Array.Empty<object>());
							operationAck = LevelerAutoOperationAck.Cancel;
							break;
						}
					}
					switch (progress.Status)
					{
					case LevelerAutoOperationStatus.CompletedSuccess:
						TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Hitch Operation completed: {0}", (object)progress), Array.Empty<object>());
						operationCompleted = true;
						break;
					default:
						TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Progress status, canceling the operation {0}", (object)progress.Status), Array.Empty<object>());
						operationAck = LevelerAutoOperationAck.Cancel;
						break;
					case LevelerAutoOperationStatus.Idle:
					case LevelerAutoOperationStatus.InProgress:
						break;
					}
					break;
				}
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass118_0 : Object
		{
			public Stopwatch operationRunTimeBetweenAcks;

			public Func<ILevelerAutoStepsProgressLevel, LevelerAutoOperationAck> progressAck;

			public bool operationCompleted;

			public LevelerAutoOperationAck operationAck;

			internal void <PerformOperationAutoLevelAsync>b__0(ILevelerAutoStepsProgress progress)
			{
				//IL_00a8: Expected O, but got Unknown
				if (operationCompleted)
				{
					return;
				}
				switch (operationAck)
				{
				case LevelerAutoOperationAck.Cancel:
					TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Level Operation Progress Ignored because it was previously canceled {0}", (object)progress), Array.Empty<object>());
					break;
				default:
					TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Level Operation Unknown Ack {0}", (object)operationAck), Array.Empty<object>());
					break;
				case LevelerAutoOperationAck.Continue:
					if (progress is ILevelerAutoStepsProgressLevel levelerAutoStepsProgressLevel)
					{
						try
						{
							operationRunTimeBetweenAcks.Restart();
							operationAck = progressAck.Invoke(levelerAutoStepsProgressLevel);
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Level Operation Progress ACK {0}: {1}", (object)operationAck, (object)progress), Array.Empty<object>());
						}
						catch (Exception ex)
						{
							Exception ex2 = ex;
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Level Operation Progress ACK Auto Cancel because of FAILURE {0}: {1}", (object)progress, (object)ex2.Message), Array.Empty<object>());
							operationAck = LevelerAutoOperationAck.Cancel;
							break;
						}
					}
					switch (progress.Status)
					{
					case LevelerAutoOperationStatus.CompletedSuccess:
						TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Level Operation completed: {0}", (object)progress), Array.Empty<object>());
						operationCompleted = true;
						break;
					default:
						TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Progress status, canceling the operation {0}", (object)progress.Status), Array.Empty<object>());
						operationAck = LevelerAutoOperationAck.Cancel;
						break;
					case LevelerAutoOperationStatus.Idle:
					case LevelerAutoOperationStatus.InProgress:
						break;
					}
					break;
				}
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass119_0 : Object
		{
			public Stopwatch operationRunTimeBetweenAcks;

			public Func<ILevelerAutoStepsProgressRetract, LevelerAutoOperationAck> progressAck;

			public bool operationCompleted;

			public LevelerAutoOperationAck operationAck;

			internal void <PerformOperationAutoRetractAsync>b__0(ILevelerAutoStepsProgress progress)
			{
				//IL_00a8: Expected O, but got Unknown
				if (operationCompleted)
				{
					return;
				}
				switch (operationAck)
				{
				case LevelerAutoOperationAck.Cancel:
					TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Operation Progress Ignored because it was previously canceled {0}", (object)progress), Array.Empty<object>());
					break;
				default:
					TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Operation Unknown Ack {0}", (object)operationAck), Array.Empty<object>());
					break;
				case LevelerAutoOperationAck.Continue:
					if (progress is ILevelerAutoStepsProgressRetract levelerAutoStepsProgressRetract)
					{
						try
						{
							operationRunTimeBetweenAcks.Restart();
							operationAck = progressAck.Invoke(levelerAutoStepsProgressRetract);
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Operation Progress ACK {0}: {1}", (object)operationAck, (object)progress), Array.Empty<object>());
						}
						catch (Exception ex)
						{
							Exception ex2 = ex;
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Operation Progress ACK Auto Cancel because of FAILURE {0}: {1}", (object)progress, (object)ex2.Message), Array.Empty<object>());
							operationAck = LevelerAutoOperationAck.Cancel;
							break;
						}
					}
					switch (progress.Status)
					{
					case LevelerAutoOperationStatus.CompletedSuccess:
						TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Retract Operation completed: {0}", (object)progress), Array.Empty<object>());
						operationCompleted = true;
						break;
					default:
						TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Retract Progress status, canceling the operation {0}", (object)progress.Status), Array.Empty<object>());
						operationAck = LevelerAutoOperationAck.Cancel;
						break;
					case LevelerAutoOperationStatus.Idle:
					case LevelerAutoOperationStatus.InProgress:
						break;
					}
					break;
				}
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass122_0 : Object
		{
			public Stopwatch operationRunTimeBetweenAcks;

			public Func<LevelerJacksAndAirBagType5, LevelerAutoOperationAck> progressAck;

			public LevelerAutoOperationAck operationAck;

			internal void <PerformOperationManualAsync>b__0(LevelerJacksAndAirBagType5 progress)
			{
				switch (operationAck)
				{
				case LevelerAutoOperationAck.Cancel:
					TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Manual Movement Operation Progress Ignored because it was previously canceled {0}", (object)progress), Array.Empty<object>());
					break;
				default:
					TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Manual Movement Operation Unknown Ack {0}", (object)operationAck), Array.Empty<object>());
					break;
				case LevelerAutoOperationAck.Continue:
					operationRunTimeBetweenAcks.Restart();
					operationAck = progressAck.Invoke(progress);
					break;
				}
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass123_0 : Object
		{
			public Stopwatch operationRunTimeBetweenAcks;

			public Func<LevelerJacksAndAirBagType5, LevelerAutoOperationAck> progressAck;

			public LevelerAutoOperationAck operationAck;

			internal void <PerformOperationManualUnrestrictedAsync>b__0(LevelerJacksAndAirBagType5 progress)
			{
				switch (operationAck)
				{
				case LevelerAutoOperationAck.Cancel:
					TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Unrestricted Manual Movement Operation Progress Ignored because it was previously canceled {0}", (object)progress), Array.Empty<object>());
					break;
				default:
					TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Unrestricted Manual Movement Operation Unknown Ack {0}", (object)operationAck), Array.Empty<object>());
					break;
				case LevelerAutoOperationAck.Continue:
					operationRunTimeBetweenAcks.Restart();
					operationAck = progressAck.Invoke(progress);
					break;
				}
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass124_0 : Object
		{
			public Stopwatch operationRunTimeBetweenAcks;

			public Func<ILevelerAutoStepsProgressSetPointSet, LevelerAutoOperationAck> progressAck;

			public bool operationCompleted;

			public LevelerAutoOperationAck operationAck;

			internal void <PerformOperationSetPointSetAsync>b__0(ILevelerAutoStepsProgress progress)
			{
				//IL_00a8: Expected O, but got Unknown
				if (operationCompleted)
				{
					return;
				}
				switch (operationAck)
				{
				case LevelerAutoOperationAck.Cancel:
					TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Setpoint Set Operation Progress Ignored because it was previously canceled {0}", (object)progress), Array.Empty<object>());
					break;
				default:
					TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Setpoint Set Operation Unknown Ack {0}", (object)operationAck), Array.Empty<object>());
					break;
				case LevelerAutoOperationAck.Continue:
					if (progress is ILevelerAutoStepsProgressSetPointSet levelerAutoStepsProgressSetPointSet)
					{
						try
						{
							operationRunTimeBetweenAcks.Restart();
							operationAck = progressAck.Invoke(levelerAutoStepsProgressSetPointSet);
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Setpoint Set Operation Progress ACK {0}: {1}", (object)operationAck, (object)progress), Array.Empty<object>());
						}
						catch (Exception ex)
						{
							Exception ex2 = ex;
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Setpoint Set Operation Progress ACK Auto Cancel because of FAILURE {0}: {1}", (object)progress, (object)ex2.Message), Array.Empty<object>());
							operationAck = LevelerAutoOperationAck.Cancel;
							break;
						}
					}
					switch (progress.Status)
					{
					case LevelerAutoOperationStatus.CompletedSuccess:
						TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Set Point Set Operation completed: {0}", (object)progress), Array.Empty<object>());
						operationCompleted = true;
						break;
					default:
						TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Progress status, canceling the operation {0}", (object)progress.Status), Array.Empty<object>());
						operationAck = LevelerAutoOperationAck.Cancel;
						break;
					case LevelerAutoOperationStatus.Idle:
					case LevelerAutoOperationStatus.InProgress:
						break;
					}
					break;
				}
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass74_0 : Object
		{
			public BaseObservableCollection<ValueTuple<LevelerAutoOperationStep, int>> collection;

			public IEnumerable<LevelerAutoOperationStep> autoStepsList;

			internal void <UpdateAutoStepsCollectionWithLatestDetailsAsync>b__0()
			{
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				//IL_000c: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				SuppressEventsDisposable<ValueTuple<LevelerAutoOperationStep, int>> val = collection.SuppressEvents(false);
				try
				{
					((Collection<ValueTuple<LevelerAutoOperationStep, int>>)(object)collection).Clear();
					int num = 0;
					IEnumerator<LevelerAutoOperationStep> enumerator = autoStepsList.GetEnumerator();
					try
					{
						while (((IEnumerator)enumerator).MoveNext())
						{
							LevelerAutoOperationStep current = enumerator.Current;
							((Collection<ValueTuple<LevelerAutoOperationStep, int>>)(object)collection).Add(new ValueTuple<LevelerAutoOperationStep, int>(current, num++));
						}
					}
					finally
					{
						if (enumerator != null)
						{
							((IDisposable)enumerator).Dispose();
						}
					}
				}
				finally
				{
					((IDisposable)val/*cast due to .constrained prefix*/).Dispose();
				}
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <GetAutoStepDetailsAsync>d__75 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<IEnumerable<LevelerAutoOperationStep>> <>t__builder;

			public LogicalDeviceLevelerType5 <>4__this;

			public CancellationToken cancelToken;

			public int expectedStepsCount;

			private List<LevelerAutoOperationStep> <autoStepsList>5__2;

			private LogicalDevicePid <currentPid>5__3;

			private int <index>5__4;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_01d0: Expected O, but got Unknown
				//IL_00d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e1: Unknown result type (might be due to invalid IL or missing references)
				//IL_002e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Invalid comparison between Unknown and I4
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_013c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				//IL_01bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_0095: Unknown result type (might be due to invalid IL or missing references)
				//IL_009f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_0084: Unknown result type (might be due to invalid IL or missing references)
				//IL_008e: Expected O, but got Unknown
				//IL_00b9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bb: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5 logicalDeviceLevelerType = <>4__this;
				IEnumerable<LevelerAutoOperationStep> result;
				try
				{
					if (num != 0)
					{
						if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType).IsDisposed)
						{
							throw new ObjectDisposedException(((MemberInfo)((Object)logicalDeviceLevelerType).GetType()).Name);
						}
						if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType).ActiveConnection != 1)
						{
							throw new PhysicalDeviceNotFoundException("ILogicalDeviceDirectLevelerType5", "");
						}
						<autoStepsList>5__2 = new List<LevelerAutoOperationStep>();
						<currentPid>5__3 = null;
						<index>5__4 = 0;
						goto IL_015d;
					}
					TaskAwaiter<ulong> val = <>u__1;
					<>u__1 = default(TaskAwaiter<ulong>);
					num = (<>1__state = -1);
					goto IL_00f0;
					IL_015d:
					if (<index>5__4 < expectedStepsCount && <index>5__4 < AutoStepsDetailPidList.Count * 6)
					{
						if (<index>5__4 % 6 == 0)
						{
							<currentPid>5__3 = new LogicalDevicePid((ILogicalDevice)(object)logicalDeviceLevelerType, AutoStepsDetailPidList[<index>5__4 / 6], (LogicalDeviceSessionType)0, (Func<ulong, bool>)null);
						}
						val = <currentPid>5__3.ReadValueAsync(cancelToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <GetAutoStepDetailsAsync>d__75>(ref val, ref this);
							return;
						}
						goto IL_00f0;
					}
					if (<autoStepsList>5__2.Count != expectedStepsCount)
					{
						throw new ArgumentException(String.Format("Complete step data not available {0} of {1} found.", (object)<autoStepsList>5__2.Count, (object)expectedStepsCount), "expectedStepsCount");
					}
					result = (IEnumerable<LevelerAutoOperationStep>)(object)<autoStepsList>5__2;
					goto end_IL_000e;
					IL_00f0:
					ulong result2 = val.GetResult();
					int num2 = 5 - <index>5__4 % 6;
					LevelerAutoOperationStep levelerAutoOperationStep = (LevelerAutoOperationStep)((result2 >> num2 * 8) & 0xFF);
					if (levelerAutoOperationStep == LevelerAutoOperationStep.None)
					{
						throw new ArgumentException(String.Format("Invalid (no step) defined for step {0} of {1}", (object)<index>5__4, (object)expectedStepsCount), "expectedStepsCount");
					}
					<autoStepsList>5__2.Add(levelerAutoOperationStep);
					<index>5__4++;
					goto IL_015d;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<autoStepsList>5__2 = null;
					<currentPid>5__3 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<autoStepsList>5__2 = null;
				<currentPid>5__3 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformOperationAutoExtendAsync>d__116 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public Func<ILevelerAutoStepsProgressExtend, LevelerAutoOperationAck> progressAck;

			public LevelerAutoOperationExtendJacks extendJacks;

			public LogicalDeviceLevelerType5 <>4__this;

			private <>c__DisplayClass116_0 <>8__1;

			public CancellationToken cancellationToken;

			private object <>7__wrap1;

			private int <>7__wrap2;

			private LogicalDeviceLevelerCommandAutoExtendType5 <command>5__4;

			private int <commandCount>5__5;

			private int <errorCount>5__6;

			private bool <wasOperationStarted>5__7;

			private ConfiguredTaskAwaiter<LevelerCommandResultType5> <>u__1;

			private ConfiguredTaskAwaiter <>u__2;

			private TaskAwaiter<LevelerCommandResultType5> <>u__3;

			private void MoveNext()
			{
				//IL_02de: Expected O, but got Unknown
				//IL_049e: Expected O, but got Unknown
				//IL_04ce: Expected O, but got Unknown
				//IL_05b8: Expected O, but got Unknown
				//IL_04ea: Unknown result type (might be due to invalid IL or missing references)
				//IL_04f4: Unknown result type (might be due to invalid IL or missing references)
				//IL_04f9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0529: Unknown result type (might be due to invalid IL or missing references)
				//IL_052e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0536: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Expected O, but got Unknown
				//IL_050e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0510: Unknown result type (might be due to invalid IL or missing references)
				//IL_0368: Unknown result type (might be due to invalid IL or missing references)
				//IL_0373: Unknown result type (might be due to invalid IL or missing references)
				//IL_0378: Unknown result type (might be due to invalid IL or missing references)
				//IL_037c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0381: Unknown result type (might be due to invalid IL or missing references)
				//IL_0396: Unknown result type (might be due to invalid IL or missing references)
				//IL_0398: Unknown result type (might be due to invalid IL or missing references)
				//IL_03b1: Unknown result type (might be due to invalid IL or missing references)
				//IL_03b6: Unknown result type (might be due to invalid IL or missing references)
				//IL_03be: Unknown result type (might be due to invalid IL or missing references)
				//IL_0287: Unknown result type (might be due to invalid IL or missing references)
				//IL_028c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0294: Unknown result type (might be due to invalid IL or missing references)
				//IL_023e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0249: Unknown result type (might be due to invalid IL or missing references)
				//IL_024e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0252: Unknown result type (might be due to invalid IL or missing references)
				//IL_0257: Unknown result type (might be due to invalid IL or missing references)
				//IL_008d: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ae: Unknown result type (might be due to invalid IL or missing references)
				//IL_026c: Unknown result type (might be due to invalid IL or missing references)
				//IL_026e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0177: Unknown result type (might be due to invalid IL or missing references)
				//IL_017d: Invalid comparison between Unknown and I4
				//IL_0170: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d6: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5 logicalDeviceLevelerType = <>4__this;
				try
				{
					TaskAwaiter<LevelerCommandResultType5> val;
					if ((uint)num > 1u)
					{
						if (num == 2)
						{
							val = <>u__3;
							<>u__3 = default(TaskAwaiter<LevelerCommandResultType5>);
							num = (<>1__state = -1);
							goto IL_0545;
						}
						<>8__1 = new <>c__DisplayClass116_0();
						<>8__1.progressAck = progressAck;
						<>8__1.operationRunTimeBetweenAcks = new Stopwatch();
						<>7__wrap1 = null;
						<>7__wrap2 = 0;
					}
					bool flag;
					object obj;
					try
					{
						_ = 1;
						try
						{
							if (num == 0)
							{
								goto IL_022d;
							}
							if (num != 1)
							{
								if (extendJacks == LevelerAutoOperationExtendJacks.Unknown)
								{
									throw new ArgumentOutOfRangeException("extendJacks", String.Format("Zero Point specified {0} not supported for operation", (object)extendJacks));
								}
								obj = logicalDeviceLevelerType._lock;
								flag = false;
								try
								{
									Monitor.Enter(obj, ref flag);
									if (logicalDeviceLevelerType.CurrentOperation != OperationInProgress.None)
									{
										throw new LevelerAutoOperationInProgressException(String.Format("{0} in progress", (object)logicalDeviceLevelerType.CurrentOperation));
									}
									logicalDeviceLevelerType.CurrentOperation = OperationInProgress.AutoExtend;
								}
								finally
								{
									if (num < 0 && flag)
									{
										Monitor.Exit(obj);
									}
								}
								<>8__1.operationAck = LevelerAutoOperationAck.Continue;
								<>8__1.operationRunTimeBetweenAcks.Restart();
								<>8__1.operationCompleted = false;
								logicalDeviceLevelerType._currentAutoOperationAction = delegate(ILevelerAutoStepsProgress progress)
								{
									//IL_00a8: Expected O, but got Unknown
									if (!<>8__1.operationCompleted)
									{
										switch (<>8__1.operationAck)
										{
										case LevelerAutoOperationAck.Cancel:
											TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Operation Progress Ignored because it was previously canceled {0}", (object)progress), Array.Empty<object>());
											break;
										default:
											TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Operation Unknown Ack {0}", (object)<>8__1.operationAck), Array.Empty<object>());
											break;
										case LevelerAutoOperationAck.Continue:
											if (progress is ILevelerAutoStepsProgressExtend levelerAutoStepsProgressExtend)
											{
												try
												{
													<>8__1.operationRunTimeBetweenAcks.Restart();
													<>8__1.operationAck = <>8__1.progressAck.Invoke(levelerAutoStepsProgressExtend);
													TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Operation Progress ACK {0}: {1}", (object)<>8__1.operationAck, (object)progress), Array.Empty<object>());
												}
												catch (Exception ex14)
												{
													Exception ex15 = ex14;
													TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Operation Progress ACK Auto Cancel because of FAILURE {0}: {1}", (object)progress, (object)ex15.Message), Array.Empty<object>());
													<>8__1.operationAck = LevelerAutoOperationAck.Cancel;
													break;
												}
											}
											switch (progress.Status)
											{
											case LevelerAutoOperationStatus.CompletedSuccess:
												TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Extend Operation completed: {0}", (object)progress), Array.Empty<object>());
												<>8__1.operationCompleted = true;
												break;
											default:
												TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Extend Progress status, canceling the operation {0}", (object)progress.Status), Array.Empty<object>());
												<>8__1.operationAck = LevelerAutoOperationAck.Cancel;
												break;
											case LevelerAutoOperationStatus.Idle:
											case LevelerAutoOperationStatus.InProgress:
												break;
											}
											break;
										}
									}
								};
								<command>5__4 = LogicalDeviceLevelerCommandType5.MakeAutoExtendCommand(extendJacks);
								<commandCount>5__5 = 0;
								<errorCount>5__6 = 0;
								<wasOperationStarted>5__7 = false;
								goto IL_03d4;
							}
							ConfiguredTaskAwaiter val2 = <>u__2;
							<>u__2 = default(ConfiguredTaskAwaiter);
							num = (<>1__state = -1);
							goto IL_03cd;
							IL_03cd:
							((ConfiguredTaskAwaiter)(ref val2)).GetResult();
							goto IL_03d4;
							IL_03d4:
							if (!((CancellationToken)(ref cancellationToken)).IsCancellationRequested && !<>8__1.operationCompleted)
							{
								if (<>8__1.operationAck != LevelerAutoOperationAck.Continue)
								{
									throw new LevelerAutoOperationStoppedException();
								}
								if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType).IsDisposed)
								{
									throw new ObjectDisposedException("ILogicalDeviceDirectLevelerType5");
								}
								if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType).ActiveConnection != 1)
								{
									throw new LevelerNoActiveConnectionException();
								}
								if (!<>8__1.operationRunTimeBetweenAcks.IsRunning)
								{
									throw new LevelerAutoOperationFailedException((CommandResult)1, new LevelerFaultType5(LevelerFaultCustomType5.FaultOperationCanceled));
								}
								if (<>8__1.operationRunTimeBetweenAcks.ElapsedMilliseconds >= 900000)
								{
									throw new TimeoutException(String.Format("Auto Extend operation timed out as an ACK was not able to be sent within {0}", (object)900000));
								}
								if (!logicalDeviceLevelerType.CommandSessionActivated)
								{
									throw new LevelerSessionActivationRequiredException();
								}
								if (logicalDeviceLevelerType.DeviceStatusExtendedAutoStep.OperationCodeProgress != LevelerOperationCodeProgress.None)
								{
									<wasOperationStarted>5__7 = true;
								}
								else if (((logicalDeviceLevelerType.DeviceStatusExtendedAutoStep.OperationCodeProgress == LevelerOperationCodeProgress.None) & <wasOperationStarted>5__7) && !<>8__1.operationCompleted)
								{
									throw new LevelerSessionEndedException();
								}
								goto IL_022d;
							}
							((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Extend Operation Completed", Array.Empty<object>());
							<command>5__4 = null;
							goto end_IL_0059;
							IL_022d:
							try
							{
								ConfiguredTaskAwaiter<LevelerCommandResultType5> val3;
								if (num != 0)
								{
									val3 = logicalDeviceLevelerType.SendCommandAsync(<command>5__4, <commandCount>5__5, cancellationToken).ConfigureAwait(false).GetAwaiter();
									if (!val3.IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val3;
										((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<LevelerCommandResultType5>, <PerformOperationAutoExtendAsync>d__116>(ref val3, ref this);
										return;
									}
								}
								else
								{
									val3 = <>u__1;
									<>u__1 = default(ConfiguredTaskAwaiter<LevelerCommandResultType5>);
									num = (<>1__state = -1);
								}
								LevelerCommandResultType5 result = val3.GetResult();
								if ((int)result.CommandResult != 0)
								{
									throw new LevelerAutoOperationFailedException(result.CommandResult, result.Fault);
								}
								<errorCount>5__6 = 0;
							}
							catch (LevelerSessionEndedException)
							{
								throw;
							}
							catch (TimeoutException)
							{
								throw;
							}
							catch (OperationCanceledException)
							{
								throw;
							}
							catch (Exception ex4)
							{
								Exception ex5 = ex4;
								<errorCount>5__6++;
								TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Auto Extend Operation SendCommand failed, reason: ", ex5.Message), Array.Empty<object>());
								if (<errorCount>5__6 > 5)
								{
									throw new LevelerAutoOperationFailedException((CommandResult)7, new LevelerFaultType5(LevelerFaultCustomType5.FaultCommandUnknown), ex5);
								}
							}
							<commandCount>5__5++;
							if (<>8__1.operationAck != LevelerAutoOperationAck.Continue)
							{
								throw new LevelerAutoOperationStoppedException();
							}
							if (!<>8__1.operationCompleted)
							{
								ConfiguredTaskAwaitable val4 = Task.Delay(250, cancellationToken).ConfigureAwait(false);
								val2 = ((ConfiguredTaskAwaitable)(ref val4)).GetAwaiter();
								if (!((ConfiguredTaskAwaiter)(ref val2)).IsCompleted)
								{
									num = (<>1__state = 1);
									<>u__2 = val2;
									((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter, <PerformOperationAutoExtendAsync>d__116>(ref val2, ref this);
									return;
								}
								goto IL_03cd;
							}
							goto IL_03d4;
							end_IL_0059:;
						}
						catch (LevelerSessionEndedException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Extend Operation Stopped because session was ended", Array.Empty<object>());
							throw;
						}
						catch (OperationCanceledException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Extend Operation Canceled", Array.Empty<object>());
							throw;
						}
						catch (TimeoutException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Extend Operation Timeout", Array.Empty<object>());
							throw;
						}
						catch (LevelerAutoOperationStoppedException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Extend Operation Stopped", Array.Empty<object>());
							throw;
						}
						catch (LevelerException ex10)
						{
							TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Auto Extend Operation Error ", ((Exception)ex10).Message), Array.Empty<object>());
							throw;
						}
						catch (Exception ex11)
						{
							Exception ex12 = ex11;
							TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Auto Extend Operation Error ", ex12.Message), Array.Empty<object>());
							throw new LevelerException("Unable to perform Auto Level", ex12);
						}
					}
					catch (Object obj2)
					{
						obj = (object)obj2;
						<>7__wrap1 = obj;
					}
					if (<>8__1.operationRunTimeBetweenAcks.IsRunning)
					{
						val = logicalDeviceLevelerType.TryPerformOperationStopAsync(CancellationToken.None).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__3 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<LevelerCommandResultType5>, <PerformOperationAutoExtendAsync>d__116>(ref val, ref this);
							return;
						}
						goto IL_0545;
					}
					goto IL_054d;
					IL_0545:
					val.GetResult();
					goto IL_054d;
					IL_054d:
					obj = logicalDeviceLevelerType._lock;
					flag = false;
					try
					{
						Monitor.Enter(obj, ref flag);
						if (<>8__1.operationRunTimeBetweenAcks.IsRunning)
						{
							logicalDeviceLevelerType.CurrentOperation = OperationInProgress.None;
							logicalDeviceLevelerType._currentAutoOperationAction = null;
						}
					}
					finally
					{
						if (num < 0 && flag)
						{
							Monitor.Exit(obj);
						}
					}
					obj = <>7__wrap1;
					if (obj != null)
					{
						ExceptionDispatchInfo.Capture((Exception)(((obj is Exception) ? obj : null) ?? throw obj)).Throw();
					}
					<>7__wrap1 = null;
				}
				catch (Exception ex13)
				{
					Exception exception = ex13;
					<>1__state = -2;
					<>8__1 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformOperationAutoHitchAsync>d__117 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public Func<ILevelerAutoStepsProgressHitch, LevelerAutoOperationAck> progressAck;

			public LogicalDeviceLevelerType5 <>4__this;

			private <>c__DisplayClass117_0 <>8__1;

			public CancellationToken cancellationToken;

			private object <>7__wrap1;

			private int <>7__wrap2;

			private LogicalDeviceLevelerCommandAutoHitchType5 <command>5__4;

			private int <commandCount>5__5;

			private int <errorCount>5__6;

			private bool <wasOperationStarted>5__7;

			private ConfiguredTaskAwaiter<LevelerCommandResultType5> <>u__1;

			private ConfiguredTaskAwaiter <>u__2;

			private TaskAwaiter<LevelerCommandResultType5> <>u__3;

			private void MoveNext()
			{
				//IL_02ab: Expected O, but got Unknown
				//IL_0476: Expected O, but got Unknown
				//IL_04a6: Expected O, but got Unknown
				//IL_0590: Expected O, but got Unknown
				//IL_04c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_04cc: Unknown result type (might be due to invalid IL or missing references)
				//IL_04d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0501: Unknown result type (might be due to invalid IL or missing references)
				//IL_0506: Unknown result type (might be due to invalid IL or missing references)
				//IL_050e: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Expected O, but got Unknown
				//IL_04e6: Unknown result type (might be due to invalid IL or missing references)
				//IL_04e8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0340: Unknown result type (might be due to invalid IL or missing references)
				//IL_034b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0350: Unknown result type (might be due to invalid IL or missing references)
				//IL_0354: Unknown result type (might be due to invalid IL or missing references)
				//IL_0359: Unknown result type (might be due to invalid IL or missing references)
				//IL_036e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0370: Unknown result type (might be due to invalid IL or missing references)
				//IL_0389: Unknown result type (might be due to invalid IL or missing references)
				//IL_038e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0396: Unknown result type (might be due to invalid IL or missing references)
				//IL_0254: Unknown result type (might be due to invalid IL or missing references)
				//IL_0259: Unknown result type (might be due to invalid IL or missing references)
				//IL_0261: Unknown result type (might be due to invalid IL or missing references)
				//IL_020b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0216: Unknown result type (might be due to invalid IL or missing references)
				//IL_021b: Unknown result type (might be due to invalid IL or missing references)
				//IL_021f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0224: Unknown result type (might be due to invalid IL or missing references)
				//IL_027b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0239: Unknown result type (might be due to invalid IL or missing references)
				//IL_023b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0144: Unknown result type (might be due to invalid IL or missing references)
				//IL_014a: Invalid comparison between Unknown and I4
				//IL_013d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0284: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a3: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5 logicalDeviceLevelerType = <>4__this;
				try
				{
					TaskAwaiter<LevelerCommandResultType5> val;
					if ((uint)num > 1u)
					{
						if (num == 2)
						{
							val = <>u__3;
							<>u__3 = default(TaskAwaiter<LevelerCommandResultType5>);
							num = (<>1__state = -1);
							goto IL_051d;
						}
						<>8__1 = new <>c__DisplayClass117_0();
						<>8__1.progressAck = progressAck;
						<>8__1.operationRunTimeBetweenAcks = new Stopwatch();
						<>7__wrap1 = null;
						<>7__wrap2 = 0;
					}
					bool flag;
					object obj;
					try
					{
						_ = 1;
						try
						{
							if (num == 0)
							{
								goto IL_01fa;
							}
							if (num != 1)
							{
								obj = logicalDeviceLevelerType._lock;
								flag = false;
								try
								{
									Monitor.Enter(obj, ref flag);
									if (logicalDeviceLevelerType.CurrentOperation != OperationInProgress.None)
									{
										throw new LevelerAutoOperationInProgressException(String.Format("{0} in progress", (object)logicalDeviceLevelerType.CurrentOperation));
									}
									logicalDeviceLevelerType.CurrentOperation = OperationInProgress.AutoHitching;
								}
								finally
								{
									if (num < 0 && flag)
									{
										Monitor.Exit(obj);
									}
								}
								<>8__1.operationAck = LevelerAutoOperationAck.Continue;
								<>8__1.operationRunTimeBetweenAcks.Restart();
								<>8__1.operationCompleted = false;
								logicalDeviceLevelerType._currentAutoOperationAction = delegate(ILevelerAutoStepsProgress progress)
								{
									//IL_00a8: Expected O, but got Unknown
									if (!<>8__1.operationCompleted)
									{
										switch (<>8__1.operationAck)
										{
										case LevelerAutoOperationAck.Cancel:
											TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Hitch Operation Progress Ignored because it was previously canceled {0}", (object)progress), Array.Empty<object>());
											break;
										default:
											TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Hitch Operation Unknown Ack {0}", (object)<>8__1.operationAck), Array.Empty<object>());
											break;
										case LevelerAutoOperationAck.Continue:
											if (progress is ILevelerAutoStepsProgressHitch levelerAutoStepsProgressHitch)
											{
												try
												{
													<>8__1.operationRunTimeBetweenAcks.Restart();
													<>8__1.operationAck = <>8__1.progressAck.Invoke(levelerAutoStepsProgressHitch);
													TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Hitch Operation Progress ACK {0}: {1}", (object)<>8__1.operationAck, (object)progress), Array.Empty<object>());
												}
												catch (Exception ex14)
												{
													Exception ex15 = ex14;
													TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Hitch Operation Progress ACK Auto Cancel because of FAILURE {0}: {1}", (object)progress, (object)ex15.Message), Array.Empty<object>());
													<>8__1.operationAck = LevelerAutoOperationAck.Cancel;
													break;
												}
											}
											switch (progress.Status)
											{
											case LevelerAutoOperationStatus.CompletedSuccess:
												TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Hitch Operation completed: {0}", (object)progress), Array.Empty<object>());
												<>8__1.operationCompleted = true;
												break;
											default:
												TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Progress status, canceling the operation {0}", (object)progress.Status), Array.Empty<object>());
												<>8__1.operationAck = LevelerAutoOperationAck.Cancel;
												break;
											case LevelerAutoOperationStatus.Idle:
											case LevelerAutoOperationStatus.InProgress:
												break;
											}
											break;
										}
									}
								};
								<command>5__4 = LogicalDeviceLevelerCommandType5.MakeAutoHitchCommand();
								<commandCount>5__5 = 0;
								<errorCount>5__6 = 0;
								<wasOperationStarted>5__7 = false;
								goto IL_03ac;
							}
							ConfiguredTaskAwaiter val2 = <>u__2;
							<>u__2 = default(ConfiguredTaskAwaiter);
							num = (<>1__state = -1);
							goto IL_03a5;
							IL_03a5:
							((ConfiguredTaskAwaiter)(ref val2)).GetResult();
							goto IL_03ac;
							IL_01fa:
							try
							{
								ConfiguredTaskAwaiter<LevelerCommandResultType5> val3;
								if (num != 0)
								{
									val3 = logicalDeviceLevelerType.SendCommandAsync(<command>5__4, <commandCount>5__5, cancellationToken).ConfigureAwait(false).GetAwaiter();
									if (!val3.IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val3;
										((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<LevelerCommandResultType5>, <PerformOperationAutoHitchAsync>d__117>(ref val3, ref this);
										return;
									}
								}
								else
								{
									val3 = <>u__1;
									<>u__1 = default(ConfiguredTaskAwaiter<LevelerCommandResultType5>);
									num = (<>1__state = -1);
								}
								LevelerCommandResultType5 result = val3.GetResult();
								if ((int)result.CommandResult != 0)
								{
									throw new LevelerAutoOperationFailedException(result.CommandResult, result.Fault);
								}
								<errorCount>5__6 = 0;
							}
							catch (LevelerSessionEndedException)
							{
								throw;
							}
							catch (TimeoutException)
							{
								throw;
							}
							catch (OperationCanceledException)
							{
								throw;
							}
							catch (Exception ex4)
							{
								Exception ex5 = ex4;
								<errorCount>5__6++;
								TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Format("Auto Hitch Operation SendCommand failed, reason: {0}, error count: {1}", (object)ex5.Message, (object)<errorCount>5__6), Array.Empty<object>());
								if (<errorCount>5__6 > 5)
								{
									throw new LevelerAutoOperationFailedException((CommandResult)7, new LevelerFaultType5(LevelerFaultCustomType5.FaultCommandUnknown), ex5);
								}
							}
							<commandCount>5__5++;
							if (<>8__1.operationAck != LevelerAutoOperationAck.Continue)
							{
								throw new LevelerAutoOperationStoppedException();
							}
							if (!<>8__1.operationCompleted)
							{
								ConfiguredTaskAwaitable val4 = Task.Delay(250, cancellationToken).ConfigureAwait(false);
								val2 = ((ConfiguredTaskAwaitable)(ref val4)).GetAwaiter();
								if (!((ConfiguredTaskAwaiter)(ref val2)).IsCompleted)
								{
									num = (<>1__state = 1);
									<>u__2 = val2;
									((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter, <PerformOperationAutoHitchAsync>d__117>(ref val2, ref this);
									return;
								}
								goto IL_03a5;
							}
							goto IL_03ac;
							IL_03ac:
							if (!((CancellationToken)(ref cancellationToken)).IsCancellationRequested && !<>8__1.operationCompleted)
							{
								if (<>8__1.operationAck != LevelerAutoOperationAck.Continue)
								{
									throw new LevelerAutoOperationStoppedException();
								}
								if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType).IsDisposed)
								{
									throw new ObjectDisposedException("ILogicalDeviceDirectLevelerType5");
								}
								if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType).ActiveConnection != 1)
								{
									throw new LevelerNoActiveConnectionException();
								}
								if (!<>8__1.operationRunTimeBetweenAcks.IsRunning)
								{
									throw new LevelerAutoOperationFailedException((CommandResult)1, new LevelerFaultType5(LevelerFaultCustomType5.FaultOperationCanceled));
								}
								if (<>8__1.operationRunTimeBetweenAcks.ElapsedMilliseconds >= 900000)
								{
									throw new TimeoutException(String.Format("Auto Hitch operation timed out as an ACK was not able to be sent within {0}", (object)900000));
								}
								if (!logicalDeviceLevelerType.CommandSessionActivated)
								{
									throw new LevelerSessionActivationRequiredException();
								}
								if (logicalDeviceLevelerType.DeviceStatusExtendedAutoStep.OperationCodeProgress != LevelerOperationCodeProgress.None)
								{
									<wasOperationStarted>5__7 = true;
								}
								else if (((logicalDeviceLevelerType.DeviceStatusExtendedAutoStep.OperationCodeProgress == LevelerOperationCodeProgress.None) & <wasOperationStarted>5__7) && !<>8__1.operationCompleted)
								{
									throw new LevelerSessionEndedException();
								}
								goto IL_01fa;
							}
							((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Hitch Operation Completed", Array.Empty<object>());
							<command>5__4 = null;
						}
						catch (LevelerSessionEndedException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Hitch Operation Stopped because session was ended", Array.Empty<object>());
							throw;
						}
						catch (OperationCanceledException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Hitch Operation Canceled", Array.Empty<object>());
							throw;
						}
						catch (TimeoutException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Hitch Operation Timeout", Array.Empty<object>());
							throw;
						}
						catch (LevelerAutoOperationStoppedException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Hitch Operation Stopped", Array.Empty<object>());
							throw;
						}
						catch (LevelerException ex10)
						{
							TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Auto Hitch Operation Error ", ((Exception)ex10).Message), Array.Empty<object>());
							throw;
						}
						catch (Exception ex11)
						{
							Exception ex12 = ex11;
							TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Auto Hitch Operation Error ", ex12.Message), Array.Empty<object>());
							throw new LevelerException("Unable to perform Auto Level", ex12);
						}
					}
					catch (Object obj2)
					{
						obj = (object)obj2;
						<>7__wrap1 = obj;
					}
					if (<>8__1.operationRunTimeBetweenAcks.IsRunning)
					{
						val = logicalDeviceLevelerType.TryPerformOperationStopAsync(CancellationToken.None).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__3 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<LevelerCommandResultType5>, <PerformOperationAutoHitchAsync>d__117>(ref val, ref this);
							return;
						}
						goto IL_051d;
					}
					goto IL_0525;
					IL_051d:
					val.GetResult();
					goto IL_0525;
					IL_0525:
					obj = logicalDeviceLevelerType._lock;
					flag = false;
					try
					{
						Monitor.Enter(obj, ref flag);
						if (<>8__1.operationRunTimeBetweenAcks.IsRunning)
						{
							logicalDeviceLevelerType.CurrentOperation = OperationInProgress.None;
							logicalDeviceLevelerType._currentAutoOperationAction = null;
						}
					}
					finally
					{
						if (num < 0 && flag)
						{
							Monitor.Exit(obj);
						}
					}
					obj = <>7__wrap1;
					if (obj != null)
					{
						ExceptionDispatchInfo.Capture((Exception)(((obj is Exception) ? obj : null) ?? throw obj)).Throw();
					}
					<>7__wrap1 = null;
				}
				catch (Exception ex13)
				{
					Exception exception = ex13;
					<>1__state = -2;
					<>8__1 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformOperationAutoLevelAsync>d__118 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public Func<ILevelerAutoStepsProgressLevel, LevelerAutoOperationAck> progressAck;

			public LevelerAutoOperationSetPoint zeroPoint;

			public LogicalDeviceLevelerType5 <>4__this;

			private <>c__DisplayClass118_0 <>8__1;

			public CancellationToken cancellationToken;

			private object <>7__wrap1;

			private int <>7__wrap2;

			private LogicalDeviceLevelerCommandAutoLevelType5 <command>5__4;

			private int <commandCount>5__5;

			private int <errorCount>5__6;

			private bool <wasOperationStarted>5__7;

			private ConfiguredTaskAwaiter<LevelerCommandResultType5> <>u__1;

			private ConfiguredTaskAwaiter <>u__2;

			private TaskAwaiter<LevelerCommandResultType5> <>u__3;

			private void MoveNext()
			{
				//IL_02de: Expected O, but got Unknown
				//IL_04a9: Expected O, but got Unknown
				//IL_04d9: Expected O, but got Unknown
				//IL_05c3: Expected O, but got Unknown
				//IL_04f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_04ff: Unknown result type (might be due to invalid IL or missing references)
				//IL_0504: Unknown result type (might be due to invalid IL or missing references)
				//IL_0534: Unknown result type (might be due to invalid IL or missing references)
				//IL_0539: Unknown result type (might be due to invalid IL or missing references)
				//IL_0541: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Expected O, but got Unknown
				//IL_0519: Unknown result type (might be due to invalid IL or missing references)
				//IL_051b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0373: Unknown result type (might be due to invalid IL or missing references)
				//IL_037e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0383: Unknown result type (might be due to invalid IL or missing references)
				//IL_0387: Unknown result type (might be due to invalid IL or missing references)
				//IL_038c: Unknown result type (might be due to invalid IL or missing references)
				//IL_03a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_03a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_03bc: Unknown result type (might be due to invalid IL or missing references)
				//IL_03c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_03c9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0287: Unknown result type (might be due to invalid IL or missing references)
				//IL_028c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0294: Unknown result type (might be due to invalid IL or missing references)
				//IL_023e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0249: Unknown result type (might be due to invalid IL or missing references)
				//IL_024e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0252: Unknown result type (might be due to invalid IL or missing references)
				//IL_0257: Unknown result type (might be due to invalid IL or missing references)
				//IL_008d: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ae: Unknown result type (might be due to invalid IL or missing references)
				//IL_026c: Unknown result type (might be due to invalid IL or missing references)
				//IL_026e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0177: Unknown result type (might be due to invalid IL or missing references)
				//IL_017d: Invalid comparison between Unknown and I4
				//IL_0170: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d6: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5 logicalDeviceLevelerType = <>4__this;
				try
				{
					TaskAwaiter<LevelerCommandResultType5> val;
					if ((uint)num > 1u)
					{
						if (num == 2)
						{
							val = <>u__3;
							<>u__3 = default(TaskAwaiter<LevelerCommandResultType5>);
							num = (<>1__state = -1);
							goto IL_0550;
						}
						<>8__1 = new <>c__DisplayClass118_0();
						<>8__1.progressAck = progressAck;
						<>8__1.operationRunTimeBetweenAcks = new Stopwatch();
						<>7__wrap1 = null;
						<>7__wrap2 = 0;
					}
					bool flag;
					object obj;
					try
					{
						_ = 1;
						try
						{
							if (num == 0)
							{
								goto IL_022d;
							}
							if (num != 1)
							{
								if (zeroPoint == LevelerAutoOperationSetPoint.Unknown)
								{
									throw new ArgumentOutOfRangeException("zeroPoint", String.Format("Zero Point specified {0} not supported for operation", (object)zeroPoint));
								}
								obj = logicalDeviceLevelerType._lock;
								flag = false;
								try
								{
									Monitor.Enter(obj, ref flag);
									if (logicalDeviceLevelerType.CurrentOperation != OperationInProgress.None)
									{
										throw new LevelerAutoOperationInProgressException(String.Format("{0} in progress", (object)logicalDeviceLevelerType.CurrentOperation));
									}
									logicalDeviceLevelerType.CurrentOperation = OperationInProgress.AutoLeveling;
								}
								finally
								{
									if (num < 0 && flag)
									{
										Monitor.Exit(obj);
									}
								}
								<>8__1.operationAck = LevelerAutoOperationAck.Continue;
								<>8__1.operationRunTimeBetweenAcks.Restart();
								<>8__1.operationCompleted = false;
								logicalDeviceLevelerType._currentAutoOperationAction = delegate(ILevelerAutoStepsProgress progress)
								{
									//IL_00a8: Expected O, but got Unknown
									if (!<>8__1.operationCompleted)
									{
										switch (<>8__1.operationAck)
										{
										case LevelerAutoOperationAck.Cancel:
											TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Level Operation Progress Ignored because it was previously canceled {0}", (object)progress), Array.Empty<object>());
											break;
										default:
											TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Level Operation Unknown Ack {0}", (object)<>8__1.operationAck), Array.Empty<object>());
											break;
										case LevelerAutoOperationAck.Continue:
											if (progress is ILevelerAutoStepsProgressLevel levelerAutoStepsProgressLevel)
											{
												try
												{
													<>8__1.operationRunTimeBetweenAcks.Restart();
													<>8__1.operationAck = <>8__1.progressAck.Invoke(levelerAutoStepsProgressLevel);
													TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Level Operation Progress ACK {0}: {1}", (object)<>8__1.operationAck, (object)progress), Array.Empty<object>());
												}
												catch (Exception ex14)
												{
													Exception ex15 = ex14;
													TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Level Operation Progress ACK Auto Cancel because of FAILURE {0}: {1}", (object)progress, (object)ex15.Message), Array.Empty<object>());
													<>8__1.operationAck = LevelerAutoOperationAck.Cancel;
													break;
												}
											}
											switch (progress.Status)
											{
											case LevelerAutoOperationStatus.CompletedSuccess:
												TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Level Operation completed: {0}", (object)progress), Array.Empty<object>());
												<>8__1.operationCompleted = true;
												break;
											default:
												TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Progress status, canceling the operation {0}", (object)progress.Status), Array.Empty<object>());
												<>8__1.operationAck = LevelerAutoOperationAck.Cancel;
												break;
											case LevelerAutoOperationStatus.Idle:
											case LevelerAutoOperationStatus.InProgress:
												break;
											}
											break;
										}
									}
								};
								<command>5__4 = LogicalDeviceLevelerCommandType5.MakeAutoLevelCommand(zeroPoint);
								<commandCount>5__5 = 0;
								<errorCount>5__6 = 0;
								<wasOperationStarted>5__7 = false;
								goto IL_03df;
							}
							ConfiguredTaskAwaiter val2 = <>u__2;
							<>u__2 = default(ConfiguredTaskAwaiter);
							num = (<>1__state = -1);
							goto IL_03d8;
							IL_03d8:
							((ConfiguredTaskAwaiter)(ref val2)).GetResult();
							goto IL_03df;
							IL_03df:
							if (!((CancellationToken)(ref cancellationToken)).IsCancellationRequested && !<>8__1.operationCompleted)
							{
								if (<>8__1.operationAck != LevelerAutoOperationAck.Continue)
								{
									throw new LevelerAutoOperationStoppedException();
								}
								if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType).IsDisposed)
								{
									throw new ObjectDisposedException("ILogicalDeviceDirectLevelerType5");
								}
								if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType).ActiveConnection != 1)
								{
									throw new LevelerNoActiveConnectionException();
								}
								if (!<>8__1.operationRunTimeBetweenAcks.IsRunning)
								{
									throw new LevelerAutoOperationFailedException((CommandResult)1, new LevelerFaultType5(LevelerFaultCustomType5.FaultOperationCanceled));
								}
								if (<>8__1.operationRunTimeBetweenAcks.ElapsedMilliseconds >= 900000)
								{
									throw new TimeoutException(String.Format("Auto operation timed out as an ACK was not able to be sent within {0}", (object)900000));
								}
								if (!logicalDeviceLevelerType.CommandSessionActivated)
								{
									throw new LevelerSessionActivationRequiredException();
								}
								if (logicalDeviceLevelerType.DeviceStatusExtendedAutoStep.OperationCodeProgress != LevelerOperationCodeProgress.None)
								{
									<wasOperationStarted>5__7 = true;
								}
								else if (((logicalDeviceLevelerType.DeviceStatusExtendedAutoStep.OperationCodeProgress == LevelerOperationCodeProgress.None) & <wasOperationStarted>5__7) && !<>8__1.operationCompleted)
								{
									throw new LevelerSessionEndedException();
								}
								goto IL_022d;
							}
							((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Level Operation Completed", Array.Empty<object>());
							<command>5__4 = null;
							goto end_IL_0059;
							IL_022d:
							try
							{
								ConfiguredTaskAwaiter<LevelerCommandResultType5> val3;
								if (num != 0)
								{
									val3 = logicalDeviceLevelerType.SendCommandAsync(<command>5__4, <commandCount>5__5, cancellationToken).ConfigureAwait(false).GetAwaiter();
									if (!val3.IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val3;
										((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<LevelerCommandResultType5>, <PerformOperationAutoLevelAsync>d__118>(ref val3, ref this);
										return;
									}
								}
								else
								{
									val3 = <>u__1;
									<>u__1 = default(ConfiguredTaskAwaiter<LevelerCommandResultType5>);
									num = (<>1__state = -1);
								}
								LevelerCommandResultType5 result = val3.GetResult();
								if ((int)result.CommandResult != 0)
								{
									throw new LevelerAutoOperationFailedException(result.CommandResult, result.Fault);
								}
								<errorCount>5__6 = 0;
							}
							catch (LevelerSessionEndedException)
							{
								throw;
							}
							catch (TimeoutException)
							{
								throw;
							}
							catch (OperationCanceledException)
							{
								throw;
							}
							catch (Exception ex4)
							{
								Exception ex5 = ex4;
								<errorCount>5__6++;
								TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Format("Auto Level Operation SendCommand failed, reason: {0}, error count: {1}", (object)ex5.Message, (object)<errorCount>5__6), Array.Empty<object>());
								if (<errorCount>5__6 > 5)
								{
									throw new LevelerAutoOperationFailedException((CommandResult)7, new LevelerFaultType5(LevelerFaultCustomType5.FaultCommandUnknown), ex5);
								}
							}
							<commandCount>5__5++;
							if (<>8__1.operationAck != LevelerAutoOperationAck.Continue)
							{
								throw new LevelerAutoOperationStoppedException();
							}
							if (!<>8__1.operationCompleted)
							{
								ConfiguredTaskAwaitable val4 = Task.Delay(250, cancellationToken).ConfigureAwait(false);
								val2 = ((ConfiguredTaskAwaitable)(ref val4)).GetAwaiter();
								if (!((ConfiguredTaskAwaiter)(ref val2)).IsCompleted)
								{
									num = (<>1__state = 1);
									<>u__2 = val2;
									((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter, <PerformOperationAutoLevelAsync>d__118>(ref val2, ref this);
									return;
								}
								goto IL_03d8;
							}
							goto IL_03df;
							end_IL_0059:;
						}
						catch (LevelerSessionEndedException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Level Operation Stopped because session was ended", Array.Empty<object>());
							throw;
						}
						catch (OperationCanceledException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Level Operation Canceled", Array.Empty<object>());
							throw;
						}
						catch (TimeoutException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Level Operation Timeout", Array.Empty<object>());
							throw;
						}
						catch (LevelerAutoOperationStoppedException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Level Operation Stopped", Array.Empty<object>());
							throw;
						}
						catch (LevelerException ex10)
						{
							TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Auto Level Operation Error ", ((Exception)ex10).Message), Array.Empty<object>());
							throw;
						}
						catch (Exception ex11)
						{
							Exception ex12 = ex11;
							TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Auto Level Operation Error ", ex12.Message), Array.Empty<object>());
							throw new LevelerException("Unable to perform Auto Level", ex12);
						}
					}
					catch (Object obj2)
					{
						obj = (object)obj2;
						<>7__wrap1 = obj;
					}
					if (<>8__1.operationRunTimeBetweenAcks.IsRunning)
					{
						val = logicalDeviceLevelerType.TryPerformOperationStopAsync(CancellationToken.None).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__3 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<LevelerCommandResultType5>, <PerformOperationAutoLevelAsync>d__118>(ref val, ref this);
							return;
						}
						goto IL_0550;
					}
					goto IL_0558;
					IL_0550:
					val.GetResult();
					goto IL_0558;
					IL_0558:
					obj = logicalDeviceLevelerType._lock;
					flag = false;
					try
					{
						Monitor.Enter(obj, ref flag);
						if (<>8__1.operationRunTimeBetweenAcks.IsRunning)
						{
							logicalDeviceLevelerType.CurrentOperation = OperationInProgress.None;
							logicalDeviceLevelerType._currentAutoOperationAction = null;
						}
					}
					finally
					{
						if (num < 0 && flag)
						{
							Monitor.Exit(obj);
						}
					}
					obj = <>7__wrap1;
					if (obj != null)
					{
						ExceptionDispatchInfo.Capture((Exception)(((obj is Exception) ? obj : null) ?? throw obj)).Throw();
					}
					<>7__wrap1 = null;
				}
				catch (Exception ex13)
				{
					Exception exception = ex13;
					<>1__state = -2;
					<>8__1 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformOperationAutoRetractAsync>d__119 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public Func<ILevelerAutoStepsProgressRetract, LevelerAutoOperationAck> progressAck;

			public LevelerAutoOperationRetractJacks retractJacks;

			public LogicalDeviceLevelerType5 <>4__this;

			private <>c__DisplayClass119_0 <>8__1;

			public CancellationToken cancellationToken;

			private object <>7__wrap1;

			private int <>7__wrap2;

			private LogicalDeviceLevelerCommandAutoRetractType5 <command>5__4;

			private int <commandCount>5__5;

			private int <errorCount>5__6;

			private bool <wasOperationStarted>5__7;

			private ConfiguredTaskAwaiter<LevelerCommandResultType5> <>u__1;

			private ConfiguredTaskAwaiter <>u__2;

			private TaskAwaiter<LevelerCommandResultType5> <>u__3;

			private void MoveNext()
			{
				//IL_0329: Expected O, but got Unknown
				//IL_04e9: Expected O, but got Unknown
				//IL_0519: Expected O, but got Unknown
				//IL_0603: Expected O, but got Unknown
				//IL_0535: Unknown result type (might be due to invalid IL or missing references)
				//IL_053f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0544: Unknown result type (might be due to invalid IL or missing references)
				//IL_0574: Unknown result type (might be due to invalid IL or missing references)
				//IL_0579: Unknown result type (might be due to invalid IL or missing references)
				//IL_0581: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Expected O, but got Unknown
				//IL_0559: Unknown result type (might be due to invalid IL or missing references)
				//IL_055b: Unknown result type (might be due to invalid IL or missing references)
				//IL_03b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_03be: Unknown result type (might be due to invalid IL or missing references)
				//IL_03c3: Unknown result type (might be due to invalid IL or missing references)
				//IL_03c7: Unknown result type (might be due to invalid IL or missing references)
				//IL_03cc: Unknown result type (might be due to invalid IL or missing references)
				//IL_03e1: Unknown result type (might be due to invalid IL or missing references)
				//IL_03e3: Unknown result type (might be due to invalid IL or missing references)
				//IL_03fc: Unknown result type (might be due to invalid IL or missing references)
				//IL_0401: Unknown result type (might be due to invalid IL or missing references)
				//IL_0409: Unknown result type (might be due to invalid IL or missing references)
				//IL_0287: Unknown result type (might be due to invalid IL or missing references)
				//IL_028c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0294: Unknown result type (might be due to invalid IL or missing references)
				//IL_023e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0249: Unknown result type (might be due to invalid IL or missing references)
				//IL_024e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0252: Unknown result type (might be due to invalid IL or missing references)
				//IL_0257: Unknown result type (might be due to invalid IL or missing references)
				//IL_008d: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ae: Unknown result type (might be due to invalid IL or missing references)
				//IL_026c: Unknown result type (might be due to invalid IL or missing references)
				//IL_026e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0177: Unknown result type (might be due to invalid IL or missing references)
				//IL_017d: Invalid comparison between Unknown and I4
				//IL_0170: Unknown result type (might be due to invalid IL or missing references)
				//IL_02de: Unknown result type (might be due to invalid IL or missing references)
				//IL_02c9: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d6: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5 logicalDeviceLevelerType = <>4__this;
				try
				{
					TaskAwaiter<LevelerCommandResultType5> val;
					if ((uint)num > 1u)
					{
						if (num == 2)
						{
							val = <>u__3;
							<>u__3 = default(TaskAwaiter<LevelerCommandResultType5>);
							num = (<>1__state = -1);
							goto IL_0590;
						}
						<>8__1 = new <>c__DisplayClass119_0();
						<>8__1.progressAck = progressAck;
						<>8__1.operationRunTimeBetweenAcks = new Stopwatch();
						<>7__wrap1 = null;
						<>7__wrap2 = 0;
					}
					bool flag;
					object obj;
					try
					{
						_ = 1;
						try
						{
							if (num == 0)
							{
								goto IL_022d;
							}
							if (num != 1)
							{
								if (retractJacks == LevelerAutoOperationRetractJacks.Unknown)
								{
									throw new ArgumentOutOfRangeException("retractJacks", String.Format("Zero Point specified {0} not supported for operation", (object)retractJacks));
								}
								obj = logicalDeviceLevelerType._lock;
								flag = false;
								try
								{
									Monitor.Enter(obj, ref flag);
									if (logicalDeviceLevelerType.CurrentOperation != OperationInProgress.None)
									{
										throw new LevelerAutoOperationInProgressException(String.Format("{0} in progress", (object)logicalDeviceLevelerType.CurrentOperation));
									}
									logicalDeviceLevelerType.CurrentOperation = OperationInProgress.AutoRetract;
								}
								finally
								{
									if (num < 0 && flag)
									{
										Monitor.Exit(obj);
									}
								}
								<>8__1.operationAck = LevelerAutoOperationAck.Continue;
								<>8__1.operationRunTimeBetweenAcks.Restart();
								<>8__1.operationCompleted = false;
								logicalDeviceLevelerType._currentAutoOperationAction = delegate(ILevelerAutoStepsProgress progress)
								{
									//IL_00a8: Expected O, but got Unknown
									if (!<>8__1.operationCompleted)
									{
										switch (<>8__1.operationAck)
										{
										case LevelerAutoOperationAck.Cancel:
											TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Operation Progress Ignored because it was previously canceled {0}", (object)progress), Array.Empty<object>());
											break;
										default:
											TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Operation Unknown Ack {0}", (object)<>8__1.operationAck), Array.Empty<object>());
											break;
										case LevelerAutoOperationAck.Continue:
											if (progress is ILevelerAutoStepsProgressRetract levelerAutoStepsProgressRetract)
											{
												try
												{
													<>8__1.operationRunTimeBetweenAcks.Restart();
													<>8__1.operationAck = <>8__1.progressAck.Invoke(levelerAutoStepsProgressRetract);
													TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Operation Progress ACK {0}: {1}", (object)<>8__1.operationAck, (object)progress), Array.Empty<object>());
												}
												catch (Exception ex15)
												{
													Exception ex16 = ex15;
													TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Operation Progress ACK Auto Cancel because of FAILURE {0}: {1}", (object)progress, (object)ex16.Message), Array.Empty<object>());
													<>8__1.operationAck = LevelerAutoOperationAck.Cancel;
													break;
												}
											}
											switch (progress.Status)
											{
											case LevelerAutoOperationStatus.CompletedSuccess:
												TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Retract Operation completed: {0}", (object)progress), Array.Empty<object>());
												<>8__1.operationCompleted = true;
												break;
											default:
												TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Retract Progress status, canceling the operation {0}", (object)progress.Status), Array.Empty<object>());
												<>8__1.operationAck = LevelerAutoOperationAck.Cancel;
												break;
											case LevelerAutoOperationStatus.Idle:
											case LevelerAutoOperationStatus.InProgress:
												break;
											}
											break;
										}
									}
								};
								<command>5__4 = LogicalDeviceLevelerCommandType5.MakeAutoRetractCommand(retractJacks);
								<commandCount>5__5 = 0;
								<errorCount>5__6 = 0;
								<wasOperationStarted>5__7 = false;
								goto IL_041f;
							}
							ConfiguredTaskAwaiter val2 = <>u__2;
							<>u__2 = default(ConfiguredTaskAwaiter);
							num = (<>1__state = -1);
							goto IL_0418;
							IL_0418:
							((ConfiguredTaskAwaiter)(ref val2)).GetResult();
							goto IL_041f;
							IL_041f:
							if (!((CancellationToken)(ref cancellationToken)).IsCancellationRequested && !<>8__1.operationCompleted)
							{
								if (<>8__1.operationAck != LevelerAutoOperationAck.Continue)
								{
									throw new LevelerAutoOperationStoppedException();
								}
								if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType).IsDisposed)
								{
									throw new ObjectDisposedException("ILogicalDeviceDirectLevelerType5");
								}
								if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType).ActiveConnection != 1)
								{
									throw new LevelerNoActiveConnectionException();
								}
								if (!<>8__1.operationRunTimeBetweenAcks.IsRunning)
								{
									throw new LevelerAutoOperationFailedException((CommandResult)1, new LevelerFaultType5(LevelerFaultCustomType5.FaultOperationCanceled));
								}
								if (<>8__1.operationRunTimeBetweenAcks.ElapsedMilliseconds >= 900000)
								{
									throw new TimeoutException(String.Format("Auto Retract operation timed out as an ACK was not able to be sent within {0}", (object)900000));
								}
								if (!logicalDeviceLevelerType.CommandSessionActivated)
								{
									throw new LevelerSessionActivationRequiredException();
								}
								if (logicalDeviceLevelerType.DeviceStatusExtendedAutoStep.OperationCodeProgress != LevelerOperationCodeProgress.None)
								{
									<wasOperationStarted>5__7 = true;
								}
								else if (((logicalDeviceLevelerType.DeviceStatusExtendedAutoStep.OperationCodeProgress == LevelerOperationCodeProgress.None) & <wasOperationStarted>5__7) && !<>8__1.operationCompleted)
								{
									throw new LevelerSessionEndedException();
								}
								goto IL_022d;
							}
							((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Retract Operation Completed", Array.Empty<object>());
							<command>5__4 = null;
							goto end_IL_0059;
							IL_022d:
							try
							{
								ConfiguredTaskAwaiter<LevelerCommandResultType5> val3;
								if (num != 0)
								{
									val3 = logicalDeviceLevelerType.SendCommandAsync(<command>5__4, <commandCount>5__5, cancellationToken).ConfigureAwait(false).GetAwaiter();
									if (!val3.IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val3;
										((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<LevelerCommandResultType5>, <PerformOperationAutoRetractAsync>d__119>(ref val3, ref this);
										return;
									}
								}
								else
								{
									val3 = <>u__1;
									<>u__1 = default(ConfiguredTaskAwaiter<LevelerCommandResultType5>);
									num = (<>1__state = -1);
								}
								LevelerCommandResultType5 result = val3.GetResult();
								if ((int)result.CommandResult != 0)
								{
									if (result.Fault.DoesDtcRequireAutoOperationStopWithoutRetry)
									{
										throw new LevelerAutoOperationFailedWithoutRetryException(result.CommandResult, result.Fault);
									}
									throw new LevelerAutoOperationFailedException(result.CommandResult, result.Fault);
								}
								<errorCount>5__6 = 0;
							}
							catch (LevelerSessionEndedException)
							{
								throw;
							}
							catch (TimeoutException)
							{
								throw;
							}
							catch (OperationCanceledException)
							{
								throw;
							}
							catch (LevelerAutoOperationFailedWithoutRetryException ex4)
							{
								TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Concat("Auto Retract Fault without Retry triggered, reason: ", ((Exception)ex4).Message), Array.Empty<object>());
								throw;
							}
							catch (Exception ex5)
							{
								Exception ex6 = ex5;
								<errorCount>5__6++;
								TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Auto Retract Operation SendCommand failed, reason: ", ex6.Message), Array.Empty<object>());
								if (<errorCount>5__6 > 5)
								{
									throw new LevelerAutoOperationFailedException((CommandResult)7, new LevelerFaultType5(LevelerFaultCustomType5.FaultCommandUnknown), ex6);
								}
							}
							<commandCount>5__5++;
							if (<>8__1.operationAck != LevelerAutoOperationAck.Continue)
							{
								throw new LevelerAutoOperationStoppedException();
							}
							if (!<>8__1.operationCompleted)
							{
								ConfiguredTaskAwaitable val4 = Task.Delay(250, cancellationToken).ConfigureAwait(false);
								val2 = ((ConfiguredTaskAwaitable)(ref val4)).GetAwaiter();
								if (!((ConfiguredTaskAwaiter)(ref val2)).IsCompleted)
								{
									num = (<>1__state = 1);
									<>u__2 = val2;
									((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter, <PerformOperationAutoRetractAsync>d__119>(ref val2, ref this);
									return;
								}
								goto IL_0418;
							}
							goto IL_041f;
							end_IL_0059:;
						}
						catch (LevelerSessionEndedException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Retract Operation Stopped because session was ended", Array.Empty<object>());
							throw;
						}
						catch (OperationCanceledException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Retract Operation Canceled", Array.Empty<object>());
							throw;
						}
						catch (TimeoutException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Retract Operation Timeout", Array.Empty<object>());
							throw;
						}
						catch (LevelerAutoOperationStoppedException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Retract Operation Stopped", Array.Empty<object>());
							throw;
						}
						catch (LevelerException ex11)
						{
							TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Auto Retract Operation Error ", ((Exception)ex11).Message), Array.Empty<object>());
							throw;
						}
						catch (Exception ex12)
						{
							Exception ex13 = ex12;
							TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Auto Retract Operation Error ", ex13.Message), Array.Empty<object>());
							throw new LevelerException("Unable to perform Auto Level", ex13);
						}
					}
					catch (Object obj2)
					{
						obj = (object)obj2;
						<>7__wrap1 = obj;
					}
					if (<>8__1.operationRunTimeBetweenAcks.IsRunning)
					{
						val = logicalDeviceLevelerType.TryPerformOperationStopAsync(CancellationToken.None).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__3 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<LevelerCommandResultType5>, <PerformOperationAutoRetractAsync>d__119>(ref val, ref this);
							return;
						}
						goto IL_0590;
					}
					goto IL_0598;
					IL_0590:
					val.GetResult();
					goto IL_0598;
					IL_0598:
					obj = logicalDeviceLevelerType._lock;
					flag = false;
					try
					{
						Monitor.Enter(obj, ref flag);
						if (<>8__1.operationRunTimeBetweenAcks.IsRunning)
						{
							logicalDeviceLevelerType.CurrentOperation = OperationInProgress.None;
							logicalDeviceLevelerType._currentAutoOperationAction = null;
						}
					}
					finally
					{
						if (num < 0 && flag)
						{
							Monitor.Exit(obj);
						}
					}
					obj = <>7__wrap1;
					if (obj != null)
					{
						ExceptionDispatchInfo.Capture((Exception)(((obj is Exception) ? obj : null) ?? throw obj)).Throw();
					}
					<>7__wrap1 = null;
				}
				catch (Exception ex14)
				{
					Exception exception = ex14;
					<>1__state = -2;
					<>8__1 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformOperationClearFaultAsync>d__120 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceLevelerType5 <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<LevelerCommandResultType5> <>u__1;

			private void MoveNext()
			{
				//IL_00b4: Expected O, but got Unknown
				//IL_0050: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_005c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0075: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				//IL_009f: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5 logicalDeviceLevelerType = <>4__this;
				try
				{
					TaskAwaiter<LevelerCommandResultType5> val;
					if (num != 0)
					{
						val = logicalDeviceLevelerType.TryPerformOperationClearFaultAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<LevelerCommandResultType5>, <PerformOperationClearFaultAsync>d__120>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<LevelerCommandResultType5>);
						num = (<>1__state = -1);
					}
					LevelerCommandResultType5 result = val.GetResult();
					if ((int)result.CommandResult != 0)
					{
						if (((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
						{
							throw new LevelerOperationFailedException((CommandResult)1, new LevelerFaultType5(LevelerFaultCustomType5.FaultOperationCanceled));
						}
						throw new LevelerOperationFailedException(result.CommandResult, result.Fault);
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformOperationManualAsync>d__122 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public Func<LevelerJacksAndAirBagType5, LevelerAutoOperationAck> progressAck;

			public LogicalDeviceLevelerType5 <>4__this;

			public LevelerJacksAndAirBagType5 action;

			private <>c__DisplayClass122_0 <>8__1;

			public CancellationToken cancellationToken;

			private bool <wasOperationSuccessful>5__2;

			private object <>7__wrap2;

			private int <>7__wrap3;

			private LogicalDeviceLevelerCommandManualType5 <command>5__5;

			private int <commandCount>5__6;

			private int <errorCount>5__7;

			private ConfiguredTaskAwaiter<LevelerCommandResultType5> <>u__1;

			private ConfiguredTaskAwaiter <>u__2;

			private TaskAwaiter<LevelerCommandResultType5> <>u__3;

			private void MoveNext()
			{
				//IL_02a0: Expected O, but got Unknown
				//IL_043f: Expected O, but got Unknown
				//IL_046f: Expected O, but got Unknown
				//IL_0560: Expected O, but got Unknown
				//IL_0512: Unknown result type (might be due to invalid IL or missing references)
				//IL_0517: Unknown result type (might be due to invalid IL or missing references)
				//IL_051f: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Expected O, but got Unknown
				//IL_031d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0328: Unknown result type (might be due to invalid IL or missing references)
				//IL_032d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0331: Unknown result type (might be due to invalid IL or missing references)
				//IL_0336: Unknown result type (might be due to invalid IL or missing references)
				//IL_034b: Unknown result type (might be due to invalid IL or missing references)
				//IL_034d: Unknown result type (might be due to invalid IL or missing references)
				//IL_04d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_04dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_04e2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0366: Unknown result type (might be due to invalid IL or missing references)
				//IL_036b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0373: Unknown result type (might be due to invalid IL or missing references)
				//IL_04f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_04f9: Unknown result type (might be due to invalid IL or missing references)
				//IL_020d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0212: Unknown result type (might be due to invalid IL or missing references)
				//IL_021a: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_01cf: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d8: Unknown result type (might be due to invalid IL or missing references)
				//IL_01dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_0234: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f2: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f4: Unknown result type (might be due to invalid IL or missing references)
				//IL_013e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0144: Invalid comparison between Unknown and I4
				//IL_0137: Unknown result type (might be due to invalid IL or missing references)
				//IL_0283: Unknown result type (might be due to invalid IL or missing references)
				//IL_019d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5 logicalDeviceLevelerType = <>4__this;
				try
				{
					TaskAwaiter<LevelerCommandResultType5> val;
					if ((uint)num > 1u)
					{
						if (num == 2)
						{
							val = <>u__3;
							<>u__3 = default(TaskAwaiter<LevelerCommandResultType5>);
							num = (<>1__state = -1);
							goto IL_052e;
						}
						<>8__1 = new <>c__DisplayClass122_0();
						<>8__1.progressAck = progressAck;
						<>8__1.operationRunTimeBetweenAcks = new Stopwatch();
						<wasOperationSuccessful>5__2 = false;
						<>7__wrap2 = null;
						<>7__wrap3 = 0;
					}
					bool flag;
					object obj;
					try
					{
						_ = 1;
						try
						{
							if (num == 0)
							{
								goto IL_01b3;
							}
							if (num != 1)
							{
								obj = logicalDeviceLevelerType._lock;
								flag = false;
								try
								{
									Monitor.Enter(obj, ref flag);
									if (logicalDeviceLevelerType.CurrentOperation != OperationInProgress.None)
									{
										throw new LevelerAutoOperationInProgressException(String.Format("{0} in progress", (object)logicalDeviceLevelerType.CurrentOperation));
									}
									logicalDeviceLevelerType.CurrentOperation = OperationInProgress.ManualMoving;
								}
								finally
								{
									if (num < 0 && flag)
									{
										Monitor.Exit(obj);
									}
								}
								<>8__1.operationAck = LevelerAutoOperationAck.Continue;
								<>8__1.operationRunTimeBetweenAcks.Restart();
								logicalDeviceLevelerType._currentManualMovementOperationAction = delegate(LevelerJacksAndAirBagType5 progress)
								{
									switch (<>8__1.operationAck)
									{
									case LevelerAutoOperationAck.Cancel:
										TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Manual Movement Operation Progress Ignored because it was previously canceled {0}", (object)progress), Array.Empty<object>());
										break;
									default:
										TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Manual Movement Operation Unknown Ack {0}", (object)<>8__1.operationAck), Array.Empty<object>());
										break;
									case LevelerAutoOperationAck.Continue:
										<>8__1.operationRunTimeBetweenAcks.Restart();
										<>8__1.operationAck = <>8__1.progressAck.Invoke(progress);
										break;
									}
								};
								<command>5__5 = LogicalDeviceLevelerCommandType5.MakeManualCommand(action);
								<commandCount>5__6 = 0;
								<errorCount>5__7 = 0;
								goto IL_0389;
							}
							ConfiguredTaskAwaiter val2 = <>u__2;
							<>u__2 = default(ConfiguredTaskAwaiter);
							num = (<>1__state = -1);
							goto IL_0382;
							IL_0382:
							((ConfiguredTaskAwaiter)(ref val2)).GetResult();
							goto IL_0389;
							IL_01b3:
							try
							{
								ConfiguredTaskAwaiter<LevelerCommandResultType5> val3;
								if (num != 0)
								{
									val3 = logicalDeviceLevelerType.SendCommandAsync(<command>5__5, <commandCount>5__6, cancellationToken).ConfigureAwait(false).GetAwaiter();
									if (!val3.IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val3;
										((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<LevelerCommandResultType5>, <PerformOperationManualAsync>d__122>(ref val3, ref this);
										return;
									}
								}
								else
								{
									val3 = <>u__1;
									<>u__1 = default(ConfiguredTaskAwaiter<LevelerCommandResultType5>);
									num = (<>1__state = -1);
								}
								LevelerCommandResultType5 result = val3.GetResult();
								if ((int)result.CommandResult == 0)
								{
									<errorCount>5__7 = 0;
									<wasOperationSuccessful>5__2 = true;
								}
								else
								{
									if (!result.Fault.DoesDtcAllowManualMovement)
									{
										throw new LevelerAutoOperationFailedException(result.CommandResult, result.Fault);
									}
									TaggedLog.Debug("ILogicalDeviceDirectLevelerType5", "Manual Movement Operation SendCommand returned in a faulted state, but with a DTC that means we should continue the operation", Array.Empty<object>());
									<errorCount>5__7 = 0;
									<wasOperationSuccessful>5__2 = true;
								}
							}
							catch (TimeoutException)
							{
								throw;
							}
							catch (OperationCanceledException)
							{
								throw;
							}
							catch (Exception ex3)
							{
								Exception ex4 = ex3;
								<errorCount>5__7++;
								TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Manual Movement Operation SendCommand failed, reason: ", ex4.Message), Array.Empty<object>());
								if (<errorCount>5__7 > 5)
								{
									throw new LevelerAutoOperationFailedException((CommandResult)7, new LevelerFaultType5(LevelerFaultCustomType5.FaultCommandUnknown), ex4);
								}
							}
							<commandCount>5__6++;
							if (<>8__1.operationAck != LevelerAutoOperationAck.Continue)
							{
								throw new LevelerAutoOperationStoppedException();
							}
							ConfiguredTaskAwaitable val4 = Task.Delay(250, cancellationToken).ConfigureAwait(false);
							val2 = ((ConfiguredTaskAwaitable)(ref val4)).GetAwaiter();
							if (!((ConfiguredTaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter, <PerformOperationManualAsync>d__122>(ref val2, ref this);
								return;
							}
							goto IL_0382;
							IL_0389:
							if (!((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
							{
								if (<>8__1.operationAck != LevelerAutoOperationAck.Continue)
								{
									throw new LevelerAutoOperationStoppedException();
								}
								if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType).IsDisposed)
								{
									throw new ObjectDisposedException("ILogicalDeviceDirectLevelerType5");
								}
								if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType).ActiveConnection != 1)
								{
									throw new LevelerNoActiveConnectionException();
								}
								if (!<>8__1.operationRunTimeBetweenAcks.IsRunning)
								{
									throw new LevelerAutoOperationFailedException((CommandResult)1, new LevelerFaultType5(LevelerFaultCustomType5.FaultOperationCanceled));
								}
								if (<>8__1.operationRunTimeBetweenAcks.ElapsedMilliseconds >= 900000)
								{
									throw new TimeoutException(String.Format("Manual Movement Operation timed out as an ACK was not able to be sent within {0}", (object)900000));
								}
								if (!logicalDeviceLevelerType.CommandSessionActivated)
								{
									throw new LevelerSessionActivationRequiredException();
								}
								goto IL_01b3;
							}
							((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
							<command>5__5 = null;
						}
						catch (OperationCanceledException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Manual Movement Operation Canceled", Array.Empty<object>());
							throw;
						}
						catch (TimeoutException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Manual Movement Operation Timeout", Array.Empty<object>());
							throw;
						}
						catch (LevelerAutoOperationStoppedException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Manual Movement Operation Stopped", Array.Empty<object>());
							throw;
						}
						catch (LevelerAutoOperationInProgressException ex8)
						{
							TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Manual Movement In Progress Error ", ((Exception)ex8).Message), Array.Empty<object>());
							throw;
						}
						catch (LevelerException ex9)
						{
							TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Manual Movement Operation Error ", ((Exception)ex9).Message), Array.Empty<object>());
							throw;
						}
						catch (Exception ex10)
						{
							Exception ex11 = ex10;
							TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Manual Movement Operation Error ", ex11.Message), Array.Empty<object>());
							throw new LevelerException("Unable to perform Manual Movement", ex11);
						}
					}
					catch (Object obj2)
					{
						obj = (object)obj2;
						<>7__wrap2 = obj;
					}
					obj = logicalDeviceLevelerType._lock;
					flag = false;
					try
					{
						Monitor.Enter(obj, ref flag);
						if (<>8__1.operationRunTimeBetweenAcks.IsRunning)
						{
							logicalDeviceLevelerType.CurrentOperation = OperationInProgress.None;
							logicalDeviceLevelerType._currentAutoOperationAction = null;
						}
					}
					finally
					{
						if (num < 0 && flag)
						{
							Monitor.Exit(obj);
						}
					}
					if (<>8__1.operationRunTimeBetweenAcks.IsRunning & <wasOperationSuccessful>5__2)
					{
						val = logicalDeviceLevelerType.TryPerformOperationStopAsync(CancellationToken.None).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__3 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<LevelerCommandResultType5>, <PerformOperationManualAsync>d__122>(ref val, ref this);
							return;
						}
						goto IL_052e;
					}
					goto IL_0536;
					IL_0536:
					obj = <>7__wrap2;
					if (obj != null)
					{
						ExceptionDispatchInfo.Capture((Exception)(((obj is Exception) ? obj : null) ?? throw obj)).Throw();
					}
					<>7__wrap2 = null;
					goto end_IL_000e;
					IL_052e:
					val.GetResult();
					goto IL_0536;
					end_IL_000e:;
				}
				catch (Exception ex12)
				{
					Exception exception = ex12;
					<>1__state = -2;
					<>8__1 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformOperationManualUnrestrictedAsync>d__123 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public Func<LevelerJacksAndAirBagType5, LevelerAutoOperationAck> progressAck;

			public LogicalDeviceLevelerType5 <>4__this;

			public LevelerJacksAndAirBagType5 action;

			private <>c__DisplayClass123_0 <>8__1;

			public CancellationToken cancellationToken;

			private bool <wasOperationSuccessful>5__2;

			private object <>7__wrap2;

			private int <>7__wrap3;

			private LogicalDeviceLevelerCommandManualUnrestrictedType5 <command>5__5;

			private int <commandCount>5__6;

			private int <errorCount>5__7;

			private ConfiguredTaskAwaiter<LevelerCommandResultType5> <>u__1;

			private ConfiguredTaskAwaiter <>u__2;

			private TaskAwaiter<LevelerCommandResultType5> <>u__3;

			private void MoveNext()
			{
				//IL_02a0: Expected O, but got Unknown
				//IL_041b: Expected O, but got Unknown
				//IL_044b: Expected O, but got Unknown
				//IL_053c: Expected O, but got Unknown
				//IL_04ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_04f3: Unknown result type (might be due to invalid IL or missing references)
				//IL_04fb: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Expected O, but got Unknown
				//IL_031d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0328: Unknown result type (might be due to invalid IL or missing references)
				//IL_032d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0331: Unknown result type (might be due to invalid IL or missing references)
				//IL_0336: Unknown result type (might be due to invalid IL or missing references)
				//IL_034b: Unknown result type (might be due to invalid IL or missing references)
				//IL_034d: Unknown result type (might be due to invalid IL or missing references)
				//IL_04af: Unknown result type (might be due to invalid IL or missing references)
				//IL_04b9: Unknown result type (might be due to invalid IL or missing references)
				//IL_04be: Unknown result type (might be due to invalid IL or missing references)
				//IL_0366: Unknown result type (might be due to invalid IL or missing references)
				//IL_036b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0373: Unknown result type (might be due to invalid IL or missing references)
				//IL_04d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_04d5: Unknown result type (might be due to invalid IL or missing references)
				//IL_020d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0212: Unknown result type (might be due to invalid IL or missing references)
				//IL_021a: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_01cf: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d8: Unknown result type (might be due to invalid IL or missing references)
				//IL_01dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_0234: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f2: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f4: Unknown result type (might be due to invalid IL or missing references)
				//IL_013e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0144: Invalid comparison between Unknown and I4
				//IL_0137: Unknown result type (might be due to invalid IL or missing references)
				//IL_0283: Unknown result type (might be due to invalid IL or missing references)
				//IL_019d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5 logicalDeviceLevelerType = <>4__this;
				try
				{
					TaskAwaiter<LevelerCommandResultType5> val;
					if ((uint)num > 1u)
					{
						if (num == 2)
						{
							val = <>u__3;
							<>u__3 = default(TaskAwaiter<LevelerCommandResultType5>);
							num = (<>1__state = -1);
							goto IL_050a;
						}
						<>8__1 = new <>c__DisplayClass123_0();
						<>8__1.progressAck = progressAck;
						<>8__1.operationRunTimeBetweenAcks = new Stopwatch();
						<wasOperationSuccessful>5__2 = false;
						<>7__wrap2 = null;
						<>7__wrap3 = 0;
					}
					bool flag;
					object obj;
					try
					{
						_ = 1;
						try
						{
							if (num == 0)
							{
								goto IL_01b3;
							}
							if (num != 1)
							{
								obj = logicalDeviceLevelerType._lock;
								flag = false;
								try
								{
									Monitor.Enter(obj, ref flag);
									if (logicalDeviceLevelerType.CurrentOperation != OperationInProgress.None)
									{
										throw new LevelerAutoOperationInProgressException(String.Format("{0} in progress", (object)logicalDeviceLevelerType.CurrentOperation));
									}
									logicalDeviceLevelerType.CurrentOperation = OperationInProgress.ManualUnrestrictedMoving;
								}
								finally
								{
									if (num < 0 && flag)
									{
										Monitor.Exit(obj);
									}
								}
								<>8__1.operationAck = LevelerAutoOperationAck.Continue;
								<>8__1.operationRunTimeBetweenAcks.Restart();
								logicalDeviceLevelerType._currentManualMovementOperationAction = delegate(LevelerJacksAndAirBagType5 progress)
								{
									switch (<>8__1.operationAck)
									{
									case LevelerAutoOperationAck.Cancel:
										TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Unrestricted Manual Movement Operation Progress Ignored because it was previously canceled {0}", (object)progress), Array.Empty<object>());
										break;
									default:
										TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Unrestricted Manual Movement Operation Unknown Ack {0}", (object)<>8__1.operationAck), Array.Empty<object>());
										break;
									case LevelerAutoOperationAck.Continue:
										<>8__1.operationRunTimeBetweenAcks.Restart();
										<>8__1.operationAck = <>8__1.progressAck.Invoke(progress);
										break;
									}
								};
								<command>5__5 = LogicalDeviceLevelerCommandType5.MakeManualUnrestrictedCommand(action);
								<commandCount>5__6 = 0;
								<errorCount>5__7 = 0;
								goto IL_0389;
							}
							ConfiguredTaskAwaiter val2 = <>u__2;
							<>u__2 = default(ConfiguredTaskAwaiter);
							num = (<>1__state = -1);
							goto IL_0382;
							IL_0382:
							((ConfiguredTaskAwaiter)(ref val2)).GetResult();
							goto IL_0389;
							IL_01b3:
							try
							{
								ConfiguredTaskAwaiter<LevelerCommandResultType5> val3;
								if (num != 0)
								{
									val3 = logicalDeviceLevelerType.SendCommandAsync(<command>5__5, <commandCount>5__6, cancellationToken).ConfigureAwait(false).GetAwaiter();
									if (!val3.IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val3;
										((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<LevelerCommandResultType5>, <PerformOperationManualUnrestrictedAsync>d__123>(ref val3, ref this);
										return;
									}
								}
								else
								{
									val3 = <>u__1;
									<>u__1 = default(ConfiguredTaskAwaiter<LevelerCommandResultType5>);
									num = (<>1__state = -1);
								}
								LevelerCommandResultType5 result = val3.GetResult();
								if ((int)result.CommandResult == 0)
								{
									<errorCount>5__7 = 0;
									<wasOperationSuccessful>5__2 = true;
								}
								else
								{
									if (!result.Fault.DoesDtcAllowManualMovement)
									{
										throw new LevelerAutoOperationFailedException(result.CommandResult, result.Fault);
									}
									TaggedLog.Debug("ILogicalDeviceDirectLevelerType5", "Unrestricted Manual Movement Operation SendCommand returned in a faulted state, but with a DTC that means we should continue the operation", Array.Empty<object>());
									<errorCount>5__7 = 0;
									<wasOperationSuccessful>5__2 = true;
								}
							}
							catch (TimeoutException)
							{
								throw;
							}
							catch (OperationCanceledException)
							{
								throw;
							}
							catch (Exception ex3)
							{
								Exception ex4 = ex3;
								<errorCount>5__7++;
								TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Unrestricted Manual Movement Operation SendCommand failed, reason: ", ex4.Message), Array.Empty<object>());
								if (<errorCount>5__7 > 5)
								{
									throw new LevelerAutoOperationFailedException((CommandResult)7, new LevelerFaultType5(LevelerFaultCustomType5.FaultCommandUnknown), ex4);
								}
							}
							<commandCount>5__6++;
							if (<>8__1.operationAck != LevelerAutoOperationAck.Continue)
							{
								throw new LevelerAutoOperationStoppedException();
							}
							ConfiguredTaskAwaitable val4 = Task.Delay(250, cancellationToken).ConfigureAwait(false);
							val2 = ((ConfiguredTaskAwaitable)(ref val4)).GetAwaiter();
							if (!((ConfiguredTaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter, <PerformOperationManualUnrestrictedAsync>d__123>(ref val2, ref this);
								return;
							}
							goto IL_0382;
							IL_0389:
							if (!((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
							{
								if (<>8__1.operationAck != LevelerAutoOperationAck.Continue)
								{
									throw new LevelerAutoOperationStoppedException();
								}
								if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType).IsDisposed)
								{
									throw new ObjectDisposedException("ILogicalDeviceDirectLevelerType5");
								}
								if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType).ActiveConnection != 1)
								{
									throw new LevelerNoActiveConnectionException();
								}
								if (!<>8__1.operationRunTimeBetweenAcks.IsRunning)
								{
									throw new LevelerAutoOperationFailedException((CommandResult)1, new LevelerFaultType5(LevelerFaultCustomType5.FaultOperationCanceled));
								}
								if (<>8__1.operationRunTimeBetweenAcks.ElapsedMilliseconds >= 900000)
								{
									throw new TimeoutException(String.Format("Unrestricted Manual Movement operation timed out as an ACK was not able to be sent within {0}", (object)900000));
								}
								if (!logicalDeviceLevelerType.CommandSessionActivated)
								{
									throw new LevelerSessionActivationRequiredException();
								}
								goto IL_01b3;
							}
							((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
							<command>5__5 = null;
						}
						catch (OperationCanceledException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Unrestricted Manual Movement Operation Canceled", Array.Empty<object>());
							throw;
						}
						catch (TimeoutException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Unrestricted Manual Movement Operation Timeout", Array.Empty<object>());
							throw;
						}
						catch (LevelerAutoOperationStoppedException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Unrestricted Manual Movement Operation Stopped", Array.Empty<object>());
							throw;
						}
						catch (LevelerException ex8)
						{
							TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Unrestricted Manual Movement Operation Error ", ((Exception)ex8).Message), Array.Empty<object>());
							throw;
						}
						catch (Exception ex9)
						{
							Exception ex10 = ex9;
							TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Unrestricted Manual Movement Operation Error ", ex10.Message), Array.Empty<object>());
							throw new LevelerException("Unable to perform Unrestricted Manual Movement", ex10);
						}
					}
					catch (Object obj2)
					{
						obj = (object)obj2;
						<>7__wrap2 = obj;
					}
					obj = logicalDeviceLevelerType._lock;
					flag = false;
					try
					{
						Monitor.Enter(obj, ref flag);
						if (<>8__1.operationRunTimeBetweenAcks.IsRunning)
						{
							logicalDeviceLevelerType.CurrentOperation = OperationInProgress.None;
							logicalDeviceLevelerType._currentAutoOperationAction = null;
						}
					}
					finally
					{
						if (num < 0 && flag)
						{
							Monitor.Exit(obj);
						}
					}
					if (<>8__1.operationRunTimeBetweenAcks.IsRunning & <wasOperationSuccessful>5__2)
					{
						val = logicalDeviceLevelerType.TryPerformOperationStopAsync(CancellationToken.None).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__3 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<LevelerCommandResultType5>, <PerformOperationManualUnrestrictedAsync>d__123>(ref val, ref this);
							return;
						}
						goto IL_050a;
					}
					goto IL_0512;
					IL_0512:
					obj = <>7__wrap2;
					if (obj != null)
					{
						ExceptionDispatchInfo.Capture((Exception)(((obj is Exception) ? obj : null) ?? throw obj)).Throw();
					}
					<>7__wrap2 = null;
					goto end_IL_000e;
					IL_050a:
					val.GetResult();
					goto IL_0512;
					end_IL_000e:;
				}
				catch (Exception ex11)
				{
					Exception exception = ex11;
					<>1__state = -2;
					<>8__1 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformOperationSetPointSetAsync>d__124 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public Func<ILevelerAutoStepsProgressSetPointSet, LevelerAutoOperationAck> progressAck;

			public LogicalDeviceLevelerType5 <>4__this;

			public LevelerAutoOperationSetPoint setPoint;

			private <>c__DisplayClass124_0 <>8__1;

			public CancellationToken cancellationToken;

			private object <>7__wrap1;

			private int <>7__wrap2;

			private LogicalDeviceLevelerCommandZeroSetType5 <command>5__4;

			private int <commandCount>5__5;

			private int <errorCount>5__6;

			private ConfiguredTaskAwaiter<LevelerCommandResultType5> <>u__1;

			private ConfiguredTaskAwaiter <>u__2;

			private TaskAwaiter<LevelerCommandResultType5> <>u__3;

			private void MoveNext()
			{
				//IL_027a: Expected O, but got Unknown
				//IL_042e: Expected O, but got Unknown
				//IL_045e: Expected O, but got Unknown
				//IL_0548: Expected O, but got Unknown
				//IL_047a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0484: Unknown result type (might be due to invalid IL or missing references)
				//IL_0489: Unknown result type (might be due to invalid IL or missing references)
				//IL_04b9: Unknown result type (might be due to invalid IL or missing references)
				//IL_04be: Unknown result type (might be due to invalid IL or missing references)
				//IL_04c6: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Expected O, but got Unknown
				//IL_049e: Unknown result type (might be due to invalid IL or missing references)
				//IL_04a0: Unknown result type (might be due to invalid IL or missing references)
				//IL_030f: Unknown result type (might be due to invalid IL or missing references)
				//IL_031a: Unknown result type (might be due to invalid IL or missing references)
				//IL_031f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0323: Unknown result type (might be due to invalid IL or missing references)
				//IL_0328: Unknown result type (might be due to invalid IL or missing references)
				//IL_033d: Unknown result type (might be due to invalid IL or missing references)
				//IL_033f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0358: Unknown result type (might be due to invalid IL or missing references)
				//IL_035d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0365: Unknown result type (might be due to invalid IL or missing references)
				//IL_0212: Unknown result type (might be due to invalid IL or missing references)
				//IL_0217: Unknown result type (might be due to invalid IL or missing references)
				//IL_021f: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c9: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_01dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0239: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0143: Unknown result type (might be due to invalid IL or missing references)
				//IL_0149: Invalid comparison between Unknown and I4
				//IL_013c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0242: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a2: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5 logicalDeviceLevelerType = <>4__this;
				try
				{
					TaskAwaiter<LevelerCommandResultType5> val;
					if ((uint)num > 1u)
					{
						if (num == 2)
						{
							val = <>u__3;
							<>u__3 = default(TaskAwaiter<LevelerCommandResultType5>);
							num = (<>1__state = -1);
							goto IL_04d5;
						}
						<>8__1 = new <>c__DisplayClass124_0();
						<>8__1.progressAck = progressAck;
						<>8__1.operationRunTimeBetweenAcks = new Stopwatch();
						<>7__wrap1 = null;
						<>7__wrap2 = 0;
					}
					bool flag;
					object obj;
					try
					{
						_ = 1;
						try
						{
							if (num == 0)
							{
								goto IL_01b8;
							}
							if (num != 1)
							{
								obj = logicalDeviceLevelerType._lock;
								flag = false;
								try
								{
									Monitor.Enter(obj, ref flag);
									if (logicalDeviceLevelerType.CurrentOperation != OperationInProgress.None)
									{
										throw new LevelerAutoOperationInProgressException(String.Format("{0} in progress", (object)logicalDeviceLevelerType.CurrentOperation));
									}
									logicalDeviceLevelerType.CurrentOperation = OperationInProgress.SavingSetPoint;
								}
								finally
								{
									if (num < 0 && flag)
									{
										Monitor.Exit(obj);
									}
								}
								<>8__1.operationAck = LevelerAutoOperationAck.Continue;
								<>8__1.operationRunTimeBetweenAcks.Restart();
								<>8__1.operationCompleted = false;
								logicalDeviceLevelerType._currentAutoOperationAction = delegate(ILevelerAutoStepsProgress progress)
								{
									//IL_00a8: Expected O, but got Unknown
									if (!<>8__1.operationCompleted)
									{
										switch (<>8__1.operationAck)
										{
										case LevelerAutoOperationAck.Cancel:
											TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Setpoint Set Operation Progress Ignored because it was previously canceled {0}", (object)progress), Array.Empty<object>());
											break;
										default:
											TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Setpoint Set Operation Unknown Ack {0}", (object)<>8__1.operationAck), Array.Empty<object>());
											break;
										case LevelerAutoOperationAck.Continue:
											if (progress is ILevelerAutoStepsProgressSetPointSet levelerAutoStepsProgressSetPointSet)
											{
												try
												{
													<>8__1.operationRunTimeBetweenAcks.Restart();
													<>8__1.operationAck = <>8__1.progressAck.Invoke(levelerAutoStepsProgressSetPointSet);
													TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Setpoint Set Operation Progress ACK {0}: {1}", (object)<>8__1.operationAck, (object)progress), Array.Empty<object>());
												}
												catch (Exception ex12)
												{
													Exception ex13 = ex12;
													TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Setpoint Set Operation Progress ACK Auto Cancel because of FAILURE {0}: {1}", (object)progress, (object)ex13.Message), Array.Empty<object>());
													<>8__1.operationAck = LevelerAutoOperationAck.Cancel;
													break;
												}
											}
											switch (progress.Status)
											{
											case LevelerAutoOperationStatus.CompletedSuccess:
												TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Set Point Set Operation completed: {0}", (object)progress), Array.Empty<object>());
												<>8__1.operationCompleted = true;
												break;
											default:
												TaggedLog.Information("ILogicalDeviceDirectLevelerType5", String.Format("Auto Progress status, canceling the operation {0}", (object)progress.Status), Array.Empty<object>());
												<>8__1.operationAck = LevelerAutoOperationAck.Cancel;
												break;
											case LevelerAutoOperationStatus.Idle:
											case LevelerAutoOperationStatus.InProgress:
												break;
											}
											break;
										}
									}
								};
								<command>5__4 = LogicalDeviceLevelerCommandType5.MakeSetPointSetCommand(setPoint);
								<commandCount>5__5 = 0;
								<errorCount>5__6 = 0;
								goto IL_037b;
							}
							ConfiguredTaskAwaiter val2 = <>u__2;
							<>u__2 = default(ConfiguredTaskAwaiter);
							num = (<>1__state = -1);
							goto IL_0374;
							IL_01b8:
							try
							{
								ConfiguredTaskAwaiter<LevelerCommandResultType5> val3;
								if (num != 0)
								{
									val3 = logicalDeviceLevelerType.SendCommandAsync(<command>5__4, <commandCount>5__5, cancellationToken).ConfigureAwait(false).GetAwaiter();
									if (!val3.IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val3;
										((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<LevelerCommandResultType5>, <PerformOperationSetPointSetAsync>d__124>(ref val3, ref this);
										return;
									}
								}
								else
								{
									val3 = <>u__1;
									<>u__1 = default(ConfiguredTaskAwaiter<LevelerCommandResultType5>);
									num = (<>1__state = -1);
								}
								LevelerCommandResultType5 result = val3.GetResult();
								if ((int)result.CommandResult != 0)
								{
									throw new LevelerAutoOperationFailedException(result.CommandResult, result.Fault);
								}
								<errorCount>5__6 = 0;
								TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", "Auto Setpoint Set Operation SendCommand was successful", Array.Empty<object>());
							}
							catch (TimeoutException)
							{
								throw;
							}
							catch (OperationCanceledException)
							{
								throw;
							}
							catch (Exception ex3)
							{
								Exception ex4 = ex3;
								<errorCount>5__6++;
								TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Format("Auto Setpoint Set Operation SendCommand failed, reason: {0}, error count: {1}", (object)ex4.Message, (object)<errorCount>5__6), Array.Empty<object>());
								if (<errorCount>5__6 > 5)
								{
									throw new LevelerAutoOperationFailedException((CommandResult)7, new LevelerFaultType5(LevelerFaultCustomType5.FaultCommandUnknown), ex4);
								}
							}
							<commandCount>5__5++;
							if (<>8__1.operationAck != LevelerAutoOperationAck.Continue)
							{
								throw new LevelerAutoOperationStoppedException();
							}
							if (!<>8__1.operationCompleted)
							{
								ConfiguredTaskAwaitable val4 = Task.Delay(250, cancellationToken).ConfigureAwait(false);
								val2 = ((ConfiguredTaskAwaitable)(ref val4)).GetAwaiter();
								if (!((ConfiguredTaskAwaiter)(ref val2)).IsCompleted)
								{
									num = (<>1__state = 1);
									<>u__2 = val2;
									((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter, <PerformOperationSetPointSetAsync>d__124>(ref val2, ref this);
									return;
								}
								goto IL_0374;
							}
							goto IL_037b;
							IL_0374:
							((ConfiguredTaskAwaiter)(ref val2)).GetResult();
							goto IL_037b;
							IL_037b:
							if (!((CancellationToken)(ref cancellationToken)).IsCancellationRequested && !<>8__1.operationCompleted)
							{
								if (<>8__1.operationAck != LevelerAutoOperationAck.Continue)
								{
									throw new LevelerAutoOperationStoppedException();
								}
								if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType).IsDisposed)
								{
									throw new ObjectDisposedException("ILogicalDeviceDirectLevelerType5");
								}
								if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType).ActiveConnection != 1)
								{
									throw new LevelerNoActiveConnectionException();
								}
								if (!<>8__1.operationRunTimeBetweenAcks.IsRunning)
								{
									throw new LevelerAutoOperationFailedException((CommandResult)1, new LevelerFaultType5(LevelerFaultCustomType5.FaultOperationCanceled));
								}
								if (<>8__1.operationRunTimeBetweenAcks.ElapsedMilliseconds >= 900000)
								{
									throw new TimeoutException(String.Format("Auto Setpoint Set operation timed out as an ACK was not able to be sent within {0}", (object)900000));
								}
								if (!logicalDeviceLevelerType.CommandSessionActivated)
								{
									throw new LevelerSessionActivationRequiredException();
								}
								goto IL_01b8;
							}
							((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Setpoint Set Operation Completed", Array.Empty<object>());
							<command>5__4 = null;
						}
						catch (OperationCanceledException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Setpoint Set Operation Canceled", Array.Empty<object>());
							throw;
						}
						catch (TimeoutException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Setpoint Set Operation Timeout", Array.Empty<object>());
							throw;
						}
						catch (LevelerAutoOperationStoppedException)
						{
							TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Auto Setpoint Set Operation Stopped", Array.Empty<object>());
							throw;
						}
						catch (LevelerException ex8)
						{
							TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Auto Setpoint Set Operation Error ", ((Exception)ex8).Message), Array.Empty<object>());
							throw;
						}
						catch (Exception ex9)
						{
							Exception ex10 = ex9;
							TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Auto Setpoint Set Operation Error ", ex10.Message), Array.Empty<object>());
							throw new LevelerException("Unable to perform Setpoint Set Operation", ex10);
						}
					}
					catch (Object obj2)
					{
						obj = (object)obj2;
						<>7__wrap1 = obj;
					}
					if (<>8__1.operationRunTimeBetweenAcks.IsRunning)
					{
						val = logicalDeviceLevelerType.TryPerformOperationStopAsync(CancellationToken.None).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__3 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<LevelerCommandResultType5>, <PerformOperationSetPointSetAsync>d__124>(ref val, ref this);
							return;
						}
						goto IL_04d5;
					}
					goto IL_04dd;
					IL_04d5:
					val.GetResult();
					goto IL_04dd;
					IL_04dd:
					obj = logicalDeviceLevelerType._lock;
					flag = false;
					try
					{
						Monitor.Enter(obj, ref flag);
						if (<>8__1.operationRunTimeBetweenAcks.IsRunning)
						{
							logicalDeviceLevelerType.CurrentOperation = OperationInProgress.None;
							logicalDeviceLevelerType._currentAutoOperationAction = null;
						}
					}
					finally
					{
						if (num < 0 && flag)
						{
							Monitor.Exit(obj);
						}
					}
					obj = <>7__wrap1;
					if (obj != null)
					{
						ExceptionDispatchInfo.Capture((Exception)(((obj is Exception) ? obj : null) ?? throw obj)).Throw();
					}
					<>7__wrap1 = null;
				}
				catch (Exception ex11)
				{
					Exception exception = ex11;
					<>1__state = -2;
					<>8__1 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformOperationStopAsync>d__126 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceLevelerType5 <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<LevelerCommandResultType5> <>u__1;

			private void MoveNext()
			{
				//IL_00b4: Expected O, but got Unknown
				//IL_0050: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_005c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0075: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				//IL_009f: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5 logicalDeviceLevelerType = <>4__this;
				try
				{
					TaskAwaiter<LevelerCommandResultType5> val;
					if (num != 0)
					{
						val = logicalDeviceLevelerType.TryPerformOperationStopAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<LevelerCommandResultType5>, <PerformOperationStopAsync>d__126>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<LevelerCommandResultType5>);
						num = (<>1__state = -1);
					}
					LevelerCommandResultType5 result = val.GetResult();
					if ((int)result.CommandResult != 0)
					{
						if (((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
						{
							throw new LevelerAutoOperationFailedException((CommandResult)1, new LevelerFaultType5(LevelerFaultCustomType5.FaultOperationCanceled));
						}
						throw new LevelerAutoOperationFailedException(result.CommandResult, result.Fault);
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandAsync>d__84 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<LevelerCommandResultType5> <>t__builder;

			public LogicalDeviceLevelerType5 <>4__this;

			public CancellationToken cancellationToken;

			public int commandCount;

			public ILogicalDeviceLevelerCommandType5 command;

			private ConfiguredTaskAwaiter<LevelerCommandResultType5> <>u__1;

			private void MoveNext()
			{
				//IL_01be: Expected O, but got Unknown
				//IL_0124: Unknown result type (might be due to invalid IL or missing references)
				//IL_0129: Unknown result type (might be due to invalid IL or missing references)
				//IL_0131: Unknown result type (might be due to invalid IL or missing references)
				//IL_0015: Unknown result type (might be due to invalid IL or missing references)
				//IL_014b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0182: Unknown result type (might be due to invalid IL or missing references)
				//IL_0165: Unknown result type (might be due to invalid IL or missing references)
				//IL_019e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00db: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00eb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ef: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f4: Unknown result type (might be due to invalid IL or missing references)
				//IL_0109: Unknown result type (might be due to invalid IL or missing references)
				//IL_010b: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5 logicalDeviceLevelerType = <>4__this;
				LevelerCommandResultType5 result;
				try
				{
					ConfiguredTaskAwaiter<LevelerCommandResultType5> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<LevelerCommandResultType5>);
						num = (<>1__state = -1);
						goto IL_0140;
					}
					if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType).ActiveConnection == 0)
					{
						result = new LevelerCommandResultType5((CommandResult)6);
					}
					else if (((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
					{
						result = new LevelerCommandResultType5((CommandResult)1);
					}
					else if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType).IsDisposed)
					{
						TaggedLog.Debug("ILogicalDeviceDirectLevelerType5", String.Concat("Unable to send command to disposed LogicalDevice ", ((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType).DeviceName), Array.Empty<object>());
						result = new LevelerCommandResultType5((CommandResult)7);
					}
					else
					{
						if (((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceLevelerType) is IDirectCommandLeveler5 directCommandLeveler)
						{
							if (commandCount == 0)
							{
								ILogicalDeviceSourceDirectConnectionIdsCan primaryDeviceSource = ((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType).DeviceService.DeviceSourceManager.GetPrimaryDeviceSource<ILogicalDeviceSourceDirectConnectionIdsCan>((ILogicalDevice)(object)logicalDeviceLevelerType);
								IAdapter obj = ((primaryDeviceSource != null) ? primaryDeviceSource.Gateway : null);
								ILocalDevice obj2 = ((obj != null) ? obj.LocalHost : null);
								if (obj2 != null)
								{
									LocalDeviceExtension.SendDisableInMotionLockoutCommand(obj2, false);
								}
							}
							val = directCommandLeveler.SendDirectCommandLeveler5Async(logicalDeviceLevelerType, command, cancellationToken).ConfigureAwait(false).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<LevelerCommandResultType5>, <SendCommandAsync>d__84>(ref val, ref this);
								return;
							}
							goto IL_0140;
						}
						result = new LevelerCommandResultType5((CommandResult)7);
					}
					goto end_IL_000e;
					IL_0140:
					LevelerCommandResultType5 result2 = val.GetResult();
					if ((int)result2.CommandResult != 0)
					{
						TaggedLog.Debug("ILogicalDeviceDirectLevelerType5", String.Format("Unable to successfully send leveler command because {0}.{1}", (object)result2, (object)result2.UserMessageDtc), Array.Empty<object>());
					}
					else if ((int)result2.CommandResult == 0 && result2.IsFaulted)
					{
						TaggedLog.Debug("ILogicalDeviceDirectLevelerType5", String.Format("Successfully sent leveler command but received dtc: {0}", (object)result2.UserMessageDtc), Array.Empty<object>());
					}
					result = result2;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryPerformOperationAirbagConfigSetAsync>d__115 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<LevelerCommandResultType5> <>t__builder;

			public LevelerAirBagConfig airBagConfig;

			public LogicalDeviceLevelerType5 <>4__this;

			public CancellationToken cancellationToken;

			private LogicalDeviceLevelerCommandMiscConfigType5 <command>5__2;

			private int <commandCount>5__3;

			private int <index>5__4;

			private ConfiguredTaskAwaiter<LevelerCommandResultType5> <>u__1;

			private void MoveNext()
			{
				//IL_01a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_01af: Unknown result type (might be due to invalid IL or missing references)
				//IL_01be: Expected O, but got Unknown
				//IL_01e9: Expected O, but got Unknown
				//IL_00f8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fd: Unknown result type (might be due to invalid IL or missing references)
				//IL_0105: Unknown result type (might be due to invalid IL or missing references)
				//IL_0130: Unknown result type (might be due to invalid IL or missing references)
				//IL_016c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0092: Unknown result type (might be due to invalid IL or missing references)
				//IL_0098: Invalid comparison between Unknown and I4
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_00af: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_00df: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5 logicalDeviceLevelerType = <>4__this;
				LevelerCommandResultType5 result;
				try
				{
					LevelerCommandResultType5 levelerCommandResultType = default(LevelerCommandResultType5);
					if (num != 0)
					{
						levelerCommandResultType = new LevelerCommandResultType5((CommandResult)7);
					}
					try
					{
						if (num != 0)
						{
							<command>5__2 = airBagConfig switch
							{
								LevelerAirBagConfig.LongTime => LogicalDeviceLevelerCommandType5.MakeSetMiscConfigCommand(LevelerMiscConfig.SetAirbagLongTime), 
								LevelerAirBagConfig.ShortTime => LogicalDeviceLevelerCommandType5.MakeSetMiscConfigCommand(LevelerMiscConfig.SetAirbagShortTime), 
								_ => throw new LevelerOperationFailedException((CommandResult)7, new LevelerFaultType5(LevelerFaultCustomType5.FaultCommandBadArgs)), 
							};
							<commandCount>5__3 = 0;
							<index>5__4 = 0;
							goto IL_0151;
						}
						ConfiguredTaskAwaiter<LevelerCommandResultType5> val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<LevelerCommandResultType5>);
						num = (<>1__state = -1);
						goto IL_0114;
						IL_0151:
						if (<index>5__4 < 3 && !((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
						{
							if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType).IsDisposed)
							{
								throw new ObjectDisposedException("ILogicalDeviceDirectLevelerType5");
							}
							if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType).ActiveConnection != 1)
							{
								throw new LevelerNoActiveConnectionException();
							}
							val = logicalDeviceLevelerType.SendCommandAsync(<command>5__2, <commandCount>5__3, cancellationToken).ConfigureAwait(false).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<LevelerCommandResultType5>, <TryPerformOperationAirbagConfigSetAsync>d__115>(ref val, ref this);
								return;
							}
							goto IL_0114;
						}
						throw new LevelerOperationFailedException(levelerCommandResultType.CommandResult, levelerCommandResultType.Fault);
						IL_0114:
						levelerCommandResultType = val.GetResult();
						<commandCount>5__3++;
						if ((int)levelerCommandResultType.CommandResult != 0)
						{
							<index>5__4++;
							goto IL_0151;
						}
						result = new LevelerCommandResultType5((CommandResult)0);
					}
					catch (LevelerOperationFailedException ex)
					{
						TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Unable to perform stop ", ((Exception)ex).Message), Array.Empty<object>());
						result = new LevelerCommandResultType5(ex.Result, new Nullable<LevelerFaultType5>(ex.Fault));
					}
					catch (Exception ex2)
					{
						Exception ex3 = ex2;
						TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Unable to perform stop ", ex3.Message), Array.Empty<object>());
						result = new LevelerCommandResultType5((CommandResult)7);
					}
				}
				catch (Exception ex4)
				{
					Exception exception = ex4;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryPerformOperationClearFaultAsync>d__121 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<LevelerCommandResultType5> <>t__builder;

			public LogicalDeviceLevelerType5 <>4__this;

			public CancellationToken cancellationToken;

			private LogicalDeviceLevelerCommandMiscConfigType5 <command>5__2;

			private int <index>5__3;

			private ConfiguredTaskAwaiter<LevelerCommandResultType5> <>u__1;

			private void MoveNext()
			{
				//IL_0158: Unknown result type (might be due to invalid IL or missing references)
				//IL_0167: Expected O, but got Unknown
				//IL_0192: Expected O, but got Unknown
				//IL_00bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0121: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Invalid comparison between Unknown and I4
				//IL_004e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0072: Unknown result type (might be due to invalid IL or missing references)
				//IL_007d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0082: Unknown result type (might be due to invalid IL or missing references)
				//IL_0086: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a2: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5 logicalDeviceLevelerType = <>4__this;
				LevelerCommandResultType5 result;
				try
				{
					LevelerCommandResultType5 levelerCommandResultType = default(LevelerCommandResultType5);
					if (num != 0)
					{
						levelerCommandResultType = new LevelerCommandResultType5((CommandResult)7);
					}
					try
					{
						if (num != 0)
						{
							<command>5__2 = LogicalDeviceLevelerCommandType5.MakeSetMiscConfigCommand(LevelerMiscConfig.ClearFaults);
							<index>5__3 = 0;
							goto IL_0106;
						}
						ConfiguredTaskAwaiter<LevelerCommandResultType5> val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<LevelerCommandResultType5>);
						num = (<>1__state = -1);
						goto IL_00d7;
						IL_00d7:
						levelerCommandResultType = val.GetResult();
						if ((int)levelerCommandResultType.CommandResult != 0)
						{
							<index>5__3++;
							goto IL_0106;
						}
						result = new LevelerCommandResultType5((CommandResult)0);
						goto end_IL_001a;
						IL_0106:
						if (<index>5__3 < 3 && !((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
						{
							if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType).IsDisposed)
							{
								throw new ObjectDisposedException("ILogicalDeviceDirectLevelerType5");
							}
							if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType).ActiveConnection != 1)
							{
								throw new LevelerNoActiveConnectionException();
							}
							val = logicalDeviceLevelerType.SendCommandAsync(<command>5__2, <index>5__3, cancellationToken).ConfigureAwait(false).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<LevelerCommandResultType5>, <TryPerformOperationClearFaultAsync>d__121>(ref val, ref this);
								return;
							}
							goto IL_00d7;
						}
						throw new LevelerOperationFailedException(levelerCommandResultType.CommandResult, levelerCommandResultType.Fault);
						end_IL_001a:;
					}
					catch (LevelerOperationFailedException ex)
					{
						TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Unable to perform clear fault ", ((Exception)ex).Message), Array.Empty<object>());
						result = new LevelerCommandResultType5(ex.Result);
					}
					catch (Exception ex2)
					{
						Exception ex3 = ex2;
						TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Unable to perform clear fault ", ex3.Message), Array.Empty<object>());
						result = new LevelerCommandResultType5((CommandResult)7);
					}
				}
				catch (Exception ex4)
				{
					Exception exception = ex4;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryPerformOperationStopAsync>d__127 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<LevelerCommandResultType5> <>t__builder;

			public LogicalDeviceLevelerType5 <>4__this;

			public CancellationToken cancellationToken;

			private int <i>5__2;

			private int <commandCount>5__3;

			private int <index>5__4;

			private TaskAwaiter<LevelerCommandResultType5> <>u__1;

			private void MoveNext()
			{
				//IL_0183: Unknown result type (might be due to invalid IL or missing references)
				//IL_018f: Unknown result type (might be due to invalid IL or missing references)
				//IL_019d: Expected O, but got Unknown
				//IL_01eb: Expected O, but got Unknown
				//IL_00db: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0113: Unknown result type (might be due to invalid IL or missing references)
				//IL_014a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0077: Unknown result type (might be due to invalid IL or missing references)
				//IL_007d: Invalid comparison between Unknown and I4
				//IL_0070: Unknown result type (might be due to invalid IL or missing references)
				//IL_009c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ab: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c2: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5 logicalDeviceLevelerType = <>4__this;
				LevelerCommandResultType5 result;
				try
				{
					if (num == 0)
					{
						goto IL_004a;
					}
					LevelerCommandResultType5 levelerCommandResultType = new LevelerCommandResultType5((CommandResult)7);
					<i>5__2 = 0;
					goto IL_01d9;
					IL_004a:
					try
					{
						if (num != 0)
						{
							<commandCount>5__3 = 0;
							<index>5__4 = 0;
							goto IL_012f;
						}
						TaskAwaiter<LevelerCommandResultType5> val = <>u__1;
						<>u__1 = default(TaskAwaiter<LevelerCommandResultType5>);
						num = (<>1__state = -1);
						goto IL_00f7;
						IL_00f7:
						levelerCommandResultType = val.GetResult();
						<commandCount>5__3++;
						if ((int)levelerCommandResultType.CommandResult == 0)
						{
							levelerCommandResultType = new LevelerCommandResultType5((CommandResult)0);
						}
						<index>5__4++;
						goto IL_012f;
						IL_012f:
						if (<index>5__4 < 3 && !((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
						{
							if (((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType).IsDisposed)
							{
								throw new ObjectDisposedException("ILogicalDeviceDirectLevelerType5");
							}
							if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType).ActiveConnection != 1)
							{
								throw new LevelerNoActiveConnectionException();
							}
							LogicalDeviceLevelerCommandPanicStopType5 command = LogicalDeviceLevelerCommandType5.MakePanicStopCommand();
							val = logicalDeviceLevelerType.SendCommandAsync(command, <commandCount>5__3, cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<LevelerCommandResultType5>, <TryPerformOperationStopAsync>d__127>(ref val, ref this);
								return;
							}
							goto IL_00f7;
						}
						throw new LevelerAutoOperationFailedException(levelerCommandResultType.CommandResult, levelerCommandResultType.Fault);
					}
					catch (LevelerAutoOperationFailedException ex)
					{
						TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Unable to perform stop ", ((Exception)ex).Message), Array.Empty<object>());
						levelerCommandResultType = new LevelerCommandResultType5(ex.Result, new Nullable<LevelerFaultType5>(ex.Fault));
					}
					catch (Exception ex2)
					{
						Exception ex3 = ex2;
						TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Unable to perform stop ", ex3.Message), Array.Empty<object>());
						levelerCommandResultType = new LevelerCommandResultType5((CommandResult)7);
					}
					<i>5__2++;
					goto IL_01d9;
					IL_01d9:
					if (<i>5__2 < 3)
					{
						TaggedLog.Debug("ILogicalDeviceDirectLevelerType5", String.Format("Leveler 5 Operation Stop Iteration {0}", (object)<i>5__2), Array.Empty<object>());
						goto IL_004a;
					}
					result = levelerCommandResultType;
				}
				catch (Exception ex4)
				{
					Exception exception = ex4;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <UpdateAutoStepsCollectionWithLatestDetailsAsync>d__74 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public BaseObservableCollection<ValueTuple<LevelerAutoOperationStep, int>> collection;

			public LogicalDeviceLevelerType5 <>4__this;

			public int expectedStepsCount;

			public CancellationToken cancelToken;

			private <>c__DisplayClass74_0 <>8__1;

			private TaskAwaiter<IEnumerable<LevelerAutoOperationStep>> <>u__1;

			private TaskAwaiter<bool> <>u__2;

			private void MoveNext()
			{
				//IL_0118: Expected O, but got Unknown
				//IL_0079: Unknown result type (might be due to invalid IL or missing references)
				//IL_007e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0085: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00be: Expected O, but got Unknown
				//IL_00be: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fd: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				//IL_004b: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00da: Unknown result type (might be due to invalid IL or missing references)
				//IL_005f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0060: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5 logicalDeviceLevelerType = <>4__this;
				try
				{
					TaskAwaiter<bool> val;
					TaskAwaiter<IEnumerable<LevelerAutoOperationStep>> val2;
					if (num != 0)
					{
						if (num == 1)
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_010c;
						}
						<>8__1 = new <>c__DisplayClass74_0();
						<>8__1.collection = collection;
						val2 = logicalDeviceLevelerType.GetAutoStepDetailsAsync(expectedStepsCount, cancelToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<IEnumerable<LevelerAutoOperationStep>>, <UpdateAutoStepsCollectionWithLatestDetailsAsync>d__74>(ref val2, ref this);
							return;
						}
					}
					else
					{
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<IEnumerable<LevelerAutoOperationStep>>);
						num = (<>1__state = -1);
					}
					IEnumerable<LevelerAutoOperationStep> result = val2.GetResult();
					<>8__1.autoStepsList = result;
					val = MainThread.RequestMainThreadActionAsync((Action)delegate
					{
						//IL_0007: Unknown result type (might be due to invalid IL or missing references)
						//IL_000c: Unknown result type (might be due to invalid IL or missing references)
						//IL_003b: Unknown result type (might be due to invalid IL or missing references)
						SuppressEventsDisposable<ValueTuple<LevelerAutoOperationStep, int>> val3 = <>8__1.collection.SuppressEvents(false);
						try
						{
							((Collection<ValueTuple<LevelerAutoOperationStep, int>>)(object)<>8__1.collection).Clear();
							int num2 = 0;
							IEnumerator<LevelerAutoOperationStep> enumerator = <>8__1.autoStepsList.GetEnumerator();
							try
							{
								while (((IEnumerator)enumerator).MoveNext())
								{
									LevelerAutoOperationStep current = enumerator.Current;
									((Collection<ValueTuple<LevelerAutoOperationStep, int>>)(object)<>8__1.collection).Add(new ValueTuple<LevelerAutoOperationStep, int>(current, num2++));
								}
							}
							finally
							{
								if (enumerator != null)
								{
									((IDisposable)enumerator).Dispose();
								}
							}
						}
						finally
						{
							((IDisposable)val3/*cast due to .constrained prefix*/).Dispose();
						}
					}).GetAwaiter();
					if (!val.IsCompleted)
					{
						num = (<>1__state = 1);
						<>u__2 = val;
						((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <UpdateAutoStepsCollectionWithLatestDetailsAsync>d__74>(ref val, ref this);
						return;
					}
					goto IL_010c;
					IL_010c:
					val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>8__1 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <UpdateFirmwareAsync>d__95 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceLevelerType5 <>4__this;

			public CancellationToken cancellationToken;

			public IReadOnlyList<byte> data;

			public Func<ILogicalDeviceTransferProgress, bool> progressAck;

			public Dictionary<FirmwareUpdateOption, object> options;

			private ILogicalDeviceFirmwareUpdateSession <firmwareUpdateSession>5__2;

			private TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice?> <>u__1;

			private TaskAwaiter <>u__2;

			private void MoveNext()
			{
				//IL_0142: Expected O, but got Unknown
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_0103: Unknown result type (might be due to invalid IL or missing references)
				//IL_0108: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00eb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ed: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5 logicalDeviceLevelerType = <>4__this;
				try
				{
					TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice> val;
					if (num != 0)
					{
						if (num == 1)
						{
							goto IL_00a9;
						}
						val = FirmwareUpdateSupportEx.TryGetSupportedFirmwareUpdateDeviceSource(((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceLevelerType, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>, <UpdateFirmwareAsync>d__95>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>);
						num = (<>1__state = -1);
					}
					ILogicalDeviceSourceDirectFirmwareUpdateDevice result = val.GetResult();
					if (result == null)
					{
						throw new FirmwareUpdateNotSupportedException((ILogicalDevice)(object)logicalDeviceLevelerType, (FirmwareUpdateSupport)0, (Exception)null);
					}
					<firmwareUpdateSession>5__2 = ((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType).DeviceService.FirmwareUpdateManager.StartFirmwareUpdateSession((ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceLevelerType);
					goto IL_00a9;
					IL_00a9:
					try
					{
						TaskAwaiter val2;
						if (num != 1)
						{
							val2 = ((IFirmwareUpdateDevice)result).UpdateFirmwareAsync(<firmwareUpdateSession>5__2, data, progressAck, cancellationToken, (IReadOnlyDictionary<FirmwareUpdateOption, object>)(object)options).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <UpdateFirmwareAsync>d__95>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
					}
					finally
					{
						if (num < 0 && <firmwareUpdateSession>5__2 != null)
						{
							((IDisposable)<firmwareUpdateSession>5__2).Dispose();
						}
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<firmwareUpdateSession>5__2 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<firmwareUpdateSession>5__2 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "ILogicalDeviceDirectLevelerType5";

		public const int OperationSendDelayMs = 250;

		public const int OperationAckTimeoutMs = 900000;

		public const int OperationRetryCount = 3;

		public const int CommandRetryCount = 5;

		private const SetPointType DefaultFactorySetPoint = SetPointType.FactorySetpoint;

		private const SetPointType DefaultSetPoint1 = SetPointType.Option2;

		private const SetPointType DefaultSetPoint2 = SetPointType.Option3;

		private const SetPointType DefaultSetPoint3 = SetPointType.Option4;

		public const string SetPointNamesChangedAlertKey = "SetPointNamesChangedAlert";

		private readonly object _lock = (object)new Object();

		private const uint DelayStatusChangedLogMessageThrottleTimeMs = 60000u;

		private readonly Stopwatch _delayStatusChangedLogMessageThrottleTimer = Stopwatch.StartNew();

		private readonly TimeSpan DelayBetweenSetpointPidReadsOnConnectionChange = TimeSpan.FromMinutes(5.0);

		private Nullable<DateTime> _lastSetpointPidReadDueToConnectionChangeTime;

		private readonly ConcurrentDictionary<string, ILogicalDeviceAlert> _alertDict = new ConcurrentDictionary<string, ILogicalDeviceAlert>();

		private byte _lastAlertByte;

		private static readonly List<PID> AutoStepsDetailPidList;

		private const int AutoStepsPerPid = 6;

		protected ILogicalDevicePidULong SupportedFeaturesPid;

		private FeatureSupport _featuresSupported = FeatureSupport.Unknown;

		public const int DefaultJumpToBootTimeMs = 30000;

		private readonly Dictionary<FirmwareUpdateOption, string> _defaultFirmwareUpdateOptions = new Dictionary<FirmwareUpdateOption, string>();

		private Action<ILevelerAutoStepsProgress>? _currentAutoOperationAction;

		private Action<LevelerJacksAndAirBagType5>? _currentManualMovementOperationAction;

		private const int NumberOfStopOperationsToPerform = 3;

		private const string DefaultSetPointName = "Set Point";

		public override string DeviceName => "Auto Level PRO";

		public override string DeviceNameShort => ((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)this).DeviceName;

		public override string DeviceNameShortAbbreviated => ((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)this).DeviceName;

		[field: CompilerGenerated]
		public LogicalDevicePidProxyLevelerType5CustomSetPointNames CustomSetPointNamesPid
		{
			[CompilerGenerated]
			get;
		}

		public LogicalDeviceLevelerStatusExtendedType5AutoStep DeviceStatusExtendedAutoStep
		{
			get
			{
				ILogicalDeviceLevelerStatusExtendedType5 logicalDeviceLevelerStatusExtendedType = default(ILogicalDeviceLevelerStatusExtendedType5);
				if (!base.DeviceStatusExtendedDictionary.TryGetValue(LogicalDeviceLevelerStatusExtendedType5Kind.AutoStep, ref logicalDeviceLevelerStatusExtendedType) || !(logicalDeviceLevelerStatusExtendedType is LogicalDeviceLevelerStatusExtendedType5AutoStep result))
				{
					return LogicalDeviceLevelerStatusExtendedType5AutoStep.MakeDefaultExtendedStatus();
				}
				return result;
			}
		}

		public LogicalDeviceLevelerStatusExtendedType5JackStrokeLength DeviceStatusExtendedJackStrokeLength
		{
			get
			{
				ILogicalDeviceLevelerStatusExtendedType5 logicalDeviceLevelerStatusExtendedType = default(ILogicalDeviceLevelerStatusExtendedType5);
				if (!base.DeviceStatusExtendedDictionary.TryGetValue(LogicalDeviceLevelerStatusExtendedType5Kind.JackStrokeLength, ref logicalDeviceLevelerStatusExtendedType) || !(logicalDeviceLevelerStatusExtendedType is LogicalDeviceLevelerStatusExtendedType5JackStrokeLength result))
				{
					return LogicalDeviceLevelerStatusExtendedType5JackStrokeLength.MakeDefaultExtendedStatus();
				}
				return result;
			}
		}

		public LevelerJacksAndAirBagType5 JacksOrAirbagMoving
		{
			get
			{
				if (!((LogicalDevice<LogicalDeviceLevelerStatusType5, LogicalDeviceLevelerCapabilityType5>)(object)this).DeviceStatus.ActionTakingPlace)
				{
					return LevelerJacksAndAirBagType5.None;
				}
				return JacksOrAirbagMovementAllowed;
			}
		}

		public LevelerJacksAndAirBagType5 JacksOrAirbagMovementAllowed
		{
			get
			{
				//IL_000b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0011: Invalid comparison between Unknown and I4
				if (((CommonDisposableNotifyPropertyChanged)this).IsDisposed)
				{
					return LevelerJacksAndAirBagType5.None;
				}
				if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)this).ActiveConnection != 1)
				{
					return LevelerJacksAndAirBagType5.None;
				}
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceLevelerStatusType5, LogicalDeviceLevelerCapabilityType5>)(object)this).DeviceStatus).HasData)
				{
					return LevelerJacksAndAirBagType5.None;
				}
				return ((LogicalDevice<LogicalDeviceLevelerStatusType5, LogicalDeviceLevelerCapabilityType5>)(object)this).DeviceStatus.JacksAndAirbagState;
			}
		}

		[field: CompilerGenerated]
		public bool MuteDebugUpdateDeviceStatusChanged
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		}

		public bool CanCustomSetPointNamesBeSet
		{
			get
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)this).ActiveConnection != 0)
				{
					return _wasCustomSetPointNamesRead;
				}
				return false;
			}
		}

		public LevelerSetPointNames CurrentSetPointNames
		{
			get
			{
				if (!_wasCustomSetPointNamesRead)
				{
					return new LevelerSetPointNames(SetPointType.FactorySetpoint, SetPointType.Option2, SetPointType.Option3, SetPointType.Option4);
				}
				return CustomSetPointNamesPid.SetPointNames;
			}
		}

		[field: CompilerGenerated]
		private bool _wasCustomSetPointNamesRead
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			set;
		}

		public IEnumerable<ILogicalDeviceAlert> Alerts => (IEnumerable<ILogicalDeviceAlert>)(object)_alertDict.Values;

		public AsyncValueCachedState CurrentSetPointNamesState => ((LogicalDevicePidProxy<ILogicalDevicePidArrayEnum<SetPointType>>)CustomSetPointNamesPid).ValueState;

		[field: CompilerGenerated]
		public virtual bool CommandSessionActivated
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			private set;
		}

		public LogicalDeviceExScope VoltageMeasurementBatteryPidScope => (LogicalDeviceExScope)2;

		[field: CompilerGenerated]
		public ILogicalDevicePidFixedPoint VoltageMeasurementBatteryPid
		{
			[CompilerGenerated]
			get;
		}

		public bool IsVoltagePidReadSupported => true;

		public FeatureSupport FeatureSupported
		{
			get
			{
				return _featuresSupported;
			}
			set
			{
				((CommonNotifyPropertyChanged)this).SetBackingField<FeatureSupport>(ref _featuresSupported, value, "FeatureSupported", Array.Empty<string>());
			}
		}

		public IReadOnlyDictionary<FirmwareUpdateOption, string> DefaultFirmwareUpdateOptions
		{
			get
			{
				lock (_defaultFirmwareUpdateOptions)
				{
					if (_defaultFirmwareUpdateOptions.Count != 0)
					{
						return (IReadOnlyDictionary<FirmwareUpdateOption, string>)(object)_defaultFirmwareUpdateOptions;
					}
					_defaultFirmwareUpdateOptions[(FirmwareUpdateOption)1] = String.Format("{0}", (object)(UInt32)163840);
					if (IsJumpToBootPidSupported)
					{
						_defaultFirmwareUpdateOptions[(FirmwareUpdateOption)3] = String.Format("{0}", (object)30000);
					}
					return (IReadOnlyDictionary<FirmwareUpdateOption, string>)(object)_defaultFirmwareUpdateOptions;
				}
			}
		}

		public bool IsJumpToBootPidSupported => true;

		public bool IsJumpToBootRequiredForFirmwareUpdate => true;

		[field: CompilerGenerated]
		public ILogicalDevicePidJumpToBoot JumpToBootPid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public OperationInProgress CurrentOperation
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			private set;
		}

		public LogicalDeviceLevelerType5(ILogicalDeviceId logicalDeviceId, LogicalDeviceLevelerCapabilityType5 levelerCapability, ILogicalDeviceService deviceService, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceLevelerStatusType5(), (ILogicalDeviceLevelerStatusExtendedType5)new LogicalDeviceLevelerStatusExtendedType5AutoStep(), levelerCapability, deviceService, isFunctionClassChangeable)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_0020: Unknown result type (might be due to invalid IL or missing references)
			//IL_0025: Unknown result type (might be due to invalid IL or missing references)
			//IL_006d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0077: Expected O, but got Unknown
			//IL_0081: Unknown result type (might be due to invalid IL or missing references)
			//IL_008b: Expected O, but got Unknown
			//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ae: Expected O, but got Unknown
			JumpToBootPid = (ILogicalDevicePidJumpToBoot)new LogicalDevicePidJumpToBoot((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)390), (LogicalDeviceSessionType)3);
			VoltageMeasurementBatteryPid = (ILogicalDevicePidFixedPoint)new LogicalDevicePidFixedPoint((FixedPointType)1, (ILogicalDevice)(object)this, PID.BATTERY_VOLTAGE, (LogicalDeviceSessionType)0, (Func<ulong, bool>)null);
			CustomSetPointNamesPid = new LogicalDevicePidProxyLevelerType5CustomSetPointNames();
			((CommonNotifyPropertyChanged)CustomSetPointNamesPid).PropertyChanged += new PropertyChangedEventHandler(OnSetPointNamesPropertyChanged);
		}

		public override void OnDeviceOnlineChanged()
		{
			((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)this).OnDeviceOnlineChanged();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("JacksOrAirbagMoving", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("JacksOrAirbagMovementAllowed", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("CanCustomSetPointNamesBeSet", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("CurrentSetPointNames", true);
			SetPointLogicOnDeviceConnection();
		}

		public override void OnDeviceStatusChanged()
		{
			//IL_0040: Unknown result type (might be due to invalid IL or missing references)
			//IL_0046: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDevice<LogicalDeviceLevelerStatusType5, LogicalDeviceLevelerCapabilityType5>)(object)this).OnDeviceStatusChanged();
			_currentManualMovementOperationAction?.Invoke(JacksOrAirbagMoving);
			if (!((LogicalDevice<LogicalDeviceLevelerStatusType5, LogicalDeviceLevelerCapabilityType5>)(object)this).DeviceStatus.ExtendedStatusActive && DeviceStatusExtendedAutoStep.OperationCodeProgress != LevelerOperationCodeProgress.None)
			{
				base.UpdateDeviceStatusExtended((ILogicalDeviceLevelerStatusExtendedType5)LogicalDeviceLevelerStatusExtendedType5AutoStep.MakeDefaultExtendedStatus(), default(Nullable<DateTime>));
			}
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("JacksOrAirbagMoving", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("JacksOrAirbagMovementAllowed", true);
		}

		protected override void OnDeviceStatusExtendedChanged(ILogicalDeviceLevelerStatusExtendedType5 dataChanged, LogicalDeviceLevelerStatusExtendedType5Kind key)
		{
			base.OnDeviceStatusExtendedChanged(dataChanged, key);
			switch (key)
			{
			case LogicalDeviceLevelerStatusExtendedType5Kind.AutoStep:
				_currentAutoOperationAction?.Invoke(TryMakeAutoStepsProgress());
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("DeviceStatusExtendedAutoStep", true);
				break;
			case LogicalDeviceLevelerStatusExtendedType5Kind.JackStrokeLength:
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("DeviceStatusExtendedJackStrokeLength", true);
				break;
			}
		}

		protected override void DebugUpdateDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, uint dataLength, string optionalText = "")
		{
			if (_delayStatusChangedLogMessageThrottleTimer.ElapsedMilliseconds >= 60000)
			{
				((LogicalDevice<LogicalDeviceLevelerStatusType5, LogicalDeviceLevelerCapabilityType5>)(object)this).DebugUpdateDeviceStatusChanged(oldStatusData, statusData, dataLength, String.Format("{0:F1}/{1:F1} - Skipped debug messages over {2}ms", (object)((LogicalDevice<LogicalDeviceLevelerStatusType5, LogicalDeviceLevelerCapabilityType5>)(object)this).DeviceStatus.XAngle, (object)((LogicalDevice<LogicalDeviceLevelerStatusType5, LogicalDeviceLevelerCapabilityType5>)(object)this).DeviceStatus.YAngle, (object)(UInt32)60000));
				_delayStatusChangedLogMessageThrottleTimer.Restart();
			}
		}

		protected override bool ShouldNotifyDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, int dataLength, int matchingDataLength)
		{
			if (MuteDebugUpdateDeviceStatusChanged)
			{
				return false;
			}
			if (dataLength != matchingDataLength)
			{
				return true;
			}
			return false;
		}

		private void OnSetPointNamesPropertyChanged(object sender, PropertyChangedEventArgs e)
		{
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("CurrentSetPointNamesState", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("CurrentSetPointNames", true);
		}

		public Task SetCustomSetPointNames(LevelerSetPointNames names, CancellationToken cancellationToken)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			return CustomSetPointNamesPid.WriteAsync(names, cancellationToken);
		}

		private void SetPointLogicOnDeviceConnection()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0011: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a7: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ac: Unknown result type (might be due to invalid IL or missing references)
			//IL_00b1: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0023: Unknown result type (might be due to invalid IL or missing references)
			//IL_0025: Unknown result type (might be due to invalid IL or missing references)
			//IL_002a: Unknown result type (might be due to invalid IL or missing references)
			//IL_00f3: Unknown result type (might be due to invalid IL or missing references)
			//IL_0040: Unknown result type (might be due to invalid IL or missing references)
			//IL_0043: Unknown result type (might be due to invalid IL or missing references)
			//IL_0048: Unknown result type (might be due to invalid IL or missing references)
			//IL_004d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0036: Unknown result type (might be due to invalid IL or missing references)
			//IL_003c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0052: Unknown result type (might be due to invalid IL or missing references)
			//IL_0054: Unknown result type (might be due to invalid IL or missing references)
			//IL_0059: Unknown result type (might be due to invalid IL or missing references)
			//IL_0068: Unknown result type (might be due to invalid IL or missing references)
			//IL_006d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0080: Unknown result type (might be due to invalid IL or missing references)
			//IL_0085: Unknown result type (might be due to invalid IL or missing references)
			if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)this).ActiveConnection == 0)
			{
				return;
			}
			try
			{
				Nullable<DateTime> lastSetpointPidReadDueToConnectionChangeTime = _lastSetpointPidReadDueToConnectionChangeTime;
				if (lastSetpointPidReadDueToConnectionChangeTime.HasValue)
				{
					DateTime now = DateTime.Now;
					lastSetpointPidReadDueToConnectionChangeTime = _lastSetpointPidReadDueToConnectionChangeTime;
					Nullable<TimeSpan> val = (lastSetpointPidReadDueToConnectionChangeTime.HasValue ? new Nullable<TimeSpan>(now - lastSetpointPidReadDueToConnectionChangeTime.GetValueOrDefault()) : default(Nullable<TimeSpan>));
					TimeSpan delayBetweenSetpointPidReadsOnConnectionChange = DelayBetweenSetpointPidReadsOnConnectionChange;
					if (val.HasValue && val.GetValueOrDefault() < delayBetweenSetpointPidReadsOnConnectionChange)
					{
						delayBetweenSetpointPidReadsOnConnectionChange = DelayBetweenSetpointPidReadsOnConnectionChange;
						TaggedLog.Debug("ILogicalDeviceDirectLevelerType5", String.Format("Leveler 5s SetPointLogicOnDeviceConnection was called but exited early due to executing too often. We only allow the PID read to occur every {0} minutes", (object)((TimeSpan)(ref delayBetweenSetpointPidReadsOnConnectionChange)).TotalMinutes), Array.Empty<object>());
						return;
					}
				}
				_lastSetpointPidReadDueToConnectionChangeTime = new Nullable<DateTime>(DateTime.Now);
				if (((LogicalDevicePidProxy<ILogicalDevicePidArrayEnum<SetPointType>>)CustomSetPointNamesPid).DevicePid == null)
				{
					((LogicalDevicePidProxy<ILogicalDevicePidArrayEnum<SetPointType>>)CustomSetPointNamesPid).DevicePid = MakeLevelerSetPointNamesPid();
				}
				TaggedLog.Debug("ILogicalDeviceDirectLevelerType5", "Leveler 5 SetPoint names read triggered by the device coming online. Attempting to read Setpoint names.", Array.Empty<object>());
				((ILogicalDevicePid<SetPointType[]>)(object)((LogicalDevicePidProxy<ILogicalDevicePidArrayEnum<SetPointType>>)CustomSetPointNamesPid).DevicePid).ReadAsync(CancellationToken.None).ContinueWith((Action<Task<SetPointType[]>>)([CompilerGenerated] (Task<SetPointType[]> task) =>
				{
					TaggedLog.Debug("ILogicalDeviceDirectLevelerType5", "Leveler 5 SetPoint names read was successful.", Array.Empty<object>());
					_wasCustomSetPointNamesRead = true;
					((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("CurrentSetPointNames", true);
				}), (TaskContinuationOptions)393216);
			}
			catch (Exception)
			{
				TaggedLog.Debug("ILogicalDeviceDirectLevelerType5", "Leveler 5 SetPoint names read was triggered by the device coming online but failed, this may be an older leveler that doesn't support custom names.", Array.Empty<object>());
			}
		}

		public void UpdateAlert(string alertName, bool isActive, Nullable<int> count)
		{
			TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "UpdateAlert(string, bool, int) is not supported for this device", Array.Empty<object>());
		}

		protected virtual ILogicalDevicePidArrayEnum<SetPointType> MakeLevelerSetPointNamesPid()
		{
			return (ILogicalDevicePidArrayEnum<SetPointType>)(object)new LogicalDevicePidArrayEnum<SetPointType>((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)407), (LogicalDeviceSessionType)2, 6);
		}

		public void UpdateAlert(byte alertId, byte rawData)
		{
			//IL_0070: Unknown result type (might be due to invalid IL or missing references)
			if (((LogicalDevicePidProxy<ILogicalDevicePidArrayEnum<SetPointType>>)CustomSetPointNamesPid).DevicePid == null)
			{
				((LogicalDevicePidProxy<ILogicalDevicePidArrayEnum<SetPointType>>)CustomSetPointNamesPid).DevicePid = MakeLevelerSetPointNamesPid();
			}
			if (rawData != _lastAlertByte)
			{
				_lastAlertByte = rawData;
				if (((LogicalDevicePidProxy<ILogicalDevicePidArrayEnum<SetPointType>>)CustomSetPointNamesPid).DevicePid == null)
				{
					TaggedLog.Error("ILogicalDeviceDirectLevelerType5", "Leveler 5 CustomSetPointAlert triggered, but was unable to pull the new results", Array.Empty<object>());
					return;
				}
				TaggedLog.Information("ILogicalDeviceDirectLevelerType5", "Leveler 5 Set Point names alert triggered. Updating data.", Array.Empty<object>());
				((ILogicalDevicePid<SetPointType[]>)(object)((LogicalDevicePidProxy<ILogicalDevicePidArrayEnum<SetPointType>>)CustomSetPointNamesPid).DevicePid).ReadAsync(CancellationToken.None);
			}
		}

		public override void Dispose(bool disposing)
		{
			//IL_0014: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Expected O, but got Unknown
			base.Dispose(disposing);
			((CommonNotifyPropertyChanged)CustomSetPointNamesPid).PropertyChanged -= new PropertyChangedEventHandler(OnSetPointNamesPropertyChanged);
			((CommonDisposableNotifyPropertyChanged)CustomSetPointNamesPid).TryDispose();
		}

		public override LogicalDeviceLevelerStatusExtendedType5Kind ToExtendedByteKey(byte extendedByte)
		{
			return (LogicalDeviceLevelerStatusExtendedType5Kind)extendedByte;
		}

		protected override ILogicalDeviceLevelerStatusExtendedType5 MakeNewStatusExtendedFromMultiplexedData(LogicalDeviceLevelerStatusExtendedType5Kind extendedByteKey)
		{
			return MakeNewStatusExtendedFromMultiplexedDataImpl(extendedByteKey);
		}

		public static ILogicalDeviceLevelerStatusExtendedType5 MakeNewStatusExtendedFromMultiplexedDataImpl(LogicalDeviceLevelerStatusExtendedType5Kind extendedByteKey)
		{
			//IL_0025: Unknown result type (might be due to invalid IL or missing references)
			return extendedByteKey switch
			{
				LogicalDeviceLevelerStatusExtendedType5Kind.AutoStep => new LogicalDeviceLevelerStatusExtendedType5AutoStep(), 
				LogicalDeviceLevelerStatusExtendedType5Kind.JackStrokeLength => new LogicalDeviceLevelerStatusExtendedType5JackStrokeLength(), 
				_ => throw new ArgumentOutOfRangeException("extendedByteKey", (object)extendedByteKey, "Unknown Extended Byte Key"), 
			};
		}

		public Task ActivateSession(CancellationToken cancelToken)
		{
			CommandSessionActivated = true;
			return Task.CompletedTask;
		}

		public void DeactivateSession()
		{
			CommandSessionActivated = false;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task UpdateAutoStepsCollectionWithLatestDetailsAsync(int expectedStepsCount, BaseObservableCollection<ValueTuple<LevelerAutoOperationStep, int>> collection, CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<UpdateAutoStepsCollectionWithLatestDetailsAsync>d__74 <UpdateAutoStepsCollectionWithLatestDetailsAsync>d__ = default(<UpdateAutoStepsCollectionWithLatestDetailsAsync>d__74);
			<UpdateAutoStepsCollectionWithLatestDetailsAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<UpdateAutoStepsCollectionWithLatestDetailsAsync>d__.<>4__this = this;
			<UpdateAutoStepsCollectionWithLatestDetailsAsync>d__.expectedStepsCount = expectedStepsCount;
			<UpdateAutoStepsCollectionWithLatestDetailsAsync>d__.collection = collection;
			<UpdateAutoStepsCollectionWithLatestDetailsAsync>d__.cancelToken = cancelToken;
			<UpdateAutoStepsCollectionWithLatestDetailsAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <UpdateAutoStepsCollectionWithLatestDetailsAsync>d__.<>t__builder)).Start<<UpdateAutoStepsCollectionWithLatestDetailsAsync>d__74>(ref <UpdateAutoStepsCollectionWithLatestDetailsAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <UpdateAutoStepsCollectionWithLatestDetailsAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task<IEnumerable<LevelerAutoOperationStep>> GetAutoStepDetailsAsync(int expectedStepsCount, CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<GetAutoStepDetailsAsync>d__75 <GetAutoStepDetailsAsync>d__ = default(<GetAutoStepDetailsAsync>d__75);
			<GetAutoStepDetailsAsync>d__.<>t__builder = AsyncTaskMethodBuilder<IEnumerable<LevelerAutoOperationStep>>.Create();
			<GetAutoStepDetailsAsync>d__.<>4__this = this;
			<GetAutoStepDetailsAsync>d__.expectedStepsCount = expectedStepsCount;
			<GetAutoStepDetailsAsync>d__.cancelToken = cancelToken;
			<GetAutoStepDetailsAsync>d__.<>1__state = -1;
			<GetAutoStepDetailsAsync>d__.<>t__builder.Start<<GetAutoStepDetailsAsync>d__75>(ref <GetAutoStepDetailsAsync>d__);
			return <GetAutoStepDetailsAsync>d__.<>t__builder.Task;
		}

		public Task<float> ReadVoltageMeasurementAsync(CancellationToken cancellationToken)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return LogicalDeviceVoltageExtension.ReadVoltageMeasurementAsync(VoltageMeasurementBatteryPid, cancellationToken);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		protected virtual Task<LevelerCommandResultType5> SendCommandAsync(ILogicalDeviceLevelerCommandType5 command, int commandCount, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandAsync>d__84 <SendCommandAsync>d__ = default(<SendCommandAsync>d__84);
			<SendCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<LevelerCommandResultType5>.Create();
			<SendCommandAsync>d__.<>4__this = this;
			<SendCommandAsync>d__.command = command;
			<SendCommandAsync>d__.commandCount = commandCount;
			<SendCommandAsync>d__.cancellationToken = cancellationToken;
			<SendCommandAsync>d__.<>1__state = -1;
			<SendCommandAsync>d__.<>t__builder.Start<<SendCommandAsync>d__84>(ref <SendCommandAsync>d__);
			return <SendCommandAsync>d__.<>t__builder.Task;
		}

		public static bool IsCommandResponseSuccessful(DTC_ID userMessageDtc)
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Invalid comparison between Unknown and I4
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			//IL_000e: Invalid comparison between Unknown and I4
			if ((int)userMessageDtc == 1735 || (int)userMessageDtc == 1831)
			{
				return true;
			}
			return false;
		}

		private void DoUpdateFeatureSupported(object sender, PropertyChangedEventArgs args)
		{
			if (args.PropertyName == "Value" || args.PropertyName == "HasValueBeenLoaded")
			{
				LogicalDevicePidBindableAsyncValue val = (LogicalDevicePidBindableAsyncValue)((sender is LogicalDevicePidBindableAsyncValue) ? sender : null);
				if (val == null || !((BindableAsyncValue<ulong>)(object)val).HasValueBeenLoaded)
				{
					FeatureSupported = FeatureSupport.Unknown;
				}
				else
				{
					FeatureSupported = (FeatureSupport)((BindableAsyncValue<ulong>)(object)val).Value;
				}
			}
		}

		public virtual Task<FirmwareUpdateSupport> TryGetFirmwareUpdateSupportAsync(CancellationToken cancelToken)
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			return FirmwareUpdateSupportEx.TryGetFirmwareUpdateSupportAsync(((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)this).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)this, cancelToken);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task UpdateFirmwareAsync(IReadOnlyList<byte> data, Func<ILogicalDeviceTransferProgress, bool> progressAck, CancellationToken cancellationToken, Dictionary<FirmwareUpdateOption, object>? options = null)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<UpdateFirmwareAsync>d__95 <UpdateFirmwareAsync>d__ = default(<UpdateFirmwareAsync>d__95);
			<UpdateFirmwareAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<UpdateFirmwareAsync>d__.<>4__this = this;
			<UpdateFirmwareAsync>d__.data = data;
			<UpdateFirmwareAsync>d__.progressAck = progressAck;
			<UpdateFirmwareAsync>d__.cancellationToken = cancellationToken;
			<UpdateFirmwareAsync>d__.options = options;
			<UpdateFirmwareAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Start<<UpdateFirmwareAsync>d__95>(ref <UpdateFirmwareAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Task;
		}

		public ILogicalDeviceLightDimmable? GetAssociatedDimmableLight()
		{
			ILogicalDeviceManager deviceManager = ((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)this).DeviceService.DeviceManager;
			List<ILogicalDeviceLightDimmable> val = ((deviceManager != null) ? deviceManager.FindLogicalDevices<ILogicalDeviceLightDimmable>((Func<ILogicalDeviceLightDimmable, bool>)([CompilerGenerated] (ILogicalDeviceLightDimmable ld) => ((ILogicalDevice)ld).LogicalId.ProductMacAddress != null && (PhysicalAddress)(object)((ILogicalDevice)ld).LogicalId.ProductMacAddress == (PhysicalAddress)(object)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)this).LogicalId.ProductMacAddress)) : null);
			val?.Sort((Comparison<ILogicalDeviceLightDimmable>)delegate(ILogicalDeviceLightDimmable light1, ILogicalDeviceLightDimmable light2)
			{
				if (((ILogicalDevice)light1).LogicalId == null && ((ILogicalDevice)light2).LogicalId == null)
				{
					return 0;
				}
				if (((ILogicalDevice)light1).LogicalId == null)
				{
					return 1;
				}
				return (((ILogicalDevice)light2).LogicalId == null) ? (-1) : ((IComparable)((ILogicalDevice)light1).LogicalId).CompareTo((object)((ILogicalDevice)light2).LogicalId);
			});
			if (val != null && val.Count > 1)
			{
				TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Format("{0} associated lights found for Leveler, only 1 is expected.", (object)val.Count), Array.Empty<object>());
			}
			if (val == null)
			{
				return null;
			}
			return Enumerable.FirstOrDefault<ILogicalDeviceLightDimmable>((IEnumerable<ILogicalDeviceLightDimmable>)(object)val);
		}

		public ILevelerAutoStepsProgress TryMakeAutoStepsProgress()
		{
			//IL_00df: Expected O, but got Unknown
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_001c: Invalid comparison between Unknown and I4
			try
			{
				if (((CommonDisposableNotifyPropertyChanged)this).IsDisposed || !((LogicalDeviceDataPacketMutableDoubleBuffer)DeviceStatusExtendedAutoStep).HasData || (int)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)this).ActiveConnection != 1 || !((LogicalDevice<LogicalDeviceLevelerStatusType5, LogicalDeviceLevelerCapabilityType5>)(object)this).DeviceStatus.ExtendedStatusActive)
				{
					return new LevelerAutoStepsProgressNone();
				}
				LogicalDeviceLevelerStatusExtendedType5AutoStep logicalDeviceLevelerStatusExtendedType5AutoStep = new LogicalDeviceLevelerStatusExtendedType5AutoStep(DeviceStatusExtendedAutoStep);
				return logicalDeviceLevelerStatusExtendedType5AutoStep.OperationCodeProgress switch
				{
					LevelerOperationCodeProgress.None => new LevelerAutoStepsProgressNone(logicalDeviceLevelerStatusExtendedType5AutoStep), 
					LevelerOperationCodeProgress.AutoLevel => new LevelerAutoStepsProgressLevel(logicalDeviceLevelerStatusExtendedType5AutoStep), 
					LevelerOperationCodeProgress.AutoHitch => new LevelerAutoStepsProgressHitch(logicalDeviceLevelerStatusExtendedType5AutoStep), 
					LevelerOperationCodeProgress.AutoRetract => new LevelerAutoStepsProgressRetract(logicalDeviceLevelerStatusExtendedType5AutoStep), 
					LevelerOperationCodeProgress.AutoExtend => new LevelerAutoStepsProgressExtend(logicalDeviceLevelerStatusExtendedType5AutoStep), 
					LevelerOperationCodeProgress.SavingSetPoint => new LevelerAutoStepsProgressSetPointSet(logicalDeviceLevelerStatusExtendedType5AutoStep), 
					_ => new LevelerAutoStepsProgressNone(), 
				};
			}
			catch (Exception ex)
			{
				Exception ex2 = ex;
				TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", String.Concat("Unable to Make Auto Steps Progress ", ex2.Message), Array.Empty<object>());
				return new LevelerAutoStepsProgressNone();
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<LevelerCommandResultType5> TryPerformOperationAirbagConfigSetAsync(LevelerAirBagConfig airBagConfig, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<TryPerformOperationAirbagConfigSetAsync>d__115 <TryPerformOperationAirbagConfigSetAsync>d__ = default(<TryPerformOperationAirbagConfigSetAsync>d__115);
			<TryPerformOperationAirbagConfigSetAsync>d__.<>t__builder = AsyncTaskMethodBuilder<LevelerCommandResultType5>.Create();
			<TryPerformOperationAirbagConfigSetAsync>d__.<>4__this = this;
			<TryPerformOperationAirbagConfigSetAsync>d__.airBagConfig = airBagConfig;
			<TryPerformOperationAirbagConfigSetAsync>d__.cancellationToken = cancellationToken;
			<TryPerformOperationAirbagConfigSetAsync>d__.<>1__state = -1;
			<TryPerformOperationAirbagConfigSetAsync>d__.<>t__builder.Start<<TryPerformOperationAirbagConfigSetAsync>d__115>(ref <TryPerformOperationAirbagConfigSetAsync>d__);
			return <TryPerformOperationAirbagConfigSetAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task PerformOperationAutoExtendAsync(LevelerAutoOperationExtendJacks extendJacks, Func<ILevelerAutoStepsProgressExtend, LevelerAutoOperationAck> progressAck, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<PerformOperationAutoExtendAsync>d__116 <PerformOperationAutoExtendAsync>d__ = default(<PerformOperationAutoExtendAsync>d__116);
			<PerformOperationAutoExtendAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<PerformOperationAutoExtendAsync>d__.<>4__this = this;
			<PerformOperationAutoExtendAsync>d__.extendJacks = extendJacks;
			<PerformOperationAutoExtendAsync>d__.progressAck = progressAck;
			<PerformOperationAutoExtendAsync>d__.cancellationToken = cancellationToken;
			<PerformOperationAutoExtendAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <PerformOperationAutoExtendAsync>d__.<>t__builder)).Start<<PerformOperationAutoExtendAsync>d__116>(ref <PerformOperationAutoExtendAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <PerformOperationAutoExtendAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task PerformOperationAutoHitchAsync(Func<ILevelerAutoStepsProgressHitch, LevelerAutoOperationAck> progressAck, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<PerformOperationAutoHitchAsync>d__117 <PerformOperationAutoHitchAsync>d__ = default(<PerformOperationAutoHitchAsync>d__117);
			<PerformOperationAutoHitchAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<PerformOperationAutoHitchAsync>d__.<>4__this = this;
			<PerformOperationAutoHitchAsync>d__.progressAck = progressAck;
			<PerformOperationAutoHitchAsync>d__.cancellationToken = cancellationToken;
			<PerformOperationAutoHitchAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <PerformOperationAutoHitchAsync>d__.<>t__builder)).Start<<PerformOperationAutoHitchAsync>d__117>(ref <PerformOperationAutoHitchAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <PerformOperationAutoHitchAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task PerformOperationAutoLevelAsync(LevelerAutoOperationSetPoint zeroPoint, Func<ILevelerAutoStepsProgressLevel, LevelerAutoOperationAck> progressAck, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<PerformOperationAutoLevelAsync>d__118 <PerformOperationAutoLevelAsync>d__ = default(<PerformOperationAutoLevelAsync>d__118);
			<PerformOperationAutoLevelAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<PerformOperationAutoLevelAsync>d__.<>4__this = this;
			<PerformOperationAutoLevelAsync>d__.zeroPoint = zeroPoint;
			<PerformOperationAutoLevelAsync>d__.progressAck = progressAck;
			<PerformOperationAutoLevelAsync>d__.cancellationToken = cancellationToken;
			<PerformOperationAutoLevelAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <PerformOperationAutoLevelAsync>d__.<>t__builder)).Start<<PerformOperationAutoLevelAsync>d__118>(ref <PerformOperationAutoLevelAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <PerformOperationAutoLevelAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task PerformOperationAutoRetractAsync(LevelerAutoOperationRetractJacks retractJacks, Func<ILevelerAutoStepsProgressRetract, LevelerAutoOperationAck> progressAck, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<PerformOperationAutoRetractAsync>d__119 <PerformOperationAutoRetractAsync>d__ = default(<PerformOperationAutoRetractAsync>d__119);
			<PerformOperationAutoRetractAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<PerformOperationAutoRetractAsync>d__.<>4__this = this;
			<PerformOperationAutoRetractAsync>d__.retractJacks = retractJacks;
			<PerformOperationAutoRetractAsync>d__.progressAck = progressAck;
			<PerformOperationAutoRetractAsync>d__.cancellationToken = cancellationToken;
			<PerformOperationAutoRetractAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <PerformOperationAutoRetractAsync>d__.<>t__builder)).Start<<PerformOperationAutoRetractAsync>d__119>(ref <PerformOperationAutoRetractAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <PerformOperationAutoRetractAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task PerformOperationClearFaultAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<PerformOperationClearFaultAsync>d__120 <PerformOperationClearFaultAsync>d__ = default(<PerformOperationClearFaultAsync>d__120);
			<PerformOperationClearFaultAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<PerformOperationClearFaultAsync>d__.<>4__this = this;
			<PerformOperationClearFaultAsync>d__.cancellationToken = cancellationToken;
			<PerformOperationClearFaultAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <PerformOperationClearFaultAsync>d__.<>t__builder)).Start<<PerformOperationClearFaultAsync>d__120>(ref <PerformOperationClearFaultAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <PerformOperationClearFaultAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<LevelerCommandResultType5> TryPerformOperationClearFaultAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryPerformOperationClearFaultAsync>d__121 <TryPerformOperationClearFaultAsync>d__ = default(<TryPerformOperationClearFaultAsync>d__121);
			<TryPerformOperationClearFaultAsync>d__.<>t__builder = AsyncTaskMethodBuilder<LevelerCommandResultType5>.Create();
			<TryPerformOperationClearFaultAsync>d__.<>4__this = this;
			<TryPerformOperationClearFaultAsync>d__.cancellationToken = cancellationToken;
			<TryPerformOperationClearFaultAsync>d__.<>1__state = -1;
			<TryPerformOperationClearFaultAsync>d__.<>t__builder.Start<<TryPerformOperationClearFaultAsync>d__121>(ref <TryPerformOperationClearFaultAsync>d__);
			return <TryPerformOperationClearFaultAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task PerformOperationManualAsync(LevelerJacksAndAirBagType5 action, Func<LevelerJacksAndAirBagType5, LevelerAutoOperationAck> progressAck, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<PerformOperationManualAsync>d__122 <PerformOperationManualAsync>d__ = default(<PerformOperationManualAsync>d__122);
			<PerformOperationManualAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<PerformOperationManualAsync>d__.<>4__this = this;
			<PerformOperationManualAsync>d__.action = action;
			<PerformOperationManualAsync>d__.progressAck = progressAck;
			<PerformOperationManualAsync>d__.cancellationToken = cancellationToken;
			<PerformOperationManualAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <PerformOperationManualAsync>d__.<>t__builder)).Start<<PerformOperationManualAsync>d__122>(ref <PerformOperationManualAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <PerformOperationManualAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task PerformOperationManualUnrestrictedAsync(LevelerJacksAndAirBagType5 action, Func<LevelerJacksAndAirBagType5, LevelerAutoOperationAck> progressAck, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<PerformOperationManualUnrestrictedAsync>d__123 <PerformOperationManualUnrestrictedAsync>d__ = default(<PerformOperationManualUnrestrictedAsync>d__123);
			<PerformOperationManualUnrestrictedAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<PerformOperationManualUnrestrictedAsync>d__.<>4__this = this;
			<PerformOperationManualUnrestrictedAsync>d__.action = action;
			<PerformOperationManualUnrestrictedAsync>d__.progressAck = progressAck;
			<PerformOperationManualUnrestrictedAsync>d__.cancellationToken = cancellationToken;
			<PerformOperationManualUnrestrictedAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <PerformOperationManualUnrestrictedAsync>d__.<>t__builder)).Start<<PerformOperationManualUnrestrictedAsync>d__123>(ref <PerformOperationManualUnrestrictedAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <PerformOperationManualUnrestrictedAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task PerformOperationSetPointSetAsync(LevelerAutoOperationSetPoint setPoint, Func<ILevelerAutoStepsProgressSetPointSet, LevelerAutoOperationAck> progressAck, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<PerformOperationSetPointSetAsync>d__124 <PerformOperationSetPointSetAsync>d__ = default(<PerformOperationSetPointSetAsync>d__124);
			<PerformOperationSetPointSetAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<PerformOperationSetPointSetAsync>d__.<>4__this = this;
			<PerformOperationSetPointSetAsync>d__.setPoint = setPoint;
			<PerformOperationSetPointSetAsync>d__.progressAck = progressAck;
			<PerformOperationSetPointSetAsync>d__.cancellationToken = cancellationToken;
			<PerformOperationSetPointSetAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <PerformOperationSetPointSetAsync>d__.<>t__builder)).Start<<PerformOperationSetPointSetAsync>d__124>(ref <PerformOperationSetPointSetAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <PerformOperationSetPointSetAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task PerformOperationStopAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<PerformOperationStopAsync>d__126 <PerformOperationStopAsync>d__ = default(<PerformOperationStopAsync>d__126);
			<PerformOperationStopAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<PerformOperationStopAsync>d__.<>4__this = this;
			<PerformOperationStopAsync>d__.cancellationToken = cancellationToken;
			<PerformOperationStopAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <PerformOperationStopAsync>d__.<>t__builder)).Start<<PerformOperationStopAsync>d__126>(ref <PerformOperationStopAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <PerformOperationStopAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<LevelerCommandResultType5> TryPerformOperationStopAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryPerformOperationStopAsync>d__127 <TryPerformOperationStopAsync>d__ = default(<TryPerformOperationStopAsync>d__127);
			<TryPerformOperationStopAsync>d__.<>t__builder = AsyncTaskMethodBuilder<LevelerCommandResultType5>.Create();
			<TryPerformOperationStopAsync>d__.<>4__this = this;
			<TryPerformOperationStopAsync>d__.cancellationToken = cancellationToken;
			<TryPerformOperationStopAsync>d__.<>1__state = -1;
			<TryPerformOperationStopAsync>d__.<>t__builder.Start<<TryPerformOperationStopAsync>d__127>(ref <TryPerformOperationStopAsync>d__);
			return <TryPerformOperationStopAsync>d__.<>t__builder.Task;
		}

		private LogicalDeviceTagLeveler5SetPoints GetSetPointsTag()
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0012: Unknown result type (might be due to invalid IL or missing references)
			LogicalDeviceTagLeveler5SetPoints logicalDeviceTagLeveler5SetPoints = LogicalDeviceTagLeveler5SetPoints.GetTag(this);
			if ((object)logicalDeviceTagLeveler5SetPoints == null)
			{
				logicalDeviceTagLeveler5SetPoints = new LogicalDeviceTagLeveler5SetPoints(default(Nullable<LevelerAutoOperationSetPoint>), null);
				LogicalDeviceTagLeveler5SetPoints.SetTag(this, logicalDeviceTagLeveler5SetPoints);
			}
			return logicalDeviceTagLeveler5SetPoints;
		}

		public LevelerAutoOperationSetPoint GetSelectedSetPoint()
		{
			return GetSetPointsTag().SelectedSetPoint;
		}

		private string GenerateDefaultName(LevelerAutoOperationSetPoint setPoint)
		{
			return setPoint switch
			{
				LevelerAutoOperationSetPoint.Factory => "Set Point", 
				LevelerAutoOperationSetPoint.Unknown => "Unknown Set Point", 
				LevelerAutoOperationSetPoint.SystemOffset => "System Offset", 
				_ => String.Format("{0} {1}", (object)"Set Point", (object)(Int32)setPoint), 
			};
		}

		public string GetSetPointCustomName(LevelerAutoOperationSetPoint setPoint)
		{
			LogicalDeviceTagLeveler5SetPoints setPointsTag = GetSetPointsTag();
			if (!setPointsTag.IsCustomTagAvailable(setPointsTag, setPoint))
			{
				return GenerateDefaultName(setPoint);
			}
			if (setPoint == LevelerAutoOperationSetPoint.Unknown || setPointsTag.CustomSetPointNames == null)
			{
				return "Set Point";
			}
			return setPointsTag.CustomSetPointNames[setPoint];
		}

		public bool TrySaveSelectedSetPoint(LevelerAutoOperationSetPoint setPoint)
		{
			//IL_0039: Expected O, but got Unknown
			//IL_001c: Unknown result type (might be due to invalid IL or missing references)
			try
			{
				LogicalDeviceTagLeveler5SetPoints setPointsTag = GetSetPointsTag();
				if (setPointsTag.SelectedSetPoint == setPoint)
				{
					return true;
				}
				LogicalDeviceTagLeveler5SetPoints.RemoveTag(this, setPointsTag);
				LogicalDeviceTagLeveler5SetPoints tag = new LogicalDeviceTagLeveler5SetPoints(new Nullable<LevelerAutoOperationSetPoint>(setPoint), setPointsTag.CustomSetPointNames);
				LogicalDeviceTagLeveler5SetPoints.SetTag(this, tag);
				return true;
			}
			catch (Exception ex)
			{
				Exception ex2 = ex;
				TaggedLog.Error("ILogicalDeviceDirectLevelerType5", String.Concat("TrySetSelectedSetPoint has failed, reason: ", ex2.Message), Array.Empty<object>());
				return false;
			}
		}

		public ConcurrentDictionary<LevelerAutoOperationSetPoint, string> GetSetPointNames()
		{
			LogicalDeviceTagLeveler5SetPoints setPointsTag = GetSetPointsTag();
			ConcurrentDictionary<LevelerAutoOperationSetPoint, string> val = new ConcurrentDictionary<LevelerAutoOperationSetPoint, string>();
			IEnumerator enumerator = Enum.GetValues(typeof(LevelerAutoOperationSetPoint)).GetEnumerator();
			try
			{
				while (enumerator.MoveNext())
				{
					LevelerAutoOperationSetPoint levelerAutoOperationSetPoint = (LevelerAutoOperationSetPoint)enumerator.Current;
					if (!setPointsTag.IsCustomTagAvailable(setPointsTag, levelerAutoOperationSetPoint))
					{
						val.TryAdd(levelerAutoOperationSetPoint, GenerateDefaultName(levelerAutoOperationSetPoint));
					}
					else if (setPointsTag.CustomSetPointNames != null)
					{
						val.TryAdd(levelerAutoOperationSetPoint, setPointsTag.CustomSetPointNames[levelerAutoOperationSetPoint]);
					}
				}
				return val;
			}
			finally
			{
				IDisposable val2 = (IDisposable)(object)((enumerator is IDisposable) ? enumerator : null);
				if (val2 != null)
				{
					val2.Dispose();
				}
			}
		}

		public bool TrySaveCustomSetPointName(LevelerAutoOperationSetPoint setPoint, string customName)
		{
			//IL_008e: Expected O, but got Unknown
			//IL_0071: Unknown result type (might be due to invalid IL or missing references)
			try
			{
				if (String.IsNullOrEmpty(customName))
				{
					TaggedLog.Warning("ILogicalDeviceDirectLevelerType5", "Unable to save custom name that is null or empty", Array.Empty<object>());
					return false;
				}
				LogicalDeviceTagLeveler5SetPoints setPointsTag = GetSetPointsTag();
				if (setPointsTag.CustomSetPointNames == null)
				{
					setPointsTag.CustomSetPointNames = new ConcurrentDictionary<LevelerAutoOperationSetPoint, string>();
				}
				else if (String.Compare(setPointsTag.CustomSetPointNames[setPoint], customName) == 0)
				{
					return true;
				}
				setPointsTag.CustomSetPointNames[setPoint] = customName;
				LogicalDeviceTagLeveler5SetPoints.RemoveTag(this, setPointsTag);
				LogicalDeviceTagLeveler5SetPoints tag = new LogicalDeviceTagLeveler5SetPoints(new Nullable<LevelerAutoOperationSetPoint>(setPointsTag.SelectedSetPoint), setPointsTag.CustomSetPointNames);
				LogicalDeviceTagLeveler5SetPoints.SetTag(this, tag);
				return true;
			}
			catch (Exception ex)
			{
				Exception ex2 = ex;
				TaggedLog.Error("ILogicalDeviceDirectLevelerType5", String.Concat("TrySetSelectedSetPoint has failed, reason: ", ex2.Message), Array.Empty<object>());
				return false;
			}
		}

		static LogicalDeviceLevelerType5()
		{
			List<PID> obj = new List<PID>();
			obj.Add(PID.LEVELER_AUTO_PROCESS_STEPS_1);
			obj.Add(PID.LEVELER_AUTO_PROCESS_STEPS_2);
			obj.Add(PID.LEVELER_AUTO_PROCESS_STEPS_3);
			obj.Add(PID.LEVELER_AUTO_PROCESS_STEPS_4);
			obj.Add(PID.LEVELER_AUTO_PROCESS_STEPS_5);
			AutoStepsDetailPidList = obj;
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)this).LastReceivedNetworkStatus;
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceLevelerType5StatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceLevelerType5StatusSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceLevelerType5StatusSerializable);
			}
		}

		[JsonProperty]
		public bool IsAutoHitchAvailable
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool IsAutoRetractAvailable
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LevelerReadyTo ReadyTo
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool JacksFullyRetracted
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool JacksAreGrounded
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool ExtendedStatusActive
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool CanOperationsBlocked
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool ActionTakingPlace
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LevelerJacksAndAirBagType5 JacksAndAirbagState
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public float XAngle
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public float YAngle
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public DTC_ID FaultMessageDtc
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceLevelerType5StatusSerializable(bool isAutoHitchAvailable, bool isAutoRetractAvailable, LevelerReadyTo readyTo, bool jacksFullyRetracted, bool jacksAreGrounded, bool extendedStatusActive, bool canOperationsBlocked, bool actionTakingPlace, LevelerJacksAndAirBagType5 jacksAndAirbagState, float xAngle, float yAngle, DTC_ID faultMessageDtc)
		{
			//IL_005c: Unknown result type (might be due to invalid IL or missing references)
			//IL_005e: Unknown result type (might be due to invalid IL or missing references)
			IsAutoHitchAvailable = isAutoHitchAvailable;
			IsAutoRetractAvailable = isAutoRetractAvailable;
			ReadyTo = readyTo;
			JacksFullyRetracted = jacksFullyRetracted;
			JacksAreGrounded = jacksAreGrounded;
			ExtendedStatusActive = extendedStatusActive;
			CanOperationsBlocked = canOperationsBlocked;
			ActionTakingPlace = actionTakingPlace;
			JacksAndAirbagState = jacksAndAirbagState;
			XAngle = xAngle;
			YAngle = yAngle;
			FaultMessageDtc = faultMessageDtc;
		}

		public LogicalDeviceLevelerType5StatusSerializable(LogicalDeviceLevelerStatusType5 levelerStatus)
			: this(levelerStatus.IsAutoHitchAvailable, levelerStatus.IsAutoRetractAvailable, levelerStatus.ReadyTo, levelerStatus.JacksFullyRetracted, levelerStatus.JacksAreGrounded, levelerStatus.ExtendedStatusActive, levelerStatus.CanOperationsBlocked, levelerStatus.ActionTakingPlace, levelerStatus.JacksAndAirbagState, levelerStatus.XAngle, levelerStatus.YAngle, levelerStatus.FaultMessageDtc)
		{
		}//IL_0044: Unknown result type (might be due to invalid IL or missing references)


		public override byte[] MakeRawData()
		{
			//IL_008b: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)new LogicalDeviceLevelerStatusType5
			{
				IsAutoHitchAvailable = IsAutoHitchAvailable,
				IsAutoRetractAvailable = IsAutoRetractAvailable,
				ReadyTo = ReadyTo,
				JacksFullyRetracted = JacksFullyRetracted,
				JacksAreGrounded = JacksAreGrounded,
				ExtendedStatusActive = ExtendedStatusActive,
				CanOperationsBlocked = CanOperationsBlocked,
				ActionTakingPlace = ActionTakingPlace,
				JacksAndAirbagState = JacksAndAirbagState,
				XAngle = XAngle,
				YAngle = YAngle,
				FaultMessageDtc = FaultMessageDtc
			}).CopyCurrentData();
		}

		public static LogicalDeviceLevelerType5StatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceLevelerStatusType5 logicalDeviceLevelerStatusType = new LogicalDeviceLevelerStatusType5();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusType).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusType).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusType).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusType).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusType).Update(rawData, rawData.Length, false);
			return new LogicalDeviceLevelerType5StatusSerializable(logicalDeviceLevelerStatusType);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceLevelerType5StatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceLevelerType5StatusSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			//IL_01d0: Unknown result type (might be due to invalid IL or missing references)
			//IL_01d5: Unknown result type (might be due to invalid IL or missing references)
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("IsAutoHitchAvailable = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsAutoHitchAvailable)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IsAutoRetractAvailable = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsAutoRetractAvailable)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ReadyTo = ");
			builder.Append(((Object)ReadyTo/*cast due to .constrained prefix*/).ToString());
			builder.Append(", JacksFullyRetracted = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref JacksFullyRetracted)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", JacksAreGrounded = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref JacksAreGrounded)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ExtendedStatusActive = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref ExtendedStatusActive)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", CanOperationsBlocked = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref CanOperationsBlocked)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ActionTakingPlace = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref ActionTakingPlace)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", JacksAndAirbagState = ");
			builder.Append(((Object)JacksAndAirbagState/*cast due to .constrained prefix*/).ToString());
			builder.Append(", XAngle = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref XAngle)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", YAngle = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref YAngle)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", FaultMessageDtc = ");
			builder.Append(((Object)FaultMessageDtc/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			//IL_010f: Unknown result type (might be due to invalid IL or missing references)
			return (((((((((((base.GetHashCode() * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsAutoHitchAvailable)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsAutoRetractAvailable)) * -1521134295 + EqualityComparer<LevelerReadyTo>.Default.GetHashCode(ReadyTo)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(JacksFullyRetracted)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(JacksAreGrounded)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(ExtendedStatusActive)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(CanOperationsBlocked)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(ActionTakingPlace)) * -1521134295 + EqualityComparer<LevelerJacksAndAirBagType5>.Default.GetHashCode(JacksAndAirbagState)) * -1521134295 + EqualityComparer<float>.Default.GetHashCode(XAngle)) * -1521134295 + EqualityComparer<float>.Default.GetHashCode(YAngle)) * -1521134295 + EqualityComparer<DTC_ID>.Default.GetHashCode(FaultMessageDtc);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceLevelerType5StatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceLevelerType5StatusSerializable(LogicalDeviceLevelerType5StatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceLevelerType5StatusSerializable>)original)
		{
			//IL_008d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0092: Unknown result type (might be due to invalid IL or missing references)
			IsAutoHitchAvailable = original.IsAutoHitchAvailable;
			IsAutoRetractAvailable = original.IsAutoRetractAvailable;
			ReadyTo = original.ReadyTo;
			JacksFullyRetracted = original.JacksFullyRetracted;
			JacksAreGrounded = original.JacksAreGrounded;
			ExtendedStatusActive = original.ExtendedStatusActive;
			CanOperationsBlocked = original.CanOperationsBlocked;
			ActionTakingPlace = original.ActionTakingPlace;
			JacksAndAirbagState = original.JacksAndAirbagState;
			XAngle = original.XAngle;
			YAngle = original.YAngle;
			FaultMessageDtc = original.FaultMessageDtc;
		}
	}
	public enum SetPointType : Enum
	{
		[Description("Unknown")]
		Unknown = 0,
		[Description("Primary")]
		Primary = 1,
		[Description("Secondary")]
		Secondary = 2,
		[Description("Tertiary")]
		Tertiary = 3,
		[Description("Quaternary")]
		Quaternary = 4,
		[Description("Position 1")]
		Position1 = 5,
		[Description("Position 2")]
		Position2 = 6,
		[Description("Position 3")]
		Position3 = 7,
		[Description("Position 4")]
		Position4 = 8,
		[Description("Setpoint 1")]
		Setpoint1 = 9,
		[Description("Setpoint 2")]
		Setpoint2 = 10,
		[Description("Setpoint 3")]
		Setpoint3 = 11,
		[Description("Setpoint 4")]
		Setpoint4 = 12,
		[Description("Bedroom")]
		Bedroom = 13,
		[Description("Bedroom 1")]
		Bedroom1 = 14,
		[Description("Bedroom 2")]
		Bedroom2 = 15,
		[Description("Drain Angle")]
		DrainAngle = 16,
		[Description("Drain Rain")]
		DrainRain = 17,
		[Description("Drain Tanks")]
		DrainTanks = 18,
		[Description("Factory Setpoint")]
		FactorySetpoint = 19,
		[Description("Fill")]
		Fill = 20,
		[Description("Fuel")]
		Fuel = 21,
		[Description("Garage")]
		Garage = 22,
		[Description("Kitchen")]
		Kitchen = 23,
		[Description("Kitchen 1")]
		Kitchen1 = 24,
		[Description("Kitchen 2")]
		Kitchen2 = 25,
		[Description("Option 1")]
		Option1 = 26,
		[Description("Option 2")]
		Option2 = 27,
		[Description("Option 3")]
		Option3 = 28,
		[Description("Option 4")]
		Option4 = 29,
		[Description("Pack Up")]
		PackUp = 30,
		[Description("Shower")]
		Shower = 31,
		[Description("Tilt 1")]
		Tilt1 = 32,
		[Description("Tilt 2")]
		Tilt2 = 33,
		[Description("Tilt 3")]
		Tilt3 = 34,
		[Description("Tilt 4")]
		Tilt4 = 35,
		[Description("Unloading")]
		Unloading = 36,
		[Description("Reserved")]
		Reserved = 255
	}
	public class LogicalDeviceLevelerType5Sim : LogicalDeviceLevelerType5, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandAsync>d__33 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<LevelerCommandResultType5> <>t__builder;

			public LogicalDeviceLevelerType5Sim <>4__this;

			public CancellationToken cancellationToken;

			public ILogicalDeviceLevelerCommandType5 command;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_07cd: Expected O, but got Unknown
				//IL_00b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bc: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0015: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f3: Unknown result type (might be due to invalid IL or missing references)
				//IL_007a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0084: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				//IL_009d: Unknown result type (might be due to invalid IL or missing references)
				//IL_009e: Unknown result type (might be due to invalid IL or missing references)
				//IL_031d: Unknown result type (might be due to invalid IL or missing references)
				//IL_03d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_049c: Unknown result type (might be due to invalid IL or missing references)
				//IL_055f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0662: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5Sim logicalDeviceLevelerType5Sim = <>4__this;
				LevelerCommandResultType5 result;
				try
				{
					TaskAwaiter<bool> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_00d2;
					}
					if ((int)((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType5Sim).ActiveConnection == 0)
					{
						result = new LevelerCommandResultType5((CommandResult)6);
					}
					else if (((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
					{
						result = new LevelerCommandResultType5((CommandResult)1);
					}
					else
					{
						if (!((CommonDisposableNotifyPropertyChanged)logicalDeviceLevelerType5Sim).IsDisposed)
						{
							val = TaskExtension.TryDelay(200, cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SendCommandAsync>d__33>(ref val, ref this);
								return;
							}
							goto IL_00d2;
						}
						TaggedLog.Debug("LogicalDeviceLevelerType5Sim", String.Concat("Unable to send command to disposed LogicalDevice ", ((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType5Sim).DeviceName), Array.Empty<object>());
						result = new LevelerCommandResultType5((CommandResult)7);
					}
					goto end_IL_000e;
					IL_00d2:
					val.GetResult();
					if (((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
					{
						result = new LevelerCommandResultType5((CommandResult)1);
					}
					else
					{
						if (new Random().Next(0, 100) < 3)
						{
							TaggedLog.Debug("LogicalDeviceLevelerType5Sim", String.Format("Simulating a failure command {0}", (object)command), Array.Empty<object>());
							logicalDeviceLevelerType5Sim.didFailureOccur = true;
						}
						logicalDeviceLevelerType5Sim._bubbleLevel.Reset(10);
						if (!(command is LogicalDeviceLevelerCommandPanicStopType5))
						{
							if (!(command is LogicalDeviceLevelerCommandAutoLevelType5 logicalDeviceLevelerCommandAutoLevelType))
							{
								if (!(command is LogicalDeviceLevelerCommandAutoHitchType5))
								{
									if (!(command is LogicalDeviceLevelerCommandAutoRetractType5 logicalDeviceLevelerCommandAutoRetractType))
									{
										if (!(command is LogicalDeviceLevelerCommandAutoExtendType5 logicalDeviceLevelerCommandAutoExtendType))
										{
											if (!(command is LogicalDeviceLevelerCommandManualType5 logicalDeviceLevelerCommandManualType))
											{
												if (!(command is LogicalDeviceLevelerCommandZeroSetType5 { ZeroPoint: var zeroPoint }))
												{
													if (!(command is LogicalDeviceLevelerCommandManualUnrestrictedType5 logicalDeviceLevelerCommandManualUnrestrictedType))
													{
														if (command is LogicalDeviceLevelerCommandMiscConfigType5 logicalDeviceLevelerCommandMiscConfigType)
														{
															if (logicalDeviceLevelerType5Sim.CurrentOperation != OperationInProgress.None)
															{
																TaggedLog.Warning("LogicalDeviceLevelerType5Sim", String.Format("Unable to perform clear faults command as Internal state must be {0}", (object)OperationInProgress.None), Array.Empty<object>());
																result = new LevelerCommandResultType5((CommandResult)7);
															}
															else
															{
																if (logicalDeviceLevelerCommandMiscConfigType.MiscConfig == LevelerMiscConfig.ClearFaults)
																{
																	object simUpdateLock = logicalDeviceLevelerType5Sim.SimUpdateLock;
																	bool flag = false;
																	try
																	{
																		Monitor.Enter(simUpdateLock, ref flag);
																		logicalDeviceLevelerType5Sim.SimStatus.FaultMessageDtc = (DTC_ID)0;
																		TaggedLog.Information("LogicalDeviceLevelerType5Sim", "Leveler 5 DTC fault cleared", Array.Empty<object>());
																	}
																	finally
																	{
																		if (num < 0 && flag)
																		{
																			Monitor.Exit(simUpdateLock);
																		}
																	}
																}
																result = new LevelerCommandResultType5((CommandResult)0);
															}
														}
														else
														{
															result = new LevelerCommandResultType5((CommandResult)7);
														}
													}
													else if (logicalDeviceLevelerType5Sim.CurrentOperation != OperationInProgress.ManualUnrestrictedMoving)
													{
														TaggedLog.Warning("LogicalDeviceLevelerType5Sim", String.Format("Unable to perform manual moving command as Internal state must be {0} make sure {1} was called", (object)OperationInProgress.ManualUnrestrictedMoving, (object)"PerformOperationManualAsync"), Array.Empty<object>());
														result = new LevelerCommandResultType5((CommandResult)7);
													}
													else
													{
														object simUpdateLock = logicalDeviceLevelerType5Sim.SimUpdateLock;
														bool flag = false;
														try
														{
															Monitor.Enter(simUpdateLock, ref flag);
															logicalDeviceLevelerType5Sim._commandTracker.Command(logicalDeviceLevelerType5Sim.CurrentOperation, logicalDeviceLevelerCommandManualUnrestrictedType.MovementAndAirbags);
														}
														finally
														{
															if (num < 0 && flag)
															{
																Monitor.Exit(simUpdateLock);
															}
														}
														result = new LevelerCommandResultType5((CommandResult)0);
													}
												}
												else if ((zeroPoint == LevelerAutoOperationSetPoint.Factory || zeroPoint == LevelerAutoOperationSetPoint.Unknown) ? true : false)
												{
													result = new LevelerCommandResultType5((CommandResult)7, new Nullable<DTC_ID>((DTC_ID)1735));
												}
												else if (logicalDeviceLevelerType5Sim.CurrentOperation != OperationInProgress.None)
												{
													TaggedLog.Warning("LogicalDeviceLevelerType5Sim", String.Format("Unable to perform zero point set command as Internal state must be {0}", (object)OperationInProgress.None), Array.Empty<object>());
													result = new LevelerCommandResultType5((CommandResult)7);
												}
												else
												{
													result = new LevelerCommandResultType5((CommandResult)0);
												}
											}
											else if (logicalDeviceLevelerType5Sim.CurrentOperation != OperationInProgress.ManualMoving)
											{
												TaggedLog.Warning("LogicalDeviceLevelerType5Sim", String.Format("Unable to perform manual moving command as Internal state must be {0} make sure {1} was called", (object)OperationInProgress.ManualMoving, (object)"PerformOperationManualAsync"), Array.Empty<object>());
												result = new LevelerCommandResultType5((CommandResult)7);
											}
											else
											{
												object simUpdateLock = logicalDeviceLevelerType5Sim.SimUpdateLock;
												bool flag = false;
												try
												{
													Monitor.Enter(simUpdateLock, ref flag);
													logicalDeviceLevelerType5Sim._commandTracker.Command(logicalDeviceLevelerType5Sim.CurrentOperation, logicalDeviceLevelerCommandManualType.MovementAndAirbags);
													logicalDeviceLevelerType5Sim.SimStatus.JacksFullyRetracted = false;
													if (logicalDeviceLevelerType5Sim.didFailureOccur)
													{
														logicalDeviceLevelerType5Sim.SimStatus.FaultMessageDtc = (DTC_ID)1856;
														TaggedLog.Information("LogicalDeviceLevelerType5Sim", String.Format("Leveler 5 DTC set to {0}", (object)(DTC_ID)1856), Array.Empty<object>());
													}
												}
												finally
												{
													if (num < 0 && flag)
													{
														Monitor.Exit(simUpdateLock);
													}
												}
												result = new LevelerCommandResultType5((CommandResult)0);
											}
										}
										else if (logicalDeviceLevelerType5Sim.CurrentOperation != OperationInProgress.AutoExtend)
										{
											TaggedLog.Warning("LogicalDeviceLevelerType5Sim", String.Format("Unable to perform Auto extend Command as Internal state must be {0} make sure {1} was called", (object)OperationInProgress.AutoExtend, (object)"PerformOperationAutoExtendAsync"), Array.Empty<object>());
											result = new LevelerCommandResultType5((CommandResult)7);
										}
										else
										{
											object simUpdateLock = logicalDeviceLevelerType5Sim.SimUpdateLock;
											bool flag = false;
											try
											{
												Monitor.Enter(simUpdateLock, ref flag);
												logicalDeviceLevelerType5Sim._commandTracker.Command(logicalDeviceLevelerType5Sim.CurrentOperation, logicalDeviceLevelerType5Sim.MakeDefaultJacksAndAirbagStateForConfiguration());
												logicalDeviceLevelerType5Sim.SimExtendedStatus.SetAutoOperationExtend(logicalDeviceLevelerCommandAutoExtendType.ExtendJacks);
												logicalDeviceLevelerType5Sim.SimStatus.ReadyTo = LevelerReadyTo.Arrive;
												logicalDeviceLevelerType5Sim.SimStatus.IsAutoHitchAvailable = false;
												logicalDeviceLevelerType5Sim.SimStatus.IsAutoRetractAvailable = false;
											}
											finally
											{
												if (num < 0 && flag)
												{
													Monitor.Exit(simUpdateLock);
												}
											}
											result = new LevelerCommandResultType5((CommandResult)0, new Nullable<DTC_ID>((DTC_ID)1735));
										}
									}
									else if (logicalDeviceLevelerType5Sim.CurrentOperation != OperationInProgress.AutoRetract)
									{
										TaggedLog.Warning("LogicalDeviceLevelerType5Sim", String.Format("Unable to perform Auto retract Command as Internal state must be {0} make sure {1} was called", (object)OperationInProgress.AutoRetract, (object)"PerformOperationAutoRetractAsync"), Array.Empty<object>());
										result = new LevelerCommandResultType5((CommandResult)7);
									}
									else
									{
										object simUpdateLock = logicalDeviceLevelerType5Sim.SimUpdateLock;
										bool flag = false;
										try
										{
											Monitor.Enter(simUpdateLock, ref flag);
											logicalDeviceLevelerType5Sim._commandTracker.Command(logicalDeviceLevelerType5Sim.CurrentOperation, logicalDeviceLevelerType5Sim.MakeDefaultJacksAndAirbagStateForConfiguration());
											logicalDeviceLevelerType5Sim.SimExtendedStatus.SetAutoOperationRetract(logicalDeviceLevelerCommandAutoRetractType.RetractJacks);
											logicalDeviceLevelerType5Sim.SimStatus.ReadyTo = LevelerReadyTo.Arrive;
											logicalDeviceLevelerType5Sim.SimStatus.IsAutoHitchAvailable = false;
											logicalDeviceLevelerType5Sim.SimStatus.IsAutoRetractAvailable = false;
										}
										finally
										{
											if (num < 0 && flag)
											{
												Monitor.Exit(simUpdateLock);
											}
										}
										result = new LevelerCommandResultType5((CommandResult)0, new Nullable<DTC_ID>((DTC_ID)1735));
									}
								}
								else if (logicalDeviceLevelerType5Sim.CurrentOperation != OperationInProgress.AutoHitching)
								{
									TaggedLog.Warning("LogicalDeviceLevelerType5Sim", String.Format("Unable to perform Auto hitch Command as Internal state must be {0} make sure {1} was called", (object)OperationInProgress.AutoHitching, (object)"PerformOperationAutoHitchAsync"), Array.Empty<object>());
									result = new LevelerCommandResultType5((CommandResult)7);
								}
								else
								{
									object simUpdateLock = logicalDeviceLevelerType5Sim.SimUpdateLock;
									bool flag = false;
									try
									{
										Monitor.Enter(simUpdateLock, ref flag);
										logicalDeviceLevelerType5Sim._commandTracker.Command(logicalDeviceLevelerType5Sim.CurrentOperation, logicalDeviceLevelerType5Sim.MakeDefaultJacksAndAirbagStateForConfiguration());
										logicalDeviceLevelerType5Sim.SimExtendedStatus.SetAutoOperationHitch();
										logicalDeviceLevelerType5Sim.SimStatus.ReadyTo = LevelerReadyTo.Depart;
										logicalDeviceLevelerType5Sim.SimStatus.IsAutoHitchAvailable = false;
										logicalDeviceLevelerType5Sim.SimStatus.IsAutoRetractAvailable = true;
									}
									finally
									{
										if (num < 0 && flag)
										{
											Monitor.Exit(simUpdateLock);
										}
									}
									result = new LevelerCommandResultType5((CommandResult)0, new Nullable<DTC_ID>((DTC_ID)1735));
								}
							}
							else if (logicalDeviceLevelerType5Sim.CurrentOperation != OperationInProgress.AutoLeveling)
							{
								TaggedLog.Warning("LogicalDeviceLevelerType5Sim", String.Format("Unable to perform Auto Level Command as Internal state must be {0} make sure {1} was called", (object)OperationInProgress.AutoLeveling, (object)"PerformOperationAutoLevelAsync"), Array.Empty<object>());
								result = new LevelerCommandResultType5((CommandResult)7);
							}
							else
							{
								object simUpdateLock = logicalDeviceLevelerType5Sim.SimUpdateLock;
								bool flag = false;
								try
								{
									Monitor.Enter(simUpdateLock, ref flag);
									logicalDeviceLevelerType5Sim._commandTracker.Command(logicalDeviceLevelerType5Sim.CurrentOperation, logicalDeviceLevelerType5Sim.MakeDefaultJacksAndAirbagStateForConfiguration());
									logicalDeviceLevelerType5Sim.SimExtendedStatus.SetAutoOperationLevel(logicalDeviceLevelerCommandAutoLevelType.ZeroPoint);
									logicalDeviceLevelerType5Sim.SimStatus.ReadyTo = LevelerReadyTo.Depart;
									logicalDeviceLevelerType5Sim.SimStatus.IsAutoHitchAvailable = true;
									logicalDeviceLevelerType5Sim.SimStatus.IsAutoRetractAvailable = true;
									if (logicalDeviceLevelerType5Sim.didFailureOccur)
									{
										logicalDeviceLevelerType5Sim.SimStatus.FaultMessageDtc = (DTC_ID)11;
										TaggedLog.Information("LogicalDeviceLevelerType5Sim", String.Format("Leveler 5 DTC set to {0}", (object)(DTC_ID)11), Array.Empty<object>());
									}
								}
								finally
								{
									if (num < 0 && flag)
									{
										Monitor.Exit(simUpdateLock);
									}
								}
								result = new LevelerCommandResultType5((CommandResult)0, new Nullable<DTC_ID>((DTC_ID)1735));
							}
						}
						else
						{
							object simUpdateLock = logicalDeviceLevelerType5Sim.SimUpdateLock;
							bool flag = false;
							try
							{
								Monitor.Enter(simUpdateLock, ref flag);
								logicalDeviceLevelerType5Sim._commandTracker.Stop();
								logicalDeviceLevelerType5Sim.SimStatus.JacksAndAirbagState = logicalDeviceLevelerType5Sim.MakeDefaultJacksAndAirbagStateForConfiguration();
							}
							finally
							{
								if (num < 0 && flag)
								{
									Monitor.Exit(simUpdateLock);
								}
							}
							result = new LevelerCommandResultType5((CommandResult)0);
						}
					}
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SimulatorAsync>d__16 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceLevelerType5Sim <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_0136: Expected O, but got Unknown
				//IL_00fe: Unknown result type (might be due to invalid IL or missing references)
				//IL_0103: Unknown result type (might be due to invalid IL or missing references)
				//IL_010b: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cc: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e8: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceLevelerType5Sim logicalDeviceLevelerType5Sim = <>4__this;
				try
				{
					if (num != 0)
					{
						goto IL_0122;
					}
					TaskAwaiter<bool> val = <>u__1;
					<>u__1 = default(TaskAwaiter<bool>);
					num = (<>1__state = -1);
					goto IL_011a;
					IL_011a:
					val.GetResult();
					goto IL_0122;
					IL_0122:
					if (!((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
					{
						object simUpdateLock = logicalDeviceLevelerType5Sim.SimUpdateLock;
						bool flag = false;
						try
						{
							Monitor.Enter(simUpdateLock, ref flag);
							logicalDeviceLevelerType5Sim.UpdateAngle();
							logicalDeviceLevelerType5Sim._commandTracker.Update();
						}
						finally
						{
							if (num < 0 && flag)
							{
								Monitor.Exit(simUpdateLock);
							}
						}
						logicalDeviceLevelerType5Sim.SimStatus.ActionTakingPlace = logicalDeviceLevelerType5Sim.IsActionTakingPlace;
						logicalDeviceLevelerType5Sim.SimStatus.ExtendedStatusActive = logicalDeviceLevelerType5Sim.IsExtendedStatusActive;
						((LogicalDevice<LogicalDeviceLevelerStatusType5, LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType5Sim).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerType5Sim.SimStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerType5Sim.SimStatus).Size);
						if (logicalDeviceLevelerType5Sim.SimStatus.ExtendedStatusActive)
						{
							((LogicalDeviceWithStatusExtendedMultiplexed<LogicalDeviceLevelerStatusType5, ILogicalDeviceLevelerStatusExtendedType5, LogicalDeviceLevelerStatusExtendedType5Kind, LogicalDeviceLevelerCapabilityType5>)(object)logicalDeviceLevelerType5Sim).UpdateDeviceStatusExtended((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerType5Sim.SimExtendedStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerType5Sim.SimExtendedStatus).Size, (byte)0, default(Nullable<DateTime>));
						}
						val = TaskExtension.TryDelay(33, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SimulatorAsync>d__16>(ref val, ref this);
							return;
						}
						goto IL_011a;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const string LogTag = "LogicalDeviceLevelerType5Sim";

		private const int StatusLength = 8;

		private const int StatusExtendedLength = 7;

		public const int TickIntervalMs = 33;

		public const int CommandTimeoutMs = 1000;

		public const int CommandDelayMs = 200;

		private readonly FirmwareUpdateSim _firmwareUpdateSim;

		public object SimUpdateLock = (object)new Object();

		internal readonly LogicalDeviceLevelerStatusType5 SimStatus = new LogicalDeviceLevelerStatusType5();

		internal readonly LogicalDeviceLevelerStatusExtendedType5AutoStep SimExtendedStatus = new LogicalDeviceLevelerStatusExtendedType5AutoStep();

		private readonly BackgroundOperation _simulator;

		private readonly SimCommandTracker _commandTracker;

		private readonly SimBubbleLevel _bubbleLevel;

		internal IReadOnlyDictionary<OperationInProgress, List<LevelerAutoOperationStep>> AutoOperationStepsDict;

		private const int bubbleLevelCommandResetTimeInSec = 10;

		private const bool generateDtcErrors = true;

		private const int failurePercentage = 3;

		private bool didFailureOccur;

		private const DTC_ID manualMovementDtc = (DTC_ID)1856;

		private const DTC_ID autoLevelDtc = (DTC_ID)11;

		private bool IsActionTakingPlace => base.CurrentOperation switch
		{
			OperationInProgress.None => false, 
			OperationInProgress.AutoLeveling => SimExtendedStatus.AutoOperationStatus == LevelerAutoOperationStatus.InProgress, 
			OperationInProgress.AutoHitching => SimExtendedStatus.AutoOperationStatus == LevelerAutoOperationStatus.InProgress, 
			OperationInProgress.AutoRetract => SimExtendedStatus.AutoOperationStatus == LevelerAutoOperationStatus.InProgress, 
			OperationInProgress.AutoExtend => SimExtendedStatus.AutoOperationStatus == LevelerAutoOperationStatus.InProgress, 
			OperationInProgress.ManualMoving => SimStatus.JacksAndAirbagState != LevelerJacksAndAirBagType5.None, 
			OperationInProgress.ManualUnrestrictedMoving => SimStatus.JacksAndAirbagState != LevelerJacksAndAirBagType5.None, 
			_ => false, 
		};

		private bool IsExtendedStatusActive => base.CurrentOperation switch
		{
			OperationInProgress.None => false, 
			OperationInProgress.AutoLeveling => true, 
			OperationInProgress.AutoHitching => true, 
			OperationInProgress.AutoRetract => true, 
			OperationInProgress.AutoExtend => true, 
			OperationInProgress.ManualMoving => false, 
			OperationInProgress.ManualUnrestrictedMoving => false, 
			_ => false, 
		};

		private bool IsOperationWithAutoStepsRunning => AutoOperationStepsDict[base.CurrentOperation].Count > 0;

		protected override ILogicalDevicePidArrayEnum<SetPointType> MakeLevelerSetPointNamesPid()
		{
			return (ILogicalDevicePidArrayEnum<SetPointType>)(object)new LogicalDevicePidArrayEnumSim<SetPointType>(PidExtension.ConvertToPid((Pid)407), 0uL, 6, false);
		}

		public LogicalDeviceLevelerType5Sim(ILogicalDeviceId logicalDeviceId, LogicalDeviceLevelerCapabilityType5 levelerCapability, ILogicalDeviceService deviceService)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_011e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0128: Expected O, but got Unknown
			//IL_0166: Unknown result type (might be due to invalid IL or missing references)
			//IL_016c: Unknown result type (might be due to invalid IL or missing references)
			//IL_017b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0181: Unknown result type (might be due to invalid IL or missing references)
			//IL_01a8: Unknown result type (might be due to invalid IL or missing references)
			//IL_01b2: Expected O, but got Unknown
			//IL_01ad: Unknown result type (might be due to invalid IL or missing references)
			//IL_01b7: Expected O, but got Unknown
			Dictionary<OperationInProgress, List<LevelerAutoOperationStep>> obj = new Dictionary<OperationInProgress, List<LevelerAutoOperationStep>>();
			obj.Add(OperationInProgress.None, new List<LevelerAutoOperationStep>());
			List<LevelerAutoOperationStep> obj2 = new List<LevelerAutoOperationStep>();
			obj2.Add(LevelerAutoOperationStep.ExtendFront);
			obj2.Add(LevelerAutoOperationStep.ExtendRear);
			obj2.Add(LevelerAutoOperationStep.Stabilize);
			obj2.Add(LevelerAutoOperationStep.VerifyGround);
			obj.Add(OperationInProgress.AutoLeveling, obj2);
			List<LevelerAutoOperationStep> obj3 = new List<LevelerAutoOperationStep>();
			obj3.Add(LevelerAutoOperationStep.FindHitch);
			obj3.Add(LevelerAutoOperationStep.ClearTongueJack);
			obj3.Add(LevelerAutoOperationStep.VerifyGround);
			obj.Add(OperationInProgress.AutoHitching, obj3);
			List<LevelerAutoOperationStep> obj4 = new List<LevelerAutoOperationStep>();
			obj4.Add(LevelerAutoOperationStep.RetractRear);
			obj4.Add(LevelerAutoOperationStep.RetractFront);
			obj4.Add(LevelerAutoOperationStep.RetractJacks);
			obj.Add(OperationInProgress.AutoRetract, obj4);
			List<LevelerAutoOperationStep> obj5 = new List<LevelerAutoOperationStep>();
			obj5.Add(LevelerAutoOperationStep.GroundFront);
			obj5.Add(LevelerAutoOperationStep.ExtendFront);
			obj.Add(OperationInProgress.AutoExtend, obj5);
			obj.Add(OperationInProgress.ManualMoving, new List<LevelerAutoOperationStep>());
			obj.Add(OperationInProgress.ManualUnrestrictedMoving, new List<LevelerAutoOperationStep>());
			AutoOperationStepsDict = (IReadOnlyDictionary<OperationInProgress, List<LevelerAutoOperationStep>>)(object)obj;
			base..ctor(logicalDeviceId, levelerCapability, deviceService);
			byte[] array = (byte[])(object)new Byte[8];
			byte[] array2 = (byte[])(object)new Byte[7];
			Byte[] array3 = new Byte[8];
			RuntimeHelpers.InitializeArray((Array)(object)array3, (RuntimeFieldHandle)/*OpCode not supported: LdMemberToken*/);
			byte[] array4 = (byte[])(object)array3;
			_bubbleLevel = new SimBubbleLevel(33);
			SupportedFeaturesPid = (ILogicalDevicePidULong)new LogicalDevicePidSimULong(PID.LEVELER_UI_SUPPORTED_FEATURES, 63uL);
			((LogicalDeviceDataPacketMutableDoubleBuffer)SimStatus).Update(array, 8, false);
			SimStatus.ReadyTo = LevelerReadyTo.Arrive;
			SimStatus.JacksFullyRetracted = true;
			SimStatus.JacksAndAirbagState = MakeDefaultJacksAndAirbagStateForConfiguration();
			((LogicalDeviceWithStatusExtendedMultiplexed<LogicalDeviceLevelerStatusType5, ILogicalDeviceLevelerStatusExtendedType5, LogicalDeviceLevelerStatusExtendedType5Kind, LogicalDeviceLevelerCapabilityType5>)(object)this).UpdateDeviceStatusExtended((IReadOnlyList<byte>)(object)array2, 7u, (byte)0, default(Nullable<DateTime>));
			((LogicalDeviceWithStatusExtendedMultiplexed<LogicalDeviceLevelerStatusType5, ILogicalDeviceLevelerStatusExtendedType5, LogicalDeviceLevelerStatusExtendedType5Kind, LogicalDeviceLevelerCapabilityType5>)(object)this).UpdateDeviceStatusExtended((IReadOnlyList<byte>)(object)array4, (uint)array4.Length, (byte)1, default(Nullable<DateTime>));
			_firmwareUpdateSim = new FirmwareUpdateSim((ILogicalDevice)(object)this);
			_commandTracker = new SimCommandTracker(this);
			_simulator = new BackgroundOperation(new BackgroundOperationFunc(SimulatorAsync));
			_simulator.Start();
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task SimulatorAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SimulatorAsync>d__16 <SimulatorAsync>d__ = default(<SimulatorAsync>d__16);
			<SimulatorAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SimulatorAsync>d__.<>4__this = this;
			<SimulatorAsync>d__.cancellationToken = cancellationToken;
			<SimulatorAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Start<<SimulatorAsync>d__16>(ref <SimulatorAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Task;
		}

		private void UpdateAngle()
		{
			//IL_0013: Unknown result type (might be due to invalid IL or missing references)
			//IL_0018: Unknown result type (might be due to invalid IL or missing references)
			//IL_0019: Unknown result type (might be due to invalid IL or missing references)
			//IL_0025: Unknown result type (might be due to invalid IL or missing references)
			LogicalDeviceLevelerStatusType5 simStatus = SimStatus;
			LogicalDeviceLevelerStatusType5 simStatus2 = SimStatus;
			ValueTuple<float, float> val = _bubbleLevel.UpdateAngle();
			simStatus.XAngle = val.Item1;
			simStatus2.YAngle = val.Item2;
		}

		internal LevelerJacksAndAirBagType5 MakeDefaultJacksAndAirbagStateForConfiguration()
		{
			//IL_010b: Unknown result type (might be due to invalid IL or missing references)
			LevelerJacksAndAirBagType5 levelerJacksAndAirBagType = LevelerJacksAndAirBagType5.None;
			switch (((LogicalDevice<LogicalDeviceLevelerCapabilityType5>)(object)this).DeviceCapability.JackConfiguration)
			{
			case LevelerConfigurationJack.ThreeJack:
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftFrontJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftFrontJackRetract;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.RightRearJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.RightRearJackRetract;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftRearJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftRearJackRetract;
				break;
			case LevelerConfigurationJack.FourJack:
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.RightFrontJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.RightFrontJackRetract;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftFrontJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftFrontJackRetract;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.RightRearJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.RightRearJackRetract;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftRearJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftRearJackRetract;
				break;
			case LevelerConfigurationJack.FourJackTongue:
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.RightFrontJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.RightFrontJackRetract;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftFrontJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftFrontJackRetract;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.RightRearJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.RightRearJackRetract;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftRearJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftRearJackRetract;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.TongueJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.TongueJackRetract;
				break;
			case LevelerConfigurationJack.SixJack:
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.RightFrontJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.RightFrontJackRetract;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftFrontJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftFrontJackRetract;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.RightRearJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.RightRearJackRetract;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftRearJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftRearJackRetract;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftMiddleJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.LeftMiddleJackRetract;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.RightMiddleJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.RightMiddleJackRetract;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.TongueJackExtend;
				levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.TongueJackRetract;
				break;
			default:
				throw new ArgumentOutOfRangeException();
			}
			levelerJacksAndAirBagType |= LevelerJacksAndAirBagType5.FillAirBag;
			return levelerJacksAndAirBagType | LevelerJacksAndAirBagType5.DumpAirBag;
		}

		public override Task<IEnumerable<LevelerAutoOperationStep>> GetAutoStepDetailsAsync(int expectedStepsCount, CancellationToken cancelToken)
		{
			return Task.FromResult<IEnumerable<LevelerAutoOperationStep>>((IEnumerable<LevelerAutoOperationStep>)(object)AutoOperationStepsDict[base.CurrentOperation]);
		}

		public override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
			_simulator.Stop();
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		protected override Task<LevelerCommandResultType5> SendCommandAsync(ILogicalDeviceLevelerCommandType5 command, int commandCount, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandAsync>d__33 <SendCommandAsync>d__ = default(<SendCommandAsync>d__33);
			<SendCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<LevelerCommandResultType5>.Create();
			<SendCommandAsync>d__.<>4__this = this;
			<SendCommandAsync>d__.command = command;
			<SendCommandAsync>d__.cancellationToken = cancellationToken;
			<SendCommandAsync>d__.<>1__state = -1;
			<SendCommandAsync>d__.<>t__builder.Start<<SendCommandAsync>d__33>(ref <SendCommandAsync>d__);
			return <SendCommandAsync>d__.<>t__builder.Task;
		}

		public override Task<FirmwareUpdateSupport> TryGetFirmwareUpdateSupportAsync(CancellationToken cancelToken)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return _firmwareUpdateSim.TryGetFirmwareUpdateSupportAsync(cancelToken);
		}

		public override Task UpdateFirmwareAsync(IReadOnlyList<byte> data, Func<ILogicalDeviceTransferProgress, bool> progressAck, CancellationToken cancellationToken, Dictionary<FirmwareUpdateOption, object> options = null)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			return _firmwareUpdateSim.UpdateFirmwareAsync(data, progressAck, cancellationToken, options);
		}
	}
	internal class SimCommandTracker : Object
	{
		private const string LogTag = "SimCommandTracker";

		public const int AutoStepAdvanceTimeMs = 2000;

		private readonly LogicalDeviceLevelerType5Sim _levelerSim;

		private readonly Stopwatch _stepAdvanceStopwatch;

		private IReadOnlyList<LevelerAutoOperationStep> _autoSteps;

		private int _autoStepsIndex;

		private LogicalDeviceLevelerType5.OperationInProgress _operationInProgress;

		private LevelerJacksAndAirBagType5 _jacksAndAirBagActionDefault;

		public SimCommandTracker(LogicalDeviceLevelerType5Sim levelerSim)
		{
			_levelerSim = levelerSim;
			_autoSteps = (IReadOnlyList<LevelerAutoOperationStep>)(object)new List<LevelerAutoOperationStep>();
			_autoStepsIndex = 0;
			_stepAdvanceStopwatch = Stopwatch.StartNew();
		}

		public bool Command(LogicalDeviceLevelerType5.OperationInProgress operationInProgress, LevelerJacksAndAirBagType5 jacksAndAirBagAction)
		{
			lock (_levelerSim.SimUpdateLock)
			{
				_jacksAndAirBagActionDefault = jacksAndAirBagAction;
				if (_operationInProgress == operationInProgress)
				{
					return false;
				}
				_operationInProgress = operationInProgress;
				_autoSteps = (IReadOnlyList<LevelerAutoOperationStep>)(object)_levelerSim.AutoOperationStepsDict[operationInProgress];
				_autoStepsIndex = 0;
				_stepAdvanceStopwatch.Restart();
				Update();
				return true;
			}
		}

		public void Update()
		{
			lock (_levelerSim.SimUpdateLock)
			{
				if (_levelerSim.CurrentOperation == LogicalDeviceLevelerType5.OperationInProgress.None)
				{
					_levelerSim.SimStatus.JacksAndAirbagState = _levelerSim.MakeDefaultJacksAndAirbagStateForConfiguration();
					return;
				}
				_levelerSim.SimStatus.JacksAndAirbagState = _jacksAndAirBagActionDefault;
				if (((IReadOnlyCollection<LevelerAutoOperationStep>)(object)_autoSteps).Count == 0)
				{
					_levelerSim.SimExtendedStatus.AutoOperationStatus = LevelerAutoOperationStatus.Idle;
					_levelerSim.SimExtendedStatus.AutoStep = LevelerAutoOperationStep.None;
					_levelerSim.SimExtendedStatus.AutoStepCount = 0;
					_levelerSim.SimExtendedStatus.AutoStepIndex = 0;
				}
				else if (_autoStepsIndex >= ((IReadOnlyCollection<LevelerAutoOperationStep>)(object)_autoSteps).Count)
				{
					_stepAdvanceStopwatch.Stop();
					switch (_levelerSim.SimExtendedStatus.AutoOperationStatus)
					{
					case LevelerAutoOperationStatus.InProgress:
						_levelerSim.SimExtendedStatus.AutoOperationStatus = LevelerAutoOperationStatus.CompletedSuccess;
						break;
					case LevelerAutoOperationStatus.CompletedSuccess:
						_levelerSim.SimExtendedStatus.AutoOperationStatus = LevelerAutoOperationStatus.Idle;
						_operationInProgress = LogicalDeviceLevelerType5.OperationInProgress.None;
						break;
					case LevelerAutoOperationStatus.Idle:
						break;
					}
				}
				else
				{
					_levelerSim.SimExtendedStatus.AutoOperationStatus = LevelerAutoOperationStatus.InProgress;
					_levelerSim.SimExtendedStatus.AutoStep = _autoSteps[_autoStepsIndex];
					_levelerSim.SimExtendedStatus.AutoStepCount = ((IReadOnlyCollection<LevelerAutoOperationStep>)(object)_autoSteps).Count;
					_levelerSim.SimExtendedStatus.AutoStepIndex = _autoStepsIndex;
					if (_stepAdvanceStopwatch.ElapsedMilliseconds >= 2000)
					{
						_autoStepsIndex++;
						_stepAdvanceStopwatch.Restart();
					}
				}
			}
		}

		public void Stop()
		{
			lock (_levelerSim.SimUpdateLock)
			{
				_stepAdvanceStopwatch.Stop();
				_operationInProgress = LogicalDeviceLevelerType5.OperationInProgress.None;
				_levelerSim.SimExtendedStatus.AutoOperationStatus = LevelerAutoOperationStatus.Idle;
				_levelerSim.SimExtendedStatus.AutoStep = LevelerAutoOperationStep.None;
				_levelerSim.SimExtendedStatus.AutoStepCount = 0;
				_levelerSim.SimExtendedStatus.AutoStepIndex = 0;
			}
		}
	}
}
namespace OneControl.Devices.Leveler.Type4
{
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceLevelerType4StatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceLevelerType4StatusSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceLevelerType4StatusSerializable);
			}
		}

		[JsonProperty]
		public bool IsLevel
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool AreJacksFullyRetracted
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool AreJacksGrounded
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool AreJacksMoving
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool IsExcessAngleDetected
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool IsExcessTwistDetected
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LogicalDeviceLevelerScreenType4 ScreenSelected
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public uint ButtonsEnabledRaw
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public float XAngle
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public float YAngle
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceLevelerType4StatusSerializable(bool isLevel, bool areJacksFullyRetracted, bool areJacksGrounded, bool areJacksMoving, bool isExcessAngleDetected, bool isExcessTwistDetected, LogicalDeviceLevelerScreenType4 screenSelected, uint buttonsEnabledRaw, float xAngle, float yAngle)
		{
			IsLevel = isLevel;
			AreJacksFullyRetracted = areJacksFullyRetracted;
			AreJacksGrounded = areJacksGrounded;
			AreJacksMoving = areJacksMoving;
			IsExcessAngleDetected = isExcessAngleDetected;
			IsExcessTwistDetected = isExcessTwistDetected;
			ScreenSelected = screenSelected;
			ButtonsEnabledRaw = buttonsEnabledRaw;
			XAngle = xAngle;
			YAngle = yAngle;
		}

		public LogicalDeviceLevelerType4StatusSerializable(LogicalDeviceLevelerStatusType4 levelerStatus)
			: this(levelerStatus.IsLevel, levelerStatus.AreJacksFullyRetracted, levelerStatus.AreJacksGrounded, levelerStatus.AreJacksMoving, levelerStatus.IsExcessAngleDetected, levelerStatus.IsExcessTwistDetected, levelerStatus.ScreenSelected, levelerStatus.ButtonsEnabledRaw, levelerStatus.XAngle, levelerStatus.YAngle)
		{
		}

		public override byte[] MakeRawData()
		{
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)new LogicalDeviceLevelerStatusType4
			{
				IsLevel = IsLevel,
				AreJacksFullyRetracted = AreJacksFullyRetracted,
				AreJacksGrounded = AreJacksGrounded,
				AreJacksMoving = AreJacksMoving,
				IsExcessAngleDetected = IsExcessAngleDetected,
				IsExcessTwistDetected = IsExcessTwistDetected,
				ScreenSelected = ScreenSelected,
				ButtonsEnabledRaw = ButtonsEnabledRaw,
				XAngle = XAngle,
				YAngle = YAngle
			}).CopyCurrentData();
		}

		public static LogicalDeviceLevelerType4StatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceLevelerStatusType4 logicalDeviceLevelerStatusType = new LogicalDeviceLevelerStatusType4();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusType).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusType).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusType).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusType).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusType).Update(rawData, rawData.Length, false);
			return new LogicalDeviceLevelerType4StatusSerializable(logicalDeviceLevelerStatusType);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceLevelerType4StatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceLevelerType4StatusSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("IsLevel = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsLevel)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", AreJacksFullyRetracted = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref AreJacksFullyRetracted)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", AreJacksGrounded = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref AreJacksGrounded)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", AreJacksMoving = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref AreJacksMoving)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IsExcessAngleDetected = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsExcessAngleDetected)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IsExcessTwistDetected = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsExcessTwistDetected)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ScreenSelected = ");
			builder.Append(((Object)ScreenSelected/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ButtonsEnabledRaw = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<uint, UInt32>(ref ButtonsEnabledRaw)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", XAngle = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref XAngle)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", YAngle = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref YAngle)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return (((((((((base.GetHashCode() * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsLevel)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(AreJacksFullyRetracted)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(AreJacksGrounded)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(AreJacksMoving)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsExcessAngleDetected)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsExcessTwistDetected)) * -1521134295 + EqualityComparer<LogicalDeviceLevelerScreenType4>.Default.GetHashCode(ScreenSelected)) * -1521134295 + EqualityComparer<uint>.Default.GetHashCode(ButtonsEnabledRaw)) * -1521134295 + EqualityComparer<float>.Default.GetHashCode(XAngle)) * -1521134295 + EqualityComparer<float>.Default.GetHashCode(YAngle);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceLevelerType4StatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceLevelerType4StatusSerializable(LogicalDeviceLevelerType4StatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceLevelerType4StatusSerializable>)original)
		{
			IsLevel = original.IsLevel;
			AreJacksFullyRetracted = original.AreJacksFullyRetracted;
			AreJacksGrounded = original.AreJacksGrounded;
			AreJacksMoving = original.AreJacksMoving;
			IsExcessAngleDetected = original.IsExcessAngleDetected;
			IsExcessTwistDetected = original.IsExcessTwistDetected;
			ScreenSelected = original.ScreenSelected;
			ButtonsEnabledRaw = original.ButtonsEnabledRaw;
			XAngle = original.XAngle;
			YAngle = original.YAngle;
		}
	}
}
namespace OneControl.Devices.Leveler.Type3
{
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceLevelerType3StatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceLevelerType3StatusSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceLevelerType3StatusSerializable);
			}
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LogicalDeviceLevelerScreenType3 CurrentScreenShowing
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LogicalDeviceLevelerButtonType3 ButtonsDisabled
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public uint IndicatorBlinkOnTimeMs
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public uint IndicatorBlinkOffTimeMs
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LogicalDeviceLevelerStatusIndicatorStateType3 LedFrontState
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LogicalDeviceLevelerStatusIndicatorStateType3 LedRearState
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LogicalDeviceLevelerStatusIndicatorStateType3 LedLeftState
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LogicalDeviceLevelerStatusIndicatorStateType3 LedRightState
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LogicalDeviceLevelerStatusIndicatorStateType3 LedLevelState
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LogicalDeviceLevelerStatusIndicatorStateType3 LedExtendState
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LogicalDeviceLevelerStatusIndicatorStateType3 LedRetractState
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LogicalDeviceLevelerStatusIndicatorStateType3 BuzzerState
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceLevelerType3StatusSerializable(LogicalDeviceLevelerScreenType3 currentScreenShowing, LogicalDeviceLevelerButtonType3 buttonsDisabled, uint indicatorBlinkOnTimeMs, uint indicatorBlinkOffTimeMs, LogicalDeviceLevelerStatusIndicatorStateType3 ledFrontState, LogicalDeviceLevelerStatusIndicatorStateType3 ledRearState, LogicalDeviceLevelerStatusIndicatorStateType3 ledLeftState, LogicalDeviceLevelerStatusIndicatorStateType3 ledRightState, LogicalDeviceLevelerStatusIndicatorStateType3 ledLevelState, LogicalDeviceLevelerStatusIndicatorStateType3 ledExtendState, LogicalDeviceLevelerStatusIndicatorStateType3 ledRetractState, LogicalDeviceLevelerStatusIndicatorStateType3 buzzerState)
		{
			CurrentScreenShowing = currentScreenShowing;
			ButtonsDisabled = buttonsDisabled;
			IndicatorBlinkOnTimeMs = indicatorBlinkOnTimeMs;
			IndicatorBlinkOffTimeMs = indicatorBlinkOffTimeMs;
			LedFrontState = ledFrontState;
			LedRearState = ledRearState;
			LedLeftState = ledLeftState;
			LedRightState = ledRightState;
			LedLevelState = ledLevelState;
			LedExtendState = ledExtendState;
			LedRetractState = ledRetractState;
			BuzzerState = buzzerState;
		}

		public LogicalDeviceLevelerType3StatusSerializable(LogicalDeviceLevelerStatusType3 levelerStatus)
			: this(levelerStatus.CurrentScreenShowing, levelerStatus.ButtonsDisabled, levelerStatus.IndicatorBlinkOnTimeMs, levelerStatus.IndicatorBlinkOffTimeMs, levelerStatus.IndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Front), levelerStatus.IndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Rear), levelerStatus.IndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Left), levelerStatus.IndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Right), levelerStatus.IndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Level), levelerStatus.IndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Extend), levelerStatus.IndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Retract), levelerStatus.IndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Buzzer))
		{
		}

		public override byte[] MakeRawData()
		{
			LogicalDeviceLevelerStatusType3 logicalDeviceLevelerStatusType = new LogicalDeviceLevelerStatusType3();
			logicalDeviceLevelerStatusType.CurrentScreenShowing = CurrentScreenShowing;
			logicalDeviceLevelerStatusType.ButtonsDisabled = ButtonsDisabled;
			logicalDeviceLevelerStatusType.IndicatorBlinkOnTimeMs = IndicatorBlinkOnTimeMs;
			logicalDeviceLevelerStatusType.IndicatorBlinkOffTimeMs = IndicatorBlinkOffTimeMs;
			logicalDeviceLevelerStatusType.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Front, LedFrontState);
			logicalDeviceLevelerStatusType.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Rear, LedRearState);
			logicalDeviceLevelerStatusType.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Left, LedLeftState);
			logicalDeviceLevelerStatusType.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Right, LedRightState);
			logicalDeviceLevelerStatusType.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Level, LedLevelState);
			logicalDeviceLevelerStatusType.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Extend, LedExtendState);
			logicalDeviceLevelerStatusType.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Retract, LedRetractState);
			logicalDeviceLevelerStatusType.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Buzzer, BuzzerState);
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusType).CopyCurrentData();
		}

		public static LogicalDeviceLevelerType3StatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceLevelerStatusType3 logicalDeviceLevelerStatusType = new LogicalDeviceLevelerStatusType3();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusType).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusType).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusType).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusType).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceLevelerStatusType).Update(rawData, rawData.Length, false);
			return new LogicalDeviceLevelerType3StatusSerializable(logicalDeviceLevelerStatusType);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceLevelerType3StatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceLevelerType3StatusSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("CurrentScreenShowing = ");
			builder.Append(((Object)CurrentScreenShowing/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ButtonsDisabled = ");
			builder.Append(((Object)ButtonsDisabled/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IndicatorBlinkOnTimeMs = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<uint, UInt32>(ref IndicatorBlinkOnTimeMs)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IndicatorBlinkOffTimeMs = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<uint, UInt32>(ref IndicatorBlinkOffTimeMs)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LedFrontState = ");
			builder.Append(((Object)LedFrontState/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LedRearState = ");
			builder.Append(((Object)LedRearState/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LedLeftState = ");
			builder.Append(((Object)LedLeftState/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LedRightState = ");
			builder.Append(((Object)LedRightState/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LedLevelState = ");
			builder.Append(((Object)LedLevelState/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LedExtendState = ");
			builder.Append(((Object)LedExtendState/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LedRetractState = ");
			builder.Append(((Object)LedRetractState/*cast due to .constrained prefix*/).ToString());
			builder.Append(", BuzzerState = ");
			builder.Append(((Object)BuzzerState/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return (((((((((((base.GetHashCode() * -1521134295 + EqualityComparer<LogicalDeviceLevelerScreenType3>.Default.GetHashCode(CurrentScreenShowing)) * -1521134295 + EqualityComparer<LogicalDeviceLevelerButtonType3>.Default.GetHashCode(ButtonsDisabled)) * -1521134295 + EqualityComparer<uint>.Default.GetHashCode(IndicatorBlinkOnTimeMs)) * -1521134295 + EqualityComparer<uint>.Default.GetHashCode(IndicatorBlinkOffTimeMs)) * -1521134295 + EqualityComparer<LogicalDeviceLevelerStatusIndicatorStateType3>.Default.GetHashCode(LedFrontState)) * -1521134295 + EqualityComparer<LogicalDeviceLevelerStatusIndicatorStateType3>.Default.GetHashCode(LedRearState)) * -1521134295 + EqualityComparer<LogicalDeviceLevelerStatusIndicatorStateType3>.Default.GetHashCode(LedLeftState)) * -1521134295 + EqualityComparer<LogicalDeviceLevelerStatusIndicatorStateType3>.Default.GetHashCode(LedRightState)) * -1521134295 + EqualityComparer<LogicalDeviceLevelerStatusIndicatorStateType3>.Default.GetHashCode(LedLevelState)) * -1521134295 + EqualityComparer<LogicalDeviceLevelerStatusIndicatorStateType3>.Default.GetHashCode(LedExtendState)) * -1521134295 + EqualityComparer<LogicalDeviceLevelerStatusIndicatorStateType3>.Default.GetHashCode(LedRetractState)) * -1521134295 + EqualityComparer<LogicalDeviceLevelerStatusIndicatorStateType3>.Default.GetHashCode(BuzzerState);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceLevelerType3StatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceLevelerType3StatusSerializable(LogicalDeviceLevelerType3StatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceLevelerType3StatusSerializable>)original)
		{
			CurrentScreenShowing = original.CurrentScreenShowing;
			ButtonsDisabled = original.ButtonsDisabled;
			IndicatorBlinkOnTimeMs = original.IndicatorBlinkOnTimeMs;
			IndicatorBlinkOffTimeMs = original.IndicatorBlinkOffTimeMs;
			LedFrontState = original.LedFrontState;
			LedRearState = original.LedRearState;
			LedLeftState = original.LedLeftState;
			LedRightState = original.LedRightState;
			LedLevelState = original.LedLevelState;
			LedExtendState = original.LedExtendState;
			LedRetractState = original.LedRetractState;
			BuzzerState = original.BuzzerState;
		}
	}
}
namespace OneControl.Devices.Leveler.Type3.State
{
	public class LogicalDeviceLevelerType3SimState : Object, ITextConsole
	{
		public LogicalDeviceLevelerStatusType3 Status;

		private ILogicalDevicesLevelerType3CommandRunner _currentRunner;

		private Dictionary<LogicalDeviceLevelerScreenType3, ILogicalDevicesLevelerType3CommandRunner> commandRunners;

		public string[] LinesRaw;

		internal Dictionary<LogicalDeviceLevelerScreenType3, ILogicalDevicesLevelerType3CommandRunner> CommandRunners
		{
			get
			{
				return commandRunners;
			}
			private set
			{
			}
		}

		public IDevice Device => null;

		bool ITextConsole.IsDetected => true;

		public IReadOnlyList<string> Lines => (IReadOnlyList<string>)(object)LinesRaw;

		TEXT_CONSOLE_SIZE ITextConsole.Size => new TEXT_CONSOLE_SIZE
		{
			Height = LinesRaw.Length,
			Width = Enumerable.First<string>((IEnumerable<string>)(object)Enumerable.OrderByDescending<string, int>((IEnumerable<string>)(object)LinesRaw, (Func<string, int>)((string s) => s.Length))).Length
		};

		public LogicalDeviceLevelerType3SimState(LogicalDeviceLevelerStatusType3 status)
		{
			Dictionary<LogicalDeviceLevelerScreenType3, ILogicalDevicesLevelerType3CommandRunner> obj = new Dictionary<LogicalDeviceLevelerScreenType3, ILogicalDevicesLevelerType3CommandRunner>();
			obj.Add(LogicalDeviceLevelerScreenType3.Default, (ILogicalDevicesLevelerType3CommandRunner)new CommandRunnerSimDefaultScreen());
			obj.Add(LogicalDeviceLevelerScreenType3.Auto, (ILogicalDevicesLevelerType3CommandRunner)new CommandRunnerSimAutoScreen());
			obj.Add(LogicalDeviceLevelerScreenType3.YesNo, (ILogicalDevicesLevelerType3CommandRunner)new CommandRunnerSimYesNoScreen());
			obj.Add(LogicalDeviceLevelerScreenType3.Alert, (ILogicalDevicesLevelerType3CommandRunner)new CommandRunnerSimAlertScreen());
			obj.Add(LogicalDeviceLevelerScreenType3.IdleMotorized, (ILogicalDevicesLevelerType3CommandRunner)new CommandRunnerSimIdleMotorizedScreen());
			obj.Add(LogicalDeviceLevelerScreenType3.IdleTowable, (ILogicalDevicesLevelerType3CommandRunner)new CommandRunnerSimIdleTowableScreen());
			obj.Add(LogicalDeviceLevelerScreenType3.Info, (ILogicalDevicesLevelerType3CommandRunner)new CommandRunnerSimInfoScreen());
			obj.Add(LogicalDeviceLevelerScreenType3.Manual, (ILogicalDevicesLevelerType3CommandRunner)new CommandRunnerSimManualScreen());
			obj.Add(LogicalDeviceLevelerScreenType3.Select, (ILogicalDevicesLevelerType3CommandRunner)new CommandRunnerSimSelectScreen());
			commandRunners = obj;
			((Object)this)..ctor();
			Status = status;
			_currentRunner = CommandRunners[LogicalDeviceLevelerScreenType3.Default];
			_currentRunner.EnterState(this);
		}

		public void ProcessCommand(LogicalDeviceLevelerCommandType3 command)
		{
			_currentRunner.ProcessCommand(command, this);
		}
	}
}
namespace OneControl.Devices.Leveler.Type3.CommandRunners
{
	internal interface ILogicalDevicesLevelerType3CommandRunner
	{
		void ProcessCommand(LogicalDeviceLevelerCommandType3 Command, LogicalDeviceLevelerType3SimState state);

		void EnterState(LogicalDeviceLevelerType3SimState CurrentState);
	}
}
namespace OneControl.Devices.Leveler.Type3.CommandRunners.SimTest
{
	public class CommandRunnerSimAlertScreen : LogicalDevicesLevelerType3CommandRunnerSim
	{
		private LogicalDeviceLevelerScreenType3 _lastScreen;

		protected override void ConfigureState(LogicalDeviceLevelerType3SimState CurrentState)
		{
			_lastScreen = CurrentState.Status.CurrentScreenShowing;
			CurrentState.Status.CurrentScreenShowing = LogicalDeviceLevelerScreenType3.Alert;
			CurrentState.Status.ButtonsDisabled = ~LogicalDeviceLevelerButtonType3.Enter;
		}

		public override void Dispose(bool disposing)
		{
		}

		protected override void ProcessNewCommand(LogicalDeviceLevelerCommandType3 Command, LogicalDeviceLevelerType3SimState state)
		{
			if (Command.ButtonsPressed == LogicalDeviceLevelerButtonType3.Enter)
			{
				state.CommandRunners[_lastScreen].EnterState(state);
				return;
			}
			state.LinesRaw = (string[])(object)new String[1] { "Waiting on input." };
		}
	}
	public class CommandRunnerSimAutoScreen : LogicalDevicesLevelerType3CommandRunnerSim, IYesNoDecision
	{
		private enum AutoOperationType : Enum
		{
			LEVEL,
			HITCH,
			NONE
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass4_0 : Object
		{
			[StructLayout((LayoutKind)3)]
			private struct <<ConfigureState>b__0>d : ValueType, IAsyncStateMachine
			{
				public int <>1__state;

				public AsyncTaskMethodBuilder <>t__builder;

				public <>c__DisplayClass4_0 <>4__this;

				private TaskAwaiter<bool> <>u__1;

				private void MoveNext()
				{
					//IL_00f3: Expected O, but got Unknown
					//IL_005e: Unknown result type (might be due to invalid IL or missing references)
					//IL_0063: Unknown result type (might be due to invalid IL or missing references)
					//IL_006a: Unknown result type (might be due to invalid IL or missing references)
					//IL_0021: Unknown result type (might be due to invalid IL or missing references)
					//IL_002b: Unknown result type (might be due to invalid IL or missing references)
					//IL_0030: Unknown result type (might be due to invalid IL or missing references)
					//IL_0044: Unknown result type (might be due to invalid IL or missing references)
					//IL_0045: Unknown result type (might be due to invalid IL or missing references)
					int num = <>1__state;
					<>c__DisplayClass4_0 <>c__DisplayClass4_ = <>4__this;
					try
					{
						TaskAwaiter<bool> val;
						if (num != 0)
						{
							val = TaskExtension.TryDelay(3000, <>c__DisplayClass4_.<>4__this._tokenSource.Token).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<ConfigureState>b__0>d>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
						}
						val.GetResult();
						<>c__DisplayClass4_.<>4__this._currentOperation = AutoOperationType.NONE;
						<>c__DisplayClass4_.<>4__this.DisableAllIndicators();
						<>c__DisplayClass4_.CurrentState.CommandRunners[LogicalDeviceLevelerScreenType3.Info].EnterState(<>c__DisplayClass4_.CurrentState);
						<>c__DisplayClass4_.CurrentState.LinesRaw = (string[])(object)new String[1] { String.Concat("Auto ", (<>c__DisplayClass4_.<>4__this._currentOperation == AutoOperationType.LEVEL) ? "Level" : "Hitch", " Complete!") };
					}
					catch (Exception ex)
					{
						Exception exception = ex;
						<>1__state = -2;
						((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
						return;
					}
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
				}

				[DebuggerHidden]
				private void SetStateMachine(IAsyncStateMachine stateMachine)
				{
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
				}
			}

			public CommandRunnerSimAutoScreen <>4__this;

			public LogicalDeviceLevelerType3SimState CurrentState;

			[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
			internal Task <ConfigureState>b__0()
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<ConfigureState>b__0>d <<ConfigureState>b__0>d = default(<<ConfigureState>b__0>d);
				<<ConfigureState>b__0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<ConfigureState>b__0>d.<>4__this = this;
				<<ConfigureState>b__0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<ConfigureState>b__0>d.<>t__builder)).Start<<<ConfigureState>b__0>d>(ref <<ConfigureState>b__0>d);
				return ((AsyncTaskMethodBuilder)(ref <<ConfigureState>b__0>d.<>t__builder)).Task;
			}
		}

		private AutoOperationType _currentOperation = AutoOperationType.NONE;

		private CancellationTokenSource _tokenSource;

		protected override void ProcessNewCommand(LogicalDeviceLevelerCommandType3 Command, LogicalDeviceLevelerType3SimState state)
		{
			if (Command.ButtonsPressed == LogicalDeviceLevelerButtonType3.Reserved1)
			{
				state.LinesRaw = (string[])(object)new String[1] { "Are you sure you want to abort?" };
				state.CommandRunners[LogicalDeviceLevelerScreenType3.YesNo].EnterState(state);
			}
		}

		protected override void ConfigureState(LogicalDeviceLevelerType3SimState CurrentState)
		{
			//IL_0015: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Expected O, but got Unknown
			//IL_00de: Unknown result type (might be due to invalid IL or missing references)
			<>c__DisplayClass4_0 CS$<>8__locals9 = new <>c__DisplayClass4_0();
			CS$<>8__locals9.<>4__this = this;
			CS$<>8__locals9.CurrentState = CurrentState;
			_tokenSource = new CancellationTokenSource();
			CS$<>8__locals9.CurrentState.Status.ButtonsDisabled = ~(LogicalDeviceLevelerButtonType3.MenuDown | LogicalDeviceLevelerButtonType3.MenuUp | LogicalDeviceLevelerButtonType3.Reserved1);
			CS$<>8__locals9.CurrentState.Status.CurrentScreenShowing = LogicalDeviceLevelerScreenType3.Auto;
			switch (base.LastButtonPressed)
			{
			case LogicalDeviceLevelerButtonType3.AutoLevel:
				_currentOperation = AutoOperationType.LEVEL;
				break;
			case LogicalDeviceLevelerButtonType3.AutoHitch:
				_currentOperation = AutoOperationType.HITCH;
				break;
			default:
				_currentOperation = AutoOperationType.NONE;
				break;
			}
			CS$<>8__locals9.CurrentState.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Front, LogicalDeviceLevelerStatusIndicatorStateType3.Blink);
			CS$<>8__locals9.CurrentState.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Rear, LogicalDeviceLevelerStatusIndicatorStateType3.Blink);
			CS$<>8__locals9.CurrentState.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Left, LogicalDeviceLevelerStatusIndicatorStateType3.Blink);
			CS$<>8__locals9.CurrentState.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Right, LogicalDeviceLevelerStatusIndicatorStateType3.Blink);
			Task.Run((Func<Task>)([AsyncStateMachine(/*Could not decode attribute arguments.*/)] () =>
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<>c__DisplayClass4_0.<<ConfigureState>b__0>d <<ConfigureState>b__0>d = default(<>c__DisplayClass4_0.<<ConfigureState>b__0>d);
				<<ConfigureState>b__0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<ConfigureState>b__0>d.<>4__this = CS$<>8__locals9;
				<<ConfigureState>b__0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<ConfigureState>b__0>d.<>t__builder)).Start<<>c__DisplayClass4_0.<<ConfigureState>b__0>d>(ref <<ConfigureState>b__0>d);
				return ((AsyncTaskMethodBuilder)(ref <<ConfigureState>b__0>d.<>t__builder)).Task;
			}), _tokenSource.Token);
		}

		public void OnYes()
		{
			_currentOperation = AutoOperationType.NONE;
			DisableAllIndicators();
			CancellationTokenSourceExtension.CancelAndDispose(_tokenSource);
		}

		public void OnNo()
		{
		}

		public override void Dispose(bool disposing)
		{
			CancellationTokenSourceExtension.TryCancelAndDispose(_tokenSource);
			_tokenSource = null;
		}
	}
	public class CommandRunnerSimDefaultScreen : LogicalDevicesLevelerType3CommandRunnerSim
	{
		protected override void ProcessNewCommand(LogicalDeviceLevelerCommandType3 command, LogicalDeviceLevelerType3SimState state)
		{
			switch (command.ButtonsPressed)
			{
			case LogicalDeviceLevelerButtonType3.AutoLevel:
				state.CommandRunners[LogicalDeviceLevelerScreenType3.Auto].EnterState(state);
				break;
			case LogicalDeviceLevelerButtonType3.Front:
				DisableAllIndicatorsExcept(LogicalDeviceLevelerStatusIndicatorType3.Front);
				state.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Front, LogicalDeviceLevelerStatusIndicatorStateType3.On);
				break;
			case LogicalDeviceLevelerButtonType3.Back:
				DisableAllIndicatorsExcept(LogicalDeviceLevelerStatusIndicatorType3.Rear);
				state.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Rear, LogicalDeviceLevelerStatusIndicatorStateType3.On);
				break;
			case LogicalDeviceLevelerButtonType3.Left:
				DisableAllIndicatorsExcept(LogicalDeviceLevelerStatusIndicatorType3.Left);
				state.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Left, LogicalDeviceLevelerStatusIndicatorStateType3.On);
				break;
			case LogicalDeviceLevelerButtonType3.Right:
				DisableAllIndicatorsExcept(LogicalDeviceLevelerStatusIndicatorType3.Right);
				state.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Right, LogicalDeviceLevelerStatusIndicatorStateType3.On);
				break;
			case LogicalDeviceLevelerButtonType3.Retract:
				DisableAllIndicatorsExcept(LogicalDeviceLevelerStatusIndicatorType3.Retract);
				state.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Retract, LogicalDeviceLevelerStatusIndicatorStateType3.On);
				break;
			case LogicalDeviceLevelerButtonType3.Extend:
				DisableAllIndicatorsExcept(LogicalDeviceLevelerStatusIndicatorType3.Extend);
				state.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Extend, LogicalDeviceLevelerStatusIndicatorStateType3.On);
				break;
			default:
				state.LinesRaw = (string[])(object)new String[1] { "Waiting on input." };
				break;
			}
		}

		protected override void ConfigureState(LogicalDeviceLevelerType3SimState CurrentState)
		{
			CurrentState.Status.ButtonsDisabled = LogicalDeviceLevelerButtonType3.Back | LogicalDeviceLevelerButtonType3.AutoHitch | LogicalDeviceLevelerButtonType3.EnterSetup;
			CurrentState.Status.CurrentScreenShowing = LogicalDeviceLevelerScreenType3.Default;
			CurrentState.LinesRaw = (string[])(object)new String[1] { "Default Screen" };
		}

		public override void Dispose(bool disposing)
		{
		}
	}
	public class CommandRunnerSimIdleMotorizedScreen : LogicalDevicesLevelerType3CommandRunnerSim
	{
		protected override void ConfigureState(LogicalDeviceLevelerType3SimState CurrentState)
		{
			CurrentState.Status.ButtonsDisabled = ~(LogicalDeviceLevelerButtonType3.AutoLevel | LogicalDeviceLevelerButtonType3.Enter | LogicalDeviceLevelerButtonType3.MenuDown | LogicalDeviceLevelerButtonType3.MenuUp);
			CurrentState.Status.CurrentScreenShowing = LogicalDeviceLevelerScreenType3.IdleMotorized;
		}

		public override void Dispose(bool disposing)
		{
		}

		protected override void ProcessNewCommand(LogicalDeviceLevelerCommandType3 Command, LogicalDeviceLevelerType3SimState state)
		{
			switch (Command.ButtonsPressed)
			{
			case LogicalDeviceLevelerButtonType3.AutoLevel:
				state.CommandRunners[LogicalDeviceLevelerScreenType3.Auto].EnterState(state);
				break;
			case LogicalDeviceLevelerButtonType3.MenuUp:
				state.LinesRaw = (string[])(object)new String[1] { "Menu Up pressed." };
				break;
			case LogicalDeviceLevelerButtonType3.MenuDown:
				state.LinesRaw = (string[])(object)new String[1] { "Menu Down pressed." };
				break;
			case LogicalDeviceLevelerButtonType3.Enter:
				state.LinesRaw = (string[])(object)new String[1] { "Enter Pressed" };
				break;
			default:
				state.LinesRaw = (string[])(object)new String[1] { "Waiting on input." };
				break;
			}
		}
	}
	public class CommandRunnerSimIdleTowableScreen : LogicalDevicesLevelerType3CommandRunnerSim
	{
		protected override void ConfigureState(LogicalDeviceLevelerType3SimState CurrentState)
		{
			CurrentState.Status.ButtonsDisabled = LogicalDeviceLevelerButtonType3.Right | LogicalDeviceLevelerButtonType3.Left | LogicalDeviceLevelerButtonType3.Back | LogicalDeviceLevelerButtonType3.EnterSetup | LogicalDeviceLevelerButtonType3.Reserved1 | LogicalDeviceLevelerButtonType3.Reserved2 | LogicalDeviceLevelerButtonType3.Reserved3;
			CurrentState.Status.CurrentScreenShowing = LogicalDeviceLevelerScreenType3.IdleTowable;
		}

		public override void Dispose(bool disposing)
		{
		}

		protected override void ProcessNewCommand(LogicalDeviceLevelerCommandType3 Command, LogicalDeviceLevelerType3SimState state)
		{
			switch (Command.ButtonsPressed)
			{
			case LogicalDeviceLevelerButtonType3.AutoLevel:
			case LogicalDeviceLevelerButtonType3.AutoHitch:
				state.CommandRunners[LogicalDeviceLevelerScreenType3.Auto].EnterState(state);
				break;
			case LogicalDeviceLevelerButtonType3.Enter:
				state.LinesRaw = (string[])(object)new String[1] { "Enter pressed." };
				break;
			case LogicalDeviceLevelerButtonType3.MenuUp:
				state.LinesRaw = (string[])(object)new String[1] { "Menu Up pressed." };
				break;
			case LogicalDeviceLevelerButtonType3.MenuDown:
				state.LinesRaw = (string[])(object)new String[1] { "Menu Down pressed." };
				break;
			case LogicalDeviceLevelerButtonType3.Extend:
				DisableAllIndicatorsExcept(LogicalDeviceLevelerStatusIndicatorType3.Extend);
				state.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Extend, LogicalDeviceLevelerStatusIndicatorStateType3.On);
				break;
			case LogicalDeviceLevelerButtonType3.Retract:
				DisableAllIndicatorsExcept(LogicalDeviceLevelerStatusIndicatorType3.Retract);
				state.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Retract, LogicalDeviceLevelerStatusIndicatorStateType3.On);
				break;
			case LogicalDeviceLevelerButtonType3.Front:
				DisableAllIndicatorsExcept(LogicalDeviceLevelerStatusIndicatorType3.Front);
				state.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Front, LogicalDeviceLevelerStatusIndicatorStateType3.On);
				break;
			case LogicalDeviceLevelerButtonType3.Rear:
				DisableAllIndicatorsExcept(LogicalDeviceLevelerStatusIndicatorType3.Rear);
				state.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Rear, LogicalDeviceLevelerStatusIndicatorStateType3.On);
				break;
			default:
				state.LinesRaw = (string[])(object)new String[1] { "Waiting for input." };
				break;
			}
		}
	}
	public class CommandRunnerSimInfoScreen : LogicalDevicesLevelerType3CommandRunnerSim
	{
		private LogicalDeviceLevelerScreenType3 _lastScreen;

		protected override void ConfigureState(LogicalDeviceLevelerType3SimState CurrentState)
		{
			_lastScreen = CurrentState.Status.CurrentScreenShowing;
			CurrentState.Status.CurrentScreenShowing = LogicalDeviceLevelerScreenType3.Info;
			CurrentState.Status.ButtonsDisabled = ~LogicalDeviceLevelerButtonType3.Enter;
		}

		public override void Dispose(bool disposing)
		{
		}

		protected override void ProcessNewCommand(LogicalDeviceLevelerCommandType3 Command, LogicalDeviceLevelerType3SimState state)
		{
			if (Command.ButtonsPressed == LogicalDeviceLevelerButtonType3.Enter)
			{
				state.CommandRunners[_lastScreen].EnterState(state);
				return;
			}
			state.LinesRaw = (string[])(object)new String[1] { "Waiting for input." };
		}
	}
	public class CommandRunnerSimManualScreen : LogicalDevicesLevelerType3CommandRunnerSim
	{
		protected override void ConfigureState(LogicalDeviceLevelerType3SimState CurrentState)
		{
			CurrentState.Status.CurrentScreenShowing = LogicalDeviceLevelerScreenType3.Manual;
			CurrentState.Status.ButtonsDisabled = LogicalDeviceLevelerButtonType3.AutoLevel | LogicalDeviceLevelerButtonType3.AutoHitch | LogicalDeviceLevelerButtonType3.EnterSetup | LogicalDeviceLevelerButtonType3.Reserved1 | LogicalDeviceLevelerButtonType3.Reserved2 | LogicalDeviceLevelerButtonType3.Reserved3;
		}

		public override void Dispose(bool disposing)
		{
		}

		protected override void ProcessNewCommand(LogicalDeviceLevelerCommandType3 Command, LogicalDeviceLevelerType3SimState state)
		{
			switch (Command.ButtonsPressed)
			{
			case LogicalDeviceLevelerButtonType3.Enter:
				state.LinesRaw = (string[])(object)new String[1] { "Enter pressed." };
				break;
			case LogicalDeviceLevelerButtonType3.MenuDown:
				state.LinesRaw = (string[])(object)new String[1] { "Menu Down pressed." };
				break;
			case LogicalDeviceLevelerButtonType3.MenuUp:
				state.LinesRaw = (string[])(object)new String[1] { "Menu Up pressed." };
				break;
			case LogicalDeviceLevelerButtonType3.Extend:
				DisableAllIndicatorsExcept(LogicalDeviceLevelerStatusIndicatorType3.Extend);
				state.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Extend, LogicalDeviceLevelerStatusIndicatorStateType3.On);
				break;
			case LogicalDeviceLevelerButtonType3.Retract:
				DisableAllIndicatorsExcept(LogicalDeviceLevelerStatusIndicatorType3.Retract);
				state.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Retract, LogicalDeviceLevelerStatusIndicatorStateType3.On);
				break;
			case LogicalDeviceLevelerButtonType3.Left:
				DisableAllIndicatorsExcept(LogicalDeviceLevelerStatusIndicatorType3.Left);
				state.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Left, LogicalDeviceLevelerStatusIndicatorStateType3.On);
				break;
			case LogicalDeviceLevelerButtonType3.Right:
				DisableAllIndicatorsExcept(LogicalDeviceLevelerStatusIndicatorType3.Right);
				state.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Right, LogicalDeviceLevelerStatusIndicatorStateType3.On);
				break;
			case LogicalDeviceLevelerButtonType3.Rear:
				DisableAllIndicatorsExcept(LogicalDeviceLevelerStatusIndicatorType3.Rear);
				state.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Rear, LogicalDeviceLevelerStatusIndicatorStateType3.On);
				break;
			case LogicalDeviceLevelerButtonType3.Front:
				DisableAllIndicatorsExcept(LogicalDeviceLevelerStatusIndicatorType3.Front);
				state.Status.SetIndicatorStateType3(LogicalDeviceLevelerStatusIndicatorType3.Front, LogicalDeviceLevelerStatusIndicatorStateType3.On);
				break;
			default:
				state.LinesRaw = (string[])(object)new String[1] { "Waiting for input" };
				break;
			}
		}
	}
	public class CommandRunnerSimSelectScreen : LogicalDevicesLevelerType3CommandRunnerSim
	{
		protected override void ConfigureState(LogicalDeviceLevelerType3SimState CurrentState)
		{
			CurrentState.Status.ButtonsDisabled = ~(LogicalDeviceLevelerButtonType3.Enter | LogicalDeviceLevelerButtonType3.MenuDown | LogicalDeviceLevelerButtonType3.MenuUp);
			CurrentState.Status.CurrentScreenShowing = LogicalDeviceLevelerScreenType3.Select;
			CurrentState.LinesRaw = (string[])(object)new String[1] { "Select operation" };
		}

		public override void Dispose(bool disposing)
		{
		}

		protected override void ProcessNewCommand(LogicalDeviceLevelerCommandType3 Command, LogicalDeviceLevelerType3SimState state)
		{
			switch (Command.ButtonsPressed)
			{
			case LogicalDeviceLevelerButtonType3.MenuUp:
				state.LinesRaw = (string[])(object)new String[1] { "Menu Up was pressed!" };
				break;
			case LogicalDeviceLevelerButtonType3.MenuDown:
				state.LinesRaw = (string[])(object)new String[1] { "Menu Down was pressed!" };
				break;
			case LogicalDeviceLevelerButtonType3.Enter:
				state.LinesRaw = (string[])(object)new String[1] { "Enter was pressed!" };
				break;
			default:
				state.LinesRaw = (string[])(object)new String[1] { "Waiting for input" };
				break;
			}
		}
	}
	public class CommandRunnerSimYesNoScreen : LogicalDevicesLevelerType3CommandRunnerSim
	{
		private LogicalDeviceLevelerScreenType3 _lastScreen;

		protected override void ConfigureState(LogicalDeviceLevelerType3SimState CurrentState)
		{
			_lastScreen = CurrentState.Status.CurrentScreenShowing;
			CurrentState.Status.CurrentScreenShowing = LogicalDeviceLevelerScreenType3.YesNo;
			CurrentState.Status.ButtonsDisabled = ~(LogicalDeviceLevelerButtonType3.Enter | LogicalDeviceLevelerButtonType3.Back);
		}

		public override void Dispose(bool disposing)
		{
		}

		protected override void ProcessNewCommand(LogicalDeviceLevelerCommandType3 Command, LogicalDeviceLevelerType3SimState state)
		{
			IYesNoDecision yesNoDecision = state.CommandRunners[_lastScreen] as IYesNoDecision;
			if (Command.ButtonsPressed == LogicalDeviceLevelerButtonType3.Enter)
			{
				yesNoDecision.OnYes();
			}
			else
			{
				yesNoDecision.OnNo();
			}
		}
	}
	public interface IYesNoDecision
	{
		void OnYes();

		void OnNo();
	}
	public abstract class LogicalDevicesLevelerType3CommandRunnerSim : CommonDisposable, ILogicalDevicesLevelerType3CommandRunner
	{
		private LogicalDeviceLevelerStatusType3 _status;

		private LogicalDeviceLevelerButtonType3 _lastButtonPressed;

		protected LogicalDeviceLevelerButtonType3 LastButtonPressed => _lastButtonPressed;

		public void EnterState(LogicalDeviceLevelerType3SimState currentState)
		{
			_status = currentState.Status;
			DisableAllIndicators();
			ConfigureState(currentState);
		}

		public void ProcessCommand(LogicalDeviceLevelerCommandType3 Command, LogicalDeviceLevelerType3SimState state)
		{
			_lastButtonPressed = Command.ButtonsPressed;
			_status = state.Status;
			if (Command.ButtonsPressed == LogicalDeviceLevelerButtonType3.None)
			{
				DisableAllIndicators();
			}
			else
			{
				state.LinesRaw = (string[])(object)new String[1] { String.Concat(((Object)Command.ButtonsPressed/*cast due to .constrained prefix*/).ToString(), " pressed.") };
			}
			ProcessNewCommand(Command, state);
		}

		protected abstract void ConfigureState(LogicalDeviceLevelerType3SimState CurrentState);

		protected abstract void ProcessNewCommand(LogicalDeviceLevelerCommandType3 Command, LogicalDeviceLevelerType3SimState state);

		protected void DisableAllIndicatorsExcept(LogicalDeviceLevelerStatusIndicatorType3 indicator)
		{
			LogicalDeviceLevelerStatusIndicatorType3[] array = (LogicalDeviceLevelerStatusIndicatorType3[])(object)Enum.GetValues(typeof(LogicalDeviceLevelerStatusIndicatorType3));
			foreach (LogicalDeviceLevelerStatusIndicatorType3 logicalDeviceLevelerStatusIndicatorType in array)
			{
				if (indicator != logicalDeviceLevelerStatusIndicatorType)
				{
					_status.SetIndicatorStateType3(logicalDeviceLevelerStatusIndicatorType, LogicalDeviceLevelerStatusIndicatorStateType3.Off);
				}
			}
		}

		protected void DisableAllIndicators()
		{
			LogicalDeviceLevelerStatusIndicatorType3[] array = (LogicalDeviceLevelerStatusIndicatorType3[])(object)Enum.GetValues(typeof(LogicalDeviceLevelerStatusIndicatorType3));
			foreach (LogicalDeviceLevelerStatusIndicatorType3 indicator in array)
			{
				_status.SetIndicatorStateType3(indicator, LogicalDeviceLevelerStatusIndicatorStateType3.Off);
			}
		}
	}
}
namespace OneControl.Devices.Interfaces
{
	public interface IAutoOff
	{
		byte AutoOffDurationMinutes { get; }

		bool IsAutoOffDurationEnabled { get; }

		Task<CommandResult> SetAutoOffDurationAsync(byte newDuration);
	}
	public interface ILogicalDeviceAutoOff : ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IAutoOff
	{
	}
	public interface ILogicalDeviceAutoOffSwitchable : ILogicalDeviceAutoOff, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IAutoOff, ILogicalDeviceSwitchable, ISwitchableDevice, ILogicalDeviceSwitchableReadonly
	{
	}
	public interface ILogicalDeviceCommandable : ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
	}
	public interface ILogicalDeviceCommandable<in TParameter> : ILogicalDeviceCommandable, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ICommandable<TParameter>
	{
	}
	public interface ICommandable<in TParameter>
	{
		Task<CommandResult> PerformCommand(TParameter option);
	}
	public interface IHighResolutionTankSupport
	{
		Task<bool> TryAreHighResolutionTanksSupportedAsync(CancellationToken cancellationToken);
	}
}
namespace OneControl.Devices.Hvac
{
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceClimateZoneStatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceClimateZoneStatusSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceClimateZoneStatusSerializable);
			}
		}

		[JsonProperty]
		public float OutdoorTemperatureFahrenheit
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public float IndoorTemperatureFahrenheit
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool IsOutdoorTemperatureSensorValid
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool IsIndoorTemperatureSensorValid
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public ClimateZoneStatus ZoneStatus
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte HighTripTemperatureFahrenheit
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte LowTripTemperatureFahrenheit
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public ClimateZoneCommand ProgramedCommand
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool IsFailedThermistor
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool IsError
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceClimateZoneStatusSerializable(float outdoorTemperatureFahrenheit, float indoorTemperatureFahrenheit, bool isOutdoorTemperatureSensorValid, bool isIndoorTemperatureSensorValid, ClimateZoneStatus zoneStatus, byte highTripTemperatureFahrenheit, byte lowTripTemperatureFahrenheit, ClimateZoneCommand programedCommand, bool isFailedThermistor, bool isError)
		{
			OutdoorTemperatureFahrenheit = outdoorTemperatureFahrenheit;
			IndoorTemperatureFahrenheit = indoorTemperatureFahrenheit;
			IsOutdoorTemperatureSensorValid = isOutdoorTemperatureSensorValid;
			IsIndoorTemperatureSensorValid = isIndoorTemperatureSensorValid;
			ZoneStatus = zoneStatus;
			HighTripTemperatureFahrenheit = highTripTemperatureFahrenheit;
			LowTripTemperatureFahrenheit = lowTripTemperatureFahrenheit;
			ProgramedCommand = programedCommand;
			IsFailedThermistor = isFailedThermistor;
			IsError = isError;
		}

		public LogicalDeviceClimateZoneStatusSerializable(LogicalDeviceClimateZoneStatus climateZoneStatus)
			: this(climateZoneStatus.OutdoorTemperatureFahrenheit, climateZoneStatus.IndoorTemperatureFahrenheit, climateZoneStatus.IsOutdoorTemperatureSensorValid, climateZoneStatus.IsIndoorTemperatureSensorValid, climateZoneStatus.ZoneStatus, climateZoneStatus.HighTripTemperatureFahrenheit, climateZoneStatus.LowTripTemperatureFahrenheit, climateZoneStatus.ProgramedCommand, climateZoneStatus.IsFailedThermistor, climateZoneStatus.IsError)
		{
		}

		public override byte[] MakeRawData()
		{
			LogicalDeviceClimateZoneStatus logicalDeviceClimateZoneStatus = new LogicalDeviceClimateZoneStatus();
			logicalDeviceClimateZoneStatus.SetHighTripTemperatureFahrenheit(HighTripTemperatureFahrenheit);
			logicalDeviceClimateZoneStatus.SetLowTripTemperatureFahrenheit(LowTripTemperatureFahrenheit);
			logicalDeviceClimateZoneStatus.SetOutdoorTemperatureFahrenheit(OutdoorTemperatureFahrenheit);
			logicalDeviceClimateZoneStatus.SetIndoorTemperatureFahrenheit(IndoorTemperatureFahrenheit);
			logicalDeviceClimateZoneStatus.SetZoneStatus(ZoneStatus);
			logicalDeviceClimateZoneStatus.SetCommandStatus(ProgramedCommand);
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceClimateZoneStatus).CopyCurrentData();
		}

		public static LogicalDeviceClimateZoneStatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceClimateZoneStatus logicalDeviceClimateZoneStatus = new LogicalDeviceClimateZoneStatus();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceClimateZoneStatus).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceClimateZoneStatus).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceClimateZoneStatus).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceClimateZoneStatus).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceClimateZoneStatus).Update(rawData, rawData.Length, false);
			return new LogicalDeviceClimateZoneStatusSerializable(logicalDeviceClimateZoneStatus);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceClimateZoneStatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceClimateZoneStatusSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("OutdoorTemperatureFahrenheit = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref OutdoorTemperatureFahrenheit)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IndoorTemperatureFahrenheit = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref IndoorTemperatureFahrenheit)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IsOutdoorTemperatureSensorValid = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsOutdoorTemperatureSensorValid)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IsIndoorTemperatureSensorValid = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsIndoorTemperatureSensorValid)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ZoneStatus = ");
			builder.Append(((Object)ZoneStatus/*cast due to .constrained prefix*/).ToString());
			builder.Append(", HighTripTemperatureFahrenheit = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref HighTripTemperatureFahrenheit)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LowTripTemperatureFahrenheit = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref LowTripTemperatureFahrenheit)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ProgramedCommand = ");
			builder.Append(((Object)ProgramedCommand/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IsFailedThermistor = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsFailedThermistor)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IsError = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsError)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return (((((((((base.GetHashCode() * -1521134295 + EqualityComparer<float>.Default.GetHashCode(OutdoorTemperatureFahrenheit)) * -1521134295 + EqualityComparer<float>.Default.GetHashCode(IndoorTemperatureFahrenheit)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsOutdoorTemperatureSensorValid)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsIndoorTemperatureSensorValid)) * -1521134295 + EqualityComparer<ClimateZoneStatus>.Default.GetHashCode(ZoneStatus)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(HighTripTemperatureFahrenheit)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(LowTripTemperatureFahrenheit)) * -1521134295 + EqualityComparer<ClimateZoneCommand>.Default.GetHashCode(ProgramedCommand)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsFailedThermistor)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsError);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceClimateZoneStatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceClimateZoneStatusSerializable(LogicalDeviceClimateZoneStatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceClimateZoneStatusSerializable>)original)
		{
			OutdoorTemperatureFahrenheit = original.OutdoorTemperatureFahrenheit;
			IndoorTemperatureFahrenheit = original.IndoorTemperatureFahrenheit;
			IsOutdoorTemperatureSensorValid = original.IsOutdoorTemperatureSensorValid;
			IsIndoorTemperatureSensorValid = original.IsIndoorTemperatureSensorValid;
			ZoneStatus = original.ZoneStatus;
			HighTripTemperatureFahrenheit = original.HighTripTemperatureFahrenheit;
			LowTripTemperatureFahrenheit = original.LowTripTemperatureFahrenheit;
			ProgramedCommand = original.ProgramedCommand;
			IsFailedThermistor = original.IsFailedThermistor;
			IsError = original.IsError;
		}
	}
}
namespace OneControl.Devices.GenericSensor
{
	public class LogicalDeviceGenericSensorFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceGenericSensor(logicalDeviceId, service);
		}
	}
	public class LogicalDeviceGenericSensorStatus : LogicalDeviceStatusPacketMutable
	{
		public LogicalDeviceGenericSensorStatus()
		{
		}

		public LogicalDeviceGenericSensorStatus(LogicalDeviceGenericSensorStatus originalSensorStatus)
			: this()
		{
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalSensorStatus).Data;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(data, data.Length, false);
		}
	}
}
namespace OneControl.Devices.Remote
{
	public class RemoteGeneratorOnePressSwitch : RemoteSwitch<ILogicalDeviceGeneratorGenieRemote>
	{
		protected override void RemoteUpdateSwitchState(bool value)
		{
		}

		public RemoteGeneratorOnePressSwitch(ILogicalDeviceGeneratorGenieRemote logicalDevice, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "command", commandControl, channelCollection)
		{
		}
	}
	public class RemoteGeneratorQuietHoursActive : RemoteBase<ILogicalDeviceGeneratorGenieRemote, IRemoteChannelDefGeneratorQuietHoursActive>
	{
		public RemoteGeneratorQuietHoursActive(ILogicalDeviceGeneratorGenieRemote logicalDevice, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "quiet-hours", channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<bool>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannel;
			}
		}

		public void UpdateChannel(IRemoteChannelDef remoteChannelDef, bool active)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceGeneratorGenieRemote logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				LogicalDeviceGeneratorGenieStatus logicalDeviceGeneratorGenieStatus = new LogicalDeviceGeneratorGenieStatus(((ILogicalDeviceWithStatus<LogicalDeviceGeneratorGenieStatus>)LogicalDevice).DeviceStatus);
				logicalDeviceGeneratorGenieStatus.SetQuietHoursActive(active);
				((ILogicalDeviceWithStatusUpdate<LogicalDeviceGeneratorGenieStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceGeneratorGenieStatus);
			}
		}
	}
	public class RemoteGeneratorState : RemoteBase<ILogicalDeviceGeneratorGenieRemote, IRemoteChannelDefGeneratorState>
	{
		public RemoteGeneratorState(ILogicalDeviceGeneratorGenieRemote logicalDevice, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "state", channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<GeneratorState>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannel;
			}
		}

		public void UpdateChannel(IRemoteChannelDef remoteChannelDef, GeneratorState generatorState)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceGeneratorGenieRemote logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				LogicalDeviceGeneratorGenieStatus logicalDeviceGeneratorGenieStatus = new LogicalDeviceGeneratorGenieStatus(((ILogicalDeviceWithStatus<LogicalDeviceGeneratorGenieStatus>)LogicalDevice).DeviceStatus);
				logicalDeviceGeneratorGenieStatus.SetState(generatorState);
				((ILogicalDeviceWithStatusUpdate<LogicalDeviceGeneratorGenieStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceGeneratorGenieStatus);
			}
		}
	}
	public class RemoteGeneratorTemperatureFahrenheit : RemoteBase<ILogicalDeviceGeneratorGenieRemote, IRemoteChannelDefTemperatureFahrenheit>
	{
		public RemoteGeneratorTemperatureFahrenheit(ILogicalDeviceGeneratorGenieRemote logicalDevice, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "temperature", channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<float>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannel;
			}
		}

		public void UpdateChannel(IRemoteChannelDef remoteChannelDef, float value)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceGeneratorGenieRemote logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				LogicalDeviceGeneratorGenieStatus logicalDeviceGeneratorGenieStatus = new LogicalDeviceGeneratorGenieStatus(((ILogicalDeviceWithStatus<LogicalDeviceGeneratorGenieStatus>)LogicalDevice).DeviceStatus);
				logicalDeviceGeneratorGenieStatus.SetTemperature(value);
				((ILogicalDeviceWithStatusUpdate<LogicalDeviceGeneratorGenieStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceGeneratorGenieStatus);
			}
		}
	}
	public class RemoteGeneratorVoltage : RemoteBase<ILogicalDeviceGeneratorGenieRemote, IRemoteChannelDefVoltage>
	{
		public RemoteGeneratorVoltage(ILogicalDeviceGeneratorGenieRemote logicalDevice, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "battery-voltage", channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<float>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannel;
			}
		}

		public void UpdateChannel(IRemoteChannelDef remoteChannelDef, float value)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceGeneratorGenieRemote logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				LogicalDeviceGeneratorGenieStatus logicalDeviceGeneratorGenieStatus = new LogicalDeviceGeneratorGenieStatus(((ILogicalDeviceWithStatus<LogicalDeviceGeneratorGenieStatus>)LogicalDevice).DeviceStatus);
				logicalDeviceGeneratorGenieStatus.SetBatteryVoltage(value);
				((ILogicalDeviceWithStatusUpdate<LogicalDeviceGeneratorGenieStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceGeneratorGenieStatus);
			}
		}
	}
	public class RemoteHvacFanMode : RemoteBaseControl<ILogicalDeviceClimateZoneRemote, IRemoteChannelDefHvacFanMode>
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendFanModeCommand>d__1 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public RemoteHvacFanMode <>4__this;

			public CancellationToken cancellationToken;

			public ClimateZoneFanMode fanMode;

			private CancellationTokenSource <cts>5__2;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_00c7: Expected O, but got Unknown
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0087: Unknown result type (might be due to invalid IL or missing references)
				//IL_008c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0094: Unknown result type (might be due to invalid IL or missing references)
				//IL_004b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fa: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00aa: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				RemoteHvacFanMode remoteHvacFanMode = <>4__this;
				CommandResult result;
				try
				{
					if (num == 0)
					{
						goto IL_003b;
					}
					IRemoteChannelDefHvacFanMode channel = remoteHvacFanMode.Channel;
					if (channel != null)
					{
						<cts>5__2 = CancellationTokenSource.CreateLinkedTokenSource(cancellationToken, remoteHvacFanMode.CancelCurrentRemoteCommandAndGetNewCancellationToken());
						goto IL_003b;
					}
					result = (CommandResult)9;
					goto end_IL_000e;
					IL_003b:
					try
					{
						TaskAwaiter<CommandResult> val;
						if (num != 0)
						{
							val = ((IRemoteChannelDefCommand<ClimateZoneFanMode>)channel).SendCommandToRemoteAsync(fanMode, <cts>5__2.Token).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendFanModeCommand>d__1>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					finally
					{
						if (num < 0 && <cts>5__2 != null)
						{
							((IDisposable)<cts>5__2).Dispose();
						}
					}
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<cts>5__2 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<cts>5__2 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		public RemoteHvacFanMode(ILogicalDeviceClimateZoneRemote logicalDevice, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "fan-mode", commandControl, channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<ClimateZoneFanMode>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannelFanMode;
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendFanModeCommand(ClimateZoneFanMode fanMode, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<SendFanModeCommand>d__1 <SendFanModeCommand>d__ = default(<SendFanModeCommand>d__1);
			<SendFanModeCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendFanModeCommand>d__.<>4__this = this;
			<SendFanModeCommand>d__.fanMode = fanMode;
			<SendFanModeCommand>d__.cancellationToken = cancellationToken;
			<SendFanModeCommand>d__.<>1__state = -1;
			<SendFanModeCommand>d__.<>t__builder.Start<<SendFanModeCommand>d__1>(ref <SendFanModeCommand>d__);
			return <SendFanModeCommand>d__.<>t__builder.Task;
		}

		public void UpdateChannelFanMode(IRemoteChannelDef remoteChannelDef, ClimateZoneFanMode fanMode)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceClimateZoneRemote logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				LogicalDeviceClimateZoneStatus logicalDeviceClimateZoneStatus = new LogicalDeviceClimateZoneStatus(((ILogicalDeviceWithStatus<LogicalDeviceClimateZoneStatus>)LogicalDevice).DeviceStatus);
				ClimateZoneCommand commandStatus = new ClimateZoneCommand(logicalDeviceClimateZoneStatus.ProgramedCommand.HeatMode, logicalDeviceClimateZoneStatus.ProgramedCommand.HeatSource, fanMode);
				logicalDeviceClimateZoneStatus.SetCommandStatus(commandStatus);
				((ILogicalDeviceWithStatusUpdate<LogicalDeviceClimateZoneStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceClimateZoneStatus);
			}
		}
	}
	public class RemoteHvacHeatMode : RemoteBaseControl<ILogicalDeviceClimateZoneRemote, IRemoteChannelDefHvacHeatMode>
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendHeatModeCommand>d__1 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public RemoteHvacHeatMode <>4__this;

			public CancellationToken cancellationToken;

			public ClimateZoneHeatMode mode;

			private CancellationTokenSource <cts>5__2;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_00c7: Expected O, but got Unknown
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0087: Unknown result type (might be due to invalid IL or missing references)
				//IL_008c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0094: Unknown result type (might be due to invalid IL or missing references)
				//IL_004b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fa: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00aa: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				RemoteHvacHeatMode remoteHvacHeatMode = <>4__this;
				CommandResult result;
				try
				{
					if (num == 0)
					{
						goto IL_003b;
					}
					IRemoteChannelDefHvacHeatMode channel = remoteHvacHeatMode.Channel;
					if (channel != null)
					{
						<cts>5__2 = CancellationTokenSource.CreateLinkedTokenSource(cancellationToken, remoteHvacHeatMode.CancelCurrentRemoteCommandAndGetNewCancellationToken());
						goto IL_003b;
					}
					result = (CommandResult)9;
					goto end_IL_000e;
					IL_003b:
					try
					{
						TaskAwaiter<CommandResult> val;
						if (num != 0)
						{
							val = ((IRemoteChannelDefCommand<ClimateZoneHeatMode>)channel).SendCommandToRemoteAsync(mode, <cts>5__2.Token).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendHeatModeCommand>d__1>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					finally
					{
						if (num < 0 && <cts>5__2 != null)
						{
							((IDisposable)<cts>5__2).Dispose();
						}
					}
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<cts>5__2 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<cts>5__2 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		public bool IsCommandOneShotSupported => base.Channel?.IsCommandOneShotSupported ?? false;

		public RemoteHvacHeatMode(ILogicalDeviceClimateZoneRemote logicalDevice, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "hvac-mode", commandControl, channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<ClimateZoneHeatMode>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannelHeatMode;
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendHeatModeCommand(ClimateZoneHeatMode mode, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<SendHeatModeCommand>d__1 <SendHeatModeCommand>d__ = default(<SendHeatModeCommand>d__1);
			<SendHeatModeCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendHeatModeCommand>d__.<>4__this = this;
			<SendHeatModeCommand>d__.mode = mode;
			<SendHeatModeCommand>d__.cancellationToken = cancellationToken;
			<SendHeatModeCommand>d__.<>1__state = -1;
			<SendHeatModeCommand>d__.<>t__builder.Start<<SendHeatModeCommand>d__1>(ref <SendHeatModeCommand>d__);
			return <SendHeatModeCommand>d__.<>t__builder.Task;
		}

		public void UpdateChannelHeatMode(IRemoteChannelDef remoteChannelDef, ClimateZoneHeatMode mode)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceClimateZoneRemote logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				LogicalDeviceClimateZoneStatus logicalDeviceClimateZoneStatus = new LogicalDeviceClimateZoneStatus(((ILogicalDeviceWithStatus<LogicalDeviceClimateZoneStatus>)LogicalDevice).DeviceStatus);
				ClimateZoneCommand commandStatus = new ClimateZoneCommand(mode, logicalDeviceClimateZoneStatus.ProgramedCommand.HeatSource, logicalDeviceClimateZoneStatus.ProgramedCommand.FanMode);
				logicalDeviceClimateZoneStatus.SetCommandStatus(commandStatus);
				((ILogicalDeviceWithStatusUpdate<LogicalDeviceClimateZoneStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceClimateZoneStatus);
			}
		}

		public Task<CommandResult> SendRemoteCommandAsync(LogicalDeviceClimateZoneCommand command, CancellationToken cancelToken)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			return base.Channel?.SendRemoteCommandAsync(command, cancelToken);
		}
	}
	public class RemoteHvacHeatSource : RemoteBaseControl<ILogicalDeviceClimateZoneRemote, IRemoteChannelDefHvacHeatSource>
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendHeatSourceCommand>d__1 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public RemoteHvacHeatSource <>4__this;

			public CancellationToken cancellationToken;

			public ClimateZoneHeatSource heatSource;

			private CancellationTokenSource <cts>5__2;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_00c7: Expected O, but got Unknown
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0087: Unknown result type (might be due to invalid IL or missing references)
				//IL_008c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0094: Unknown result type (might be due to invalid IL or missing references)
				//IL_004b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fa: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00aa: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				RemoteHvacHeatSource remoteHvacHeatSource = <>4__this;
				CommandResult result;
				try
				{
					if (num == 0)
					{
						goto IL_003b;
					}
					IRemoteChannelDefHvacHeatSource channel = remoteHvacHeatSource.Channel;
					if (channel != null)
					{
						<cts>5__2 = CancellationTokenSource.CreateLinkedTokenSource(cancellationToken, remoteHvacHeatSource.CancelCurrentRemoteCommandAndGetNewCancellationToken());
						goto IL_003b;
					}
					result = (CommandResult)9;
					goto end_IL_000e;
					IL_003b:
					try
					{
						TaskAwaiter<CommandResult> val;
						if (num != 0)
						{
							val = ((IRemoteChannelDefCommand<ClimateZoneHeatSource>)channel).SendCommandToRemoteAsync(heatSource, <cts>5__2.Token).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendHeatSourceCommand>d__1>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					finally
					{
						if (num < 0 && <cts>5__2 != null)
						{
							((IDisposable)<cts>5__2).Dispose();
						}
					}
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<cts>5__2 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<cts>5__2 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		public RemoteHvacHeatSource(ILogicalDeviceClimateZoneRemote logicalDevice, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "heat-source", commandControl, channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<ClimateZoneHeatSource>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannelHeatSourceMode;
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendHeatSourceCommand(ClimateZoneHeatSource heatSource, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<SendHeatSourceCommand>d__1 <SendHeatSourceCommand>d__ = default(<SendHeatSourceCommand>d__1);
			<SendHeatSourceCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendHeatSourceCommand>d__.<>4__this = this;
			<SendHeatSourceCommand>d__.heatSource = heatSource;
			<SendHeatSourceCommand>d__.cancellationToken = cancellationToken;
			<SendHeatSourceCommand>d__.<>1__state = -1;
			<SendHeatSourceCommand>d__.<>t__builder.Start<<SendHeatSourceCommand>d__1>(ref <SendHeatSourceCommand>d__);
			return <SendHeatSourceCommand>d__.<>t__builder.Task;
		}

		public void UpdateChannelHeatSourceMode(IRemoteChannelDef remoteChannelDef, ClimateZoneHeatSource heatSource)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceClimateZoneRemote logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				LogicalDeviceClimateZoneStatus logicalDeviceClimateZoneStatus = new LogicalDeviceClimateZoneStatus(((ILogicalDeviceWithStatus<LogicalDeviceClimateZoneStatus>)LogicalDevice).DeviceStatus);
				ClimateZoneCommand commandStatus = new ClimateZoneCommand(logicalDeviceClimateZoneStatus.ProgramedCommand.HeatMode, heatSource, logicalDeviceClimateZoneStatus.ProgramedCommand.FanMode);
				logicalDeviceClimateZoneStatus.SetCommandStatus(commandStatus);
				((ILogicalDeviceWithStatusUpdate<LogicalDeviceClimateZoneStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceClimateZoneStatus);
			}
		}
	}
	public enum RemoteHvacTemperatureControlSelector : Enum
	{
		HighTripTemperatureFahrenheit,
		LowTripTemperatureFahrenheit,
		Unknown
	}
	public static class RemoteHvacTemperatureControlSelectorExtension : Object
	{
		public static string ChannelId(this RemoteHvacTemperatureControlSelector tempControlSelector)
		{
			switch (tempControlSelector)
			{
			case RemoteHvacTemperatureControlSelector.HighTripTemperatureFahrenheit:
				return "high-temperature";
			case RemoteHvacTemperatureControlSelector.LowTripTemperatureFahrenheit:
				return "low-temperature";
			default:
				Log.Debug("Error: RemoteHvacTemperatureControlSelectorExtension has unknown type");
				return "unknown";
			}
		}
	}
	public class RemoteHvacTemperatureControlFahrenheit : RemoteBaseControl<ILogicalDeviceClimateZoneRemote, IRemoteChannelDefTemperatureControlFahrenheit>
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendSetTemperatureCommand>d__2 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public RemoteHvacTemperatureControlFahrenheit <>4__this;

			public CancellationToken cancellationToken;

			public int value;

			private IRemoteChannelDefTemperatureControlFahrenheit <channel>5__2;

			private CancellationTokenSource <cts>5__3;

			private TaskAwaiter<bool> <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_014d: Expected O, but got Unknown
				//IL_0030: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_0099: Unknown result type (might be due to invalid IL or missing references)
				//IL_009e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_018e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_010d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0112: Unknown result type (might be due to invalid IL or missing references)
				//IL_011a: Unknown result type (might be due to invalid IL or missing references)
				//IL_005c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0066: Unknown result type (might be due to invalid IL or missing references)
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				//IL_012b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0130: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f4: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				RemoteHvacTemperatureControlFahrenheit remoteHvacTemperatureControlFahrenheit = <>4__this;
				CommandResult result;
				try
				{
					if ((uint)num <= 1u)
					{
						goto IL_0046;
					}
					<channel>5__2 = remoteHvacTemperatureControlFahrenheit.Channel;
					if (<channel>5__2 != null)
					{
						<cts>5__3 = CancellationTokenSource.CreateLinkedTokenSource(cancellationToken, remoteHvacTemperatureControlFahrenheit.CancelCurrentRemoteCommandAndGetNewCancellationToken());
						goto IL_0046;
					}
					result = (CommandResult)9;
					goto end_IL_000e;
					IL_0046:
					try
					{
						TaskAwaiter<CommandResult> val;
						TaskAwaiter<bool> val2;
						if (num != 0)
						{
							if (num == 1)
							{
								val = <>u__2;
								<>u__2 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								goto IL_0129;
							}
							val2 = TaskExtension.TryDelay((int)remoteHvacTemperatureControlFahrenheit.RemoteCommandSendDelayTime, <cts>5__3.Token).GetAwaiter();
							if (!val2.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SendSetTemperatureCommand>d__2>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
						}
						val2.GetResult();
						val = ((IRemoteChannelDefCommand<int>)<channel>5__2).SendCommandToRemoteAsync(value, <cts>5__3.Token).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendSetTemperatureCommand>d__2>(ref val, ref this);
							return;
						}
						goto IL_0129;
						IL_0129:
						result = val.GetResult();
					}
					finally
					{
						if (num < 0 && <cts>5__3 != null)
						{
							((IDisposable)<cts>5__3).Dispose();
						}
					}
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<channel>5__2 = null;
					<cts>5__3 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<channel>5__2 = null;
				<cts>5__3 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		protected readonly RemoteHvacTemperatureControlSelector TemperatureControlSelector;

		public RemoteHvacTemperatureControlFahrenheit(ILogicalDeviceClimateZoneRemote logicalDevice, RemoteHvacTemperatureControlSelector temperatureControlSelector, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, temperatureControlSelector.ChannelId(), commandControl, channelCollection)
		{
			TemperatureControlSelector = temperatureControlSelector;
			if (base.Channel != null && temperatureControlSelector != RemoteHvacTemperatureControlSelector.Unknown)
			{
				((IRemoteChannelDefStatus<int>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += OnRemoteChannelReceivedUpdateStatusEvent;
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendSetTemperatureCommand(int value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<SendSetTemperatureCommand>d__2 <SendSetTemperatureCommand>d__ = default(<SendSetTemperatureCommand>d__2);
			<SendSetTemperatureCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendSetTemperatureCommand>d__.<>4__this = this;
			<SendSetTemperatureCommand>d__.value = value;
			<SendSetTemperatureCommand>d__.cancellationToken = cancellationToken;
			<SendSetTemperatureCommand>d__.<>1__state = -1;
			<SendSetTemperatureCommand>d__.<>t__builder.Start<<SendSetTemperatureCommand>d__2>(ref <SendSetTemperatureCommand>d__);
			return <SendSetTemperatureCommand>d__.<>t__builder.Task;
		}

		private void OnRemoteChannelReceivedUpdateStatusEvent(IRemoteChannelDef channel, int value)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceClimateZoneRemote logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				LogicalDeviceClimateZoneStatus logicalDeviceClimateZoneStatus = new LogicalDeviceClimateZoneStatus(((ILogicalDeviceWithStatus<LogicalDeviceClimateZoneStatus>)LogicalDevice).DeviceStatus);
				switch (TemperatureControlSelector)
				{
				case RemoteHvacTemperatureControlSelector.HighTripTemperatureFahrenheit:
					logicalDeviceClimateZoneStatus.SetHighTripTemperatureFahrenheit((byte)value);
					break;
				case RemoteHvacTemperatureControlSelector.LowTripTemperatureFahrenheit:
					logicalDeviceClimateZoneStatus.SetLowTripTemperatureFahrenheit((byte)value);
					break;
				}
				((ILogicalDeviceWithStatusUpdate<LogicalDeviceClimateZoneStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceClimateZoneStatus);
			}
		}
	}
	public enum RemoteHvacTemperatureFahrenheitSelector : Enum
	{
		InsideTemperatureFahrenheit,
		OutsideTemperatureFahrenheit,
		Unknown
	}
	public static class RemoteHvacTemperatureFahrenheitSelectorExtension : Object
	{
		public static string ChannelId(this RemoteHvacTemperatureFahrenheitSelector tempSelector)
		{
			switch (tempSelector)
			{
			case RemoteHvacTemperatureFahrenheitSelector.InsideTemperatureFahrenheit:
				return "inside-temperature";
			case RemoteHvacTemperatureFahrenheitSelector.OutsideTemperatureFahrenheit:
				return "outside-temperature";
			default:
				Log.Debug("Error: RemoteHvacTemperatureFahrenheitSelectorExtension has unknown type");
				return "unknown";
			}
		}
	}
	public class RemoteHvacTemperatureFahrenheit : RemoteBase<ILogicalDeviceClimateZoneRemote, IRemoteChannelDefTemperatureFahrenheit>
	{
		protected readonly RemoteHvacTemperatureFahrenheitSelector TemperatureSelector;

		public RemoteHvacTemperatureFahrenheit(ILogicalDeviceClimateZoneRemote logicalDevice, RemoteHvacTemperatureFahrenheitSelector temperatureSelector, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, temperatureSelector.ChannelId(), channelCollection)
		{
			TemperatureSelector = temperatureSelector;
			if (base.Channel != null && temperatureSelector != RemoteHvacTemperatureFahrenheitSelector.Unknown)
			{
				((IRemoteChannelDefStatus<float>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += OnRemoteChannelReceivedUpdateStatusEvent;
			}
		}

		private void OnRemoteChannelReceivedUpdateStatusEvent(IRemoteChannelDef channel, float value)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceClimateZoneRemote logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				LogicalDeviceClimateZoneStatus logicalDeviceClimateZoneStatus = new LogicalDeviceClimateZoneStatus(((ILogicalDeviceWithStatus<LogicalDeviceClimateZoneStatus>)LogicalDevice).DeviceStatus);
				switch (TemperatureSelector)
				{
				case RemoteHvacTemperatureFahrenheitSelector.InsideTemperatureFahrenheit:
					logicalDeviceClimateZoneStatus.SetIndoorTemperatureFahrenheit(value);
					break;
				case RemoteHvacTemperatureFahrenheitSelector.OutsideTemperatureFahrenheit:
					logicalDeviceClimateZoneStatus.SetOutdoorTemperatureFahrenheit(value);
					break;
				}
				((ILogicalDeviceWithStatusUpdate<LogicalDeviceClimateZoneStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceClimateZoneStatus);
			}
		}
	}
	public class RemoteHvacZoneStatus : RemoteBase<ILogicalDeviceClimateZoneRemote, IRemoteChannelDefHvacZoneStatus>
	{
		public RemoteHvacZoneStatus(ILogicalDeviceClimateZoneRemote logicalDevice, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "status", channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<ClimateZoneStatus>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannelZoneStatus;
			}
		}

		public void UpdateChannelZoneStatus(IRemoteChannelDef remoteChannelDef, ClimateZoneStatus zoneStatus)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceClimateZoneRemote logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				LogicalDeviceClimateZoneStatus logicalDeviceClimateZoneStatus = new LogicalDeviceClimateZoneStatus(((ILogicalDeviceWithStatus<LogicalDeviceClimateZoneStatus>)LogicalDevice).DeviceStatus);
				logicalDeviceClimateZoneStatus.SetZoneStatus(zoneStatus);
				((ILogicalDeviceWithStatusUpdate<LogicalDeviceClimateZoneStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceClimateZoneStatus);
			}
		}
	}
	public class RemoteDimmer : RemoteBaseControl<ILogicalDeviceRemoteLightDimmable, IRemoteChannelDefDimmer>
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandDimmableMaxBrightnessPercent>d__2 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public RemoteDimmer <>4__this;

			public float maxBrightnessPercent;

			private IRemoteChannelDefDimmer <dimmableChannel>5__2;

			private CancellationToken <cancelToken>5__3;

			private TaskAwaiter<bool> <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_012c: Expected O, but got Unknown
				//IL_0084: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				//IL_0090: Unknown result type (might be due to invalid IL or missing references)
				//IL_0104: Unknown result type (might be due to invalid IL or missing references)
				//IL_0109: Unknown result type (might be due to invalid IL or missing references)
				//IL_0111: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b5: Unknown result type (might be due to invalid IL or missing references)
				//IL_0122: Unknown result type (might be due to invalid IL or missing references)
				//IL_0127: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0047: Unknown result type (might be due to invalid IL or missing references)
				//IL_0051: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_002e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_015f: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				RemoteDimmer remoteDimmer = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<bool> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_009f;
					}
					TaskAwaiter<CommandResult> val2;
					if (num == 1)
					{
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_0120;
					}
					<dimmableChannel>5__2 = remoteDimmer.Channel;
					if (<dimmableChannel>5__2 != null)
					{
						<cancelToken>5__3 = remoteDimmer.CancelCurrentRemoteCommandAndGetNewCancellationToken();
						val = TaskExtension.TryDelay((int)remoteDimmer.RemoteCommandSendDelayTime, <cancelToken>5__3).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SendCommandDimmableMaxBrightnessPercent>d__2>(ref val, ref this);
							return;
						}
						goto IL_009f;
					}
					result = (CommandResult)9;
					goto end_IL_000e;
					IL_0120:
					result = val2.GetResult();
					goto end_IL_000e;
					IL_009f:
					val.GetResult();
					if (!((CancellationToken)(ref <cancelToken>5__3)).IsCancellationRequested)
					{
						val2 = <dimmableChannel>5__2.SendRemoteCommandDimmableMaxBrightnessPercentAsync(maxBrightnessPercent, remoteDimmer.CancelCurrentRemoteCommandAndGetNewCancellationToken()).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandDimmableMaxBrightnessPercent>d__2>(ref val2, ref this);
							return;
						}
						goto IL_0120;
					}
					result = (CommandResult)1;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<dimmableChannel>5__2 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<dimmableChannel>5__2 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		public bool IsCommandOneShotSupported => base.Channel?.IsCommandOneShotSupported ?? false;

		public RemoteDimmer(ILogicalDeviceRemoteLightDimmable logicalDevice, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "dimmer", commandControl, channelCollection)
		{
			if (base.Channel != null)
			{
				base.Channel.RemoteChannelReceivedDimmableStateEvent += UpdateChannelDimmable;
			}
		}

		public Task<CommandResult> SendCommandDimmableOn()
		{
			//IL_0014: Unknown result type (might be due to invalid IL or missing references)
			IRemoteChannelDefDimmer channel = base.Channel;
			if (channel == null)
			{
				return Task.FromResult<CommandResult>((CommandResult)9);
			}
			return channel.SendRemoteCommandDimmableOnAsync(CancelCurrentRemoteCommandAndGetNewCancellationToken());
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommandDimmableMaxBrightnessPercent(float maxBrightnessPercent)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandDimmableMaxBrightnessPercent>d__2 <SendCommandDimmableMaxBrightnessPercent>d__ = default(<SendCommandDimmableMaxBrightnessPercent>d__2);
			<SendCommandDimmableMaxBrightnessPercent>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandDimmableMaxBrightnessPercent>d__.<>4__this = this;
			<SendCommandDimmableMaxBrightnessPercent>d__.maxBrightnessPercent = maxBrightnessPercent;
			<SendCommandDimmableMaxBrightnessPercent>d__.<>1__state = -1;
			<SendCommandDimmableMaxBrightnessPercent>d__.<>t__builder.Start<<SendCommandDimmableMaxBrightnessPercent>d__2>(ref <SendCommandDimmableMaxBrightnessPercent>d__);
			return <SendCommandDimmableMaxBrightnessPercent>d__.<>t__builder.Task;
		}

		public void UpdateChannelDimmable(IRemoteChannelDef remoteChannelDef, bool lightOn, float maxBrightnessPercent)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceRemoteLightDimmable logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				LogicalDeviceLightDimmableStatus logicalDeviceLightDimmableStatus = new LogicalDeviceLightDimmableStatus(((ILogicalDeviceWithStatus<LogicalDeviceLightDimmableStatus>)LogicalDevice).DeviceStatus);
				int num = MathCommon.Clamp((int)(MathCommon.Clamp(maxBrightnessPercent, 0f, 1f) * 255f), 0, 255);
				logicalDeviceLightDimmableStatus.SetMaxBrightness((byte)num);
				((ILogicalDeviceWithStatusUpdate<LogicalDeviceLightDimmableStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceLightDimmableStatus);
			}
		}

		public Task<CommandResult> SendRemoteCommandAsync(LogicalDeviceLightDimmableCommand command, CancellationToken cancelToken)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			return base.Channel?.SendRemoteCommandAsync(command, cancelToken);
		}
	}
	public abstract class RemoteDimmerCycleTime : RemoteBaseControl<ILogicalDeviceRemoteLightDimmable, IRemoteChannelDefTimeMs>
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandCycleTime>d__2 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public RemoteDimmerCycleTime <>4__this;

			public int value;

			private IRemoteChannelDefTimeMs <channel>5__2;

			private CancellationToken <cancelToken>5__3;

			private TaskAwaiter<bool> <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_012c: Expected O, but got Unknown
				//IL_0084: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				//IL_0090: Unknown result type (might be due to invalid IL or missing references)
				//IL_0104: Unknown result type (might be due to invalid IL or missing references)
				//IL_0109: Unknown result type (might be due to invalid IL or missing references)
				//IL_0111: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b5: Unknown result type (might be due to invalid IL or missing references)
				//IL_0122: Unknown result type (might be due to invalid IL or missing references)
				//IL_0127: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0047: Unknown result type (might be due to invalid IL or missing references)
				//IL_0051: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_002e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_015f: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				RemoteDimmerCycleTime remoteDimmerCycleTime = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<bool> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_009f;
					}
					TaskAwaiter<CommandResult> val2;
					if (num == 1)
					{
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_0120;
					}
					<channel>5__2 = remoteDimmerCycleTime.Channel;
					if (<channel>5__2 != null)
					{
						<cancelToken>5__3 = remoteDimmerCycleTime.CancelCurrentRemoteCommandAndGetNewCancellationToken();
						val = TaskExtension.TryDelay((int)remoteDimmerCycleTime.RemoteCommandSendDelayTime, <cancelToken>5__3).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SendCommandCycleTime>d__2>(ref val, ref this);
							return;
						}
						goto IL_009f;
					}
					result = (CommandResult)9;
					goto end_IL_000e;
					IL_0120:
					result = val2.GetResult();
					goto end_IL_000e;
					IL_009f:
					val.GetResult();
					if (!((CancellationToken)(ref <cancelToken>5__3)).IsCancellationRequested)
					{
						val2 = ((IRemoteChannelDefCommand<uint>)<channel>5__2).SendCommandToRemoteAsync((uint)value, remoteDimmerCycleTime.CancelCurrentRemoteCommandAndGetNewCancellationToken()).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandCycleTime>d__2>(ref val2, ref this);
							return;
						}
						goto IL_0120;
					}
					result = (CommandResult)1;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<channel>5__2 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<channel>5__2 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		protected abstract void RemoteUpdateCycleTime(int newCycleTime);

		protected RemoteDimmerCycleTime(ILogicalDeviceRemoteLightDimmable logicalDevice, string channelId, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, channelId, commandControl, channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<uint>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += OnRemoteChannelReceivedChannelCycleTime;
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommandCycleTime(int value)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandCycleTime>d__2 <SendCommandCycleTime>d__ = default(<SendCommandCycleTime>d__2);
			<SendCommandCycleTime>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandCycleTime>d__.<>4__this = this;
			<SendCommandCycleTime>d__.value = value;
			<SendCommandCycleTime>d__.<>1__state = -1;
			<SendCommandCycleTime>d__.<>t__builder.Start<<SendCommandCycleTime>d__2>(ref <SendCommandCycleTime>d__);
			return <SendCommandCycleTime>d__.<>t__builder.Task;
		}

		private void OnRemoteChannelReceivedChannelCycleTime(IRemoteChannelDef remoteChannelDef, uint value)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceRemoteLightDimmable logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				RemoteUpdateCycleTime((int)value);
			}
		}
	}
	public class RemoteDimmerCycleTime1 : RemoteDimmerCycleTime
	{
		protected override void RemoteUpdateCycleTime(int newCycleTime)
		{
			LogicalDeviceLightDimmableStatus logicalDeviceLightDimmableStatus = new LogicalDeviceLightDimmableStatus(((ILogicalDeviceWithStatus<LogicalDeviceLightDimmableStatus>)LogicalDevice).DeviceStatus);
			logicalDeviceLightDimmableStatus.SetCycleTime1(newCycleTime);
			((ILogicalDeviceWithStatusUpdate<LogicalDeviceLightDimmableStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceLightDimmableStatus);
		}

		public RemoteDimmerCycleTime1(ILogicalDeviceRemoteLightDimmable logicalDevice, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "time1", commandControl, channelCollection)
		{
		}
	}
	public class RemoteDimmerCycleTime2 : RemoteDimmerCycleTime
	{
		protected override void RemoteUpdateCycleTime(int newCycleTime)
		{
			LogicalDeviceLightDimmableStatus logicalDeviceLightDimmableStatus = new LogicalDeviceLightDimmableStatus(((ILogicalDeviceWithStatus<LogicalDeviceLightDimmableStatus>)LogicalDevice).DeviceStatus);
			logicalDeviceLightDimmableStatus.SetCycleTime2(newCycleTime);
			((ILogicalDeviceWithStatusUpdate<LogicalDeviceLightDimmableStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceLightDimmableStatus);
		}

		public RemoteDimmerCycleTime2(ILogicalDeviceRemoteLightDimmable logicalDevice, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "time2", commandControl, channelCollection)
		{
		}
	}
	public class RemoteDimmerMode : RemoteBaseControl<ILogicalDeviceRemoteLightDimmable, IRemoteChannelDefDimmerMode>
	{
		public RemoteDimmerMode(ILogicalDeviceRemoteLightDimmable logicalDevice, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "mode", commandControl, channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<RemoteDimmableMode>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannelDimmerMode;
			}
		}

		public Task<CommandResult> SendDimmerModeCommand(RemoteDimmableMode choice)
		{
			//IL_0015: Unknown result type (might be due to invalid IL or missing references)
			IRemoteChannelDefDimmerMode channel = base.Channel;
			if (channel == null)
			{
				return Task.FromResult<CommandResult>((CommandResult)9);
			}
			return ((IRemoteChannelDefCommand<RemoteDimmableMode>)channel).SendCommandToRemoteAsync(choice, CancelCurrentRemoteCommandAndGetNewCancellationToken());
		}

		public void UpdateChannelDimmerMode(IRemoteChannelDef remoteChannelDef, RemoteDimmableMode choice)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceRemoteLightDimmable logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				LogicalDeviceLightDimmableStatus logicalDeviceLightDimmableStatus = new LogicalDeviceLightDimmableStatus(((ILogicalDeviceWithStatus<LogicalDeviceLightDimmableStatus>)LogicalDevice).DeviceStatus);
				switch (choice)
				{
				case RemoteDimmableMode.Off:
					logicalDeviceLightDimmableStatus.SetLightMode(DimmableLightMode.Off);
					break;
				case RemoteDimmableMode.Dimmer:
					logicalDeviceLightDimmableStatus.SetLightMode(DimmableLightMode.On);
					break;
				case RemoteDimmableMode.Blink:
					logicalDeviceLightDimmableStatus.SetLightMode(DimmableLightMode.Blink);
					break;
				case RemoteDimmableMode.Swell:
					logicalDeviceLightDimmableStatus.SetLightMode(DimmableLightMode.Swell);
					break;
				}
				((ILogicalDeviceWithStatusUpdate<LogicalDeviceLightDimmableStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceLightDimmableStatus);
			}
		}
	}
	public class RemoteDimmerSleepMinutes : RemoteBaseControl<ILogicalDeviceRemoteLightDimmable, IRemoteChannelDefSleepMinutes>
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandDuration>d__1 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public RemoteDimmerSleepMinutes <>4__this;

			public byte value;

			private IRemoteChannelDefSleepMinutes <channel>5__2;

			private CancellationToken <cancelToken>5__3;

			private TaskAwaiter<bool> <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_012c: Expected O, but got Unknown
				//IL_0084: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				//IL_0090: Unknown result type (might be due to invalid IL or missing references)
				//IL_0104: Unknown result type (might be due to invalid IL or missing references)
				//IL_0109: Unknown result type (might be due to invalid IL or missing references)
				//IL_0111: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b5: Unknown result type (might be due to invalid IL or missing references)
				//IL_0122: Unknown result type (might be due to invalid IL or missing references)
				//IL_0127: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0047: Unknown result type (might be due to invalid IL or missing references)
				//IL_0051: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_002e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_015f: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				RemoteDimmerSleepMinutes remoteDimmerSleepMinutes = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<bool> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_009f;
					}
					TaskAwaiter<CommandResult> val2;
					if (num == 1)
					{
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_0120;
					}
					<channel>5__2 = remoteDimmerSleepMinutes.Channel;
					if (<channel>5__2 != null)
					{
						<cancelToken>5__3 = remoteDimmerSleepMinutes.CancelCurrentRemoteCommandAndGetNewCancellationToken();
						val = TaskExtension.TryDelay((int)remoteDimmerSleepMinutes.RemoteCommandSendDelayTime, <cancelToken>5__3).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SendCommandDuration>d__1>(ref val, ref this);
							return;
						}
						goto IL_009f;
					}
					result = (CommandResult)9;
					goto end_IL_000e;
					IL_0120:
					result = val2.GetResult();
					goto end_IL_000e;
					IL_009f:
					val.GetResult();
					if (!((CancellationToken)(ref <cancelToken>5__3)).IsCancellationRequested)
					{
						val2 = ((IRemoteChannelDefCommand<uint>)<channel>5__2).SendCommandToRemoteAsync((uint)value, remoteDimmerSleepMinutes.CancelCurrentRemoteCommandAndGetNewCancellationToken()).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandDuration>d__1>(ref val2, ref this);
							return;
						}
						goto IL_0120;
					}
					result = (CommandResult)1;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<channel>5__2 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<channel>5__2 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		public RemoteDimmerSleepMinutes(ILogicalDeviceRemoteLightDimmable logicalDevice, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "sleep", commandControl, channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<uint>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannelSleepTime;
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommandDuration(byte value)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandDuration>d__1 <SendCommandDuration>d__ = default(<SendCommandDuration>d__1);
			<SendCommandDuration>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandDuration>d__.<>4__this = this;
			<SendCommandDuration>d__.value = value;
			<SendCommandDuration>d__.<>1__state = -1;
			<SendCommandDuration>d__.<>t__builder.Start<<SendCommandDuration>d__1>(ref <SendCommandDuration>d__);
			return <SendCommandDuration>d__.<>t__builder.Task;
		}

		private void UpdateChannelSleepTime(IRemoteChannelDef remoteChannelDef, uint value)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceRemoteLightDimmable logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				LogicalDeviceLightDimmableStatus logicalDeviceLightDimmableStatus = new LogicalDeviceLightDimmableStatus(((ILogicalDeviceWithStatus<LogicalDeviceLightDimmableStatus>)LogicalDevice).DeviceStatus);
				logicalDeviceLightDimmableStatus.SetDuration((byte)value);
				((ILogicalDeviceWithStatusUpdate<LogicalDeviceLightDimmableStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceLightDimmableStatus);
			}
		}
	}
	public class RemoteRgbColorAsNative : RemoteBaseControl<ILogicalDeviceLightRgbRemote, IRemoteChannelDefNativeColor>
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommand>d__1 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public RemoteRgbColorAsNative <>4__this;

			public NativeColor value;

			private IRemoteChannelDefNativeColor <channel>5__2;

			private CancellationToken <cancelToken>5__3;

			private TaskAwaiter<bool> <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_012c: Expected O, but got Unknown
				//IL_0084: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				//IL_0090: Unknown result type (might be due to invalid IL or missing references)
				//IL_0104: Unknown result type (might be due to invalid IL or missing references)
				//IL_0109: Unknown result type (might be due to invalid IL or missing references)
				//IL_0111: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b5: Unknown result type (might be due to invalid IL or missing references)
				//IL_0122: Unknown result type (might be due to invalid IL or missing references)
				//IL_0127: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0047: Unknown result type (might be due to invalid IL or missing references)
				//IL_0051: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_002e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_015f: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				RemoteRgbColorAsNative remoteRgbColorAsNative = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<bool> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_009f;
					}
					TaskAwaiter<CommandResult> val2;
					if (num == 1)
					{
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_0120;
					}
					<channel>5__2 = remoteRgbColorAsNative.Channel;
					if (<channel>5__2 != null)
					{
						<cancelToken>5__3 = remoteRgbColorAsNative.CancelCurrentRemoteCommandAndGetNewCancellationToken();
						val = TaskExtension.TryDelay((int)remoteRgbColorAsNative.RemoteCommandSendDelayTime, <cancelToken>5__3).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SendCommand>d__1>(ref val, ref this);
							return;
						}
						goto IL_009f;
					}
					result = (CommandResult)9;
					goto end_IL_000e;
					IL_0120:
					result = val2.GetResult();
					goto end_IL_000e;
					IL_009f:
					val.GetResult();
					if (!((CancellationToken)(ref <cancelToken>5__3)).IsCancellationRequested)
					{
						val2 = ((IRemoteChannelDefCommand<NativeColor>)<channel>5__2).SendCommandToRemoteAsync(value, remoteRgbColorAsNative.CancelCurrentRemoteCommandAndGetNewCancellationToken()).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommand>d__1>(ref val2, ref this);
							return;
						}
						goto IL_0120;
					}
					result = (CommandResult)1;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<channel>5__2 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<channel>5__2 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		public RemoteRgbColorAsNative(ILogicalDeviceLightRgbRemote logicalDevice, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "hsvcolor", commandControl, channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<NativeColor>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannelColor;
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommand(NativeColor value)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SendCommand>d__1 <SendCommand>d__ = default(<SendCommand>d__1);
			<SendCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommand>d__.<>4__this = this;
			<SendCommand>d__.value = value;
			<SendCommand>d__.<>1__state = -1;
			<SendCommand>d__.<>t__builder.Start<<SendCommand>d__1>(ref <SendCommand>d__);
			return <SendCommand>d__.<>t__builder.Task;
		}

		private void UpdateChannelColor(IRemoteChannelDef remoteChannelDef, NativeColor value)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			//IL_003f: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceLightRgbRemote logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				LogicalDeviceLightRgbStatus logicalDeviceLightRgbStatus = new LogicalDeviceLightRgbStatus(((ILogicalDeviceWithStatus<LogicalDeviceLightRgbStatus>)LogicalDevice).DeviceStatus);
				logicalDeviceLightRgbStatus.SetRgbColor(((NativeColor)(ref value)).AsRgbColor);
				((ILogicalDeviceWithStatusUpdate<LogicalDeviceLightRgbStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceLightRgbStatus);
			}
		}
	}
	public class RemoteRgbMode : RemoteBaseControl<ILogicalDeviceLightRgbRemote, IRemoteChannelDefRgbMode>
	{
		public bool IsCommandOneShotSupported => base.Channel?.IsCommandOneShotSupported ?? false;

		public RemoteRgbMode(ILogicalDeviceLightRgbRemote logicalDevice, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "mode", commandControl, channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<RemoteRgbModeChoice>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannelMode;
			}
		}

		public Task<CommandResult> SendModeCommand(RemoteRgbModeChoice choice)
		{
			//IL_0015: Unknown result type (might be due to invalid IL or missing references)
			IRemoteChannelDefRgbMode channel = base.Channel;
			if (channel == null)
			{
				return Task.FromResult<CommandResult>((CommandResult)9);
			}
			return ((IRemoteChannelDefCommand<RemoteRgbModeChoice>)channel).SendCommandToRemoteAsync(choice, CancelCurrentRemoteCommandAndGetNewCancellationToken());
		}

		public void UpdateChannelMode(IRemoteChannelDef remoteChannelDef, RemoteRgbModeChoice choice)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceLightRgbRemote logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				LogicalDeviceLightRgbStatus logicalDeviceLightRgbStatus = new LogicalDeviceLightRgbStatus(((ILogicalDeviceWithStatus<LogicalDeviceLightRgbStatus>)LogicalDevice).DeviceStatus);
				switch (choice)
				{
				case RemoteRgbModeChoice.Off:
					logicalDeviceLightRgbStatus.SetMode(RgbLightMode.Off);
					break;
				case RemoteRgbModeChoice.On:
					logicalDeviceLightRgbStatus.SetMode(RgbLightMode.On);
					break;
				case RemoteRgbModeChoice.Blink:
					logicalDeviceLightRgbStatus.SetMode(RgbLightMode.Blink);
					break;
				case RemoteRgbModeChoice.BlinkPrimary:
					logicalDeviceLightRgbStatus.SetMode(RgbLightMode.Jump3);
					break;
				case RemoteRgbModeChoice.BlinkPrimarySecondary:
					logicalDeviceLightRgbStatus.SetMode(RgbLightMode.Jump7);
					break;
				case RemoteRgbModeChoice.FadePrimary:
					logicalDeviceLightRgbStatus.SetMode(RgbLightMode.Fade3);
					break;
				case RemoteRgbModeChoice.FadePrimarySecondary:
					logicalDeviceLightRgbStatus.SetMode(RgbLightMode.Fade7);
					break;
				case RemoteRgbModeChoice.Rainbow:
					logicalDeviceLightRgbStatus.SetMode(RgbLightMode.Rainbow);
					break;
				}
				((ILogicalDeviceWithStatusUpdate<LogicalDeviceLightRgbStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceLightRgbStatus);
			}
		}

		public Task<CommandResult> SendRemoteCommandAsync(LogicalDeviceLightRgbCommand command, CancellationToken cancelToken)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			return base.Channel?.SendRemoteCommandAsync(command, cancelToken);
		}
	}
	public class RemoteRgbSleepMinutes : RemoteBaseControl<ILogicalDeviceLightRgbRemote, IRemoteChannelDefSleepMinutes>
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandDuration>d__1 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public RemoteRgbSleepMinutes <>4__this;

			public byte value;

			private IRemoteChannelDefSleepMinutes <channel>5__2;

			private CancellationToken <cancelToken>5__3;

			private TaskAwaiter<bool> <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_012c: Expected O, but got Unknown
				//IL_0084: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				//IL_0090: Unknown result type (might be due to invalid IL or missing references)
				//IL_0104: Unknown result type (might be due to invalid IL or missing references)
				//IL_0109: Unknown result type (might be due to invalid IL or missing references)
				//IL_0111: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b5: Unknown result type (might be due to invalid IL or missing references)
				//IL_0122: Unknown result type (might be due to invalid IL or missing references)
				//IL_0127: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0047: Unknown result type (might be due to invalid IL or missing references)
				//IL_0051: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_002e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_015f: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				RemoteRgbSleepMinutes remoteRgbSleepMinutes = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<bool> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_009f;
					}
					TaskAwaiter<CommandResult> val2;
					if (num == 1)
					{
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_0120;
					}
					<channel>5__2 = remoteRgbSleepMinutes.Channel;
					if (<channel>5__2 != null)
					{
						<cancelToken>5__3 = remoteRgbSleepMinutes.CancelCurrentRemoteCommandAndGetNewCancellationToken();
						val = TaskExtension.TryDelay((int)remoteRgbSleepMinutes.RemoteCommandSendDelayTime, <cancelToken>5__3).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SendCommandDuration>d__1>(ref val, ref this);
							return;
						}
						goto IL_009f;
					}
					result = (CommandResult)9;
					goto end_IL_000e;
					IL_0120:
					result = val2.GetResult();
					goto end_IL_000e;
					IL_009f:
					val.GetResult();
					if (!((CancellationToken)(ref <cancelToken>5__3)).IsCancellationRequested)
					{
						val2 = ((IRemoteChannelDefCommand<uint>)<channel>5__2).SendCommandToRemoteAsync((uint)value, remoteRgbSleepMinutes.CancelCurrentRemoteCommandAndGetNewCancellationToken()).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandDuration>d__1>(ref val2, ref this);
							return;
						}
						goto IL_0120;
					}
					result = (CommandResult)1;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<channel>5__2 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<channel>5__2 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		public RemoteRgbSleepMinutes(ILogicalDeviceLightRgbRemote logicalDevice, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "sleep", commandControl, channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<uint>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannelSleepTime;
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommandDuration(byte value)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandDuration>d__1 <SendCommandDuration>d__ = default(<SendCommandDuration>d__1);
			<SendCommandDuration>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandDuration>d__.<>4__this = this;
			<SendCommandDuration>d__.value = value;
			<SendCommandDuration>d__.<>1__state = -1;
			<SendCommandDuration>d__.<>t__builder.Start<<SendCommandDuration>d__1>(ref <SendCommandDuration>d__);
			return <SendCommandDuration>d__.<>t__builder.Task;
		}

		private void UpdateChannelSleepTime(IRemoteChannelDef remoteChannelDef, uint value)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceLightRgbRemote logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				LogicalDeviceLightRgbStatus logicalDeviceLightRgbStatus = new LogicalDeviceLightRgbStatus(((ILogicalDeviceWithStatus<LogicalDeviceLightRgbStatus>)LogicalDevice).DeviceStatus);
				logicalDeviceLightRgbStatus.SetAutoOffDuration((byte)value);
				((ILogicalDeviceWithStatusUpdate<LogicalDeviceLightRgbStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceLightRgbStatus);
			}
		}
	}
	public class RemoteRgbSwitchRestore : RemoteSwitch<ILogicalDeviceLightRgbRemote>
	{
		public RemoteRgbSwitchRestore(ILogicalDeviceLightRgbRemote logicalDevice, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "switch", commandControl, channelCollection)
		{
		}

		protected override void RemoteUpdateSwitchState(bool value)
		{
		}
	}
	public class RemoteRgbTimeInterval10Ms : RemoteBaseControl<ILogicalDeviceLightRgbRemote, IRemoteChannelDefTimeInterval10Ms>
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommand>d__1 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public RemoteRgbTimeInterval10Ms <>4__this;

			public uint value;

			private IRemoteChannelDefTimeInterval10Ms <channel>5__2;

			private CancellationToken <cancelToken>5__3;

			private TaskAwaiter<bool> <>u__1;

			private TaskAwaiter<CommandResult> <>u__2;

			private void MoveNext()
			{
				//IL_012c: Expected O, but got Unknown
				//IL_0084: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				//IL_0090: Unknown result type (might be due to invalid IL or missing references)
				//IL_0104: Unknown result type (might be due to invalid IL or missing references)
				//IL_0109: Unknown result type (might be due to invalid IL or missing references)
				//IL_0111: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b5: Unknown result type (might be due to invalid IL or missing references)
				//IL_0122: Unknown result type (might be due to invalid IL or missing references)
				//IL_0127: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0047: Unknown result type (might be due to invalid IL or missing references)
				//IL_0051: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_002e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_015f: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				RemoteRgbTimeInterval10Ms remoteRgbTimeInterval10Ms = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<bool> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_009f;
					}
					TaskAwaiter<CommandResult> val2;
					if (num == 1)
					{
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_0120;
					}
					<channel>5__2 = remoteRgbTimeInterval10Ms.Channel;
					if (<channel>5__2 != null)
					{
						<cancelToken>5__3 = remoteRgbTimeInterval10Ms.CancelCurrentRemoteCommandAndGetNewCancellationToken();
						val = TaskExtension.TryDelay((int)remoteRgbTimeInterval10Ms.RemoteCommandSendDelayTime, <cancelToken>5__3).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SendCommand>d__1>(ref val, ref this);
							return;
						}
						goto IL_009f;
					}
					result = (CommandResult)9;
					goto end_IL_000e;
					IL_0120:
					result = val2.GetResult();
					goto end_IL_000e;
					IL_009f:
					val.GetResult();
					if (!((CancellationToken)(ref <cancelToken>5__3)).IsCancellationRequested)
					{
						val2 = ((IRemoteChannelDefCommand<uint>)<channel>5__2).SendCommandToRemoteAsync(value, remoteRgbTimeInterval10Ms.CancelCurrentRemoteCommandAndGetNewCancellationToken()).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommand>d__1>(ref val2, ref this);
							return;
						}
						goto IL_0120;
					}
					result = (CommandResult)1;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<channel>5__2 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<channel>5__2 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		public RemoteRgbTimeInterval10Ms(ILogicalDeviceLightRgbRemote logicalDevice, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "speed", commandControl, channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<uint>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannelTimeInterval;
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommand(uint value)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommand>d__1 <SendCommand>d__ = default(<SendCommand>d__1);
			<SendCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommand>d__.<>4__this = this;
			<SendCommand>d__.value = value;
			<SendCommand>d__.<>1__state = -1;
			<SendCommand>d__.<>t__builder.Start<<SendCommand>d__1>(ref <SendCommand>d__);
			return <SendCommand>d__.<>t__builder.Task;
		}

		private void UpdateChannelTimeInterval(IRemoteChannelDef remoteChannelDef, uint value)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceLightRgbRemote logicalDevice = LogicalDevice;
			if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				ushort interval = (ushort)value;
				LogicalDeviceLightRgbStatus logicalDeviceLightRgbStatus = new LogicalDeviceLightRgbStatus(((ILogicalDeviceWithStatus<LogicalDeviceLightRgbStatus>)LogicalDevice).DeviceStatus);
				logicalDeviceLightRgbStatus.SetInterval(interval);
				((ILogicalDeviceWithStatusUpdate<LogicalDeviceLightRgbStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceLightRgbStatus);
			}
		}
	}
	public interface IRemoteChannelDefCurrentDraw : IRemoteChannelDefStatus<float>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable
	{
	}
	public delegate void RemoteChannelReceivedDimmableStateEventHandler(IRemoteChannelDef channel, bool lightOn, float maxBrightnessPercent);
	public interface IRemoteChannelDefDimmer : IRemoteChannelDefCommand, IRemoteChannelDef, ICommonDisposable, IDisposable, IRemoteChannelDefStatus
	{
		bool IsCommandOneShotSupported { get; }

		event RemoteChannelReceivedDimmableStateEventHandler RemoteChannelReceivedDimmableStateEvent;

		Task<CommandResult> SendRemoteCommandDimmableOnAsync(CancellationToken cancelToken);

		Task<CommandResult> SendRemoteCommandDimmableOffAsync(CancellationToken cancelToken);

		Task<CommandResult> SendRemoteCommandDimmableMaxBrightnessPercentAsync(float maxBrightnessPercent, CancellationToken cancelToken);

		void UpdateChannelStatus(bool lightOn, float maxBrightnessPercent);

		Task<CommandResult> SendRemoteCommandAsync(LogicalDeviceLightDimmableCommand command, CancellationToken cancelToken);
	}
	public enum RemoteDimmableMode : Enum
	{
		Off,
		Dimmer,
		Blink,
		Swell
	}
	public interface IRemoteChannelDefDimmerMode : IRemoteChannelDef<RemoteDimmableMode>, IRemoteChannelDefStatus<RemoteDimmableMode>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable, IRemoteChannelDefCommand<RemoteDimmableMode>, IRemoteChannelDefCommand
	{
	}
	public interface IRemoteChannelDefDtcId : IRemoteChannelDefStatus<DTC_ID>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable
	{
	}
	public interface IRemoteChannelDefFault : IRemoteChannelDefSwitch, IRemoteChannelDef<bool>, IRemoteChannelDefStatus<bool>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable, IRemoteChannelDefCommand<bool>, IRemoteChannelDefCommand
	{
		Task<CommandResult> SendCommandClearFaultAsync(CancellationToken cancelToken);
	}
	public interface IRemoteChannelDefGeneratorQuietHoursActive : IRemoteChannelDefStatus<bool>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable
	{
	}
	public interface IRemoteChannelDefGeneratorState : IRemoteChannelDefStatus<GeneratorState>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable
	{
	}
	public interface IRemoteChannelDefHvacFanMode : IRemoteChannelDef<ClimateZoneFanMode>, IRemoteChannelDefStatus<ClimateZoneFanMode>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable, IRemoteChannelDefCommand<ClimateZoneFanMode>, IRemoteChannelDefCommand
	{
	}
	public interface IRemoteChannelDefHvacHeatMode : IRemoteChannelDef<ClimateZoneHeatMode>, IRemoteChannelDefStatus<ClimateZoneHeatMode>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable, IRemoteChannelDefCommand<ClimateZoneHeatMode>, IRemoteChannelDefCommand
	{
		bool IsCommandOneShotSupported { get; }

		Task<CommandResult> SendRemoteCommandAsync(LogicalDeviceClimateZoneCommand command, CancellationToken cancelToken);
	}
	public interface IRemoteChannelDefHvacHeatSource : IRemoteChannelDef<ClimateZoneHeatSource>, IRemoteChannelDefStatus<ClimateZoneHeatSource>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable, IRemoteChannelDefCommand<ClimateZoneHeatSource>, IRemoteChannelDefCommand
	{
	}
	public interface IRemoteChannelDefHvacZoneStatus : IRemoteChannelDefStatus<ClimateZoneStatus>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable
	{
	}
	public interface IRemoteChannelDefNativeColor : IRemoteChannelDef<NativeColor>, IRemoteChannelDefStatus<NativeColor>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable, IRemoteChannelDefCommand<NativeColor>, IRemoteChannelDefCommand
	{
	}
	public interface IRemoteChannelDefPosition : IRemoteChannelDefStatus<uint>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable
	{
	}
	public enum RemoteRgbModeChoice : Enum
	{
		Off = 0,
		On = 1,
		Blink = 2,
		BlinkPrimary = 4,
		BlinkPrimarySecondary = 5,
		FadePrimary = 6,
		FadePrimarySecondary = 7,
		Rainbow = 8
	}
	public interface IRemoteChannelDefRgbMode : IRemoteChannelDef<RemoteRgbModeChoice>, IRemoteChannelDefStatus<RemoteRgbModeChoice>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable, IRemoteChannelDefCommand<RemoteRgbModeChoice>, IRemoteChannelDefCommand
	{
		bool IsCommandOneShotSupported { get; }

		Task<CommandResult> SendRemoteCommandAsync(LogicalDeviceLightRgbCommand command, CancellationToken cancelToken);
	}
	public interface IRemoteChannelDefSleepMinutes : IRemoteChannelDef<uint>, IRemoteChannelDefStatus<uint>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable, IRemoteChannelDefCommand<uint>, IRemoteChannelDefCommand
	{
	}
	public interface IRemoteChannelDefSwitch : IRemoteChannelDef<bool>, IRemoteChannelDefStatus<bool>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable, IRemoteChannelDefCommand<bool>, IRemoteChannelDefCommand
	{
	}
	public interface IRemoteChannelDefTankSensor : IRemoteChannelDefStatus<uint>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable
	{
	}
	public interface IRemoteChannelDefTemperatureControlFahrenheit : IRemoteChannelDef<int>, IRemoteChannelDefStatus<int>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable, IRemoteChannelDefCommand<int>, IRemoteChannelDefCommand
	{
	}
	public interface IRemoteChannelDefTemperatureFahrenheit : IRemoteChannelDefStatus<float>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable
	{
	}
	public interface IRemoteChannelDefTimeInterval10Ms : IRemoteChannelDef<uint>, IRemoteChannelDefStatus<uint>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable, IRemoteChannelDefCommand<uint>, IRemoteChannelDefCommand
	{
	}
	public interface IRemoteChannelDefTimeMs : IRemoteChannelDef<uint>, IRemoteChannelDefStatus<uint>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable, IRemoteChannelDefCommand<uint>, IRemoteChannelDefCommand
	{
	}
	public interface IRemoteChannelDefVoltage : IRemoteChannelDefStatus<float>, IRemoteChannelDefStatus, IRemoteChannelDef, ICommonDisposable, IDisposable
	{
	}
	public static class RemoteChannelId : Object
	{
		public const string BatteryVoltage = "battery-voltage";

		public const string Command = "command";

		public const string CurrentDraw = "current";

		public const string Dimmer = "dimmer";

		public const string FanMode = "fan-mode";

		public const string Fault = "fault";

		public const string HeatSource = "heat-source";

		public const string HsvColor = "hsvcolor";

		public const string HvacMode = "hvac-mode";

		public const string InsideTemperature = "inside-temperature";

		public const string Mode = "mode";

		public const string Movement = "movement";

		public const string Online = "online";

		public const string OutputDisable = "output-disable";

		public const string OutputDisableCause = "output-disable-cause";

		public const string OutsideTemperature = "outside-temperature";

		public const string Percent = "percent";

		public const string QuietHours = "quiet-hours";

		public const string Sleep = "sleep";

		public const string SoftwareUpdate = "software-update";

		public const string Speed = "speed";

		public const string State = "state";

		public const string Status = "status";

		public const string Switch = "switch";

		public const string TankLevel = "tank-level";

		public const string TemperatureHigh = "high-temperature";

		public const string TemperatureLow = "low-temperature";

		public const string Time1 = "time1";

		public const string Time2 = "time2";

		public const string Temperature = "temperature";

		public const string UserMessageDtc = "output-disable-cause";
	}
	public class RemoteBase<TLogicalDevice, TRemoteChannelDef> : CommonDisposable where TLogicalDevice : ILogicalDeviceRemote where TRemoteChannelDef : class, IRemoteChannelDef
	{
		protected TLogicalDevice LogicalDevice;

		private readonly IRemoteChannelCollection _channelCollection;

		public string ChannelId
		{
			[CompilerGenerated]
			get;
		}

		public TRemoteChannelDef? Channel
		{
			get
			{
				TLogicalDevice logicalDevice = LogicalDevice;
				if (logicalDevice == null)
				{
					return null;
				}
				ILogicalDeviceRemoteManager remoteManager = ((ILogicalDevice)logicalDevice).DeviceService.RemoteManager;
				if (remoteManager == null)
				{
					return null;
				}
				TRemoteChannelDef remoteChannelForChannelId = _channelCollection.GetRemoteChannelForChannelId<TRemoteChannelDef>(ChannelId);
				if (remoteChannelForChannelId != null)
				{
					return remoteChannelForChannelId;
				}
				return remoteManager.MakeRemoteChannel<TRemoteChannelDef>((ILogicalDeviceRemote)(object)logicalDevice, ChannelId, _channelCollection);
			}
		}

		public RemoteBase(TLogicalDevice logicalDevice, string channelId, IRemoteChannelCollection? channelCollection = null)
		{
			//IL_001a: Unknown result type (might be due to invalid IL or missing references)
			LogicalDevice = logicalDevice;
			ChannelId = channelId;
			_channelCollection = (IRemoteChannelCollection)(((object)channelCollection) ?? ((object)new RemoteChannelCollection()));
		}

		public override void Dispose(bool disposing)
		{
			_channelCollection.TryRemoveAndDispose<TRemoteChannelDef>();
			LogicalDevice = default(TLogicalDevice);
		}
	}
	public class RemoteBaseControl<TLogicalDevice, TRemoteChannelDef> : RemoteBase<TLogicalDevice, TRemoteChannelDef> where TLogicalDevice : ILogicalDeviceRemote where TRemoteChannelDef : class, IRemoteChannelDef
	{
		protected IRemoteCommandControl CommandControl;

		public virtual uint RemoteCommandSendDelayTime => 500u;

		public RemoteBaseControl(TLogicalDevice logicalDevice, string channelId, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, channelId, channelCollection)
		{
			CommandControl = commandControl;
		}

		public override void Dispose(bool disposing)
		{
			CommandControl?.CancelCurrentRemoteCommand();
			base.Dispose(disposing);
		}

		protected virtual CancellationToken CancelCurrentRemoteCommandAndGetNewCancellationToken()
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return CommandControl.CancelCurrentRemoteCommandAndGetNewCancellationToken();
		}
	}
	public interface IRemoteCommandControl : ICommonDisposable, IDisposable
	{
		void CancelCurrentRemoteCommand();

		CancellationToken CancelCurrentRemoteCommandAndGetNewCancellationToken();
	}
	public class RemoteCommandControl : CommonDisposable, IRemoteCommandControl, ICommonDisposable, IDisposable
	{
		protected CancellationTokenSource RemoteCommandRunnerTokenSource;

		public void CancelCurrentRemoteCommand()
		{
			CancellationTokenSource remoteCommandRunnerTokenSource = RemoteCommandRunnerTokenSource;
			if (remoteCommandRunnerTokenSource != null)
			{
				CancellationTokenSourceExtension.TryCancelAndDispose(remoteCommandRunnerTokenSource);
			}
			RemoteCommandRunnerTokenSource = null;
		}

		public CancellationToken CancelCurrentRemoteCommandAndGetNewCancellationToken()
		{
			//IL_0012: Unknown result type (might be due to invalid IL or missing references)
			//IL_001c: Expected O, but got Unknown
			//IL_0022: Unknown result type (might be due to invalid IL or missing references)
			CancellationTokenSource remoteCommandRunnerTokenSource = RemoteCommandRunnerTokenSource;
			if (remoteCommandRunnerTokenSource != null)
			{
				CancellationTokenSourceExtension.TryCancelAndDispose(remoteCommandRunnerTokenSource);
			}
			RemoteCommandRunnerTokenSource = new CancellationTokenSource();
			return RemoteCommandRunnerTokenSource.Token;
		}

		public override void Dispose(bool disposing)
		{
			CancellationTokenSource remoteCommandRunnerTokenSource = RemoteCommandRunnerTokenSource;
			if (remoteCommandRunnerTokenSource != null)
			{
				CancellationTokenSourceExtension.TryCancelAndDispose(remoteCommandRunnerTokenSource);
			}
			RemoteCommandRunnerTokenSource = null;
		}
	}
	public class RemoteFault<TLogicalDeviceRemote> : RemoteBaseControl<TLogicalDeviceRemote, IRemoteChannelDefFault> where TLogicalDeviceRemote : ILogicalDeviceRemote
	{
		public RemoteFault(TLogicalDeviceRemote logicalDevice, RemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "fault", (IRemoteCommandControl)commandControl, channelCollection)
		{
		}

		public Task<CommandResult> SendCommandClearFault(CancellationToken cancelToken)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			return base.Channel?.SendCommandClearFaultAsync(cancelToken) ?? Task.FromResult<CommandResult>((CommandResult)9);
		}
	}
	public class RemoteUserClearRequired<TLogicalDeviceRemote> : RemoteBaseControl<TLogicalDeviceRemote, IRemoteChannelDefFault> where TLogicalDeviceRemote : ILogicalDeviceRemote
	{
		public RemoteUserClearRequired(TLogicalDeviceRemote logicalDevice, RemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "output-disable", (IRemoteCommandControl)commandControl, channelCollection)
		{
		}

		public Task<CommandResult> SendCommandClearFault(CancellationToken cancelToken)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			return base.Channel?.SendCommandClearFaultAsync(cancelToken) ?? Task.FromResult<CommandResult>((CommandResult)9);
		}
	}
	public class RemoteOnline : RemoteBase<ILogicalDeviceRemote, IRemoteChannelDefOnline>
	{
		public RemoteOnline(ILogicalDeviceRemote logicalDevice, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "online", channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<RemoteOnlineStatus>)(object)base.Channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannelOnline;
			}
		}

		private void UpdateChannelOnline(IRemoteChannelDef remoteChannelDef, RemoteOnlineStatus onlineStatus)
		{
			ILogicalDeviceRemote logicalDevice = LogicalDevice;
			if (logicalDevice != null)
			{
				logicalDevice.UpdateRemoteAccessAvailable();
			}
		}
	}
	public class RemoteSoftwareUpdate : RemoteBase<ILogicalDeviceRemote, IRemoteChannelDefSoftwareUpdate>
	{
		private const string LogTag = "RemoteSoftwareUpdate";

		private SoftwareUpdateState _softwareUpdateState = (SoftwareUpdateState)255;

		public SoftwareUpdateState SoftwareUpdateState
		{
			get
			{
				//IL_000d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				ILogicalDeviceRemote logicalDevice = LogicalDevice;
				if (((logicalDevice != null) ? ((int)((IDevicesCommon)logicalDevice).ActiveConnection) : 0) != 2 || ((CommonDisposable)this).IsDisposed || ((ICommonDisposable)LogicalDevice).IsDisposed)
				{
					return (SoftwareUpdateState)255;
				}
				return _softwareUpdateState;
			}
			private set
			{
				//IL_0001: Unknown result type (might be due to invalid IL or missing references)
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				_softwareUpdateState = value;
			}
		}

		public RemoteSoftwareUpdate(ILogicalDeviceRemote logicalDevice, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "software-update", channelCollection)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			IRemoteChannelDefSoftwareUpdate channel = base.Channel;
			if (channel != null)
			{
				((IRemoteChannelDefStatus<SoftwareUpdateState>)(object)channel).RemoteChannelReceivedUpdateStatusEvent += UpdateChannel;
			}
		}

		public void UpdateChannel(IRemoteChannelDef remoteChannelDef, SoftwareUpdateState value)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			SoftwareUpdateState = value;
		}

		public Task<CommandResult> SendSoftwareUpdateAuthorizationAsync(CancellationToken cancelToken)
		{
			//IL_001e: Expected O, but got Unknown
			//IL_0014: Unknown result type (might be due to invalid IL or missing references)
			//IL_000e: Unknown result type (might be due to invalid IL or missing references)
			try
			{
				return (base.Channel ?? throw new NotSupportedException("Remote doesn't support Software Update")).SendSoftwareUpdateAuthorizationAsync(cancelToken);
			}
			catch (Exception ex)
			{
				Exception ex2 = ex;
				TaggedLog.Warning("RemoteSoftwareUpdate", String.Concat("SendSoftwareUpdateAuthorizationAsync failed ", ex2.Message), Array.Empty<object>());
				return Task.FromResult<CommandResult>((CommandResult)7);
			}
		}
	}
	public abstract class RemoteSwitch<TLogicalDevice> : RemoteBaseControl<TLogicalDevice, IRemoteChannelDefSwitch> where TLogicalDevice : ILogicalDeviceRemote
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandSetSwitch>d__2 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public RemoteSwitch<TLogicalDevice> <>4__this;

			public bool value;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_008f: Expected O, but got Unknown
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0074: Unknown result type (might be due to invalid IL or missing references)
				//IL_0085: Unknown result type (might be due to invalid IL or missing references)
				//IL_008a: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_003a: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b4: Unknown result type (might be due to invalid IL or missing references)
				//IL_004f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0051: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				RemoteSwitch<TLogicalDevice> remoteSwitch = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_0083;
					}
					IRemoteChannelDefSwitch channel = remoteSwitch.Channel;
					if (channel != null)
					{
						val = ((IRemoteChannelDefCommand<bool>)channel).SendCommandToRemoteAsync(value, remoteSwitch.CancelCurrentRemoteCommandAndGetNewCancellationToken()).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandSetSwitch>d__2>(ref val, ref this);
							return;
						}
						goto IL_0083;
					}
					result = (CommandResult)9;
					goto end_IL_000e;
					IL_0083:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		protected abstract void RemoteUpdateSwitchState(bool value);

		protected RemoteSwitch(TLogicalDevice logicalDevice, string channelId, IRemoteCommandControl commandControl, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, channelId, commandControl, channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<bool>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += OnRemoteChannelReceivedSwitchEvent;
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommandSetSwitch(bool value)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandSetSwitch>d__2 <SendCommandSetSwitch>d__ = default(<SendCommandSetSwitch>d__2);
			<SendCommandSetSwitch>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandSetSwitch>d__.<>4__this = this;
			<SendCommandSetSwitch>d__.value = value;
			<SendCommandSetSwitch>d__.<>1__state = -1;
			<SendCommandSetSwitch>d__.<>t__builder.Start<<SendCommandSetSwitch>d__2>(ref <SendCommandSetSwitch>d__);
			return <SendCommandSetSwitch>d__.<>t__builder.Task;
		}

		private void OnRemoteChannelReceivedSwitchEvent(IRemoteChannelDef remoteChannelDef, bool value)
		{
			//IL_002a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0036: Invalid comparison between Unknown and I4
			ref TLogicalDevice reference = ref LogicalDevice;
			TLogicalDevice val = default(TLogicalDevice);
			int num;
			if (val == null)
			{
				val = reference;
				reference = ref val;
				if (val == null)
				{
					num = 0;
					goto IL_0035;
				}
			}
			num = (int)((IDevicesCommon)reference).ActiveConnection;
			goto IL_0035;
			IL_0035:
			if (num == 2 && !((CommonDisposable)this).IsDisposed && !((ICommonDisposable)LogicalDevice).IsDisposed)
			{
				RemoteUpdateSwitchState(value);
			}
		}
	}
	public class RemoteTankSensor : RemoteBase<ILogicalDeviceRemoteTankSensor, IRemoteChannelDefTankSensor>
	{
		public RemoteTankSensor(ILogicalDeviceRemoteTankSensor logicalDevice, IRemoteChannelCollection channelCollection = null)
			: base(logicalDevice, "tank-level", channelCollection)
		{
			if (base.Channel != null)
			{
				((IRemoteChannelDefStatus<uint>)base.Channel).RemoteChannelReceivedUpdateStatusEvent += OnRemoteChannelReceivedUIntEvent;
			}
		}

		private void OnRemoteChannelReceivedUIntEvent(IRemoteChannelDef channel, uint value)
		{
			LogicalDeviceTankSensorStatus logicalDeviceTankSensorStatus = new LogicalDeviceTankSensorStatus(((ILogicalDeviceWithStatus<LogicalDeviceTankSensorStatus>)LogicalDevice).DeviceStatus);
			logicalDeviceTankSensorStatus.SetLevel((byte)value);
			((ILogicalDeviceWithStatusUpdate<LogicalDeviceTankSensorStatus>)LogicalDevice).UpdateDeviceStatus(logicalDeviceTankSensorStatus);
		}
	}
}
namespace OneControl.Devices.FlicButton
{
	[DefaultValue(FlicButtonState.Unknown)]
	public enum FlicButtonState : Enum
	{
		Unknown,
		Down,
		Up,
		Reserved
	}
	[DefaultValue(FlicButtonAction.None)]
	public enum FlicButtonAction : Enum
	{
		None,
		SingleTap,
		DoubleTap,
		Reserved
	}
	public interface IFlicButton : IAccessoryDevice
	{
		FlicButtonState State { get; }

		FlicButtonAction Action { get; }

		bool IsHeldDown { get; }

		TimeSpan LastStateChangeTimeSpan { get; }

		int BatteryChargePercent { get; }
	}
	public interface ILogicalDeviceFlicButton : IFlicButton, IAccessoryDevice, ILogicalDeviceWithStatus<LogicalDeviceFlicButtonStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusAlerts
	{
	}
	public interface ILogicalDeviceFlicButtonDirect : ILogicalDeviceFlicButton, IFlicButton, IAccessoryDevice, ILogicalDeviceWithStatus<LogicalDeviceFlicButtonStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusAlerts, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public class LogicalDeviceFlicButton : LogicalDevice<LogicalDeviceFlicButtonStatus, ILogicalDeviceCapability>, ILogicalDeviceFlicButton, IFlicButton, IAccessoryDevice, ILogicalDeviceWithStatus<LogicalDeviceFlicButtonStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusAlerts
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass22_0 : Object
		{
			public LogicalDeviceFlicButton <>4__this;

			public LogicalDeviceAlert newAlert;

			internal void <UpdateAlert>b__0(ILogicalDeviceExAlertChanged logicalDeviceEx)
			{
				logicalDeviceEx.LogicalDeviceAlertChanged((ILogicalDevice)(object)<>4__this, (ILogicalDeviceAlert)(object)newAlert, (ILogicalDeviceAlert)(object)newAlert);
			}
		}

		private const string LogTag = "LogicalDeviceFlicButton";

		public const string FlicButtonStateChangedAlertKey = "FlicButtonStateChangedAlert";

		public const string LowBatteryAlertKey = "LowBatteryAlert";

		private readonly ConcurrentDictionary<string, ILogicalDeviceAlert> _alertDict = new ConcurrentDictionary<string, ILogicalDeviceAlert>();

		public override bool IsLegacyDeviceHazardous => false;

		public bool IsAccessoryGatewaySupported => false;

		public FlicButtonState State => ((LogicalDevice<LogicalDeviceFlicButtonStatus, ILogicalDeviceCapability>)this).DeviceStatus.State;

		public FlicButtonAction Action => ((LogicalDevice<LogicalDeviceFlicButtonStatus, ILogicalDeviceCapability>)this).DeviceStatus.Action;

		public bool IsHeldDown => ((LogicalDevice<LogicalDeviceFlicButtonStatus, ILogicalDeviceCapability>)this).DeviceStatus.IsHeldDown;

		public TimeSpan LastStateChangeTimeSpan => ((LogicalDevice<LogicalDeviceFlicButtonStatus, ILogicalDeviceCapability>)this).DeviceStatus.FlicButtonStateChangedTimeSpan;

		public int BatteryChargePercent => ((LogicalDevice<LogicalDeviceFlicButtonStatus, ILogicalDeviceCapability>)this).DeviceStatus.BatteryChargePercent;

		public IEnumerable<ILogicalDeviceAlert> Alerts => (IEnumerable<ILogicalDeviceAlert>)(object)_alertDict.Values;

		public LogicalDeviceFlicButton(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService deviceService = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceFlicButtonStatus(), (ILogicalDeviceCapability)new LogicalDeviceCapability(), deviceService, isFunctionClassChangeable)
		{
			//IL_0012: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Expected O, but got Unknown
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			//IL_002d: Unknown result type (might be due to invalid IL or missing references)
			//IL_003c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0042: Unknown result type (might be due to invalid IL or missing references)
			UpdateAlert("FlicButtonStateChangedAlert", isActive: false, default(Nullable<int>));
			UpdateAlert("LowBatteryAlert", isActive: false, default(Nullable<int>));
		}

		public override void OnDeviceStatusChanged()
		{
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0015: Unknown result type (might be due to invalid IL or missing references)
			//IL_0037: Unknown result type (might be due to invalid IL or missing references)
			base.OnDeviceStatusChanged();
			UpdateAlert("FlicButtonStateChangedAlert", isActive: true, default(Nullable<int>));
			UpdateAlert("LowBatteryAlert", ((LogicalDevice<LogicalDeviceFlicButtonStatus, ILogicalDeviceCapability>)this).DeviceStatus.IsBatteryLow, new Nullable<int>(((LogicalDevice<LogicalDeviceFlicButtonStatus, ILogicalDeviceCapability>)this).DeviceStatus.LowBatteryAlertCount));
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("State", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("Action", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsHeldDown", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("LastStateChangeTimeSpan", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("BatteryChargePercent", true);
		}

		public void UpdateAlert(string alertName, bool isActive, Nullable<int> count)
		{
			//IL_002f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0035: Unknown result type (might be due to invalid IL or missing references)
			//IL_0036: Unknown result type (might be due to invalid IL or missing references)
			//IL_0040: Expected O, but got Unknown
			//IL_001d: Unknown result type (might be due to invalid IL or missing references)
			<>c__DisplayClass22_0 CS$<>8__locals5 = new <>c__DisplayClass22_0();
			CS$<>8__locals5.<>4__this = this;
			if (alertName == "LowBatteryAlert")
			{
				base.UpdateAlertDefaultImpl(alertName, isActive, count, _alertDict);
				return;
			}
			CS$<>8__locals5.newAlert = new LogicalDeviceAlert(alertName, isActive, default(Nullable<int>));
			((LogicalDevice<ILogicalDeviceCapability>)(object)this).PerformLogicalDeviceExAction<ILogicalDeviceExAlertChanged>((Action<ILogicalDeviceExAlertChanged>)delegate(ILogicalDeviceExAlertChanged logicalDeviceEx)
			{
				logicalDeviceEx.LogicalDeviceAlertChanged((ILogicalDevice)(object)CS$<>8__locals5.<>4__this, (ILogicalDeviceAlert)(object)CS$<>8__locals5.newAlert, (ILogicalDeviceAlert)(object)CS$<>8__locals5.newAlert);
			});
		}

		public void UpdateAlert(byte alertId, byte rawData)
		{
			TaggedLog.Information("LogicalDeviceFlicButton", "UpdateAlert(byte, byte) is not supported for this device", Array.Empty<object>());
		}
	}
	internal class LogicalDeviceFlicButtonFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid || DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 60)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceFlicButton(logicalDeviceId, service);
		}
	}
	public class LogicalDeviceFlicButtonSim : LogicalDeviceFlicButton, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SimulatorAsync>d__18 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceFlicButtonSim <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_00cf: Expected O, but got Unknown
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				//IL_0069: Unknown result type (might be due to invalid IL or missing references)
				//IL_0070: Unknown result type (might be due to invalid IL or missing references)
				//IL_0017: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_004a: Unknown result type (might be due to invalid IL or missing references)
				//IL_004b: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceFlicButtonSim logicalDeviceFlicButtonSim = <>4__this;
				try
				{
					if (num != 0)
					{
						goto IL_00bc;
					}
					TaskAwaiter<bool> val = <>u__1;
					<>u__1 = default(TaskAwaiter<bool>);
					num = (<>1__state = -1);
					goto IL_007f;
					IL_007f:
					val.GetResult();
					logicalDeviceFlicButtonSim.UpdateButtonState(logicalDeviceFlicButtonSim._simStatus);
					logicalDeviceFlicButtonSim.UpdateBatteryChargePercentage(logicalDeviceFlicButtonSim._simStatus);
					((LogicalDevice<LogicalDeviceFlicButtonStatus, ILogicalDeviceCapability>)logicalDeviceFlicButtonSim).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceFlicButtonSim._simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceFlicButtonSim._simStatus).Size);
					goto IL_00bc;
					IL_00bc:
					while (!((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
					{
						if ((int)((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceFlicButtonSim).ActiveConnection == 0)
						{
							continue;
						}
						val = TaskExtension.TryDelay(2000, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SimulatorAsync>d__18>(ref val, ref this);
							return;
						}
						goto IL_007f;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private const int TickIntervalMs = 2000;

		private const int StatusLength = 5;

		private const int ButtonStateChangeIntervalMs = 60000;

		private const int BatteryPercentHighLimit = 95;

		private const int BatteryPercentLowLimit = 5;

		private readonly LogicalDeviceFlicButtonStatus _simStatus = new LogicalDeviceFlicButtonStatus();

		private readonly BackgroundOperation _simulator;

		private readonly byte[] _defaultStatusData = (byte[])(object)new Byte[8]
		{
			(Byte)128,
			default(Byte),
			default(Byte),
			(Byte)90,
			default(Byte),
			default(Byte),
			default(Byte),
			default(Byte)
		};

		private DateTime _lastButtonStateChangedTime = DateTime.MinValue;

		private bool _isBatteryCharging;

		private bool _isOnline = true;

		private const uint DelayStatusChangedLogMessageThrottleTimeMs = 60000u;

		private readonly Stopwatch _delayStatusChangedLogMessageThrottleTimer = Stopwatch.StartNew();

		public override LogicalDeviceActiveConnection ActiveConnection
		{
			get
			{
				if (IsOnline)
				{
					return (LogicalDeviceActiveConnection)1;
				}
				return (LogicalDeviceActiveConnection)0;
			}
		}

		public virtual bool IsOnline
		{
			get
			{
				return _isOnline;
			}
			protected set
			{
				if (((CommonNotifyPropertyChanged)this).SetBackingField<bool>(ref _isOnline, value, "IsOnline", Array.Empty<string>()))
				{
					((LogicalDevice<ILogicalDeviceCapability>)(object)this).UpdateDeviceOnline(value);
				}
			}
		}

		public LogicalDeviceFlicButtonSim(LogicalDeviceId deviceId, ILogicalDeviceService deviceService)
			: base((ILogicalDeviceId)(object)deviceId, deviceService)
		{
			//IL_0025: Unknown result type (might be due to invalid IL or missing references)
			//IL_002a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0083: Unknown result type (might be due to invalid IL or missing references)
			//IL_008d: Expected O, but got Unknown
			//IL_0088: Unknown result type (might be due to invalid IL or missing references)
			//IL_0092: Expected O, but got Unknown
			((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Update(_defaultStatusData, 5, false);
			((LogicalDevice<LogicalDeviceFlicButtonStatus, ILogicalDeviceCapability>)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Size);
			_simulator = new BackgroundOperation(new BackgroundOperationFunc(SimulatorAsync));
			_simulator.Start();
		}

		public override void UpdateDeviceOnline(bool online)
		{
			IsOnline = online;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task SimulatorAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SimulatorAsync>d__18 <SimulatorAsync>d__ = default(<SimulatorAsync>d__18);
			<SimulatorAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SimulatorAsync>d__.<>4__this = this;
			<SimulatorAsync>d__.cancellationToken = cancellationToken;
			<SimulatorAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Start<<SimulatorAsync>d__18>(ref <SimulatorAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Task;
		}

		private void UpdateButtonState(LogicalDeviceFlicButtonStatus simStatus)
		{
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0014: Unknown result type (might be due to invalid IL or missing references)
			//IL_0072: Unknown result type (might be due to invalid IL or missing references)
			//IL_0078: Unknown result type (might be due to invalid IL or missing references)
			//IL_007d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0021: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0065: Unknown result type (might be due to invalid IL or missing references)
			//IL_0043: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a8: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ad: Unknown result type (might be due to invalid IL or missing references)
			//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
			if (((DateTime)(ref _lastButtonStateChangedTime)).AddMilliseconds(60000.0) < DateTime.Now)
			{
				_lastButtonStateChangedTime = DateTime.Now;
				if (simStatus.State == FlicButtonState.Up)
				{
					simStatus.SetState(FlicButtonState.Down);
					simStatus.SetIsHeldDown(isHeldDown: true);
					simStatus.SetFlicButtonStateChangedTimeSpan(TimeSpan.Zero);
					simStatus.SetAction(FlicButtonAction.None);
				}
				else
				{
					simStatus.SetState(FlicButtonState.Up);
					simStatus.SetIsHeldDown(isHeldDown: false);
					simStatus.SetFlicButtonStateChangedTimeSpan(TimeSpan.Zero);
				}
			}
			else
			{
				simStatus.SetFlicButtonStateChangedTimeSpan(DateTime.Now - _lastButtonStateChangedTime);
			}
			if (simStatus.Action != FlicButtonAction.SingleTap && simStatus.State == FlicButtonState.Up && ((DateTime)(ref _lastButtonStateChangedTime)).AddMilliseconds(30000.0) < DateTime.Now)
			{
				simStatus.SetAction(FlicButtonAction.SingleTap);
				simStatus.SetFlicButtonStateChangedTimeSpan(TimeSpan.Zero);
			}
		}

		private void UpdateBatteryChargePercentage(LogicalDeviceFlicButtonStatus simStatus)
		{
			int batteryChargePercent = simStatus.BatteryChargePercent;
			batteryChargePercent = (_isBatteryCharging ? batteryChargePercent++ : batteryChargePercent--);
			if (batteryChargePercent < 5)
			{
				_isBatteryCharging = true;
			}
			else if (batteryChargePercent > 95)
			{
				_isBatteryCharging = false;
			}
			simStatus.SetBatteryChargeLevel(batteryChargePercent);
			if (simStatus.BatteryChargePercent <= 25)
			{
				if (!simStatus.IsBatteryLow)
				{
					simStatus.SetLowBatteryAlert(active: true, (byte)(simStatus.LowBatteryAlertCount + 1));
				}
				else
				{
					simStatus.SetLowBatteryAlert(active: true, (byte)simStatus.LowBatteryAlertCount);
				}
			}
			else
			{
				simStatus.SetLowBatteryAlert(active: false, (byte)simStatus.LowBatteryAlertCount);
			}
		}

		protected override void DebugUpdateDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, uint dataLength, string optionalText = "")
		{
			if (_delayStatusChangedLogMessageThrottleTimer.ElapsedMilliseconds >= 60000)
			{
				((LogicalDevice<LogicalDeviceFlicButtonStatus, ILogicalDeviceCapability>)this).DebugUpdateDeviceStatusChanged(oldStatusData, statusData, dataLength, String.Format("Skipped debug messages over {0}ms", (object)(UInt32)60000));
				_delayStatusChangedLogMessageThrottleTimer.Restart();
			}
		}

		public override void Dispose(bool disposing)
		{
			((LogicalDevice<LogicalDeviceFlicButtonStatus, ILogicalDeviceCapability>)this).Dispose(disposing);
			_simulator.Stop();
		}
	}
	public class LogicalDeviceFlicButtonStatus : LogicalDeviceStatusPacketMutable
	{
		public const int MinimumStatusPacketSize = 5;

		private const byte AlertActiveBitmask = 128;

		private const byte AlertCountBitmask = 127;

		private const byte FlicButtonStateBitmask = 192;

		private const byte ActionBitmask = 24;

		private const byte HeldDownBitmask = 32;

		private const int HeldDownBitIndex = 5;

		private static readonly BitPositionValue ButtonActionBitPosition = new BitPositionValue(24u, 0, 1);

		private static readonly BitPositionValue ButtonStateBitPosition = new BitPositionValue(192u, 0, 1);

		private const int FlicButtonStateIndex = 0;

		private const int FlicButtonStateChangedTimeStampIndex = 1;

		private const int BatteryChargeLevelIndex = 3;

		private const int BatteryLowAlertIndex = 4;

		public FlicButtonAction Action => (FlicButtonAction)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(ButtonActionBitPosition);

		public FlicButtonState State => (FlicButtonState)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(ButtonStateBitPosition);

		public bool IsHeldDown => (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0] & 0x20) == 32;

		public TimeSpan FlicButtonStateChangedTimeSpan => TimeSpan.FromSeconds((double)(int)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetUInt16(1u));

		public int BatteryChargePercent => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3];

		public bool IsBatteryLow => (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[4] & 0x80) == 128;

		public int LowBatteryAlertCount => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[4] & 0x7F;

		public LogicalDeviceFlicButtonStatus()
			: base(5u)
		{
		}

		public void SetAction(FlicButtonAction action)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)action, ButtonActionBitPosition);
		}

		public void SetState(FlicButtonState state)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)state, ButtonStateBitPosition);
		}

		public void SetIsHeldDown(bool isHeldDown)
		{
			if (isHeldDown != IsHeldDown)
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).ToggleBit(0, 5);
			}
		}

		public void SetFlicButtonStateChangedTimeSpan(TimeSpan time)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt16((ushort)(byte)((TimeSpan)(ref time)).TotalSeconds, 1);
		}

		public void SetBatteryChargeLevel(int percent)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3] = (byte)MathCommon.Clamp(percent, 0, 100);
		}

		public void SetLowBatteryAlert(bool active, byte count)
		{
			byte b = (byte)(count & 0x7F);
			if (active)
			{
				b |= 0x80;
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b, 4);
		}

		public LogicalDeviceFlicButtonStatus(LogicalDeviceFlicButtonStatus originalStatus)
		{
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalStatus).Data;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(data, data.Length, false);
		}
	}
}
namespace OneControl.Devices.Fan
{
	public interface IFan : ISwitchableDevice, ILogicalDeviceSwitchableReadonly
	{
		bool IsRainDetected { get; }

		VentCoverCapability VentCoverSupported { get; }

		int CurrentFanSpeed { get; }

		FanDirection CurrentFanDirection { get; }

		VentCoverPosition CurrentVentCoverPosition { get; }

		Task<CommandResult> SetFanSpeedAsync(int fanSpeed, FanDirection direction = FanDirection.Forward);

		Task<CommandResult> OpenVentAsync();

		Task<CommandResult> CloseVentAsync();

		Task<CommandResult> SetVentPositionAsync(VentCoverPosition ventPosition);
	}
	public interface ILogicalDeviceFan : IFan, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
	}
	public class LogicalDeviceFan : LogicalDevice<LogicalDeviceFanStatus, ILogicalDeviceFanCapability>, ILogicalDeviceFan, IFan, ISwitchableDevice, ILogicalDeviceSwitchableReadonly, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IDevicesActivation
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ActivateSession>d__27 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceFan <>4__this;

			public CancellationToken cancelToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_007e: Expected O, but got Unknown
				//IL_00af: Expected O, but got Unknown
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0026: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceFan logicalDeviceFan = <>4__this;
				try
				{
					try
					{
						TaskAwaiter val;
						if (num != 0)
						{
							val = logicalDeviceFan.IdsCanCommandRunner.CommandActivateSession(cancelToken, true).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <ActivateSession>d__27>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val)).GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Error("LogicalDeviceFan", String.Format("Unable to ActiveSession for {0} with error ${1}\n{2}", (object)((LogicalDevice<ILogicalDeviceFanCapability>)(object)logicalDeviceFan).LogicalId, (object)ex2.Message, (object)ex2.StackTrace), Array.Empty<object>());
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <CloseVentAsync>d__43 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceFan <>4__this;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_006f: Expected O, but got Unknown
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0054: Unknown result type (might be due to invalid IL or missing references)
				//IL_0018: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_0094: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceFan logicalDeviceFan = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceFan.SetVentPositionAsync(VentCoverPosition.Close).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <CloseVentAsync>d__43>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <OpenVentAsync>d__42 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceFan <>4__this;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0070: Expected O, but got Unknown
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_004e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_001e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0066: Unknown result type (might be due to invalid IL or missing references)
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_0033: Unknown result type (might be due to invalid IL or missing references)
				//IL_0095: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceFan logicalDeviceFan = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceFan.SetVentPositionAsync(VentCoverPosition.Open).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <OpenVentAsync>d__42>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommand>d__22 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceFan <>4__this;

			public CancellationToken callerCancelToken;

			public LogicalDeviceFanCommand command;

			private CancellationTokenSource <cancelSource>5__2;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0141: Expected O, but got Unknown
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0102: Unknown result type (might be due to invalid IL or missing references)
				//IL_0107: Unknown result type (might be due to invalid IL or missing references)
				//IL_010e: Unknown result type (might be due to invalid IL or missing references)
				//IL_002e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0166: Unknown result type (might be due to invalid IL or missing references)
				//IL_011f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0124: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0090: Unknown result type (might be due to invalid IL or missing references)
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_005c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00eb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceFan logicalDeviceFan = <>4__this;
				CommandResult result;
				try
				{
					if (num == 0)
					{
						goto IL_007f;
					}
					if (!logicalDeviceFan.IdsCanCommandRunner.CommandSessionActivated)
					{
						result = (CommandResult)8;
					}
					else if (logicalDeviceFan._commandCancelSource == null)
					{
						result = (CommandResult)1;
					}
					else
					{
						if (!((CommonDisposableNotifyPropertyChanged)logicalDeviceFan).IsDisposed)
						{
							<cancelSource>5__2 = CancellationTokenSource.CreateLinkedTokenSource(callerCancelToken, logicalDeviceFan._commandCancelSource.Token);
							goto IL_007f;
						}
						TaggedLog.Debug("LogicalDeviceFan", String.Concat("Unable to send command to disposed LogicalDevice ", ((LogicalDevice<ILogicalDeviceFanCapability>)(object)logicalDeviceFan).DeviceName), Array.Empty<object>());
						result = (CommandResult)7;
					}
					goto end_IL_000e;
					IL_007f:
					try
					{
						TaskAwaiter<CommandResult> val;
						if (num == 0)
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<CommandResult>);
							num = (<>1__state = -1);
							goto IL_011d;
						}
						if (!<cancelSource>5__2.IsCancellationRequested)
						{
							val = logicalDeviceFan.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)(object)command, <cancelSource>5__2.Token, (Func<ILogicalDevice, CommandControl>)((ILogicalDevice logicalDevice) => (CommandControl)0), (CommandSendOption)1).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommand>d__22>(ref val, ref this);
								return;
							}
							goto IL_011d;
						}
						result = (CommandResult)1;
						goto end_IL_007f;
						IL_011d:
						result = val.GetResult();
						end_IL_007f:;
					}
					finally
					{
						if (num < 0 && <cancelSource>5__2 != null)
						{
							((IDisposable)<cancelSource>5__2).Dispose();
						}
					}
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SetFanSpeedAsync>d__41 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceFan <>4__this;

			public FanDirection direction;

			public int fanSpeed;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0091: Expected O, but got Unknown
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0076: Unknown result type (might be due to invalid IL or missing references)
				//IL_002e: Unknown result type (might be due to invalid IL or missing references)
				//IL_003a: Unknown result type (might be due to invalid IL or missing references)
				//IL_003f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0087: Unknown result type (might be due to invalid IL or missing references)
				//IL_008c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0053: Unknown result type (might be due to invalid IL or missing references)
				//IL_0054: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b6: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceFan logicalDeviceFan = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceFan.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)(object)new LogicalDeviceFanCommand(direction, fanSpeed), logicalDeviceFan._commandCancelSource.Token, (Func<ILogicalDevice, CommandControl>)null, (CommandSendOption)0).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SetFanSpeedAsync>d__41>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SetVentPositionAsync>d__44 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceFan <>4__this;

			public VentCoverPosition ventPosition;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_00b3: Expected O, but got Unknown
				//IL_008c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0091: Unknown result type (might be due to invalid IL or missing references)
				//IL_0098: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ae: Unknown result type (might be due to invalid IL or missing references)
				//IL_0050: Unknown result type (might be due to invalid IL or missing references)
				//IL_005c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0075: Unknown result type (might be due to invalid IL or missing references)
				//IL_0076: Unknown result type (might be due to invalid IL or missing references)
				//IL_0033: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceFan logicalDeviceFan = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_00a7;
					}
					if (((LogicalDevice<ILogicalDeviceFanCapability>)(object)logicalDeviceFan).DeviceCapability.VentCoverCapability != VentCoverCapability.OpenClose || ventPosition == VentCoverPosition.Close || ventPosition == VentCoverPosition.Open)
					{
						val = logicalDeviceFan.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)(object)new LogicalDeviceFanCommand(ventPosition), logicalDeviceFan._commandCancelSource.Token, (Func<ILogicalDevice, CommandControl>)null, (CommandSendOption)0).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SetVentPositionAsync>d__44>(ref val, ref this);
							return;
						}
						goto IL_00a7;
					}
					result = (CommandResult)11;
					goto end_IL_000e;
					IL_00a7:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ToggleAsync>d__32 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceFan <>4__this;

			public bool restore;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_0084: Expected O, but got Unknown
				//IL_005d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0069: Unknown result type (might be due to invalid IL or missing references)
				//IL_002d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				//IL_0047: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceFan logicalDeviceFan = <>4__this;
				bool result;
				try
				{
					TaskAwaiter<bool> val;
					if (num != 0)
					{
						val = ((logicalDeviceFan.CurrentFanSpeed == 0) ? logicalDeviceFan.TurnOnAsync(restore) : logicalDeviceFan.TurnOffAsync()).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <ToggleAsync>d__32>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TurnOffAsync>d__34 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceFan <>4__this;

			private ConfiguredTaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0094: Expected O, but got Unknown
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0076: Unknown result type (might be due to invalid IL or missing references)
				//IL_0024: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_003a: Unknown result type (might be due to invalid IL or missing references)
				//IL_003f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0087: Unknown result type (might be due to invalid IL or missing references)
				//IL_008d: Invalid comparison between Unknown and I4
				//IL_0053: Unknown result type (might be due to invalid IL or missing references)
				//IL_0054: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceFan logicalDeviceFan = <>4__this;
				bool result;
				try
				{
					ConfiguredTaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceFan.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)(object)new LogicalDeviceFanCommand(FanDirection.Stopped, 0), logicalDeviceFan._commandCancelSource.Token, (Func<ILogicalDevice, CommandControl>)null, (CommandSendOption)0).ConfigureAwait(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<CommandResult>, <TurnOffAsync>d__34>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = (int)val.GetResult() == 0;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TurnOnAsync>d__33 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceFan <>4__this;

			public bool restore;

			private ConfiguredTaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_00a4: Expected O, but got Unknown
				//IL_007a: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0086: Unknown result type (might be due to invalid IL or missing references)
				//IL_0097: Unknown result type (might be due to invalid IL or missing references)
				//IL_009d: Invalid comparison between Unknown and I4
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				//IL_004a: Unknown result type (might be due to invalid IL or missing references)
				//IL_004f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0063: Unknown result type (might be due to invalid IL or missing references)
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceFan logicalDeviceFan = <>4__this;
				bool result;
				try
				{
					ConfiguredTaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						val = logicalDeviceFan.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)(object)(restore ? LogicalDeviceFanCommand.MakeRestoreCommand() : new LogicalDeviceFanCommand(FanDirection.Forward, 100)), logicalDeviceFan._commandCancelSource.Token, (Func<ILogicalDevice, CommandControl>)null, (CommandSendOption)0).ConfigureAwait(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<ConfiguredTaskAwaiter<CommandResult>, <TurnOnAsync>d__33>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(ConfiguredTaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = (int)val.GetResult() == 0;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceFan";

		protected ILogicalDeviceCommandRunnerIdsCan IdsCanCommandRunner;

		private CancellationTokenSource _commandCancelSource = new CancellationTokenSource();

		private LogicalDeviceId logicalDeviceId;

		private LogicalDeviceFanCapability logicalDeviceFanCapability;

		public virtual uint MSCommandTimeout => 5000u;

		public virtual uint MSSessionTimeout => 0u;

		public VentCoverCapability VentCoverSupported => ((LogicalDevice<ILogicalDeviceFanCapability>)(object)this).DeviceCapability.VentCoverCapability;

		public bool IsRainDetected => ((LogicalDevice<LogicalDeviceFanStatus, ILogicalDeviceFanCapability>)this).DeviceStatus.IsRainDetected;

		public int CurrentFanSpeed => ((LogicalDevice<LogicalDeviceFanStatus, ILogicalDeviceFanCapability>)this).DeviceStatus.FanSpeed;

		public FanDirection CurrentFanDirection => ((LogicalDevice<LogicalDeviceFanStatus, ILogicalDeviceFanCapability>)this).DeviceStatus.FanDirection;

		public VentCoverPosition CurrentVentCoverPosition => ((LogicalDevice<LogicalDeviceFanStatus, ILogicalDeviceFanCapability>)this).DeviceStatus.VentCoverPosition;

		public bool CommandSessionActivated => IdsCanCommandRunner.CommandSessionActivated;

		public bool On => CurrentFanSpeed != 0;

		public bool IsCurrentlyOn
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceFanStatus, ILogicalDeviceFanCapability>)this).DeviceStatus).HasData)
				{
					return ((LogicalDevice<LogicalDeviceFanStatus, ILogicalDeviceFanCapability>)this).DeviceStatus.FanSpeed != 0;
				}
				return false;
			}
		}

		public bool IsMasterSwitchControllable => false;

		public SwitchTransition SwitchInTransition => SwitchTransition.Unknown;

		public SwitchUsage UsedFor => SwitchUsage.Fan;

		public LogicalDeviceFan(ILogicalDeviceId logicalDeviceId, LogicalDeviceFanStatus status, ILogicalDeviceFanCapability deviceCapability, ILogicalDeviceService deviceService = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, status, deviceCapability, deviceService, isFunctionClassChangeable)
		{
		}//IL_0001: Unknown result type (might be due to invalid IL or missing references)
		//IL_000b: Expected O, but got Unknown


		public LogicalDeviceFan(ILogicalDeviceId logicalDeviceId, LogicalDeviceFanCapability logicalDeviceFanCapability, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceFanStatus(), (ILogicalDeviceFanCapability)logicalDeviceFanCapability, service, isFunctionClassChangeable)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_001d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0022: Unknown result type (might be due to invalid IL or missing references)
			//IL_002e: Expected O, but got Unknown
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			//IL_003a: Expected O, but got Unknown
			//IL_003f: Expected O, but got Unknown
			LogicalDeviceCommandRunnerIdsCan val = new LogicalDeviceCommandRunnerIdsCan((ILogicalDevice)(object)this);
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).CommandProcessingTime = MSCommandTimeout;
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).SessionKeepAliveTime = MSSessionTimeout;
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)val;
		}

		public override void OnDeviceStatusChanged()
		{
			base.OnDeviceStatusChanged();
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("IsRainDetected");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("CurrentFanDirection");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("CurrentFanSpeed");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("CurrentVentCoverPosition");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("On");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("IsCurrentlyOn");
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommand(LogicalDeviceFanCommand command, CancellationToken callerCancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<SendCommand>d__22 <SendCommand>d__ = default(<SendCommand>d__22);
			<SendCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommand>d__.<>4__this = this;
			<SendCommand>d__.command = command;
			<SendCommand>d__.callerCancelToken = callerCancelToken;
			<SendCommand>d__.<>1__state = -1;
			<SendCommand>d__.<>t__builder.Start<<SendCommand>d__22>(ref <SendCommand>d__);
			return <SendCommand>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task ActivateSession(CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ActivateSession>d__27 <ActivateSession>d__ = default(<ActivateSession>d__27);
			<ActivateSession>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<ActivateSession>d__.<>4__this = this;
			<ActivateSession>d__.cancelToken = cancelToken;
			<ActivateSession>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Start<<ActivateSession>d__27>(ref <ActivateSession>d__);
			return ((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Task;
		}

		public void DeactivateSession()
		{
			IdsCanCommandRunner.CommandDeactivateSession(true);
		}

		public override void Dispose(bool disposing)
		{
			CancellationTokenSource commandCancelSource = _commandCancelSource;
			if (commandCancelSource != null)
			{
				CancellationTokenSourceExtension.CancelAndDispose(commandCancelSource);
			}
			_commandCancelSource = null;
			ILogicalDeviceCommandRunnerIdsCan idsCanCommandRunner = IdsCanCommandRunner;
			if (idsCanCommandRunner != null)
			{
				((ICommonDisposable)idsCanCommandRunner).TryDispose();
			}
			base.Dispose(disposing);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> ToggleAsync(bool restore)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<ToggleAsync>d__32 <ToggleAsync>d__ = default(<ToggleAsync>d__32);
			<ToggleAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<ToggleAsync>d__.<>4__this = this;
			<ToggleAsync>d__.restore = restore;
			<ToggleAsync>d__.<>1__state = -1;
			<ToggleAsync>d__.<>t__builder.Start<<ToggleAsync>d__32>(ref <ToggleAsync>d__);
			return <ToggleAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TurnOnAsync(bool restore)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<TurnOnAsync>d__33 <TurnOnAsync>d__ = default(<TurnOnAsync>d__33);
			<TurnOnAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TurnOnAsync>d__.<>4__this = this;
			<TurnOnAsync>d__.restore = restore;
			<TurnOnAsync>d__.<>1__state = -1;
			<TurnOnAsync>d__.<>t__builder.Start<<TurnOnAsync>d__33>(ref <TurnOnAsync>d__);
			return <TurnOnAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TurnOffAsync()
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<TurnOffAsync>d__34 <TurnOffAsync>d__ = default(<TurnOffAsync>d__34);
			<TurnOffAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TurnOffAsync>d__.<>4__this = this;
			<TurnOffAsync>d__.<>1__state = -1;
			<TurnOffAsync>d__.<>t__builder.Start<<TurnOffAsync>d__34>(ref <TurnOffAsync>d__);
			return <TurnOffAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SetFanSpeedAsync(int fanSpeed, FanDirection direction = FanDirection.Forward)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SetFanSpeedAsync>d__41 <SetFanSpeedAsync>d__ = default(<SetFanSpeedAsync>d__41);
			<SetFanSpeedAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SetFanSpeedAsync>d__.<>4__this = this;
			<SetFanSpeedAsync>d__.fanSpeed = fanSpeed;
			<SetFanSpeedAsync>d__.direction = direction;
			<SetFanSpeedAsync>d__.<>1__state = -1;
			<SetFanSpeedAsync>d__.<>t__builder.Start<<SetFanSpeedAsync>d__41>(ref <SetFanSpeedAsync>d__);
			return <SetFanSpeedAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> OpenVentAsync()
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<OpenVentAsync>d__42 <OpenVentAsync>d__ = default(<OpenVentAsync>d__42);
			<OpenVentAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<OpenVentAsync>d__.<>4__this = this;
			<OpenVentAsync>d__.<>1__state = -1;
			<OpenVentAsync>d__.<>t__builder.Start<<OpenVentAsync>d__42>(ref <OpenVentAsync>d__);
			return <OpenVentAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> CloseVentAsync()
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<CloseVentAsync>d__43 <CloseVentAsync>d__ = default(<CloseVentAsync>d__43);
			<CloseVentAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<CloseVentAsync>d__.<>4__this = this;
			<CloseVentAsync>d__.<>1__state = -1;
			<CloseVentAsync>d__.<>t__builder.Start<<CloseVentAsync>d__43>(ref <CloseVentAsync>d__);
			return <CloseVentAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SetVentPositionAsync(VentCoverPosition ventPosition)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SetVentPositionAsync>d__44 <SetVentPositionAsync>d__ = default(<SetVentPositionAsync>d__44);
			<SetVentPositionAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SetVentPositionAsync>d__.<>4__this = this;
			<SetVentPositionAsync>d__.ventPosition = ventPosition;
			<SetVentPositionAsync>d__.<>1__state = -1;
			<SetVentPositionAsync>d__.<>t__builder.Start<<SetVentPositionAsync>d__44>(ref <SetVentPositionAsync>d__);
			return <SetVentPositionAsync>d__.<>t__builder.Task;
		}
	}
	[Flags]
	public enum VentCoverCapability : Enum
	{
		None = 0,
		OpenClose = 1,
		QuarterStep = 0x10,
		Reserved = 0x11
	}
	public enum VentCoverPosition : Enum
	{
		Close = 0,
		Quarter = 25,
		Half = 50,
		ThreeQuarter = 75,
		Open = 100
	}
	public interface ILogicalDeviceFanCapability : ILogicalDeviceCapability, INotifyPropertyChanged
	{
		VentCoverCapability VentCoverCapability { get; }
	}
	public class LogicalDeviceFanCapability : LogicalDeviceCapability, ILogicalDeviceFanCapability, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		private DEVICE_ID deviceId;

		public VentCoverCapability VentCoverCapability => (VentCoverCapability)base.RawValue;

		public LogicalDeviceFanCapability(VentCoverCapability capabilityFlags)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(new Nullable<byte>((byte)capabilityFlags));
		}

		public LogicalDeviceFanCapability(Nullable<byte> rawCapabilities)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(rawCapabilities);
		}

		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("VentCoverCapability");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}
	}
	public class LogicalDeviceFanCommand : LogicalDeviceCommandPacket
	{
		private const byte CommandFan = 0;

		private const byte CommandVentCover = 1;

		private const byte Restore = 2;

		private const int CommandPacketSize = 1;

		private int _fanSpeed;

		private VentCoverPosition _ventPosition;

		private FanDirection _fanDirection;

		public int FanSpeed => _fanSpeed;

		public VentCoverPosition VentPosition => _ventPosition;

		public FanDirection FanDirection => _fanDirection;

		public LogicalDeviceFanCommand(VentCoverPosition ventCoverPosition)
			: base((byte)1, MakeDataForCommand(ventCoverPosition), 200)
		{
		}

		public LogicalDeviceFanCommand(FanDirection fanDirection, int speed)
			: base((byte)0, MakeDataForCommand(speed, fanDirection), 200)
		{
		}

		public LogicalDeviceFanCommand(byte commandByte, byte[] data, int commandResponseTimeMs = 200)
			: base(commandByte, data, commandResponseTimeMs)
		{
		}

		private LogicalDeviceFanCommand(byte commandByte)
			: base(commandByte, (byte[])(object)new Byte[1], 200)
		{
		}

		public static LogicalDeviceFanCommand MakeRestoreCommand()
		{
			return new LogicalDeviceFanCommand(2);
		}

		private static byte[] MakeDataForCommand(VentCoverPosition ventCoverPosition)
		{
			return (byte[])(object)new Byte[1] { (byte)ventCoverPosition };
		}

		private static byte[] MakeDataForCommand(int speed, FanDirection direction)
		{
			Byte[] array = new Byte[1];
			speed = Math.Abs(speed);
			if (speed > 100)
			{
				speed = 100;
			}
			array[0] = (byte)(speed * (int)direction);
			return (byte[])(object)array;
		}
	}
	public class LogicalDeviceFanFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 37)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceFan(logicalDeviceId, new LogicalDeviceFanCapability(rawCapability), service);
		}
	}
	public class FanCommandRunnerSim : LogicalDeviceCommandRunnerIdsCanSim<LogicalDeviceFanStatus>
	{
		public FanCommandRunnerSim(LogicalDeviceFanStatus status)
			: base(status)
		{
		}

		public override Task<CommandResult> SendCommandAsync(byte commandByte, byte[] data, uint dataSize, int responseTimeMs, CancellationToken cancelToken, Func<ILogicalDevice, CommandControl> cmdControl = null, CommandSendOption options = (CommandSendOption)0)
		{
			LogicalDeviceFanCommand logicalDeviceFanCommand = new LogicalDeviceFanCommand(commandByte, data);
			switch (commandByte)
			{
			case 1:
				base.SimDeviceStatus.SetFanSpeedAndDirection((uint)logicalDeviceFanCommand.FanSpeed, logicalDeviceFanCommand.FanDirection);
				break;
			case 2:
				base.SimDeviceStatus.SetVentCover(logicalDeviceFanCommand.VentPosition);
				break;
			default:
				return Task.FromResult<CommandResult>((CommandResult)7);
			}
			return Task.FromResult<CommandResult>((CommandResult)0);
		}
	}
	public class LogicalDeviceFanSim : LogicalDeviceFan, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <<-ctor>b__6_0>d : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceFanSim <>4__this;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_00a1: Expected O, but got Unknown
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0070: Unknown result type (might be due to invalid IL or missing references)
				//IL_0077: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				//IL_0054: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceFanSim logicalDeviceFanSim = <>4__this;
				try
				{
					if (num != 0)
					{
						goto IL_008e;
					}
					TaskAwaiter<bool> val = <>u__1;
					<>u__1 = default(TaskAwaiter<bool>);
					num = (<>1__state = -1);
					goto IL_0086;
					IL_0086:
					val.GetResult();
					goto IL_008e;
					IL_008e:
					if (!logicalDeviceFanSim._fanSimTaskCancelSource.IsCancellationRequested)
					{
						((LogicalDevice<LogicalDeviceFanStatus, ILogicalDeviceFanCapability>)logicalDeviceFanSim).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceFanSim._fanStatus).Data, 1u);
						val = TaskExtension.TryDelay(250, logicalDeviceFanSim._fanSimTaskCancelSource.Token).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<-ctor>b__6_0>d>(ref val, ref this);
							return;
						}
						goto IL_0086;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private CancellationTokenSource _fanSimTaskCancelSource = new CancellationTokenSource();

		private LogicalDeviceFanStatus _fanStatus = new LogicalDeviceFanStatus();

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public override bool ActiveSession => IdsCanCommandRunner.CommandSessionActivated;

		public LogicalDeviceFanSim(ILogicalDeviceId logicalDeviceId, LogicalDeviceFanStatus fanStatus, ILogicalDeviceService deviceService = null, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, fanStatus, new LogicalDeviceFanCapability(VentCoverCapability.QuarterStep), deviceService, isFunctionClassChangeable)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_0052: Unknown result type (might be due to invalid IL or missing references)
			_fanStatus = fanStatus;
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)(object)new FanCommandRunnerSim(_fanStatus);
			Task.Run((Func<Task>)([AsyncStateMachine(/*Could not decode attribute arguments.*/)] [CompilerGenerated] () =>
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<-ctor>b__6_0>d <<-ctor>b__6_0>d = default(<<-ctor>b__6_0>d);
				<<-ctor>b__6_0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<-ctor>b__6_0>d.<>4__this = this;
				<<-ctor>b__6_0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<-ctor>b__6_0>d.<>t__builder)).Start<<<-ctor>b__6_0>d>(ref <<-ctor>b__6_0>d);
				return ((AsyncTaskMethodBuilder)(ref <<-ctor>b__6_0>d.<>t__builder)).Task;
			}), _fanSimTaskCancelSource.Token);
		}

		public override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
			CancellationTokenSource fanSimTaskCancelSource = _fanSimTaskCancelSource;
			if (fanSimTaskCancelSource != null)
			{
				CancellationTokenSourceExtension.TryCancelAndDispose(fanSimTaskCancelSource);
			}
			_fanSimTaskCancelSource = null;
		}
	}
	public enum FanDirection : Enum
	{
		Stopped = 0,
		Forward = 1,
		Backward = -1
	}
	public class LogicalDeviceFanStatus : LogicalDeviceStatusPacketMutable
	{
		public const int MinimumStatusPacketSize = 1;

		public const uint StatusByteIndex = 0u;

		public const uint FanSpeedIndex = 1u;

		public const uint VentCoverPositionIndex = 2u;

		public bool IsRainDetected => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0] == 0;

		public int FanSpeed => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[1];

		public FanDirection FanDirection
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[1] > 0)
				{
					return FanDirection.Forward;
				}
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[1] < 0)
				{
					return FanDirection.Backward;
				}
				return FanDirection.Stopped;
			}
		}

		public VentCoverPosition VentCoverPosition => (VentCoverPosition)((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[2];

		public LogicalDeviceFanStatus()
			: base(1u)
		{
		}

		internal void SetFanSpeedAndDirection(uint fanSpeed, FanDirection fanDirection)
		{
			if (fanSpeed > 100)
			{
				fanSpeed = 100u;
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[1] = (byte)((ulong)fanSpeed * (ulong)fanDirection);
		}

		internal void SetVentCover(VentCoverPosition ventPosition)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[2] = (byte)ventPosition;
		}
	}
}
namespace OneControl.Devices.EchoBrakeControl
{
	public class EchoBrakeControlException : LogicalDeviceException
	{
		public EchoBrakeControlException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}
	}
	public class EchoBrakeControlUnableToStopManualOperationException : EchoBrakeControlException
	{
		public EchoBrakeControlUnableToStopManualOperationException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}
	}
	public class EchoBrakeControlNoDeviceSourceFoundException : EchoBrakeControlException
	{
		public EchoBrakeControlNoDeviceSourceFoundException(ILogicalDevice logicalDevice, Exception? innerException = null)
			: base(String.Format("Could not find a device source for Logical Device: {0}", (object)logicalDevice), innerException)
		{
		}
	}
	public class EchoBrakeControlArgumentOutOfRangeException : ArgumentOutOfRangeException
	{
		public EchoBrakeControlArgumentOutOfRangeException(string paramName, object value, string message)
			: base(paramName, value, message)
		{
		}
	}
	public enum ManualOverrideState : Enum
	{
		Disable = 0,
		Enable = 1,
		Continue = 255
	}
	[DefaultValue(EchoBrakeControlProfile.Unknown)]
	public enum EchoBrakeControlProfile : Enum
	{
		Profile1 = 0,
		Profile2 = 1,
		Profile3 = 2,
		Profile4 = 3,
		Profile5 = 4,
		Unknown = 255
	}
	[DefaultValue(EchoBrakeControlSensitivity.Unknown)]
	public enum EchoBrakeControlSensitivity : Enum
	{
		SensitivityLevel1 = 0,
		SensitivityLevel2 = 1,
		SensitivityLevel3 = 2,
		SensitivityLevel4 = 3,
		SensitivityLevel5 = 4,
		SensitivityLevel6 = 5,
		SensitivityLevel7 = 6,
		SensitivityLevel8 = 7,
		SensitivityLevel9 = 8,
		Unknown = 255
	}
	public enum EchoBrakeControlOperationAck : Enum
	{
		Stop,
		Continue
	}
	public readonly struct EchoBrakeControlDiagnosticData : ValueType
	{
		[field: CompilerGenerated]
		public bool OutputOverload
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public bool TrailerConnected
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public float BatteryVoltage
		{
			[CompilerGenerated]
			get;
		}

		public EchoBrakeControlDiagnosticData(bool outputOverload, bool trailerConnected, float batteryVoltage)
		{
			OutputOverload = outputOverload;
			TrailerConnected = trailerConnected;
			BatteryVoltage = batteryVoltage;
		}
	}
	public interface IEchoBrakeControl : IEchoBrakeControlCommands, IAccessoryDevice
	{
		int BrakeOutput { get; }

		bool IsTrailerConnected { get; }

		bool IsOutputOverloaded { get; }

		int BatteryLevel { get; }

		void UpdateBrakeOutput(int brakeOutput);

		void UpdateTrailerConnection(bool isTrailerConnected);

		void UpdateOutputOverload(bool isOverloadDetected);

		void UpdateBatteryLevel(int batteryLevel);
	}
	public interface ILogicalDeviceEchoBrakeControl : IEchoBrakeControl, IEchoBrakeControlCommands, IAccessoryDevice, ILogicalDeviceAccessory, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
	}
	public interface IEchoBrakeControlCommands
	{
		Task<byte> GetMaxBrakingPowerAsync(EchoBrakeControlProfile profile, CancellationToken cancellationToken);

		Task<byte> SetMaxBrakingPowerAsync(EchoBrakeControlProfile profile, byte maxBrakingPower, CancellationToken cancellationToken);

		Task<EchoBrakeControlSensitivity> GetBrakePowerSensitivityAsync(EchoBrakeControlProfile profile, CancellationToken cancellationToken);

		Task SetBrakePowerSensitivityAsync(EchoBrakeControlProfile profile, EchoBrakeControlSensitivity sensitivity, CancellationToken cancellationToken);

		Task<EchoBrakeControlProfile> GetSelectedProfileAsync(CancellationToken cancellationToken);

		Task SetSelectedProfileAsync(EchoBrakeControlProfile profile, CancellationToken cancellationToken);

		[Obsolete("See PerformManualOverrideAsync")]
		Task SetManualOverrideAsync(byte outputDutyCycle, CancellationToken cancellationToken);

		Task SetManualOverrideAsync(ManualOverrideState manualOverrideState, CancellationToken cancellationToken);

		Task PerformOperationManualOverride(Func<EchoBrakeControlOperationAck> progressAck, CancellationToken cancellationToken);

		Task<string> GetProfileNameAsync(EchoBrakeControlProfile profile, CancellationToken cancellationToken);

		Task SetProfileNameAsync(EchoBrakeControlProfile profile, string name, CancellationToken cancellationToken);

		Task<bool> GetHazardModeOverrideSwitchStateAsync(CancellationToken cancellationToken);

		Task SetHazardModeOverrideSwitchStateAsync(bool state, CancellationToken cancellationToken);

		Task<string> GetProductNameAsync(CancellationToken cancellationToken);

		Task<string> GetModelNumberAsync(CancellationToken cancellationToken);

		Task<string> GetFirmwareVersionAsync(CancellationToken cancellationToken);

		Task<string> GetSerialNumberAsync(CancellationToken cancellationToken);

		Task<string> GetProductNicknameAsync(CancellationToken cancellationToken);

		Task SetProductNicknameAsync(string nickname, CancellationToken cancellationToken);

		System.Collections.Generic.IAsyncEnumerable<IEchoBrakeControlProfile> ReadProfilesAllAsync(IEchoBrakeControlProfilesMutable? mutableProfiles, CancellationToken cancellationToken);

		Task WriteProfilesAsync(IEnumerable<IEchoBrakeControlProfile> profiles, CancellationToken cancellationToken);
	}
	public interface IEchoBrakeControlCommandsWithLogicalDevice
	{
		Task<byte> GetMaxBrakingPowerAsync(ILogicalDevice logicalDevice, EchoBrakeControlProfile profile, CancellationToken cancellationToken);

		Task<byte> SetMaxBrakingPowerAsync(ILogicalDevice logicalDevice, EchoBrakeControlProfile profile, byte maxBrakingPower, CancellationToken cancellationToken);

		Task<EchoBrakeControlSensitivity> GetBrakePowerSensitivityAsync(ILogicalDevice logicalDevice, EchoBrakeControlProfile profile, CancellationToken cancellationToken);

		Task SetBrakePowerSensitivityAsync(ILogicalDevice logicalDevice, EchoBrakeControlProfile profile, EchoBrakeControlSensitivity sensitivity, CancellationToken cancellationToken);

		Task<EchoBrakeControlProfile> GetSelectedProfileAsync(ILogicalDevice logicalDevice, CancellationToken cancellationToken);

		Task SetSelectedProfileAsync(ILogicalDevice logicalDevice, EchoBrakeControlProfile profile, CancellationToken cancellationToken);

		[Obsolete("See PerformManualOverrideAsync")]
		Task SetManualOverrideAsync(ILogicalDevice logicalDevice, byte outputDutyCycle, CancellationToken cancellationToken);

		Task SetManualOverrideAsync(ILogicalDevice logicalDevice, ManualOverrideState manualOverrideState, CancellationToken cancellationToken);

		Task PerformOperationManualOverride(ILogicalDevice logicalDevice, Func<EchoBrakeControlOperationAck> progressAck, CancellationToken cancellationToken);

		Task<string> GetProfileNameAsync(ILogicalDevice logicalDevice, EchoBrakeControlProfile profile, CancellationToken cancellationToken);

		Task SetProfileNameAsync(ILogicalDevice logicalDevice, EchoBrakeControlProfile profile, string name, CancellationToken cancellationToken);

		Task<bool> GetHazardModeOverrideSwitchStateAsync(ILogicalDevice logicalDevice, CancellationToken cancellationToken);

		Task SetHazardModeOverrideSwitchStateAsync(ILogicalDevice logicalDevice, bool state, CancellationToken cancellationToken);

		Task<string> GetProductNameAsync(ILogicalDevice logicalDevice, CancellationToken cancellationToken);

		Task<string> GetModelNumberAsync(ILogicalDevice logicalDevice, CancellationToken cancellationToken);

		Task<string> GetFirmwareVersionAsync(ILogicalDevice logicalDevice, CancellationToken cancellationToken);

		Task<string> GetSerialNumberAsync(ILogicalDevice logicalDevice, CancellationToken cancellationToken);

		Task<string> GetProductNicknameAsync(ILogicalDevice logicalDevice, CancellationToken cancellationToken);

		Task SetProductNicknameAsync(ILogicalDevice logicalDevice, string nickname, CancellationToken cancellationToken);

		System.Collections.Generic.IAsyncEnumerable<IEchoBrakeControlProfile> ReadProfilesAllAsync(ILogicalDevice logicalDevice, IEchoBrakeControlProfilesMutable? mutableProfiles, CancellationToken cancellationToken);

		Task WriteProfilesAsync(ILogicalDevice logicalDevice, IEnumerable<IEchoBrakeControlProfile> profiles, CancellationToken cancellationToken);
	}
	public interface IEchoBrakeControlProfile
	{
		EchoBrakeControlProfile ProfileId { get; }

		string ProfileName { get; }

		EchoBrakeControlSensitivity ProfileSensitivity { get; }

		byte ProfileMaxBrakingPower { get; }
	}
	public interface IEchoBrakeControlProfilesMutable
	{
		IEchoBrakeControlProfile UpdateEchoBrakeControlProfile(EchoBrakeControlProfile id, string name, EchoBrakeControlSensitivity sensitivity, byte maxBrakingPower);
	}
	public record EchoBrakeControlProfileEntry : Object, IEchoBrakeControlProfile
	{
		[CompilerGenerated]
		protected virtual Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(EchoBrakeControlProfileEntry);
			}
		}

		public EchoBrakeControlProfile ProfileId
		{
			[CompilerGenerated]
			get;
		}

		public string ProfileName
		{
			[CompilerGenerated]
			get;
		}

		public EchoBrakeControlSensitivity ProfileSensitivity
		{
			[CompilerGenerated]
			get;
		}

		public byte ProfileMaxBrakingPower
		{
			[CompilerGenerated]
			get;
		}

		public EchoBrakeControlProfileEntry(EchoBrakeControlProfile profileId, string profileName, EchoBrakeControlSensitivity profileSensitivity, byte profileMaxBrakingPower)
		{
			ProfileId = profileId;
			ProfileName = profileName;
			ProfileSensitivity = profileSensitivity;
			ProfileMaxBrakingPower = profileMaxBrakingPower;
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("EchoBrakeControlProfileEntry");
			val.Append(" { ");
			if (PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected virtual bool PrintMembers(StringBuilder builder)
		{
			RuntimeHelpers.EnsureSufficientExecutionStack();
			builder.Append("ProfileId = ");
			builder.Append(((Object)ProfileId/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ProfileName = ");
			builder.Append((object)ProfileName);
			builder.Append(", ProfileSensitivity = ");
			builder.Append(((Object)ProfileSensitivity/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ProfileMaxBrakingPower = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref ProfileMaxBrakingPower)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return (((EqualityComparer<Type>.Default.GetHashCode(EqualityContract) * -1521134295 + EqualityComparer<EchoBrakeControlProfile>.Default.GetHashCode(ProfileId)) * -1521134295 + EqualityComparer<string>.Default.GetHashCode(ProfileName)) * -1521134295 + EqualityComparer<EchoBrakeControlSensitivity>.Default.GetHashCode(ProfileSensitivity)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(ProfileMaxBrakingPower);
		}

		[CompilerGenerated]
		public virtual bool Equals(EchoBrakeControlProfileEntry? other)
		{
			if ((object)this != other)
			{
				if ((object)other != null && EqualityContract == other.EqualityContract && EqualityComparer<EchoBrakeControlProfile>.Default.Equals(ProfileId, other.ProfileId) && EqualityComparer<string>.Default.Equals(ProfileName, other.ProfileName) && EqualityComparer<EchoBrakeControlSensitivity>.Default.Equals(ProfileSensitivity, other.ProfileSensitivity))
				{
					return EqualityComparer<byte>.Default.Equals(ProfileMaxBrakingPower, other.ProfileMaxBrakingPower);
				}
				return false;
			}
			return true;
		}

		[CompilerGenerated]
		protected EchoBrakeControlProfileEntry(EchoBrakeControlProfileEntry original)
		{
			ProfileId = original.ProfileId;
			ProfileName = original.ProfileName;
			ProfileSensitivity = original.ProfileSensitivity;
			ProfileMaxBrakingPower = original.ProfileMaxBrakingPower;
		}
	}
	public interface ILogicalDeviceSourceDirectEchoBrakeControl : ILogicalDeviceSourceDirectConnection, ILogicalDeviceSourceDirect, ILogicalDeviceSource, ILogicalDeviceSourceConnection, IEchoBrakeControlCommandsWithLogicalDevice
	{
	}
	public class LogicalDeviceEchoBrakeControl : LogicalDevice<ILogicalDeviceCapability>, ILogicalDeviceEchoBrakeControl, IEchoBrakeControl, IEchoBrakeControlCommands, IAccessoryDevice, ILogicalDeviceAccessory, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass58_0 : Object
		{
			public LogicalDeviceEchoBrakeControl <>4__this;

			public string alertName;

			public bool isActive;

			internal void <UpdateAlert>b__0(ILogicalDeviceExAlertChanged logicalDeviceEx)
			{
				//IL_0016: Unknown result type (might be due to invalid IL or missing references)
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Expected O, but got Unknown
				logicalDeviceEx.LogicalDeviceAlertChanged((ILogicalDevice)(object)<>4__this, (ILogicalDeviceAlert)null, (ILogicalDeviceAlert)new LogicalDeviceAlert(alertName, isActive, default(Nullable<int>)));
			}
		}

		private const string LogTag = "LogicalDeviceEchoBrakeControl";

		public const int MaxBrakingPowerLowLimit = 5;

		public const int MaxBrakingPowerHighLimit = 100;

		public const int OutputDutyCycleLowLimit = 0;

		public const int OutputDutyCycleHighLimit = 100;

		public const int ProfileNameMaximumLength = 30;

		public const int NicknameMaximumLength = 64;

		public const string ElectricalOverloadAlertKey = "ElectricalOverloadAlert";

		public const string TrailerDisconnectAlertKey = "TrailerDisconnectAlert";

		private const bool ElectricalOverloadNotificationValue = true;

		private const bool TrailerDisconnectNotificationValue = false;

		public bool AllowAutoOfflineLogicalDeviceRemoval => false;

		public bool IsAccessoryGatewaySupported => false;

		[field: CompilerGenerated]
		public int BrakeOutput
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			private set;
		}

		[field: CompilerGenerated]
		public bool IsTrailerConnected
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			private set;
		}

		[field: CompilerGenerated]
		public bool IsOutputOverloaded
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			private set;
		}

		[field: CompilerGenerated]
		public int BatteryLevel
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			private set;
		}

		public LogicalDeviceEchoBrakeControl(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService deviceService, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, (ILogicalDeviceCapability)new LogicalDeviceCapability(), deviceService, isFunctionClassChangeable)
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_000e: Expected O, but got Unknown


		protected virtual ILogicalDeviceSourceDirectEchoBrakeControl GetDefaultPrimaryDeviceSource()
		{
			return ((LogicalDevice<ILogicalDeviceCapability>)(object)this).DeviceService.DeviceSourceManager.GetPrimaryDeviceSource<ILogicalDeviceSourceDirectEchoBrakeControl>((ILogicalDevice)(object)this) ?? throw new EchoBrakeControlNoDeviceSourceFoundException((ILogicalDevice)(object)this);
		}

		public void UpdateBrakeOutput(int brakeOutput)
		{
			if (BrakeOutput != brakeOutput)
			{
				BrakeOutput = brakeOutput;
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("BrakeOutput", true);
			}
		}

		public void UpdateTrailerConnection(bool isTrailerConnected)
		{
			if (IsTrailerConnected != isTrailerConnected)
			{
				IsTrailerConnected = isTrailerConnected;
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsTrailerConnected", true);
				if (!isTrailerConnected)
				{
					UpdateAlert("TrailerDisconnectAlert", isActive: true);
				}
			}
		}

		public void UpdateOutputOverload(bool isOverloadDetected)
		{
			if (IsOutputOverloaded != isOverloadDetected)
			{
				IsOutputOverloaded = isOverloadDetected;
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsOutputOverloaded", true);
				if (isOverloadDetected)
				{
					UpdateAlert("ElectricalOverloadAlert", isActive: true);
				}
			}
		}

		public void UpdateBatteryLevel(int batteryLevel)
		{
			if (BatteryLevel != batteryLevel)
			{
				BatteryLevel = batteryLevel;
				((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("BatteryLevel", true);
			}
		}

		public Task<byte> GetMaxBrakingPowerAsync(EchoBrakeControlProfile profile, CancellationToken cancellationToken)
		{
			//IL_003d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceSourceDirectEchoBrakeControl defaultPrimaryDeviceSource = GetDefaultPrimaryDeviceSource();
			if (profile == EchoBrakeControlProfile.Unknown || !Enum.IsDefined(typeof(EchoBrakeControlProfile), (object)profile))
			{
				throw new EchoBrakeControlArgumentOutOfRangeException("profile", profile, "Profile is unknown or undefined.");
			}
			return defaultPrimaryDeviceSource.GetMaxBrakingPowerAsync((ILogicalDevice)(object)this, profile, cancellationToken);
		}

		public Task<byte> SetMaxBrakingPowerAsync(EchoBrakeControlProfile profile, byte maxBrakingPower, CancellationToken cancellationToken)
		{
			//IL_0078: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceSourceDirectEchoBrakeControl defaultPrimaryDeviceSource = GetDefaultPrimaryDeviceSource();
			if (profile == EchoBrakeControlProfile.Unknown || !Enum.IsDefined(typeof(EchoBrakeControlProfile), (object)profile))
			{
				throw new EchoBrakeControlArgumentOutOfRangeException("profile", profile, "Profile is unknown or undefined.");
			}
			if ((maxBrakingPower < 5 || maxBrakingPower > 100) ? true : false)
			{
				throw new EchoBrakeControlArgumentOutOfRangeException("maxBrakingPower", profile, String.Format("Max Breaking Power must be a value between {0} and {1}.", (object)5, (object)100));
			}
			return defaultPrimaryDeviceSource.SetMaxBrakingPowerAsync((ILogicalDevice)(object)this, profile, maxBrakingPower, cancellationToken);
		}

		public Task<EchoBrakeControlSensitivity> GetBrakePowerSensitivityAsync(EchoBrakeControlProfile profile, CancellationToken cancellationToken)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			return GetDefaultPrimaryDeviceSource().GetBrakePowerSensitivityAsync((ILogicalDevice)(object)this, profile, cancellationToken);
		}

		public Task SetBrakePowerSensitivityAsync(EchoBrakeControlProfile profile, EchoBrakeControlSensitivity sensitivity, CancellationToken cancellationToken)
		{
			//IL_0073: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceSourceDirectEchoBrakeControl defaultPrimaryDeviceSource = GetDefaultPrimaryDeviceSource();
			if (profile == EchoBrakeControlProfile.Unknown || !Enum.IsDefined(typeof(EchoBrakeControlProfile), (object)profile))
			{
				throw new EchoBrakeControlArgumentOutOfRangeException("profile", profile, "Profile is unknown or undefined.");
			}
			if (sensitivity == EchoBrakeControlSensitivity.Unknown || !Enum.IsDefined(typeof(EchoBrakeControlSensitivity), (object)sensitivity))
			{
				throw new EchoBrakeControlArgumentOutOfRangeException("sensitivity", sensitivity, "Sensitivity is unknown or undefined.");
			}
			return defaultPrimaryDeviceSource.SetBrakePowerSensitivityAsync((ILogicalDevice)(object)this, profile, sensitivity, cancellationToken);
		}

		public Task<EchoBrakeControlProfile> GetSelectedProfileAsync(CancellationToken cancellationToken)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			return GetDefaultPrimaryDeviceSource().GetSelectedProfileAsync((ILogicalDevice)(object)this, cancellationToken);
		}

		public Task SetSelectedProfileAsync(EchoBrakeControlProfile profile, CancellationToken cancellationToken)
		{
			//IL_003d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceSourceDirectEchoBrakeControl defaultPrimaryDeviceSource = GetDefaultPrimaryDeviceSource();
			if (profile == EchoBrakeControlProfile.Unknown || !Enum.IsDefined(typeof(EchoBrakeControlProfile), (object)profile))
			{
				throw new EchoBrakeControlArgumentOutOfRangeException("profile", profile, "Profile is unknown or undefined.");
			}
			return defaultPrimaryDeviceSource.SetSelectedProfileAsync((ILogicalDevice)(object)this, profile, cancellationToken);
		}

		public Task SetManualOverrideAsync(byte outputDutyCycle, CancellationToken cancellationToken)
		{
			//IL_0035: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceSourceDirectEchoBrakeControl defaultPrimaryDeviceSource = GetDefaultPrimaryDeviceSource();
			if (outputDutyCycle > 100)
			{
				throw new EchoBrakeControlArgumentOutOfRangeException("outputDutyCycle", outputDutyCycle, String.Format("Output Duty Cycle must be a value between {0} and {1}.", (object)0, (object)100));
			}
			return defaultPrimaryDeviceSource.SetManualOverrideAsync((ILogicalDevice)(object)this, outputDutyCycle, cancellationToken);
		}

		public Task SetManualOverrideAsync(ManualOverrideState manualOverrideState, CancellationToken cancellationToken)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			return GetDefaultPrimaryDeviceSource().SetManualOverrideAsync((ILogicalDevice)(object)this, manualOverrideState, cancellationToken);
		}

		public Task PerformOperationManualOverride(Func<EchoBrakeControlOperationAck> progressAck, CancellationToken cancellationToken)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			return GetDefaultPrimaryDeviceSource().PerformOperationManualOverride((ILogicalDevice)(object)this, progressAck, cancellationToken);
		}

		public Task<string> GetProfileNameAsync(EchoBrakeControlProfile profile, CancellationToken cancellationToken)
		{
			//IL_003d: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceSourceDirectEchoBrakeControl defaultPrimaryDeviceSource = GetDefaultPrimaryDeviceSource();
			if (profile == EchoBrakeControlProfile.Unknown || !Enum.IsDefined(typeof(EchoBrakeControlProfile), (object)profile))
			{
				throw new EchoBrakeControlArgumentOutOfRangeException("profile", profile, "Profile is unknown or undefined.");
			}
			return defaultPrimaryDeviceSource.GetProfileNameAsync((ILogicalDevice)(object)this, profile, cancellationToken);
		}

		public Task SetProfileNameAsync(EchoBrakeControlProfile profile, string name, CancellationToken cancellationToken)
		{
			//IL_0067: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceSourceDirectEchoBrakeControl defaultPrimaryDeviceSource = GetDefaultPrimaryDeviceSource();
			if (profile == EchoBrakeControlProfile.Unknown || !Enum.IsDefined(typeof(EchoBrakeControlProfile), (object)profile))
			{
				throw new EchoBrakeControlArgumentOutOfRangeException("profile", profile, "Profile is unknown or undefined.");
			}
			if (name == null || name.Length > 30)
			{
				throw new EchoBrakeControlArgumentOutOfRangeException("name", name, String.Format("Profile name is null or greater than maximum length of {0}.", (object)30));
			}
			return defaultPrimaryDeviceSource.SetSelectedProfileAsync((ILogicalDevice)(object)this, profile, cancellationToken);
		}

		public Task<bool> GetHazardModeOverrideSwitchStateAsync(CancellationToken cancellationToken)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			return GetDefaultPrimaryDeviceSource().GetHazardModeOverrideSwitchStateAsync((ILogicalDevice)(object)this, cancellationToken);
		}

		public Task SetHazardModeOverrideSwitchStateAsync(bool state, CancellationToken cancellationToken)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			return GetDefaultPrimaryDeviceSource().SetHazardModeOverrideSwitchStateAsync((ILogicalDevice)(object)this, state, cancellationToken);
		}

		public Task<string> GetProductNameAsync(CancellationToken cancellationToken)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			return GetDefaultPrimaryDeviceSource().GetProductNameAsync((ILogicalDevice)(object)this, cancellationToken);
		}

		public Task<string> GetModelNumberAsync(CancellationToken cancellationToken)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			return GetDefaultPrimaryDeviceSource().GetModelNumberAsync((ILogicalDevice)(object)this, cancellationToken);
		}

		public Task<string> GetFirmwareVersionAsync(CancellationToken cancellationToken)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			return GetDefaultPrimaryDeviceSource().GetFirmwareVersionAsync((ILogicalDevice)(object)this, cancellationToken);
		}

		public Task<string> GetSerialNumberAsync(CancellationToken cancellationToken)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			return GetDefaultPrimaryDeviceSource().GetSerialNumberAsync((ILogicalDevice)(object)this, cancellationToken);
		}

		public Task<string> GetProductNicknameAsync(CancellationToken cancellationToken)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			return GetDefaultPrimaryDeviceSource().GetProductNicknameAsync((ILogicalDevice)(object)this, cancellationToken);
		}

		public Task SetProductNicknameAsync(string nickname, CancellationToken cancellationToken)
		{
			//IL_003b: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceSourceDirectEchoBrakeControl defaultPrimaryDeviceSource = GetDefaultPrimaryDeviceSource();
			if (nickname == null || nickname.Length > 64)
			{
				throw new EchoBrakeControlArgumentOutOfRangeException("nickname", nickname ?? "", String.Format("Profile name is null or greater than maximum length of {0}.", (object)64));
			}
			return defaultPrimaryDeviceSource.SetProductNicknameAsync((ILogicalDevice)(object)this, nickname, cancellationToken);
		}

		public System.Collections.Generic.IAsyncEnumerable<IEchoBrakeControlProfile> ReadProfilesAllAsync(IEchoBrakeControlProfilesMutable? mutableProfiles, CancellationToken cancellationToken)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			return GetDefaultPrimaryDeviceSource().ReadProfilesAllAsync((ILogicalDevice)(object)this, mutableProfiles, cancellationToken);
		}

		public Task WriteProfilesAsync(IEnumerable<IEchoBrakeControlProfile> profiles, CancellationToken cancellationToken)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			return GetDefaultPrimaryDeviceSource().WriteProfilesAsync((ILogicalDevice)(object)this, profiles, cancellationToken);
		}

		public void UpdateAlert(string alertName, bool isActive)
		{
			<>c__DisplayClass58_0 CS$<>8__locals6 = new <>c__DisplayClass58_0();
			CS$<>8__locals6.<>4__this = this;
			CS$<>8__locals6.alertName = alertName;
			CS$<>8__locals6.isActive = isActive;
			base.PerformLogicalDeviceExAction<ILogicalDeviceExAlertChanged>((Action<ILogicalDeviceExAlertChanged>)delegate(ILogicalDeviceExAlertChanged logicalDeviceEx)
			{
				//IL_0016: Unknown result type (might be due to invalid IL or missing references)
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Expected O, but got Unknown
				logicalDeviceEx.LogicalDeviceAlertChanged((ILogicalDevice)(object)CS$<>8__locals6.<>4__this, (ILogicalDeviceAlert)null, (ILogicalDeviceAlert)new LogicalDeviceAlert(CS$<>8__locals6.alertName, CS$<>8__locals6.isActive, default(Nullable<int>)));
			});
		}
	}
	public class LogicalDeviceEchoBrakeControlFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 53)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceEchoBrakeControl(logicalDeviceId, service);
		}
	}
	public class LogicalDeviceEchoBrakeControlSim : LogicalDeviceEchoBrakeControl
	{
		private readonly LogicalDeviceEchoBrakeControlSimDeviceSourceDirect _simDeviceSourceDirect;

		protected override ILogicalDeviceSourceDirectEchoBrakeControl GetDefaultPrimaryDeviceSource()
		{
			return _simDeviceSourceDirect;
		}

		public LogicalDeviceEchoBrakeControlSim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService deviceService, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, deviceService, isFunctionClassChangeable)
		{
			_simDeviceSourceDirect = new LogicalDeviceEchoBrakeControlSimDeviceSourceDirect(this);
		}
	}
	public class LogicalDeviceEchoBrakeControlSimDeviceSourceDirect : CommonDisposable, ILogicalDeviceSourceDirectEchoBrakeControl, ILogicalDeviceSourceDirectConnection, ILogicalDeviceSourceDirect, ILogicalDeviceSource, ILogicalDeviceSourceConnection, IEchoBrakeControlCommandsWithLogicalDevice
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformOperationManualOverride>d__45 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public CancellationToken cancellationToken;

			public LogicalDeviceEchoBrakeControlSimDeviceSourceDirect <>4__this;

			public ILogicalDevice logicalDevice;

			public Func<EchoBrakeControlOperationAck> progressAck;

			private object <>7__wrap1;

			private int <>7__wrap2;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_01ff: Expected O, but got Unknown
				//IL_0278: Expected O, but got Unknown
				//IL_02d0: Expected O, but got Unknown
				//IL_0252: Unknown result type (might be due to invalid IL or missing references)
				//IL_0257: Unknown result type (might be due to invalid IL or missing references)
				//IL_025e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0215: Unknown result type (might be due to invalid IL or missing references)
				//IL_021f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0224: Unknown result type (might be due to invalid IL or missing references)
				//IL_008f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0094: Unknown result type (might be due to invalid IL or missing references)
				//IL_009b: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0100: Unknown result type (might be due to invalid IL or missing references)
				//IL_0165: Unknown result type (might be due to invalid IL or missing references)
				//IL_016a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0171: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ca: Unknown result type (might be due to invalid IL or missing references)
				//IL_01cf: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_005c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_0238: Unknown result type (might be due to invalid IL or missing references)
				//IL_0239: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c6: Unknown result type (might be due to invalid IL or missing references)
				//IL_018d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0197: Unknown result type (might be due to invalid IL or missing references)
				//IL_019c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0075: Unknown result type (might be due to invalid IL or missing references)
				//IL_0076: Unknown result type (might be due to invalid IL or missing references)
				//IL_00da: Unknown result type (might be due to invalid IL or missing references)
				//IL_00db: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b0: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0128: Unknown result type (might be due to invalid IL or missing references)
				//IL_0132: Unknown result type (might be due to invalid IL or missing references)
				//IL_0137: Unknown result type (might be due to invalid IL or missing references)
				//IL_014b: Unknown result type (might be due to invalid IL or missing references)
				//IL_014c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceEchoBrakeControlSimDeviceSourceDirect logicalDeviceEchoBrakeControlSimDeviceSourceDirect = <>4__this;
				try
				{
					if ((uint)num > 3u)
					{
						if (num == 4)
						{
							goto IL_0209;
						}
						((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
						<>7__wrap1 = null;
						<>7__wrap2 = 0;
					}
					TaskAwaiter val;
					object obj2;
					try
					{
						switch (num)
						{
						default:
							val = logicalDeviceEchoBrakeControlSimDeviceSourceDirect.SetManualOverrideAsync(logicalDevice, ManualOverrideState.Enable, cancellationToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <PerformOperationManualOverride>d__45>(ref val, ref this);
								return;
							}
							goto IL_00aa;
						case 0:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
							goto IL_00aa;
						case 1:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
							goto IL_010f;
						case 2:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
							goto IL_0180;
						case 3:
							{
								val = <>u__1;
								<>u__1 = default(TaskAwaiter);
								num = (<>1__state = -1);
								goto IL_01e5;
							}
							IL_0180:
							((TaskAwaiter)(ref val)).GetResult();
							val = Task.Delay(250, cancellationToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 3);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <PerformOperationManualOverride>d__45>(ref val, ref this);
								return;
							}
							goto IL_01e5;
							IL_00aa:
							((TaskAwaiter)(ref val)).GetResult();
							val = Task.Delay(250, cancellationToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <PerformOperationManualOverride>d__45>(ref val, ref this);
								return;
							}
							goto IL_010f;
							IL_01e5:
							((TaskAwaiter)(ref val)).GetResult();
							goto IL_01ec;
							IL_010f:
							((TaskAwaiter)(ref val)).GetResult();
							goto IL_01ec;
							IL_01ec:
							if (progressAck.Invoke() != EchoBrakeControlOperationAck.Stop)
							{
								val = logicalDeviceEchoBrakeControlSimDeviceSourceDirect.SetManualOverrideAsync(logicalDevice, ManualOverrideState.Continue, cancellationToken).GetAwaiter();
								if (!((TaskAwaiter)(ref val)).IsCompleted)
								{
									num = (<>1__state = 2);
									<>u__1 = val;
									((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <PerformOperationManualOverride>d__45>(ref val, ref this);
									return;
								}
								goto IL_0180;
							}
							break;
						}
					}
					catch (Object obj)
					{
						obj2 = (object)obj;
						<>7__wrap1 = obj2;
					}
					goto IL_0209;
					IL_0209:
					try
					{
						if (num != 4)
						{
							val = logicalDeviceEchoBrakeControlSimDeviceSourceDirect.SetManualOverrideAsync(logicalDevice, ManualOverrideState.Disable, CancellationToken.None).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 4);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <PerformOperationManualOverride>d__45>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val)).GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						string text = String.Concat("Unable to stop manual operation because ", ex2.Message);
						TaggedLog.Error("LogicalDeviceEchoBrakeControlSimDeviceSourceDirect", text, Array.Empty<object>());
						throw new EchoBrakeControlUnableToStopManualOperationException(text, ex2);
					}
					obj2 = <>7__wrap1;
					if (obj2 != null)
					{
						ExceptionDispatchInfo.Capture((Exception)(((obj2 is Exception) ? obj2 : null) ?? throw obj2)).Throw();
					}
					<>7__wrap1 = null;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[CompilerGenerated]
		private sealed class <ReadProfilesAllAsync>d__60 : Object, System.Collections.Generic.IAsyncEnumerable<IEchoBrakeControlProfile>, System.Collections.Generic.IAsyncEnumerator<IEchoBrakeControlProfile>, System.IAsyncDisposable, IValueTaskSource<bool>, IValueTaskSource, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncIteratorMethodBuilder <>t__builder;

			public ManualResetValueTaskSourceCore<bool> <>v__promiseOfValueOrEnd;

			private IEchoBrakeControlProfile <>2__current;

			private bool <>w__disposeMode;

			private int <>l__initialThreadId;

			private CancellationToken cancellationToken;

			public CancellationToken <>3__cancellationToken;

			public LogicalDeviceEchoBrakeControlSimDeviceSourceDirect <>4__this;

			private ILogicalDevice logicalDevice;

			public ILogicalDevice <>3__logicalDevice;

			private IEchoBrakeControlProfilesMutable mutableProfiles;

			public IEchoBrakeControlProfilesMutable <>3__mutableProfiles;

			private Enumerator<EchoBrakeControlProfile> <>7__wrap1;

			private EchoBrakeControlProfile <profileId>5__3;

			private string <name>5__4;

			private EchoBrakeControlSensitivity <sensitivity>5__5;

			private TaskAwaiter<string> <>u__1;

			private TaskAwaiter<EchoBrakeControlSensitivity> <>u__2;

			private TaskAwaiter<byte> <>u__3;

			IEchoBrakeControlProfile System.Collections.Generic.IAsyncEnumerator<IEchoBrakeControlProfile>.Current
			{
				[DebuggerHidden]
				get
				{
					return <>2__current;
				}
			}

			[DebuggerHidden]
			public <ReadProfilesAllAsync>d__60(int <>1__state)
			{
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				//IL_000c: Unknown result type (might be due to invalid IL or missing references)
				<>t__builder = AsyncIteratorMethodBuilder.Create();
				this.<>1__state = <>1__state;
				<>l__initialThreadId = Environment.CurrentManagedThreadId;
			}

			private void MoveNext()
			{
				//IL_02e8: Expected O, but got Unknown
				//IL_007d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0082: Unknown result type (might be due to invalid IL or missing references)
				//IL_011b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0120: Unknown result type (might be due to invalid IL or missing references)
				//IL_0128: Unknown result type (might be due to invalid IL or missing references)
				//IL_019e: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ab: Unknown result type (might be due to invalid IL or missing references)
				//IL_0223: Unknown result type (might be due to invalid IL or missing references)
				//IL_0228: Unknown result type (might be due to invalid IL or missing references)
				//IL_0230: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e7: Unknown result type (might be due to invalid IL or missing references)
				//IL_015b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0165: Unknown result type (might be due to invalid IL or missing references)
				//IL_016a: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e0: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ea: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ef: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fc: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fe: Unknown result type (might be due to invalid IL or missing references)
				//IL_017f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0181: Unknown result type (might be due to invalid IL or missing references)
				//IL_0204: Unknown result type (might be due to invalid IL or missing references)
				//IL_0206: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceEchoBrakeControlSimDeviceSourceDirect logicalDeviceEchoBrakeControlSimDeviceSourceDirect = <>4__this;
				try
				{
					switch (num)
					{
					default:
						if (!<>w__disposeMode)
						{
							num = (<>1__state = -1);
							((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
							List<EchoBrakeControlProfile> obj = new List<EchoBrakeControlProfile>();
							obj.Add(EchoBrakeControlProfile.Profile1);
							obj.Add(EchoBrakeControlProfile.Profile2);
							obj.Add(EchoBrakeControlProfile.Profile3);
							obj.Add(EchoBrakeControlProfile.Profile4);
							obj.Add(EchoBrakeControlProfile.Profile5);
							<>7__wrap1 = obj.GetEnumerator();
							break;
						}
						goto end_IL_000e;
					case -4:
					case 0:
					case 1:
					case 2:
						break;
					}
					try
					{
						TaskAwaiter<string> val;
						TaskAwaiter<EchoBrakeControlSensitivity> val2;
						TaskAwaiter<byte> val3;
						string result;
						EchoBrakeControlSensitivity result2;
						switch (num)
						{
						case 0:
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<string>);
							num = (<>1__state = -1);
							goto IL_0137;
						case 1:
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter<EchoBrakeControlSensitivity>);
							num = (<>1__state = -1);
							goto IL_01ba;
						case 2:
							val3 = <>u__3;
							<>u__3 = default(TaskAwaiter<byte>);
							num = (<>1__state = -1);
							break;
						case -4:
							num = (<>1__state = -1);
							if (!<>w__disposeMode)
							{
								<name>5__4 = null;
								goto default;
							}
							goto end_IL_0088;
						default:
							{
								if (<>7__wrap1.MoveNext())
								{
									<profileId>5__3 = <>7__wrap1.Current;
									<>2__current = null;
									val = logicalDeviceEchoBrakeControlSimDeviceSourceDirect.GetProfileNameAsync(logicalDevice, <profileId>5__3, cancellationToken).GetAwaiter();
									if (!val.IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val;
										<ReadProfilesAllAsync>d__60 <ReadProfilesAllAsync>d__ = this;
										((AsyncIteratorMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<string>, <ReadProfilesAllAsync>d__60>(ref val, ref <ReadProfilesAllAsync>d__);
										return;
									}
									goto IL_0137;
								}
								goto end_IL_0088;
							}
							IL_0137:
							result = val.GetResult();
							<name>5__4 = result;
							<>2__current = null;
							val2 = logicalDeviceEchoBrakeControlSimDeviceSourceDirect.GetBrakePowerSensitivityAsync(logicalDevice, <profileId>5__3, cancellationToken).GetAwaiter();
							if (!val2.IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val2;
								<ReadProfilesAllAsync>d__60 <ReadProfilesAllAsync>d__ = this;
								((AsyncIteratorMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<EchoBrakeControlSensitivity>, <ReadProfilesAllAsync>d__60>(ref val2, ref <ReadProfilesAllAsync>d__);
								return;
							}
							goto IL_01ba;
							IL_01ba:
							result2 = val2.GetResult();
							<sensitivity>5__5 = result2;
							<>2__current = null;
							val3 = logicalDeviceEchoBrakeControlSimDeviceSourceDirect.GetMaxBrakingPowerAsync(logicalDevice, <profileId>5__3, cancellationToken).GetAwaiter();
							if (!val3.IsCompleted)
							{
								num = (<>1__state = 2);
								<>u__3 = val3;
								<ReadProfilesAllAsync>d__60 <ReadProfilesAllAsync>d__ = this;
								((AsyncIteratorMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<byte>, <ReadProfilesAllAsync>d__60>(ref val3, ref <ReadProfilesAllAsync>d__);
								return;
							}
							break;
						}
						byte result3 = val3.GetResult();
						<>2__current = mutableProfiles?.UpdateEchoBrakeControlProfile(<profileId>5__3, <name>5__4, <sensitivity>5__5, result3) ?? new EchoBrakeControlProfileEntry(<profileId>5__3, <name>5__4, <sensitivity>5__5, result3);
						num = (<>1__state = -4);
						goto IL_0346;
						end_IL_0088:;
					}
					finally
					{
						if (num == -1)
						{
							((IDisposable)<>7__wrap1/*cast due to .constrained prefix*/).Dispose();
						}
					}
					_ = <>w__disposeMode;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<name>5__4 = null;
					<>2__current = null;
					((AsyncIteratorMethodBuilder)(ref <>t__builder)).Complete();
					<>v__promiseOfValueOrEnd.SetException(exception);
					return;
				}
				<>1__state = -2;
				<name>5__4 = null;
				<>2__current = null;
				((AsyncIteratorMethodBuilder)(ref <>t__builder)).Complete();
				<>v__promiseOfValueOrEnd.SetResult(false);
				return;
				IL_0346:
				<>v__promiseOfValueOrEnd.SetResult(true);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
			}

			[DebuggerHidden]
			System.Collections.Generic.IAsyncEnumerator<IEchoBrakeControlProfile> System.Collections.Generic.IAsyncEnumerable<IEchoBrakeControlProfile>.GetAsyncEnumerator(CancellationToken cancellationToken = default(CancellationToken))
			{
				//IL_0063: Unknown result type (might be due to invalid IL or missing references)
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				//IL_0020: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				<ReadProfilesAllAsync>d__60 <ReadProfilesAllAsync>d__;
				if (<>1__state == -2 && <>l__initialThreadId == Environment.CurrentManagedThreadId)
				{
					<>1__state = -3;
					<>t__builder = AsyncIteratorMethodBuilder.Create();
					<>w__disposeMode = false;
					<ReadProfilesAllAsync>d__ = this;
				}
				else
				{
					<ReadProfilesAllAsync>d__ = new <ReadProfilesAllAsync>d__60(-3)
					{
						<>4__this = <>4__this
					};
				}
				<ReadProfilesAllAsync>d__.logicalDevice = <>3__logicalDevice;
				<ReadProfilesAllAsync>d__.mutableProfiles = <>3__mutableProfiles;
				<ReadProfilesAllAsync>d__.cancellationToken = <>3__cancellationToken;
				return <ReadProfilesAllAsync>d__;
			}

			[DebuggerHidden]
			System.Threading.Tasks.ValueTask<bool> System.Collections.Generic.IAsyncEnumerator<IEchoBrakeControlProfile>.MoveNextAsync()
			{
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_0047: Invalid comparison between Unknown and I4
				if (<>1__state == -2)
				{
					return default(System.Threading.Tasks.ValueTask<bool>);
				}
				<>v__promiseOfValueOrEnd.Reset();
				<ReadProfilesAllAsync>d__60 <ReadProfilesAllAsync>d__ = this;
				((AsyncIteratorMethodBuilder)(ref <>t__builder)).MoveNext<<ReadProfilesAllAsync>d__60>(ref <ReadProfilesAllAsync>d__);
				short version = <>v__promiseOfValueOrEnd.Version;
				if ((int)<>v__promiseOfValueOrEnd.GetStatus(version) == 1)
				{
					return new System.Threading.Tasks.ValueTask<bool>(<>v__promiseOfValueOrEnd.GetResult(version));
				}
				return new System.Threading.Tasks.ValueTask<bool>((IValueTaskSource<bool>)this, version);
			}

			[DebuggerHidden]
			bool IValueTaskSource<bool>.GetResult(short token)
			{
				return <>v__promiseOfValueOrEnd.GetResult(token);
			}

			[DebuggerHidden]
			ValueTaskSourceStatus IValueTaskSource<bool>.GetStatus(short token)
			{
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				return <>v__promiseOfValueOrEnd.GetStatus(token);
			}

			[DebuggerHidden]
			void IValueTaskSource<bool>.OnCompleted(Action<object> continuation, object state, short token, ValueTaskSourceOnCompletedFlags flags)
			{
				//IL_0009: Unknown result type (might be due to invalid IL or missing references)
				<>v__promiseOfValueOrEnd.OnCompleted(continuation, state, token, flags);
			}

			[DebuggerHidden]
			void IValueTaskSource.GetResult(short token)
			{
				<>v__promiseOfValueOrEnd.GetResult(token);
			}

			[DebuggerHidden]
			ValueTaskSourceStatus IValueTaskSource.GetStatus(short token)
			{
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				return <>v__promiseOfValueOrEnd.GetStatus(token);
			}

			[DebuggerHidden]
			void IValueTaskSource.OnCompleted(Action<object> continuation, object state, short token, ValueTaskSourceOnCompletedFlags flags)
			{
				//IL_0009: Unknown result type (might be due to invalid IL or missing references)
				<>v__promiseOfValueOrEnd.OnCompleted(continuation, state, token, flags);
			}

			[DebuggerHidden]
			System.Threading.Tasks.ValueTask System.IAsyncDisposable.DisposeAsync()
			{
				//IL_0009: Unknown result type (might be due to invalid IL or missing references)
				if (<>1__state >= -1)
				{
					throw new NotSupportedException();
				}
				if (<>1__state == -2)
				{
					return default(System.Threading.Tasks.ValueTask);
				}
				<>w__disposeMode = true;
				<>v__promiseOfValueOrEnd.Reset();
				<ReadProfilesAllAsync>d__60 <ReadProfilesAllAsync>d__ = this;
				((AsyncIteratorMethodBuilder)(ref <>t__builder)).MoveNext<<ReadProfilesAllAsync>d__60>(ref <ReadProfilesAllAsync>d__);
				return new System.Threading.Tasks.ValueTask((IValueTaskSource)(object)this, <>v__promiseOfValueOrEnd.Version);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SimulatorAsync>d__62 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceEchoBrakeControlSimDeviceSourceDirect <>4__this;

			public CancellationToken cancellationToken;

			private bool <outputOverload>5__2;

			private bool <trailerConnected>5__3;

			private float <batteryVoltage>5__4;

			private int <loopCount>5__5;

			private TaskAwaiter <>u__1;

			private byte <maxBrakingPower>5__6;

			private TaskAwaiter<byte> <>u__2;

			private TaskAwaiter<bool> <>u__3;

			private void MoveNext()
			{
				//IL_0334: Expected O, but got Unknown
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ad: Unknown result type (might be due to invalid IL or missing references)
				//IL_0154: Unknown result type (might be due to invalid IL or missing references)
				//IL_0159: Unknown result type (might be due to invalid IL or missing references)
				//IL_0161: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01df: Unknown result type (might be due to invalid IL or missing references)
				//IL_0255: Unknown result type (might be due to invalid IL or missing references)
				//IL_025a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0262: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ea: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ef: Unknown result type (might be due to invalid IL or missing references)
				//IL_02f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_0193: Unknown result type (might be due to invalid IL or missing references)
				//IL_019d: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a2: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b9: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ae: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b8: Unknown result type (might be due to invalid IL or missing references)
				//IL_02bd: Unknown result type (might be due to invalid IL or missing references)
				//IL_0216: Unknown result type (might be due to invalid IL or missing references)
				//IL_0220: Unknown result type (might be due to invalid IL or missing references)
				//IL_0225: Unknown result type (might be due to invalid IL or missing references)
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0115: Unknown result type (might be due to invalid IL or missing references)
				//IL_011f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0124: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_023a: Unknown result type (might be due to invalid IL or missing references)
				//IL_023c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0087: Unknown result type (might be due to invalid IL or missing references)
				//IL_0088: Unknown result type (might be due to invalid IL or missing references)
				//IL_0139: Unknown result type (might be due to invalid IL or missing references)
				//IL_013b: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceEchoBrakeControlSimDeviceSourceDirect logicalDeviceEchoBrakeControlSimDeviceSourceDirect = <>4__this;
				try
				{
					TaskAwaiter val3;
					TaskAwaiter<byte> val2;
					TaskAwaiter<bool> val;
					byte result;
					switch (num)
					{
					default:
						<outputOverload>5__2 = false;
						<trailerConnected>5__3 = false;
						<batteryVoltage>5__4 = 12f;
						<loopCount>5__5 = 0;
						goto IL_0320;
					case 0:
						val3 = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_00bc;
					case 1:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter<byte>);
						num = (<>1__state = -1);
						goto IL_0170;
					case 2:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter<byte>);
						num = (<>1__state = -1);
						goto IL_01ee;
					case 3:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter<byte>);
						num = (<>1__state = -1);
						goto IL_0271;
					case 4:
						{
							val = <>u__3;
							<>u__3 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_0306;
						}
						IL_0320:
						if (((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
						{
							break;
						}
						if (logicalDeviceEchoBrakeControlSimDeviceSourceDirect._manualOverrideValue > 0)
						{
							val3 = logicalDeviceEchoBrakeControlSimDeviceSourceDirect.SetManualOverrideAsync((ILogicalDevice)logicalDeviceEchoBrakeControlSimDeviceSourceDirect._logicalDevice, logicalDeviceEchoBrakeControlSimDeviceSourceDirect._manualOverrideValue, cancellationToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val3)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val3;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SimulatorAsync>d__62>(ref val3, ref this);
								return;
							}
							goto IL_00bc;
						}
						goto IL_00c3;
						IL_0170:
						result = val2.GetResult();
						<maxBrakingPower>5__6 = result;
						val2 = logicalDeviceEchoBrakeControlSimDeviceSourceDirect.SetMaxBrakingPowerAsync((ILogicalDevice)logicalDeviceEchoBrakeControlSimDeviceSourceDirect._logicalDevice, logicalDeviceEchoBrakeControlSimDeviceSourceDirect._selectedProfile, <maxBrakingPower>5__6, cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__2 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<byte>, <SimulatorAsync>d__62>(ref val2, ref this);
							return;
						}
						goto IL_01ee;
						IL_0271:
						val2.GetResult();
						goto IL_0279;
						IL_0279:
						if (<loopCount>5__5 == 200)
						{
							<loopCount>5__5 = 0;
							<outputOverload>5__2 = !<outputOverload>5__2;
							<trailerConnected>5__3 = !<trailerConnected>5__3;
						}
						val = TaskExtension.TryDelay(100, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 4);
							<>u__3 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SimulatorAsync>d__62>(ref val, ref this);
							return;
						}
						goto IL_0306;
						IL_00bc:
						((TaskAwaiter)(ref val3)).GetResult();
						goto IL_00c3;
						IL_00c3:
						if (<loopCount>5__5 % 20 == 0)
						{
							<batteryVoltage>5__4 -= 0.1f;
							if (<batteryVoltage>5__4 < 0f)
							{
								<batteryVoltage>5__4 = 12f;
							}
						}
						if (<loopCount>5__5 % 100 == 1)
						{
							val2 = logicalDeviceEchoBrakeControlSimDeviceSourceDirect.GetMaxBrakingPowerAsync((ILogicalDevice)logicalDeviceEchoBrakeControlSimDeviceSourceDirect._logicalDevice, logicalDeviceEchoBrakeControlSimDeviceSourceDirect._selectedProfile, cancellationToken).GetAwaiter();
							if (!val2.IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<byte>, <SimulatorAsync>d__62>(ref val2, ref this);
								return;
							}
							goto IL_0170;
						}
						goto IL_0279;
						IL_0306:
						val.GetResult();
						<loopCount>5__5++;
						goto IL_0320;
						IL_01ee:
						val2.GetResult();
						if (<maxBrakingPower>5__6 > 0 && logicalDeviceEchoBrakeControlSimDeviceSourceDirect._manualOverrideValue == 0)
						{
							val2 = logicalDeviceEchoBrakeControlSimDeviceSourceDirect.SetMaxBrakingPowerAsync((ILogicalDevice)logicalDeviceEchoBrakeControlSimDeviceSourceDirect._logicalDevice, logicalDeviceEchoBrakeControlSimDeviceSourceDirect._selectedProfile, 0, cancellationToken).GetAwaiter();
							if (!val2.IsCompleted)
							{
								num = (<>1__state = 3);
								<>u__2 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<byte>, <SimulatorAsync>d__62>(ref val2, ref this);
								return;
							}
							goto IL_0271;
						}
						goto IL_0279;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <WriteProfilesAsync>d__61 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public CancellationToken cancellationToken;

			public IEnumerable<IEchoBrakeControlProfile> profiles;

			public LogicalDeviceEchoBrakeControlSimDeviceSourceDirect <>4__this;

			public ILogicalDevice logicalDevice;

			private IEnumerator<IEchoBrakeControlProfile> <>7__wrap1;

			private IEchoBrakeControlProfile <profile>5__3;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<byte> <>u__2;

			private void MoveNext()
			{
				//IL_020b: Expected O, but got Unknown
				//IL_00b2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00be: Unknown result type (might be due to invalid IL or missing references)
				//IL_012f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0134: Unknown result type (might be due to invalid IL or missing references)
				//IL_013b: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ac: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b1: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fc: Unknown result type (might be due to invalid IL or missing references)
				//IL_0101: Unknown result type (might be due to invalid IL or missing references)
				//IL_016f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0179: Unknown result type (might be due to invalid IL or missing references)
				//IL_017e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0115: Unknown result type (might be due to invalid IL or missing references)
				//IL_0116: Unknown result type (might be due to invalid IL or missing references)
				//IL_0192: Unknown result type (might be due to invalid IL or missing references)
				//IL_0193: Unknown result type (might be due to invalid IL or missing references)
				//IL_0075: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0084: Unknown result type (might be due to invalid IL or missing references)
				//IL_0098: Unknown result type (might be due to invalid IL or missing references)
				//IL_0099: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceEchoBrakeControlSimDeviceSourceDirect logicalDeviceEchoBrakeControlSimDeviceSourceDirect = <>4__this;
				try
				{
					if ((uint)num > 2u)
					{
						((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
						<>7__wrap1 = profiles.GetEnumerator();
					}
					try
					{
						TaskAwaiter val2;
						TaskAwaiter<byte> val;
						switch (num)
						{
						case 0:
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
							goto IL_00cd;
						case 1:
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
							goto IL_014a;
						case 2:
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<byte>);
							num = (<>1__state = -1);
							goto IL_01c7;
						default:
							{
								if (((IEnumerator)<>7__wrap1).MoveNext())
								{
									<profile>5__3 = <>7__wrap1.Current;
									val2 = logicalDeviceEchoBrakeControlSimDeviceSourceDirect.SetProfileNameAsync(logicalDevice, <profile>5__3.ProfileId, <profile>5__3.ProfileName, cancellationToken).GetAwaiter();
									if (!((TaskAwaiter)(ref val2)).IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val2;
										((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <WriteProfilesAsync>d__61>(ref val2, ref this);
										return;
									}
									goto IL_00cd;
								}
								break;
							}
							IL_00cd:
							((TaskAwaiter)(ref val2)).GetResult();
							val2 = logicalDeviceEchoBrakeControlSimDeviceSourceDirect.SetBrakePowerSensitivityAsync(logicalDevice, <profile>5__3.ProfileId, <profile>5__3.ProfileSensitivity, cancellationToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__1 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <WriteProfilesAsync>d__61>(ref val2, ref this);
								return;
							}
							goto IL_014a;
							IL_01c7:
							val.GetResult();
							<profile>5__3 = null;
							goto default;
							IL_014a:
							((TaskAwaiter)(ref val2)).GetResult();
							val = logicalDeviceEchoBrakeControlSimDeviceSourceDirect.SetMaxBrakingPowerAsync(logicalDevice, <profile>5__3.ProfileId, <profile>5__3.ProfileMaxBrakingPower, cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 2);
								<>u__2 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<byte>, <WriteProfilesAsync>d__61>(ref val, ref this);
								return;
							}
							goto IL_01c7;
						}
					}
					finally
					{
						if (num < 0 && <>7__wrap1 != null)
						{
							((IDisposable)<>7__wrap1).Dispose();
						}
					}
					<>7__wrap1 = null;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const string LogTag = "LogicalDeviceEchoBrakeControlSimDeviceSourceDirect";

		private const int TagCount = 0;

		private readonly ILogicalDeviceTag[] _deviceSourceTags = (ILogicalDeviceTag[])(object)new ILogicalDeviceTag[0];

		private readonly ILogicalDeviceEchoBrakeControl _logicalDevice;

		private readonly BackgroundOperation _simulator;

		private const int TickIntervalDelayMs = 100;

		private readonly ConcurrentDictionary<EchoBrakeControlProfile, byte> _maxBrakingPower = new ConcurrentDictionary<EchoBrakeControlProfile, byte>();

		private const byte MaxBrakingPowerDefaultValue = 10;

		private readonly ConcurrentDictionary<EchoBrakeControlProfile, EchoBrakeControlSensitivity> _brakePowerSensitivity = new ConcurrentDictionary<EchoBrakeControlProfile, EchoBrakeControlSensitivity>();

		private const EchoBrakeControlSensitivity EchoBrakeControlSensitivityDefaultValue = EchoBrakeControlSensitivity.SensitivityLevel2;

		private EchoBrakeControlProfile _selectedProfile;

		private readonly ConcurrentDictionary<EchoBrakeControlProfile, string> _profileNames = new ConcurrentDictionary<EchoBrakeControlProfile, string>();

		private byte _manualOverrideValue;

		public const int ManualOverrideDelayTimeMs = 250;

		private bool _hazardModeOverrideSwitchState;

		private const string ProductName = "ECHO Brake Control";

		private const string ModelNumber = "51180";

		private string FirmwareVersion = "1.0.0";

		private const string SerialNumber = "1234567890";

		private string _productNickname = "ECHO Brake Control BLE Advertisement";

		[CompilerGenerated]
		private Action<ILogicalDeviceSourceDirectConnection>? m_DidConnectEvent;

		[CompilerGenerated]
		private Action<ILogicalDeviceSourceDirectConnection>? m_DidDisconnectEvent;

		[CompilerGenerated]
		private UpdateDeviceSourceReachabilityEventHandler? m_UpdateDeviceSourceReachabilityEvent;

		public IEnumerable<ILogicalDeviceTag> DeviceSourceTags => (IEnumerable<ILogicalDeviceTag>)(object)_deviceSourceTags;

		public bool IsAccessoryGatewaySupported => false;

		public string DeviceSourceToken => "LogicalDeviceEchoBrakeControlSim";

		public bool AllowAutoOfflineLogicalDeviceRemoval => false;

		public bool IsDeviceSourceActive => true;

		[field: CompilerGenerated]
		public ILogicalDeviceService DeviceService
		{
			[CompilerGenerated]
			get;
		}

		public IN_MOTION_LOCKOUT_LEVEL InTransitLockoutLevel => IN_MOTION_LOCKOUT_LEVEL.op_Implicit((byte)0);

		[field: CompilerGenerated]
		public IReadOnlyList<ILogicalDeviceTag> ConnectionTagList
		{
			[CompilerGenerated]
			get;
		} = (IReadOnlyList<ILogicalDeviceTag>)(object)new List<ILogicalDeviceTag>();

		public bool IsConnected => true;

		[field: CompilerGenerated]
		public ILogicalDeviceSessionManager? SessionManager
		{
			[CompilerGenerated]
			get;
		}

		public event Action<ILogicalDeviceSourceDirectConnection>? DidConnectEvent
		{
			[CompilerGenerated]
			add
			{
				Action<ILogicalDeviceSourceDirectConnection> val = this.m_DidConnectEvent;
				Action<ILogicalDeviceSourceDirectConnection> val2;
				do
				{
					val2 = val;
					Action<ILogicalDeviceSourceDirectConnection> val3 = (Action<ILogicalDeviceSourceDirectConnection>)(object)Delegate.Combine((Delegate)(object)val2, (Delegate)(object)value);
					val = Interlocked.CompareExchange<Action<ILogicalDeviceSourceDirectConnection>>(ref this.m_DidConnectEvent, val3, val2);
				}
				while (val != val2);
			}
			[CompilerGenerated]
			remove
			{
				Action<ILogicalDeviceSourceDirectConnection> val = this.m_DidConnectEvent;
				Action<ILogicalDeviceSourceDirectConnection> val2;
				do
				{
					val2 = val;
					Action<ILogicalDeviceSourceDirectConnection> val3 = (Action<ILogicalDeviceSourceDirectConnection>)(object)Delegate.Remove((Delegate)(object)val2, (Delegate)(object)value);
					val = Interlocked.CompareExchange<Action<ILogicalDeviceSourceDirectConnection>>(ref this.m_DidConnectEvent, val3, val2);
				}
				while (val != val2);
			}
		}

		public event Action<ILogicalDeviceSourceDirectConnection>? DidDisconnectEvent
		{
			[CompilerGenerated]
			add
			{
				Action<ILogicalDeviceSourceDirectConnection> val = this.m_DidDisconnectEvent;
				Action<ILogicalDeviceSourceDirectConnection> val2;
				do
				{
					val2 = val;
					Action<ILogicalDeviceSourceDirectConnection> val3 = (Action<ILogicalDeviceSourceDirectConnection>)(object)Delegate.Combine((Delegate)(object)val2, (Delegate)(object)value);
					val = Interlocked.CompareExchange<Action<ILogicalDeviceSourceDirectConnection>>(ref this.m_DidDisconnectEvent, val3, val2);
				}
				while (val != val2);
			}
			[CompilerGenerated]
			remove
			{
				Action<ILogicalDeviceSourceDirectConnection> val = this.m_DidDisconnectEvent;
				Action<ILogicalDeviceSourceDirectConnection> val2;
				do
				{
					val2 = val;
					Action<ILogicalDeviceSourceDirectConnection> val3 = (Action<ILogicalDeviceSourceDirectConnection>)(object)Delegate.Remove((Delegate)(object)val2, (Delegate)(object)value);
					val = Interlocked.CompareExchange<Action<ILogicalDeviceSourceDirectConnection>>(ref this.m_DidDisconnectEvent, val3, val2);
				}
				while (val != val2);
			}
		}

		public event UpdateDeviceSourceReachabilityEventHandler UpdateDeviceSourceReachabilityEvent
		{
			[CompilerGenerated]
			add
			{
				//IL_0010: Unknown result type (might be due to invalid IL or missing references)
				//IL_0016: Expected O, but got Unknown
				UpdateDeviceSourceReachabilityEventHandler val = this.m_UpdateDeviceSourceReachabilityEvent;
				UpdateDeviceSourceReachabilityEventHandler val2;
				do
				{
					val2 = val;
					UpdateDeviceSourceReachabilityEventHandler val3 = (UpdateDeviceSourceReachabilityEventHandler)Delegate.Combine((Delegate)(object)val2, (Delegate)(object)value);
					val = Interlocked.CompareExchange<UpdateDeviceSourceReachabilityEventHandler>(ref this.m_UpdateDeviceSourceReachabilityEvent, val3, val2);
				}
				while (val != val2);
			}
			[CompilerGenerated]
			remove
			{
				//IL_0010: Unknown result type (might be due to invalid IL or missing references)
				//IL_0016: Expected O, but got Unknown
				UpdateDeviceSourceReachabilityEventHandler val = this.m_UpdateDeviceSourceReachabilityEvent;
				UpdateDeviceSourceReachabilityEventHandler val2;
				do
				{
					val2 = val;
					UpdateDeviceSourceReachabilityEventHandler val3 = (UpdateDeviceSourceReachabilityEventHandler)Delegate.Remove((Delegate)(object)val2, (Delegate)(object)value);
					val = Interlocked.CompareExchange<UpdateDeviceSourceReachabilityEventHandler>(ref this.m_UpdateDeviceSourceReachabilityEvent, val3, val2);
				}
				while (val != val2);
			}
		}

		public IEnumerable<ILogicalDeviceTag> MakeDeviceSourceTags(ILogicalDevice? logicalDevice)
		{
			return DeviceSourceTags;
		}

		public LogicalDeviceEchoBrakeControlSimDeviceSourceDirect(ILogicalDeviceEchoBrakeControl logicalDevice)
		{
			//IL_006f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0079: Expected O, but got Unknown
			//IL_0074: Unknown result type (might be due to invalid IL or missing references)
			//IL_007e: Expected O, but got Unknown
			DeviceService = ((ILogicalDevice)logicalDevice).DeviceService;
			_logicalDevice = logicalDevice;
			_simulator = new BackgroundOperation(new BackgroundOperationFunc(SimulatorAsync));
			_simulator.Start();
		}

		public bool IsLogicalDeviceSupported(ILogicalDevice? logicalDevice)
		{
			return _logicalDevice == logicalDevice;
		}

		public bool IsLogicalDeviceOnline(ILogicalDevice? logicalDevice)
		{
			return true;
		}

		public IN_MOTION_LOCKOUT_LEVEL GetLogicalDeviceInTransitLockoutLevel(ILogicalDevice? logicalDevice)
		{
			return IN_MOTION_LOCKOUT_LEVEL.op_Implicit((byte)0);
		}

		public bool IsLogicalDeviceHazardous(ILogicalDevice? logicalDevice)
		{
			return false;
		}

		public Task<byte> GetMaxBrakingPowerAsync(ILogicalDevice logicalDevice, EchoBrakeControlProfile profile, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			byte b = default(byte);
			if (!_maxBrakingPower.TryGetValue(profile, ref b))
			{
				return Task.FromResult<byte>((byte)10);
			}
			return Task.FromResult<byte>(b);
		}

		public Task<byte> SetMaxBrakingPowerAsync(ILogicalDevice logicalDevice, EchoBrakeControlProfile profile, byte maxBrakingPower, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			maxBrakingPower = (byte)MathCommon.Clamp((int)maxBrakingPower, 5, 100);
			_maxBrakingPower[profile] = maxBrakingPower;
			return Task.FromResult<byte>(maxBrakingPower);
		}

		public Task<EchoBrakeControlSensitivity> GetBrakePowerSensitivityAsync(ILogicalDevice logicalDevice, EchoBrakeControlProfile profile, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			EchoBrakeControlSensitivity echoBrakeControlSensitivity = default(EchoBrakeControlSensitivity);
			if (!_brakePowerSensitivity.TryGetValue(profile, ref echoBrakeControlSensitivity))
			{
				return Task.FromResult<EchoBrakeControlSensitivity>(EchoBrakeControlSensitivity.SensitivityLevel2);
			}
			return Task.FromResult<EchoBrakeControlSensitivity>(echoBrakeControlSensitivity);
		}

		public Task SetBrakePowerSensitivityAsync(ILogicalDevice logicalDevice, EchoBrakeControlProfile profile, EchoBrakeControlSensitivity sensitivity, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			_brakePowerSensitivity[profile] = sensitivity;
			return Task.CompletedTask;
		}

		public Task<EchoBrakeControlProfile> GetSelectedProfileAsync(ILogicalDevice logicalDevice, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			return Task.FromResult<EchoBrakeControlProfile>(_selectedProfile);
		}

		public Task SetSelectedProfileAsync(ILogicalDevice logicalDevice, EchoBrakeControlProfile profile, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			_selectedProfile = profile;
			return Task.CompletedTask;
		}

		public Task<string> GetProfileNameAsync(ILogicalDevice logicalDevice, EchoBrakeControlProfile profile, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			string text = default(string);
			if (!_profileNames.TryGetValue(profile, ref text))
			{
				return Task.FromResult<string>(Enum.GetName(typeof(EchoBrakeControlProfile), (object)profile));
			}
			return Task.FromResult<string>(text);
		}

		public Task SetProfileNameAsync(ILogicalDevice logicalDevice, EchoBrakeControlProfile profile, string name, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			_profileNames[profile] = name;
			return Task.CompletedTask;
		}

		public Task SetManualOverrideAsync(ILogicalDevice logicalDevice, byte outputDutyCycle, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			_manualOverrideValue = outputDutyCycle;
			return Task.CompletedTask;
		}

		public Task SetManualOverrideAsync(ILogicalDevice logicalDevice, ManualOverrideState manualOverrideState, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			_manualOverrideValue = (byte)manualOverrideState;
			return Task.CompletedTask;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task PerformOperationManualOverride(ILogicalDevice logicalDevice, Func<EchoBrakeControlOperationAck> progressAck, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<PerformOperationManualOverride>d__45 <PerformOperationManualOverride>d__ = default(<PerformOperationManualOverride>d__45);
			<PerformOperationManualOverride>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<PerformOperationManualOverride>d__.<>4__this = this;
			<PerformOperationManualOverride>d__.logicalDevice = logicalDevice;
			<PerformOperationManualOverride>d__.progressAck = progressAck;
			<PerformOperationManualOverride>d__.cancellationToken = cancellationToken;
			<PerformOperationManualOverride>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <PerformOperationManualOverride>d__.<>t__builder)).Start<<PerformOperationManualOverride>d__45>(ref <PerformOperationManualOverride>d__);
			return ((AsyncTaskMethodBuilder)(ref <PerformOperationManualOverride>d__.<>t__builder)).Task;
		}

		public Task<bool> GetHazardModeOverrideSwitchStateAsync(ILogicalDevice logicalDevice, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			return Task.FromResult<bool>(_hazardModeOverrideSwitchState);
		}

		public Task SetHazardModeOverrideSwitchStateAsync(ILogicalDevice logicalDevice, bool state, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			_hazardModeOverrideSwitchState = state;
			return Task.CompletedTask;
		}

		public Task<string> GetProductNameAsync(ILogicalDevice logicalDevice, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			return Task.FromResult<string>("ECHO Brake Control");
		}

		public Task<string> GetModelNumberAsync(ILogicalDevice logicalDevice, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			return Task.FromResult<string>("51180");
		}

		public Task<string> GetFirmwareVersionAsync(ILogicalDevice logicalDevice, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			return Task.FromResult<string>(FirmwareVersion);
		}

		public Task<string> GetSerialNumberAsync(ILogicalDevice logicalDevice, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			return Task.FromResult<string>("1234567890");
		}

		public Task<string> GetProductNicknameAsync(ILogicalDevice logicalDevice, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			return Task.FromResult<string>(_productNickname);
		}

		public Task SetProductNicknameAsync(ILogicalDevice logicalDevice, string nickname, CancellationToken cancellationToken)
		{
			((CancellationToken)(ref cancellationToken)).ThrowIfCancellationRequested();
			_productNickname = nickname;
			return Task.CompletedTask;
		}

		[AsyncIteratorStateMachine(/*Could not decode attribute arguments.*/)]
		public System.Collections.Generic.IAsyncEnumerable<IEchoBrakeControlProfile> ReadProfilesAllAsync(ILogicalDevice logicalDevice, IEchoBrakeControlProfilesMutable? mutableProfiles, CancellationToken cancellationToken)
		{
			//IL_001d: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			return new <ReadProfilesAllAsync>d__60(-2)
			{
				<>4__this = this,
				<>3__logicalDevice = logicalDevice,
				<>3__mutableProfiles = mutableProfiles,
				<>3__cancellationToken = cancellationToken
			};
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task WriteProfilesAsync(ILogicalDevice logicalDevice, IEnumerable<IEchoBrakeControlProfile> profiles, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<WriteProfilesAsync>d__61 <WriteProfilesAsync>d__ = default(<WriteProfilesAsync>d__61);
			<WriteProfilesAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<WriteProfilesAsync>d__.<>4__this = this;
			<WriteProfilesAsync>d__.logicalDevice = logicalDevice;
			<WriteProfilesAsync>d__.profiles = profiles;
			<WriteProfilesAsync>d__.cancellationToken = cancellationToken;
			<WriteProfilesAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <WriteProfilesAsync>d__.<>t__builder)).Start<<WriteProfilesAsync>d__61>(ref <WriteProfilesAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <WriteProfilesAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task SimulatorAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SimulatorAsync>d__62 <SimulatorAsync>d__ = default(<SimulatorAsync>d__62);
			<SimulatorAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SimulatorAsync>d__.<>4__this = this;
			<SimulatorAsync>d__.cancellationToken = cancellationToken;
			<SimulatorAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Start<<SimulatorAsync>d__62>(ref <SimulatorAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Task;
		}

		public override void Dispose(bool disposing)
		{
			_simulator.Stop();
		}

		public void Start()
		{
		}

		public void Stop()
		{
		}

		public LogicalDeviceReachability DeviceSourceReachability(ILogicalDevice logicalDevice)
		{
			return (LogicalDeviceReachability)1;
		}
	}
}
namespace OneControl.Devices.DoorLock
{
	public enum LockState : Enum
	{
		Unknown,
		Unlocked,
		Locked
	}
	public enum PowerMode : Enum
	{
		Normal = 0,
		LowPower = 1,
		Storage = 2,
		Unknown = 255
	}
	public enum HardwareHealth : Enum
	{
		FullyOperational,
		LockCommandsIgnoredDueToFault,
		UnknownFault
	}
	public interface IDoorLock : IAccessoryDevice
	{
		bool LockControlDisabled { get; }

		LockState LockState { get; }

		byte BatteryStatus { get; }

		HardwareHealth HardwareHealth { get; }

		bool LowBatteryAlertActive { get; }

		int LowBatteryAlertCount { get; }

		Task<PowerMode> GetPowerModeSettingAsync(CancellationToken cancellationToken);

		Task<LockState> GetDesiredLockStateAsync(CancellationToken cancellationToken);

		Task SetPowerModeSettingAsync(PowerMode powerMode, CancellationToken cancellationToken);

		Task SetDesiredLockStateAsync(LockState lockState, CancellationToken cancellationToken);
	}
	public interface ILogicalDeviceDoorLock : IDoorLock, IAccessoryDevice, ILogicalDeviceWithStatus<LogicalDeviceDoorLockStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceDoorLockStatus>, ILogicalDeviceAccessory
	{
	}
	public interface ILogicalDeviceDoorLockDirect : ILogicalDeviceDoorLock, IDoorLock, IAccessoryDevice, ILogicalDeviceWithStatus<LogicalDeviceDoorLockStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceDoorLockStatus>, ILogicalDeviceAccessory, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public class LogicalDeviceDoorLock : LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>, ILogicalDeviceDoorLockDirect, ILogicalDeviceDoorLock, IDoorLock, IAccessoryDevice, ILogicalDeviceWithStatus<LogicalDeviceDoorLockStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceDoorLockStatus>, ILogicalDeviceAccessory, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <GetDesiredLockStateAsync>d__23 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<LockState> <>t__builder;

			public LogicalDeviceDoorLock <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<LockState> <>u__1;

			private void MoveNext()
			{
				//IL_00d0: Expected O, but got Unknown
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_005c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				//IL_0018: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceDoorLock logicalDeviceDoorLock = <>4__this;
				LockState result2;
				try
				{
					TaskAwaiter<LockState> val;
					if (num != 0)
					{
						val = ((ILogicalDevicePid<LockState>)(object)logicalDeviceDoorLock.DesiredLockStatePid).ReadAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<LockState>, <GetDesiredLockStateAsync>d__23>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<LockState>);
						num = (<>1__state = -1);
					}
					LockState result = val.GetResult();
					if (!Enum.IsDefined(typeof(LockState), (object)(Int32)result))
					{
						TaggedLog.Error("LogicalDeviceDoorLock", String.Format("Read unexpected value from Door Lock Power Mode Pid: {0}", (object)result), Array.Empty<object>());
						throw new LogicalDevicePidInvalidValueException(((ILogicalDevicePid)logicalDeviceDoorLock.PowerModeSettingsPid).PropertyId, (ILogicalDevice)(object)logicalDeviceDoorLock, (object)result, (Exception)null);
					}
					result2 = result;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <GetPowerModeSettingAsync>d__22 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<PowerMode> <>t__builder;

			public LogicalDeviceDoorLock <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<PowerMode> <>u__1;

			private void MoveNext()
			{
				//IL_00d0: Expected O, but got Unknown
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_005c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				//IL_0018: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceDoorLock logicalDeviceDoorLock = <>4__this;
				PowerMode result2;
				try
				{
					TaskAwaiter<PowerMode> val;
					if (num != 0)
					{
						val = ((ILogicalDevicePid<PowerMode>)(object)logicalDeviceDoorLock.PowerModeSettingsPid).ReadAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<PowerMode>, <GetPowerModeSettingAsync>d__22>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<PowerMode>);
						num = (<>1__state = -1);
					}
					PowerMode result = val.GetResult();
					if (!Enum.IsDefined(typeof(PowerMode), (object)(Int32)result))
					{
						TaggedLog.Error("LogicalDeviceDoorLock", String.Format("Read unexpected value from Door Lock Power Mode Pid: {0}", (object)result), Array.Empty<object>());
						throw new LogicalDevicePidInvalidValueException(((ILogicalDevicePid)logicalDeviceDoorLock.PowerModeSettingsPid).PropertyId, (ILogicalDevice)(object)logicalDeviceDoorLock, (object)result, (Exception)null);
					}
					result2 = result;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SetDesiredLockStateAsync>d__25 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LockState lockState;

			public LogicalDeviceDoorLock <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_00ba: Expected O, but got Unknown
				//IL_0095: Unknown result type (might be due to invalid IL or missing references)
				//IL_009a: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_007e: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceDoorLock logicalDeviceDoorLock = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						if (!Enum.IsDefined(typeof(LockState), (object)(Int32)lockState))
						{
							throw new LogicalDevicePidInvalidValueException(((ILogicalDevicePid)logicalDeviceDoorLock.PowerModeSettingsPid).PropertyId, (ILogicalDevice)(object)logicalDeviceDoorLock, (object)lockState, (Exception)null);
						}
						val = ((ILogicalDevicePid<LockState>)(object)logicalDeviceDoorLock.DesiredLockStatePid).WriteAsync(lockState, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SetDesiredLockStateAsync>d__25>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SetPowerModeSettingAsync>d__24 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public PowerMode powerMode;

			public LogicalDeviceDoorLock <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_00ba: Expected O, but got Unknown
				//IL_0095: Unknown result type (might be due to invalid IL or missing references)
				//IL_009a: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_007e: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceDoorLock logicalDeviceDoorLock = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						if (!Enum.IsDefined(typeof(PowerMode), (object)(Int32)powerMode))
						{
							throw new LogicalDevicePidInvalidValueException(((ILogicalDevicePid)logicalDeviceDoorLock.PowerModeSettingsPid).PropertyId, (ILogicalDevice)(object)logicalDeviceDoorLock, (object)powerMode, (Exception)null);
						}
						val = ((ILogicalDevicePid<PowerMode>)(object)logicalDeviceDoorLock.PowerModeSettingsPid).WriteAsync(powerMode, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SetPowerModeSettingAsync>d__24>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceDoorLock";

		protected ILogicalDevicePidEnum<PowerMode> PowerModeSettingsPid;

		protected ILogicalDevicePidEnum<LockState> DesiredLockStatePid;

		public const string LowBatteryAlertKey = "LowBatteryAlert";

		private readonly ConcurrentDictionary<string, ILogicalDeviceAlert> _alertDict = new ConcurrentDictionary<string, ILogicalDeviceAlert>();

		public bool LockControlDisabled
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>)this).DeviceStatus).HasData)
				{
					return ((LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>)this).DeviceStatus.LockControlDisabled;
				}
				return false;
			}
		}

		public LockState LockState
		{
			get
			{
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>)this).DeviceStatus).HasData)
				{
					return LockState.Unknown;
				}
				return ((LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>)this).DeviceStatus.LockState;
			}
		}

		public byte BatteryStatus
		{
			get
			{
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>)this).DeviceStatus).HasData)
				{
					return 0;
				}
				return ((LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>)this).DeviceStatus.BatteryStatus;
			}
		}

		public HardwareHealth HardwareHealth
		{
			get
			{
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>)this).DeviceStatus).HasData)
				{
					return HardwareHealth.UnknownFault;
				}
				return ((LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>)this).DeviceStatus.HardwareHealth;
			}
		}

		public bool LowBatteryAlertActive
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>)this).DeviceStatus).HasData)
				{
					return ((LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>)this).DeviceStatus.LowBatteryAlertActive;
				}
				return false;
			}
		}

		public int LowBatteryAlertCount
		{
			get
			{
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>)this).DeviceStatus).HasData)
				{
					return 0;
				}
				return ((LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>)this).DeviceStatus.LowBatteryAlertEventCount;
			}
		}

		public bool IsAccessoryGatewaySupported => true;

		public bool AllowAutoOfflineLogicalDeviceRemoval => false;

		public IEnumerable<ILogicalDeviceAlert> Alerts => (IEnumerable<ILogicalDeviceAlert>)(object)_alertDict.Values;

		public LogicalDeviceDoorLock(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService deviceService, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceDoorLockStatus(), (ILogicalDeviceCapability)new LogicalDeviceCapability(), deviceService, isFunctionClassChangeable)
		{
			//IL_0012: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Expected O, but got Unknown
			//IL_0055: Unknown result type (might be due to invalid IL or missing references)
			//IL_005b: Unknown result type (might be due to invalid IL or missing references)
			PowerModeSettingsPid = (ILogicalDevicePidEnum<PowerMode>)(object)new LogicalDevicePidEnum<PowerMode>((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)345), (LogicalDeviceSessionType)2);
			DesiredLockStatePid = (ILogicalDevicePidEnum<LockState>)(object)new LogicalDevicePidEnum<LockState>((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)346), (LogicalDeviceSessionType)2);
			UpdateAlert("LowBatteryAlert", isActive: false, default(Nullable<int>));
		}

		public override void OnDeviceStatusChanged()
		{
			//IL_005e: Unknown result type (might be due to invalid IL or missing references)
			base.OnDeviceStatusChanged();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("LockControlDisabled", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("LockState", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("BatteryStatus", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("LowBatteryAlertActive", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("LowBatteryAlertCount", true);
			UpdateAlert("LowBatteryAlert", ((LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>)this).DeviceStatus.LowBatteryAlertActive, new Nullable<int>((int)((LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>)this).DeviceStatus.LowBatteryAlertEventCount));
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<PowerMode> GetPowerModeSettingAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<GetPowerModeSettingAsync>d__22 <GetPowerModeSettingAsync>d__ = default(<GetPowerModeSettingAsync>d__22);
			<GetPowerModeSettingAsync>d__.<>t__builder = AsyncTaskMethodBuilder<PowerMode>.Create();
			<GetPowerModeSettingAsync>d__.<>4__this = this;
			<GetPowerModeSettingAsync>d__.cancellationToken = cancellationToken;
			<GetPowerModeSettingAsync>d__.<>1__state = -1;
			<GetPowerModeSettingAsync>d__.<>t__builder.Start<<GetPowerModeSettingAsync>d__22>(ref <GetPowerModeSettingAsync>d__);
			return <GetPowerModeSettingAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<LockState> GetDesiredLockStateAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<GetDesiredLockStateAsync>d__23 <GetDesiredLockStateAsync>d__ = default(<GetDesiredLockStateAsync>d__23);
			<GetDesiredLockStateAsync>d__.<>t__builder = AsyncTaskMethodBuilder<LockState>.Create();
			<GetDesiredLockStateAsync>d__.<>4__this = this;
			<GetDesiredLockStateAsync>d__.cancellationToken = cancellationToken;
			<GetDesiredLockStateAsync>d__.<>1__state = -1;
			<GetDesiredLockStateAsync>d__.<>t__builder.Start<<GetDesiredLockStateAsync>d__23>(ref <GetDesiredLockStateAsync>d__);
			return <GetDesiredLockStateAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task SetPowerModeSettingAsync(PowerMode powerMode, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<SetPowerModeSettingAsync>d__24 <SetPowerModeSettingAsync>d__ = default(<SetPowerModeSettingAsync>d__24);
			<SetPowerModeSettingAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SetPowerModeSettingAsync>d__.<>4__this = this;
			<SetPowerModeSettingAsync>d__.powerMode = powerMode;
			<SetPowerModeSettingAsync>d__.cancellationToken = cancellationToken;
			<SetPowerModeSettingAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SetPowerModeSettingAsync>d__.<>t__builder)).Start<<SetPowerModeSettingAsync>d__24>(ref <SetPowerModeSettingAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SetPowerModeSettingAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task SetDesiredLockStateAsync(LockState lockState, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<SetDesiredLockStateAsync>d__25 <SetDesiredLockStateAsync>d__ = default(<SetDesiredLockStateAsync>d__25);
			<SetDesiredLockStateAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SetDesiredLockStateAsync>d__.<>4__this = this;
			<SetDesiredLockStateAsync>d__.lockState = lockState;
			<SetDesiredLockStateAsync>d__.cancellationToken = cancellationToken;
			<SetDesiredLockStateAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SetDesiredLockStateAsync>d__.<>t__builder)).Start<<SetDesiredLockStateAsync>d__25>(ref <SetDesiredLockStateAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SetDesiredLockStateAsync>d__.<>t__builder)).Task;
		}

		public void UpdateAlert(string alertName, bool isActive, Nullable<int> count)
		{
			//IL_0003: Unknown result type (might be due to invalid IL or missing references)
			base.UpdateAlertDefaultImpl(alertName, isActive, count, _alertDict);
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceCapability>)(object)this).LastReceivedNetworkStatus;
		}
	}
	internal class LogicalDeviceDoorLockFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 51)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceDoorLock(logicalDeviceId, service);
		}
	}
	public class LogicalDeviceDoorLockSim : LogicalDeviceDoorLock, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SimulatorAsync>d__12 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceDoorLockSim <>4__this;

			public CancellationToken cancellationToken;

			private byte <batteryCharge>5__2;

			private bool <batteryLow>5__3;

			private byte <alertCount>5__4;

			private int <loopCount>5__5;

			private int <hardwareHealthCount>5__6;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<LockState> <>u__2;

			private TaskAwaiter<bool> <>u__3;

			private void MoveNext()
			{
				//IL_0334: Expected O, but got Unknown
				//IL_02ea: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ef: Unknown result type (might be due to invalid IL or missing references)
				//IL_02f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_009f: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ab: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f0: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_01fd: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b1: Unknown result type (might be due to invalid IL or missing references)
				//IL_01bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c0: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ae: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b8: Unknown result type (might be due to invalid IL or missing references)
				//IL_02bd: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0101: Unknown result type (might be due to invalid IL or missing references)
				//IL_0106: Unknown result type (might be due to invalid IL or missing references)
				//IL_010d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d5: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0085: Unknown result type (might be due to invalid IL or missing references)
				//IL_0086: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceDoorLockSim logicalDeviceDoorLockSim = <>4__this;
				try
				{
					TaskAwaiter<bool> val;
					switch (num)
					{
					default:
						<batteryCharge>5__2 = 100;
						<batteryLow>5__3 = false;
						<alertCount>5__4 = 0;
						<loopCount>5__5 = 0;
						<hardwareHealthCount>5__6 = 0;
						logicalDeviceDoorLockSim._simStatus.SetHardwareHealth(0);
						goto case 0;
					case 0:
					case 1:
						try
						{
							TaskAwaiter val2;
							if (num != 0)
							{
								if (num == 1)
								{
									val2 = <>u__1;
									<>u__1 = default(TaskAwaiter);
									num = (<>1__state = -1);
									goto IL_011c;
								}
								val2 = logicalDeviceDoorLockSim.SetDesiredLockStateAsync(LockState.Unlocked, cancellationToken).GetAwaiter();
								if (!((TaskAwaiter)(ref val2)).IsCompleted)
								{
									num = (<>1__state = 0);
									<>u__1 = val2;
									((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SimulatorAsync>d__12>(ref val2, ref this);
									return;
								}
							}
							else
							{
								val2 = <>u__1;
								<>u__1 = default(TaskAwaiter);
								num = (<>1__state = -1);
							}
							((TaskAwaiter)(ref val2)).GetResult();
							val2 = logicalDeviceDoorLockSim.SetPowerModeSettingAsync(PowerMode.Normal, cancellationToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__1 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SimulatorAsync>d__12>(ref val2, ref this);
								return;
							}
							goto IL_011c;
							IL_011c:
							((TaskAwaiter)(ref val2)).GetResult();
						}
						catch (Object)
						{
						}
						goto IL_0320;
					case 2:
						try
						{
							TaskAwaiter<LockState> val3;
							if (num != 2)
							{
								val3 = logicalDeviceDoorLockSim.GetDesiredLockStateAsync(cancellationToken).GetAwaiter();
								if (!val3.IsCompleted)
								{
									num = (<>1__state = 2);
									<>u__2 = val3;
									((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<LockState>, <SimulatorAsync>d__12>(ref val3, ref this);
									return;
								}
							}
							else
							{
								val3 = <>u__2;
								<>u__2 = default(TaskAwaiter<LockState>);
								num = (<>1__state = -1);
							}
							LockState result = val3.GetResult();
							logicalDeviceDoorLockSim._simStatus.SetLockState(result);
						}
						catch (Object)
						{
						}
						if (<batteryCharge>5__2 < 25)
						{
							if (!<batteryLow>5__3)
							{
								<alertCount>5__4++;
								<batteryLow>5__3 = true;
								logicalDeviceDoorLockSim._simStatus.SetLowBatteryAlert(active: true, <alertCount>5__4);
							}
						}
						else
						{
							<batteryLow>5__3 = false;
							logicalDeviceDoorLockSim._simStatus.SetLowBatteryAlert(active: false, <alertCount>5__4);
						}
						if (<batteryCharge>5__2 == 0)
						{
							<batteryCharge>5__2 = 100;
						}
						((LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>)logicalDeviceDoorLockSim).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceDoorLockSim._simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceDoorLockSim._simStatus).Size);
						val = TaskExtension.TryDelay(100, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 3);
							<>u__3 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SimulatorAsync>d__12>(ref val, ref this);
							return;
						}
						goto IL_0306;
					case 3:
						{
							val = <>u__3;
							<>u__3 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_0306;
						}
						IL_0320:
						if (((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
						{
							break;
						}
						if (<loopCount>5__5 == 30)
						{
							<batteryCharge>5__2--;
							<hardwareHealthCount>5__6++;
							<loopCount>5__5 = 0;
							switch (<hardwareHealthCount>5__6)
							{
							case 10:
								logicalDeviceDoorLockSim._simStatus.SetHardwareHealth(2);
								break;
							case 15:
								logicalDeviceDoorLockSim._simStatus.SetHardwareHealth(0);
								<hardwareHealthCount>5__6 = 0;
								break;
							}
						}
						logicalDeviceDoorLockSim._simStatus.SetBatteryStatus(<batteryCharge>5__2);
						goto case 2;
						IL_0306:
						val.GetResult();
						<loopCount>5__5++;
						goto IL_0320;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceDoorLockSim";

		private readonly LogicalDeviceDoorLockStatus _simStatus = new LogicalDeviceDoorLockStatus();

		private readonly BackgroundOperation _simulator;

		private const int TickIntervalDelayMs = 100;

		private const byte CapabilitiesEnabled = 0;

		private const int LowBatteryAlertThreshold = 25;

		private const uint DelayStatusChangedLogMessageThrottleTimeMs = 60000u;

		private readonly Stopwatch _delayStatusChangedLogMessageThrottleTimer = Stopwatch.StartNew();

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public override bool ActiveSession => true;

		public LogicalDeviceDoorLockSim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service = null)
			: base(logicalDeviceId, service)
		{
			//IL_004d: Unknown result type (might be due to invalid IL or missing references)
			//IL_005f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0069: Expected O, but got Unknown
			//IL_0064: Unknown result type (might be due to invalid IL or missing references)
			//IL_006e: Expected O, but got Unknown
			PowerModeSettingsPid = (ILogicalDevicePidEnum<PowerMode>)(object)new LogicalDevicePidSimEnum<PowerMode>(PidExtension.ConvertToPid((Pid)345), PowerMode.Normal);
			DesiredLockStatePid = (ILogicalDevicePidEnum<LockState>)(object)new LogicalDevicePidSimEnum<LockState>(PidExtension.ConvertToPid((Pid)346), LockState.Locked);
			((LogicalDevice<ILogicalDeviceCapability>)(object)this).UpdateDeviceCapability(new Nullable<byte>((byte)0));
			_simulator = new BackgroundOperation(new BackgroundOperationFunc(SimulatorAsync));
			_simulator.Start();
		}

		public override void UpdateDeviceOnline(bool canOnline)
		{
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task SimulatorAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SimulatorAsync>d__12 <SimulatorAsync>d__ = default(<SimulatorAsync>d__12);
			<SimulatorAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SimulatorAsync>d__.<>4__this = this;
			<SimulatorAsync>d__.cancellationToken = cancellationToken;
			<SimulatorAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Start<<SimulatorAsync>d__12>(ref <SimulatorAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Task;
		}

		protected override void DebugUpdateDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, uint dataLength, string optionalText = "")
		{
			if (_delayStatusChangedLogMessageThrottleTimer.ElapsedMilliseconds >= 60000)
			{
				((LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>)this).DebugUpdateDeviceStatusChanged(oldStatusData, statusData, dataLength, String.Format("Skipped debug messages over {0}ms", (object)(UInt32)60000));
				_delayStatusChangedLogMessageThrottleTimer.Restart();
			}
		}

		public override void Dispose(bool disposing)
		{
			((LogicalDevice<LogicalDeviceDoorLockStatus, ILogicalDeviceCapability>)this).Dispose(disposing);
			_simulator.Stop();
		}
	}
	public class LogicalDeviceDoorLockStatus : LogicalDeviceStatusPacketMutable, ILogicalDeviceStatus<LogicalDeviceDoorLockStatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		public const int MinimumStatusPacketSize = 4;

		private const int LockStatusIndex = 0;

		private const int BatteryStatusIndex = 1;

		private const int LowBatteryAlertIndex = 2;

		private const int HardwareHealthIndex = 3;

		private const byte LockControlDisabledBitIndex = 7;

		private const byte LockStatusBitmask = 15;

		private const byte AlertActiveFlag = 128;

		private const byte AlertActiveBitmask = 128;

		private const byte AlertCountBitmask = 127;

		public bool LockControlDisabled => ByteExtensions.IsBitSet(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0], 7);

		public LockState LockState
		{
			get
			{
				int num = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0] & 0xF;
				if (Enum.IsDefined(typeof(LockState), (object)num))
				{
					return (LockState)num;
				}
				return LockState.Unknown;
			}
		}

		public byte BatteryStatus => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[1];

		public bool LowBatteryAlertActive => (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[2] & 0x80) == 128;

		public byte LowBatteryAlertEventCount => (byte)(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[2] & 0x7F);

		public HardwareHealth HardwareHealth
		{
			get
			{
				byte b = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[3];
				if (Enum.IsDefined(typeof(HardwareHealth), (object)(Int32)b))
				{
					return (HardwareHealth)b;
				}
				return HardwareHealth.UnknownFault;
			}
		}

		public void SetLockState(LockState lockState)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)15, (byte)lockState, 0);
		}

		public void SetBatteryStatus(byte chargePercent)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, chargePercent, 1);
		}

		public void SetHardwareHealth(byte hardwareHealth)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, hardwareHealth, 3);
		}

		public void SetLowBatteryAlert(bool active, byte count)
		{
			byte b = (byte)(count & 0x7F);
			if (active)
			{
				b |= 0x80;
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b, 2);
		}

		public LogicalDeviceDoorLockStatus()
			: base(4u)
		{
		}

		public LogicalDeviceDoorLockStatus(LogicalDeviceDoorLockStatus originalStatus)
		{
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalStatus).Data;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(data, data.Length, false);
		}

		public LogicalDeviceDoorLockStatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceDoorLockStatusSerializable(this);
		}

		public override string ToString()
		{
			return String.Concat(String.Format("Device Status: {0} LockControlDisabled {1} ", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)this).ToString(), (object)LockControlDisabled), String.Format("LockStatus: {0} BatteryStatus: {1}% LowBatteryAlertActive: {2} ", (object)LockState, (object)BatteryStatus, (object)LowBatteryAlertActive), String.Format("LowBatteryAlertCount: {0} HardwareHealth: {1}", (object)LowBatteryAlertEventCount, (object)HardwareHealth));
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceDoorLockStatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceDoorLockStatusSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceDoorLockStatusSerializable);
			}
		}

		[JsonProperty]
		public bool LockControlDisabled
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public LockState LockState
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte BatteryStatus
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool LowBatteryAlertActive
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte LowBatteryAlertEventCount
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public HardwareHealth HardwareHealth
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceDoorLockStatusSerializable(bool lockControlDisabled, LockState lockState, byte batteryStatus, bool lowBatteryAlertActive, byte lowBatteryAlertEventCount, HardwareHealth hardwareHealth)
		{
			LockControlDisabled = lockControlDisabled;
			LockState = lockState;
			BatteryStatus = batteryStatus;
			LowBatteryAlertActive = lowBatteryAlertActive;
			LowBatteryAlertEventCount = lowBatteryAlertEventCount;
			HardwareHealth = hardwareHealth;
		}

		public LogicalDeviceDoorLockStatusSerializable(LogicalDeviceDoorLockStatus doorLockStatus)
			: this(doorLockStatus.LockControlDisabled, doorLockStatus.LockState, doorLockStatus.BatteryStatus, doorLockStatus.LowBatteryAlertActive, doorLockStatus.LowBatteryAlertEventCount, doorLockStatus.HardwareHealth)
		{
		}

		public override byte[] MakeRawData()
		{
			LogicalDeviceDoorLockStatus logicalDeviceDoorLockStatus = new LogicalDeviceDoorLockStatus();
			logicalDeviceDoorLockStatus.SetLockState(LockState);
			logicalDeviceDoorLockStatus.SetBatteryStatus(BatteryStatus);
			logicalDeviceDoorLockStatus.SetLowBatteryAlert(LowBatteryAlertActive, LowBatteryAlertEventCount);
			logicalDeviceDoorLockStatus.SetHardwareHealth((byte)HardwareHealth);
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceDoorLockStatus).CopyCurrentData();
		}

		public static LogicalDeviceDoorLockStatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceDoorLockStatus logicalDeviceDoorLockStatus = new LogicalDeviceDoorLockStatus();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceDoorLockStatus).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceDoorLockStatus).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceDoorLockStatus).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceDoorLockStatus).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceDoorLockStatus).Update(rawData, rawData.Length, false);
			return new LogicalDeviceDoorLockStatusSerializable(logicalDeviceDoorLockStatus);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceDoorLockStatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceDoorLockStatusSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("LockControlDisabled = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref LockControlDisabled)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LockState = ");
			builder.Append(((Object)LockState/*cast due to .constrained prefix*/).ToString());
			builder.Append(", BatteryStatus = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref BatteryStatus)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LowBatteryAlertActive = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref LowBatteryAlertActive)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LowBatteryAlertEventCount = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref LowBatteryAlertEventCount)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", HardwareHealth = ");
			builder.Append(((Object)HardwareHealth/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return (((((base.GetHashCode() * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(LockControlDisabled)) * -1521134295 + EqualityComparer<LockState>.Default.GetHashCode(LockState)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(BatteryStatus)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(LowBatteryAlertActive)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(LowBatteryAlertEventCount)) * -1521134295 + EqualityComparer<HardwareHealth>.Default.GetHashCode(HardwareHealth);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceDoorLockStatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceDoorLockStatusSerializable(LogicalDeviceDoorLockStatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceDoorLockStatusSerializable>)original)
		{
			LockControlDisabled = original.LockControlDisabled;
			LockState = original.LockState;
			BatteryStatus = original.BatteryStatus;
			LowBatteryAlertActive = original.LowBatteryAlertActive;
			LowBatteryAlertEventCount = original.LowBatteryAlertEventCount;
			HardwareHealth = original.HardwareHealth;
		}
	}
}
namespace OneControl.Devices.ChassisInfo
{
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceChassisInfoStatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceChassisInfoStatusSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceChassisInfoStatusSerializable);
			}
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public ParkBrake ParkBreak
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public IgnitionPowerSignal IgnitionPowerSignal
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public TowableSignalLightState TowableLeftTurnSignal
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public TowableSignalLightState TowableRightTurnSignal
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public TowableSignalLightState TowableRunningLightsSignal
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public TowableSignalLightState TowableBackupLightsSignal
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public float TowableBatteryVoltage
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public float TowableBrakeVoltage
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceChassisInfoStatusSerializable(ParkBrake parkBreak, IgnitionPowerSignal ignitionPowerSignal, TowableSignalLightState towableLeftTurnSignal, TowableSignalLightState towableRightTurnSignal, TowableSignalLightState towableRunningLightsSignal, TowableSignalLightState towableBackupLightsSignal, float towableBatteryVoltage, float towableBrakeVoltageVoltage)
		{
			ParkBreak = parkBreak;
			IgnitionPowerSignal = ignitionPowerSignal;
			TowableLeftTurnSignal = towableLeftTurnSignal;
			TowableRightTurnSignal = towableRightTurnSignal;
			TowableRunningLightsSignal = towableRunningLightsSignal;
			TowableBackupLightsSignal = towableBackupLightsSignal;
			TowableBatteryVoltage = towableBatteryVoltage;
			TowableBrakeVoltage = towableBrakeVoltageVoltage;
		}

		public LogicalDeviceChassisInfoStatusSerializable(LogicalDeviceChassisInfoStatus chassisInfoStatus)
			: this(chassisInfoStatus.ParkBreak, chassisInfoStatus.IgnitionPowerSignal, chassisInfoStatus.TowableLeftTurnSignal, chassisInfoStatus.TowableRightTurnSignal, chassisInfoStatus.TowableRunningLightsSignal, chassisInfoStatus.TowableBackupLightsSignal, chassisInfoStatus.TowableBatteryVoltage, chassisInfoStatus.TowableBrakeVoltageVoltage)
		{
		}

		public override byte[] MakeRawData()
		{
			LogicalDeviceChassisInfoStatus logicalDeviceChassisInfoStatus = new LogicalDeviceChassisInfoStatus();
			logicalDeviceChassisInfoStatus.SetParkBreak(ParkBreak);
			logicalDeviceChassisInfoStatus.SetIgnitionPowerSignal(IgnitionPowerSignal);
			logicalDeviceChassisInfoStatus.SetTowableLeftTurnSignal(TowableLeftTurnSignal);
			logicalDeviceChassisInfoStatus.SetTowableRightTurnSignal(TowableRightTurnSignal);
			logicalDeviceChassisInfoStatus.SetTowableRunningLightsSignal(TowableRunningLightsSignal);
			logicalDeviceChassisInfoStatus.SetTowableBackupLightsSignal(TowableBackupLightsSignal);
			logicalDeviceChassisInfoStatus.SetBatteryVoltage(TowableBatteryVoltage);
			logicalDeviceChassisInfoStatus.SetBrakeVoltage(TowableBrakeVoltage);
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceChassisInfoStatus).CopyCurrentData();
		}

		public static LogicalDeviceChassisInfoStatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceChassisInfoStatus logicalDeviceChassisInfoStatus = new LogicalDeviceChassisInfoStatus();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceChassisInfoStatus).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceChassisInfoStatus).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceChassisInfoStatus).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceChassisInfoStatus).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceChassisInfoStatus).Update(rawData, rawData.Length, false);
			return new LogicalDeviceChassisInfoStatusSerializable(logicalDeviceChassisInfoStatus);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceChassisInfoStatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceChassisInfoStatusSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("ParkBreak = ");
			builder.Append(((Object)ParkBreak/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IgnitionPowerSignal = ");
			builder.Append(((Object)IgnitionPowerSignal/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TowableLeftTurnSignal = ");
			builder.Append(((Object)TowableLeftTurnSignal/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TowableRightTurnSignal = ");
			builder.Append(((Object)TowableRightTurnSignal/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TowableRunningLightsSignal = ");
			builder.Append(((Object)TowableRunningLightsSignal/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TowableBackupLightsSignal = ");
			builder.Append(((Object)TowableBackupLightsSignal/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TowableBatteryVoltage = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref TowableBatteryVoltage)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TowableBrakeVoltage = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref TowableBrakeVoltage)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return (((((((base.GetHashCode() * -1521134295 + EqualityComparer<ParkBrake>.Default.GetHashCode(ParkBreak)) * -1521134295 + EqualityComparer<IgnitionPowerSignal>.Default.GetHashCode(IgnitionPowerSignal)) * -1521134295 + EqualityComparer<TowableSignalLightState>.Default.GetHashCode(TowableLeftTurnSignal)) * -1521134295 + EqualityComparer<TowableSignalLightState>.Default.GetHashCode(TowableRightTurnSignal)) * -1521134295 + EqualityComparer<TowableSignalLightState>.Default.GetHashCode(TowableRunningLightsSignal)) * -1521134295 + EqualityComparer<TowableSignalLightState>.Default.GetHashCode(TowableBackupLightsSignal)) * -1521134295 + EqualityComparer<float>.Default.GetHashCode(TowableBatteryVoltage)) * -1521134295 + EqualityComparer<float>.Default.GetHashCode(TowableBrakeVoltage);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceChassisInfoStatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceChassisInfoStatusSerializable(LogicalDeviceChassisInfoStatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceChassisInfoStatusSerializable>)original)
		{
			ParkBreak = original.ParkBreak;
			IgnitionPowerSignal = original.IgnitionPowerSignal;
			TowableLeftTurnSignal = original.TowableLeftTurnSignal;
			TowableRightTurnSignal = original.TowableRightTurnSignal;
			TowableRunningLightsSignal = original.TowableRunningLightsSignal;
			TowableBackupLightsSignal = original.TowableBackupLightsSignal;
			TowableBatteryVoltage = original.TowableBatteryVoltage;
			TowableBrakeVoltage = original.TowableBrakeVoltage;
		}
	}
}
namespace OneControl.Devices.BrakingSystem
{
	public class BrakingSystemException : LogicalDeviceException
	{
		public BrakingSystemException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}
	}
	public enum BrakingSystemStatusVersionType : Enum
	{
		Version1,
		Version2
	}
	public enum BrakingSystemCommand : Enum
	{
		StartAxleSelfLearn,
		StoreImuOffsets
	}
	public abstract class LogicalDeviceBrakingSystemCommand : LogicalDeviceCommandPacket
	{
		internal LogicalDeviceBrakingSystemCommand(BrakingSystemCommand command, IReadOnlyList<byte> data, int commandResponseTimeMs = 200)
			: base((byte)command, data, commandResponseTimeMs)
		{
		}

		internal LogicalDeviceBrakingSystemCommand(BrakingSystemCommand command, int commandResponseTimeMs = 200)
			: base((byte)command, commandResponseTimeMs)
		{
		}
	}
	public class LogicalDeviceBrakingSystemCommandStartAxleSelfLearn : LogicalDeviceBrakingSystemCommand
	{
		public LogicalDeviceBrakingSystemCommandStartAxleSelfLearn(IReadOnlyList<byte> data, int commandResponseTimeMs = 200)
			: base(BrakingSystemCommand.StartAxleSelfLearn, data, commandResponseTimeMs)
		{
		}

		public LogicalDeviceBrakingSystemCommandStartAxleSelfLearn(int commandResponseTimeMs = 200)
			: base(BrakingSystemCommand.StartAxleSelfLearn, commandResponseTimeMs)
		{
		}
	}
	public class LogicalDeviceBrakingSystemCommandStoreImuOffsets : LogicalDeviceBrakingSystemCommand
	{
		public LogicalDeviceBrakingSystemCommandStoreImuOffsets(IReadOnlyList<byte> data, int commandResponseTimeMs = 200)
			: base(BrakingSystemCommand.StoreImuOffsets, data, commandResponseTimeMs)
		{
		}

		public LogicalDeviceBrakingSystemCommandStoreImuOffsets(int commandResponseTimeMs = 200)
			: base(BrakingSystemCommand.StoreImuOffsets, commandResponseTimeMs)
		{
		}
	}
	public enum BrakingSystemController : Enum
	{
		Unknown,
		AbsSway,
		SwayCommand
	}
	[Flags]
	public enum BrakingSystemCapabilities : Enum
	{
		AbsBraking = 1,
		SwayMitigation = 2,
		Odometer = 4,
		PanicBrakeAssist = 8,
		ParkBrake = 0x10
	}
	public interface IBrakingSystem
	{
		DTC_ID UserMessageDtc { get; }

		uint OdometerKilometers { get; }

		bool IsOdometerSupported { get; }

		bool AreSettingsChangesLocked { get; }

		BrakingSystemController BrakingSystemController { get; }

		BrakingSystemFeatureActiveStatus ActiveStatusSway { get; }

		BrakingSystemFeatureActiveStatus ActiveStatusAntiLockBraking { get; }

		BrakingSystemFeatureActiveStatus ActiveStatusPanicBrakeAssist { get; }

		BrakingSystemFeatureActiveStatus ActiveStatusAntiChucking { get; }

		IObservableCache<ILogicalDeviceBrakeMotorControllerSystem, string> AssociatedMotorControllers { get; }

		BrakingSystemStatusVersionType StatusVersionType { get; }

		bool IsAssociatedWithMotorController(ILogicalDeviceBrakeMotorControllerSystem motorController);

		Task<BrakingSystemCapabilities> GetBrakingSystemCapabilitiesSupportedAsync(CancellationToken cancellationToken);

		Task<BrakingSystemCapabilities> GetBrakingSystemCapabilitiesEnabledAsync(CancellationToken cancellationToken);

		Task EnableBrakingSystemCapabilitiesAsync(BrakingSystemCapabilities capabilities, CancellationToken cancellationToken);

		Task<bool> PerformSelfTestAsync(CancellationToken cancellationToken);
	}
	public interface ILogicalDeviceBrakingSystem : IBrakingSystem, ILogicalDeviceWithCapability<ILogicalDeviceBrakingSystemCapability>, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatus<LogicalDeviceBrakingSystemStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceBrakingSystemStatus>, ILogicalDeviceFirmwareUpdateDevice, ILogicalDeviceJumpToBootloader
	{
	}
	public interface ILogicalDeviceBrakingSystemDirect : ILogicalDeviceBrakingSystem, IBrakingSystem, ILogicalDeviceWithCapability<ILogicalDeviceBrakingSystemCapability>, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatus<LogicalDeviceBrakingSystemStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceBrakingSystemStatus>, ILogicalDeviceFirmwareUpdateDevice, ILogicalDeviceJumpToBootloader, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public class LogicalDeviceBrakingSystem : LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>, ILogicalDeviceBrakingSystemDirect, ILogicalDeviceBrakingSystem, IBrakingSystem, ILogicalDeviceWithCapability<ILogicalDeviceBrakingSystemCapability>, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatus<LogicalDeviceBrakingSystemStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceBrakingSystemStatus>, ILogicalDeviceFirmwareUpdateDevice, ILogicalDeviceJumpToBootloader, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink, ILogicalDeviceWithStatusAlerts, ILogicalDeviceFeature
	{
		public interface ILogicalDevicePidBrakingSystemDeviceId : ILogicalDevicePid<PidMonitorPanelDeviceId>, ILogicalDevicePid
		{
			Task<PidMonitorPanelDeviceId> ReadPidDeviceIdAsync(CancellationToken cancellationToken);

			Task WriteDeviceAsync(PidMonitorPanelDeviceId pidDeviceId, CancellationToken cancellationToken);
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass49_0 : Object
		{
			public LogicalDeviceBrakingSystem <>4__this;

			public ILogicalDeviceAlert existingAlert;

			public ILogicalDeviceAlert newAlert;

			internal void <NotifyAlertChanged>b__0(ILogicalDeviceExAlertChanged logicalDeviceEx)
			{
				logicalDeviceEx.LogicalDeviceAlertChanged((ILogicalDevice)(object)<>4__this, existingAlert ?? newAlert, newAlert);
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass50_0 : Object
		{
			public LogicalDeviceBrakingSystem <>4__this;

			public LogicalDeviceAlertCapabilityFeature newAlert;

			internal void <UpdateAlert>b__0(ILogicalDeviceExAlertChanged logicalDeviceEx)
			{
				logicalDeviceEx.LogicalDeviceAlertChanged((ILogicalDevice)(object)<>4__this, (ILogicalDeviceAlert)(object)newAlert, (ILogicalDeviceAlert)(object)newAlert);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <EnableBrakingSystemCapabilitiesAsync>d__96 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceBrakingSystem <>4__this;

			public CancellationToken cancellationToken;

			public BrakingSystemCapabilities enableCapabilities;

			private TaskAwaiter<byte> <>u__1;

			private TaskAwaiter <>u__2;

			private void MoveNext()
			{
				//IL_0125: Expected O, but got Unknown
				//IL_005c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fe: Unknown result type (might be due to invalid IL or missing references)
				//IL_0103: Unknown result type (might be due to invalid IL or missing references)
				//IL_010b: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0029: Unknown result type (might be due to invalid IL or missing references)
				//IL_002e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cc: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0042: Unknown result type (might be due to invalid IL or missing references)
				//IL_0043: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e8: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBrakingSystem logicalDeviceBrakingSystem = <>4__this;
				try
				{
					TaskAwaiter val;
					TaskAwaiter<byte> val2;
					if (num != 0)
					{
						if (num == 1)
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter);
							num = (<>1__state = -1);
							goto IL_011a;
						}
						val2 = ((ILogicalDevicePid<byte>)(object)logicalDeviceBrakingSystem._optionalCapabilitiesMandatoryPid).ReadAsync(cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<byte>, <EnableBrakingSystemCapabilitiesAsync>d__96>(ref val2, ref this);
							return;
						}
					}
					else
					{
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<byte>);
						num = (<>1__state = -1);
					}
					byte result = val2.GetResult();
					if ((byte)((byte)(~(uint)enableCapabilities & 0xFF) & result) > 0)
					{
						throw new BrakingSystemException(String.Format("Can't disable a feature that is mandatory. To be disabled: {0} Mandatory: {1}", (object)enableCapabilities, (object)result));
					}
					val = ((ILogicalDevicePid<byte>)(object)logicalDeviceBrakingSystem._optionalCapabilitiesEnabledPid).WriteAsync((byte)enableCapabilities, cancellationToken).GetAwaiter();
					if (!((TaskAwaiter)(ref val)).IsCompleted)
					{
						num = (<>1__state = 1);
						<>u__2 = val;
						((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <EnableBrakingSystemCapabilitiesAsync>d__96>(ref val, ref this);
						return;
					}
					goto IL_011a;
					IL_011a:
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <GetBrakingSystemCapabilitiesEnabledAsync>d__95 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BrakingSystemCapabilities> <>t__builder;

			public LogicalDeviceBrakingSystem <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<byte> <>u__1;

			private void MoveNext()
			{
				//IL_0079: Expected O, but got Unknown
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0018: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBrakingSystem logicalDeviceBrakingSystem = <>4__this;
				BrakingSystemCapabilities result;
				try
				{
					TaskAwaiter<byte> val;
					if (num != 0)
					{
						val = ((ILogicalDevicePid<byte>)(object)logicalDeviceBrakingSystem._optionalCapabilitiesEnabledPid).ReadAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<byte>, <GetBrakingSystemCapabilitiesEnabledAsync>d__95>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<byte>);
						num = (<>1__state = -1);
					}
					result = (BrakingSystemCapabilities)val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <GetBrakingSystemCapabilitiesSupportedAsync>d__94 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BrakingSystemCapabilities> <>t__builder;

			public LogicalDeviceBrakingSystem <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<byte> <>u__1;

			private void MoveNext()
			{
				//IL_0079: Expected O, but got Unknown
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0018: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBrakingSystem logicalDeviceBrakingSystem = <>4__this;
				BrakingSystemCapabilities result;
				try
				{
					TaskAwaiter<byte> val;
					if (num != 0)
					{
						val = ((ILogicalDevicePid<byte>)(object)logicalDeviceBrakingSystem._optionalCapabilitiesSupportedPid).ReadAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<byte>, <GetBrakingSystemCapabilitiesSupportedAsync>d__94>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<byte>);
						num = (<>1__state = -1);
					}
					result = (BrakingSystemCapabilities)val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PerformSelfTestAsync>d__97 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceBrakingSystem <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<UInt48> <>u__2;

			private int <retry>5__2;

			private TaskAwaiter<bool> <>u__3;

			private void MoveNext()
			{
				//IL_048a: Expected O, but got Unknown
				//IL_007c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0081: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f1: Unknown result type (might be due to invalid IL or missing references)
				//IL_014d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0152: Unknown result type (might be due to invalid IL or missing references)
				//IL_015a: Unknown result type (might be due to invalid IL or missing references)
				//IL_020e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0213: Unknown result type (might be due to invalid IL or missing references)
				//IL_021b: Unknown result type (might be due to invalid IL or missing references)
				//IL_028d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0292: Unknown result type (might be due to invalid IL or missing references)
				//IL_029a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0350: Unknown result type (might be due to invalid IL or missing references)
				//IL_0355: Unknown result type (might be due to invalid IL or missing references)
				//IL_035d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0411: Unknown result type (might be due to invalid IL or missing references)
				//IL_0416: Unknown result type (might be due to invalid IL or missing references)
				//IL_041e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0047: Unknown result type (might be due to invalid IL or missing references)
				//IL_004c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00af: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b4: Unknown result type (might be due to invalid IL or missing references)
				//IL_010e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0118: Unknown result type (might be due to invalid IL or missing references)
				//IL_011d: Unknown result type (might be due to invalid IL or missing references)
				//IL_016b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0170: Unknown result type (might be due to invalid IL or missing references)
				//IL_017b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0190: Unknown result type (might be due to invalid IL or missing references)
				//IL_042f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0434: Unknown result type (might be due to invalid IL or missing references)
				//IL_043f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0454: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_0063: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cb: Unknown result type (might be due to invalid IL or missing references)
				//IL_0132: Unknown result type (might be due to invalid IL or missing references)
				//IL_0134: Unknown result type (might be due to invalid IL or missing references)
				//IL_01cf: Unknown result type (might be due to invalid IL or missing references)
				//IL_01d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_01de: Unknown result type (might be due to invalid IL or missing references)
				//IL_019a: Unknown result type (might be due to invalid IL or missing references)
				//IL_045e: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f3: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_023e: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0300: Unknown result type (might be due to invalid IL or missing references)
				//IL_0306: Invalid comparison between Unknown and I4
				//IL_0394: Unknown result type (might be due to invalid IL or missing references)
				//IL_039a: Invalid comparison between Unknown and I4
				//IL_024e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0258: Unknown result type (might be due to invalid IL or missing references)
				//IL_025d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0311: Unknown result type (might be due to invalid IL or missing references)
				//IL_031b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0320: Unknown result type (might be due to invalid IL or missing references)
				//IL_03d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_03dc: Unknown result type (might be due to invalid IL or missing references)
				//IL_03e1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0272: Unknown result type (might be due to invalid IL or missing references)
				//IL_0274: Unknown result type (might be due to invalid IL or missing references)
				//IL_0335: Unknown result type (might be due to invalid IL or missing references)
				//IL_0337: Unknown result type (might be due to invalid IL or missing references)
				//IL_03f6: Unknown result type (might be due to invalid IL or missing references)
				//IL_03f8: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBrakingSystem logicalDeviceBrakingSystem = <>4__this;
				bool result;
				try
				{
					TaskAwaiter val3;
					TaskAwaiter<bool> val2;
					TaskAwaiter<UInt48> val;
					UInt48 result2;
					switch (num)
					{
					default:
						val3 = ((ILogicalDevicePid<UInt48>)(object)logicalDeviceBrakingSystem._selfTestPid).WriteAsync(UInt48.op_Implicit((byte)0), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val3)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val3;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <PerformSelfTestAsync>d__97>(ref val3, ref this);
							return;
						}
						goto IL_0098;
					case 0:
						val3 = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_0098;
					case 1:
						val3 = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_0100;
					case 2:
						val = <>u__2;
						<>u__2 = default(TaskAwaiter<UInt48>);
						num = (<>1__state = -1);
						goto IL_0169;
					case 3:
						val3 = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_022a;
					case 4:
						val2 = <>u__3;
						<>u__3 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_02a9;
					case 5:
						val2 = <>u__3;
						<>u__3 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_036c;
					case 6:
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<UInt48>);
							num = (<>1__state = -1);
							break;
						}
						IL_02c3:
						if (<retry>5__2 < 30 && (int)((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)logicalDeviceBrakingSystem).ActiveConnection != 0)
						{
							val2 = TaskExtension.TryDelay(500, cancellationToken).GetAwaiter();
							if (!val2.IsCompleted)
							{
								num = (<>1__state = 4);
								<>u__3 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <PerformSelfTestAsync>d__97>(ref val2, ref this);
								return;
							}
							goto IL_02a9;
						}
						if ((int)((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)logicalDeviceBrakingSystem).ActiveConnection == 0)
						{
							<retry>5__2 = 0;
							goto IL_0386;
						}
						TaggedLog.Debug("LogicalDeviceBrakingSystem", "ABS didn't reset within our time limit.", Array.Empty<object>());
						result = false;
						goto end_IL_000e;
						IL_0098:
						((TaskAwaiter)(ref val3)).GetResult();
						val3 = Task.Delay(2000, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val3)).IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__1 = val3;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <PerformSelfTestAsync>d__97>(ref val3, ref this);
							return;
						}
						goto IL_0100;
						IL_036c:
						val2.GetResult();
						<retry>5__2++;
						goto IL_0386;
						IL_0100:
						((TaskAwaiter)(ref val3)).GetResult();
						val = ((ILogicalDevicePid<UInt48>)(object)logicalDeviceBrakingSystem._selfTestPid).ReadAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<UInt48>, <PerformSelfTestAsync>d__97>(ref val, ref this);
							return;
						}
						goto IL_0169;
						IL_022a:
						((TaskAwaiter)(ref val3)).GetResult();
						<retry>5__2 = 0;
						goto IL_02c3;
						IL_0169:
						result2 = val.GetResult();
						TaggedLog.Debug("LogicalDeviceBrakingSystem", String.Format("ABS self test result: {0}.", (object)result2), Array.Empty<object>());
						if (UInt48.op_Implicit(result2) <= 0 || UInt48.op_Implicit(result2) >= 720000)
						{
							val3 = ((ILogicalDevicePid<string>)(object)logicalDeviceBrakingSystem._microResetPid).WriteAsync("M_DEAD", cancellationToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val3)).IsCompleted)
							{
								num = (<>1__state = 3);
								<>u__1 = val3;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <PerformSelfTestAsync>d__97>(ref val3, ref this);
								return;
							}
							goto IL_022a;
						}
						TaggedLog.Debug("LogicalDeviceBrakingSystem", "Abs self test result successful.", Array.Empty<object>());
						result = true;
						goto end_IL_000e;
						IL_02a9:
						val2.GetResult();
						<retry>5__2++;
						goto IL_02c3;
						IL_0386:
						if (<retry>5__2 < 30 && (int)((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)logicalDeviceBrakingSystem).ActiveConnection != 1)
						{
							val2 = TaskExtension.TryDelay(500, cancellationToken).GetAwaiter();
							if (!val2.IsCompleted)
							{
								num = (<>1__state = 5);
								<>u__3 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <PerformSelfTestAsync>d__97>(ref val2, ref this);
								return;
							}
							goto IL_036c;
						}
						if ((int)((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)logicalDeviceBrakingSystem).ActiveConnection == 1)
						{
							TaggedLog.Debug("LogicalDeviceBrakingSystem", "ABS is back online, reading selfTestResult again.", Array.Empty<object>());
							val = ((ILogicalDevicePid<UInt48>)(object)logicalDeviceBrakingSystem._selfTestPid).ReadAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 6);
								<>u__2 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<UInt48>, <PerformSelfTestAsync>d__97>(ref val, ref this);
								return;
							}
							break;
						}
						TaggedLog.Debug("LogicalDeviceBrakingSystem", "ABS never came back online.", Array.Empty<object>());
						result = false;
						goto end_IL_000e;
					}
					result2 = val.GetResult();
					TaggedLog.Debug("LogicalDeviceBrakingSystem", String.Format("ABS self test result: {0}.", (object)result2), Array.Empty<object>());
					if (UInt48.op_Implicit(result2) > 0 && UInt48.op_Implicit(result2) < 720000)
					{
						TaggedLog.Debug("LogicalDeviceBrakingSystem", "Abs self test result successful after micro reset.", Array.Empty<object>());
						result = true;
					}
					else
					{
						result = false;
					}
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <UpdateFirmwareAsync>d__90 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceBrakingSystem <>4__this;

			public CancellationToken cancellationToken;

			public IReadOnlyList<byte> data;

			public Func<ILogicalDeviceTransferProgress, bool> progressAck;

			public Dictionary<FirmwareUpdateOption, object> options;

			private ILogicalDeviceFirmwareUpdateSession <firmwareUpdateSession>5__2;

			private TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice?> <>u__1;

			private TaskAwaiter <>u__2;

			private void MoveNext()
			{
				//IL_0142: Expected O, but got Unknown
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_0103: Unknown result type (might be due to invalid IL or missing references)
				//IL_0108: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00eb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ed: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBrakingSystem logicalDeviceBrakingSystem = <>4__this;
				try
				{
					TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice> val;
					if (num != 0)
					{
						if (num == 1)
						{
							goto IL_00a9;
						}
						val = FirmwareUpdateSupportEx.TryGetSupportedFirmwareUpdateDeviceSource(((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)logicalDeviceBrakingSystem).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceBrakingSystem, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>, <UpdateFirmwareAsync>d__90>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>);
						num = (<>1__state = -1);
					}
					ILogicalDeviceSourceDirectFirmwareUpdateDevice result = val.GetResult();
					if (result == null)
					{
						throw new FirmwareUpdateNotSupportedException((ILogicalDevice)(object)logicalDeviceBrakingSystem, (FirmwareUpdateSupport)0, (Exception)null);
					}
					<firmwareUpdateSession>5__2 = ((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)logicalDeviceBrakingSystem).DeviceService.FirmwareUpdateManager.StartFirmwareUpdateSession((ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceBrakingSystem);
					goto IL_00a9;
					IL_00a9:
					try
					{
						TaskAwaiter val2;
						if (num != 1)
						{
							val2 = ((IFirmwareUpdateDevice)result).UpdateFirmwareAsync(<firmwareUpdateSession>5__2, data, progressAck, cancellationToken, (IReadOnlyDictionary<FirmwareUpdateOption, object>)(object)options).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <UpdateFirmwareAsync>d__90>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
					}
					finally
					{
						if (num < 0 && <firmwareUpdateSession>5__2 != null)
						{
							((IDisposable)<firmwareUpdateSession>5__2).Dispose();
						}
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<firmwareUpdateSession>5__2 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<firmwareUpdateSession>5__2 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const int DefaultJumpToBootTimeMs = 5000;

		private const string LogTag = "LogicalDeviceBrakingSystem";

		private const string GenericAlertKey = "GenericBrakingSystemAlert";

		public const uint UnknownOdometerMileage = 4294967295u;

		private const int BackgroundAlertDelayMs = 30000;

		private const byte UnsupportedAlertByte = 0;

		private const string MicroResetText = "M_DEAD";

		private const int StartSelfTest = 0;

		private const int SelfTestFailureLow = 0;

		private const int SelfTestFailureHigh = 720000;

		private const int SelfTestStartDelayMs = 2000;

		private const int OnlineCheckDelayMs = 500;

		private const int MaxOnlineCheckRetries = 30;

		private readonly ILogicalDevicePidByte _optionalCapabilitiesSupportedPid;

		private readonly ILogicalDevicePidByte _optionalCapabilitiesEnabledPid;

		private readonly ILogicalDevicePidByte _optionalCapabilitiesMandatoryPid;

		private readonly ILogicalDevicePidUInt48 _selfTestPid;

		private readonly ILogicalDevicePidText _microResetPid;

		private ISourceCache<ILogicalDeviceBrakeMotorControllerSystem, string> _associatedMotorControllers;

		private readonly ConcurrentDictionary<string, ILogicalDeviceAlert> _alertDict = new ConcurrentDictionary<string, ILogicalDeviceAlert>();

		private readonly Dictionary<Pid, ILogicalDevicePidBrakingSystemDeviceId> _pidDeviceIdDict = new Dictionary<Pid, ILogicalDevicePidBrakingSystemDeviceId>();

		private readonly Dictionary<FirmwareUpdateOption, string> _defaultFirmwareUpdateOptions = new Dictionary<FirmwareUpdateOption, string>();

		private Dictionary<int, DTC_ID> BackgroundNotificationBrakingSystemDTC;

		private readonly LogicalDeviceFeatureManager<LogicalDeviceBrakingSystem> _featureManager;

		public BrakingSystemController BrakingSystemController
		{
			get
			{
				if (((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).LogicalId.ProductId == PRODUCT_ID.ABS_CONTROLLER_ASSEMBLY)
				{
					return BrakingSystemController.AbsSway;
				}
				if (((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).LogicalId.ProductId == PRODUCT_ID.ABS_SWAY_CONTROLLER_ASSEMBLY)
				{
					return BrakingSystemController.AbsSway;
				}
				if (((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).LogicalId.ProductId == PRODUCT_ID.ABS_AUSTRALIA_CONTROLLER_ASSEMBLY)
				{
					return BrakingSystemController.AbsSway;
				}
				if (((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).LogicalId.ProductId == PRODUCT_ID.CURT_GROUP_SWAY_COMMAND_LINE_2_0)
				{
					return BrakingSystemController.SwayCommand;
				}
				if (((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).LogicalId.ProductId == PRODUCT_ID.TRUECOURSE_OEM_AUSTRALIA_CONTROLLER_ASSEMBLY)
				{
					return BrakingSystemController.SwayCommand;
				}
				TaggedLog.Warning("LogicalDeviceBrakingSystem", String.Format("Unknown {0} for {1}", (object)"BrakingSystemController", (object)((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).LogicalId.ProductId), Array.Empty<object>());
				return BrakingSystemController.Unknown;
			}
		}

		public DTC_ID UserMessageDtc => ((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).DeviceStatus.UserMessageDtc;

		public uint OdometerKilometers
		{
			get
			{
				//IL_0010: Unknown result type (might be due to invalid IL or missing references)
				if (!IsOdometerSupported)
				{
					return 4294967295u;
				}
				return UInt24.op_Implicit(((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).DeviceStatus.OdometerKilometers);
			}
		}

		public bool IsOdometerSupported => ((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).DeviceStatus.IsOdometerSupported;

		public bool AreSettingsChangesLocked => ((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).DeviceStatus.AreSettingsChangesLocked.GetValueOrDefault(true);

		public BrakingSystemFeatureActiveStatus ActiveStatusSway => ((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).DeviceStatus.ActiveStatusSway;

		public BrakingSystemFeatureActiveStatus ActiveStatusAntiLockBraking => ((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).DeviceStatus.ActiveStatusAntiLockBraking;

		public BrakingSystemFeatureActiveStatus ActiveStatusPanicBrakeAssist => ((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).DeviceStatus.ActiveStatusPanicBrakeAssist;

		public BrakingSystemFeatureActiveStatus ActiveStatusAntiChucking => ((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).DeviceStatus.ActiveStatusAntiChucking;

		public BrakingSystemStatusVersionType StatusVersionType
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).DeviceStatus).Size != 6)
				{
					return BrakingSystemStatusVersionType.Version2;
				}
				return BrakingSystemStatusVersionType.Version1;
			}
		}

		public IEnumerable<ILogicalDeviceAlert> Alerts => (IEnumerable<ILogicalDeviceAlert>)(object)_alertDict.Values;

		public IReadOnlyDictionary<Pid, ILogicalDevicePidBrakingSystemDeviceId> PidDeviceIdDict => (IReadOnlyDictionary<Pid, ILogicalDevicePidBrakingSystemDeviceId>)(object)_pidDeviceIdDict;

		[field: CompilerGenerated]
		public ILogicalDevicePidULong LastMaintenanceOdometerKilometersPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidULong MaintenancePeriodKilometersPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidByte RimTeethCountPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidFixedPoint TireDiameterPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidFixedPoint TireTrackWidthPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public IObservableCache<ILogicalDeviceBrakeMotorControllerSystem, string> AssociatedMotorControllers
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			private set;
		}

		public virtual bool IsJumpToBootPidSupported => BrakingSystemController == BrakingSystemController.SwayCommand;

		public bool IsJumpToBootRequiredForFirmwareUpdate => BrakingSystemController == BrakingSystemController.SwayCommand;

		[field: CompilerGenerated]
		public ILogicalDevicePidJumpToBoot JumpToBootPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public IReadOnlyDictionary<FirmwareUpdateOption, string> DefaultFirmwareUpdateOptions
		{
			get
			{
				lock (_defaultFirmwareUpdateOptions)
				{
					if (_defaultFirmwareUpdateOptions.Count != 0)
					{
						return (IReadOnlyDictionary<FirmwareUpdateOption, string>)(object)_defaultFirmwareUpdateOptions;
					}
					if (IsJumpToBootRequiredForFirmwareUpdate)
					{
						_defaultFirmwareUpdateOptions[(FirmwareUpdateOption)1] = String.Format("{0}", (object)(UInt32)40960);
						_defaultFirmwareUpdateOptions[(FirmwareUpdateOption)3] = String.Format("{0}", (object)5000);
					}
					else
					{
						_defaultFirmwareUpdateOptions[(FirmwareUpdateOption)1] = String.Format("{0}", (object)(UInt32)131072);
					}
					return (IReadOnlyDictionary<FirmwareUpdateOption, string>)(object)_defaultFirmwareUpdateOptions;
				}
			}
		}

		public IEnumerable<ValueTuple<LogicalDeviceCapabilityFeatureId, LogicalDeviceCapabilityFeatureStatus>> CapabilityFeatureStatus => _featureManager.CapabilityFeatureStatus;

		public LogicalDeviceBrakingSystem(ILogicalDeviceId logicalDeviceId, ILogicalDeviceBrakingSystemCapability capability, LogicalDeviceBrakingSystemStatus status, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
		{
			//IL_03bf: Unknown result type (might be due to invalid IL or missing references)
			//IL_03c9: Expected O, but got Unknown
			//IL_03dd: Unknown result type (might be due to invalid IL or missing references)
			//IL_03e7: Expected O, but got Unknown
			//IL_03fb: Unknown result type (might be due to invalid IL or missing references)
			//IL_0405: Expected O, but got Unknown
			//IL_0412: Unknown result type (might be due to invalid IL or missing references)
			//IL_041c: Expected O, but got Unknown
			//IL_042b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0435: Expected O, but got Unknown
			//IL_0444: Unknown result type (might be due to invalid IL or missing references)
			//IL_044e: Expected O, but got Unknown
			//IL_045b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0465: Expected O, but got Unknown
			//IL_0472: Unknown result type (might be due to invalid IL or missing references)
			//IL_047c: Expected O, but got Unknown
			//IL_0489: Unknown result type (might be due to invalid IL or missing references)
			//IL_0493: Expected O, but got Unknown
			//IL_049e: Unknown result type (might be due to invalid IL or missing references)
			//IL_04a8: Expected O, but got Unknown
			//IL_04b7: Unknown result type (might be due to invalid IL or missing references)
			//IL_04c1: Expected O, but got Unknown
			//IL_04c8: Unknown result type (might be due to invalid IL or missing references)
			//IL_04ce: Invalid comparison between Unknown and I4
			//IL_04d2: Unknown result type (might be due to invalid IL or missing references)
			//IL_04d8: Unknown result type (might be due to invalid IL or missing references)
			//IL_04f9: Unknown result type (might be due to invalid IL or missing references)
			//IL_0519: Unknown result type (might be due to invalid IL or missing references)
			//IL_0539: Unknown result type (might be due to invalid IL or missing references)
			Dictionary<int, DTC_ID> obj = new Dictionary<int, DTC_ID>();
			obj.Add(0, (DTC_ID)0);
			obj.Add(1, (DTC_ID)1674);
			obj.Add(2, (DTC_ID)6);
			obj.Add(3, (DTC_ID)1755);
			obj.Add(4, (DTC_ID)1756);
			obj.Add(5, (DTC_ID)1757);
			obj.Add(6, (DTC_ID)1758);
			obj.Add(7, (DTC_ID)1759);
			obj.Add(8, (DTC_ID)1760);
			obj.Add(9, (DTC_ID)1761);
			obj.Add(10, (DTC_ID)1762);
			obj.Add(11, (DTC_ID)1763);
			obj.Add(12, (DTC_ID)1764);
			obj.Add(13, (DTC_ID)1765);
			obj.Add(14, (DTC_ID)1766);
			obj.Add(15, (DTC_ID)1767);
			obj.Add(16, (DTC_ID)1768);
			obj.Add(17, (DTC_ID)1769);
			obj.Add(18, (DTC_ID)1770);
			obj.Add(19, (DTC_ID)1771);
			obj.Add(20, (DTC_ID)1772);
			obj.Add(21, (DTC_ID)1773);
			obj.Add(22, (DTC_ID)1774);
			obj.Add(23, (DTC_ID)1775);
			obj.Add(24, (DTC_ID)1776);
			obj.Add(25, (DTC_ID)1777);
			obj.Add(26, (DTC_ID)1778);
			obj.Add(27, (DTC_ID)1779);
			obj.Add(28, (DTC_ID)1780);
			obj.Add(29, (DTC_ID)1781);
			obj.Add(30, (DTC_ID)1782);
			obj.Add(31, (DTC_ID)1783);
			obj.Add(32, (DTC_ID)1784);
			obj.Add(33, (DTC_ID)1785);
			obj.Add(34, (DTC_ID)1786);
			obj.Add(35, (DTC_ID)1787);
			obj.Add(36, (DTC_ID)1788);
			obj.Add(37, (DTC_ID)1789);
			obj.Add(38, (DTC_ID)1790);
			obj.Add(39, (DTC_ID)1791);
			obj.Add(40, (DTC_ID)1792);
			obj.Add(41, (DTC_ID)1793);
			obj.Add(42, (DTC_ID)1794);
			obj.Add(43, (DTC_ID)1795);
			obj.Add(44, (DTC_ID)1796);
			obj.Add(45, (DTC_ID)1823);
			obj.Add(46, (DTC_ID)1824);
			obj.Add(47, (DTC_ID)1825);
			obj.Add(48, (DTC_ID)1826);
			obj.Add(49, (DTC_ID)1827);
			obj.Add(50, (DTC_ID)1828);
			obj.Add(51, (DTC_ID)1829);
			obj.Add(52, (DTC_ID)1822);
			obj.Add(53, (DTC_ID)1830);
			obj.Add(54, (DTC_ID)1797);
			obj.Add(55, (DTC_ID)1798);
			obj.Add(56, (DTC_ID)1799);
			obj.Add(57, (DTC_ID)1800);
			obj.Add(58, (DTC_ID)1801);
			obj.Add(59, (DTC_ID)1802);
			obj.Add(60, (DTC_ID)1806);
			obj.Add(61, (DTC_ID)1807);
			obj.Add(62, (DTC_ID)1808);
			obj.Add(63, (DTC_ID)1809);
			obj.Add(64, (DTC_ID)1810);
			obj.Add(65, (DTC_ID)1811);
			obj.Add(66, (DTC_ID)5);
			obj.Add(67, (DTC_ID)1869);
			obj.Add(68, (DTC_ID)1870);
			obj.Add(69, (DTC_ID)1871);
			BackgroundNotificationBrakingSystemDTC = obj;
			base..ctor(logicalDeviceId, status, capability, service, isFunctionClassChangeable);
			JumpToBootPid = (ILogicalDevicePidJumpToBoot)new LogicalDevicePidJumpToBoot((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)390), (LogicalDeviceSessionType)3);
			LastMaintenanceOdometerKilometersPid = (ILogicalDevicePidULong)new LogicalDevicePidULong((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)371), (LogicalDeviceSessionType)0, (Func<ulong, bool>)null, 255uL);
			MaintenancePeriodKilometersPid = (ILogicalDevicePidULong)new LogicalDevicePidULong((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)364), (LogicalDeviceSessionType)0, (Func<ulong, bool>)null, 255uL);
			RimTeethCountPid = (ILogicalDevicePidByte)new LogicalDevicePidByte((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)363), (LogicalDeviceSessionType)0);
			TireDiameterPid = (ILogicalDevicePidFixedPoint)new LogicalDevicePidFixedPoint((FixedPointType)1, (ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)362), (LogicalDeviceSessionType)0, (Func<ulong, bool>)null);
			TireTrackWidthPid = (ILogicalDevicePidFixedPoint)new LogicalDevicePidFixedPoint((FixedPointType)1, (ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)361), (LogicalDeviceSessionType)0, (Func<ulong, bool>)null);
			_optionalCapabilitiesSupportedPid = (ILogicalDevicePidByte)new LogicalDevicePidByte((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)391), (LogicalDeviceSessionType)2);
			_optionalCapabilitiesEnabledPid = (ILogicalDevicePidByte)new LogicalDevicePidByte((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)392), (LogicalDeviceSessionType)3);
			_optionalCapabilitiesMandatoryPid = (ILogicalDevicePidByte)new LogicalDevicePidByte((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)393), (LogicalDeviceSessionType)2);
			_selfTestPid = (ILogicalDevicePidUInt48)new LogicalDevicePidUInt48((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)71), (LogicalDeviceSessionType)2, (Func<ulong, bool>)null);
			_microResetPid = (ILogicalDevicePidText)new LogicalDevicePidText((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)377), (LogicalDeviceSessionType)3, (LogicalDevicePidTextEncoding)0, (Func<ulong, bool>)null);
			UpdateAlert("GenericBrakingSystemAlert", (int)status.UserMessageDtc > 0);
			_featureManager = new LogicalDeviceFeatureManager<LogicalDeviceBrakingSystem>(this);
			if (((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).CustomDeviceName == null)
			{
				string text = (((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).CustomDeviceName = FunctionNameExtension.GetName(FunctionNameExtension.ToFunctionName(logicalDeviceId.FunctionName)));
			}
			if (((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).CustomDeviceNameShort == null)
			{
				string text = (((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).CustomDeviceNameShort = FunctionNameExtension.GetNameShort(FunctionNameExtension.ToFunctionName(logicalDeviceId.FunctionName)));
			}
			if (((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).CustomDeviceNameShortAbbreviated == null)
			{
				string text = (((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).CustomDeviceNameShortAbbreviated = FunctionNameExtension.GetNameShortAbbreviated(FunctionNameExtension.ToFunctionName(logicalDeviceId.FunctionName)));
			}
			_associatedMotorControllers = (ISourceCache<ILogicalDeviceBrakeMotorControllerSystem, string>)(object)new SourceCache<ILogicalDeviceBrakeMotorControllerSystem, string>((Func<ILogicalDeviceBrakeMotorControllerSystem, string>)((ILogicalDeviceBrakeMotorControllerSystem mbc) => ((ILogicalDevice)mbc).ImmutableUniqueId));
			AssociatedMotorControllers = ObservableCacheEx.AsObservableCache<ILogicalDeviceBrakeMotorControllerSystem, string>((IObservableCache<ILogicalDeviceBrakeMotorControllerSystem, string>)(object)_associatedMotorControllers);
		}

		public override bool Rename(FUNCTION_NAME newFunctionName, int newFunctionInstance)
		{
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_002f: Unknown result type (might be due to invalid IL or missing references)
			bool num = ((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).Rename(newFunctionName, newFunctionInstance);
			if (num)
			{
				((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).CustomDeviceName = FunctionNameExtension.GetName(FunctionNameExtension.ToFunctionName(newFunctionName));
				((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).CustomDeviceNameShort = FunctionNameExtension.GetNameShort(FunctionNameExtension.ToFunctionName(newFunctionName));
				((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).CustomDeviceNameShortAbbreviated = FunctionNameExtension.GetNameShortAbbreviated(FunctionNameExtension.ToFunctionName(newFunctionName));
			}
			return num;
		}

		public LogicalDeviceBrakingSystem(ILogicalDeviceId logicalDeviceId, LogicalDeviceBrakingSystemCapability capability, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: this(logicalDeviceId, capability, new LogicalDeviceBrakingSystemStatus(), service, isFunctionClassChangeable)
		{
		}

		public override void OnDeviceStatusChanged()
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0012: Invalid comparison between Unknown and I4
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0024: Unknown result type (might be due to invalid IL or missing references)
			base.OnDeviceStatusChanged();
			bool isActive = (int)((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).DeviceStatus.UserMessageDtc > 0;
			UpdateAlert("GenericBrakingSystemAlert", isActive);
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("UserMessageDtc");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("OdometerKilometers");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("ActiveStatusSway");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("AreSettingsChangesLocked");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("ActiveStatusAntiLockBraking");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("ActiveStatusPanicBrakeAssist");
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("ActiveStatusAntiChucking");
		}

		protected override void DebugUpdateDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, uint dataLength, string optionalText = "")
		{
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			base.DebugUpdateDeviceStatusChanged(oldStatusData, statusData, dataLength, String.Format("Odometer = {0}, UserMessageDTC = {1}", (object)((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).DeviceStatus.OdometerKilometers, (object)((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).DeviceStatus.UserMessageDtc));
		}

		public override void Dispose(bool disposing)
		{
			((CommonDisposable)_featureManager).TryDispose();
			base.Dispose(disposing);
		}

		public void UpdateAlert(string alertName, bool isActive, Nullable<int> count = default(Nullable<int>))
		{
			//IL_004c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0052: Unknown result type (might be due to invalid IL or missing references)
			//IL_0053: Unknown result type (might be due to invalid IL or missing references)
			//IL_0059: Expected O, but got Unknown
			//IL_001c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0021: Unknown result type (might be due to invalid IL or missing references)
			//IL_0022: Unknown result type (might be due to invalid IL or missing references)
			//IL_0023: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceAlert val = default(ILogicalDeviceAlert);
			_alertDict.TryGetValue(alertName, ref val);
			if (val != null && val.IsActive == isActive)
			{
				Nullable<int> count2 = val.Count;
				Nullable<int> val2 = count;
				if ((count2.GetValueOrDefault() == val2.GetValueOrDefault()) & (count2.HasValue == val2.HasValue))
				{
					return;
				}
			}
			LogicalDeviceAlert val3 = new LogicalDeviceAlert(alertName, isActive, default(Nullable<int>));
			_alertDict[alertName] = (ILogicalDeviceAlert)(object)val3;
			NotifyAlertChanged(val, (ILogicalDeviceAlert)(object)val3);
		}

		private void NotifyAlertChanged(ILogicalDeviceAlert? existingAlert, ILogicalDeviceAlert newAlert)
		{
			<>c__DisplayClass49_0 CS$<>8__locals11 = new <>c__DisplayClass49_0();
			CS$<>8__locals11.<>4__this = this;
			CS$<>8__locals11.existingAlert = existingAlert;
			CS$<>8__locals11.newAlert = newAlert;
			if (CS$<>8__locals11.existingAlert == null)
			{
				TaggedLog.Information("LogicalDeviceBrakingSystem", String.Format("Logical Device Notify NEW Alert {0} for {1}", (object)CS$<>8__locals11.newAlert, (object)this), Array.Empty<object>());
			}
			else
			{
				TaggedLog.Information("LogicalDeviceBrakingSystem", String.Format("Logical Device Notify Alert {0} to {1} for {2}", (object)CS$<>8__locals11.existingAlert, (object)CS$<>8__locals11.newAlert, (object)this), Array.Empty<object>());
			}
			((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).PerformLogicalDeviceExAction<ILogicalDeviceExAlertChanged>((Action<ILogicalDeviceExAlertChanged>)delegate(ILogicalDeviceExAlertChanged logicalDeviceEx)
			{
				logicalDeviceEx.LogicalDeviceAlertChanged((ILogicalDevice)(object)CS$<>8__locals11.<>4__this, CS$<>8__locals11.existingAlert ?? CS$<>8__locals11.newAlert, CS$<>8__locals11.newAlert);
			});
			ILogicalDeviceManager deviceManager = ((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).DeviceService.DeviceManager;
			if (deviceManager != null)
			{
				deviceManager.ContainerDataSourceSync(true);
			}
		}

		public void UpdateAlert(LogicalDeviceCapabilityFeatureId capabilityFeatureId, LogicalDeviceCapabilityFeatureStatus featureStatus, LogicalDeviceCapabilityFeatureStatusPending featureStatusPending)
		{
			//IL_000e: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0010: Unknown result type (might be due to invalid IL or missing references)
			//IL_0011: Unknown result type (might be due to invalid IL or missing references)
			//IL_001b: Expected O, but got Unknown
			<>c__DisplayClass50_0 CS$<>8__locals6 = new <>c__DisplayClass50_0();
			CS$<>8__locals6.<>4__this = this;
			CS$<>8__locals6.newAlert = new LogicalDeviceAlertCapabilityFeature(capabilityFeatureId, featureStatus, featureStatusPending);
			TaggedLog.Information("LogicalDeviceBrakingSystem", String.Format("Logical Device Notify Alert {0} for {1}", (object)CS$<>8__locals6.newAlert, (object)this), Array.Empty<object>());
			((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).PerformLogicalDeviceExAction<ILogicalDeviceExAlertChanged>((Action<ILogicalDeviceExAlertChanged>)delegate(ILogicalDeviceExAlertChanged logicalDeviceEx)
			{
				logicalDeviceEx.LogicalDeviceAlertChanged((ILogicalDevice)(object)CS$<>8__locals6.<>4__this, (ILogicalDeviceAlert)(object)CS$<>8__locals6.newAlert, (ILogicalDeviceAlert)(object)CS$<>8__locals6.newAlert);
			});
		}

		public void UpdateAlert(byte alertId, byte rawData)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			//IL_002a: Unknown result type (might be due to invalid IL or missing references)
			//IL_002f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0036: Unknown result type (might be due to invalid IL or missing references)
			//IL_0041: Unknown result type (might be due to invalid IL or missing references)
			//IL_0043: Invalid comparison between Unknown and I4
			//IL_0047: Unknown result type (might be due to invalid IL or missing references)
			//IL_004d: Unknown result type (might be due to invalid IL or missing references)
			DateTime lastUpdatedTimestamp = base.LastUpdatedTimestamp;
			DateTime now = DateTime.Now;
			if (!(lastUpdatedTimestamp > ((DateTime)(ref now)).AddMilliseconds(-30000.0)) && alertId == 0)
			{
				DTC_ID val = ConvertToDtc(rawData);
				UpdateAlert(String.Format("{0}", (object)val), (int)val > 0);
			}
		}

		public bool IsAssociatedWithMotorController(ILogicalDeviceBrakeMotorControllerSystem motorController)
		{
			if (motorController == null)
			{
				return false;
			}
			if (_associatedMotorControllers == null)
			{
				return false;
			}
			return ListEx.IndexOf<string>((IEnumerable<string>)(object)((IObservableCache<ILogicalDeviceBrakeMotorControllerSystem, string>)(object)_associatedMotorControllers).Keys, ((ILogicalDevice)motorController).ImmutableUniqueId) >= 0;
		}

		public virtual Task<FirmwareUpdateSupport> TryGetFirmwareUpdateSupportAsync(CancellationToken cancelToken)
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			return FirmwareUpdateSupportEx.TryGetFirmwareUpdateSupportAsync(((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)this, cancelToken);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task UpdateFirmwareAsync(IReadOnlyList<byte> data, Func<ILogicalDeviceTransferProgress, bool> progressAck, CancellationToken cancellationToken, Dictionary<FirmwareUpdateOption, object>? options = null)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<UpdateFirmwareAsync>d__90 <UpdateFirmwareAsync>d__ = default(<UpdateFirmwareAsync>d__90);
			<UpdateFirmwareAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<UpdateFirmwareAsync>d__.<>4__this = this;
			<UpdateFirmwareAsync>d__.data = data;
			<UpdateFirmwareAsync>d__.progressAck = progressAck;
			<UpdateFirmwareAsync>d__.cancellationToken = cancellationToken;
			<UpdateFirmwareAsync>d__.options = options;
			<UpdateFirmwareAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Start<<UpdateFirmwareAsync>d__90>(ref <UpdateFirmwareAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<BrakingSystemCapabilities> GetBrakingSystemCapabilitiesSupportedAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<GetBrakingSystemCapabilitiesSupportedAsync>d__94 <GetBrakingSystemCapabilitiesSupportedAsync>d__ = default(<GetBrakingSystemCapabilitiesSupportedAsync>d__94);
			<GetBrakingSystemCapabilitiesSupportedAsync>d__.<>t__builder = AsyncTaskMethodBuilder<BrakingSystemCapabilities>.Create();
			<GetBrakingSystemCapabilitiesSupportedAsync>d__.<>4__this = this;
			<GetBrakingSystemCapabilitiesSupportedAsync>d__.cancellationToken = cancellationToken;
			<GetBrakingSystemCapabilitiesSupportedAsync>d__.<>1__state = -1;
			<GetBrakingSystemCapabilitiesSupportedAsync>d__.<>t__builder.Start<<GetBrakingSystemCapabilitiesSupportedAsync>d__94>(ref <GetBrakingSystemCapabilitiesSupportedAsync>d__);
			return <GetBrakingSystemCapabilitiesSupportedAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<BrakingSystemCapabilities> GetBrakingSystemCapabilitiesEnabledAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<GetBrakingSystemCapabilitiesEnabledAsync>d__95 <GetBrakingSystemCapabilitiesEnabledAsync>d__ = default(<GetBrakingSystemCapabilitiesEnabledAsync>d__95);
			<GetBrakingSystemCapabilitiesEnabledAsync>d__.<>t__builder = AsyncTaskMethodBuilder<BrakingSystemCapabilities>.Create();
			<GetBrakingSystemCapabilitiesEnabledAsync>d__.<>4__this = this;
			<GetBrakingSystemCapabilitiesEnabledAsync>d__.cancellationToken = cancellationToken;
			<GetBrakingSystemCapabilitiesEnabledAsync>d__.<>1__state = -1;
			<GetBrakingSystemCapabilitiesEnabledAsync>d__.<>t__builder.Start<<GetBrakingSystemCapabilitiesEnabledAsync>d__95>(ref <GetBrakingSystemCapabilitiesEnabledAsync>d__);
			return <GetBrakingSystemCapabilitiesEnabledAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task EnableBrakingSystemCapabilitiesAsync(BrakingSystemCapabilities enableCapabilities, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<EnableBrakingSystemCapabilitiesAsync>d__96 <EnableBrakingSystemCapabilitiesAsync>d__ = default(<EnableBrakingSystemCapabilitiesAsync>d__96);
			<EnableBrakingSystemCapabilitiesAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<EnableBrakingSystemCapabilitiesAsync>d__.<>4__this = this;
			<EnableBrakingSystemCapabilitiesAsync>d__.enableCapabilities = enableCapabilities;
			<EnableBrakingSystemCapabilitiesAsync>d__.cancellationToken = cancellationToken;
			<EnableBrakingSystemCapabilitiesAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <EnableBrakingSystemCapabilitiesAsync>d__.<>t__builder)).Start<<EnableBrakingSystemCapabilitiesAsync>d__96>(ref <EnableBrakingSystemCapabilitiesAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <EnableBrakingSystemCapabilitiesAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> PerformSelfTestAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<PerformSelfTestAsync>d__97 <PerformSelfTestAsync>d__ = default(<PerformSelfTestAsync>d__97);
			<PerformSelfTestAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<PerformSelfTestAsync>d__.<>4__this = this;
			<PerformSelfTestAsync>d__.cancellationToken = cancellationToken;
			<PerformSelfTestAsync>d__.<>1__state = -1;
			<PerformSelfTestAsync>d__.<>t__builder.Start<<PerformSelfTestAsync>d__97>(ref <PerformSelfTestAsync>d__);
			return <PerformSelfTestAsync>d__.<>t__builder.Task;
		}

		private DTC_ID ConvertToDtc(byte rawData)
		{
			//IL_0036: Unknown result type (might be due to invalid IL or missing references)
			if (BackgroundNotificationBrakingSystemDTC.Count < rawData)
			{
				TaggedLog.Information("LogicalDeviceBrakingSystem", String.Format("ConvertToDtc called with a value that does not map to a dtc. Value {0}", (object)(Int32)rawData), Array.Empty<object>());
				return (DTC_ID)0;
			}
			return BackgroundNotificationBrakingSystemDTC[(int)rawData];
		}

		public Task<ValueTuple<LogicalDeviceCapabilityFeatureStatus, LogicalDeviceCapabilityFeatureStatusPending>> TryEnableFeatureAsync(LogicalDeviceCapabilityFeatureId capabilityFeatureId, string requiredSoftwarePartNumber, CancellationToken cancellationToken)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			return _featureManager.TryEnableFeatureAsync(capabilityFeatureId, requiredSoftwarePartNumber, cancellationToken);
		}

		public LogicalDeviceCapabilityFeatureStatus GetFeatureStatus(LogicalDeviceCapabilityFeatureId capabilityFeatureId)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			return _featureManager.GetFeatureStatus(capabilityFeatureId);
		}

		public LogicalDeviceCapabilityFeatureStatusPending GetFeatureStatusPending(LogicalDeviceCapabilityFeatureId capabilityFeatureId)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			return _featureManager.GetFeatureStatusPending(capabilityFeatureId);
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)this).LastReceivedNetworkStatus;
		}
	}
	[Flags]
	public enum BrakingSystemCapabilityFlag : Enum
	{
		None = 0,
		SupportsAntiLockBrakingSystem = 1,
		SupportsSway = 2,
		OdometerNotSupported = 4,
		SupportsPanicBrakeAssist = 8,
		SupportsAntiChucking = 0x10,
		Reserved2 = 0x20,
		Reserved3 = 0x40,
		Reserved4 = 0x80,
		All = 0x1F
	}
	public interface ILogicalDeviceBrakingSystemCapability : ILogicalDeviceCapabilityWithFeatures, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		bool IsAntiLockBrakingSystemSupported { get; }

		bool IsSwaySupported { get; }

		bool OdometerNotSupported { get; }

		bool IsPanicBrakeAssistSupported { get; }

		bool IsAntiChuckingSupported { get; }

		bool IsValid { get; }
	}
	public class LogicalDeviceBrakingSystemCapability : LogicalDeviceCapabilityWithFeatures, ILogicalDeviceBrakingSystemCapability, ILogicalDeviceCapabilityWithFeatures, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		private BrakingSystemCapabilityFlag _capabilityFlag => (BrakingSystemCapabilityFlag)((LogicalDeviceCapability)this).RawValue;

		public bool IsAntiLockBrakingSystemSupported => ((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)BrakingSystemCapabilityFlag.SupportsAntiLockBrakingSystem);

		public bool IsSwaySupported => ((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)BrakingSystemCapabilityFlag.SupportsSway);

		public bool OdometerNotSupported => ((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)BrakingSystemCapabilityFlag.OdometerNotSupported);

		public bool IsPanicBrakeAssistSupported => ((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)BrakingSystemCapabilityFlag.SupportsPanicBrakeAssist);

		public bool IsAntiChuckingSupported => ((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)BrakingSystemCapabilityFlag.SupportsAntiChucking);

		public bool IsValid => _capabilityFlag != BrakingSystemCapabilityFlag.None;

		[field: CompilerGenerated]
		public override IReadOnlyList<LogicalDeviceCapabilityFeatureId> CapabilityFeaturesAll
		{
			[CompilerGenerated]
			get;
		}

		public LogicalDeviceBrakingSystemCapability(Nullable<byte> rawCapability)
		{
			//IL_002f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0037: Unknown result type (might be due to invalid IL or missing references)
			List<LogicalDeviceCapabilityFeatureId> obj = new List<LogicalDeviceCapabilityFeatureId>();
			obj.Add((LogicalDeviceCapabilityFeatureId)1);
			obj.Add((LogicalDeviceCapabilityFeatureId)2);
			obj.Add((LogicalDeviceCapabilityFeatureId)3);
			obj.Add((LogicalDeviceCapabilityFeatureId)4);
			obj.Add((LogicalDeviceCapabilityFeatureId)5);
			CapabilityFeaturesAll = (IReadOnlyList<LogicalDeviceCapabilityFeatureId>)(object)obj;
			((LogicalDeviceCapabilityWithFeatures)this)..ctor(rawCapability, (CapabilityWithFeaturesOption)1);
			((LogicalDeviceCapability)this).UpdateDeviceCapability(rawCapability);
		}

		public LogicalDeviceBrakingSystemCapability(BrakingSystemCapabilityFlag capabilityFlags)
			: this(new Nullable<byte>((byte)capabilityFlags))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)


		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsAntiLockBrakingSystemSupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsSwaySupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("OdometerNotSupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsPanicBrakeAssistSupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsAntiChuckingSupported");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsValid");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}

		protected override byte GetCapabilityFeatureBitMask(LogicalDeviceCapabilityFeatureId capabilityFeatureId)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			//IL_0010: Unknown result type (might be due to invalid IL or missing references)
			//IL_0012: Unknown result type (might be due to invalid IL or missing references)
			//IL_002c: Expected I4, but got Unknown
			if (!Enumerable.Contains<LogicalDeviceCapabilityFeatureId>((IEnumerable<LogicalDeviceCapabilityFeatureId>)(object)((LogicalDeviceCapabilityWithFeatures)this).CapabilityFeaturesAll, capabilityFeatureId))
			{
				return 0;
			}
			return (capabilityFeatureId - 1) switch
			{
				0 => 1, 
				1 => 4, 
				2 => 2, 
				3 => 8, 
				4 => 16, 
				_ => 0, 
			};
		}

		public override bool IsCapabilityFeatureEnabled(LogicalDeviceCapabilityFeatureId capabilityFeatureId)
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0002: Invalid comparison between Unknown and I4
			//IL_0010: Unknown result type (might be due to invalid IL or missing references)
			//IL_0005: Unknown result type (might be due to invalid IL or missing references)
			if ((int)capabilityFeatureId == 2)
			{
				return !((LogicalDeviceCapabilityWithFeatures)this).IsCapabilityFeatureEnabled(capabilityFeatureId);
			}
			return ((LogicalDeviceCapabilityWithFeatures)this).IsCapabilityFeatureEnabled(capabilityFeatureId);
		}
	}
	public interface ILogicalDeviceBrakingSystemCapabilitySim : ILogicalDeviceBrakingSystemCapability, ILogicalDeviceCapabilityWithFeatures, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		BrakingSystemCapabilityFlag CapabilitiesSupportedSim { get; }

		BrakingSystemCapabilityFlag CapabilitiesEnabledSim { get; }

		BrakingSystemCapabilityFlag CapabilitiesMandatorySim { get; }

		BrakingSystemCapabilityFlag CapabilitiesUserDisabledSim { get; }
	}
	public class LogicalDeviceBrakingSystemCapabilitySim : LogicalDeviceBrakingSystemCapability, ILogicalDeviceBrakingSystemCapabilitySim, ILogicalDeviceBrakingSystemCapability, ILogicalDeviceCapabilityWithFeatures, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		public BrakingSystemCapabilityFlag CapabilitiesSupportedSim
		{
			get
			{
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_000c: Unknown result type (might be due to invalid IL or missing references)
				LogicalDevicePidSimByte capabilitiesSupportedPidSim = ((LogicalDeviceCapabilityWithFeatures)this).CapabilitiesSupportedPidSim;
				return (BrakingSystemCapabilityFlag)UInt48.op_Implicit((capabilitiesSupportedPidSim != null) ? ((LogicalDevicePidSim)capabilitiesSupportedPidSim).ValueRaw : UInt48.op_Implicit((byte)31));
			}
		}

		public BrakingSystemCapabilityFlag CapabilitiesEnabledSim
		{
			get
			{
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_000c: Unknown result type (might be due to invalid IL or missing references)
				LogicalDevicePidSimByte capabilitiesEnabledPidSim = ((LogicalDeviceCapabilityWithFeatures)this).CapabilitiesEnabledPidSim;
				return (BrakingSystemCapabilityFlag)UInt48.op_Implicit((capabilitiesEnabledPidSim != null) ? ((LogicalDevicePidSim)capabilitiesEnabledPidSim).ValueRaw : UInt48.op_Implicit((byte)31));
			}
		}

		public BrakingSystemCapabilityFlag CapabilitiesMandatorySim
		{
			get
			{
				//IL_0012: Unknown result type (might be due to invalid IL or missing references)
				//IL_000b: Unknown result type (might be due to invalid IL or missing references)
				LogicalDevicePidSimByte capabilitiesMandatoryPidSim = ((LogicalDeviceCapabilityWithFeatures)this).CapabilitiesMandatoryPidSim;
				return (BrakingSystemCapabilityFlag)UInt48.op_Implicit((capabilitiesMandatoryPidSim != null) ? ((LogicalDevicePidSim)capabilitiesMandatoryPidSim).ValueRaw : UInt48.op_Implicit((byte)0));
			}
		}

		public BrakingSystemCapabilityFlag CapabilitiesUserDisabledSim
		{
			get
			{
				//IL_0012: Unknown result type (might be due to invalid IL or missing references)
				//IL_000b: Unknown result type (might be due to invalid IL or missing references)
				LogicalDevicePidSimByte capabilitiesUserDisabledPidSim = ((LogicalDeviceCapabilityWithFeatures)this).CapabilitiesUserDisabledPidSim;
				return (BrakingSystemCapabilityFlag)UInt48.op_Implicit((capabilitiesUserDisabledPidSim != null) ? ((LogicalDevicePidSim)capabilitiesUserDisabledPidSim).ValueRaw : UInt48.op_Implicit((byte)0));
			}
		}

		public LogicalDeviceBrakingSystemCapabilitySim(Nullable<byte> rawCapability)
			: base(rawCapability)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			EnableFeatureSim();
		}

		public LogicalDeviceBrakingSystemCapabilitySim(BrakingSystemCapabilityFlag capabilityFlags)
			: base(capabilityFlags)
		{
			EnableFeatureSim();
		}

		protected void EnableFeatureSim()
		{
			//IL_0009: Unknown result type (might be due to invalid IL or missing references)
			//IL_0013: Expected O, but got Unknown
			//IL_001c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Expected O, but got Unknown
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0038: Expected O, but got Unknown
			//IL_0040: Unknown result type (might be due to invalid IL or missing references)
			//IL_004a: Expected O, but got Unknown
			((LogicalDeviceCapabilityWithFeatures)this).CapabilitiesSupportedPidSim = new LogicalDevicePidSimByte(((LogicalDeviceCapabilityWithFeatures)this).CapabilitiesSupportedByFirmwarePid, (byte)31);
			((LogicalDeviceCapabilityWithFeatures)this).CapabilitiesEnabledPidSim = new LogicalDevicePidSimByte(((LogicalDeviceCapabilityWithFeatures)this).CapabilitiesEnabledPid, (byte)31);
			((LogicalDeviceCapabilityWithFeatures)this).CapabilitiesMandatoryPidSim = new LogicalDevicePidSimByte(((LogicalDeviceCapabilityWithFeatures)this).CapabilitiesMandatoryByFirmwarePid, (byte)0);
			((LogicalDeviceCapabilityWithFeatures)this).CapabilitiesUserDisabledPidSim = new LogicalDevicePidSimByte(((LogicalDeviceCapabilityWithFeatures)this).CapabilitiesUserDisabledPid, (byte)0);
		}
	}
	public class LogicalDeviceBrakingSystemFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice? MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 48)
			{
				return null;
			}
			return (ILogicalDevice?)(object)new LogicalDeviceBrakingSystem(logicalDeviceId, new LogicalDeviceBrakingSystemCapability(rawCapability), service);
		}
	}
	public class LogicalDeviceBrakingSystemSim : LogicalDeviceBrakingSystem, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SimulatorAsync>d__17 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public CancellationToken cancellationToken;

			public LogicalDeviceBrakingSystemSim <>4__this;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_01dd: Expected O, but got Unknown
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				//IL_006d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0074: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0140: Unknown result type (might be due to invalid IL or missing references)
				//IL_0145: Unknown result type (might be due to invalid IL or missing references)
				//IL_014c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0097: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0103: Unknown result type (might be due to invalid IL or missing references)
				//IL_010d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0112: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_0126: Unknown result type (might be due to invalid IL or missing references)
				//IL_0127: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_003a: Unknown result type (might be due to invalid IL or missing references)
				//IL_004e: Unknown result type (might be due to invalid IL or missing references)
				//IL_004f: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBrakingSystemSim logicalDeviceBrakingSystemSim = <>4__this;
				try
				{
					TaskAwaiter<bool> val;
					switch (num)
					{
					case 0:
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_0083;
					case 1:
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_00ef;
					case 2:
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_015b;
					default:
						{
							if (!((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
							{
								val = TaskExtension.TryDelay(1000, cancellationToken).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 0);
									<>u__1 = val;
									((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SimulatorAsync>d__17>(ref val, ref this);
									return;
								}
								goto IL_0083;
							}
							break;
						}
						IL_0083:
						val.GetResult();
						logicalDeviceBrakingSystemSim.UpdateOdometer();
						val = TaskExtension.TryDelay(250, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SimulatorAsync>d__17>(ref val, ref this);
							return;
						}
						goto IL_00ef;
						IL_015b:
						val.GetResult();
						logicalDeviceBrakingSystemSim.UpdateUserMessage();
						if (((LogicalDevice<ILogicalDeviceBrakingSystemCapability>)(object)logicalDeviceBrakingSystemSim).DeviceCapability is ILogicalDeviceBrakingSystemCapabilitySim capabilitySim)
						{
							logicalDeviceBrakingSystemSim._simStatus.SetActiveStatusSway(logicalDeviceBrakingSystemSim.MakeActiveStatus(capabilitySim, BrakingSystemCapabilityFlag.SupportsSway));
							logicalDeviceBrakingSystemSim._simStatus.SetActiveStatusAntiLockBraking(logicalDeviceBrakingSystemSim.MakeActiveStatus(capabilitySim, BrakingSystemCapabilityFlag.SupportsAntiLockBrakingSystem));
							logicalDeviceBrakingSystemSim._simStatus.SetActiveStatusPanicBrakeAssist(logicalDeviceBrakingSystemSim.MakeActiveStatus(capabilitySim, BrakingSystemCapabilityFlag.SupportsPanicBrakeAssist));
							logicalDeviceBrakingSystemSim._simStatus.SetActiveStatusAntiChucking(logicalDeviceBrakingSystemSim.MakeActiveStatus(capabilitySim, BrakingSystemCapabilityFlag.SupportsAntiChucking));
						}
						goto default;
						IL_00ef:
						val.GetResult();
						logicalDeviceBrakingSystemSim.UpdateRandomFlag();
						val = TaskExtension.TryDelay(250, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SimulatorAsync>d__17>(ref val, ref this);
							return;
						}
						goto IL_015b;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private const int StatusLength = 8;

		private const int OdometerIndex = 0;

		private const int FlagsIndex = 3;

		private const int UserMessageIndex = 4;

		private const int TickIntervalMs = 1000;

		private const int TickIntervalDelayMs = 250;

		private const int MaxOdometerValue = 16777215;

		private const int MinOdometerValue = 0;

		private const int _odometerChangeValue = 1;

		private readonly FirmwareUpdateSim _firmwareUpdateSim;

		private readonly LogicalDeviceBrakingSystemStatus _simStatus = new LogicalDeviceBrakingSystemStatus();

		private readonly BackgroundOperation _simulator;

		private readonly byte[] _statusData = (byte[])(object)new Byte[8];

		private const uint DebugUpdateDeviceStatusChangedThrottleTimeMs = 20000u;

		private readonly Stopwatch _debugUpdateDeviceStatusChangedThrottleTimer = Stopwatch.StartNew();

		private uint _debugUpdateDeviceStatusChangedThrottleCount;

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public LogicalDeviceBrakingSystemSim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceBrakingSystemCapabilitySim capability, LogicalDeviceBrakingSystemStatus status, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, capability, status, service, isFunctionClassChangeable)
		{
			//IL_0037: Unknown result type (might be due to invalid IL or missing references)
			//IL_0041: Expected O, but got Unknown
			//IL_00b5: Unknown result type (might be due to invalid IL or missing references)
			//IL_00bf: Expected O, but got Unknown
			//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
			//IL_00c4: Expected O, but got Unknown
			base.JumpToBootPid = (ILogicalDevicePidJumpToBoot)new LogicalDevicePidSimJumpToBoot(PID.JUMP_TO_BOOT, 0uL);
			if (!capability.IsAntiLockBrakingSystemSupported)
			{
				_statusData[0] = 255;
				_statusData[1] = 255;
				_statusData[2] = 255;
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Update(_statusData, 8, false);
			((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Size);
			_firmwareUpdateSim = new FirmwareUpdateSim((ILogicalDevice)(object)this);
			_simulator = new BackgroundOperation(new BackgroundOperationFunc(SimulatorAsync));
			_simulator.Start();
		}

		public override void UpdateDeviceOnline(bool online)
		{
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task SimulatorAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SimulatorAsync>d__17 <SimulatorAsync>d__ = default(<SimulatorAsync>d__17);
			<SimulatorAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SimulatorAsync>d__.<>4__this = this;
			<SimulatorAsync>d__.cancellationToken = cancellationToken;
			<SimulatorAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Start<<SimulatorAsync>d__17>(ref <SimulatorAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Task;
		}

		public BrakingSystemFeatureActiveStatus MakeActiveStatus(ILogicalDeviceBrakingSystemCapabilitySim capabilitySim, BrakingSystemCapabilityFlag capabilityFlag)
		{
			//IL_005f: Unknown result type (might be due to invalid IL or missing references)
			if (!((Enum)(object)capabilitySim.CapabilitiesSupportedSim).HasFlag((Enum)(object)capabilityFlag))
			{
				return BrakingSystemFeatureActiveStatus.Inactive;
			}
			if (!((Enum)(object)capabilitySim.CapabilitiesMandatorySim).HasFlag((Enum)(object)capabilityFlag) && ((Enum)(object)capabilitySim.CapabilitiesUserDisabledSim).HasFlag((Enum)(object)capabilityFlag))
			{
				return BrakingSystemFeatureActiveStatus.DisabledByUser;
			}
			if (((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).DeviceStatus).HasData && (int)((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).DeviceStatus.UserMessageDtc != 0)
			{
				return BrakingSystemFeatureActiveStatus.DisabledByDtc;
			}
			return BrakingSystemFeatureActiveStatus.Inactive;
		}

		private void UpdateOdometer()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			uint num = UInt24.op_Implicit(LogicalDeviceBrakingSystemStatus.OdometerNotSupported);
			if (base.IsOdometerSupported)
			{
				num = base.OdometerKilometers + 1;
			}
			if (num > 16777215)
			{
				num = 0u;
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).SetUInt24(num, 0);
			((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Size);
		}

		private void UpdateRandomFlag()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			int num = new Random().Next(0, 4);
			((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).ToggleBit(3, num);
			((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Size);
		}

		private void UpdateUserMessage()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0005: Unknown result type (might be due to invalid IL or missing references)
			Random val = new Random();
			int num = val.Next(1755, 1800);
			if (val.Next(1, 100) <= 20)
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).SetUInt16((ushort)num, 4);
				((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Size);
			}
			else
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).SetUInt16((ushort)0, 4);
				((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Size);
			}
		}

		protected override void DebugUpdateDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, uint dataLength, string optionalText = "")
		{
			if (_debugUpdateDeviceStatusChangedThrottleCount != 0 && _debugUpdateDeviceStatusChangedThrottleTimer.ElapsedMilliseconds < 20000)
			{
				_debugUpdateDeviceStatusChangedThrottleCount++;
				return;
			}
			base.DebugUpdateDeviceStatusChanged(oldStatusData, statusData, dataLength, String.Format(" {0} found {1} changes over {2}ms", (object)((LogicalDevice<LogicalDeviceBrakingSystemStatus, ILogicalDeviceBrakingSystemCapability>)(object)this).DeviceStatus, (object)_debugUpdateDeviceStatusChangedThrottleCount, (object)(UInt32)20000));
			_debugUpdateDeviceStatusChangedThrottleTimer.Restart();
			_debugUpdateDeviceStatusChangedThrottleCount = 1u;
		}

		public override Task<FirmwareUpdateSupport> TryGetFirmwareUpdateSupportAsync(CancellationToken cancelToken)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return _firmwareUpdateSim.TryGetFirmwareUpdateSupportAsync(cancelToken);
		}

		public override Task UpdateFirmwareAsync(IReadOnlyList<byte> data, Func<ILogicalDeviceTransferProgress, bool> progressAck, CancellationToken cancellationToken, Dictionary<FirmwareUpdateOption, object>? options = null)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			return _firmwareUpdateSim.UpdateFirmwareAsync(data, progressAck, cancellationToken, options);
		}

		public override void Dispose(bool disposing)
		{
			base.Dispose(disposing);
			_simulator.Stop();
		}
	}
	public enum BrakingSystemFeatureActiveStatus : Enum
	{
		Inactive = 0,
		Active = 1,
		DisabledByDtc = 2,
		DisabledByUser = 3,
		Unknown = 255
	}
	public class LogicalDeviceBrakingSystemStatus : LogicalDeviceStatusPacketMutable, ILogicalDeviceStatus<LogicalDeviceBrakingSystemStatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		private enum StatusVersion : Enum
		{
			Unknown,
			Version1,
			Version2
		}

		public const string LogTag = "LogicalDeviceBrakingSystemStatus";

		public const int StatusPacketSizeVersion1 = 6;

		public const int StatusPacketSizeVersion2 = 8;

		public const int MinimumStatusPacketSize = 6;

		public const int OdometerIndex = 0;

		public const int FlagsV1Index = 3;

		public const int ActiveFlagsV2Index = 3;

		public const int UserMessageIndex = 4;

		public const int StatusFlagsV2Index = 6;

		public static readonly UInt24 OdometerNotSupported = (UInt24)16777215;

		private static readonly BitPositionValue IsSwayDisabledBitPositionV1 = new BitPositionValue(1u, 3, 1);

		private static readonly BitPositionValue IsAntiLockBrakesDisabledBitPositionV1 = new BitPositionValue(2u, 3, 1);

		private static readonly BitPositionValue IsSwayActivePositionV1 = new BitPositionValue(4u, 3, 1);

		private static readonly BitPositionValue IsAntiLockBrakesActiveBitPositionV1 = new BitPositionValue(8u, 3, 1);

		private static readonly BitPositionValue SwayActiveStatusBitPosition = new BitPositionValue(3u, 3, 1);

		private static readonly BitPositionValue AbsActiveStatusBitPosition = new BitPositionValue(12u, 3, 1);

		private static readonly BitPositionValue PanicBrakeAssistActiveStatusBitPosition = new BitPositionValue(48u, 3, 1);

		private static readonly BitPositionValue AntiChuckingActiveStatusBitPosition = new BitPositionValue(192u, 3, 1);

		private static readonly BitPositionValue SettingsChangesLockedBitPosition = new BitPositionValue(1u, 6, 1);

		private StatusVersion Version
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Size switch
					{
						6u => StatusVersion.Version1, 
						8u => StatusVersion.Version2, 
						_ => StatusVersion.Unknown, 
					};
				}
				return StatusVersion.Unknown;
			}
		}

		private bool IsSwayEnabledV1
		{
			get
			{
				//IL_0009: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(IsSwayDisabledBitPositionV1) != 1;
				}
				return false;
			}
		}

		private bool IsAntiLockBrakesEnabledV1
		{
			get
			{
				//IL_0009: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(IsAntiLockBrakesDisabledBitPositionV1) != 1;
				}
				return false;
			}
		}

		private bool IsSwayActiveV1 => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(IsSwayActivePositionV1) != 0;

		private bool IsAntiLockBrakesActiveV1 => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(IsAntiLockBrakesActiveBitPositionV1) != 0;

		public BrakingSystemFeatureActiveStatus ActiveStatusSway
		{
			get
			{
				//IL_0038: Unknown result type (might be due to invalid IL or missing references)
				switch (Version)
				{
				case StatusVersion.Unknown:
					return BrakingSystemFeatureActiveStatus.Unknown;
				case StatusVersion.Version1:
					if (IsSwayActiveV1)
					{
						return BrakingSystemFeatureActiveStatus.Active;
					}
					if (!IsSwayEnabledV1)
					{
						return BrakingSystemFeatureActiveStatus.DisabledByDtc;
					}
					return BrakingSystemFeatureActiveStatus.Inactive;
				default:
					return (BrakingSystemFeatureActiveStatus)(byte)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(SwayActiveStatusBitPosition);
				}
			}
		}

		public BrakingSystemFeatureActiveStatus ActiveStatusAntiLockBraking
		{
			get
			{
				//IL_0038: Unknown result type (might be due to invalid IL or missing references)
				switch (Version)
				{
				case StatusVersion.Unknown:
					return BrakingSystemFeatureActiveStatus.Unknown;
				case StatusVersion.Version1:
					if (IsAntiLockBrakesActiveV1)
					{
						return BrakingSystemFeatureActiveStatus.Active;
					}
					if (!IsAntiLockBrakesEnabledV1)
					{
						return BrakingSystemFeatureActiveStatus.DisabledByDtc;
					}
					return BrakingSystemFeatureActiveStatus.Inactive;
				default:
					return (BrakingSystemFeatureActiveStatus)(byte)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(AbsActiveStatusBitPosition);
				}
			}
		}

		public BrakingSystemFeatureActiveStatus ActiveStatusPanicBrakeAssist
		{
			get
			{
				//IL_0018: Unknown result type (might be due to invalid IL or missing references)
				switch (Version)
				{
				case StatusVersion.Unknown:
				case StatusVersion.Version1:
					return BrakingSystemFeatureActiveStatus.Unknown;
				default:
					return (BrakingSystemFeatureActiveStatus)(byte)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(PanicBrakeAssistActiveStatusBitPosition);
				}
			}
		}

		public BrakingSystemFeatureActiveStatus ActiveStatusAntiChucking
		{
			get
			{
				//IL_0018: Unknown result type (might be due to invalid IL or missing references)
				switch (Version)
				{
				case StatusVersion.Unknown:
				case StatusVersion.Version1:
					return BrakingSystemFeatureActiveStatus.Unknown;
				default:
					return (BrakingSystemFeatureActiveStatus)(byte)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(AntiChuckingActiveStatusBitPosition);
				}
			}
		}

		public bool IsOdometerSupported => UInt24.op_Implicit(OdometerKilometers) != UInt24.op_Implicit(OdometerNotSupported);

		public UInt24 OdometerKilometers => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetUInt24(0u);

		public DTC_ID UserMessageDtc
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return (DTC_ID)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetUInt16(4u);
				}
				return (DTC_ID)0;
			}
		}

		public Nullable<bool> AreSettingsChangesLocked
		{
			get
			{
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0029: Unknown result type (might be due to invalid IL or missing references)
				switch (Version)
				{
				case StatusVersion.Unknown:
				case StatusVersion.Version1:
					return default(Nullable<bool>);
				default:
					return new Nullable<bool>(((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(SettingsChangesLockedBitPosition) != 0);
				}
			}
		}

		public bool SetActiveStatusSway(BrakingSystemFeatureActiveStatus activeStatus)
		{
			//IL_0012: Unknown result type (might be due to invalid IL or missing references)
			StatusVersion version = Version;
			if ((uint)version > 1u && version == StatusVersion.Version2)
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)(byte)activeStatus, SwayActiveStatusBitPosition);
				return true;
			}
			return false;
		}

		public bool SetActiveStatusAntiLockBraking(BrakingSystemFeatureActiveStatus activeStatus)
		{
			//IL_0012: Unknown result type (might be due to invalid IL or missing references)
			StatusVersion version = Version;
			if ((uint)version > 1u && version == StatusVersion.Version2)
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)(byte)activeStatus, AbsActiveStatusBitPosition);
				return true;
			}
			return false;
		}

		public bool SetActiveStatusPanicBrakeAssist(BrakingSystemFeatureActiveStatus activeStatus)
		{
			//IL_0012: Unknown result type (might be due to invalid IL or missing references)
			StatusVersion version = Version;
			if ((uint)version > 1u && version == StatusVersion.Version2)
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)(byte)activeStatus, PanicBrakeAssistActiveStatusBitPosition);
				return true;
			}
			return false;
		}

		public bool SetActiveStatusAntiChucking(BrakingSystemFeatureActiveStatus activeStatus)
		{
			//IL_0012: Unknown result type (might be due to invalid IL or missing references)
			StatusVersion version = Version;
			if ((uint)version > 1u && version == StatusVersion.Version2)
			{
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)(byte)activeStatus, AntiChuckingActiveStatusBitPosition);
				return true;
			}
			return false;
		}

		public void SetOdometerKilometers(UInt24 kilometers)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt24(UInt24.op_Implicit(kilometers), 0);
		}

		public void SetUserMessageDtc(DTC_ID userMessageDtc)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0008: Expected I4, but got Unknown
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt16((ushort)(int)userMessageDtc, 4);
		}

		public LogicalDeviceBrakingSystemStatus()
			: base(6u)
		{
		}

		public LogicalDeviceBrakingSystemStatus(LogicalDeviceBrakingSystemStatus newStatus)
		{
			if (newStatus.Version == StatusVersion.Unknown)
			{
				TaggedLog.Warning("LogicalDeviceBrakingSystemStatus", String.Format("Unable to update Braking System Status because version is unknown with size of {0}: {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)this).Size, (object)ArrayExtension.DebugDump(((LogicalDeviceDataPacketMutableDoubleBuffer)newStatus).Data, " ", false)), Array.Empty<object>());
				return;
			}
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)newStatus).Data;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(data, (int)((LogicalDeviceDataPacketMutableDoubleBuffer)newStatus).Size, false);
		}

		public LogicalDeviceBrakingSystemStatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceBrakingSystemStatusSerializable(this);
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceBrakingSystemStatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceBrakingSystemStatusSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceBrakingSystemStatusSerializable);
			}
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public BrakingSystemFeatureActiveStatus ActiveStatusSway
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public BrakingSystemFeatureActiveStatus ActiveStatusAntiLockBraking
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public BrakingSystemFeatureActiveStatus ActiveStatusPanicBrakeAssist
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public BrakingSystemFeatureActiveStatus ActiveStatusAntiChucking
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public UInt24 OdometerKilometers
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public DTC_ID UserMessageDtc
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceBrakingSystemStatusSerializable(BrakingSystemFeatureActiveStatus activeStatusSway, BrakingSystemFeatureActiveStatus activeStatusAntiLockBraking, BrakingSystemFeatureActiveStatus activeStatusPanicBrakeAssist, BrakingSystemFeatureActiveStatus activeStatusAntiChucking, UInt24 odometerKilometers, DTC_ID userMessageDtc)
		{
			//IL_0024: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_002c: Unknown result type (might be due to invalid IL or missing references)
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			ActiveStatusSway = activeStatusSway;
			ActiveStatusAntiLockBraking = activeStatusAntiLockBraking;
			ActiveStatusPanicBrakeAssist = activeStatusPanicBrakeAssist;
			ActiveStatusAntiChucking = activeStatusAntiChucking;
			OdometerKilometers = odometerKilometers;
			UserMessageDtc = userMessageDtc;
		}

		public LogicalDeviceBrakingSystemStatusSerializable(LogicalDeviceBrakingSystemStatus brakingStatus)
			: this(brakingStatus.ActiveStatusSway, brakingStatus.ActiveStatusAntiLockBraking, brakingStatus.ActiveStatusPanicBrakeAssist, brakingStatus.ActiveStatusAntiChucking, brakingStatus.OdometerKilometers, brakingStatus.UserMessageDtc)
		{
		}//IL_001a: Unknown result type (might be due to invalid IL or missing references)
		//IL_0020: Unknown result type (might be due to invalid IL or missing references)


		public override byte[] MakeRawData()
		{
			//IL_003b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0047: Unknown result type (might be due to invalid IL or missing references)
			LogicalDeviceBrakingSystemStatus logicalDeviceBrakingSystemStatus = new LogicalDeviceBrakingSystemStatus();
			logicalDeviceBrakingSystemStatus.SetActiveStatusSway(ActiveStatusSway);
			logicalDeviceBrakingSystemStatus.SetActiveStatusAntiLockBraking(ActiveStatusAntiLockBraking);
			logicalDeviceBrakingSystemStatus.SetActiveStatusPanicBrakeAssist(ActiveStatusPanicBrakeAssist);
			logicalDeviceBrakingSystemStatus.SetActiveStatusAntiChucking(ActiveStatusAntiChucking);
			logicalDeviceBrakingSystemStatus.SetOdometerKilometers(OdometerKilometers);
			logicalDeviceBrakingSystemStatus.SetUserMessageDtc(UserMessageDtc);
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBrakingSystemStatus).CopyCurrentData();
		}

		public static LogicalDeviceBrakingSystemStatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceBrakingSystemStatus logicalDeviceBrakingSystemStatus = new LogicalDeviceBrakingSystemStatus();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBrakingSystemStatus).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBrakingSystemStatus).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBrakingSystemStatus).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBrakingSystemStatus).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBrakingSystemStatus).Update(rawData, rawData.Length, false);
			return new LogicalDeviceBrakingSystemStatusSerializable(logicalDeviceBrakingSystemStatus);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceBrakingSystemStatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceBrakingSystemStatusSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			//IL_00bf: Unknown result type (might be due to invalid IL or missing references)
			//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e6: Unknown result type (might be due to invalid IL or missing references)
			//IL_00eb: Unknown result type (might be due to invalid IL or missing references)
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("ActiveStatusSway = ");
			builder.Append(((Object)ActiveStatusSway/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ActiveStatusAntiLockBraking = ");
			builder.Append(((Object)ActiveStatusAntiLockBraking/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ActiveStatusPanicBrakeAssist = ");
			builder.Append(((Object)ActiveStatusPanicBrakeAssist/*cast due to .constrained prefix*/).ToString());
			builder.Append(", ActiveStatusAntiChucking = ");
			builder.Append(((Object)ActiveStatusAntiChucking/*cast due to .constrained prefix*/).ToString());
			builder.Append(", OdometerKilometers = ");
			builder.Append(((Object)OdometerKilometers/*cast due to .constrained prefix*/).ToString());
			builder.Append(", UserMessageDtc = ");
			builder.Append(((Object)UserMessageDtc/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			//IL_006e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0085: Unknown result type (might be due to invalid IL or missing references)
			return (((((base.GetHashCode() * -1521134295 + EqualityComparer<BrakingSystemFeatureActiveStatus>.Default.GetHashCode(ActiveStatusSway)) * -1521134295 + EqualityComparer<BrakingSystemFeatureActiveStatus>.Default.GetHashCode(ActiveStatusAntiLockBraking)) * -1521134295 + EqualityComparer<BrakingSystemFeatureActiveStatus>.Default.GetHashCode(ActiveStatusPanicBrakeAssist)) * -1521134295 + EqualityComparer<BrakingSystemFeatureActiveStatus>.Default.GetHashCode(ActiveStatusAntiChucking)) * -1521134295 + EqualityComparer<UInt24>.Default.GetHashCode(OdometerKilometers)) * -1521134295 + EqualityComparer<DTC_ID>.Default.GetHashCode(UserMessageDtc);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceBrakingSystemStatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceBrakingSystemStatusSerializable(LogicalDeviceBrakingSystemStatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceBrakingSystemStatusSerializable>)original)
		{
			//IL_0039: Unknown result type (might be due to invalid IL or missing references)
			//IL_003e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			//IL_004a: Unknown result type (might be due to invalid IL or missing references)
			ActiveStatusSway = original.ActiveStatusSway;
			ActiveStatusAntiLockBraking = original.ActiveStatusAntiLockBraking;
			ActiveStatusPanicBrakeAssist = original.ActiveStatusPanicBrakeAssist;
			ActiveStatusAntiChucking = original.ActiveStatusAntiChucking;
			OdometerKilometers = original.OdometerKilometers;
			UserMessageDtc = original.UserMessageDtc;
		}
	}
}
namespace OneControl.Devices.BrakeMotorControllerSystem
{
	public class LogicalDeviceBrakeMotorControllerSystemSim : LogicalDeviceBrakeMotorControllerSystem, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SimulatorAsync>d__9 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceBrakeMotorControllerSystemSim <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_008c: Expected O, but got Unknown
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0029: Unknown result type (might be due to invalid IL or missing references)
				//IL_002e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0042: Unknown result type (might be due to invalid IL or missing references)
				//IL_0043: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBrakeMotorControllerSystemSim logicalDeviceBrakeMotorControllerSystemSim = <>4__this;
				try
				{
					if (num != 0)
					{
						goto IL_007c;
					}
					TaskAwaiter<bool> val = <>u__1;
					<>u__1 = default(TaskAwaiter<bool>);
					num = (<>1__state = -1);
					goto IL_0074;
					IL_0074:
					val.GetResult();
					goto IL_007c;
					IL_007c:
					if (!((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
					{
						logicalDeviceBrakeMotorControllerSystemSim.UpdateAlerts();
						val = TaskExtension.TryDelay(120000, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SimulatorAsync>d__9>(ref val, ref this);
							return;
						}
						goto IL_0074;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private const int TickIntervalDelayMs = 120000;

		private const string LogTag = "LogicalDeviceBrakeMotorControllerSystemSim";

		private readonly LogicalDeviceBrakeMotorControllerSystemStatus _simStatus = new LogicalDeviceBrakeMotorControllerSystemStatus();

		private readonly BackgroundOperation _simulator;

		private readonly byte[] _statusData = (byte[])(object)new Byte[8]
		{
			(Byte)6,
			(Byte)189,
			default(Byte),
			default(Byte),
			default(Byte),
			default(Byte),
			default(Byte),
			default(Byte)
		};

		private const uint DelayStatusChangedLogMessageThrottleTimeMs = 60000u;

		private readonly Stopwatch _delayStatusChangedLogMessageThrottleTimer = Stopwatch.StartNew();

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public LogicalDeviceBrakeMotorControllerSystemSim(ILogicalDeviceId logicalDeviceId, LogicalDeviceBrakeMotorControllerSystemStatus status, LogicalDeviceBrakeMotorControllerSystemCapability capability, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, status, new LogicalDeviceBrakeMotorControllerSystemCapability(BrakeMotorControllerCapabilityFlag.SupportsElectricMotor), service, isFunctionClassChangeable)
		{
			//IL_0083: Unknown result type (might be due to invalid IL or missing references)
			//IL_008d: Expected O, but got Unknown
			//IL_0088: Unknown result type (might be due to invalid IL or missing references)
			//IL_0092: Expected O, but got Unknown
			TaggedLog.Information("LogicalDeviceBrakeMotorControllerSystemSim", "Brake Motor Controller System Sim Started", Array.Empty<object>());
			_simStatus.SetUserMessageDtc((DTC_ID)0);
			((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Update(_statusData, _statusData.Length, true);
			_simulator = new BackgroundOperation(new BackgroundOperationFunc(SimulatorAsync));
			_simulator.Start();
		}

		public override void UpdateDeviceOnline(bool canOnline)
		{
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task SimulatorAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SimulatorAsync>d__9 <SimulatorAsync>d__ = default(<SimulatorAsync>d__9);
			<SimulatorAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SimulatorAsync>d__.<>4__this = this;
			<SimulatorAsync>d__.cancellationToken = cancellationToken;
			<SimulatorAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Start<<SimulatorAsync>d__9>(ref <SimulatorAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Task;
		}

		private void UpdateAlerts()
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			//IL_0010: Unknown result type (might be due to invalid IL or missing references)
			if ((int)_simStatus.UserMessageDtc == 0)
			{
				switch (new Random().Next(0, 5))
				{
				case 0:
					TaggedLog.Debug("LogicalDeviceBrakeMotorControllerSystemSim", String.Format("Brake Motor Controller System Sim is setting DTC to {0}", (object)(DTC_ID)1755), Array.Empty<object>());
					_simStatus.SetUserMessageDtc((DTC_ID)1755);
					break;
				case 1:
					TaggedLog.Debug("LogicalDeviceBrakeMotorControllerSystemSim", String.Format("Brake Motor Controller System Sim is setting DTC to {0}", (object)(DTC_ID)1824), Array.Empty<object>());
					_simStatus.SetUserMessageDtc((DTC_ID)1824);
					break;
				case 2:
					TaggedLog.Debug("LogicalDeviceBrakeMotorControllerSystemSim", String.Format("Brake Motor Controller System Sim is setting DTC to {0}", (object)(DTC_ID)1792), Array.Empty<object>());
					_simStatus.SetUserMessageDtc((DTC_ID)1792);
					break;
				case 3:
					TaggedLog.Debug("LogicalDeviceBrakeMotorControllerSystemSim", String.Format("Brake Motor Controller System Sim is setting DTC to {0}", (object)(DTC_ID)1879), Array.Empty<object>());
					_simStatus.SetUserMessageDtc((DTC_ID)1879);
					break;
				case 4:
					TaggedLog.Debug("LogicalDeviceBrakeMotorControllerSystemSim", String.Format("Brake Motor Controller System Sim is setting DTC to {0}", (object)(DTC_ID)6), Array.Empty<object>());
					_simStatus.SetUserMessageDtc((DTC_ID)6);
					break;
				default:
					TaggedLog.Debug("LogicalDeviceBrakeMotorControllerSystemSim", String.Format("Brake Motor Controller System Sim is setting DTC to {0}", (object)(DTC_ID)1782), Array.Empty<object>());
					_simStatus.SetUserMessageDtc((DTC_ID)1782);
					break;
				}
			}
			else
			{
				_simStatus.SetUserMessageDtc((DTC_ID)0);
				TaggedLog.Debug("LogicalDeviceBrakeMotorControllerSystemSim", "Brake Motor Controller System Sim is clearing a DTC", Array.Empty<object>());
			}
			((LogicalDevice<LogicalDeviceBrakeMotorControllerSystemStatus, ILogicalDeviceBrakeMotorControllerSystemCapability>)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Size);
		}

		protected override void DebugUpdateDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, uint dataLength, string optionalText = "")
		{
			if (_delayStatusChangedLogMessageThrottleTimer.ElapsedMilliseconds >= 60000)
			{
				((LogicalDevice<LogicalDeviceBrakeMotorControllerSystemStatus, ILogicalDeviceBrakeMotorControllerSystemCapability>)this).DebugUpdateDeviceStatusChanged(oldStatusData, statusData, dataLength, String.Format("Skipped debug messages over {0}ms", (object)(UInt32)60000));
				_delayStatusChangedLogMessageThrottleTimer.Restart();
			}
		}

		private void MetricsControlPidChanged(ulong metricsControl)
		{
			((LogicalDevice<LogicalDeviceBrakeMotorControllerSystemStatus, ILogicalDeviceBrakeMotorControllerSystemCapability>)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Size);
		}

		public override void Dispose(bool disposing)
		{
			((LogicalDevice<LogicalDeviceBrakeMotorControllerSystemStatus, ILogicalDeviceBrakeMotorControllerSystemCapability>)this).Dispose(disposing);
			_simulator.Stop();
		}
	}
}
namespace OneControl.Devices.BrakeMotorController
{
	public interface IBrakeMotorController
	{
		bool IsElectricMotorSupported { get; }
	}
	public interface ILogicalDeviceBrakeMotorControllerSystem : IBrakeMotorController, ILogicalDeviceWithCapability<ILogicalDeviceBrakeMotorControllerSystemCapability>, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatus<LogicalDeviceBrakeMotorControllerSystemStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceBrakeMotorControllerSystemStatus>, ILogicalDeviceFirmwareUpdateDevice
	{
	}
	public interface ILogicalDeviceBrakeMotorControllerSystemDirect : ILogicalDeviceBrakeMotorControllerSystem, IBrakeMotorController, ILogicalDeviceWithCapability<ILogicalDeviceBrakeMotorControllerSystemCapability>, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatus<LogicalDeviceBrakeMotorControllerSystemStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceBrakeMotorControllerSystemStatus>, ILogicalDeviceFirmwareUpdateDevice, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public class LogicalDeviceBrakeMotorControllerSystem : LogicalDevice<LogicalDeviceBrakeMotorControllerSystemStatus, ILogicalDeviceBrakeMotorControllerSystemCapability>, ILogicalDeviceBrakeMotorControllerSystemDirect, ILogicalDeviceBrakeMotorControllerSystem, IBrakeMotorController, ILogicalDeviceWithCapability<ILogicalDeviceBrakeMotorControllerSystemCapability>, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatus<LogicalDeviceBrakeMotorControllerSystemStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceBrakeMotorControllerSystemStatus>, ILogicalDeviceFirmwareUpdateDevice, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink, ILogicalDeviceWithStatusAlerts
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass26_0 : Object
		{
			public LogicalDeviceBrakeMotorControllerSystem <>4__this;

			public ILogicalDeviceAlert existingAlert;

			public ILogicalDeviceAlert newAlert;

			internal void <NotifyAlertChanged>b__0(ILogicalDeviceExAlertChanged logicalDeviceEx)
			{
				logicalDeviceEx.LogicalDeviceAlertChanged((ILogicalDevice)(object)<>4__this, existingAlert ?? newAlert, newAlert);
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass27_0 : Object
		{
			public LogicalDeviceBrakeMotorControllerSystem <>4__this;

			public LogicalDeviceAlertCapabilityFeature newAlert;

			internal void <UpdateAlert>b__0(ILogicalDeviceExAlertChanged logicalDeviceEx)
			{
				logicalDeviceEx.LogicalDeviceAlertChanged((ILogicalDevice)(object)<>4__this, (ILogicalDeviceAlert)(object)newAlert, (ILogicalDeviceAlert)(object)newAlert);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <UpdateFirmwareAsync>d__32 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceBrakeMotorControllerSystem <>4__this;

			public CancellationToken cancellationToken;

			public IReadOnlyList<byte> data;

			public Func<ILogicalDeviceTransferProgress, bool> progressAck;

			public Dictionary<FirmwareUpdateOption, object> options;

			private ILogicalDeviceFirmwareUpdateSession <firmwareUpdateSession>5__2;

			private TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice?> <>u__1;

			private TaskAwaiter <>u__2;

			private void MoveNext()
			{
				//IL_0142: Expected O, but got Unknown
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_0103: Unknown result type (might be due to invalid IL or missing references)
				//IL_0108: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00eb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ed: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBrakeMotorControllerSystem logicalDeviceBrakeMotorControllerSystem = <>4__this;
				try
				{
					TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice> val;
					if (num != 0)
					{
						if (num == 1)
						{
							goto IL_00a9;
						}
						val = FirmwareUpdateSupportEx.TryGetSupportedFirmwareUpdateDeviceSource(((LogicalDevice<ILogicalDeviceBrakeMotorControllerSystemCapability>)(object)logicalDeviceBrakeMotorControllerSystem).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceBrakeMotorControllerSystem, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>, <UpdateFirmwareAsync>d__32>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>);
						num = (<>1__state = -1);
					}
					ILogicalDeviceSourceDirectFirmwareUpdateDevice result = val.GetResult();
					if (result == null)
					{
						throw new FirmwareUpdateNotSupportedException((ILogicalDevice)(object)logicalDeviceBrakeMotorControllerSystem, (FirmwareUpdateSupport)0, (Exception)null);
					}
					<firmwareUpdateSession>5__2 = ((LogicalDevice<ILogicalDeviceBrakeMotorControllerSystemCapability>)(object)logicalDeviceBrakeMotorControllerSystem).DeviceService.FirmwareUpdateManager.StartFirmwareUpdateSession((ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceBrakeMotorControllerSystem);
					goto IL_00a9;
					IL_00a9:
					try
					{
						TaskAwaiter val2;
						if (num != 1)
						{
							val2 = ((IFirmwareUpdateDevice)result).UpdateFirmwareAsync(<firmwareUpdateSession>5__2, data, progressAck, cancellationToken, (IReadOnlyDictionary<FirmwareUpdateOption, object>)(object)options).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <UpdateFirmwareAsync>d__32>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
					}
					finally
					{
						if (num < 0 && <firmwareUpdateSession>5__2 != null)
						{
							((IDisposable)<firmwareUpdateSession>5__2).Dispose();
						}
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<firmwareUpdateSession>5__2 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<firmwareUpdateSession>5__2 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceBrakeMotorControllerSystem";

		private const int BackgroundAlertDelayMs = 30000;

		private const byte UnsupportedAlertByte = 0;

		private const DTC_ID DtcRepresentingNoneActive = (DTC_ID)0;

		private const string GenericAlertKey = "GenericBrakeMotorControllerSystemAlert";

		private readonly ConcurrentDictionary<string, ILogicalDeviceAlert> _alertDict = new ConcurrentDictionary<string, ILogicalDeviceAlert>();

		private Dictionary<int, DTC_ID> BackgroundNotificationBrakingSystemDTC;

		private readonly IReadOnlyDictionary<FirmwareUpdateOption, string> _defaultFirmwareUpdateOptions;

		public bool IsElectricMotorSupported => ((LogicalDevice<ILogicalDeviceBrakeMotorControllerSystemCapability>)(object)this).DeviceCapability.IsElectricMotorSupported;

		[field: CompilerGenerated]
		public ILogicalDevicePidByte RimTeethCountPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidFixedPoint TireDiameterPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidFixedPoint TireTrackWidthPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public IEnumerable<ILogicalDeviceAlert> Alerts => (IEnumerable<ILogicalDeviceAlert>)(object)_alertDict.Values;

		public IReadOnlyDictionary<FirmwareUpdateOption, string> DefaultFirmwareUpdateOptions => _defaultFirmwareUpdateOptions;

		public LogicalDeviceBrakeMotorControllerSystem(ILogicalDeviceId logicalDeviceId, LogicalDeviceBrakeMotorControllerSystemStatus status, ILogicalDeviceBrakeMotorControllerSystemCapability deviceCapability, ILogicalDeviceService deviceService, bool isFunctionClassChangeable = false)
		{
			//IL_0310: Unknown result type (might be due to invalid IL or missing references)
			//IL_031a: Expected O, but got Unknown
			//IL_0329: Unknown result type (might be due to invalid IL or missing references)
			//IL_0333: Expected O, but got Unknown
			//IL_0342: Unknown result type (might be due to invalid IL or missing references)
			//IL_034c: Expected O, but got Unknown
			//IL_0353: Unknown result type (might be due to invalid IL or missing references)
			//IL_0359: Invalid comparison between Unknown and I4
			//IL_035d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0363: Unknown result type (might be due to invalid IL or missing references)
			Dictionary<int, DTC_ID> obj = new Dictionary<int, DTC_ID>();
			obj.Add(0, (DTC_ID)0);
			obj.Add(1, (DTC_ID)1674);
			obj.Add(2, (DTC_ID)6);
			obj.Add(3, (DTC_ID)1755);
			obj.Add(4, (DTC_ID)1756);
			obj.Add(5, (DTC_ID)1757);
			obj.Add(6, (DTC_ID)1759);
			obj.Add(7, (DTC_ID)1760);
			obj.Add(8, (DTC_ID)1761);
			obj.Add(9, (DTC_ID)1762);
			obj.Add(10, (DTC_ID)1763);
			obj.Add(11, (DTC_ID)1764);
			obj.Add(12, (DTC_ID)1766);
			obj.Add(13, (DTC_ID)1767);
			obj.Add(14, (DTC_ID)1768);
			obj.Add(15, (DTC_ID)1769);
			obj.Add(16, (DTC_ID)1770);
			obj.Add(17, (DTC_ID)1771);
			obj.Add(18, (DTC_ID)1773);
			obj.Add(19, (DTC_ID)1774);
			obj.Add(20, (DTC_ID)1775);
			obj.Add(21, (DTC_ID)1776);
			obj.Add(22, (DTC_ID)1777);
			obj.Add(23, (DTC_ID)1778);
			obj.Add(24, (DTC_ID)1780);
			obj.Add(25, (DTC_ID)1781);
			obj.Add(26, (DTC_ID)1782);
			obj.Add(27, (DTC_ID)1783);
			obj.Add(28, (DTC_ID)1784);
			obj.Add(29, (DTC_ID)1785);
			obj.Add(30, (DTC_ID)1787);
			obj.Add(31, (DTC_ID)1788);
			obj.Add(32, (DTC_ID)1789);
			obj.Add(33, (DTC_ID)1790);
			obj.Add(34, (DTC_ID)1791);
			obj.Add(35, (DTC_ID)1792);
			obj.Add(36, (DTC_ID)1794);
			obj.Add(37, (DTC_ID)1795);
			obj.Add(38, (DTC_ID)1796);
			obj.Add(39, (DTC_ID)1824);
			obj.Add(40, (DTC_ID)1825);
			obj.Add(41, (DTC_ID)1826);
			obj.Add(42, (DTC_ID)1827);
			obj.Add(43, (DTC_ID)1828);
			obj.Add(44, (DTC_ID)1829);
			obj.Add(45, (DTC_ID)1872);
			obj.Add(46, (DTC_ID)1873);
			obj.Add(47, (DTC_ID)1874);
			obj.Add(48, (DTC_ID)1875);
			obj.Add(49, (DTC_ID)1876);
			obj.Add(50, (DTC_ID)1877);
			obj.Add(51, (DTC_ID)1878);
			obj.Add(52, (DTC_ID)1879);
			obj.Add(53, (DTC_ID)1880);
			obj.Add(54, (DTC_ID)1881);
			BackgroundNotificationBrakingSystemDTC = obj;
			Dictionary<FirmwareUpdateOption, string> obj2 = new Dictionary<FirmwareUpdateOption, string>();
			obj2.Add((FirmwareUpdateOption)1, String.Format("{0}", (object)(UInt32)3276800));
			_defaultFirmwareUpdateOptions = (IReadOnlyDictionary<FirmwareUpdateOption, string>)(object)obj2;
			base..ctor(logicalDeviceId, status, deviceCapability, deviceService, isFunctionClassChangeable);
			RimTeethCountPid = (ILogicalDevicePidByte)new LogicalDevicePidByte((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)363), (LogicalDeviceSessionType)1);
			TireDiameterPid = (ILogicalDevicePidFixedPoint)new LogicalDevicePidFixedPoint((FixedPointType)1, (ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)362), (LogicalDeviceSessionType)1, (Func<ulong, bool>)null);
			TireTrackWidthPid = (ILogicalDevicePidFixedPoint)new LogicalDevicePidFixedPoint((FixedPointType)1, (ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)361), (LogicalDeviceSessionType)1, (Func<ulong, bool>)null);
			UpdateAlert("GenericBrakeMotorControllerSystemAlert", (int)status.UserMessageDtc > 0);
		}

		public LogicalDeviceBrakeMotorControllerSystem(ILogicalDeviceId logicalDeviceId, LogicalDeviceBrakeMotorControllerSystemCapability capability, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: this(logicalDeviceId, new LogicalDeviceBrakeMotorControllerSystemStatus(), capability, service, isFunctionClassChangeable)
		{
		}

		public override void OnDeviceStatusChanged()
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0012: Invalid comparison between Unknown and I4
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0024: Unknown result type (might be due to invalid IL or missing references)
			base.OnDeviceStatusChanged();
			bool isActive = (int)((LogicalDevice<LogicalDeviceBrakeMotorControllerSystemStatus, ILogicalDeviceBrakeMotorControllerSystemCapability>)this).DeviceStatus.UserMessageDtc > 0;
			UpdateAlert("GenericBrakeMotorControllerSystemAlert", isActive);
		}

		public void UpdateAlert(string alertName, bool isActive, Nullable<int> count = default(Nullable<int>))
		{
			//IL_004c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0052: Unknown result type (might be due to invalid IL or missing references)
			//IL_0053: Unknown result type (might be due to invalid IL or missing references)
			//IL_0059: Expected O, but got Unknown
			//IL_001c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0021: Unknown result type (might be due to invalid IL or missing references)
			//IL_0022: Unknown result type (might be due to invalid IL or missing references)
			//IL_0023: Unknown result type (might be due to invalid IL or missing references)
			ILogicalDeviceAlert val = default(ILogicalDeviceAlert);
			_alertDict.TryGetValue(alertName, ref val);
			if (val != null && val.IsActive == isActive)
			{
				Nullable<int> count2 = val.Count;
				Nullable<int> val2 = count;
				if ((count2.GetValueOrDefault() == val2.GetValueOrDefault()) & (count2.HasValue == val2.HasValue))
				{
					return;
				}
			}
			LogicalDeviceAlert val3 = new LogicalDeviceAlert(alertName, isActive, default(Nullable<int>));
			_alertDict[alertName] = (ILogicalDeviceAlert)(object)val3;
			NotifyAlertChanged(val, (ILogicalDeviceAlert)(object)val3);
		}

		private void NotifyAlertChanged(ILogicalDeviceAlert? existingAlert, ILogicalDeviceAlert newAlert)
		{
			<>c__DisplayClass26_0 CS$<>8__locals11 = new <>c__DisplayClass26_0();
			CS$<>8__locals11.<>4__this = this;
			CS$<>8__locals11.existingAlert = existingAlert;
			CS$<>8__locals11.newAlert = newAlert;
			if (CS$<>8__locals11.existingAlert == null)
			{
				TaggedLog.Information("LogicalDeviceBrakeMotorControllerSystem", String.Format("Logical Device Notify NEW Alert {0} for {1}", (object)CS$<>8__locals11.newAlert, (object)this), Array.Empty<object>());
			}
			else
			{
				TaggedLog.Information("LogicalDeviceBrakeMotorControllerSystem", String.Format("Logical Device Notify Alert {0} to {1} for {2}", (object)CS$<>8__locals11.existingAlert, (object)CS$<>8__locals11.newAlert, (object)this), Array.Empty<object>());
			}
			((LogicalDevice<ILogicalDeviceBrakeMotorControllerSystemCapability>)(object)this).PerformLogicalDeviceExAction<ILogicalDeviceExAlertChanged>((Action<ILogicalDeviceExAlertChanged>)delegate(ILogicalDeviceExAlertChanged logicalDeviceEx)
			{
				logicalDeviceEx.LogicalDeviceAlertChanged((ILogicalDevice)(object)CS$<>8__locals11.<>4__this, CS$<>8__locals11.existingAlert ?? CS$<>8__locals11.newAlert, CS$<>8__locals11.newAlert);
			});
			ILogicalDeviceManager deviceManager = ((LogicalDevice<ILogicalDeviceBrakeMotorControllerSystemCapability>)(object)this).DeviceService.DeviceManager;
			if (deviceManager != null)
			{
				deviceManager.ContainerDataSourceSync(true);
			}
		}

		public void UpdateAlert(LogicalDeviceCapabilityFeatureId capabilityFeatureId, LogicalDeviceCapabilityFeatureStatus featureStatus, LogicalDeviceCapabilityFeatureStatusPending featureStatusPending)
		{
			//IL_000e: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0010: Unknown result type (might be due to invalid IL or missing references)
			//IL_0011: Unknown result type (might be due to invalid IL or missing references)
			//IL_001b: Expected O, but got Unknown
			<>c__DisplayClass27_0 CS$<>8__locals6 = new <>c__DisplayClass27_0();
			CS$<>8__locals6.<>4__this = this;
			CS$<>8__locals6.newAlert = new LogicalDeviceAlertCapabilityFeature(capabilityFeatureId, featureStatus, featureStatusPending);
			TaggedLog.Information("LogicalDeviceBrakeMotorControllerSystem", String.Format("Logical Device Notify Alert {0} for {1}", (object)CS$<>8__locals6.newAlert, (object)this), Array.Empty<object>());
			((LogicalDevice<ILogicalDeviceBrakeMotorControllerSystemCapability>)(object)this).PerformLogicalDeviceExAction<ILogicalDeviceExAlertChanged>((Action<ILogicalDeviceExAlertChanged>)delegate(ILogicalDeviceExAlertChanged logicalDeviceEx)
			{
				logicalDeviceEx.LogicalDeviceAlertChanged((ILogicalDevice)(object)CS$<>8__locals6.<>4__this, (ILogicalDeviceAlert)(object)CS$<>8__locals6.newAlert, (ILogicalDeviceAlert)(object)CS$<>8__locals6.newAlert);
			});
		}

		public void UpdateAlert(byte alertId, byte rawData)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			//IL_002a: Unknown result type (might be due to invalid IL or missing references)
			//IL_002f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0036: Unknown result type (might be due to invalid IL or missing references)
			//IL_0041: Unknown result type (might be due to invalid IL or missing references)
			//IL_0043: Invalid comparison between Unknown and I4
			//IL_0047: Unknown result type (might be due to invalid IL or missing references)
			//IL_004d: Unknown result type (might be due to invalid IL or missing references)
			DateTime lastUpdatedTimestamp = base.LastUpdatedTimestamp;
			DateTime now = DateTime.Now;
			if (!(lastUpdatedTimestamp > ((DateTime)(ref now)).AddMilliseconds(-30000.0)) && alertId == 0)
			{
				DTC_ID val = ConvertToDtc(rawData);
				UpdateAlert(String.Format("{0}", (object)val), (int)val > 0);
			}
		}

		private DTC_ID ConvertToDtc(byte rawData)
		{
			//IL_0036: Unknown result type (might be due to invalid IL or missing references)
			if (BackgroundNotificationBrakingSystemDTC.Count < rawData)
			{
				TaggedLog.Information("LogicalDeviceBrakeMotorControllerSystem", String.Format("ConvertToDtc called with a value that does not map to a dtc. Value {0}", (object)(Int32)rawData), Array.Empty<object>());
				return (DTC_ID)0;
			}
			return BackgroundNotificationBrakingSystemDTC[(int)rawData];
		}

		public virtual Task<FirmwareUpdateSupport> TryGetFirmwareUpdateSupportAsync(CancellationToken cancelToken)
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			return FirmwareUpdateSupportEx.TryGetFirmwareUpdateSupportAsync(((LogicalDevice<ILogicalDeviceBrakeMotorControllerSystemCapability>)(object)this).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)this, cancelToken);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task UpdateFirmwareAsync(IReadOnlyList<byte> data, Func<ILogicalDeviceTransferProgress, bool> progressAck, CancellationToken cancellationToken, Dictionary<FirmwareUpdateOption, object>? options = null)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<UpdateFirmwareAsync>d__32 <UpdateFirmwareAsync>d__ = default(<UpdateFirmwareAsync>d__32);
			<UpdateFirmwareAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<UpdateFirmwareAsync>d__.<>4__this = this;
			<UpdateFirmwareAsync>d__.data = data;
			<UpdateFirmwareAsync>d__.progressAck = progressAck;
			<UpdateFirmwareAsync>d__.cancellationToken = cancellationToken;
			<UpdateFirmwareAsync>d__.options = options;
			<UpdateFirmwareAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Start<<UpdateFirmwareAsync>d__32>(ref <UpdateFirmwareAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Task;
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceBrakeMotorControllerSystemCapability>)(object)this).LastReceivedNetworkStatus;
		}
	}
	[Flags]
	public enum BrakeMotorControllerCapabilityFlag : Enum
	{
		None = 0,
		SupportsElectricMotor = 1,
		Reserved1 = 2,
		Reserved2 = 4,
		Reserved3 = 8,
		Reserved4 = 0x10,
		Reserved5 = 0x20,
		Reserved6 = 0x40,
		Reserved7 = 0x80,
		All = 1
	}
	public class LogicalDeviceBrakeMotorControllerSystemCapability : LogicalDeviceCapability, ILogicalDeviceBrakeMotorControllerSystemCapability, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		private BrakeMotorControllerCapabilityFlag _capabilityFlag => (BrakeMotorControllerCapabilityFlag)base.RawValue;

		public bool IsElectricMotorSupported => ((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)BrakeMotorControllerCapabilityFlag.SupportsElectricMotor);

		public LogicalDeviceBrakeMotorControllerSystemCapability(Nullable<byte> rawCapability)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(rawCapability);
		}

		public LogicalDeviceBrakeMotorControllerSystemCapability(BrakeMotorControllerCapabilityFlag capabilityFlags)
			: this(new Nullable<byte>((byte)capabilityFlags))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)


		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsElectricMotorSupported");
		}
	}
	public interface ILogicalDeviceBrakeMotorControllerSystemCapability : ILogicalDeviceCapability, INotifyPropertyChanged
	{
		bool IsElectricMotorSupported { get; }
	}
	public class LogicalDeviceBrakeMotorControllerSystemFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice? MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 58)
			{
				return null;
			}
			return (ILogicalDevice?)(object)new LogicalDeviceBrakeMotorControllerSystem(logicalDeviceId, new LogicalDeviceBrakeMotorControllerSystemCapability(rawCapability), service);
		}
	}
	public enum BrakeMotorControllerActiveStatus : Enum
	{
		Inactive = 0,
		Active = 1,
		DisabledByDtc = 2,
		Unknown = 255
	}
	public class LogicalDeviceBrakeMotorControllerSystemStatus : LogicalDeviceStatusPacketMutable
	{
		public const int UserMessageIndex = 0;

		public const int ActiveFlagsIndex = 2;

		private static readonly BitPositionValue IsLeftMotorActiveBitPosition = new BitPositionValue(1u, 2, 1);

		private static readonly BitPositionValue IsLeftMotorDisabledBitPosition = new BitPositionValue(2u, 2, 1);

		private static readonly BitPositionValue IsRightMotorActiveBitPosition = new BitPositionValue(16u, 2, 1);

		private static readonly BitPositionValue IsRightMotorDisabledBitPosition = new BitPositionValue(32u, 2, 1);

		private bool IsLeftMotorActive
		{
			get
			{
				//IL_0009: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(IsLeftMotorActiveBitPosition) != 0;
				}
				return false;
			}
		}

		private bool IsLeftMotorDisabled
		{
			get
			{
				//IL_0009: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(IsLeftMotorDisabledBitPosition) != 1;
				}
				return false;
			}
		}

		private bool IsRightMotorActive
		{
			get
			{
				//IL_0009: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(IsRightMotorActiveBitPosition) != 0;
				}
				return false;
			}
		}

		private bool IsRightMotorDisabled
		{
			get
			{
				//IL_0009: Unknown result type (might be due to invalid IL or missing references)
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(IsRightMotorDisabledBitPosition) != 1;
				}
				return false;
			}
		}

		public DTC_ID UserMessageDtc
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return (DTC_ID)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetUInt16(0u);
				}
				return (DTC_ID)0;
			}
		}

		public BrakeMotorControllerActiveStatus LeftMotorActiveStatus
		{
			get
			{
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return BrakeMotorControllerActiveStatus.Unknown;
				}
				if (IsLeftMotorDisabled)
				{
					return BrakeMotorControllerActiveStatus.DisabledByDtc;
				}
				if (!IsLeftMotorActive)
				{
					return BrakeMotorControllerActiveStatus.Inactive;
				}
				return BrakeMotorControllerActiveStatus.Active;
			}
		}

		public BrakeMotorControllerActiveStatus RightMotorActiveStatus
		{
			get
			{
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return BrakeMotorControllerActiveStatus.Unknown;
				}
				if (IsRightMotorDisabled)
				{
					return BrakeMotorControllerActiveStatus.DisabledByDtc;
				}
				if (!IsRightMotorActive)
				{
					return BrakeMotorControllerActiveStatus.Inactive;
				}
				return BrakeMotorControllerActiveStatus.Active;
			}
		}

		public void SetUserMessageDtc(DTC_ID userMessageDtc)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0008: Expected I4, but got Unknown
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetUInt16((ushort)(int)userMessageDtc, 0);
		}
	}
}
namespace OneControl.Devices.BootLoader
{
	public interface IReflashBootLoader
	{
		byte ReFlashVersion { get; }

		byte SpbVersion { get; }
	}
	public interface ILogicalDeviceReflashBootloader : IReflashBootLoader, ILogicalDeviceWithStatus<LogicalDeviceReflashBootLoaderStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceReflashBootLoaderStatus>, ILogicalDeviceFirmwareUpdateDevice, ILogicalDeviceJumpToBootloader, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public interface ILogicalDeviceReflashBootloaderDirect : ILogicalDeviceReflashBootloader, IReflashBootLoader, ILogicalDeviceWithStatus<LogicalDeviceReflashBootLoaderStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceReflashBootLoaderStatus>, ILogicalDeviceFirmwareUpdateDevice, ILogicalDeviceJumpToBootloader, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public class LogicalDeviceReflashBootLoader : LogicalDevice<LogicalDeviceReflashBootLoaderStatus, ILogicalDeviceCapability>, ILogicalDeviceReflashBootloaderDirect, ILogicalDeviceReflashBootloader, IReflashBootLoader, ILogicalDeviceWithStatus<LogicalDeviceReflashBootLoaderStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceReflashBootLoaderStatus>, ILogicalDeviceFirmwareUpdateDevice, ILogicalDeviceJumpToBootloader, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetCoreMicrocontrollerResetValueAsync>d__51 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<string> <>t__builder;

			public LogicalDeviceReflashBootLoader <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<string> <>u__1;

			private void MoveNext()
			{
				//IL_008f: Expected O, but got Unknown
				//IL_0128: Expected O, but got Unknown
				//IL_009d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a4: Expected O, but got Unknown
				//IL_00ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0100: Unknown result type (might be due to invalid IL or missing references)
				//IL_0105: Unknown result type (might be due to invalid IL or missing references)
				//IL_010d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ea: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0072: Unknown result type (might be due to invalid IL or missing references)
				//IL_0026: Unknown result type (might be due to invalid IL or missing references)
				//IL_0030: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_004a: Unknown result type (might be due to invalid IL or missing references)
				//IL_004c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceReflashBootLoader logicalDeviceReflashBootLoader = <>4__this;
				string result = default(string);
				try
				{
					TaskAwaiter<string> val;
					int num2;
					if (num != 0)
					{
						if (num == 1)
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<string>);
							num = (<>1__state = -1);
							goto IL_011c;
						}
						num2 = 0;
					}
					object obj;
					try
					{
						if (num != 0)
						{
							val = logicalDeviceReflashBootLoader.CoreMicrocontrollerResetPid.ReadTextAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<string>, <TryGetCoreMicrocontrollerResetValueAsync>d__51>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<string>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						obj = (object)ex;
						num2 = 1;
						goto IL_0094;
					}
					goto end_IL_000e;
					IL_0094:
					if (num2 == 1)
					{
						Exception ex2 = (Exception)obj;
						TaggedLog.Warning("LogicalDeviceReflashBootLoader", String.Concat("Unable to get Core Microcontroller Reset ", ex2.Message), Array.Empty<object>());
						val = Task.FromResult<string>(String.Empty).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<string>, <TryGetCoreMicrocontrollerResetValueAsync>d__51>(ref val, ref this);
							return;
						}
						goto IL_011c;
					}
					goto end_IL_000e;
					IL_011c:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetCoreVersionInfoAsync>d__55 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<string> <>t__builder;

			public LogicalDeviceReflashBootLoader <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<string> <>u__1;

			private void MoveNext()
			{
				//IL_008f: Expected O, but got Unknown
				//IL_0128: Expected O, but got Unknown
				//IL_009d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a4: Expected O, but got Unknown
				//IL_00ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0100: Unknown result type (might be due to invalid IL or missing references)
				//IL_0105: Unknown result type (might be due to invalid IL or missing references)
				//IL_010d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ea: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0072: Unknown result type (might be due to invalid IL or missing references)
				//IL_0026: Unknown result type (might be due to invalid IL or missing references)
				//IL_0030: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_004a: Unknown result type (might be due to invalid IL or missing references)
				//IL_004c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceReflashBootLoader logicalDeviceReflashBootLoader = <>4__this;
				string result = default(string);
				try
				{
					TaskAwaiter<string> val;
					int num2;
					if (num != 0)
					{
						if (num == 1)
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<string>);
							num = (<>1__state = -1);
							goto IL_011c;
						}
						num2 = 0;
					}
					object obj;
					try
					{
						if (num != 0)
						{
							val = logicalDeviceReflashBootLoader.CoreVersionInfoPid.ReadTextAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<string>, <TryGetCoreVersionInfoAsync>d__55>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<string>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						obj = (object)ex;
						num2 = 1;
						goto IL_0094;
					}
					goto end_IL_000e;
					IL_0094:
					if (num2 == 1)
					{
						Exception ex2 = (Exception)obj;
						TaggedLog.Warning("LogicalDeviceReflashBootLoader", String.Concat("Unable to get core version info ", ex2.Message), Array.Empty<object>());
						val = Task.FromResult<string>(String.Empty).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<string>, <TryGetCoreVersionInfoAsync>d__55>(ref val, ref this);
							return;
						}
						goto IL_011c;
					}
					goto end_IL_000e;
					IL_011c:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetProductFwPartNum1Async>d__47 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<string> <>t__builder;

			public LogicalDeviceReflashBootLoader <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<string> <>u__1;

			private void MoveNext()
			{
				//IL_008f: Expected O, but got Unknown
				//IL_0128: Expected O, but got Unknown
				//IL_009d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a4: Expected O, but got Unknown
				//IL_00ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0100: Unknown result type (might be due to invalid IL or missing references)
				//IL_0105: Unknown result type (might be due to invalid IL or missing references)
				//IL_010d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ea: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0072: Unknown result type (might be due to invalid IL or missing references)
				//IL_0026: Unknown result type (might be due to invalid IL or missing references)
				//IL_0030: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_004a: Unknown result type (might be due to invalid IL or missing references)
				//IL_004c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceReflashBootLoader logicalDeviceReflashBootLoader = <>4__this;
				string result = default(string);
				try
				{
					TaskAwaiter<string> val;
					int num2;
					if (num != 0)
					{
						if (num == 1)
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<string>);
							num = (<>1__state = -1);
							goto IL_011c;
						}
						num2 = 0;
					}
					object obj;
					try
					{
						if (num != 0)
						{
							val = logicalDeviceReflashBootLoader.ProductFwPartNum1Pid.ReadTextAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<string>, <TryGetProductFwPartNum1Async>d__47>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<string>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						obj = (object)ex;
						num2 = 1;
						goto IL_0094;
					}
					goto end_IL_000e;
					IL_0094:
					if (num2 == 1)
					{
						Exception ex2 = (Exception)obj;
						TaggedLog.Warning("LogicalDeviceReflashBootLoader", String.Concat("Unable to get Product Part Number 1 ", ex2.Message), Array.Empty<object>());
						val = Task.FromResult<string>(String.Empty).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<string>, <TryGetProductFwPartNum1Async>d__47>(ref val, ref this);
							return;
						}
						goto IL_011c;
					}
					goto end_IL_000e;
					IL_011c:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetProductFwPartNum2Async>d__49 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<string> <>t__builder;

			public LogicalDeviceReflashBootLoader <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<string> <>u__1;

			private void MoveNext()
			{
				//IL_008f: Expected O, but got Unknown
				//IL_0128: Expected O, but got Unknown
				//IL_009d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a4: Expected O, but got Unknown
				//IL_00ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0100: Unknown result type (might be due to invalid IL or missing references)
				//IL_0105: Unknown result type (might be due to invalid IL or missing references)
				//IL_010d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ea: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0072: Unknown result type (might be due to invalid IL or missing references)
				//IL_0026: Unknown result type (might be due to invalid IL or missing references)
				//IL_0030: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_004a: Unknown result type (might be due to invalid IL or missing references)
				//IL_004c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceReflashBootLoader logicalDeviceReflashBootLoader = <>4__this;
				string result = default(string);
				try
				{
					TaskAwaiter<string> val;
					int num2;
					if (num != 0)
					{
						if (num == 1)
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<string>);
							num = (<>1__state = -1);
							goto IL_011c;
						}
						num2 = 0;
					}
					object obj;
					try
					{
						if (num != 0)
						{
							val = logicalDeviceReflashBootLoader.ProductFwPartNum2Pid.ReadTextAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<string>, <TryGetProductFwPartNum2Async>d__49>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<string>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						obj = (object)ex;
						num2 = 1;
						goto IL_0094;
					}
					goto end_IL_000e;
					IL_0094:
					if (num2 == 1)
					{
						Exception ex2 = (Exception)obj;
						TaggedLog.Warning("LogicalDeviceReflashBootLoader", String.Concat("Unable to get Product Part Number 2 ", ex2.Message), Array.Empty<object>());
						val = Task.FromResult<string>(String.Empty).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<string>, <TryGetProductFwPartNum2Async>d__49>(ref val, ref this);
							return;
						}
						goto IL_011c;
					}
					goto end_IL_000e;
					IL_011c:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetProductFwPartNumberAsync>d__53 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<string> <>t__builder;

			public LogicalDeviceReflashBootLoader <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<string> <>u__1;

			private void MoveNext()
			{
				//IL_008f: Expected O, but got Unknown
				//IL_0128: Expected O, but got Unknown
				//IL_009d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a4: Expected O, but got Unknown
				//IL_00ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0100: Unknown result type (might be due to invalid IL or missing references)
				//IL_0105: Unknown result type (might be due to invalid IL or missing references)
				//IL_010d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ea: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0072: Unknown result type (might be due to invalid IL or missing references)
				//IL_0026: Unknown result type (might be due to invalid IL or missing references)
				//IL_0030: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Unknown result type (might be due to invalid IL or missing references)
				//IL_004a: Unknown result type (might be due to invalid IL or missing references)
				//IL_004c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceReflashBootLoader logicalDeviceReflashBootLoader = <>4__this;
				string result = default(string);
				try
				{
					TaskAwaiter<string> val;
					int num2;
					if (num != 0)
					{
						if (num == 1)
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<string>);
							num = (<>1__state = -1);
							goto IL_011c;
						}
						num2 = 0;
					}
					object obj;
					try
					{
						if (num != 0)
						{
							val = logicalDeviceReflashBootLoader.ProductFwPartNumberPid.ReadTextAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<string>, <TryGetProductFwPartNumberAsync>d__53>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<string>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						obj = (object)ex;
						num2 = 1;
						goto IL_0094;
					}
					goto end_IL_000e;
					IL_0094:
					if (num2 == 1)
					{
						Exception ex2 = (Exception)obj;
						TaggedLog.Warning("LogicalDeviceReflashBootLoader", String.Concat("Unable to get product firmware part number ", ex2.Message), Array.Empty<object>());
						val = Task.FromResult<string>(String.Empty).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<string>, <TryGetProductFwPartNumberAsync>d__53>(ref val, ref this);
							return;
						}
						goto IL_011c;
					}
					goto end_IL_000e;
					IL_011c:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetProductIdInConfigBlockAsync>d__45 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<ushort> <>t__builder;

			public LogicalDeviceReflashBootLoader <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<ushort> <>u__1;

			private void MoveNext()
			{
				//IL_007c: Expected O, but got Unknown
				//IL_00a2: Expected O, but got Unknown
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002a: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_003f: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceReflashBootLoader logicalDeviceReflashBootLoader = <>4__this;
				ushort result;
				try
				{
					try
					{
						TaskAwaiter<ushort> val;
						if (num != 0)
						{
							val = logicalDeviceReflashBootLoader.ProductIdInConfigBlockPid.ReadUInt16Async(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ushort>, <TryGetProductIdInConfigBlockAsync>d__45>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<ushort>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Warning("LogicalDeviceReflashBootLoader", String.Concat("Unable to get Product Id in Config Block ", ex2.Message), Array.Empty<object>());
						result = 0;
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetProductIdNumberAsync>d__43 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<ushort> <>t__builder;

			public LogicalDeviceReflashBootLoader <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<ushort> <>u__1;

			private void MoveNext()
			{
				//IL_007c: Expected O, but got Unknown
				//IL_00a2: Expected O, but got Unknown
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0061: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002a: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_003f: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceReflashBootLoader logicalDeviceReflashBootLoader = <>4__this;
				ushort result;
				try
				{
					try
					{
						TaskAwaiter<ushort> val;
						if (num != 0)
						{
							val = logicalDeviceReflashBootLoader.ProductIdNumberPid.ReadUInt16Async(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ushort>, <TryGetProductIdNumberAsync>d__43>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<ushort>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Warning("LogicalDeviceReflashBootLoader", String.Concat("Unable to get Product Id Number ", ex2.Message), Array.Empty<object>());
						result = 0;
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TrySetCoreMicrocontrollerResetValueAsync>d__52 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceReflashBootLoader <>4__this;

			public string value;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<bool> <>u__2;

			private void MoveNext()
			{
				//IL_00fb: Expected O, but got Unknown
				//IL_019b: Expected O, but got Unknown
				//IL_0109: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Expected O, but got Unknown
				//IL_0141: Unknown result type (might be due to invalid IL or missing references)
				//IL_0146: Unknown result type (might be due to invalid IL or missing references)
				//IL_0173: Unknown result type (might be due to invalid IL or missing references)
				//IL_0178: Unknown result type (might be due to invalid IL or missing references)
				//IL_0180: Unknown result type (might be due to invalid IL or missing references)
				//IL_015b: Unknown result type (might be due to invalid IL or missing references)
				//IL_015d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				//IL_009c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00de: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0043: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0058: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceReflashBootLoader logicalDeviceReflashBootLoader = <>4__this;
				bool result = default(bool);
				try
				{
					TaskAwaiter<bool> val;
					int num2;
					if ((uint)num > 1u)
					{
						if (num == 2)
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_018f;
						}
						num2 = 0;
					}
					object obj;
					try
					{
						TaskAwaiter val2;
						if (num != 0)
						{
							if (num == 1)
							{
								val = <>u__2;
								<>u__2 = default(TaskAwaiter<bool>);
								num = (<>1__state = -1);
								goto IL_00ed;
							}
							val2 = logicalDeviceReflashBootLoader.CoreMicrocontrollerResetPid.WriteTextAsync(value, cancellationToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <TrySetCoreMicrocontrollerResetValueAsync>d__52>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
						val = Task.FromResult<bool>(true).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <TrySetCoreMicrocontrollerResetValueAsync>d__52>(ref val, ref this);
							return;
						}
						goto IL_00ed;
						IL_00ed:
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						obj = (object)ex;
						num2 = 1;
						goto IL_0100;
					}
					goto end_IL_000e;
					IL_0100:
					if (num2 == 1)
					{
						Exception ex2 = (Exception)obj;
						TaggedLog.Warning("LogicalDeviceReflashBootLoader", String.Concat("Unable to set Core Microcontroller Reset \"", value, "\" ", ex2.Message), Array.Empty<object>());
						val = Task.FromResult<bool>(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <TrySetCoreMicrocontrollerResetValueAsync>d__52>(ref val, ref this);
							return;
						}
						goto IL_018f;
					}
					goto end_IL_000e;
					IL_018f:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TrySetCoreVersionInfoAsync>d__56 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceReflashBootLoader <>4__this;

			public string value;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<bool> <>u__2;

			private void MoveNext()
			{
				//IL_00fb: Expected O, but got Unknown
				//IL_019b: Expected O, but got Unknown
				//IL_0109: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Expected O, but got Unknown
				//IL_0141: Unknown result type (might be due to invalid IL or missing references)
				//IL_0146: Unknown result type (might be due to invalid IL or missing references)
				//IL_0173: Unknown result type (might be due to invalid IL or missing references)
				//IL_0178: Unknown result type (might be due to invalid IL or missing references)
				//IL_0180: Unknown result type (might be due to invalid IL or missing references)
				//IL_015b: Unknown result type (might be due to invalid IL or missing references)
				//IL_015d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				//IL_009c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00de: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0043: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0058: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceReflashBootLoader logicalDeviceReflashBootLoader = <>4__this;
				bool result = default(bool);
				try
				{
					TaskAwaiter<bool> val;
					int num2;
					if ((uint)num > 1u)
					{
						if (num == 2)
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_018f;
						}
						num2 = 0;
					}
					object obj;
					try
					{
						TaskAwaiter val2;
						if (num != 0)
						{
							if (num == 1)
							{
								val = <>u__2;
								<>u__2 = default(TaskAwaiter<bool>);
								num = (<>1__state = -1);
								goto IL_00ed;
							}
							val2 = logicalDeviceReflashBootLoader.CoreVersionInfoPid.WriteTextAsync(value, cancellationToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <TrySetCoreVersionInfoAsync>d__56>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
						val = Task.FromResult<bool>(true).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <TrySetCoreVersionInfoAsync>d__56>(ref val, ref this);
							return;
						}
						goto IL_00ed;
						IL_00ed:
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						obj = (object)ex;
						num2 = 1;
						goto IL_0100;
					}
					goto end_IL_000e;
					IL_0100:
					if (num2 == 1)
					{
						Exception ex2 = (Exception)obj;
						TaggedLog.Warning("LogicalDeviceReflashBootLoader", String.Concat("Unable to set core version info \"", value, "\" ", ex2.Message), Array.Empty<object>());
						val = Task.FromResult<bool>(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <TrySetCoreVersionInfoAsync>d__56>(ref val, ref this);
							return;
						}
						goto IL_018f;
					}
					goto end_IL_000e;
					IL_018f:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TrySetProductFwPartNum1Async>d__48 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceReflashBootLoader <>4__this;

			public string value;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<bool> <>u__2;

			private void MoveNext()
			{
				//IL_00fb: Expected O, but got Unknown
				//IL_019b: Expected O, but got Unknown
				//IL_0109: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Expected O, but got Unknown
				//IL_0141: Unknown result type (might be due to invalid IL or missing references)
				//IL_0146: Unknown result type (might be due to invalid IL or missing references)
				//IL_0173: Unknown result type (might be due to invalid IL or missing references)
				//IL_0178: Unknown result type (might be due to invalid IL or missing references)
				//IL_0180: Unknown result type (might be due to invalid IL or missing references)
				//IL_015b: Unknown result type (might be due to invalid IL or missing references)
				//IL_015d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				//IL_009c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00de: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0043: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0058: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceReflashBootLoader logicalDeviceReflashBootLoader = <>4__this;
				bool result = default(bool);
				try
				{
					TaskAwaiter<bool> val;
					int num2;
					if ((uint)num > 1u)
					{
						if (num == 2)
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_018f;
						}
						num2 = 0;
					}
					object obj;
					try
					{
						TaskAwaiter val2;
						if (num != 0)
						{
							if (num == 1)
							{
								val = <>u__2;
								<>u__2 = default(TaskAwaiter<bool>);
								num = (<>1__state = -1);
								goto IL_00ed;
							}
							val2 = logicalDeviceReflashBootLoader.ProductFwPartNum1Pid.WriteTextAsync(value, cancellationToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <TrySetProductFwPartNum1Async>d__48>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
						val = Task.FromResult<bool>(true).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <TrySetProductFwPartNum1Async>d__48>(ref val, ref this);
							return;
						}
						goto IL_00ed;
						IL_00ed:
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						obj = (object)ex;
						num2 = 1;
						goto IL_0100;
					}
					goto end_IL_000e;
					IL_0100:
					if (num2 == 1)
					{
						Exception ex2 = (Exception)obj;
						TaggedLog.Warning("LogicalDeviceReflashBootLoader", String.Concat("Unable to set Product Part Number 1 \"", value, "\" ", ex2.Message), Array.Empty<object>());
						val = Task.FromResult<bool>(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <TrySetProductFwPartNum1Async>d__48>(ref val, ref this);
							return;
						}
						goto IL_018f;
					}
					goto end_IL_000e;
					IL_018f:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TrySetProductFwPartNum2Async>d__50 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceReflashBootLoader <>4__this;

			public string value;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<bool> <>u__2;

			private void MoveNext()
			{
				//IL_00fb: Expected O, but got Unknown
				//IL_019b: Expected O, but got Unknown
				//IL_0109: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Expected O, but got Unknown
				//IL_0141: Unknown result type (might be due to invalid IL or missing references)
				//IL_0146: Unknown result type (might be due to invalid IL or missing references)
				//IL_0173: Unknown result type (might be due to invalid IL or missing references)
				//IL_0178: Unknown result type (might be due to invalid IL or missing references)
				//IL_0180: Unknown result type (might be due to invalid IL or missing references)
				//IL_015b: Unknown result type (might be due to invalid IL or missing references)
				//IL_015d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				//IL_009c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00de: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0043: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0058: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceReflashBootLoader logicalDeviceReflashBootLoader = <>4__this;
				bool result = default(bool);
				try
				{
					TaskAwaiter<bool> val;
					int num2;
					if ((uint)num > 1u)
					{
						if (num == 2)
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_018f;
						}
						num2 = 0;
					}
					object obj;
					try
					{
						TaskAwaiter val2;
						if (num != 0)
						{
							if (num == 1)
							{
								val = <>u__2;
								<>u__2 = default(TaskAwaiter<bool>);
								num = (<>1__state = -1);
								goto IL_00ed;
							}
							val2 = logicalDeviceReflashBootLoader.ProductFwPartNum2Pid.WriteTextAsync(value, cancellationToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <TrySetProductFwPartNum2Async>d__50>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
						val = Task.FromResult<bool>(true).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <TrySetProductFwPartNum2Async>d__50>(ref val, ref this);
							return;
						}
						goto IL_00ed;
						IL_00ed:
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						obj = (object)ex;
						num2 = 1;
						goto IL_0100;
					}
					goto end_IL_000e;
					IL_0100:
					if (num2 == 1)
					{
						Exception ex2 = (Exception)obj;
						TaggedLog.Warning("LogicalDeviceReflashBootLoader", String.Concat("Unable to set Product Part Number 2 \"", value, "\" ", ex2.Message), Array.Empty<object>());
						val = Task.FromResult<bool>(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <TrySetProductFwPartNum2Async>d__50>(ref val, ref this);
							return;
						}
						goto IL_018f;
					}
					goto end_IL_000e;
					IL_018f:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TrySetProductFwPartNumberAsync>d__54 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceReflashBootLoader <>4__this;

			public string value;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private TaskAwaiter<bool> <>u__2;

			private void MoveNext()
			{
				//IL_00fb: Expected O, but got Unknown
				//IL_019b: Expected O, but got Unknown
				//IL_0109: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Expected O, but got Unknown
				//IL_0141: Unknown result type (might be due to invalid IL or missing references)
				//IL_0146: Unknown result type (might be due to invalid IL or missing references)
				//IL_0173: Unknown result type (might be due to invalid IL or missing references)
				//IL_0178: Unknown result type (might be due to invalid IL or missing references)
				//IL_0180: Unknown result type (might be due to invalid IL or missing references)
				//IL_015b: Unknown result type (might be due to invalid IL or missing references)
				//IL_015d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				//IL_009c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00de: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0043: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0058: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceReflashBootLoader logicalDeviceReflashBootLoader = <>4__this;
				bool result = default(bool);
				try
				{
					TaskAwaiter<bool> val;
					int num2;
					if ((uint)num > 1u)
					{
						if (num == 2)
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_018f;
						}
						num2 = 0;
					}
					object obj;
					try
					{
						TaskAwaiter val2;
						if (num != 0)
						{
							if (num == 1)
							{
								val = <>u__2;
								<>u__2 = default(TaskAwaiter<bool>);
								num = (<>1__state = -1);
								goto IL_00ed;
							}
							val2 = logicalDeviceReflashBootLoader.ProductFwPartNumberPid.WriteTextAsync(value, cancellationToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <TrySetProductFwPartNumberAsync>d__54>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
						val = Task.FromResult<bool>(true).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <TrySetProductFwPartNumberAsync>d__54>(ref val, ref this);
							return;
						}
						goto IL_00ed;
						IL_00ed:
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						obj = (object)ex;
						num2 = 1;
						goto IL_0100;
					}
					goto end_IL_000e;
					IL_0100:
					if (num2 == 1)
					{
						Exception ex2 = (Exception)obj;
						TaggedLog.Warning("LogicalDeviceReflashBootLoader", String.Concat("Unable to set product firmware part number \"", value, "\" ", ex2.Message), Array.Empty<object>());
						val = Task.FromResult<bool>(false).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <TrySetProductFwPartNumberAsync>d__54>(ref val, ref this);
							return;
						}
						goto IL_018f;
					}
					goto end_IL_000e;
					IL_018f:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TrySetProductIdInConfigBlockAsync>d__46 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceReflashBootLoader <>4__this;

			public ushort productIdInConfigBlock;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0086: Expected O, but got Unknown
				//IL_00b7: Expected O, but got Unknown
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0063: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0030: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceReflashBootLoader logicalDeviceReflashBootLoader = <>4__this;
				bool result;
				try
				{
					try
					{
						TaskAwaiter val;
						if (num != 0)
						{
							val = logicalDeviceReflashBootLoader.ProductIdInConfigBlockPid.WriteUInt16Async(productIdInConfigBlock, cancellationToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <TrySetProductIdInConfigBlockAsync>d__46>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val)).GetResult();
						result = true;
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Warning("LogicalDeviceReflashBootLoader", String.Format("Unable to set Product Id in Config Block \"{0}\" {1}", (object)productIdInConfigBlock, (object)ex2.Message), Array.Empty<object>());
						result = false;
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TrySetProductIdNumberAsync>d__44 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceReflashBootLoader <>4__this;

			public ushort productIdNumber;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0086: Expected O, but got Unknown
				//IL_00b7: Expected O, but got Unknown
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0063: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0030: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceReflashBootLoader logicalDeviceReflashBootLoader = <>4__this;
				bool result;
				try
				{
					try
					{
						TaskAwaiter val;
						if (num != 0)
						{
							val = logicalDeviceReflashBootLoader.ProductIdNumberPid.WriteUInt16Async(productIdNumber, cancellationToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter, <TrySetProductIdNumberAsync>d__44>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val)).GetResult();
						result = true;
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Warning("LogicalDeviceReflashBootLoader", String.Format("Unable to set Product Id Number \"{0}\" {1}", (object)productIdNumber, (object)ex2.Message), Array.Empty<object>());
						result = false;
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <UpdateFirmwareAsync>d__58 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceReflashBootLoader <>4__this;

			public CancellationToken cancellationToken;

			public IReadOnlyList<byte> data;

			public Func<ILogicalDeviceTransferProgress, bool> progressAck;

			public Dictionary<FirmwareUpdateOption, object> options;

			private ILogicalDeviceFirmwareUpdateSession <firmwareUpdateSession>5__2;

			private TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice?> <>u__1;

			private TaskAwaiter <>u__2;

			private void MoveNext()
			{
				//IL_0142: Expected O, but got Unknown
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_0103: Unknown result type (might be due to invalid IL or missing references)
				//IL_0108: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00eb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ed: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceReflashBootLoader logicalDeviceReflashBootLoader = <>4__this;
				try
				{
					TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice> val;
					if (num != 0)
					{
						if (num == 1)
						{
							goto IL_00a9;
						}
						val = FirmwareUpdateSupportEx.TryGetSupportedFirmwareUpdateDeviceSource(((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceReflashBootLoader).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceReflashBootLoader, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>, <UpdateFirmwareAsync>d__58>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>);
						num = (<>1__state = -1);
					}
					ILogicalDeviceSourceDirectFirmwareUpdateDevice result = val.GetResult();
					if (result == null)
					{
						throw new FirmwareUpdateNotSupportedException((ILogicalDevice)(object)logicalDeviceReflashBootLoader, (FirmwareUpdateSupport)0, (Exception)null);
					}
					<firmwareUpdateSession>5__2 = ((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceReflashBootLoader).DeviceService.FirmwareUpdateManager.StartFirmwareUpdateSession((ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceReflashBootLoader);
					goto IL_00a9;
					IL_00a9:
					try
					{
						TaskAwaiter val2;
						if (num != 1)
						{
							val2 = ((IFirmwareUpdateDevice)result).UpdateFirmwareAsync(<firmwareUpdateSession>5__2, data, progressAck, cancellationToken, (IReadOnlyDictionary<FirmwareUpdateOption, object>)(object)options).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <UpdateFirmwareAsync>d__58>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
					}
					finally
					{
						if (num < 0 && <firmwareUpdateSession>5__2 != null)
						{
							((IDisposable)<firmwareUpdateSession>5__2).Dispose();
						}
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<firmwareUpdateSession>5__2 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<firmwareUpdateSession>5__2 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const int DefaultJumpToBootTimeMs = 5000;

		private const string LogTag = "LogicalDeviceReflashBootLoader";

		private readonly Dictionary<FirmwareUpdateOption, string> _defaultFirmwareUpdateOptions = new Dictionary<FirmwareUpdateOption, string>();

		[field: CompilerGenerated]
		public ILogicalDevicePidUInt16 ProductIdNumberPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidUInt16 ProductIdInConfigBlockPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidText ProductFwPartNum1Pid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidText ProductFwPartNum2Pid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidText ProductFwPartNumberPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidText CoreMicrocontrollerResetPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		[field: CompilerGenerated]
		public ILogicalDevicePidText CoreVersionInfoPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public virtual bool IsJumpToBootPidSupported => ((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId.ProductId == PRODUCT_ID.CURT_GROUP_SWAY_COMMAND_LINE_2_0;

		public bool IsJumpToBootRequiredForFirmwareUpdate => false;

		[field: CompilerGenerated]
		public ILogicalDevicePidJumpToBoot JumpToBootPid
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			protected set;
		}

		public byte ReFlashVersion => ((LogicalDevice<LogicalDeviceReflashBootLoaderStatus, ILogicalDeviceCapability>)this).DeviceStatus.ReFlashVersion;

		public byte SpbVersion => ((LogicalDevice<LogicalDeviceReflashBootLoaderStatus, ILogicalDeviceCapability>)this).DeviceStatus.SpbVersion;

		public IReadOnlyDictionary<FirmwareUpdateOption, string> DefaultFirmwareUpdateOptions
		{
			get
			{
				lock (_defaultFirmwareUpdateOptions)
				{
					if (_defaultFirmwareUpdateOptions.Count != 0)
					{
						return (IReadOnlyDictionary<FirmwareUpdateOption, string>)(object)_defaultFirmwareUpdateOptions;
					}
					if (((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId.ProductId == PRODUCT_ID.CURT_GROUP_SWAY_COMMAND_LINE_2_0)
					{
						_defaultFirmwareUpdateOptions[(FirmwareUpdateOption)1] = String.Format("{0}", (object)(UInt32)40960);
					}
					else if (((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId.ProductId == PRODUCT_ID.ABS_SWAY_CONTROLLER_ASSEMBLY)
					{
						_defaultFirmwareUpdateOptions[(FirmwareUpdateOption)1] = String.Format("{0}", (object)(UInt32)131072);
					}
					else if (((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId.ProductId == PRODUCT_ID.ABS_AUSTRALIA_CONTROLLER_ASSEMBLY)
					{
						_defaultFirmwareUpdateOptions[(FirmwareUpdateOption)1] = String.Format("{0}", (object)(UInt32)131072);
					}
					else if (((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId.ProductId == PRODUCT_ID.CAN_RE_FLASH_BOOTLOADER)
					{
						TaggedLog.Error("LogicalDeviceReflashBootLoader", String.Format("Bootloader Not Configured Properly Product ID is Generic {0}", (object)((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId.ProductId), Array.Empty<object>());
					}
					else if (((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId.ProductId == PRODUCT_ID.BASECAMP_HYDRAULIC_5W_LEVELER_ASSEMBLY || ((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId.ProductId == PRODUCT_ID.BASECAMP_MOTORIZED_3PT_LEVELER_ASSEMBLY || ((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId.ProductId == PRODUCT_ID.BASECAMP_MOTORIZED_4PT_LEVELER_ASSEMBLY || ((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId.ProductId == PRODUCT_ID.BASECAMP_ELECTRIC_5W_LEVELER_ASSEMBLY)
					{
						_defaultFirmwareUpdateOptions[(FirmwareUpdateOption)1] = String.Format("{0}", (object)(UInt32)163840);
					}
					else if (((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId.ProductId == PRODUCT_ID.SUPER_PREMIUM_MONITOR_PANEL)
					{
						_defaultFirmwareUpdateOptions[(FirmwareUpdateOption)1] = String.Format("{0}", (object)(UInt32)4325376);
					}
					return (IReadOnlyDictionary<FirmwareUpdateOption, string>)(object)_defaultFirmwareUpdateOptions;
				}
			}
		}

		public LogicalDeviceReflashBootLoader(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceReflashBootLoaderStatus(), (ILogicalDeviceCapability)new LogicalDeviceCapability(), service, isFunctionClassChangeable)
		{
			//IL_0012: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Expected O, but got Unknown
			//IL_002b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0035: Expected O, but got Unknown
			//IL_0042: Unknown result type (might be due to invalid IL or missing references)
			//IL_004c: Expected O, but got Unknown
			//IL_0059: Unknown result type (might be due to invalid IL or missing references)
			//IL_0063: Expected O, but got Unknown
			//IL_0072: Unknown result type (might be due to invalid IL or missing references)
			//IL_007c: Expected O, but got Unknown
			//IL_008b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0095: Expected O, but got Unknown
			//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ae: Expected O, but got Unknown
			//IL_00bd: Unknown result type (might be due to invalid IL or missing references)
			//IL_00c7: Expected O, but got Unknown
			//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e0: Expected O, but got Unknown
			JumpToBootPid = (ILogicalDevicePidJumpToBoot)new LogicalDevicePidJumpToBoot((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)390), (LogicalDeviceSessionType)3);
			ProductIdNumberPid = (ILogicalDevicePidUInt16)new LogicalDevicePidUInt16((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)380), (LogicalDeviceSessionType)1);
			ProductIdInConfigBlockPid = (ILogicalDevicePidUInt16)new LogicalDevicePidUInt16((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)381), (LogicalDeviceSessionType)1);
			ProductFwPartNum1Pid = (ILogicalDevicePidText)new LogicalDevicePidText((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)383), (LogicalDeviceSessionType)1, (LogicalDevicePidTextEncoding)0, (Func<ulong, bool>)null);
			ProductFwPartNum2Pid = (ILogicalDevicePidText)new LogicalDevicePidText((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)384), (LogicalDeviceSessionType)1, (LogicalDevicePidTextEncoding)0, (Func<ulong, bool>)null);
			CoreMicrocontrollerResetPid = (ILogicalDevicePidText)new LogicalDevicePidText((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)377), (LogicalDeviceSessionType)3, (LogicalDevicePidTextEncoding)0, (Func<ulong, bool>)null);
			ProductFwPartNumberPid = (ILogicalDevicePidText)new LogicalDevicePidText((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)378), (LogicalDeviceSessionType)1, (LogicalDevicePidTextEncoding)0, (Func<ulong, bool>)null);
			CoreVersionInfoPid = (ILogicalDevicePidText)new LogicalDevicePidText((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)379), (LogicalDeviceSessionType)2, (LogicalDevicePidTextEncoding)0, (Func<ulong, bool>)null);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<ushort> TryGetProductIdNumberAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetProductIdNumberAsync>d__43 <TryGetProductIdNumberAsync>d__ = default(<TryGetProductIdNumberAsync>d__43);
			<TryGetProductIdNumberAsync>d__.<>t__builder = AsyncTaskMethodBuilder<ushort>.Create();
			<TryGetProductIdNumberAsync>d__.<>4__this = this;
			<TryGetProductIdNumberAsync>d__.cancellationToken = cancellationToken;
			<TryGetProductIdNumberAsync>d__.<>1__state = -1;
			<TryGetProductIdNumberAsync>d__.<>t__builder.Start<<TryGetProductIdNumberAsync>d__43>(ref <TryGetProductIdNumberAsync>d__);
			return <TryGetProductIdNumberAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TrySetProductIdNumberAsync(ushort productIdNumber, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<TrySetProductIdNumberAsync>d__44 <TrySetProductIdNumberAsync>d__ = default(<TrySetProductIdNumberAsync>d__44);
			<TrySetProductIdNumberAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TrySetProductIdNumberAsync>d__.<>4__this = this;
			<TrySetProductIdNumberAsync>d__.productIdNumber = productIdNumber;
			<TrySetProductIdNumberAsync>d__.cancellationToken = cancellationToken;
			<TrySetProductIdNumberAsync>d__.<>1__state = -1;
			<TrySetProductIdNumberAsync>d__.<>t__builder.Start<<TrySetProductIdNumberAsync>d__44>(ref <TrySetProductIdNumberAsync>d__);
			return <TrySetProductIdNumberAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<ushort> TryGetProductIdInConfigBlockAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetProductIdInConfigBlockAsync>d__45 <TryGetProductIdInConfigBlockAsync>d__ = default(<TryGetProductIdInConfigBlockAsync>d__45);
			<TryGetProductIdInConfigBlockAsync>d__.<>t__builder = AsyncTaskMethodBuilder<ushort>.Create();
			<TryGetProductIdInConfigBlockAsync>d__.<>4__this = this;
			<TryGetProductIdInConfigBlockAsync>d__.cancellationToken = cancellationToken;
			<TryGetProductIdInConfigBlockAsync>d__.<>1__state = -1;
			<TryGetProductIdInConfigBlockAsync>d__.<>t__builder.Start<<TryGetProductIdInConfigBlockAsync>d__45>(ref <TryGetProductIdInConfigBlockAsync>d__);
			return <TryGetProductIdInConfigBlockAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TrySetProductIdInConfigBlockAsync(ushort productIdInConfigBlock, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<TrySetProductIdInConfigBlockAsync>d__46 <TrySetProductIdInConfigBlockAsync>d__ = default(<TrySetProductIdInConfigBlockAsync>d__46);
			<TrySetProductIdInConfigBlockAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TrySetProductIdInConfigBlockAsync>d__.<>4__this = this;
			<TrySetProductIdInConfigBlockAsync>d__.productIdInConfigBlock = productIdInConfigBlock;
			<TrySetProductIdInConfigBlockAsync>d__.cancellationToken = cancellationToken;
			<TrySetProductIdInConfigBlockAsync>d__.<>1__state = -1;
			<TrySetProductIdInConfigBlockAsync>d__.<>t__builder.Start<<TrySetProductIdInConfigBlockAsync>d__46>(ref <TrySetProductIdInConfigBlockAsync>d__);
			return <TrySetProductIdInConfigBlockAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<string> TryGetProductFwPartNum1Async(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetProductFwPartNum1Async>d__47 <TryGetProductFwPartNum1Async>d__ = default(<TryGetProductFwPartNum1Async>d__47);
			<TryGetProductFwPartNum1Async>d__.<>t__builder = AsyncTaskMethodBuilder<string>.Create();
			<TryGetProductFwPartNum1Async>d__.<>4__this = this;
			<TryGetProductFwPartNum1Async>d__.cancellationToken = cancellationToken;
			<TryGetProductFwPartNum1Async>d__.<>1__state = -1;
			<TryGetProductFwPartNum1Async>d__.<>t__builder.Start<<TryGetProductFwPartNum1Async>d__47>(ref <TryGetProductFwPartNum1Async>d__);
			return <TryGetProductFwPartNum1Async>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TrySetProductFwPartNum1Async(string value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<TrySetProductFwPartNum1Async>d__48 <TrySetProductFwPartNum1Async>d__ = default(<TrySetProductFwPartNum1Async>d__48);
			<TrySetProductFwPartNum1Async>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TrySetProductFwPartNum1Async>d__.<>4__this = this;
			<TrySetProductFwPartNum1Async>d__.value = value;
			<TrySetProductFwPartNum1Async>d__.cancellationToken = cancellationToken;
			<TrySetProductFwPartNum1Async>d__.<>1__state = -1;
			<TrySetProductFwPartNum1Async>d__.<>t__builder.Start<<TrySetProductFwPartNum1Async>d__48>(ref <TrySetProductFwPartNum1Async>d__);
			return <TrySetProductFwPartNum1Async>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<string> TryGetProductFwPartNum2Async(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetProductFwPartNum2Async>d__49 <TryGetProductFwPartNum2Async>d__ = default(<TryGetProductFwPartNum2Async>d__49);
			<TryGetProductFwPartNum2Async>d__.<>t__builder = AsyncTaskMethodBuilder<string>.Create();
			<TryGetProductFwPartNum2Async>d__.<>4__this = this;
			<TryGetProductFwPartNum2Async>d__.cancellationToken = cancellationToken;
			<TryGetProductFwPartNum2Async>d__.<>1__state = -1;
			<TryGetProductFwPartNum2Async>d__.<>t__builder.Start<<TryGetProductFwPartNum2Async>d__49>(ref <TryGetProductFwPartNum2Async>d__);
			return <TryGetProductFwPartNum2Async>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TrySetProductFwPartNum2Async(string value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<TrySetProductFwPartNum2Async>d__50 <TrySetProductFwPartNum2Async>d__ = default(<TrySetProductFwPartNum2Async>d__50);
			<TrySetProductFwPartNum2Async>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TrySetProductFwPartNum2Async>d__.<>4__this = this;
			<TrySetProductFwPartNum2Async>d__.value = value;
			<TrySetProductFwPartNum2Async>d__.cancellationToken = cancellationToken;
			<TrySetProductFwPartNum2Async>d__.<>1__state = -1;
			<TrySetProductFwPartNum2Async>d__.<>t__builder.Start<<TrySetProductFwPartNum2Async>d__50>(ref <TrySetProductFwPartNum2Async>d__);
			return <TrySetProductFwPartNum2Async>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<string> TryGetCoreMicrocontrollerResetValueAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetCoreMicrocontrollerResetValueAsync>d__51 <TryGetCoreMicrocontrollerResetValueAsync>d__ = default(<TryGetCoreMicrocontrollerResetValueAsync>d__51);
			<TryGetCoreMicrocontrollerResetValueAsync>d__.<>t__builder = AsyncTaskMethodBuilder<string>.Create();
			<TryGetCoreMicrocontrollerResetValueAsync>d__.<>4__this = this;
			<TryGetCoreMicrocontrollerResetValueAsync>d__.cancellationToken = cancellationToken;
			<TryGetCoreMicrocontrollerResetValueAsync>d__.<>1__state = -1;
			<TryGetCoreMicrocontrollerResetValueAsync>d__.<>t__builder.Start<<TryGetCoreMicrocontrollerResetValueAsync>d__51>(ref <TryGetCoreMicrocontrollerResetValueAsync>d__);
			return <TryGetCoreMicrocontrollerResetValueAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TrySetCoreMicrocontrollerResetValueAsync(string value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<TrySetCoreMicrocontrollerResetValueAsync>d__52 <TrySetCoreMicrocontrollerResetValueAsync>d__ = default(<TrySetCoreMicrocontrollerResetValueAsync>d__52);
			<TrySetCoreMicrocontrollerResetValueAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TrySetCoreMicrocontrollerResetValueAsync>d__.<>4__this = this;
			<TrySetCoreMicrocontrollerResetValueAsync>d__.value = value;
			<TrySetCoreMicrocontrollerResetValueAsync>d__.cancellationToken = cancellationToken;
			<TrySetCoreMicrocontrollerResetValueAsync>d__.<>1__state = -1;
			<TrySetCoreMicrocontrollerResetValueAsync>d__.<>t__builder.Start<<TrySetCoreMicrocontrollerResetValueAsync>d__52>(ref <TrySetCoreMicrocontrollerResetValueAsync>d__);
			return <TrySetCoreMicrocontrollerResetValueAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<string> TryGetProductFwPartNumberAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetProductFwPartNumberAsync>d__53 <TryGetProductFwPartNumberAsync>d__ = default(<TryGetProductFwPartNumberAsync>d__53);
			<TryGetProductFwPartNumberAsync>d__.<>t__builder = AsyncTaskMethodBuilder<string>.Create();
			<TryGetProductFwPartNumberAsync>d__.<>4__this = this;
			<TryGetProductFwPartNumberAsync>d__.cancellationToken = cancellationToken;
			<TryGetProductFwPartNumberAsync>d__.<>1__state = -1;
			<TryGetProductFwPartNumberAsync>d__.<>t__builder.Start<<TryGetProductFwPartNumberAsync>d__53>(ref <TryGetProductFwPartNumberAsync>d__);
			return <TryGetProductFwPartNumberAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TrySetProductFwPartNumberAsync(string value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<TrySetProductFwPartNumberAsync>d__54 <TrySetProductFwPartNumberAsync>d__ = default(<TrySetProductFwPartNumberAsync>d__54);
			<TrySetProductFwPartNumberAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TrySetProductFwPartNumberAsync>d__.<>4__this = this;
			<TrySetProductFwPartNumberAsync>d__.value = value;
			<TrySetProductFwPartNumberAsync>d__.cancellationToken = cancellationToken;
			<TrySetProductFwPartNumberAsync>d__.<>1__state = -1;
			<TrySetProductFwPartNumberAsync>d__.<>t__builder.Start<<TrySetProductFwPartNumberAsync>d__54>(ref <TrySetProductFwPartNumberAsync>d__);
			return <TrySetProductFwPartNumberAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<string> TryGetCoreVersionInfoAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetCoreVersionInfoAsync>d__55 <TryGetCoreVersionInfoAsync>d__ = default(<TryGetCoreVersionInfoAsync>d__55);
			<TryGetCoreVersionInfoAsync>d__.<>t__builder = AsyncTaskMethodBuilder<string>.Create();
			<TryGetCoreVersionInfoAsync>d__.<>4__this = this;
			<TryGetCoreVersionInfoAsync>d__.cancellationToken = cancellationToken;
			<TryGetCoreVersionInfoAsync>d__.<>1__state = -1;
			<TryGetCoreVersionInfoAsync>d__.<>t__builder.Start<<TryGetCoreVersionInfoAsync>d__55>(ref <TryGetCoreVersionInfoAsync>d__);
			return <TryGetCoreVersionInfoAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> TrySetCoreVersionInfoAsync(string value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<TrySetCoreVersionInfoAsync>d__56 <TrySetCoreVersionInfoAsync>d__ = default(<TrySetCoreVersionInfoAsync>d__56);
			<TrySetCoreVersionInfoAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<TrySetCoreVersionInfoAsync>d__.<>4__this = this;
			<TrySetCoreVersionInfoAsync>d__.value = value;
			<TrySetCoreVersionInfoAsync>d__.cancellationToken = cancellationToken;
			<TrySetCoreVersionInfoAsync>d__.<>1__state = -1;
			<TrySetCoreVersionInfoAsync>d__.<>t__builder.Start<<TrySetCoreVersionInfoAsync>d__56>(ref <TrySetCoreVersionInfoAsync>d__);
			return <TrySetCoreVersionInfoAsync>d__.<>t__builder.Task;
		}

		public virtual Task<FirmwareUpdateSupport> TryGetFirmwareUpdateSupportAsync(CancellationToken cancelToken)
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			return FirmwareUpdateSupportEx.TryGetFirmwareUpdateSupportAsync(((LogicalDevice<ILogicalDeviceCapability>)(object)this).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)this, cancelToken);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task UpdateFirmwareAsync(IReadOnlyList<byte> data, Func<ILogicalDeviceTransferProgress, bool> progressAck, CancellationToken cancellationToken, Dictionary<FirmwareUpdateOption, object>? options = null)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<UpdateFirmwareAsync>d__58 <UpdateFirmwareAsync>d__ = default(<UpdateFirmwareAsync>d__58);
			<UpdateFirmwareAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<UpdateFirmwareAsync>d__.<>4__this = this;
			<UpdateFirmwareAsync>d__.data = data;
			<UpdateFirmwareAsync>d__.progressAck = progressAck;
			<UpdateFirmwareAsync>d__.cancellationToken = cancellationToken;
			<UpdateFirmwareAsync>d__.options = options;
			<UpdateFirmwareAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Start<<UpdateFirmwareAsync>d__58>(ref <UpdateFirmwareAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Task;
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceCapability>)(object)this).LastReceivedNetworkStatus;
		}
	}
	internal class LogicalDeviceReflashBootLoaderFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 50)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceReflashBootLoader(logicalDeviceId, service);
		}
	}
	public class LogicalDeviceReflashBootLoaderSim : LogicalDeviceReflashBootLoader, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		private const string LogTag = "LogicalDeviceReflashBootLoaderSim";

		private readonly LogicalDeviceReflashBootLoaderStatus _simStatus = new LogicalDeviceReflashBootLoaderStatus();

		private readonly FirmwareUpdateSim _firmwareUpdateSim;

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public override bool ActiveSession => true;

		public LogicalDeviceReflashBootLoaderSim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service = null)
			: base(logicalDeviceId, service)
		{
			//IL_0021: Unknown result type (might be due to invalid IL or missing references)
			//IL_002b: Expected O, but got Unknown
			//IL_0037: Unknown result type (might be due to invalid IL or missing references)
			//IL_0041: Expected O, but got Unknown
			//IL_004d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0057: Expected O, but got Unknown
			//IL_0067: Unknown result type (might be due to invalid IL or missing references)
			//IL_0071: Expected O, but got Unknown
			//IL_0081: Unknown result type (might be due to invalid IL or missing references)
			//IL_008b: Expected O, but got Unknown
			//IL_009b: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a5: Expected O, but got Unknown
			//IL_00b5: Unknown result type (might be due to invalid IL or missing references)
			//IL_00bf: Expected O, but got Unknown
			//IL_00cf: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d9: Expected O, but got Unknown
			base.JumpToBootPid = (ILogicalDevicePidJumpToBoot)new LogicalDevicePidSimJumpToBoot(PidExtension.ConvertToPid((Pid)390), 0uL);
			base.ProductIdNumberPid = (ILogicalDevicePidUInt16)new LogicalDevicePidSimUInt16(PidExtension.ConvertToPid((Pid)380), (ushort)0);
			base.ProductIdInConfigBlockPid = (ILogicalDevicePidUInt16)new LogicalDevicePidSimUInt16(PidExtension.ConvertToPid((Pid)381), (ushort)0);
			base.ProductFwPartNum1Pid = (ILogicalDevicePidText)new LogicalDevicePidSimText(PidExtension.ConvertToPid((Pid)383), String.Empty);
			base.ProductFwPartNum2Pid = (ILogicalDevicePidText)new LogicalDevicePidSimText(PidExtension.ConvertToPid((Pid)384), String.Empty);
			base.CoreMicrocontrollerResetPid = (ILogicalDevicePidText)new LogicalDevicePidSimText(PidExtension.ConvertToPid((Pid)377), String.Empty);
			base.ProductFwPartNumberPid = (ILogicalDevicePidText)new LogicalDevicePidSimText(PidExtension.ConvertToPid((Pid)378), String.Empty);
			base.CoreVersionInfoPid = (ILogicalDevicePidText)new LogicalDevicePidSimText(PidExtension.ConvertToPid((Pid)379), String.Empty);
			_firmwareUpdateSim = new FirmwareUpdateSim((ILogicalDevice)(object)this);
		}

		public override void UpdateDeviceOnline(bool canOnline)
		{
		}

		public override Task<FirmwareUpdateSupport> TryGetFirmwareUpdateSupportAsync(CancellationToken cancelToken)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return _firmwareUpdateSim.TryGetFirmwareUpdateSupportAsync(cancelToken);
		}

		public override Task UpdateFirmwareAsync(IReadOnlyList<byte> data, Func<ILogicalDeviceTransferProgress, bool> progressAck, CancellationToken cancellationToken, Dictionary<FirmwareUpdateOption, object>? options = null)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			return _firmwareUpdateSim.UpdateFirmwareAsync(data, progressAck, cancellationToken, options);
		}
	}
	public class LogicalDeviceReflashBootLoaderStatus : LogicalDeviceStatusPacketMutable
	{
		public const int MinimumStatusPacketSize = 2;

		private const int ReFlashVersionIndex = 0;

		private const int SpbVersionIndex = 1;

		public byte ReFlashVersion => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0];

		public byte SpbVersion => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[1];

		public LogicalDeviceReflashBootLoaderStatus()
			: base(2u)
		{
		}
	}
	public class LogicalDeviceLeveler5TouchpadSim : LogicalDeviceLeveler5Touchpad, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		private const string LogTag = "LogicalDeviceReflashBootLoaderSim";

		private readonly LogicalDeviceLeveler5TouchpadStatus _simStatus = new LogicalDeviceLeveler5TouchpadStatus();

		private readonly FirmwareUpdateSim _firmwareUpdateSim;

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public override bool ActiveSession => true;

		public LogicalDeviceLeveler5TouchpadSim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service = null)
			: base(logicalDeviceId, service)
		{
			_firmwareUpdateSim = new FirmwareUpdateSim((ILogicalDevice)(object)this);
		}

		public override void UpdateDeviceOnline(bool canOnline)
		{
		}

		public override Task<FirmwareUpdateSupport> TryGetFirmwareUpdateSupportAsync(CancellationToken cancelToken)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return _firmwareUpdateSim.TryGetFirmwareUpdateSupportAsync(cancelToken);
		}

		public override Task UpdateFirmwareAsync(IReadOnlyList<byte> data, Func<ILogicalDeviceTransferProgress, bool> progressAck, CancellationToken cancellationToken, Dictionary<FirmwareUpdateOption, object>? options = null)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			return _firmwareUpdateSim.UpdateFirmwareAsync(data, progressAck, cancellationToken, options);
		}
	}
}
namespace OneControl.Devices.BluetoothGateway
{
	public interface IBluetoothGateway
	{
		int ConnectionCount { get; }

		bool IsPairingActive { get; }

		BluetoothGatewayPairing PairingType { get; }

		Task<CommandResult> RequestPairingAsync(CancellationToken cancelToken);

		Task<byte> GetPairingPriority(CancellationToken cancellationToken);
	}
	public interface ILogicalDeviceBluetoothGateway : IBluetoothGateway, ILogicalDeviceWithStatus<LogicalDeviceBluetoothGatewayStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceBluetoothGatewayStatus>, ILogicalDeviceFirmwareUpdateDevice
	{
	}
	public interface ILogicalDeviceBluetoothGatewayDirect : ILogicalDeviceBluetoothGateway, IBluetoothGateway, ILogicalDeviceWithStatus<LogicalDeviceBluetoothGatewayStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceBluetoothGatewayStatus>, ILogicalDeviceFirmwareUpdateDevice, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public class LogicalDeviceBluetoothGateway : LogicalDevice<LogicalDeviceBluetoothGatewayStatus, ILogicalDeviceCapability>, ILogicalDeviceBluetoothGatewayDirect, ILogicalDeviceBluetoothGateway, IBluetoothGateway, ILogicalDeviceWithStatus<LogicalDeviceBluetoothGatewayStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithStatusUpdate<LogicalDeviceBluetoothGatewayStatus>, ILogicalDeviceFirmwareUpdateDevice, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink, IDevicesActivation
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ActivateSession>d__13 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceBluetoothGateway <>4__this;

			public CancellationToken cancelToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_007e: Expected O, but got Unknown
				//IL_00af: Expected O, but got Unknown
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0026: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBluetoothGateway logicalDeviceBluetoothGateway = <>4__this;
				try
				{
					try
					{
						TaskAwaiter val;
						if (num != 0)
						{
							val = logicalDeviceBluetoothGateway.IdsCanCommandRunner.CommandActivateSession(cancelToken, true).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <ActivateSession>d__13>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val)).GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Error("LogicalDeviceBluetoothGateway", String.Format("Unable to ActiveSession for {0} with error ${1}\n{2}", (object)((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceBluetoothGateway).LogicalId, (object)ex2.Message, (object)ex2.StackTrace), Array.Empty<object>());
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <GetPairingPriority>d__29 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<byte> <>t__builder;

			public LogicalDeviceBluetoothGateway <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<byte> <>u__1;

			private void MoveNext()
			{
				//IL_0079: Expected O, but got Unknown
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0018: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBluetoothGateway logicalDeviceBluetoothGateway = <>4__this;
				byte result;
				try
				{
					TaskAwaiter<byte> val;
					if (num != 0)
					{
						val = logicalDeviceBluetoothGateway._pairingPriorityPid.ReadByteAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<byte>, <GetPairingPriority>d__29>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<byte>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommand>d__21 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceBluetoothGateway <>4__this;

			public LogicalDeviceBluetoothGatewayCommand command;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_00d1: Expected O, but got Unknown
				//IL_00aa: Unknown result type (might be due to invalid IL or missing references)
				//IL_00af: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cc: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0063: Unknown result type (might be due to invalid IL or missing references)
				//IL_007a: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_004b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0093: Unknown result type (might be due to invalid IL or missing references)
				//IL_0094: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBluetoothGateway CS$<>8__locals6 = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
						goto IL_00c5;
					}
					if (((CommonDisposableNotifyPropertyChanged)CS$<>8__locals6).IsDisposed)
					{
						TaggedLog.Warning("LogicalDeviceBluetoothGateway", String.Concat(((LogicalDevice<ILogicalDeviceCapability>)(object)CS$<>8__locals6).DeviceName, " Accessory gateway ignored because its been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else
					{
						if (CS$<>8__locals6._commandCancelSource != null)
						{
							val = CS$<>8__locals6.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)(object)command, CS$<>8__locals6._commandCancelSource.Token, (Func<ILogicalDevice, CommandControl>)([CompilerGenerated] (ILogicalDevice device) => ((LogicalDevice<LogicalDeviceBluetoothGatewayStatus, ILogicalDeviceCapability>)(object)CS$<>8__locals6).DeviceStatus.IsPairingActive ? ((CommandControl)0) : ((CommandControl)1)), (CommandSendOption)1).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommand>d__21>(ref val, ref this);
								return;
							}
							goto IL_00c5;
						}
						result = (CommandResult)1;
					}
					goto end_IL_000e;
					IL_00c5:
					result = val.GetResult();
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <UpdateFirmwareAsync>d__25 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceBluetoothGateway <>4__this;

			public CancellationToken cancellationToken;

			public IReadOnlyList<byte> data;

			public Func<ILogicalDeviceTransferProgress, bool> progressAck;

			public Dictionary<FirmwareUpdateOption, object> options;

			private ILogicalDeviceFirmwareUpdateSession <firmwareUpdateSession>5__2;

			private TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice?> <>u__1;

			private TaskAwaiter <>u__2;

			private void MoveNext()
			{
				//IL_0142: Expected O, but got Unknown
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_0103: Unknown result type (might be due to invalid IL or missing references)
				//IL_0108: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00eb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ed: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBluetoothGateway logicalDeviceBluetoothGateway = <>4__this;
				try
				{
					TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice> val;
					if (num != 0)
					{
						if (num == 1)
						{
							goto IL_00a9;
						}
						val = FirmwareUpdateSupportEx.TryGetSupportedFirmwareUpdateDeviceSource(((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceBluetoothGateway).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceBluetoothGateway, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>, <UpdateFirmwareAsync>d__25>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>);
						num = (<>1__state = -1);
					}
					ILogicalDeviceSourceDirectFirmwareUpdateDevice result = val.GetResult();
					if (result == null)
					{
						throw new FirmwareUpdateNotSupportedException((ILogicalDevice)(object)logicalDeviceBluetoothGateway, (FirmwareUpdateSupport)0, (Exception)null);
					}
					<firmwareUpdateSession>5__2 = ((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceBluetoothGateway).DeviceService.FirmwareUpdateManager.StartFirmwareUpdateSession((ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceBluetoothGateway);
					goto IL_00a9;
					IL_00a9:
					try
					{
						TaskAwaiter val2;
						if (num != 1)
						{
							val2 = ((IFirmwareUpdateDevice)result).UpdateFirmwareAsync(<firmwareUpdateSession>5__2, data, progressAck, cancellationToken, (IReadOnlyDictionary<FirmwareUpdateOption, object>)(object)options).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <UpdateFirmwareAsync>d__25>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
					}
					finally
					{
						if (num < 0 && <firmwareUpdateSession>5__2 != null)
						{
							((IDisposable)<firmwareUpdateSession>5__2).Dispose();
						}
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<firmwareUpdateSession>5__2 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<firmwareUpdateSession>5__2 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceBluetoothGateway";

		private readonly LogicalDevicePidByte _pairingPriorityPid;

		protected ILogicalDeviceCommandRunnerIdsCan IdsCanCommandRunner;

		private CancellationTokenSource _commandCancelSource = new CancellationTokenSource();

		private readonly IReadOnlyDictionary<FirmwareUpdateOption, string> _defaultFirmwareUpdateOptions;

		public int ConnectionCount => ((LogicalDevice<LogicalDeviceBluetoothGatewayStatus, ILogicalDeviceCapability>)(object)this).DeviceStatus.ConnectionCount;

		public bool IsPairingActive => ((LogicalDevice<LogicalDeviceBluetoothGatewayStatus, ILogicalDeviceCapability>)(object)this).DeviceStatus.IsPairingActive;

		public BluetoothGatewayPairing PairingType => ((LogicalDevice<LogicalDeviceBluetoothGatewayStatus, ILogicalDeviceCapability>)(object)this).DeviceStatus.PairingType;

		public bool CommandSessionActivated => IdsCanCommandRunner.CommandSessionActivated;

		public virtual uint MSCommandTimeout => 5000u;

		public virtual uint MSSessionTimeout => 0u;

		public IReadOnlyDictionary<FirmwareUpdateOption, string> DefaultFirmwareUpdateOptions => _defaultFirmwareUpdateOptions;

		public LogicalDeviceBluetoothGateway(ILogicalDeviceId logicalDeviceId, LogicalDeviceBluetoothGatewayStatus status, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_0034: Unknown result type (might be due to invalid IL or missing references)
			//IL_0041: Expected O, but got Unknown
			//IL_0043: Unknown result type (might be due to invalid IL or missing references)
			//IL_0048: Unknown result type (might be due to invalid IL or missing references)
			//IL_0054: Expected O, but got Unknown
			//IL_0054: Unknown result type (might be due to invalid IL or missing references)
			//IL_0060: Expected O, but got Unknown
			//IL_0065: Expected O, but got Unknown
			//IL_006d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0077: Expected O, but got Unknown
			Dictionary<FirmwareUpdateOption, string> obj = new Dictionary<FirmwareUpdateOption, string>();
			obj.Add((FirmwareUpdateOption)1, String.Format("{0}", (object)(UInt32)3276800));
			_defaultFirmwareUpdateOptions = (IReadOnlyDictionary<FirmwareUpdateOption, string>)(object)obj;
			base..ctor(logicalDeviceId, status, (ILogicalDeviceCapability)new LogicalDeviceCapability(), service, isFunctionClassChangeable);
			LogicalDeviceCommandRunnerIdsCan val = new LogicalDeviceCommandRunnerIdsCan((ILogicalDevice)(object)this);
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).CommandProcessingTime = MSCommandTimeout;
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).SessionKeepAliveTime = MSSessionTimeout;
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)val;
			_pairingPriorityPid = new LogicalDevicePidByte((ILogicalDevice)(object)this, PID.PAIRING_PRIORITY, (LogicalDeviceSessionType)2);
		}

		public LogicalDeviceBluetoothGateway(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: this(logicalDeviceId, new LogicalDeviceBluetoothGatewayStatus(), service, isFunctionClassChangeable)
		{
		}

		public override void OnDeviceStatusChanged()
		{
			base.OnDeviceStatusChanged();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("ConnectionCount", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsPairingActive", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("PairingType", true);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task ActivateSession(CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ActivateSession>d__13 <ActivateSession>d__ = default(<ActivateSession>d__13);
			<ActivateSession>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<ActivateSession>d__.<>4__this = this;
			<ActivateSession>d__.cancelToken = cancelToken;
			<ActivateSession>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Start<<ActivateSession>d__13>(ref <ActivateSession>d__);
			return ((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Task;
		}

		public void DeactivateSession()
		{
			IdsCanCommandRunner.CommandDeactivateSession(true);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommand(LogicalDeviceBluetoothGatewayCommand command, CancellationToken callerCancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommand>d__21 <SendCommand>d__ = default(<SendCommand>d__21);
			<SendCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommand>d__.<>4__this = this;
			<SendCommand>d__.command = command;
			<SendCommand>d__.<>1__state = -1;
			<SendCommand>d__.<>t__builder.Start<<SendCommand>d__21>(ref <SendCommand>d__);
			return <SendCommand>d__.<>t__builder.Task;
		}

		public Task<CommandResult> RequestPairingAsync(CancellationToken cancelToken)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			return SendCommand(new LogicalDeviceBluetoothGatewayCommand(requestActivatePairing: true), cancelToken);
		}

		public override void Dispose(bool disposing)
		{
			CancellationTokenSource commandCancelSource = _commandCancelSource;
			if (commandCancelSource != null)
			{
				CancellationTokenSourceExtension.CancelAndDispose(commandCancelSource);
			}
			_commandCancelSource = null;
			ILogicalDeviceCommandRunnerIdsCan idsCanCommandRunner = IdsCanCommandRunner;
			if (idsCanCommandRunner != null)
			{
				((ICommonDisposable)idsCanCommandRunner).TryDispose();
			}
			base.Dispose(disposing);
		}

		public virtual Task<FirmwareUpdateSupport> TryGetFirmwareUpdateSupportAsync(CancellationToken cancelToken)
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			return FirmwareUpdateSupportEx.TryGetFirmwareUpdateSupportAsync(((LogicalDevice<ILogicalDeviceCapability>)(object)this).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)this, cancelToken);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task UpdateFirmwareAsync(IReadOnlyList<byte> data, Func<ILogicalDeviceTransferProgress, bool> progressAck, CancellationToken cancellationToken, Dictionary<FirmwareUpdateOption, object>? options = null)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<UpdateFirmwareAsync>d__25 <UpdateFirmwareAsync>d__ = default(<UpdateFirmwareAsync>d__25);
			<UpdateFirmwareAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<UpdateFirmwareAsync>d__.<>4__this = this;
			<UpdateFirmwareAsync>d__.data = data;
			<UpdateFirmwareAsync>d__.progressAck = progressAck;
			<UpdateFirmwareAsync>d__.cancellationToken = cancellationToken;
			<UpdateFirmwareAsync>d__.options = options;
			<UpdateFirmwareAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Start<<UpdateFirmwareAsync>d__25>(ref <UpdateFirmwareAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<byte> GetPairingPriority(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<GetPairingPriority>d__29 <GetPairingPriority>d__ = default(<GetPairingPriority>d__29);
			<GetPairingPriority>d__.<>t__builder = AsyncTaskMethodBuilder<byte>.Create();
			<GetPairingPriority>d__.<>4__this = this;
			<GetPairingPriority>d__.cancellationToken = cancellationToken;
			<GetPairingPriority>d__.<>1__state = -1;
			<GetPairingPriority>d__.<>t__builder.Start<<GetPairingPriority>d__29>(ref <GetPairingPriority>d__);
			return <GetPairingPriority>d__.<>t__builder.Task;
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceCapability>)(object)this).LastReceivedNetworkStatus;
		}
	}
	public class LogicalDeviceBluetoothGatewayCommand : LogicalDeviceCommandPacket
	{
		private const byte CommandCode = 0;

		private const int CommandPacketSize = 1;

		public LogicalDeviceBluetoothGatewayCommand(bool requestActivatePairing)
			: base((byte)0, MakeDataForCommand(requestActivatePairing), 200)
		{
		}

		public LogicalDeviceBluetoothGatewayCommand(byte commandByte, byte[] data, int commandResponseTimeMs = 200)
			: base(commandByte, data, commandResponseTimeMs)
		{
		}

		private LogicalDeviceBluetoothGatewayCommand(byte commandByte)
			: base(commandByte, (byte[])(object)new Byte[1], 200)
		{
		}

		private static byte[] MakeDataForCommand(bool requestActivatePairing)
		{
			return (byte[])(object)new Byte[1] { (Byte)requestActivatePairing };
		}
	}
	public class LogicalDeviceBluetoothGatewayFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 36)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceBluetoothGateway(logicalDeviceId, service);
		}
	}
	public class LogicalDeviceBluetoothGatewaySim : LogicalDeviceBluetoothGateway, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SimulatorAsync>d__8 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public CancellationToken cancellationToken;

			public LogicalDeviceBluetoothGatewaySim <>4__this;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_00c0: Expected O, but got Unknown
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_001c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0026: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBluetoothGatewaySim logicalDeviceBluetoothGatewaySim = <>4__this;
				try
				{
					if (num != 0)
					{
						goto IL_00ad;
					}
					TaskAwaiter<bool> val = <>u__1;
					<>u__1 = default(TaskAwaiter<bool>);
					num = (<>1__state = -1);
					goto IL_0074;
					IL_0074:
					val.GetResult();
					((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBluetoothGatewaySim._simStatus).Update(logicalDeviceBluetoothGatewaySim._statusData, 2, false);
					((LogicalDevice<LogicalDeviceBluetoothGatewayStatus, ILogicalDeviceCapability>)(object)logicalDeviceBluetoothGatewaySim).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBluetoothGatewaySim._simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBluetoothGatewaySim._simStatus).Size);
					goto IL_00ad;
					IL_00ad:
					if (!((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
					{
						val = TaskExtension.TryDelay(250, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SimulatorAsync>d__8>(ref val, ref this);
							return;
						}
						goto IL_0074;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private const int TickIntervalDelayMs = 250;

		private const int StatusLength = 2;

		private readonly FirmwareUpdateSim _firmwareUpdateSim;

		private readonly LogicalDeviceBluetoothGatewayStatus _simStatus = new LogicalDeviceBluetoothGatewayStatus();

		private readonly BackgroundOperation _simulator;

		private readonly byte[] _statusData = (byte[])(object)new Byte[2];

		public LogicalDeviceBluetoothGatewaySim(ILogicalDeviceId logicalDeviceId, LogicalDeviceBluetoothGatewayStatus status, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, status, service, isFunctionClassChangeable)
		{
			//IL_0067: Unknown result type (might be due to invalid IL or missing references)
			//IL_0071: Expected O, but got Unknown
			//IL_006c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0076: Expected O, but got Unknown
			_firmwareUpdateSim = new FirmwareUpdateSim((ILogicalDevice)(object)this);
			((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Update(_statusData, 2, false);
			((LogicalDevice<LogicalDeviceBluetoothGatewayStatus, ILogicalDeviceCapability>)(object)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Size);
			_simulator = new BackgroundOperation(new BackgroundOperationFunc(SimulatorAsync));
			_simulator.Start();
		}

		public LogicalDeviceBluetoothGatewaySim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
			: this(logicalDeviceId, new LogicalDeviceBluetoothGatewayStatus(), service, isFunctionClassChangeable)
		{
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task SimulatorAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SimulatorAsync>d__8 <SimulatorAsync>d__ = default(<SimulatorAsync>d__8);
			<SimulatorAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SimulatorAsync>d__.<>4__this = this;
			<SimulatorAsync>d__.cancellationToken = cancellationToken;
			<SimulatorAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Start<<SimulatorAsync>d__8>(ref <SimulatorAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Task;
		}

		public override Task<FirmwareUpdateSupport> TryGetFirmwareUpdateSupportAsync(CancellationToken cancelToken)
		{
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			return _firmwareUpdateSim.TryGetFirmwareUpdateSupportAsync(cancelToken);
		}

		public override Task UpdateFirmwareAsync(IReadOnlyList<byte> data, Func<ILogicalDeviceTransferProgress, bool> progressAck, CancellationToken cancellationToken, Dictionary<FirmwareUpdateOption, object>? options = null)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			return _firmwareUpdateSim.UpdateFirmwareAsync(data, progressAck, cancellationToken, options);
		}
	}
	[DefaultValue(BluetoothGatewayPairing.Unknown)]
	public enum BluetoothGatewayPairing : Enum
	{
		None = 0,
		Pin = 1,
		PushToPair = 4,
		Unknown = 255
	}
	public class LogicalDeviceBluetoothGatewayStatus : LogicalDeviceStatusPacketMutable
	{
		public const int MinimumStatusPacketSize = 2;

		public const int ConnectionInfoIndex = 1;

		public const int PairingPriorityIndex = 2;

		private static readonly BitPositionValue ConnectionCountBitPosition = new BitPositionValue(7u, 1, 1);

		private static readonly BitPositionValue IsPairBondingBitPosition = new BitPositionValue(8u, 1, 1);

		private static readonly BitPositionValue PairingTypeBitPosition = new BitPositionValue(112u, 1, 1);

		public int ConnectionCount => (int)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(ConnectionCountBitPosition);

		public bool IsPairingActive => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(IsPairBondingBitPosition) != 0;

		public BluetoothGatewayPairing PairingType => Enum<BluetoothGatewayPairing>.TryConvert((object)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetValue(PairingTypeBitPosition));

		public byte PairingPriority => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[2];

		public LogicalDeviceBluetoothGatewayStatus()
			: base(2u)
		{
		}

		public LogicalDeviceBluetoothGatewayStatus(LogicalDeviceBluetoothGatewayStatus originalStatus)
		{
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalStatus).Data;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(data, data.Length, false);
		}

		public void SetConnectionCount(byte count)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)count, ConnectionCountBitPosition);
		}

		public void SetIsPairBonding(bool isPairing)
		{
			//IL_0005: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue(isPairing ? 1u : 0u, IsPairBondingBitPosition);
		}

		public void SetPairingType(BluetoothGatewayPairing pairingType)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetValue((uint)pairingType, PairingTypeBitPosition);
		}
	}
}
namespace OneControl.Devices.BatteryMonitor
{
	public interface IBatteryMonitorStats
	{
		DateTime TimeStamp { get; }

		BatteryMonitorSummary Summary { get; }

		IBatteryMonitorStatsStateOfCharge BeforeChargingStarted { get; }

		IBatteryMonitorStatsStateOfCharge AfterChargingStopped { get; }

		Nullable<byte> NumberOfFullDischarges { get; }

		Nullable<ushort> NumberOfChargeCycles { get; }

		Nullable<TimeSpan> TimeSinceLastFullCharge { get; }

		Nullable<float> MinimumBatteryVoltage { get; }

		Nullable<float> MaximumBatteryVoltage { get; }

		Nullable<ushort> BatteryCapacity { get; }

		BatteryCondition BatteryCondition { get; }

		BatteryChemistryType BatteryChemistryType { get; }

		BatteryMonitorTemperatureStats TemperatureOffBoard { get; }

		BatteryMonitorTemperatureStats TemperatureOnBoard { get; }

		BatteryMonitorHourMeter HourMeter { get; }

		Nullable<DateTime> BatteryInstallDate { get; }

		Nullable<byte> LowStateOfChargeAlertThreshold { get; }

		Nullable<TimeSpan> IdleAlertTimeThreshold { get; }

		SoftwareVersion? SoftwareVersion { get; }
	}
	public record BatteryMonitorStats : Object, IBatteryMonitorStats
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <MakeBatteryMonitorStatsAsync>d__62 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorStats> <>t__builder;

			public LogicalDeviceBatteryMonitor logicalDevice;

			public CancellationToken cancellationToken;

			private BatteryMonitorSummary <summary>5__2;

			private BatteryMonitorStateOfCharge <stateOfCharge>5__3;

			private BatteryMonitorChargeCounts <chargeCounts>5__4;

			private BatteryMonitorChargeTime <chargeTime>5__5;

			private BatteryMonitorVoltageStats <voltageStats>5__6;

			private BatteryMonitorBatteryInformation <batteryInfo>5__7;

			private Nullable<DateTime> <batteryInstallDate>5__8;

			private BatteryMonitorTemperatureStats <temperatureOffBoard>5__9;

			private BatteryMonitorTemperatureStats <temperatureOnBoard>5__10;

			private BatteryMonitorHourMeter <hourMeter>5__11;

			private BatteryMonitorAlertThreshold <alertThreshold>5__12;

			private TaskAwaiter<BatteryMonitorSummary> <>u__1;

			private TaskAwaiter<BatteryMonitorStateOfCharge> <>u__2;

			private TaskAwaiter<BatteryMonitorChargeCounts> <>u__3;

			private TaskAwaiter<BatteryMonitorChargeTime> <>u__4;

			private TaskAwaiter<BatteryMonitorVoltageStats> <>u__5;

			private TaskAwaiter<BatteryMonitorBatteryInformation> <>u__6;

			private TaskAwaiter<Nullable<DateTime>> <>u__7;

			private TaskAwaiter<BatteryMonitorTemperatureStats> <>u__8;

			private TaskAwaiter<BatteryMonitorHourMeter> <>u__9;

			private TaskAwaiter<BatteryMonitorAlertThreshold> <>u__10;

			private TaskAwaiter<SoftwareVersion> <>u__11;

			private void MoveNext()
			{
				//IL_064b: Expected O, but got Unknown
				//IL_0083: Unknown result type (might be due to invalid IL or missing references)
				//IL_0088: Unknown result type (might be due to invalid IL or missing references)
				//IL_0090: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0101: Unknown result type (might be due to invalid IL or missing references)
				//IL_0167: Unknown result type (might be due to invalid IL or missing references)
				//IL_016c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0174: Unknown result type (might be due to invalid IL or missing references)
				//IL_01da: Unknown result type (might be due to invalid IL or missing references)
				//IL_01df: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e7: Unknown result type (might be due to invalid IL or missing references)
				//IL_024d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0252: Unknown result type (might be due to invalid IL or missing references)
				//IL_025a: Unknown result type (might be due to invalid IL or missing references)
				//IL_02c0: Unknown result type (might be due to invalid IL or missing references)
				//IL_02c5: Unknown result type (might be due to invalid IL or missing references)
				//IL_02cd: Unknown result type (might be due to invalid IL or missing references)
				//IL_0333: Unknown result type (might be due to invalid IL or missing references)
				//IL_0338: Unknown result type (might be due to invalid IL or missing references)
				//IL_0340: Unknown result type (might be due to invalid IL or missing references)
				//IL_03a6: Unknown result type (might be due to invalid IL or missing references)
				//IL_03ab: Unknown result type (might be due to invalid IL or missing references)
				//IL_03b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0419: Unknown result type (might be due to invalid IL or missing references)
				//IL_041e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0426: Unknown result type (might be due to invalid IL or missing references)
				//IL_048d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0492: Unknown result type (might be due to invalid IL or missing references)
				//IL_049a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0501: Unknown result type (might be due to invalid IL or missing references)
				//IL_0506: Unknown result type (might be due to invalid IL or missing references)
				//IL_050e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0575: Unknown result type (might be due to invalid IL or missing references)
				//IL_057a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0582: Unknown result type (might be due to invalid IL or missing references)
				//IL_0044: Unknown result type (might be due to invalid IL or missing references)
				//IL_004e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0053: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_0128: Unknown result type (might be due to invalid IL or missing references)
				//IL_0132: Unknown result type (might be due to invalid IL or missing references)
				//IL_0137: Unknown result type (might be due to invalid IL or missing references)
				//IL_019b: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_01aa: Unknown result type (might be due to invalid IL or missing references)
				//IL_020e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0218: Unknown result type (might be due to invalid IL or missing references)
				//IL_021d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0281: Unknown result type (might be due to invalid IL or missing references)
				//IL_028b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0290: Unknown result type (might be due to invalid IL or missing references)
				//IL_02f4: Unknown result type (might be due to invalid IL or missing references)
				//IL_02fe: Unknown result type (might be due to invalid IL or missing references)
				//IL_0303: Unknown result type (might be due to invalid IL or missing references)
				//IL_0351: Unknown result type (might be due to invalid IL or missing references)
				//IL_0356: Unknown result type (might be due to invalid IL or missing references)
				//IL_0359: Unknown result type (might be due to invalid IL or missing references)
				//IL_035b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0367: Unknown result type (might be due to invalid IL or missing references)
				//IL_0371: Unknown result type (might be due to invalid IL or missing references)
				//IL_0376: Unknown result type (might be due to invalid IL or missing references)
				//IL_03da: Unknown result type (might be due to invalid IL or missing references)
				//IL_03e4: Unknown result type (might be due to invalid IL or missing references)
				//IL_03e9: Unknown result type (might be due to invalid IL or missing references)
				//IL_044d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0457: Unknown result type (might be due to invalid IL or missing references)
				//IL_045c: Unknown result type (might be due to invalid IL or missing references)
				//IL_04c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_04cb: Unknown result type (might be due to invalid IL or missing references)
				//IL_04d0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0535: Unknown result type (might be due to invalid IL or missing references)
				//IL_053f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0544: Unknown result type (might be due to invalid IL or missing references)
				//IL_0599: Unknown result type (might be due to invalid IL or missing references)
				//IL_05c0: Unknown result type (might be due to invalid IL or missing references)
				//IL_05cb: Unknown result type (might be due to invalid IL or missing references)
				//IL_05d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_05e1: Unknown result type (might be due to invalid IL or missing references)
				//IL_05ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_05f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_0625: Unknown result type (might be due to invalid IL or missing references)
				//IL_0630: Unknown result type (might be due to invalid IL or missing references)
				//IL_063b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00db: Unknown result type (might be due to invalid IL or missing references)
				//IL_014c: Unknown result type (might be due to invalid IL or missing references)
				//IL_014e: Unknown result type (might be due to invalid IL or missing references)
				//IL_01bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0232: Unknown result type (might be due to invalid IL or missing references)
				//IL_0234: Unknown result type (might be due to invalid IL or missing references)
				//IL_02a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_02a7: Unknown result type (might be due to invalid IL or missing references)
				//IL_0318: Unknown result type (might be due to invalid IL or missing references)
				//IL_031a: Unknown result type (might be due to invalid IL or missing references)
				//IL_038b: Unknown result type (might be due to invalid IL or missing references)
				//IL_038d: Unknown result type (might be due to invalid IL or missing references)
				//IL_03fe: Unknown result type (might be due to invalid IL or missing references)
				//IL_0400: Unknown result type (might be due to invalid IL or missing references)
				//IL_0472: Unknown result type (might be due to invalid IL or missing references)
				//IL_0474: Unknown result type (might be due to invalid IL or missing references)
				//IL_04e6: Unknown result type (might be due to invalid IL or missing references)
				//IL_04e8: Unknown result type (might be due to invalid IL or missing references)
				//IL_055a: Unknown result type (might be due to invalid IL or missing references)
				//IL_055c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				BatteryMonitorStats result12;
				try
				{
					TaskAwaiter<BatteryMonitorSummary> val11;
					TaskAwaiter<BatteryMonitorStateOfCharge> val10;
					TaskAwaiter<BatteryMonitorChargeCounts> val9;
					TaskAwaiter<BatteryMonitorChargeTime> val8;
					TaskAwaiter<BatteryMonitorVoltageStats> val7;
					TaskAwaiter<BatteryMonitorBatteryInformation> val6;
					TaskAwaiter<Nullable<DateTime>> val5;
					TaskAwaiter<BatteryMonitorTemperatureStats> val4;
					TaskAwaiter<BatteryMonitorHourMeter> val3;
					TaskAwaiter<BatteryMonitorAlertThreshold> val2;
					TaskAwaiter<SoftwareVersion> val;
					BatteryMonitorBatteryInformation result;
					BatteryMonitorSummary result2;
					BatteryMonitorStateOfCharge result4;
					Nullable<DateTime> result5;
					BatteryMonitorChargeCounts result6;
					BatteryMonitorAlertThreshold result7;
					BatteryMonitorChargeTime result8;
					BatteryMonitorTemperatureStats result3;
					BatteryMonitorVoltageStats result9;
					BatteryMonitorHourMeter result10;
					switch (num)
					{
					default:
						val11 = TryGetSummary(logicalDevice, cancellationToken).GetAwaiter();
						if (!val11.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val11;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorSummary>, <MakeBatteryMonitorStatsAsync>d__62>(ref val11, ref this);
							return;
						}
						goto IL_009f;
					case 0:
						val11 = <>u__1;
						<>u__1 = default(TaskAwaiter<BatteryMonitorSummary>);
						num = (<>1__state = -1);
						goto IL_009f;
					case 1:
						val10 = <>u__2;
						<>u__2 = default(TaskAwaiter<BatteryMonitorStateOfCharge>);
						num = (<>1__state = -1);
						goto IL_0110;
					case 2:
						val9 = <>u__3;
						<>u__3 = default(TaskAwaiter<BatteryMonitorChargeCounts>);
						num = (<>1__state = -1);
						goto IL_0183;
					case 3:
						val8 = <>u__4;
						<>u__4 = default(TaskAwaiter<BatteryMonitorChargeTime>);
						num = (<>1__state = -1);
						goto IL_01f6;
					case 4:
						val7 = <>u__5;
						<>u__5 = default(TaskAwaiter<BatteryMonitorVoltageStats>);
						num = (<>1__state = -1);
						goto IL_0269;
					case 5:
						val6 = <>u__6;
						<>u__6 = default(TaskAwaiter<BatteryMonitorBatteryInformation>);
						num = (<>1__state = -1);
						goto IL_02dc;
					case 6:
						val5 = <>u__7;
						<>u__7 = default(TaskAwaiter<Nullable<DateTime>>);
						num = (<>1__state = -1);
						goto IL_034f;
					case 7:
						val4 = <>u__8;
						<>u__8 = default(TaskAwaiter<BatteryMonitorTemperatureStats>);
						num = (<>1__state = -1);
						goto IL_03c2;
					case 8:
						val4 = <>u__8;
						<>u__8 = default(TaskAwaiter<BatteryMonitorTemperatureStats>);
						num = (<>1__state = -1);
						goto IL_0435;
					case 9:
						val3 = <>u__9;
						<>u__9 = default(TaskAwaiter<BatteryMonitorHourMeter>);
						num = (<>1__state = -1);
						goto IL_04a9;
					case 10:
						val2 = <>u__10;
						<>u__10 = default(TaskAwaiter<BatteryMonitorAlertThreshold>);
						num = (<>1__state = -1);
						goto IL_051d;
					case 11:
						{
							val = <>u__11;
							<>u__11 = default(TaskAwaiter<SoftwareVersion>);
							num = (<>1__state = -1);
							break;
						}
						IL_02dc:
						result = val6.GetResult();
						<batteryInfo>5__7 = result;
						val5 = TryGetBatteryInstallDate(logicalDevice, cancellationToken).GetAwaiter();
						if (!val5.IsCompleted)
						{
							num = (<>1__state = 6);
							<>u__7 = val5;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<Nullable<DateTime>>, <MakeBatteryMonitorStatsAsync>d__62>(ref val5, ref this);
							return;
						}
						goto IL_034f;
						IL_009f:
						result2 = val11.GetResult();
						<summary>5__2 = result2;
						val10 = TryGetStateOfCharge(logicalDevice, cancellationToken).GetAwaiter();
						if (!val10.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val10;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorStateOfCharge>, <MakeBatteryMonitorStatsAsync>d__62>(ref val10, ref this);
							return;
						}
						goto IL_0110;
						IL_0435:
						result3 = val4.GetResult();
						<temperatureOnBoard>5__10 = result3;
						val3 = TryGetHourMeter(logicalDevice, cancellationToken).GetAwaiter();
						if (!val3.IsCompleted)
						{
							num = (<>1__state = 9);
							<>u__9 = val3;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorHourMeter>, <MakeBatteryMonitorStatsAsync>d__62>(ref val3, ref this);
							return;
						}
						goto IL_04a9;
						IL_0110:
						result4 = val10.GetResult();
						<stateOfCharge>5__3 = result4;
						val9 = TryGetChargeCounts(logicalDevice, cancellationToken).GetAwaiter();
						if (!val9.IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__3 = val9;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorChargeCounts>, <MakeBatteryMonitorStatsAsync>d__62>(ref val9, ref this);
							return;
						}
						goto IL_0183;
						IL_034f:
						result5 = val5.GetResult();
						<batteryInstallDate>5__8 = result5;
						val4 = TryGetTemperatureOffBoard(logicalDevice, cancellationToken).GetAwaiter();
						if (!val4.IsCompleted)
						{
							num = (<>1__state = 7);
							<>u__8 = val4;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorTemperatureStats>, <MakeBatteryMonitorStatsAsync>d__62>(ref val4, ref this);
							return;
						}
						goto IL_03c2;
						IL_0183:
						result6 = val9.GetResult();
						<chargeCounts>5__4 = result6;
						val8 = TryGetTimeSinceLastFullCharge(logicalDevice, cancellationToken).GetAwaiter();
						if (!val8.IsCompleted)
						{
							num = (<>1__state = 3);
							<>u__4 = val8;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorChargeTime>, <MakeBatteryMonitorStatsAsync>d__62>(ref val8, ref this);
							return;
						}
						goto IL_01f6;
						IL_051d:
						result7 = val2.GetResult();
						<alertThreshold>5__12 = result7;
						val = TryGetSoftwareVersion(logicalDevice, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 11);
							<>u__11 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<SoftwareVersion>, <MakeBatteryMonitorStatsAsync>d__62>(ref val, ref this);
							return;
						}
						break;
						IL_01f6:
						result8 = val8.GetResult();
						<chargeTime>5__5 = result8;
						val7 = TryGetVoltageStats(logicalDevice, cancellationToken).GetAwaiter();
						if (!val7.IsCompleted)
						{
							num = (<>1__state = 4);
							<>u__5 = val7;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorVoltageStats>, <MakeBatteryMonitorStatsAsync>d__62>(ref val7, ref this);
							return;
						}
						goto IL_0269;
						IL_03c2:
						result3 = val4.GetResult();
						<temperatureOffBoard>5__9 = result3;
						val4 = TryGetTemperatureOnBoard(logicalDevice, cancellationToken).GetAwaiter();
						if (!val4.IsCompleted)
						{
							num = (<>1__state = 8);
							<>u__8 = val4;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorTemperatureStats>, <MakeBatteryMonitorStatsAsync>d__62>(ref val4, ref this);
							return;
						}
						goto IL_0435;
						IL_0269:
						result9 = val7.GetResult();
						<voltageStats>5__6 = result9;
						val6 = TryGetBatteryInfo(logicalDevice, cancellationToken).GetAwaiter();
						if (!val6.IsCompleted)
						{
							num = (<>1__state = 5);
							<>u__6 = val6;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorBatteryInformation>, <MakeBatteryMonitorStatsAsync>d__62>(ref val6, ref this);
							return;
						}
						goto IL_02dc;
						IL_04a9:
						result10 = val3.GetResult();
						<hourMeter>5__11 = result10;
						val2 = TryGetAlertThreshold(logicalDevice, cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 10);
							<>u__10 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorAlertThreshold>, <MakeBatteryMonitorStatsAsync>d__62>(ref val2, ref this);
							return;
						}
						goto IL_051d;
					}
					SoftwareVersion result11 = val.GetResult();
					result12 = new BatteryMonitorStats(DateTime.Now, <summary>5__2, <stateOfCharge>5__3.BeforeChargingStarted, <stateOfCharge>5__3.AfterChargingStopped, <chargeCounts>5__4.NumberOfFullDischarges, <chargeCounts>5__4.NumberOfChargeCycles, <chargeTime>5__5.TimeSinceLastFullCharge, <voltageStats>5__6.MinimumBatteryVoltage, <voltageStats>5__6.MaximumBatteryVoltage, <batteryInfo>5__7.CapacityAmpHours, <batteryInfo>5__7.Condition, <batteryInfo>5__7.ChemistryType, <temperatureOffBoard>5__9, <temperatureOnBoard>5__10, <hourMeter>5__11, <batteryInstallDate>5__8, <alertThreshold>5__12.LowStateOfChargeAlertThreshold, <alertThreshold>5__12.IdleAlertTimeThreshold, result11);
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<stateOfCharge>5__3 = default(BatteryMonitorStateOfCharge);
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<stateOfCharge>5__3 = default(BatteryMonitorStateOfCharge);
				<>t__builder.SetResult(result12);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetAlertThreshold>d__74 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorAlertThreshold> <>t__builder;

			public LogicalDeviceBatteryMonitor logicalDevice;

			public CancellationToken cancellationToken;

			private TaskAwaiter<BatteryMonitorAlertThreshold> <>u__1;

			private void MoveNext()
			{
				//IL_007c: Expected O, but got Unknown
				//IL_00a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ad: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bf: Expected O, but got Unknown
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				BatteryMonitorAlertThreshold result;
				try
				{
					try
					{
						TaskAwaiter<BatteryMonitorAlertThreshold> val;
						if (num != 0)
						{
							val = logicalDevice.AlertThresholdsPid.ReadAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorAlertThreshold>, <TryGetAlertThreshold>d__74>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<BatteryMonitorAlertThreshold>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Debug("BatteryMonitorStats", String.Format("Unable to get Alert Threshold {0}: {1}", (object)logicalDevice, (object)ex2.Message), Array.Empty<object>());
						result = new BatteryMonitorAlertThreshold(default(Nullable<byte>), default(Nullable<TimeSpan>));
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetBatteryInfo>d__69 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorBatteryInformation> <>t__builder;

			public LogicalDeviceBatteryMonitor logicalDevice;

			public CancellationToken cancellationToken;

			private TaskAwaiter<BatteryMonitorBatteryInformation> <>u__1;

			private void MoveNext()
			{
				//IL_007c: Expected O, but got Unknown
				//IL_00a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b7: Expected O, but got Unknown
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				BatteryMonitorBatteryInformation result;
				try
				{
					try
					{
						TaskAwaiter<BatteryMonitorBatteryInformation> val;
						if (num != 0)
						{
							val = logicalDevice.BatteryInformationPid.ReadAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorBatteryInformation>, <TryGetBatteryInfo>d__69>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<BatteryMonitorBatteryInformation>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Debug("BatteryMonitorStats", String.Format("Unable to get Battery Information {0}: {1}", (object)logicalDevice, (object)ex2.Message), Array.Empty<object>());
						result = new BatteryMonitorBatteryInformation(default(Nullable<ushort>), BatteryCondition.Unknown, BatteryChemistryType.Unknown);
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetBatteryInstallDate>d__70 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<Nullable<DateTime>> <>t__builder;

			public LogicalDeviceBatteryMonitor logicalDevice;

			public CancellationToken cancellationToken;

			private TaskAwaiter<DateTime> <>u__1;

			private void MoveNext()
			{
				//IL_0085: Unknown result type (might be due to invalid IL or missing references)
				//IL_008f: Expected O, but got Unknown
				//IL_00b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c1: Expected O, but got Unknown
				//IL_00e6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0079: Unknown result type (might be due to invalid IL or missing references)
				//IL_007a: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				Nullable<DateTime> result2;
				try
				{
					try
					{
						TaskAwaiter<DateTime> val;
						if (num != 0)
						{
							val = logicalDevice.InstallDatePid.ReadDateTimeAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<DateTime>, <TryGetBatteryInstallDate>d__70>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<DateTime>);
							num = (<>1__state = -1);
						}
						DateTime result = val.GetResult();
						result2 = new Nullable<DateTime>(result);
					}
					catch (LogicalDevicePidInvalidValueException)
					{
						result2 = default(Nullable<DateTime>);
					}
					catch (Exception ex2)
					{
						Exception ex3 = ex2;
						TaggedLog.Debug("BatteryMonitorStats", String.Format("Unable to get Minimum State Of Charge Percent {0}: {1}", (object)logicalDevice, (object)ex3.Message), Array.Empty<object>());
						result2 = default(Nullable<DateTime>);
					}
				}
				catch (Exception ex4)
				{
					Exception exception = ex4;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetChargeCounts>d__65 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorChargeCounts> <>t__builder;

			public LogicalDeviceBatteryMonitor logicalDevice;

			public CancellationToken cancellationToken;

			private TaskAwaiter<BatteryMonitorChargeCounts> <>u__1;

			private void MoveNext()
			{
				//IL_007c: Expected O, but got Unknown
				//IL_00a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ad: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bf: Expected O, but got Unknown
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				BatteryMonitorChargeCounts result;
				try
				{
					try
					{
						TaskAwaiter<BatteryMonitorChargeCounts> val;
						if (num != 0)
						{
							val = logicalDevice.ChargeCountsPid.ReadAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorChargeCounts>, <TryGetChargeCounts>d__65>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<BatteryMonitorChargeCounts>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Debug("BatteryMonitorStats", String.Format("Unable to get Charge Counts {0}: {1}", (object)logicalDevice, (object)ex2.Message), Array.Empty<object>());
						result = new BatteryMonitorChargeCounts(default(Nullable<byte>), default(Nullable<ushort>));
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetHourMeter>d__73 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorHourMeter> <>t__builder;

			public LogicalDeviceBatteryMonitor logicalDevice;

			public CancellationToken cancellationToken;

			private TaskAwaiter<BatteryMonitorHourMeter> <>u__1;

			private void MoveNext()
			{
				//IL_0099: Expected O, but got Unknown
				//IL_00c8: Expected O, but got Unknown
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				BatteryMonitorHourMeter result;
				try
				{
					try
					{
						TaskAwaiter<BatteryMonitorHourMeter> val;
						if (num == 0)
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<BatteryMonitorHourMeter>);
							num = (<>1__state = -1);
							goto IL_008e;
						}
						if (((LogicalDevice<ILogicalDeviceBatteryMonitorCapability>)(object)logicalDevice).DeviceCapability.IsHighResolutionDataSupported)
						{
							val = logicalDevice.HourMeterPid.ReadAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorHourMeter>, <TryGetHourMeter>d__73>(ref val, ref this);
								return;
							}
							goto IL_008e;
						}
						result = BatteryMonitorHourMeter.MakeUnknown();
						goto end_IL_000a;
						IL_008e:
						result = val.GetResult();
						end_IL_000a:;
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Debug("BatteryMonitorStats", String.Format("Unable to get Hour Meter Information {0}: {1}", (object)logicalDevice, (object)ex2.Message), Array.Empty<object>());
						result = BatteryMonitorHourMeter.MakeUnknown();
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetSoftwareVersion>d__68 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<SoftwareVersion> <>t__builder;

			public LogicalDeviceBatteryMonitor logicalDevice;

			public CancellationToken cancellationToken;

			private TaskAwaiter<SoftwareVersion> <>u__1;

			private void MoveNext()
			{
				//IL_007c: Expected O, but got Unknown
				//IL_00ba: Expected O, but got Unknown
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				SoftwareVersion result;
				try
				{
					try
					{
						TaskAwaiter<SoftwareVersion> val;
						if (num != 0)
						{
							val = logicalDevice.SoftwareVersionPid.ReadAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<SoftwareVersion>, <TryGetSoftwareVersion>d__68>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<SoftwareVersion>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Debug("BatteryMonitorStats", String.Format("Unable to get software version information {0}: {1}", (object)logicalDevice, (object)ex2.Message), Array.Empty<object>());
						result = new SoftwareVersion(255, 255, 255);
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetStateOfCharge>d__64 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorStateOfCharge> <>t__builder;

			public LogicalDeviceBatteryMonitor logicalDevice;

			public CancellationToken cancellationToken;

			private TaskAwaiter<BatteryMonitorStateOfCharge> <>u__1;

			private void MoveNext()
			{
				//IL_007c: Expected O, but got Unknown
				//IL_00b5: Expected O, but got Unknown
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				BatteryMonitorStateOfCharge result;
				try
				{
					try
					{
						TaskAwaiter<BatteryMonitorStateOfCharge> val;
						if (num != 0)
						{
							val = logicalDevice.StateOfChargePid.ReadAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorStateOfCharge>, <TryGetStateOfCharge>d__64>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<BatteryMonitorStateOfCharge>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Debug("BatteryMonitorStats", String.Format("Unable to get State of Charge {0}: {1}", (object)logicalDevice, (object)ex2.Message), Array.Empty<object>());
						result = new BatteryMonitorStateOfCharge(new BatteryMonitorStatsStateOfCharge(), new BatteryMonitorStatsStateOfCharge());
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetSummary>d__63 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorSummary> <>t__builder;

			public LogicalDeviceBatteryMonitor logicalDevice;

			public CancellationToken cancellationToken;

			private TaskAwaiter<BatteryMonitorSummary> <>u__1;

			private void MoveNext()
			{
				//IL_007c: Expected O, but got Unknown
				//IL_00ab: Expected O, but got Unknown
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				BatteryMonitorSummary result;
				try
				{
					try
					{
						TaskAwaiter<BatteryMonitorSummary> val;
						if (num != 0)
						{
							val = logicalDevice.SummaryPid.ReadAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorSummary>, <TryGetSummary>d__63>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<BatteryMonitorSummary>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Debug("BatteryMonitorStats", String.Format("Unable to get Minimum State Of Charge Percent {0}: {1}", (object)logicalDevice, (object)ex2.Message), Array.Empty<object>());
						result = new BatteryMonitorSummary();
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetTemperatureOffBoard>d__71 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorTemperatureStats> <>t__builder;

			public LogicalDeviceBatteryMonitor logicalDevice;

			public CancellationToken cancellationToken;

			private TaskAwaiter<BatteryMonitorTemperatureStats> <>u__1;

			private void MoveNext()
			{
				//IL_0099: Expected O, but got Unknown
				//IL_00c8: Expected O, but got Unknown
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				BatteryMonitorTemperatureStats result;
				try
				{
					try
					{
						TaskAwaiter<BatteryMonitorTemperatureStats> val;
						if (num == 0)
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<BatteryMonitorTemperatureStats>);
							num = (<>1__state = -1);
							goto IL_008e;
						}
						if (((LogicalDevice<ILogicalDeviceBatteryMonitorCapability>)(object)logicalDevice).DeviceCapability.IsHighResolutionDataSupported)
						{
							val = logicalDevice.TemperatureOffBoardPid.ReadAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorTemperatureStats>, <TryGetTemperatureOffBoard>d__71>(ref val, ref this);
								return;
							}
							goto IL_008e;
						}
						result = BatteryMonitorTemperatureStats.MakeNotSupported();
						goto end_IL_000a;
						IL_008e:
						result = val.GetResult();
						end_IL_000a:;
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Debug("BatteryMonitorStats", String.Format("Unable to get Battery Information {0}: {1}", (object)logicalDevice, (object)ex2.Message), Array.Empty<object>());
						result = BatteryMonitorTemperatureStats.MakeUnknown();
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetTemperatureOnBoard>d__72 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorTemperatureStats> <>t__builder;

			public LogicalDeviceBatteryMonitor logicalDevice;

			public CancellationToken cancellationToken;

			private TaskAwaiter<BatteryMonitorTemperatureStats> <>u__1;

			private void MoveNext()
			{
				//IL_0099: Expected O, but got Unknown
				//IL_00c8: Expected O, but got Unknown
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				BatteryMonitorTemperatureStats result;
				try
				{
					try
					{
						TaskAwaiter<BatteryMonitorTemperatureStats> val;
						if (num == 0)
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<BatteryMonitorTemperatureStats>);
							num = (<>1__state = -1);
							goto IL_008e;
						}
						if (((LogicalDevice<ILogicalDeviceBatteryMonitorCapability>)(object)logicalDevice).DeviceCapability.IsHighResolutionDataSupported)
						{
							val = logicalDevice.TemperatureOnBoardPid.ReadAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorTemperatureStats>, <TryGetTemperatureOnBoard>d__72>(ref val, ref this);
								return;
							}
							goto IL_008e;
						}
						result = BatteryMonitorTemperatureStats.MakeNotSupported();
						goto end_IL_000a;
						IL_008e:
						result = val.GetResult();
						end_IL_000a:;
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Debug("BatteryMonitorStats", String.Format("Unable to get Battery Information {0}: {1}", (object)logicalDevice, (object)ex2.Message), Array.Empty<object>());
						result = BatteryMonitorTemperatureStats.MakeUnknown();
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetTimeSinceLastFullCharge>d__66 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorChargeTime> <>t__builder;

			public LogicalDeviceBatteryMonitor logicalDevice;

			public CancellationToken cancellationToken;

			private TaskAwaiter<BatteryMonitorChargeTime> <>u__1;

			private void MoveNext()
			{
				//IL_007c: Expected O, but got Unknown
				//IL_00a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b5: Expected O, but got Unknown
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				BatteryMonitorChargeTime result;
				try
				{
					try
					{
						TaskAwaiter<BatteryMonitorChargeTime> val;
						if (num != 0)
						{
							val = logicalDevice.ChargeTimePid.ReadAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorChargeTime>, <TryGetTimeSinceLastFullCharge>d__66>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<BatteryMonitorChargeTime>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Debug("BatteryMonitorStats", String.Format("Unable to get Time Since Last Full Charge {0}: {1}", (object)logicalDevice, (object)ex2.Message), Array.Empty<object>());
						result = new BatteryMonitorChargeTime(default(Nullable<TimeSpan>));
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <TryGetVoltageStats>d__67 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorVoltageStats> <>t__builder;

			public LogicalDeviceBatteryMonitor logicalDevice;

			public CancellationToken cancellationToken;

			private TaskAwaiter<BatteryMonitorVoltageStats> <>u__1;

			private void MoveNext()
			{
				//IL_007c: Expected O, but got Unknown
				//IL_00a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ad: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bf: Expected O, but got Unknown
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0019: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				BatteryMonitorVoltageStats result;
				try
				{
					try
					{
						TaskAwaiter<BatteryMonitorVoltageStats> val;
						if (num != 0)
						{
							val = logicalDevice.VoltageStatsPid.ReadAsync(cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorVoltageStats>, <TryGetVoltageStats>d__67>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<BatteryMonitorVoltageStats>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Debug("BatteryMonitorStats", String.Format("Unable to get Voltage Stats {0}: {1}", (object)logicalDevice, (object)ex2.Message), Array.Empty<object>());
						result = new BatteryMonitorVoltageStats(default(Nullable<float>), default(Nullable<float>));
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[CompilerGenerated]
		protected virtual Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(BatteryMonitorStats);
			}
		}

		public DateTime TimeStamp
		{
			[CompilerGenerated]
			get;
		}

		public BatteryMonitorSummary Summary
		{
			[CompilerGenerated]
			get;
		}

		public IBatteryMonitorStatsStateOfCharge BeforeChargingStarted
		{
			[CompilerGenerated]
			get;
		}

		public IBatteryMonitorStatsStateOfCharge AfterChargingStopped
		{
			[CompilerGenerated]
			get;
		}

		public Nullable<byte> NumberOfFullDischarges
		{
			[CompilerGenerated]
			get;
		}

		public Nullable<ushort> NumberOfChargeCycles
		{
			[CompilerGenerated]
			get;
		}

		public Nullable<TimeSpan> TimeSinceLastFullCharge
		{
			[CompilerGenerated]
			get;
		}

		public Nullable<float> MinimumBatteryVoltage
		{
			[CompilerGenerated]
			get;
		}

		public Nullable<float> MaximumBatteryVoltage
		{
			[CompilerGenerated]
			get;
		}

		public Nullable<ushort> BatteryCapacity
		{
			[CompilerGenerated]
			get;
		}

		public BatteryCondition BatteryCondition
		{
			[CompilerGenerated]
			get;
		}

		public BatteryChemistryType BatteryChemistryType
		{
			[CompilerGenerated]
			get;
		}

		public BatteryMonitorTemperatureStats TemperatureOffBoard
		{
			[CompilerGenerated]
			get;
		}

		public BatteryMonitorTemperatureStats TemperatureOnBoard
		{
			[CompilerGenerated]
			get;
		}

		public BatteryMonitorHourMeter HourMeter
		{
			[CompilerGenerated]
			get;
		}

		public Nullable<DateTime> BatteryInstallDate
		{
			[CompilerGenerated]
			get;
		}

		public Nullable<byte> LowStateOfChargeAlertThreshold
		{
			[CompilerGenerated]
			get;
		}

		public Nullable<TimeSpan> IdleAlertTimeThreshold
		{
			[CompilerGenerated]
			get;
		}

		public SoftwareVersion? SoftwareVersion
		{
			[CompilerGenerated]
			get;
		}

		private const string LogTag = "BatteryMonitorStats";

		public BatteryMonitorStats()
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			TimeStamp = DateTime.MinValue;
			BeforeChargingStarted = new BatteryMonitorStatsStateOfCharge();
			AfterChargingStopped = new BatteryMonitorStatsStateOfCharge();
			BatteryCondition = BatteryCondition.Unknown;
		}

		public BatteryMonitorStats(DateTime timeStamp, BatteryMonitorSummary summary, IBatteryMonitorStatsStateOfCharge beforeChargingStarted, IBatteryMonitorStatsStateOfCharge afterChargingStopped, Nullable<byte> numberOfFullDischarges, Nullable<ushort> numberOfChargeCycles, Nullable<TimeSpan> timeSinceLastFullCharge, Nullable<float> minimumBatteryVoltage, Nullable<float> maximumBatteryVoltage, Nullable<ushort> batteryCapacity, BatteryCondition batteryCondition, BatteryChemistryType batteryChemistryType, BatteryMonitorTemperatureStats temperatureOffBoard, BatteryMonitorTemperatureStats temperatureOnBoard, BatteryMonitorHourMeter hourMeter, Nullable<DateTime> batteryInstallDate, Nullable<byte> lowStateOfChargeAlertThreshold, Nullable<TimeSpan> idleAlertTimeThreshold, SoftwareVersion? softwareVersion)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			//IL_0024: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_002c: Unknown result type (might be due to invalid IL or missing references)
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0034: Unknown result type (might be due to invalid IL or missing references)
			//IL_0036: Unknown result type (might be due to invalid IL or missing references)
			//IL_003c: Unknown result type (might be due to invalid IL or missing references)
			//IL_003e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0044: Unknown result type (might be due to invalid IL or missing references)
			//IL_0046: Unknown result type (might be due to invalid IL or missing references)
			//IL_004c: Unknown result type (might be due to invalid IL or missing references)
			//IL_004e: Unknown result type (might be due to invalid IL or missing references)
			//IL_007c: Unknown result type (might be due to invalid IL or missing references)
			//IL_007e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0084: Unknown result type (might be due to invalid IL or missing references)
			//IL_0086: Unknown result type (might be due to invalid IL or missing references)
			//IL_008c: Unknown result type (might be due to invalid IL or missing references)
			//IL_008e: Unknown result type (might be due to invalid IL or missing references)
			TimeStamp = timeStamp;
			Summary = summary;
			BeforeChargingStarted = beforeChargingStarted;
			AfterChargingStopped = afterChargingStopped;
			NumberOfFullDischarges = numberOfFullDischarges;
			NumberOfChargeCycles = numberOfChargeCycles;
			TimeSinceLastFullCharge = timeSinceLastFullCharge;
			MinimumBatteryVoltage = minimumBatteryVoltage;
			MaximumBatteryVoltage = maximumBatteryVoltage;
			BatteryCapacity = batteryCapacity;
			BatteryCondition = batteryCondition;
			BatteryChemistryType = batteryChemistryType;
			TemperatureOffBoard = temperatureOffBoard;
			TemperatureOnBoard = temperatureOnBoard;
			HourMeter = hourMeter;
			BatteryInstallDate = batteryInstallDate;
			LowStateOfChargeAlertThreshold = lowStateOfChargeAlertThreshold;
			IdleAlertTimeThreshold = idleAlertTimeThreshold;
			SoftwareVersion = softwareVersion;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public static Task<BatteryMonitorStats> MakeBatteryMonitorStatsAsync(LogicalDeviceBatteryMonitor logicalDevice, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<MakeBatteryMonitorStatsAsync>d__62 <MakeBatteryMonitorStatsAsync>d__ = default(<MakeBatteryMonitorStatsAsync>d__62);
			<MakeBatteryMonitorStatsAsync>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorStats>.Create();
			<MakeBatteryMonitorStatsAsync>d__.logicalDevice = logicalDevice;
			<MakeBatteryMonitorStatsAsync>d__.cancellationToken = cancellationToken;
			<MakeBatteryMonitorStatsAsync>d__.<>1__state = -1;
			<MakeBatteryMonitorStatsAsync>d__.<>t__builder.Start<<MakeBatteryMonitorStatsAsync>d__62>(ref <MakeBatteryMonitorStatsAsync>d__);
			return <MakeBatteryMonitorStatsAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public static Task<BatteryMonitorSummary> TryGetSummary(LogicalDeviceBatteryMonitor logicalDevice, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetSummary>d__63 <TryGetSummary>d__ = default(<TryGetSummary>d__63);
			<TryGetSummary>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorSummary>.Create();
			<TryGetSummary>d__.logicalDevice = logicalDevice;
			<TryGetSummary>d__.cancellationToken = cancellationToken;
			<TryGetSummary>d__.<>1__state = -1;
			<TryGetSummary>d__.<>t__builder.Start<<TryGetSummary>d__63>(ref <TryGetSummary>d__);
			return <TryGetSummary>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public static Task<BatteryMonitorStateOfCharge> TryGetStateOfCharge(LogicalDeviceBatteryMonitor logicalDevice, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetStateOfCharge>d__64 <TryGetStateOfCharge>d__ = default(<TryGetStateOfCharge>d__64);
			<TryGetStateOfCharge>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorStateOfCharge>.Create();
			<TryGetStateOfCharge>d__.logicalDevice = logicalDevice;
			<TryGetStateOfCharge>d__.cancellationToken = cancellationToken;
			<TryGetStateOfCharge>d__.<>1__state = -1;
			<TryGetStateOfCharge>d__.<>t__builder.Start<<TryGetStateOfCharge>d__64>(ref <TryGetStateOfCharge>d__);
			return <TryGetStateOfCharge>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public static Task<BatteryMonitorChargeCounts> TryGetChargeCounts(LogicalDeviceBatteryMonitor logicalDevice, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetChargeCounts>d__65 <TryGetChargeCounts>d__ = default(<TryGetChargeCounts>d__65);
			<TryGetChargeCounts>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorChargeCounts>.Create();
			<TryGetChargeCounts>d__.logicalDevice = logicalDevice;
			<TryGetChargeCounts>d__.cancellationToken = cancellationToken;
			<TryGetChargeCounts>d__.<>1__state = -1;
			<TryGetChargeCounts>d__.<>t__builder.Start<<TryGetChargeCounts>d__65>(ref <TryGetChargeCounts>d__);
			return <TryGetChargeCounts>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public static Task<BatteryMonitorChargeTime> TryGetTimeSinceLastFullCharge(LogicalDeviceBatteryMonitor logicalDevice, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetTimeSinceLastFullCharge>d__66 <TryGetTimeSinceLastFullCharge>d__ = default(<TryGetTimeSinceLastFullCharge>d__66);
			<TryGetTimeSinceLastFullCharge>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorChargeTime>.Create();
			<TryGetTimeSinceLastFullCharge>d__.logicalDevice = logicalDevice;
			<TryGetTimeSinceLastFullCharge>d__.cancellationToken = cancellationToken;
			<TryGetTimeSinceLastFullCharge>d__.<>1__state = -1;
			<TryGetTimeSinceLastFullCharge>d__.<>t__builder.Start<<TryGetTimeSinceLastFullCharge>d__66>(ref <TryGetTimeSinceLastFullCharge>d__);
			return <TryGetTimeSinceLastFullCharge>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public static Task<BatteryMonitorVoltageStats> TryGetVoltageStats(LogicalDeviceBatteryMonitor logicalDevice, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetVoltageStats>d__67 <TryGetVoltageStats>d__ = default(<TryGetVoltageStats>d__67);
			<TryGetVoltageStats>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorVoltageStats>.Create();
			<TryGetVoltageStats>d__.logicalDevice = logicalDevice;
			<TryGetVoltageStats>d__.cancellationToken = cancellationToken;
			<TryGetVoltageStats>d__.<>1__state = -1;
			<TryGetVoltageStats>d__.<>t__builder.Start<<TryGetVoltageStats>d__67>(ref <TryGetVoltageStats>d__);
			return <TryGetVoltageStats>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public static Task<SoftwareVersion> TryGetSoftwareVersion(LogicalDeviceBatteryMonitor logicalDevice, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetSoftwareVersion>d__68 <TryGetSoftwareVersion>d__ = default(<TryGetSoftwareVersion>d__68);
			<TryGetSoftwareVersion>d__.<>t__builder = AsyncTaskMethodBuilder<OneControl.Devices.BatteryMonitor.PidProxy.SoftwareVersion>.Create();
			<TryGetSoftwareVersion>d__.logicalDevice = logicalDevice;
			<TryGetSoftwareVersion>d__.cancellationToken = cancellationToken;
			<TryGetSoftwareVersion>d__.<>1__state = -1;
			<TryGetSoftwareVersion>d__.<>t__builder.Start<<TryGetSoftwareVersion>d__68>(ref <TryGetSoftwareVersion>d__);
			return <TryGetSoftwareVersion>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public static Task<BatteryMonitorBatteryInformation> TryGetBatteryInfo(LogicalDeviceBatteryMonitor logicalDevice, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetBatteryInfo>d__69 <TryGetBatteryInfo>d__ = default(<TryGetBatteryInfo>d__69);
			<TryGetBatteryInfo>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorBatteryInformation>.Create();
			<TryGetBatteryInfo>d__.logicalDevice = logicalDevice;
			<TryGetBatteryInfo>d__.cancellationToken = cancellationToken;
			<TryGetBatteryInfo>d__.<>1__state = -1;
			<TryGetBatteryInfo>d__.<>t__builder.Start<<TryGetBatteryInfo>d__69>(ref <TryGetBatteryInfo>d__);
			return <TryGetBatteryInfo>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public static Task<Nullable<DateTime>> TryGetBatteryInstallDate(LogicalDeviceBatteryMonitor logicalDevice, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetBatteryInstallDate>d__70 <TryGetBatteryInstallDate>d__ = default(<TryGetBatteryInstallDate>d__70);
			<TryGetBatteryInstallDate>d__.<>t__builder = AsyncTaskMethodBuilder<Nullable<DateTime>>.Create();
			<TryGetBatteryInstallDate>d__.logicalDevice = logicalDevice;
			<TryGetBatteryInstallDate>d__.cancellationToken = cancellationToken;
			<TryGetBatteryInstallDate>d__.<>1__state = -1;
			<TryGetBatteryInstallDate>d__.<>t__builder.Start<<TryGetBatteryInstallDate>d__70>(ref <TryGetBatteryInstallDate>d__);
			return <TryGetBatteryInstallDate>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public static Task<BatteryMonitorTemperatureStats> TryGetTemperatureOffBoard(LogicalDeviceBatteryMonitor logicalDevice, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetTemperatureOffBoard>d__71 <TryGetTemperatureOffBoard>d__ = default(<TryGetTemperatureOffBoard>d__71);
			<TryGetTemperatureOffBoard>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorTemperatureStats>.Create();
			<TryGetTemperatureOffBoard>d__.logicalDevice = logicalDevice;
			<TryGetTemperatureOffBoard>d__.cancellationToken = cancellationToken;
			<TryGetTemperatureOffBoard>d__.<>1__state = -1;
			<TryGetTemperatureOffBoard>d__.<>t__builder.Start<<TryGetTemperatureOffBoard>d__71>(ref <TryGetTemperatureOffBoard>d__);
			return <TryGetTemperatureOffBoard>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public static Task<BatteryMonitorTemperatureStats> TryGetTemperatureOnBoard(LogicalDeviceBatteryMonitor logicalDevice, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetTemperatureOnBoard>d__72 <TryGetTemperatureOnBoard>d__ = default(<TryGetTemperatureOnBoard>d__72);
			<TryGetTemperatureOnBoard>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorTemperatureStats>.Create();
			<TryGetTemperatureOnBoard>d__.logicalDevice = logicalDevice;
			<TryGetTemperatureOnBoard>d__.cancellationToken = cancellationToken;
			<TryGetTemperatureOnBoard>d__.<>1__state = -1;
			<TryGetTemperatureOnBoard>d__.<>t__builder.Start<<TryGetTemperatureOnBoard>d__72>(ref <TryGetTemperatureOnBoard>d__);
			return <TryGetTemperatureOnBoard>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public static Task<BatteryMonitorHourMeter> TryGetHourMeter(LogicalDeviceBatteryMonitor logicalDevice, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetHourMeter>d__73 <TryGetHourMeter>d__ = default(<TryGetHourMeter>d__73);
			<TryGetHourMeter>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorHourMeter>.Create();
			<TryGetHourMeter>d__.logicalDevice = logicalDevice;
			<TryGetHourMeter>d__.cancellationToken = cancellationToken;
			<TryGetHourMeter>d__.<>1__state = -1;
			<TryGetHourMeter>d__.<>t__builder.Start<<TryGetHourMeter>d__73>(ref <TryGetHourMeter>d__);
			return <TryGetHourMeter>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public static Task<BatteryMonitorAlertThreshold> TryGetAlertThreshold(LogicalDeviceBatteryMonitor logicalDevice, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<TryGetAlertThreshold>d__74 <TryGetAlertThreshold>d__ = default(<TryGetAlertThreshold>d__74);
			<TryGetAlertThreshold>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorAlertThreshold>.Create();
			<TryGetAlertThreshold>d__.logicalDevice = logicalDevice;
			<TryGetAlertThreshold>d__.cancellationToken = cancellationToken;
			<TryGetAlertThreshold>d__.<>1__state = -1;
			<TryGetAlertThreshold>d__.<>t__builder.Start<<TryGetAlertThreshold>d__74>(ref <TryGetAlertThreshold>d__);
			return <TryGetAlertThreshold>d__.<>t__builder.Task;
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("BatteryMonitorStats");
			val.Append(" { ");
			if (PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected virtual bool PrintMembers(StringBuilder builder)
		{
			//IL_0013: Unknown result type (might be due to invalid IL or missing references)
			//IL_0018: Unknown result type (might be due to invalid IL or missing references)
			//IL_0093: Unknown result type (might be due to invalid IL or missing references)
			//IL_0098: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
			//IL_00bf: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e1: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e6: Unknown result type (might be due to invalid IL or missing references)
			//IL_0109: Unknown result type (might be due to invalid IL or missing references)
			//IL_010e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0131: Unknown result type (might be due to invalid IL or missing references)
			//IL_0136: Unknown result type (might be due to invalid IL or missing references)
			//IL_0159: Unknown result type (might be due to invalid IL or missing references)
			//IL_015e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0248: Unknown result type (might be due to invalid IL or missing references)
			//IL_024d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0270: Unknown result type (might be due to invalid IL or missing references)
			//IL_0275: Unknown result type (might be due to invalid IL or missing references)
			//IL_0297: Unknown result type (might be due to invalid IL or missing references)
			//IL_029c: Unknown result type (might be due to invalid IL or missing references)
			RuntimeHelpers.EnsureSufficientExecutionStack();
			builder.Append("TimeStamp = ");
			builder.Append(((Object)TimeStamp/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Summary = ");
			builder.Append(((Object)Summary/*cast due to .constrained prefix*/).ToString());
			builder.Append(", BeforeChargingStarted = ");
			builder.Append((object)BeforeChargingStarted);
			builder.Append(", AfterChargingStopped = ");
			builder.Append((object)AfterChargingStopped);
			builder.Append(", NumberOfFullDischarges = ");
			builder.Append(((Object)NumberOfFullDischarges/*cast due to .constrained prefix*/).ToString());
			builder.Append(", NumberOfChargeCycles = ");
			builder.Append(((Object)NumberOfChargeCycles/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TimeSinceLastFullCharge = ");
			builder.Append(((Object)TimeSinceLastFullCharge/*cast due to .constrained prefix*/).ToString());
			builder.Append(", MinimumBatteryVoltage = ");
			builder.Append(((Object)MinimumBatteryVoltage/*cast due to .constrained prefix*/).ToString());
			builder.Append(", MaximumBatteryVoltage = ");
			builder.Append(((Object)MaximumBatteryVoltage/*cast due to .constrained prefix*/).ToString());
			builder.Append(", BatteryCapacity = ");
			builder.Append(((Object)BatteryCapacity/*cast due to .constrained prefix*/).ToString());
			builder.Append(", BatteryCondition = ");
			builder.Append(((Object)BatteryCondition/*cast due to .constrained prefix*/).ToString());
			builder.Append(", BatteryChemistryType = ");
			builder.Append(((Object)BatteryChemistryType/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TemperatureOffBoard = ");
			builder.Append(((Object)TemperatureOffBoard/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TemperatureOnBoard = ");
			builder.Append(((Object)TemperatureOnBoard/*cast due to .constrained prefix*/).ToString());
			builder.Append(", HourMeter = ");
			builder.Append(((Object)HourMeter/*cast due to .constrained prefix*/).ToString());
			builder.Append(", BatteryInstallDate = ");
			builder.Append(((Object)BatteryInstallDate/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LowStateOfChargeAlertThreshold = ");
			builder.Append(((Object)LowStateOfChargeAlertThreshold/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IdleAlertTimeThreshold = ");
			builder.Append(((Object)IdleAlertTimeThreshold/*cast due to .constrained prefix*/).ToString());
			builder.Append(", SoftwareVersion = ");
			builder.Append((object)SoftwareVersion);
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			//IL_001c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0078: Unknown result type (might be due to invalid IL or missing references)
			//IL_008f: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a6: Unknown result type (might be due to invalid IL or missing references)
			//IL_00bd: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d4: Unknown result type (might be due to invalid IL or missing references)
			//IL_00eb: Unknown result type (might be due to invalid IL or missing references)
			//IL_0175: Unknown result type (might be due to invalid IL or missing references)
			//IL_018c: Unknown result type (might be due to invalid IL or missing references)
			//IL_01a3: Unknown result type (might be due to invalid IL or missing references)
			return ((((((((((((((((((EqualityComparer<Type>.Default.GetHashCode(EqualityContract) * -1521134295 + EqualityComparer<DateTime>.Default.GetHashCode(TimeStamp)) * -1521134295 + EqualityComparer<BatteryMonitorSummary>.Default.GetHashCode(Summary)) * -1521134295 + EqualityComparer<IBatteryMonitorStatsStateOfCharge>.Default.GetHashCode(BeforeChargingStarted)) * -1521134295 + EqualityComparer<IBatteryMonitorStatsStateOfCharge>.Default.GetHashCode(AfterChargingStopped)) * -1521134295 + EqualityComparer<Nullable<byte>>.Default.GetHashCode(NumberOfFullDischarges)) * -1521134295 + EqualityComparer<Nullable<ushort>>.Default.GetHashCode(NumberOfChargeCycles)) * -1521134295 + EqualityComparer<Nullable<TimeSpan>>.Default.GetHashCode(TimeSinceLastFullCharge)) * -1521134295 + EqualityComparer<Nullable<float>>.Default.GetHashCode(MinimumBatteryVoltage)) * -1521134295 + EqualityComparer<Nullable<float>>.Default.GetHashCode(MaximumBatteryVoltage)) * -1521134295 + EqualityComparer<Nullable<ushort>>.Default.GetHashCode(BatteryCapacity)) * -1521134295 + EqualityComparer<BatteryCondition>.Default.GetHashCode(BatteryCondition)) * -1521134295 + EqualityComparer<BatteryChemistryType>.Default.GetHashCode(BatteryChemistryType)) * -1521134295 + EqualityComparer<BatteryMonitorTemperatureStats>.Default.GetHashCode(TemperatureOffBoard)) * -1521134295 + EqualityComparer<BatteryMonitorTemperatureStats>.Default.GetHashCode(TemperatureOnBoard)) * -1521134295 + EqualityComparer<BatteryMonitorHourMeter>.Default.GetHashCode(HourMeter)) * -1521134295 + EqualityComparer<Nullable<DateTime>>.Default.GetHashCode(BatteryInstallDate)) * -1521134295 + EqualityComparer<Nullable<byte>>.Default.GetHashCode(LowStateOfChargeAlertThreshold)) * -1521134295 + EqualityComparer<Nullable<TimeSpan>>.Default.GetHashCode(IdleAlertTimeThreshold)) * -1521134295 + EqualityComparer<OneControl.Devices.BatteryMonitor.PidProxy.SoftwareVersion>.Default.GetHashCode(SoftwareVersion);
		}

		[CompilerGenerated]
		public virtual bool Equals(BatteryMonitorStats? other)
		{
			//IL_0029: Unknown result type (might be due to invalid IL or missing references)
			//IL_002f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0095: Unknown result type (might be due to invalid IL or missing references)
			//IL_009b: Unknown result type (might be due to invalid IL or missing references)
			//IL_00b0: Unknown result type (might be due to invalid IL or missing references)
			//IL_00b6: Unknown result type (might be due to invalid IL or missing references)
			//IL_00cb: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e6: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
			//IL_0101: Unknown result type (might be due to invalid IL or missing references)
			//IL_0107: Unknown result type (might be due to invalid IL or missing references)
			//IL_011c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0122: Unknown result type (might be due to invalid IL or missing references)
			//IL_01b8: Unknown result type (might be due to invalid IL or missing references)
			//IL_01be: Unknown result type (might be due to invalid IL or missing references)
			//IL_01d0: Unknown result type (might be due to invalid IL or missing references)
			//IL_01d6: Unknown result type (might be due to invalid IL or missing references)
			//IL_01e8: Unknown result type (might be due to invalid IL or missing references)
			//IL_01ee: Unknown result type (might be due to invalid IL or missing references)
			if ((object)this != other)
			{
				if ((object)other != null && EqualityContract == other.EqualityContract && EqualityComparer<DateTime>.Default.Equals(TimeStamp, other.TimeStamp) && EqualityComparer<BatteryMonitorSummary>.Default.Equals(Summary, other.Summary) && EqualityComparer<IBatteryMonitorStatsStateOfCharge>.Default.Equals(BeforeChargingStarted, other.BeforeChargingStarted) && EqualityComparer<IBatteryMonitorStatsStateOfCharge>.Default.Equals(AfterChargingStopped, other.AfterChargingStopped) && EqualityComparer<Nullable<byte>>.Default.Equals(NumberOfFullDischarges, other.NumberOfFullDischarges) && EqualityComparer<Nullable<ushort>>.Default.Equals(NumberOfChargeCycles, other.NumberOfChargeCycles) && EqualityComparer<Nullable<TimeSpan>>.Default.Equals(TimeSinceLastFullCharge, other.TimeSinceLastFullCharge) && EqualityComparer<Nullable<float>>.Default.Equals(MinimumBatteryVoltage, other.MinimumBatteryVoltage) && EqualityComparer<Nullable<float>>.Default.Equals(MaximumBatteryVoltage, other.MaximumBatteryVoltage) && EqualityComparer<Nullable<ushort>>.Default.Equals(BatteryCapacity, other.BatteryCapacity) && EqualityComparer<BatteryCondition>.Default.Equals(BatteryCondition, other.BatteryCondition) && EqualityComparer<BatteryChemistryType>.Default.Equals(BatteryChemistryType, other.BatteryChemistryType) && EqualityComparer<BatteryMonitorTemperatureStats>.Default.Equals(TemperatureOffBoard, other.TemperatureOffBoard) && EqualityComparer<BatteryMonitorTemperatureStats>.Default.Equals(TemperatureOnBoard, other.TemperatureOnBoard) && EqualityComparer<BatteryMonitorHourMeter>.Default.Equals(HourMeter, other.HourMeter) && EqualityComparer<Nullable<DateTime>>.Default.Equals(BatteryInstallDate, other.BatteryInstallDate) && EqualityComparer<Nullable<byte>>.Default.Equals(LowStateOfChargeAlertThreshold, other.LowStateOfChargeAlertThreshold) && EqualityComparer<Nullable<TimeSpan>>.Default.Equals(IdleAlertTimeThreshold, other.IdleAlertTimeThreshold))
				{
					return EqualityComparer<OneControl.Devices.BatteryMonitor.PidProxy.SoftwareVersion>.Default.Equals(SoftwareVersion, other.SoftwareVersion);
				}
				return false;
			}
			return true;
		}

		[CompilerGenerated]
		protected BatteryMonitorStats(BatteryMonitorStats original)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0038: Unknown result type (might be due to invalid IL or missing references)
			//IL_003d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0044: Unknown result type (might be due to invalid IL or missing references)
			//IL_0049: Unknown result type (might be due to invalid IL or missing references)
			//IL_0050: Unknown result type (might be due to invalid IL or missing references)
			//IL_0055: Unknown result type (might be due to invalid IL or missing references)
			//IL_005c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0061: Unknown result type (might be due to invalid IL or missing references)
			//IL_0068: Unknown result type (might be due to invalid IL or missing references)
			//IL_006d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0074: Unknown result type (might be due to invalid IL or missing references)
			//IL_0079: Unknown result type (might be due to invalid IL or missing references)
			//IL_00bc: Unknown result type (might be due to invalid IL or missing references)
			//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
			//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
			//IL_00cd: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d4: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
			TimeStamp = original.TimeStamp;
			Summary = original.Summary;
			BeforeChargingStarted = original.BeforeChargingStarted;
			AfterChargingStopped = original.AfterChargingStopped;
			NumberOfFullDischarges = original.NumberOfFullDischarges;
			NumberOfChargeCycles = original.NumberOfChargeCycles;
			TimeSinceLastFullCharge = original.TimeSinceLastFullCharge;
			MinimumBatteryVoltage = original.MinimumBatteryVoltage;
			MaximumBatteryVoltage = original.MaximumBatteryVoltage;
			BatteryCapacity = original.BatteryCapacity;
			BatteryCondition = original.BatteryCondition;
			BatteryChemistryType = original.BatteryChemistryType;
			TemperatureOffBoard = original.TemperatureOffBoard;
			TemperatureOnBoard = original.TemperatureOnBoard;
			HourMeter = original.HourMeter;
			BatteryInstallDate = original.BatteryInstallDate;
			LowStateOfChargeAlertThreshold = original.LowStateOfChargeAlertThreshold;
			IdleAlertTimeThreshold = original.IdleAlertTimeThreshold;
			SoftwareVersion = original.SoftwareVersion;
		}
	}
	public interface IBatteryMonitorStatsStateOfCharge
	{
		Nullable<byte> StateOfChargePercent { get; }

		Nullable<byte> LifetimeAveragePercent { get; }

		Nullable<byte> RecentMovingAveragePercent { get; }
	}
	public record BatteryMonitorStatsStateOfCharge : Object, IBatteryMonitorStatsStateOfCharge
	{
		[CompilerGenerated]
		protected virtual Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(BatteryMonitorStatsStateOfCharge);
			}
		}

		public Nullable<byte> StateOfChargePercent
		{
			[CompilerGenerated]
			get;
		}

		public Nullable<byte> LifetimeAveragePercent
		{
			[CompilerGenerated]
			get;
		}

		public Nullable<byte> RecentMovingAveragePercent
		{
			[CompilerGenerated]
			get;
		}

		public BatteryMonitorStatsStateOfCharge()
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0018: Unknown result type (might be due to invalid IL or missing references)
			//IL_0024: Unknown result type (might be due to invalid IL or missing references)
			StateOfChargePercent = default(Nullable<byte>);
			LifetimeAveragePercent = default(Nullable<byte>);
			RecentMovingAveragePercent = default(Nullable<byte>);
		}

		public BatteryMonitorStatsStateOfCharge(Nullable<byte> stateOfChargePercent, Nullable<byte> lifetimeAveragePercent, Nullable<byte> recentMovingPercent)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			//IL_000e: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0015: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			StateOfChargePercent = stateOfChargePercent;
			LifetimeAveragePercent = lifetimeAveragePercent;
			RecentMovingAveragePercent = recentMovingPercent;
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("BatteryMonitorStatsStateOfCharge");
			val.Append(" { ");
			if (PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected virtual bool PrintMembers(StringBuilder builder)
		{
			//IL_0013: Unknown result type (might be due to invalid IL or missing references)
			//IL_0018: Unknown result type (might be due to invalid IL or missing references)
			//IL_003a: Unknown result type (might be due to invalid IL or missing references)
			//IL_003f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0061: Unknown result type (might be due to invalid IL or missing references)
			//IL_0066: Unknown result type (might be due to invalid IL or missing references)
			RuntimeHelpers.EnsureSufficientExecutionStack();
			builder.Append("StateOfChargePercent = ");
			builder.Append(((Object)StateOfChargePercent/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LifetimeAveragePercent = ");
			builder.Append(((Object)LifetimeAveragePercent/*cast due to .constrained prefix*/).ToString());
			builder.Append(", RecentMovingAveragePercent = ");
			builder.Append(((Object)RecentMovingAveragePercent/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			//IL_001c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0033: Unknown result type (might be due to invalid IL or missing references)
			//IL_004a: Unknown result type (might be due to invalid IL or missing references)
			return ((EqualityComparer<Type>.Default.GetHashCode(EqualityContract) * -1521134295 + EqualityComparer<Nullable<byte>>.Default.GetHashCode(StateOfChargePercent)) * -1521134295 + EqualityComparer<Nullable<byte>>.Default.GetHashCode(LifetimeAveragePercent)) * -1521134295 + EqualityComparer<Nullable<byte>>.Default.GetHashCode(RecentMovingAveragePercent);
		}

		[CompilerGenerated]
		public virtual bool Equals(BatteryMonitorStatsStateOfCharge? other)
		{
			//IL_0020: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0038: Unknown result type (might be due to invalid IL or missing references)
			//IL_003e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0050: Unknown result type (might be due to invalid IL or missing references)
			//IL_0056: Unknown result type (might be due to invalid IL or missing references)
			if ((object)this != other)
			{
				if ((object)other != null && EqualityContract == other.EqualityContract && EqualityComparer<Nullable<byte>>.Default.Equals(StateOfChargePercent, other.StateOfChargePercent) && EqualityComparer<Nullable<byte>>.Default.Equals(LifetimeAveragePercent, other.LifetimeAveragePercent))
				{
					return EqualityComparer<Nullable<byte>>.Default.Equals(RecentMovingAveragePercent, other.RecentMovingAveragePercent);
				}
				return false;
			}
			return true;
		}

		[CompilerGenerated]
		protected BatteryMonitorStatsStateOfCharge(BatteryMonitorStatsStateOfCharge original)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0014: Unknown result type (might be due to invalid IL or missing references)
			//IL_0019: Unknown result type (might be due to invalid IL or missing references)
			//IL_0020: Unknown result type (might be due to invalid IL or missing references)
			//IL_0025: Unknown result type (might be due to invalid IL or missing references)
			StateOfChargePercent = original.StateOfChargePercent;
			LifetimeAveragePercent = original.LifetimeAveragePercent;
			RecentMovingAveragePercent = original.RecentMovingAveragePercent;
		}
	}
	public readonly struct BatteryMonitorTemperature : ValueType
	{
		public const string LogTag = "BatteryMonitorTemperature";

		public const float MinTemperatureCelsius = -20f;

		public const float MaxTemperatureCelsius = 80f;

		private const ushort FixedPointUndefined = 32767;

		private const ushort FixedPointInvalid = 32766;

		private const ushort FixedPointNoSensorConnected = 32765;

		private const sbyte SensorNotConnected = 125;

		private const sbyte Invalid = 126;

		private const sbyte Undefined = 127;

		[field: CompilerGenerated]
		public BatteryMonitorTemperatureState State
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public Nullable<float> Celsius
		{
			[CompilerGenerated]
			get;
		}

		public ushort ToRawCelsiusFixedPointValue
		{
			get
			{
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				switch (State)
				{
				case BatteryMonitorTemperatureState.Unknown:
				case BatteryMonitorTemperatureState.NotSupported:
					return 32766;
				case BatteryMonitorTemperatureState.SensorNotConnected:
					return 32765;
				case BatteryMonitorTemperatureState.Invalid:
					return 32766;
				case BatteryMonitorTemperatureState.Undefined:
					return 32767;
				case BatteryMonitorTemperatureState.Valid:
				{
					Nullable<float> celsius = Celsius;
					if (celsius.HasValue)
					{
						float valueOrDefault = celsius.GetValueOrDefault();
						return (ushort)FixedPointSignedBigEndian8X8.ToFixedPoint(valueOrDefault);
					}
					TaggedLog.Warning("BatteryMonitorTemperature", "Temperature reported as valid, but it is null, mapping to as FixedPointInvalid", Array.Empty<object>());
					return 32766;
				}
				default:
					TaggedLog.Warning("BatteryMonitorTemperature", String.Format("{0} not supported, mapping to as {1}", (object)State, (object)"FixedPointInvalid"), Array.Empty<object>());
					return 32766;
				}
			}
		}

		public sbyte ToRawCelsiusValue
		{
			get
			{
				//IL_005d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				switch (State)
				{
				case BatteryMonitorTemperatureState.Unknown:
					TaggedLog.Warning("BatteryMonitorTemperature", String.Format("{0} not supported, mapping to as {1}", (object)State, (object)"FixedPointInvalid"), Array.Empty<object>());
					return 126;
				case BatteryMonitorTemperatureState.SensorNotConnected:
					return 125;
				case BatteryMonitorTemperatureState.Invalid:
					return 126;
				case BatteryMonitorTemperatureState.Undefined:
					return 127;
				case BatteryMonitorTemperatureState.Valid:
				{
					Nullable<float> celsius = Celsius;
					if (celsius.HasValue)
					{
						float valueOrDefault = celsius.GetValueOrDefault();
						return (sbyte)valueOrDefault;
					}
					TaggedLog.Warning("BatteryMonitorTemperature", "Temperature reported as valid, but it is null, mapping to as FixedPointInvalid", Array.Empty<object>());
					return 126;
				}
				default:
					TaggedLog.Warning("BatteryMonitorTemperature", String.Format("{0} not supported, mapping to as {1}", (object)State, (object)"FixedPointInvalid"), Array.Empty<object>());
					return 126;
				}
			}
		}

		private BatteryMonitorTemperature(ValueTuple<BatteryMonitorTemperatureState, Nullable<float>> temperature)
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			//IL_0028: Unknown result type (might be due to invalid IL or missing references)
			//IL_002d: Unknown result type (might be due to invalid IL or missing references)
			//IL_005c: Unknown result type (might be due to invalid IL or missing references)
			//IL_005d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0062: Unknown result type (might be due to invalid IL or missing references)
			//IL_00b2: Unknown result type (might be due to invalid IL or missing references)
			//IL_00be: Unknown result type (might be due to invalid IL or missing references)
			//IL_00bf: Unknown result type (might be due to invalid IL or missing references)
			//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
			//IL_0046: Unknown result type (might be due to invalid IL or missing references)
			//IL_0056: Unknown result type (might be due to invalid IL or missing references)
			//IL_007b: Unknown result type (might be due to invalid IL or missing references)
			//IL_008b: Unknown result type (might be due to invalid IL or missing references)
			//IL_009b: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ab: Unknown result type (might be due to invalid IL or missing references)
			switch (temperature.Item1)
			{
			case BatteryMonitorTemperatureState.Unknown:
			case BatteryMonitorTemperatureState.NotSupported:
			case BatteryMonitorTemperatureState.SensorNotConnected:
			case BatteryMonitorTemperatureState.Invalid:
			case BatteryMonitorTemperatureState.Undefined:
			{
				Nullable<float> item = temperature.Item2;
				if (item.HasValue)
				{
					throw new ArgumentOutOfRangeException("TemperatureCelsius", String.Format("{0} should be null as the state {1} has no value.", (object)"TemperatureCelsius", (object)temperature.Item1));
				}
				break;
			}
			case BatteryMonitorTemperatureState.Valid:
			{
				Nullable<float> item = temperature.Item2;
				if (!item.HasValue)
				{
					throw new ArgumentOutOfRangeException("TemperatureCelsius", String.Format("{0} should NOT null as the state {1} should have a value.", (object)"TemperatureCelsius", (object)temperature.Item1));
				}
				break;
			}
			default:
				throw new ArgumentOutOfRangeException("TemperatureCelsius", String.Format("Unknown {0}", (object)temperature.Item1));
			}
			State = temperature.Item1;
			Celsius = temperature.Item2;
		}

		public BatteryMonitorTemperature()
			: this(BatteryMonitorTemperatureState.Unknown, default(Nullable<float>))
		{
		}//IL_0004: Unknown result type (might be due to invalid IL or missing references)
		//IL_000a: Unknown result type (might be due to invalid IL or missing references)


		public BatteryMonitorTemperature(BatteryMonitorTemperatureState state, Nullable<float> temperatureCelsius)
			: this(new ValueTuple<BatteryMonitorTemperatureState, Nullable<float>>(state, temperatureCelsius))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0003: Unknown result type (might be due to invalid IL or missing references)


		internal BatteryMonitorTemperature(ushort rawCelsiusFixedPointValue)
			: this(FromRawValue(rawCelsiusFixedPointValue))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)


		internal BatteryMonitorTemperature(sbyte rawCelsiusValue)
			: this(FromRawValue(rawCelsiusValue))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)


		public static BatteryMonitorTemperature MakeNotSupported()
		{
			//IL_0003: Unknown result type (might be due to invalid IL or missing references)
			//IL_0009: Unknown result type (might be due to invalid IL or missing references)
			return new BatteryMonitorTemperature(BatteryMonitorTemperatureState.NotSupported, default(Nullable<float>));
		}

		public static BatteryMonitorTemperature MakeUnknown()
		{
			//IL_0003: Unknown result type (might be due to invalid IL or missing references)
			//IL_0009: Unknown result type (might be due to invalid IL or missing references)
			return new BatteryMonitorTemperature(BatteryMonitorTemperatureState.Unknown, default(Nullable<float>));
		}

		private static ValueTuple<BatteryMonitorTemperatureState, Nullable<float>> FromRawValue(ushort rawCelsiusFixedPointValue)
		{
			//IL_000b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0011: Unknown result type (might be due to invalid IL or missing references)
			//IL_0012: Unknown result type (might be due to invalid IL or missing references)
			//IL_0023: Unknown result type (might be due to invalid IL or missing references)
			//IL_0029: Unknown result type (might be due to invalid IL or missing references)
			//IL_002a: Unknown result type (might be due to invalid IL or missing references)
			//IL_003b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0041: Unknown result type (might be due to invalid IL or missing references)
			//IL_0042: Unknown result type (might be due to invalid IL or missing references)
			//IL_008d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0093: Unknown result type (might be due to invalid IL or missing references)
			//IL_0094: Unknown result type (might be due to invalid IL or missing references)
			//IL_00c6: Unknown result type (might be due to invalid IL or missing references)
			//IL_00cc: Unknown result type (might be due to invalid IL or missing references)
			//IL_00cd: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d5: Unknown result type (might be due to invalid IL or missing references)
			//IL_00da: Unknown result type (might be due to invalid IL or missing references)
			switch (rawCelsiusFixedPointValue)
			{
			case 32767:
				return new ValueTuple<BatteryMonitorTemperatureState, Nullable<float>>(BatteryMonitorTemperatureState.Undefined, default(Nullable<float>));
			case 32766:
				return new ValueTuple<BatteryMonitorTemperatureState, Nullable<float>>(BatteryMonitorTemperatureState.Invalid, default(Nullable<float>));
			case 32765:
				return new ValueTuple<BatteryMonitorTemperatureState, Nullable<float>>(BatteryMonitorTemperatureState.SensorNotConnected, default(Nullable<float>));
			default:
			{
				float num = FixedPointSignedBigEndian8X8.ToFloat(rawCelsiusFixedPointValue);
				if (!(num < -20f))
				{
					if (num > 80f)
					{
						TaggedLog.Warning("BatteryMonitorTemperature", String.Format("Valid Temperature specified as {0} but it is out of range {1}", (object)num, (object)80f), Array.Empty<object>());
						return new ValueTuple<BatteryMonitorTemperatureState, Nullable<float>>(BatteryMonitorTemperatureState.Invalid, default(Nullable<float>));
					}
					return new ValueTuple<BatteryMonitorTemperatureState, Nullable<float>>(BatteryMonitorTemperatureState.Valid, new Nullable<float>(num));
				}
				TaggedLog.Warning("BatteryMonitorTemperature", String.Format("Valid Temperature specified as {0} but it is out of range {1}", (object)num, (object)(-20f)), Array.Empty<object>());
				return new ValueTuple<BatteryMonitorTemperatureState, Nullable<float>>(BatteryMonitorTemperatureState.Invalid, default(Nullable<float>));
			}
			}
		}

		private static ValueTuple<BatteryMonitorTemperatureState, Nullable<float>> FromRawValue(sbyte rawCelsiusValue)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			//IL_000e: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			//IL_001d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0023: Unknown result type (might be due to invalid IL or missing references)
			//IL_0024: Unknown result type (might be due to invalid IL or missing references)
			//IL_0032: Unknown result type (might be due to invalid IL or missing references)
			//IL_0038: Unknown result type (might be due to invalid IL or missing references)
			//IL_0039: Unknown result type (might be due to invalid IL or missing references)
			//IL_0079: Unknown result type (might be due to invalid IL or missing references)
			//IL_007f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0080: Unknown result type (might be due to invalid IL or missing references)
			//IL_00b2: Unknown result type (might be due to invalid IL or missing references)
			//IL_00b8: Unknown result type (might be due to invalid IL or missing references)
			//IL_00b9: Unknown result type (might be due to invalid IL or missing references)
			//IL_00c2: Unknown result type (might be due to invalid IL or missing references)
			//IL_00c7: Unknown result type (might be due to invalid IL or missing references)
			switch (rawCelsiusValue)
			{
			case 127:
				return new ValueTuple<BatteryMonitorTemperatureState, Nullable<float>>(BatteryMonitorTemperatureState.Undefined, default(Nullable<float>));
			case 126:
				return new ValueTuple<BatteryMonitorTemperatureState, Nullable<float>>(BatteryMonitorTemperatureState.Invalid, default(Nullable<float>));
			case 125:
				return new ValueTuple<BatteryMonitorTemperatureState, Nullable<float>>(BatteryMonitorTemperatureState.SensorNotConnected, default(Nullable<float>));
			default:
				if (rawCelsiusValue >= -20)
				{
					if (rawCelsiusValue > 80)
					{
						TaggedLog.Warning("BatteryMonitorTemperature", String.Format("Valid Temperature specified as {0} but it is out of range {1}", (object)(Int32)rawCelsiusValue, (object)80f), Array.Empty<object>());
						return new ValueTuple<BatteryMonitorTemperatureState, Nullable<float>>(BatteryMonitorTemperatureState.Invalid, default(Nullable<float>));
					}
					return new ValueTuple<BatteryMonitorTemperatureState, Nullable<float>>(BatteryMonitorTemperatureState.Valid, new Nullable<float>((float)rawCelsiusValue));
				}
				TaggedLog.Warning("BatteryMonitorTemperature", String.Format("Valid Temperature specified as {0} but it is out of range {1}", (object)(Int32)rawCelsiusValue, (object)(-20f)), Array.Empty<object>());
				return new ValueTuple<BatteryMonitorTemperatureState, Nullable<float>>(BatteryMonitorTemperatureState.Invalid, default(Nullable<float>));
			}
		}
	}
	public enum BatteryMonitorTemperatureState : Enum
	{
		Unknown,
		Valid,
		NotSupported,
		SensorNotConnected,
		Invalid,
		Undefined
	}
	public readonly struct BatteryMonitorTemperatureStats : ValueType
	{
		[field: CompilerGenerated]
		public BatteryMonitorTemperature TemperatureCurrent
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public BatteryMonitorTemperature TemperatureLifetimeMin
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public BatteryMonitorTemperature TemperatureLifetimeMax
		{
			[CompilerGenerated]
			get;
		}

		public BatteryMonitorTemperatureStats(BatteryMonitorTemperature temperatureCurrent, BatteryMonitorTemperature temperatureLifetimeMin, BatteryMonitorTemperature temperatureLifetimeMax)
		{
			TemperatureCurrent = temperatureCurrent;
			TemperatureLifetimeMin = temperatureLifetimeMin;
			TemperatureLifetimeMax = temperatureLifetimeMax;
		}

		public BatteryMonitorTemperatureStats()
			: this(BatteryMonitorTemperature.MakeUnknown(), BatteryMonitorTemperature.MakeUnknown(), BatteryMonitorTemperature.MakeUnknown())
		{
		}

		public static BatteryMonitorTemperatureStats MakeNotSupported()
		{
			return new BatteryMonitorTemperatureStats(BatteryMonitorTemperature.MakeNotSupported(), BatteryMonitorTemperature.MakeNotSupported(), BatteryMonitorTemperature.MakeNotSupported());
		}

		public static BatteryMonitorTemperatureStats MakeUnknown()
		{
			return new BatteryMonitorTemperatureStats(BatteryMonitorTemperature.MakeUnknown(), BatteryMonitorTemperature.MakeUnknown(), BatteryMonitorTemperature.MakeUnknown());
		}
	}
	[DefaultValue(BatteryCondition.Unknown)]
	public enum BatteryCondition : Enum
	{
		Unknown,
		New,
		Refurbished,
		Used
	}
	[DefaultValue(BatteryChemistryType.Unknown)]
	public enum BatteryChemistryType : Enum
	{
		Unknown,
		LeadAcid,
		LeadAcidLiquid,
		LeadAcidGel,
		LeadAcidAbsorbentGlassMat,
		Lithium
	}
	public enum BatteryChargingState : Enum
	{
		Unknown,
		Charging,
		Discharging
	}
	[DefaultValue(ResetType.None)]
	[Flags]
	public enum ResetType : Enum
	{
		None = 0,
		ResetStats = 1,
		ResetLifetimeStats = 2,
		ResetHistory = 4,
		ResetEnergy = 8,
		ResetHourMeter = 0x10,
		ResetLifetimeTemperatureOnBoard = 0x11,
		ResetLifetimeTemperatureOffBoard = 0x12,
		All = 0xFFFF
	}
	public interface IBatteryMonitor : IAccessoryDevice, IPowerMonitor
	{
		Nullable<float> BatteryVoltage { get; }

		Nullable<float> BatteryCurrent { get; }

		string BatteryVoltageStringFormat { get; }

		string BatteryCurrentStringFormat { get; }

		ValueTuple<BatteryStateOfChargeState, Nullable<byte>> StateOfChargePercent { get; }

		ValueTuple<BatteryTimeRemainingState, Nullable<TimeSpan>> TimeRemainingUntilDischarged { get; }

		BatteryChargingState BatteryChargingState { get; }

		bool IsBatteryLow { get; }

		int LowBatteryAlertCount { get; }

		bool IsBatteryIdle { get; }

		int BatteryIdleAlertCount { get; }

		Task<IBatteryMonitorStats> LoadStatsAsync(CancellationToken cancellationToken);

		Task ResetStatsAsync(ResetType resetType, CancellationToken cancellationToken);

		Task ResetSettingsAsync(CancellationToken cancellationToken);

		Task SetBatteryInformationAsync(Nullable<ushort> batteryCapacityAmpHours, BatteryCondition batteryCondition, BatteryChemistryType batteryChemistryType, CancellationToken cancellationToken);

		Task SetBatteryInstallDateAsync(DateTime installDate, CancellationToken cancellationToken);

		Task SetAlertThresholdsAsync(byte stateOfCharge, TimeSpan idleTimeSpan, CancellationToken cancellationToken);
	}
	public interface ILogicalDeviceBatteryMonitor : IBatteryMonitor, IAccessoryDevice, IPowerMonitor, ILogicalDevicePowerMonitor, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithCapability<ILogicalDeviceBatteryMonitorCapability>, ILogicalDeviceWithStatus<LogicalDeviceBatteryMonitorStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceBatteryMonitorStatus>, ILogicalDeviceWithStatusExtended<LogicalDeviceBatteryMonitorStatusExtended>, ILogicalDeviceWithStatusExtended, ILogicalDeviceWithStatusAlertsLocap, ILogicalDeviceAccessory
	{
		LogicalDevicePidProxySummary SummaryPid { get; }

		LogicalDevicePidProxyStateOfCharge StateOfChargePid { get; }

		LogicalDevicePidProxyChargeCounts ChargeCountsPid { get; }

		LogicalDevicePidProxyChargeTime ChargeTimePid { get; }

		LogicalDevicePidProxyVoltageStats VoltageStatsPid { get; }

		LogicalDevicePidProxySoftwareVersion SoftwareVersionPid { get; }

		ILogicalDevicePidEnum<ResetType> ResetPid { get; }

		LogicalDevicePidProxyBatteryInformation BatteryInformationPid { get; }

		LogicalDevicePidProxyTemperature TemperatureOffBoardPid { get; }

		LogicalDevicePidProxyTemperature TemperatureOnBoardPid { get; }

		LogicalDevicePidProxyHourMeter HourMeterPid { get; }

		ILogicalDevicePidDateTime InstallDatePid { get; }

		LogicalDevicePidProxyAlertThreshold AlertThresholdsPid { get; }
	}
	public interface ILogicalDeviceBatteryMonitorDirect : ILogicalDeviceBatteryMonitor, IBatteryMonitor, IAccessoryDevice, IPowerMonitor, ILogicalDevicePowerMonitor, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithCapability<ILogicalDeviceBatteryMonitorCapability>, ILogicalDeviceWithStatus<LogicalDeviceBatteryMonitorStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceBatteryMonitorStatus>, ILogicalDeviceWithStatusExtended<LogicalDeviceBatteryMonitorStatusExtended>, ILogicalDeviceWithStatusExtended, ILogicalDeviceWithStatusAlertsLocap, ILogicalDeviceAccessory, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public enum BatteryTimeRemainingState : Enum
	{
		Unknown,
		Computing,
		Invalid,
		Infinite,
		Value,
		ValueStabilizing
	}
	public enum BatteryStateOfChargeState : Enum
	{
		Unknown,
		Computing,
		Invalid,
		Value,
		ValueStabilizing
	}
	public class LogicalDeviceBatteryMonitor : LogicalDevice<LogicalDeviceBatteryMonitorStatus, LogicalDeviceBatteryMonitorStatusExtended, ILogicalDeviceBatteryMonitorCapability>, ILogicalDeviceBatteryMonitorDirect, ILogicalDeviceBatteryMonitor, IBatteryMonitor, IAccessoryDevice, IPowerMonitor, ILogicalDevicePowerMonitor, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceWithCapability<ILogicalDeviceBatteryMonitorCapability>, ILogicalDeviceWithStatus<LogicalDeviceBatteryMonitorStatus>, ILogicalDeviceWithStatus, ILogicalDeviceWithStatusUpdate<LogicalDeviceBatteryMonitorStatus>, ILogicalDeviceWithStatusExtended<LogicalDeviceBatteryMonitorStatusExtended>, ILogicalDeviceWithStatusExtended, ILogicalDeviceWithStatusAlertsLocap, ILogicalDeviceAccessory, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <GetAlertThresholdAsync>d__82 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorAlertThreshold> <>t__builder;

			public LogicalDeviceBatteryMonitor <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<BatteryMonitorAlertThreshold> <>u__1;

			private void MoveNext()
			{
				//IL_0079: Expected O, but got Unknown
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0018: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBatteryMonitor logicalDeviceBatteryMonitor = <>4__this;
				BatteryMonitorAlertThreshold result;
				try
				{
					TaskAwaiter<BatteryMonitorAlertThreshold> val;
					if (num != 0)
					{
						val = logicalDeviceBatteryMonitor.AlertThresholdsPid.ReadAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorAlertThreshold>, <GetAlertThresholdAsync>d__82>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<BatteryMonitorAlertThreshold>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <LoadStatsAsync>d__76 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<IBatteryMonitorStats> <>t__builder;

			public LogicalDeviceBatteryMonitor <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<BatteryMonitorStats> <>u__1;

			private void MoveNext()
			{
				//IL_0074: Expected O, but got Unknown
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBatteryMonitor logicalDevice = <>4__this;
				IBatteryMonitorStats result;
				try
				{
					TaskAwaiter<BatteryMonitorStats> val;
					if (num != 0)
					{
						val = BatteryMonitorStats.MakeBatteryMonitorStatsAsync(logicalDevice, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<BatteryMonitorStats>, <LoadStatsAsync>d__76>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<BatteryMonitorStats>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ResetStatsAsync>d__77 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceBatteryMonitor <>4__this;

			public ResetType resetType;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_007d: Expected O, but got Unknown
				//IL_0058: Unknown result type (might be due to invalid IL or missing references)
				//IL_005d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				//IL_001e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_002d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_0042: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBatteryMonitor logicalDeviceBatteryMonitor = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						val = ((ILogicalDevicePid<ResetType>)(object)logicalDeviceBatteryMonitor.ResetPid).WriteAsync(resetType, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <ResetStatsAsync>d__77>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SetAlertThresholdsAsync>d__81 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceBatteryMonitor <>4__this;

			public byte stateOfCharge;

			public TimeSpan idleTimeSpan;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0092: Expected O, but got Unknown
				//IL_006d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0072: Unknown result type (might be due to invalid IL or missing references)
				//IL_0079: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0023: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_0033: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0042: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBatteryMonitor logicalDeviceBatteryMonitor = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						val = logicalDeviceBatteryMonitor.AlertThresholdsPid.WriteAsync(new BatteryMonitorAlertThreshold(new Nullable<byte>(stateOfCharge), new Nullable<TimeSpan>(idleTimeSpan)), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SetAlertThresholdsAsync>d__81>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SetBatteryInformationAsync>d__79 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceBatteryMonitor <>4__this;

			public Nullable<ushort> batteryCapacityAmpHours;

			public BatteryCondition batteryCondition;

			public BatteryChemistryType batteryChemistryType;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_008e: Expected O, but got Unknown
				//IL_0069: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0075: Unknown result type (might be due to invalid IL or missing references)
				//IL_0018: Unknown result type (might be due to invalid IL or missing references)
				//IL_002f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0039: Unknown result type (might be due to invalid IL or missing references)
				//IL_003e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0053: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBatteryMonitor logicalDeviceBatteryMonitor = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						val = logicalDeviceBatteryMonitor.BatteryInformationPid.WriteAsync(new BatteryMonitorBatteryInformation(batteryCapacityAmpHours, batteryCondition, batteryChemistryType), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SetBatteryInformationAsync>d__79>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SetBatteryInstallDateAsync>d__80 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceBatteryMonitor <>4__this;

			public DateTime installDate;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_007d: Expected O, but got Unknown
				//IL_0058: Unknown result type (might be due to invalid IL or missing references)
				//IL_005d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				//IL_0018: Unknown result type (might be due to invalid IL or missing references)
				//IL_001e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_002d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_0042: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBatteryMonitor logicalDeviceBatteryMonitor = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						val = ((ILogicalDevicePid<DateTime>)(object)logicalDeviceBatteryMonitor.InstallDatePid).WriteAsync(installDate, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SetBatteryInstallDateAsync>d__80>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceBatteryMonitor";

		public const uint UnknownDateTime = 4294967295u;

		private const int AlertsByteSize = 2;

		public const string LowStateOfChargeAlertKey = "LowStateOfChargeAlert";

		public const string BatteryIdleAlertKey = "BatteryIdleAlert";

		private readonly ConcurrentDictionary<string, ILogicalDeviceAlert> _alertDict = new ConcurrentDictionary<string, ILogicalDeviceAlert>();

		[field: CompilerGenerated]
		public LogicalDevicePidProxySummary SummaryPid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LogicalDevicePidProxyStateOfCharge StateOfChargePid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LogicalDevicePidProxyChargeCounts ChargeCountsPid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LogicalDevicePidProxyChargeTime ChargeTimePid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LogicalDevicePidProxyVoltageStats VoltageStatsPid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LogicalDevicePidProxySoftwareVersion SoftwareVersionPid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public virtual ILogicalDevicePidEnum<ResetType> ResetPid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LogicalDevicePidProxyBatteryInformation BatteryInformationPid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LogicalDevicePidProxyTemperature TemperatureOffBoardPid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LogicalDevicePidProxyTemperature TemperatureOnBoardPid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LogicalDevicePidProxyHourMeter HourMeterPid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public virtual ILogicalDevicePidDateTime InstallDatePid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LogicalDevicePidProxyAlertThreshold AlertThresholdsPid
		{
			[CompilerGenerated]
			get;
		}

		public Nullable<float> BatteryVoltage
		{
			get
			{
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_000f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0015: Unknown result type (might be due to invalid IL or missing references)
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus).HasData)
				{
					return default(Nullable<float>);
				}
				return new Nullable<float>(((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus.BatteryVoltage);
			}
		}

		public Nullable<float> BatteryCurrent
		{
			get
			{
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_000f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0015: Unknown result type (might be due to invalid IL or missing references)
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus).HasData)
				{
					return default(Nullable<float>);
				}
				return new Nullable<float>(((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus.BatteryCurrent);
			}
		}

		public string BatteryVoltageStringFormat
		{
			get
			{
				ILogicalDeviceBatteryMonitorCapability deviceCapability = ((LogicalDevice<ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceCapability;
				if (deviceCapability == null || !deviceCapability.IsHighResolutionDataSupported)
				{
					return "0.0";
				}
				return "0.00";
			}
		}

		public string BatteryCurrentStringFormat
		{
			get
			{
				ILogicalDeviceBatteryMonitorCapability deviceCapability = ((LogicalDevice<ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceCapability;
				if (deviceCapability == null || !deviceCapability.IsHighResolutionDataSupported)
				{
					return "0.#";
				}
				return "0.00";
			}
		}

		public ValueTuple<BatteryStateOfChargeState, Nullable<byte>> StateOfChargePercent => ((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus.StateOfCharge;

		public ValueTuple<BatteryTimeRemainingState, Nullable<TimeSpan>> TimeRemainingUntilDischarged => base.DeviceStatusExtended.TimeRemainingUntilDischarged;

		public bool IsBatteryLow
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus).HasData)
				{
					return ((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus.LowSoCAlertActive;
				}
				return false;
			}
		}

		public int LowBatteryAlertCount
		{
			get
			{
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus).HasData)
				{
					return 0;
				}
				return ((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus.LowSoCAlertEventCount;
			}
		}

		public bool IsBatteryIdle
		{
			get
			{
				if (((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus).HasData)
				{
					return ((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus.BatteryIdleAlertActive;
				}
				return false;
			}
		}

		public int BatteryIdleAlertCount
		{
			get
			{
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus).HasData)
				{
					return 0;
				}
				return ((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus.BatteryIdleAlertEventCount;
			}
		}

		public BatteryChargingState BatteryChargingState
		{
			get
			{
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus).HasData || ((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus.BatteryCurrent == 0f)
				{
					return BatteryChargingState.Unknown;
				}
				if (!((double)((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus.BatteryCurrent > 0.0))
				{
					return BatteryChargingState.Discharging;
				}
				return BatteryChargingState.Charging;
			}
		}

		public bool IsAccessoryGatewaySupported => true;

		public bool AllowAutoOfflineLogicalDeviceRemoval => false;

		public IEnumerable<ILogicalDeviceAlert> Alerts => (IEnumerable<ILogicalDeviceAlert>)(object)_alertDict.Values;

		public LogicalDeviceBatteryMonitor(ILogicalDeviceId logicalDeviceId, ILogicalDeviceBatteryMonitorCapability batteryMonitorCapability, ILogicalDeviceService deviceService, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceBatteryMonitorStatus(), new LogicalDeviceBatteryMonitorStatusExtended(), batteryMonitorCapability, deviceService, isFunctionClassChangeable)
		{
			//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e7: Expected O, but got Unknown
			//IL_0138: Unknown result type (might be due to invalid IL or missing references)
			//IL_013e: Unknown result type (might be due to invalid IL or missing references)
			//IL_014d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0153: Unknown result type (might be due to invalid IL or missing references)
			SummaryPid = new LogicalDevicePidProxySummary((ILogicalDevice)(object)this, (Pid)345, (LogicalDeviceSessionType)0);
			StateOfChargePid = new LogicalDevicePidProxyStateOfCharge((ILogicalDevice)(object)this, (Pid)346, (LogicalDeviceSessionType)0);
			ChargeCountsPid = new LogicalDevicePidProxyChargeCounts((ILogicalDevice)(object)this, (Pid)347, (LogicalDeviceSessionType)0);
			ChargeTimePid = new LogicalDevicePidProxyChargeTime((ILogicalDevice)(object)this, (Pid)348, (LogicalDeviceSessionType)0);
			VoltageStatsPid = new LogicalDevicePidProxyVoltageStats((ILogicalDevice)(object)this, (Pid)349, (LogicalDeviceSessionType)0);
			SoftwareVersionPid = new LogicalDevicePidProxySoftwareVersion((ILogicalDevice)(object)this, (Pid)359, (LogicalDeviceSessionType)0);
			ResetPid = (ILogicalDevicePidEnum<ResetType>)(object)new LogicalDevicePidEnum<ResetType>((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)350), (LogicalDeviceSessionType)2);
			BatteryInformationPid = new LogicalDevicePidProxyBatteryInformation((ILogicalDevice)(object)this, (Pid)351, (LogicalDeviceSessionType)2);
			InstallDatePid = (ILogicalDevicePidDateTime)new LogicalDevicePidDateTime((ILogicalDevice)(object)this, PidExtension.ConvertToPid((Pid)352), (LogicalDeviceSessionType)2, (Func<ulong, bool>)ValidateDateTimePid);
			AlertThresholdsPid = new LogicalDevicePidProxyAlertThreshold((ILogicalDevice)(object)this, (Pid)353, (LogicalDeviceSessionType)2);
			TemperatureOffBoardPid = new LogicalDevicePidProxyTemperature((ILogicalDevice)(object)this, (Pid)354, (LogicalDeviceSessionType)0);
			TemperatureOnBoardPid = new LogicalDevicePidProxyTemperature((ILogicalDevice)(object)this, (Pid)355, (LogicalDeviceSessionType)0);
			HourMeterPid = new LogicalDevicePidProxyHourMeter((ILogicalDevice)(object)this, (Pid)356, (LogicalDeviceSessionType)0);
			UpdateAlert("LowStateOfChargeAlert", isActive: false, default(Nullable<int>));
			UpdateAlert("BatteryIdleAlert", isActive: false, default(Nullable<int>));
		}

		private static bool ValidateDateTimePid(ulong rawValue)
		{
			return (int)rawValue != -1;
		}

		public override void OnDeviceCapabilityChanged()
		{
			((LogicalDevice<ILogicalDeviceBatteryMonitorCapability>)(object)this).OnDeviceCapabilityChanged();
			base.DeviceStatusExtended.HasBatteryTerminalTemperature = ((LogicalDevice<ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceCapability.IsHighResolutionDataSupported;
		}

		public override void OnDeviceStatusChanged()
		{
			//IL_0082: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a8: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).OnDeviceStatusChanged();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("BatteryVoltage", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("BatteryCurrent", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("BatteryChargingState", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("StateOfChargePercent", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsBatteryLow", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("LowBatteryAlertCount", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsBatteryIdle", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("BatteryIdleAlertCount", true);
			UpdateAlert("LowStateOfChargeAlert", ((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus.LowSoCAlertActive, new Nullable<int>((int)((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus.LowSoCAlertEventCount));
			UpdateAlert("BatteryIdleAlert", ((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus.BatteryIdleAlertActive, new Nullable<int>((int)((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus.BatteryIdleAlertEventCount));
		}

		public bool UpdateDeviceStatusAlerts(byte[] alertData)
		{
			//IL_0114: Expected O, but got Unknown
			//IL_002b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0066: Unknown result type (might be due to invalid IL or missing references)
			//IL_004a: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
			try
			{
				int num = ((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus).Data.Length;
				int num2 = alertData.Length;
				if (num2 != 2)
				{
					throw new ArgumentException(String.Format("{0} is expected to be {1} bytes in length.", (object)"alertData", (object)2));
				}
				if (num < num2)
				{
					throw new ArgumentException(String.Format("{0} is expected to be larger than {1} bytes in length.", (object)"Data", (object)2));
				}
				ArraySegment<byte> val = default(ArraySegment<byte>);
				val..ctor(((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus).Data, num - num2, num2);
				if (Enumerable.SequenceEqual<byte>((IEnumerable<byte>)(object)val, (IEnumerable<byte>)(object)alertData))
				{
					TaggedLog.Information("LogicalDeviceBatteryMonitor", String.Format("{0} - Battery Monitor UUID background advertisement found with the values: {1}. These values match the last scan and will be ignored.", (object)this, (object)ArrayExtension.DebugDump((IReadOnlyList<byte>)(object)alertData, 0, alertData.Length, " ", false)), Array.Empty<object>());
					return false;
				}
				for (int i = 1; i <= num2; i++)
				{
					((LogicalDeviceDataPacketMutableDoubleBuffer)((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceStatus).Data[num - i] = alertData[num2 - i];
				}
				TaggedLog.Information("LogicalDeviceBatteryMonitor", String.Format("{0} - Alert information in the Status changed from {1} to {2}", (object)this, (object)ArrayExtension.DebugDump((IReadOnlyList<byte>)(object)val, 0, num2, " ", false), (object)ArrayExtension.DebugDump((IReadOnlyList<byte>)(object)alertData, 0, alertData.Length, " ", false)), Array.Empty<object>());
				((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).OnDeviceStatusChanged();
				return true;
			}
			catch (Exception ex)
			{
				Exception ex2 = ex;
				TaggedLog.Error("LogicalDeviceBatteryMonitor", String.Format("{0} - Exception updating alert status {1}: {2}", (object)this, (object)ex2, (object)ex2.Message), Array.Empty<object>());
				return false;
			}
		}

		public override void OnDeviceStatusExtendedChanged(IDeviceDataPacketMutableExtended dataChanged)
		{
			base.OnDeviceStatusExtendedChanged(dataChanged);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("TimeRemainingUntilDischarged", true);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<IBatteryMonitorStats> LoadStatsAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<LoadStatsAsync>d__76 <LoadStatsAsync>d__ = default(<LoadStatsAsync>d__76);
			<LoadStatsAsync>d__.<>t__builder = AsyncTaskMethodBuilder<IBatteryMonitorStats>.Create();
			<LoadStatsAsync>d__.<>4__this = this;
			<LoadStatsAsync>d__.cancellationToken = cancellationToken;
			<LoadStatsAsync>d__.<>1__state = -1;
			<LoadStatsAsync>d__.<>t__builder.Start<<LoadStatsAsync>d__76>(ref <LoadStatsAsync>d__);
			return <LoadStatsAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task ResetStatsAsync(ResetType resetType, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<ResetStatsAsync>d__77 <ResetStatsAsync>d__ = default(<ResetStatsAsync>d__77);
			<ResetStatsAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<ResetStatsAsync>d__.<>4__this = this;
			<ResetStatsAsync>d__.resetType = resetType;
			<ResetStatsAsync>d__.cancellationToken = cancellationToken;
			<ResetStatsAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <ResetStatsAsync>d__.<>t__builder)).Start<<ResetStatsAsync>d__77>(ref <ResetStatsAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <ResetStatsAsync>d__.<>t__builder)).Task;
		}

		public Task ResetSettingsAsync(CancellationToken cancellationToken)
		{
			//IL_000b: Unknown result type (might be due to invalid IL or missing references)
			//IL_001d: Unknown result type (might be due to invalid IL or missing references)
			//IL_002a: Unknown result type (might be due to invalid IL or missing references)
			//IL_002f: Unknown result type (might be due to invalid IL or missing references)
			Task val = BatteryInformationPid.WriteAsync(BatteryMonitorBatteryInformation.MakeFactoryReset(), cancellationToken);
			Task val2 = AlertThresholdsPid.WriteAsync(BatteryMonitorAlertThreshold.MakeFactoryReset(), cancellationToken);
			Task val3 = ((ILogicalDevicePid<DateTime>)(object)InstallDatePid).WriteAsync(DateTime.Now, cancellationToken);
			return Task.WhenAll((Task[])(object)new Task[3] { val, val2, val3 });
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task SetBatteryInformationAsync(Nullable<ushort> batteryCapacityAmpHours, BatteryCondition batteryCondition, BatteryChemistryType batteryChemistryType, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0030: Unknown result type (might be due to invalid IL or missing references)
			<SetBatteryInformationAsync>d__79 <SetBatteryInformationAsync>d__ = default(<SetBatteryInformationAsync>d__79);
			<SetBatteryInformationAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SetBatteryInformationAsync>d__.<>4__this = this;
			<SetBatteryInformationAsync>d__.batteryCapacityAmpHours = batteryCapacityAmpHours;
			<SetBatteryInformationAsync>d__.batteryCondition = batteryCondition;
			<SetBatteryInformationAsync>d__.batteryChemistryType = batteryChemistryType;
			<SetBatteryInformationAsync>d__.cancellationToken = cancellationToken;
			<SetBatteryInformationAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SetBatteryInformationAsync>d__.<>t__builder)).Start<<SetBatteryInformationAsync>d__79>(ref <SetBatteryInformationAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SetBatteryInformationAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task SetBatteryInstallDateAsync(DateTime installDate, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<SetBatteryInstallDateAsync>d__80 <SetBatteryInstallDateAsync>d__ = default(<SetBatteryInstallDateAsync>d__80);
			<SetBatteryInstallDateAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SetBatteryInstallDateAsync>d__.<>4__this = this;
			<SetBatteryInstallDateAsync>d__.installDate = installDate;
			<SetBatteryInstallDateAsync>d__.cancellationToken = cancellationToken;
			<SetBatteryInstallDateAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SetBatteryInstallDateAsync>d__.<>t__builder)).Start<<SetBatteryInstallDateAsync>d__80>(ref <SetBatteryInstallDateAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SetBatteryInstallDateAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task SetAlertThresholdsAsync(byte stateOfCharge, TimeSpan idleTimeSpan, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<SetAlertThresholdsAsync>d__81 <SetAlertThresholdsAsync>d__ = default(<SetAlertThresholdsAsync>d__81);
			<SetAlertThresholdsAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SetAlertThresholdsAsync>d__.<>4__this = this;
			<SetAlertThresholdsAsync>d__.stateOfCharge = stateOfCharge;
			<SetAlertThresholdsAsync>d__.idleTimeSpan = idleTimeSpan;
			<SetAlertThresholdsAsync>d__.cancellationToken = cancellationToken;
			<SetAlertThresholdsAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SetAlertThresholdsAsync>d__.<>t__builder)).Start<<SetAlertThresholdsAsync>d__81>(ref <SetAlertThresholdsAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SetAlertThresholdsAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<BatteryMonitorAlertThreshold> GetAlertThresholdAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<GetAlertThresholdAsync>d__82 <GetAlertThresholdAsync>d__ = default(<GetAlertThresholdAsync>d__82);
			<GetAlertThresholdAsync>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorAlertThreshold>.Create();
			<GetAlertThresholdAsync>d__.<>4__this = this;
			<GetAlertThresholdAsync>d__.cancellationToken = cancellationToken;
			<GetAlertThresholdAsync>d__.<>1__state = -1;
			<GetAlertThresholdAsync>d__.<>t__builder.Start<<GetAlertThresholdAsync>d__82>(ref <GetAlertThresholdAsync>d__);
			return <GetAlertThresholdAsync>d__.<>t__builder.Task;
		}

		public void UpdateAlert(string alertName, bool isActive, Nullable<int> count)
		{
			//IL_0003: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).UpdateAlertDefaultImpl(alertName, isActive, count, _alertDict);
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceBatteryMonitorCapability>)(object)this).LastReceivedNetworkStatus;
		}
	}
	[Flags]
	public enum BatteryMonitorCapabilityFlag : Enum
	{
		None = 0,
		HighResolutionData = 1,
		Reserved0 = 2,
		Reserved1 = 4,
		Reserved2 = 8,
		Reserved3 = 0x10,
		Reserved4 = 0x20,
		Reserved5 = 0x40,
		Reserved6 = 0x80
	}
	public interface ILogicalDeviceBatteryMonitorCapability : ILogicalDeviceCapability, INotifyPropertyChanged
	{
		bool IsHighResolutionDataSupported { get; }
	}
	public class LogicalDeviceBatteryMonitorCapability : LogicalDeviceCapability, ILogicalDeviceBatteryMonitorCapability, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		private BatteryMonitorCapabilityFlag _capabilityFlag => (BatteryMonitorCapabilityFlag)base.RawValue;

		public bool IsHighResolutionDataSupported => ((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)BatteryMonitorCapabilityFlag.HighResolutionData);

		public LogicalDeviceBatteryMonitorCapability(Nullable<byte> rawCapability)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(rawCapability);
		}

		public LogicalDeviceBatteryMonitorCapability(BatteryMonitorCapabilityFlag capabilityFlags)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(new Nullable<byte>((byte)capabilityFlags));
		}

		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsHighResolutionDataSupported");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}
	}
	public class LogicalDeviceBatteryMonitorFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 49)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceBatteryMonitor(logicalDeviceId, new LogicalDeviceBatteryMonitorCapability(rawCapability), service);
		}
	}
	public class LogicalDeviceBatteryMonitorSim : LogicalDeviceBatteryMonitor, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SimulatorAsync>d__18 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceBatteryMonitorSim <>4__this;

			public CancellationToken cancellationToken;

			private Stopwatch <timeRemainingUsed>5__2;

			private TimeSpan <timeUntilEmpty>5__3;

			private TaskAwaiter<ResetType> <>u__1;

			private TaskAwaiter <>u__2;

			private TaskAwaiter<bool> <>u__3;

			private void MoveNext()
			{
				//IL_0a7f: Expected O, but got Unknown
				//IL_02e3: Unknown result type (might be due to invalid IL or missing references)
				//IL_02e8: Unknown result type (might be due to invalid IL or missing references)
				//IL_02f0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0360: Unknown result type (might be due to invalid IL or missing references)
				//IL_0365: Unknown result type (might be due to invalid IL or missing references)
				//IL_036d: Unknown result type (might be due to invalid IL or missing references)
				//IL_03e7: Unknown result type (might be due to invalid IL or missing references)
				//IL_03ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_03f4: Unknown result type (might be due to invalid IL or missing references)
				//IL_046b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0470: Unknown result type (might be due to invalid IL or missing references)
				//IL_0478: Unknown result type (might be due to invalid IL or missing references)
				//IL_04ef: Unknown result type (might be due to invalid IL or missing references)
				//IL_04f4: Unknown result type (might be due to invalid IL or missing references)
				//IL_04fc: Unknown result type (might be due to invalid IL or missing references)
				//IL_0568: Unknown result type (might be due to invalid IL or missing references)
				//IL_056d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0575: Unknown result type (might be due to invalid IL or missing references)
				//IL_05ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_05f1: Unknown result type (might be due to invalid IL or missing references)
				//IL_05f9: Unknown result type (might be due to invalid IL or missing references)
				//IL_067b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0680: Unknown result type (might be due to invalid IL or missing references)
				//IL_0688: Unknown result type (might be due to invalid IL or missing references)
				//IL_0725: Unknown result type (might be due to invalid IL or missing references)
				//IL_072a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0732: Unknown result type (might be due to invalid IL or missing references)
				//IL_07d0: Unknown result type (might be due to invalid IL or missing references)
				//IL_07d5: Unknown result type (might be due to invalid IL or missing references)
				//IL_07dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_0867: Unknown result type (might be due to invalid IL or missing references)
				//IL_086c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0874: Unknown result type (might be due to invalid IL or missing references)
				//IL_08e9: Unknown result type (might be due to invalid IL or missing references)
				//IL_08ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_08f6: Unknown result type (might be due to invalid IL or missing references)
				//IL_095c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0961: Unknown result type (might be due to invalid IL or missing references)
				//IL_0969: Unknown result type (might be due to invalid IL or missing references)
				//IL_09e1: Unknown result type (might be due to invalid IL or missing references)
				//IL_09e6: Unknown result type (might be due to invalid IL or missing references)
				//IL_09ee: Unknown result type (might be due to invalid IL or missing references)
				//IL_0a47: Unknown result type (might be due to invalid IL or missing references)
				//IL_0a4c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0a54: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_042c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0436: Unknown result type (might be due to invalid IL or missing references)
				//IL_043b: Unknown result type (might be due to invalid IL or missing references)
				//IL_049a: Unknown result type (might be due to invalid IL or missing references)
				//IL_04a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_04b0: Unknown result type (might be due to invalid IL or missing references)
				//IL_04ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_04bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_051e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0529: Unknown result type (might be due to invalid IL or missing references)
				//IL_0533: Unknown result type (might be due to invalid IL or missing references)
				//IL_0538: Unknown result type (might be due to invalid IL or missing references)
				//IL_0597: Unknown result type (might be due to invalid IL or missing references)
				//IL_05a2: Unknown result type (might be due to invalid IL or missing references)
				//IL_05ad: Unknown result type (might be due to invalid IL or missing references)
				//IL_05b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_05bc: Unknown result type (might be due to invalid IL or missing references)
				//IL_061b: Unknown result type (might be due to invalid IL or missing references)
				//IL_063c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0646: Unknown result type (might be due to invalid IL or missing references)
				//IL_064b: Unknown result type (might be due to invalid IL or missing references)
				//IL_06e6: Unknown result type (might be due to invalid IL or missing references)
				//IL_06f0: Unknown result type (might be due to invalid IL or missing references)
				//IL_06f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_0790: Unknown result type (might be due to invalid IL or missing references)
				//IL_079a: Unknown result type (might be due to invalid IL or missing references)
				//IL_079f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0808: Unknown result type (might be due to invalid IL or missing references)
				//IL_081c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0827: Unknown result type (might be due to invalid IL or missing references)
				//IL_0831: Unknown result type (might be due to invalid IL or missing references)
				//IL_0836: Unknown result type (might be due to invalid IL or missing references)
				//IL_0890: Unknown result type (might be due to invalid IL or missing references)
				//IL_0895: Unknown result type (might be due to invalid IL or missing references)
				//IL_0a0a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0a14: Unknown result type (might be due to invalid IL or missing references)
				//IL_0a19: Unknown result type (might be due to invalid IL or missing references)
				//IL_0398: Unknown result type (might be due to invalid IL or missing references)
				//IL_03a8: Unknown result type (might be due to invalid IL or missing references)
				//IL_03b2: Unknown result type (might be due to invalid IL or missing references)
				//IL_03b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_0321: Unknown result type (might be due to invalid IL or missing references)
				//IL_032b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0330: Unknown result type (might be due to invalid IL or missing references)
				//IL_0450: Unknown result type (might be due to invalid IL or missing references)
				//IL_0452: Unknown result type (might be due to invalid IL or missing references)
				//IL_04d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_04d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_054d: Unknown result type (might be due to invalid IL or missing references)
				//IL_054f: Unknown result type (might be due to invalid IL or missing references)
				//IL_05d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_05d3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0660: Unknown result type (might be due to invalid IL or missing references)
				//IL_0662: Unknown result type (might be due to invalid IL or missing references)
				//IL_070a: Unknown result type (might be due to invalid IL or missing references)
				//IL_070c: Unknown result type (might be due to invalid IL or missing references)
				//IL_07b5: Unknown result type (might be due to invalid IL or missing references)
				//IL_07b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_084c: Unknown result type (might be due to invalid IL or missing references)
				//IL_084e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0916: Unknown result type (might be due to invalid IL or missing references)
				//IL_091c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0926: Unknown result type (might be due to invalid IL or missing references)
				//IL_092b: Unknown result type (might be due to invalid IL or missing references)
				//IL_08a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_08b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_08b8: Unknown result type (might be due to invalid IL or missing references)
				//IL_098b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0996: Unknown result type (might be due to invalid IL or missing references)
				//IL_09a1: Unknown result type (might be due to invalid IL or missing references)
				//IL_09ab: Unknown result type (might be due to invalid IL or missing references)
				//IL_09b0: Unknown result type (might be due to invalid IL or missing references)
				//IL_0a2f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0a31: Unknown result type (might be due to invalid IL or missing references)
				//IL_03cc: Unknown result type (might be due to invalid IL or missing references)
				//IL_03ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_0345: Unknown result type (might be due to invalid IL or missing references)
				//IL_0347: Unknown result type (might be due to invalid IL or missing references)
				//IL_0941: Unknown result type (might be due to invalid IL or missing references)
				//IL_0943: Unknown result type (might be due to invalid IL or missing references)
				//IL_08ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_08d0: Unknown result type (might be due to invalid IL or missing references)
				//IL_09c6: Unknown result type (might be due to invalid IL or missing references)
				//IL_09c8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0087: Unknown result type (might be due to invalid IL or missing references)
				//IL_0092: Unknown result type (might be due to invalid IL or missing references)
				//IL_0097: Unknown result type (might be due to invalid IL or missing references)
				//IL_009c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ed: Unknown result type (might be due to invalid IL or missing references)
				//IL_0153: Unknown result type (might be due to invalid IL or missing references)
				//IL_0158: Unknown result type (might be due to invalid IL or missing references)
				//IL_015d: Unknown result type (might be due to invalid IL or missing references)
				//IL_017b: Unknown result type (might be due to invalid IL or missing references)
				//IL_016a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0170: Unknown result type (might be due to invalid IL or missing references)
				//IL_0180: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a0: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a5: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c5: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ca: Unknown result type (might be due to invalid IL or missing references)
				//IL_01cf: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ed: Unknown result type (might be due to invalid IL or missing references)
				//IL_01dc: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e2: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f2: Unknown result type (might be due to invalid IL or missing references)
				//IL_01fa: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ff: Unknown result type (might be due to invalid IL or missing references)
				//IL_021d: Unknown result type (might be due to invalid IL or missing references)
				//IL_020c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0212: Unknown result type (might be due to invalid IL or missing references)
				//IL_0222: Unknown result type (might be due to invalid IL or missing references)
				//IL_028f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0295: Unknown result type (might be due to invalid IL or missing references)
				//IL_02a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ae: Unknown result type (might be due to invalid IL or missing references)
				//IL_02b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_02c8: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ca: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceBatteryMonitorSim logicalDeviceBatteryMonitorSim = <>4__this;
				try
				{
					TaskAwaiter<ResetType> val3;
					TaskAwaiter val2;
					TaskAwaiter<bool> val;
					Nullable<DateTime> batteryInstallDate;
					switch (num)
					{
					default:
						<timeRemainingUsed>5__2 = Stopwatch.StartNew();
						<timeUntilEmpty>5__3 = TimeSpan.FromMinutes(30.0);
						goto IL_0a6b;
					case 0:
						val3 = <>u__1;
						<>u__1 = default(TaskAwaiter<ResetType>);
						num = (<>1__state = -1);
						goto IL_02ff;
					case 1:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_037c;
					case 2:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_0403;
					case 3:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_0487;
					case 4:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_050b;
					case 5:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_0584;
					case 6:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_0608;
					case 7:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_0697;
					case 8:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_0741;
					case 9:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_07ec;
					case 10:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_0883;
					case 11:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_0905;
					case 12:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_0978;
					case 13:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter);
						num = (<>1__state = -1);
						goto IL_09fd;
					case 14:
						{
							val = <>u__3;
							<>u__3 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_0a63;
						}
						IL_0a6b:
						if (!((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
						{
							int num2 = (((LogicalDevice<ILogicalDeviceBatteryMonitorCapability>)(object)logicalDeviceBatteryMonitorSim).DeviceCapability.IsHighResolutionDataSupported ? 8 : 2);
							TimeSpan val4 = <timeUntilEmpty>5__3 - <timeRemainingUsed>5__2.Elapsed;
							if (((TimeSpan)(ref val4)).TotalSeconds <= 0.0)
							{
								<timeRemainingUsed>5__2.Restart();
								val4 = <timeUntilEmpty>5__3;
							}
							logicalDeviceBatteryMonitorSim._simStatusExtended.SetMinutesRemainingUntilDischarged((ushort)((TimeSpan)(ref val4)).TotalMinutes);
							if (((LogicalDevice<ILogicalDeviceBatteryMonitorCapability>)(object)logicalDeviceBatteryMonitorSim).DeviceCapability.IsHighResolutionDataSupported)
							{
								logicalDeviceBatteryMonitorSim._simStatusExtended.SetBatteryMonitorTemperatureCelsius(new BatteryMonitorTemperature(BatteryMonitorTemperatureState.Valid, new Nullable<float>(10f)));
							}
							else
							{
								logicalDeviceBatteryMonitorSim._simStatusExtended.SetBatteryMonitorTemperatureCelsius(new BatteryMonitorTemperature(0));
							}
							logicalDeviceBatteryMonitorSim._simStatus.SetBatteryVoltage(logicalDeviceBatteryMonitorSim._simStatus.BatteryVoltage + 0.01f);
							logicalDeviceBatteryMonitorSim._simStatus.SetBatteryCurrent(logicalDeviceBatteryMonitorSim._simStatus.BatteryCurrent + 0.01f);
							LogicalDeviceBatteryMonitorStatus simStatus = logicalDeviceBatteryMonitorSim._simStatus;
							Nullable<byte> item = logicalDeviceBatteryMonitorSim._simStatus.StateOfCharge.Item2;
							Nullable<int> val5 = (item.HasValue ? new Nullable<int>((int)item.GetValueOrDefault()) : default(Nullable<int>));
							int num3 = 0;
							simStatus.SetStateOfCharge((byte)(((val5.GetValueOrDefault() == num3) & val5.HasValue) ? 100u : ((uint)(logicalDeviceBatteryMonitorSim._simStatus.StateOfCharge.Item2.GetValueOrDefault() - 1))));
							item = logicalDeviceBatteryMonitorSim._simStatus.StateOfCharge.Item2;
							val5 = (item.HasValue ? new Nullable<int>((int)item.GetValueOrDefault()) : default(Nullable<int>));
							item = logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.LowStateOfChargeAlertThreshold;
							Nullable<int> val6 = (item.HasValue ? new Nullable<int>((int)item.GetValueOrDefault()) : default(Nullable<int>));
							if ((val5.GetValueOrDefault() < val6.GetValueOrDefault()) & (val5.HasValue & val6.HasValue))
							{
								logicalDeviceBatteryMonitorSim._simStatus.SetLowSoCAlert(active: true, 1);
							}
							else
							{
								logicalDeviceBatteryMonitorSim._simStatus.SetLowSoCAlert(active: false, 0);
							}
							((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)logicalDeviceBatteryMonitorSim).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBatteryMonitorSim._simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBatteryMonitorSim._simStatus).Size);
							((LogicalDevice<LogicalDeviceBatteryMonitorStatus, LogicalDeviceBatteryMonitorStatusExtended, ILogicalDeviceBatteryMonitorCapability>)logicalDeviceBatteryMonitorSim).UpdateDeviceStatusExtended((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBatteryMonitorSim._simStatusExtended).Data, (uint)num2, (byte)0, default(Nullable<DateTime>));
							val3 = ((ILogicalDevicePid<ResetType>)(object)logicalDeviceBatteryMonitorSim.ResetPid).ReadAsync(cancellationToken).GetAwaiter();
							if (!val3.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val3;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<ResetType>, <SimulatorAsync>d__18>(ref val3, ref this);
								return;
							}
							goto IL_02ff;
						}
						break;
						IL_07ec:
						((TaskAwaiter)(ref val2)).GetResult();
						val2 = logicalDeviceBatteryMonitorSim.HourMeterPid.WriteAsync(new BatteryMonitorHourMeter(logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.HourMeter.HourMeterLifetime, logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.HourMeter.HourMeterA), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val2)).IsCompleted)
						{
							num = (<>1__state = 10);
							<>u__2 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SimulatorAsync>d__18>(ref val2, ref this);
							return;
						}
						goto IL_0883;
						IL_0584:
						((TaskAwaiter)(ref val2)).GetResult();
						val2 = logicalDeviceBatteryMonitorSim.VoltageStatsPid.WriteAsync(new BatteryMonitorVoltageStats(logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.MinimumBatteryVoltage, logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.MaximumBatteryVoltage), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val2)).IsCompleted)
						{
							num = (<>1__state = 6);
							<>u__2 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SimulatorAsync>d__18>(ref val2, ref this);
							return;
						}
						goto IL_0608;
						IL_050b:
						((TaskAwaiter)(ref val2)).GetResult();
						val2 = logicalDeviceBatteryMonitorSim.ChargeTimePid.WriteAsync(new BatteryMonitorChargeTime(logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.TimeSinceLastFullCharge), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val2)).IsCompleted)
						{
							num = (<>1__state = 5);
							<>u__2 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SimulatorAsync>d__18>(ref val2, ref this);
							return;
						}
						goto IL_0584;
						IL_0883:
						((TaskAwaiter)(ref val2)).GetResult();
						batteryInstallDate = logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.BatteryInstallDate;
						if (!batteryInstallDate.HasValue)
						{
							val2 = ((ILogicalDevicePid)logicalDeviceBatteryMonitorSim.InstallDatePid).WriteValueAsync(4294967295uL, cancellationToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 11);
								<>u__2 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SimulatorAsync>d__18>(ref val2, ref this);
								return;
							}
							goto IL_0905;
						}
						val2 = logicalDeviceBatteryMonitorSim.InstallDatePid.WriteDateTimeAsync(batteryInstallDate.Value, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val2)).IsCompleted)
						{
							num = (<>1__state = 12);
							<>u__2 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SimulatorAsync>d__18>(ref val2, ref this);
							return;
						}
						goto IL_0978;
						IL_0a63:
						val.GetResult();
						goto IL_0a6b;
						IL_0608:
						((TaskAwaiter)(ref val2)).GetResult();
						val2 = logicalDeviceBatteryMonitorSim.BatteryInformationPid.WriteAsync(new BatteryMonitorBatteryInformation(logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.BatteryCapacity, logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.BatteryCondition, logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.BatteryChemistryType), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val2)).IsCompleted)
						{
							num = (<>1__state = 7);
							<>u__2 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SimulatorAsync>d__18>(ref val2, ref this);
							return;
						}
						goto IL_0697;
						IL_0697:
						((TaskAwaiter)(ref val2)).GetResult();
						val2 = logicalDeviceBatteryMonitorSim.TemperatureOffBoardPid.WriteAsync(new BatteryMonitorTemperatureStats(logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.TemperatureOffBoard.TemperatureCurrent, logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.TemperatureOffBoard.TemperatureLifetimeMin, logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.TemperatureOffBoard.TemperatureLifetimeMax), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val2)).IsCompleted)
						{
							num = (<>1__state = 8);
							<>u__2 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SimulatorAsync>d__18>(ref val2, ref this);
							return;
						}
						goto IL_0741;
						IL_02ff:
						if (val3.GetResult() != ResetType.None)
						{
							logicalDeviceBatteryMonitorSim._simBatteryMonitorStats = MakeDefaultBatteryMonitorStats(((LogicalDevice<ILogicalDeviceBatteryMonitorCapability>)(object)logicalDeviceBatteryMonitorSim).DeviceCapability);
							val2 = ((ILogicalDevicePid<ResetType>)(object)logicalDeviceBatteryMonitorSim.ResetPid).WriteAsync(ResetType.None, cancellationToken).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SimulatorAsync>d__18>(ref val2, ref this);
								return;
							}
							goto IL_037c;
						}
						goto IL_0383;
						IL_0978:
						((TaskAwaiter)(ref val2)).GetResult();
						goto IL_097f;
						IL_0741:
						((TaskAwaiter)(ref val2)).GetResult();
						val2 = logicalDeviceBatteryMonitorSim.TemperatureOnBoardPid.WriteAsync(new BatteryMonitorTemperatureStats(logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.TemperatureOnBoard.TemperatureCurrent, logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.TemperatureOnBoard.TemperatureLifetimeMin, logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.TemperatureOnBoard.TemperatureLifetimeMax), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val2)).IsCompleted)
						{
							num = (<>1__state = 9);
							<>u__2 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SimulatorAsync>d__18>(ref val2, ref this);
							return;
						}
						goto IL_07ec;
						IL_037c:
						((TaskAwaiter)(ref val2)).GetResult();
						goto IL_0383;
						IL_0905:
						((TaskAwaiter)(ref val2)).GetResult();
						goto IL_097f;
						IL_097f:
						val2 = logicalDeviceBatteryMonitorSim.AlertThresholdsPid.WriteAsync(new BatteryMonitorAlertThreshold(logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.LowStateOfChargeAlertThreshold, logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.IdleAlertTimeThreshold), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val2)).IsCompleted)
						{
							num = (<>1__state = 13);
							<>u__2 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SimulatorAsync>d__18>(ref val2, ref this);
							return;
						}
						goto IL_09fd;
						IL_0403:
						((TaskAwaiter)(ref val2)).GetResult();
						val2 = logicalDeviceBatteryMonitorSim.StateOfChargePid.WriteAsync(new BatteryMonitorStateOfCharge(logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.BeforeChargingStarted, logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.AfterChargingStopped), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val2)).IsCompleted)
						{
							num = (<>1__state = 3);
							<>u__2 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SimulatorAsync>d__18>(ref val2, ref this);
							return;
						}
						goto IL_0487;
						IL_0383:
						val2 = logicalDeviceBatteryMonitorSim.SummaryPid.WriteAsync(new BatteryMonitorSummary(logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.Summary.MinimumStateOfChargePercent, (IEnumerable<BatteryChemistryType>)(object)BatteryMonitorSummary.BatteryChemistryTypeDefaultV2), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val2)).IsCompleted)
						{
							num = (<>1__state = 2);
							<>u__2 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SimulatorAsync>d__18>(ref val2, ref this);
							return;
						}
						goto IL_0403;
						IL_0487:
						((TaskAwaiter)(ref val2)).GetResult();
						val2 = logicalDeviceBatteryMonitorSim.ChargeCountsPid.WriteAsync(new BatteryMonitorChargeCounts(logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.NumberOfFullDischarges, logicalDeviceBatteryMonitorSim._simBatteryMonitorStats.NumberOfChargeCycles), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val2)).IsCompleted)
						{
							num = (<>1__state = 4);
							<>u__2 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <SimulatorAsync>d__18>(ref val2, ref this);
							return;
						}
						goto IL_050b;
						IL_09fd:
						((TaskAwaiter)(ref val2)).GetResult();
						val = TaskExtension.TryDelay(1000, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 14);
							<>u__3 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SimulatorAsync>d__18>(ref val, ref this);
							return;
						}
						goto IL_0a63;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<timeRemainingUsed>5__2 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<timeRemainingUsed>5__2 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private const int TickIntervalDelayMs = 1000;

		private readonly LogicalDeviceBatteryMonitorStatus _simStatus = new LogicalDeviceBatteryMonitorStatus();

		private readonly LogicalDeviceBatteryMonitorStatusExtended _simStatusExtended = new LogicalDeviceBatteryMonitorStatusExtended();

		private readonly BackgroundOperation _simulator;

		private BatteryMonitorStats _simBatteryMonitorStats;

		private const uint DelayStatusChangedLogMessageThrottleTimeMs = 60000u;

		private readonly Stopwatch _delayStatusChangedLogMessageThrottleTimer = Stopwatch.StartNew();

		[field: CompilerGenerated]
		public override ILogicalDevicePidEnum<ResetType> ResetPid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public override ILogicalDevicePidDateTime InstallDatePid
		{
			[CompilerGenerated]
			get;
		}

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public LogicalDeviceBatteryMonitorSim(ILogicalDeviceId logicalDeviceId, ILogicalDeviceBatteryMonitorCapability batteryMonitorCapability, ILogicalDeviceService deviceService, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, batteryMonitorCapability, deviceService, isFunctionClassChangeable)
		{
			//IL_0042: Unknown result type (might be due to invalid IL or missing references)
			//IL_004c: Expected O, but got Unknown
			//IL_0065: Unknown result type (might be due to invalid IL or missing references)
			//IL_006f: Expected O, but got Unknown
			//IL_0085: Unknown result type (might be due to invalid IL or missing references)
			//IL_008f: Expected O, but got Unknown
			//IL_00a5: Unknown result type (might be due to invalid IL or missing references)
			//IL_00af: Expected O, but got Unknown
			//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
			//IL_00cb: Expected O, but got Unknown
			//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
			//IL_00e7: Expected O, but got Unknown
			//IL_0113: Unknown result type (might be due to invalid IL or missing references)
			//IL_011d: Expected O, but got Unknown
			//IL_0129: Unknown result type (might be due to invalid IL or missing references)
			//IL_012e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0138: Expected O, but got Unknown
			//IL_014a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0154: Expected O, but got Unknown
			//IL_0166: Unknown result type (might be due to invalid IL or missing references)
			//IL_0170: Expected O, but got Unknown
			//IL_0182: Unknown result type (might be due to invalid IL or missing references)
			//IL_018c: Expected O, but got Unknown
			//IL_01a2: Unknown result type (might be due to invalid IL or missing references)
			//IL_01ac: Expected O, but got Unknown
			//IL_01f2: Unknown result type (might be due to invalid IL or missing references)
			//IL_01fc: Expected O, but got Unknown
			//IL_01f7: Unknown result type (might be due to invalid IL or missing references)
			//IL_0201: Expected O, but got Unknown
			((LogicalDevicePidProxy<ILogicalDevicePidULong>)base.SummaryPid).DevicePid = (ILogicalDevicePidULong)new LogicalDevicePidSimULong(PidExtension.ConvertToPid((Pid)345), 255uL);
			((LogicalDevicePidProxy<ILogicalDevicePidULong>)base.StateOfChargePid).DevicePid = (ILogicalDevicePidULong)new LogicalDevicePidSimULong(PidExtension.ConvertToPid((Pid)346), 281474976710655uL);
			((LogicalDevicePidProxy<ILogicalDevicePidULong>)base.ChargeCountsPid).DevicePid = (ILogicalDevicePidULong)new LogicalDevicePidSimULong(PidExtension.ConvertToPid((Pid)347), 16777215uL);
			((LogicalDevicePidProxy<ILogicalDevicePidULong>)base.ChargeTimePid).DevicePid = (ILogicalDevicePidULong)new LogicalDevicePidSimULong(PidExtension.ConvertToPid((Pid)348), 16777215uL);
			((LogicalDevicePidProxy<ILogicalDevicePidULong>)base.VoltageStatsPid).DevicePid = (ILogicalDevicePidULong)new LogicalDevicePidSimULong(PidExtension.ConvertToPid((Pid)349), 4294967295uL);
			((LogicalDevicePidProxy<ILogicalDevicePidULong>)base.SoftwareVersionPid).DevicePid = (ILogicalDevicePidULong)new LogicalDevicePidSimULong(PidExtension.ConvertToPid((Pid)349), 4294967295uL);
			ResetPid = (ILogicalDevicePidEnum<ResetType>)(object)new LogicalDevicePidSimEnum<ResetType>(PidExtension.ConvertToPid((Pid)350), ResetType.None);
			((LogicalDevicePidProxy<ILogicalDevicePidULong>)base.BatteryInformationPid).DevicePid = (ILogicalDevicePidULong)new LogicalDevicePidSimULong(PidExtension.ConvertToPid((Pid)351), 511uL);
			InstallDatePid = (ILogicalDevicePidDateTime)new LogicalDevicePidSimDateTime(PidExtension.ConvertToPid((Pid)352), UInt48.op_Implicit(4294967295u));
			((LogicalDevicePidProxy<ILogicalDevicePidULong>)base.TemperatureOffBoardPid).DevicePid = (ILogicalDevicePidULong)new LogicalDevicePidSimULong(PidExtension.ConvertToPid((Pid)351), 0uL);
			((LogicalDevicePidProxy<ILogicalDevicePidULong>)base.TemperatureOnBoardPid).DevicePid = (ILogicalDevicePidULong)new LogicalDevicePidSimULong(PidExtension.ConvertToPid((Pid)351), 0uL);
			((LogicalDevicePidProxy<ILogicalDevicePidULong>)base.HourMeterPid).DevicePid = (ILogicalDevicePidULong)new LogicalDevicePidSimULong(PidExtension.ConvertToPid((Pid)351), 0uL);
			((LogicalDevicePidProxy<ILogicalDevicePidULong>)base.AlertThresholdsPid).DevicePid = (ILogicalDevicePidULong)new LogicalDevicePidSimULong(PidExtension.ConvertToPid((Pid)353), 65535uL);
			_simBatteryMonitorStats = MakeDefaultBatteryMonitorStats(((LogicalDevice<ILogicalDeviceBatteryMonitorCapability>)(object)this).DeviceCapability);
			_simStatus.SetBatteryVoltage(12f);
			_simStatus.SetBatteryCurrent(-1.25f);
			_simStatus.SetStateOfCharge(50);
			_simulator = new BackgroundOperation(new BackgroundOperationFunc(SimulatorAsync));
			_simulator.Start();
		}

		public override void UpdateDeviceOnline(bool canOnline)
		{
		}

		protected override void DebugUpdateDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, uint dataLength, string optionalText = "")
		{
			if (_delayStatusChangedLogMessageThrottleTimer.ElapsedMilliseconds >= 60000)
			{
				((LogicalDevice<LogicalDeviceBatteryMonitorStatus, ILogicalDeviceBatteryMonitorCapability>)(object)this).DebugUpdateDeviceStatusChanged(oldStatusData, statusData, dataLength, String.Format("Skipped debug messages over {0}ms", (object)(UInt32)60000));
				_delayStatusChangedLogMessageThrottleTimer.Restart();
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task SimulatorAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SimulatorAsync>d__18 <SimulatorAsync>d__ = default(<SimulatorAsync>d__18);
			<SimulatorAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SimulatorAsync>d__.<>4__this = this;
			<SimulatorAsync>d__.cancellationToken = cancellationToken;
			<SimulatorAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Start<<SimulatorAsync>d__18>(ref <SimulatorAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Task;
		}

		private static BatteryMonitorStats MakeDefaultBatteryMonitorStats(ILogicalDeviceBatteryMonitorCapability deviceCapability)
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			//IL_0013: Unknown result type (might be due to invalid IL or missing references)
			//IL_0028: Unknown result type (might be due to invalid IL or missing references)
			//IL_003e: Unknown result type (might be due to invalid IL or missing references)
			//IL_005a: Unknown result type (might be due to invalid IL or missing references)
			//IL_006f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0085: Unknown result type (might be due to invalid IL or missing references)
			//IL_00b7: Unknown result type (might be due to invalid IL or missing references)
			//IL_00bf: Unknown result type (might be due to invalid IL or missing references)
			//IL_00cd: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d5: Unknown result type (might be due to invalid IL or missing references)
			//IL_00dd: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ea: Unknown result type (might be due to invalid IL or missing references)
			//IL_00f2: Unknown result type (might be due to invalid IL or missing references)
			//IL_00fa: Unknown result type (might be due to invalid IL or missing references)
			//IL_0106: Unknown result type (might be due to invalid IL or missing references)
			//IL_0111: Unknown result type (might be due to invalid IL or missing references)
			//IL_011f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0124: Unknown result type (might be due to invalid IL or missing references)
			//IL_012e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0138: Unknown result type (might be due to invalid IL or missing references)
			//IL_0140: Unknown result type (might be due to invalid IL or missing references)
			//IL_0153: Unknown result type (might be due to invalid IL or missing references)
			//IL_0158: Unknown result type (might be due to invalid IL or missing references)
			//IL_015f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0165: Unknown result type (might be due to invalid IL or missing references)
			//IL_0174: Unknown result type (might be due to invalid IL or missing references)
			//IL_0179: Unknown result type (might be due to invalid IL or missing references)
			//IL_0181: Unknown result type (might be due to invalid IL or missing references)
			//IL_018f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0194: Unknown result type (might be due to invalid IL or missing references)
			Random val = new Random();
			BatteryMonitorTemperatureStats temperatureOffBoard = new BatteryMonitorTemperatureStats(new BatteryMonitorTemperature(BatteryMonitorTemperatureState.Valid, new Nullable<float>((float)val.Next(8, 30))), new BatteryMonitorTemperature(BatteryMonitorTemperatureState.Valid, new Nullable<float>((float)val.Next(-4, 6))), new BatteryMonitorTemperature(BatteryMonitorTemperatureState.Valid, new Nullable<float>((float)val.Next(40, 90))));
			BatteryMonitorTemperatureStats temperatureOnBoard = new BatteryMonitorTemperatureStats(new BatteryMonitorTemperature(BatteryMonitorTemperatureState.Valid, new Nullable<float>((float)val.Next(8, 30))), new BatteryMonitorTemperature(BatteryMonitorTemperatureState.Valid, new Nullable<float>((float)val.Next(-4, 6))), new BatteryMonitorTemperature(BatteryMonitorTemperatureState.Valid, new Nullable<float>((float)val.Next(40, 90))));
			IReadOnlyList<BatteryChemistryType> supportedChemistryTypes = (deviceCapability.IsHighResolutionDataSupported ? BatteryMonitorSummary.BatteryChemistryTypeDefaultV2 : BatteryMonitorSummary.BatteryChemistryTypeDefaultV1);
			BatteryChemistryType batteryChemistryType = ((!deviceCapability.IsHighResolutionDataSupported) ? BatteryChemistryType.LeadAcid : BatteryChemistryType.LeadAcidGel);
			return new BatteryMonitorStats(DateTime.Now, new BatteryMonitorSummary(new Nullable<byte>((byte)60), (IEnumerable<BatteryChemistryType>)(object)supportedChemistryTypes), new BatteryMonitorStatsStateOfCharge(new Nullable<byte>((byte)10), new Nullable<byte>((byte)20), new Nullable<byte>((byte)30)), new BatteryMonitorStatsStateOfCharge(new Nullable<byte>((byte)40), new Nullable<byte>((byte)50), new Nullable<byte>((byte)60)), new Nullable<byte>((byte)5), new Nullable<ushort>((ushort)1000), new Nullable<TimeSpan>(TimeSpan.FromDays(1.0)), new Nullable<float>(5.2f), new Nullable<float>(16.4f), new Nullable<ushort>((ushort)14), BatteryCondition.Refurbished, batteryChemistryType, temperatureOffBoard, temperatureOnBoard, new BatteryMonitorHourMeter(new Nullable<TimeSpan>(TimeSpan.FromHours(2.0)), default(Nullable<TimeSpan>)), new Nullable<DateTime>(new DateTime(2020, 3, 21)), new Nullable<byte>((byte)12), new Nullable<TimeSpan>(TimeSpan.FromMinutes(90.0)), new SoftwareVersion(1, 2, 123));
		}

		public override void Dispose(bool disposing)
		{
			((LogicalDevice<LogicalDeviceBatteryMonitorStatus, LogicalDeviceBatteryMonitorStatusExtended, ILogicalDeviceBatteryMonitorCapability>)this).Dispose(disposing);
			_simulator.Stop();
		}
	}
	public class LogicalDeviceBatteryMonitorStatus : LogicalDeviceStatusPacketMutable, ILogicalDeviceStatus<LogicalDeviceBatteryMonitorStatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		public const int MinimumStatusPacketSize = 8;

		private const int BatteryVoltageIndex = 0;

		private const int BatteryCurrentIndex = 2;

		private const int StateOfChargeIndex = 5;

		private const int LowSoCAlertIndex = 6;

		private const int BatteryIdleAlertIndex = 7;

		public const byte InvalidStateOfCharge = 254;

		public const byte CalculatingStateOfCharge = 255;

		public const byte StateOfChargePercentMask = 127;

		public const byte StateOfChargeEstimateBitMask = 128;

		public const byte StateOfChargePercentMin = 0;

		public const byte StateOfChargePercentMax = 100;

		private const byte AlertActiveFlag = 128;

		private const byte AlertActiveBitmask = 128;

		private const byte AlertCountBitmask = 127;

		public float BatteryVoltage => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetFixedPoint((FixedPointType)2, 0u);

		public float BatteryCurrent => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetFixedPointSigned16X8(2u);

		public ValueTuple<BatteryStateOfChargeState, Nullable<byte>> StateOfCharge
		{
			get
			{
				//IL_000b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0011: Unknown result type (might be due to invalid IL or missing references)
				//IL_0012: Unknown result type (might be due to invalid IL or missing references)
				//IL_0066: Unknown result type (might be due to invalid IL or missing references)
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0077: Unknown result type (might be due to invalid IL or missing references)
				//IL_007c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0084: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_004c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0051: Unknown result type (might be due to invalid IL or missing references)
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return new ValueTuple<BatteryStateOfChargeState, Nullable<byte>>(BatteryStateOfChargeState.Unknown, default(Nullable<byte>));
				}
				byte b = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[5];
				if (b >= 128)
				{
					if (b <= 228)
					{
						return new ValueTuple<BatteryStateOfChargeState, Nullable<byte>>(BatteryStateOfChargeState.ValueStabilizing, new Nullable<byte>((byte)(b & 0x7F)));
					}
					switch (b)
					{
					case 255:
						return new ValueTuple<BatteryStateOfChargeState, Nullable<byte>>(BatteryStateOfChargeState.Computing, new Nullable<byte>(b));
					case 254:
						return new ValueTuple<BatteryStateOfChargeState, Nullable<byte>>(BatteryStateOfChargeState.Invalid, new Nullable<byte>(b));
					}
				}
				else if (b <= 100)
				{
					return new ValueTuple<BatteryStateOfChargeState, Nullable<byte>>(BatteryStateOfChargeState.Value, new Nullable<byte>(b));
				}
				return new ValueTuple<BatteryStateOfChargeState, Nullable<byte>>(BatteryStateOfChargeState.Invalid, new Nullable<byte>(b));
			}
		}

		public bool LowSoCAlertActive => (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[6] & 0x80) == 128;

		public byte LowSoCAlertEventCount => (byte)(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[6] & 0x7F);

		public bool BatteryIdleAlertActive => (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[7] & 0x80) == 128;

		public byte BatteryIdleAlertEventCount => (byte)(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[7] & 0x7F);

		public void SetBatteryVoltage(float voltage)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetFixedPoint((FixedPointType)2, voltage, 0u);
		}

		public void SetBatteryCurrent(float current)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetFixedPointSigned16X8(current, 2u);
		}

		public void SetStateOfCharge(byte soc)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, soc, 5);
		}

		public void SetLowSoCAlert(bool active, byte count)
		{
			byte b = (byte)(count & 0x7F);
			if (active)
			{
				b |= 0x80;
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b, 6);
		}

		public void SetBatteryIdleAlert(bool active, byte count)
		{
			byte b = (byte)(count & 0x7F);
			if (active)
			{
				b |= 0x80;
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b, 7);
		}

		public LogicalDeviceBatteryMonitorStatus()
			: base(8u)
		{
		}

		public LogicalDeviceBatteryMonitorStatus(LogicalDeviceBatteryMonitorStatus originalStatus)
		{
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalStatus).Data;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(data, data.Length, false);
		}

		public LogicalDeviceBatteryMonitorStatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceBatteryMonitorStatusSerializable(this);
		}
	}
	public class LogicalDeviceBatteryMonitorStatusExtended : LogicalDeviceStatusPacketMutableExtended, ILogicalDeviceStatusExtended<LogicalDeviceBatteryMonitorStatusExtendedSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		public const int MinimumStatusPacketSize = 2;

		public const int MinutesRemainingUntilDischargedIndex = 0;

		public const int BatteryTerminalTemperatureIndex = 2;

		private const ushort ComputingTimeRemainingUntilDischarged = 65535;

		public const ushort InvalidTimeRemainingUntilDischarged = 65534;

		private const ushort InfiniteTimeRemainingUntilDischarged = 65533;

		public const ushort TimeRemainingMask = 32767;

		public const ushort TimeRemainingEstimateBitMask = 32768;

		public const ushort TimeRemainingMinutesMin = 0;

		public const ushort TimeRemainingMinutesMax = 30240;

		public ValueTuple<BatteryTimeRemainingState, Nullable<TimeSpan>> TimeRemainingUntilDischarged
		{
			get
			{
				//IL_000b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0011: Unknown result type (might be due to invalid IL or missing references)
				//IL_0012: Unknown result type (might be due to invalid IL or missing references)
				//IL_008e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0093: Unknown result type (might be due to invalid IL or missing references)
				//IL_0098: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ac: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ba: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
				//IL_007b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				//IL_0085: Unknown result type (might be due to invalid IL or missing references)
				//IL_006d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0073: Unknown result type (might be due to invalid IL or missing references)
				//IL_0074: Unknown result type (might be due to invalid IL or missing references)
				//IL_005d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0063: Unknown result type (might be due to invalid IL or missing references)
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return new ValueTuple<BatteryTimeRemainingState, Nullable<TimeSpan>>(BatteryTimeRemainingState.Unknown, default(Nullable<TimeSpan>));
				}
				ushort valueUInt = ArrayExtension.GetValueUInt16(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, 0, (Endian)0);
				if (valueUInt >= 32768)
				{
					if (valueUInt <= 63008)
					{
						return new ValueTuple<BatteryTimeRemainingState, Nullable<TimeSpan>>(BatteryTimeRemainingState.ValueStabilizing, new Nullable<TimeSpan>(TimeSpan.FromMinutes((double)(valueUInt & 0x7FFF))));
					}
					switch (valueUInt)
					{
					case 65535:
						return new ValueTuple<BatteryTimeRemainingState, Nullable<TimeSpan>>(BatteryTimeRemainingState.Computing, default(Nullable<TimeSpan>));
					case 65534:
						return new ValueTuple<BatteryTimeRemainingState, Nullable<TimeSpan>>(BatteryTimeRemainingState.Invalid, default(Nullable<TimeSpan>));
					case 65533:
						return new ValueTuple<BatteryTimeRemainingState, Nullable<TimeSpan>>(BatteryTimeRemainingState.Infinite, new Nullable<TimeSpan>(TimeSpan.MinValue));
					}
				}
				else if (valueUInt <= 30240)
				{
					return new ValueTuple<BatteryTimeRemainingState, Nullable<TimeSpan>>(BatteryTimeRemainingState.Value, new Nullable<TimeSpan>(TimeSpan.FromMinutes((double)(int)valueUInt)));
				}
				return new ValueTuple<BatteryTimeRemainingState, Nullable<TimeSpan>>(BatteryTimeRemainingState.Invalid, new Nullable<TimeSpan>(TimeSpan.FromMinutes((double)(int)valueUInt)));
			}
		}

		[field: CompilerGenerated]
		public bool HasBatteryTerminalTemperature
		{
			[CompilerGenerated]
			get;
			[CompilerGenerated]
			internal set;
		}

		public sbyte BatteryTerminalTemperatureCelsiusRaw
		{
			get
			{
				if (!HasBatteryTerminalTemperature)
				{
					return 0;
				}
				return (sbyte)((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetByte((byte)255, 2);
			}
		}

		public BatteryMonitorTemperature BatteryMonitorTemperatureCelsius
		{
			get
			{
				//IL_000b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0011: Unknown result type (might be due to invalid IL or missing references)
				if (!HasBatteryTerminalTemperature)
				{
					return new BatteryMonitorTemperature(BatteryMonitorTemperatureState.NotSupported, default(Nullable<float>));
				}
				return new BatteryMonitorTemperature(BatteryTerminalTemperatureCelsiusRaw);
			}
		}

		public LogicalDeviceBatteryMonitorStatusExtended()
			: base(2u)
		{
		}

		public LogicalDeviceBatteryMonitorStatusExtended(LogicalDeviceBatteryMonitorStatusExtended originalStatus)
		{
			//IL_001a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0020: Unknown result type (might be due to invalid IL or missing references)
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalStatus).Data;
			((LogicalDeviceStatusPacketMutableExtended)this).Update((IReadOnlyList<byte>)(object)data, (uint)data.Length, ((LogicalDeviceStatusPacketMutableExtended)originalStatus).ExtendedByte, default(Nullable<DateTime>));
		}

		public void SetMinutesRemainingUntilDischarged(ushort minutesRemaining)
		{
			ArrayExtension.SetValueUInt16(((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data, minutesRemaining, 0, (Endian)0);
		}

		public void SetBatteryTerminalTemperatureCelsiusRaw(sbyte temp)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)temp, 2);
		}

		public void SetBatteryMonitorTemperatureCelsius(BatteryMonitorTemperature temperature)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)temperature.ToRawCelsiusValue, 2);
		}

		public LogicalDeviceBatteryMonitorStatusExtendedSerializable CopyAsSerializable()
		{
			return new LogicalDeviceBatteryMonitorStatusExtendedSerializable(this);
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceBatteryMonitorStatusExtendedSerializable : LogicalDeviceStatusExtendedSerializableBase<LogicalDeviceBatteryMonitorStatusExtendedSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceBatteryMonitorStatusExtendedSerializable);
			}
		}

		[JsonProperty]
		public byte EnhancedByte
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		public Nullable<TimeSpan> TimeRemainingUntilDischarged
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public sbyte BatteryMonitorTemperatureCelsiusRaw
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceBatteryMonitorStatusExtendedSerializable(byte enhancedByte, Nullable<TimeSpan> timeRemainingUntilDischarged, sbyte batteryMonitorTemperatureRaw)
		{
			//IL_000e: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			EnhancedByte = enhancedByte;
			TimeRemainingUntilDischarged = timeRemainingUntilDischarged;
			BatteryMonitorTemperatureCelsiusRaw = batteryMonitorTemperatureRaw;
		}

		public LogicalDeviceBatteryMonitorStatusExtendedSerializable(LogicalDeviceBatteryMonitorStatusExtended batteryMonitorStatusExtended)
			: this(((LogicalDeviceStatusPacketMutableExtended)batteryMonitorStatusExtended).ExtendedByte, batteryMonitorStatusExtended.TimeRemainingUntilDischarged.Item2, batteryMonitorStatusExtended.BatteryTerminalTemperatureCelsiusRaw)
		{
		}//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_000d: Unknown result type (might be due to invalid IL or missing references)


		public override IReadOnlyDictionary<byte, byte[]> MakeRawDataExtended()
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0023: Unknown result type (might be due to invalid IL or missing references)
			//IL_0028: Unknown result type (might be due to invalid IL or missing references)
			LogicalDeviceBatteryMonitorStatusExtended logicalDeviceBatteryMonitorStatusExtended = new LogicalDeviceBatteryMonitorStatusExtended();
			Nullable<TimeSpan> timeRemainingUntilDischarged = TimeRemainingUntilDischarged;
			double num;
			if (!timeRemainingUntilDischarged.HasValue)
			{
				num = 65534.0;
			}
			else
			{
				TimeSpan valueOrDefault = timeRemainingUntilDischarged.GetValueOrDefault();
				num = ((TimeSpan)(ref valueOrDefault)).TotalMinutes;
			}
			double num2 = num;
			logicalDeviceBatteryMonitorStatusExtended.SetMinutesRemainingUntilDischarged((ushort)num2);
			logicalDeviceBatteryMonitorStatusExtended.SetBatteryTerminalTemperatureCelsiusRaw(BatteryMonitorTemperatureCelsiusRaw);
			return (IReadOnlyDictionary<byte, byte[]>)(object)new Dictionary<byte, byte[]> { [EnhancedByte] = ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBatteryMonitorStatusExtended).CopyCurrentData() };
		}

		public static LogicalDeviceBatteryMonitorStatusExtendedSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceBatteryMonitorStatusExtended logicalDeviceBatteryMonitorStatusExtended = new LogicalDeviceBatteryMonitorStatusExtended();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBatteryMonitorStatusExtended).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBatteryMonitorStatusExtended).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBatteryMonitorStatusExtended).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBatteryMonitorStatusExtended).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBatteryMonitorStatusExtended).Update(rawData, rawData.Length, false);
			return new LogicalDeviceBatteryMonitorStatusExtendedSerializable(logicalDeviceBatteryMonitorStatusExtended);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceBatteryMonitorStatusExtendedSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusExtendedSerializableBase<LogicalDeviceBatteryMonitorStatusExtendedSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			//IL_004a: Unknown result type (might be due to invalid IL or missing references)
			//IL_004f: Unknown result type (might be due to invalid IL or missing references)
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("EnhancedByte = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref EnhancedByte)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", TimeRemainingUntilDischarged = ");
			builder.Append(((Object)TimeRemainingUntilDischarged/*cast due to .constrained prefix*/).ToString());
			builder.Append(", BatteryMonitorTemperatureCelsiusRaw = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<sbyte, SByte>(ref BatteryMonitorTemperatureCelsiusRaw)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			//IL_0029: Unknown result type (might be due to invalid IL or missing references)
			return ((base.GetHashCode() * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(EnhancedByte)) * -1521134295 + EqualityComparer<Nullable<TimeSpan>>.Default.GetHashCode(TimeRemainingUntilDischarged)) * -1521134295 + EqualityComparer<sbyte>.Default.GetHashCode(BatteryMonitorTemperatureCelsiusRaw);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusExtendedSerializableBase<LogicalDeviceBatteryMonitorStatusExtendedSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceBatteryMonitorStatusExtendedSerializable(LogicalDeviceBatteryMonitorStatusExtendedSerializable original)
			: base((LogicalDeviceStatusExtendedSerializableBase<LogicalDeviceBatteryMonitorStatusExtendedSerializable>)original)
		{
			//IL_0015: Unknown result type (might be due to invalid IL or missing references)
			//IL_001a: Unknown result type (might be due to invalid IL or missing references)
			EnhancedByte = original.EnhancedByte;
			TimeRemainingUntilDischarged = original.TimeRemainingUntilDischarged;
			BatteryMonitorTemperatureCelsiusRaw = original.BatteryMonitorTemperatureCelsiusRaw;
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceBatteryMonitorStatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceBatteryMonitorStatusSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceBatteryMonitorStatusSerializable);
			}
		}

		[JsonProperty]
		public float BatteryVoltage
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public float BatteryCurrent
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty(/*Could not decode attribute arguments.*/)]
		public Nullable<byte> StateOfCharge
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool LowSoCAlertActive
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte LowSoCAlertEventCount
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool BatteryIdleAlertActive
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public byte BatteryIdleAlertEventCount
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceBatteryMonitorStatusSerializable(float batteryVoltage, float batteryCurrent, Nullable<byte> stateOfCharge, bool lowSoCAlertActive, byte lowSoCAlertEventCount, bool batteryIdleAlertActive, byte batteryIdleAlertEventCount)
		{
			//IL_0015: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			BatteryVoltage = batteryVoltage;
			BatteryCurrent = batteryCurrent;
			StateOfCharge = stateOfCharge;
			LowSoCAlertActive = lowSoCAlertActive;
			LowSoCAlertEventCount = lowSoCAlertEventCount;
			BatteryIdleAlertActive = batteryIdleAlertActive;
			BatteryIdleAlertEventCount = batteryIdleAlertEventCount;
		}

		public LogicalDeviceBatteryMonitorStatusSerializable(LogicalDeviceBatteryMonitorStatus batteryMonitorStatus)
			: this(batteryMonitorStatus.BatteryVoltage, batteryMonitorStatus.BatteryCurrent, batteryMonitorStatus.StateOfCharge.Item2, batteryMonitorStatus.LowSoCAlertActive, batteryMonitorStatus.LowSoCAlertEventCount, batteryMonitorStatus.BatteryIdleAlertActive, batteryMonitorStatus.BatteryIdleAlertEventCount)
		{
		}//IL_000e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)


		public override byte[] MakeRawData()
		{
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0024: Unknown result type (might be due to invalid IL or missing references)
			LogicalDeviceBatteryMonitorStatus logicalDeviceBatteryMonitorStatus = new LogicalDeviceBatteryMonitorStatus();
			logicalDeviceBatteryMonitorStatus.SetBatteryVoltage(BatteryVoltage);
			logicalDeviceBatteryMonitorStatus.SetBatteryCurrent(BatteryCurrent);
			logicalDeviceBatteryMonitorStatus.SetStateOfCharge(StateOfCharge.GetValueOrDefault((byte)254));
			logicalDeviceBatteryMonitorStatus.SetLowSoCAlert(LowSoCAlertActive, LowSoCAlertEventCount);
			logicalDeviceBatteryMonitorStatus.SetBatteryIdleAlert(BatteryIdleAlertActive, BatteryIdleAlertEventCount);
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBatteryMonitorStatus).CopyCurrentData();
		}

		public static LogicalDeviceBatteryMonitorStatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceBatteryMonitorStatus logicalDeviceBatteryMonitorStatus = new LogicalDeviceBatteryMonitorStatus();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBatteryMonitorStatus).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBatteryMonitorStatus).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBatteryMonitorStatus).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBatteryMonitorStatus).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceBatteryMonitorStatus).Update(rawData, rawData.Length, false);
			return new LogicalDeviceBatteryMonitorStatusSerializable(logicalDeviceBatteryMonitorStatus);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceBatteryMonitorStatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceBatteryMonitorStatusSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			//IL_0071: Unknown result type (might be due to invalid IL or missing references)
			//IL_0076: Unknown result type (might be due to invalid IL or missing references)
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("BatteryVoltage = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref BatteryVoltage)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", BatteryCurrent = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<float, Single>(ref BatteryCurrent)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", StateOfCharge = ");
			builder.Append(((Object)StateOfCharge/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LowSoCAlertActive = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref LowSoCAlertActive)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LowSoCAlertEventCount = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref LowSoCAlertEventCount)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", BatteryIdleAlertActive = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref BatteryIdleAlertActive)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", BatteryIdleAlertEventCount = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<byte, Byte>(ref BatteryIdleAlertEventCount)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			//IL_0040: Unknown result type (might be due to invalid IL or missing references)
			return ((((((base.GetHashCode() * -1521134295 + EqualityComparer<float>.Default.GetHashCode(BatteryVoltage)) * -1521134295 + EqualityComparer<float>.Default.GetHashCode(BatteryCurrent)) * -1521134295 + EqualityComparer<Nullable<byte>>.Default.GetHashCode(StateOfCharge)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(LowSoCAlertActive)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(LowSoCAlertEventCount)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(BatteryIdleAlertActive)) * -1521134295 + EqualityComparer<byte>.Default.GetHashCode(BatteryIdleAlertEventCount);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceBatteryMonitorStatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceBatteryMonitorStatusSerializable(LogicalDeviceBatteryMonitorStatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceBatteryMonitorStatusSerializable>)original)
		{
			//IL_0021: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			BatteryVoltage = original.BatteryVoltage;
			BatteryCurrent = original.BatteryCurrent;
			StateOfCharge = original.StateOfCharge;
			LowSoCAlertActive = original.LowSoCAlertActive;
			LowSoCAlertEventCount = original.LowSoCAlertEventCount;
			BatteryIdleAlertActive = original.BatteryIdleAlertActive;
			BatteryIdleAlertEventCount = original.BatteryIdleAlertEventCount;
		}
	}
}
namespace OneControl.Devices.BatteryMonitor.PidProxy
{
	public readonly struct BatteryMonitorAlertThreshold : ValueType
	{
		[field: CompilerGenerated]
		public Nullable<byte> LowStateOfChargeAlertThreshold
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public Nullable<TimeSpan> IdleAlertTimeThreshold
		{
			[CompilerGenerated]
			get;
		}

		public BatteryMonitorAlertThreshold(Nullable<byte> lowStateOfChargeAlertThreshold, Nullable<TimeSpan> idleAlertTimeThreshold)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			//IL_0009: Unknown result type (might be due to invalid IL or missing references)
			LowStateOfChargeAlertThreshold = lowStateOfChargeAlertThreshold;
			IdleAlertTimeThreshold = idleAlertTimeThreshold;
		}

		public static BatteryMonitorAlertThreshold MakeFactoryReset()
		{
			//IL_0003: Unknown result type (might be due to invalid IL or missing references)
			//IL_0011: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			return new BatteryMonitorAlertThreshold(new Nullable<byte>((byte)20), new Nullable<TimeSpan>(TimeSpan.FromHours(1.0)));
		}
	}
	public class LogicalDevicePidProxyAlertThreshold : LogicalDevicePidProxy<ILogicalDevicePidULong>, ILogicalDevicePid<BatteryMonitorAlertThreshold>, ILogicalDevicePid
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ReadAsync>d__13 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorAlertThreshold> <>t__builder;

			public LogicalDevicePidProxyAlertThreshold <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_0079: Expected O, but got Unknown
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyAlertThreshold logicalDevicePidProxyAlertThreshold = <>4__this;
				BatteryMonitorAlertThreshold result;
				try
				{
					TaskAwaiter<ulong> val;
					if (num != 0)
					{
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyAlertThreshold).ReadValueAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <ReadAsync>d__13>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ulong>);
						num = (<>1__state = -1);
					}
					result = Decode(val.GetResult());
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <WriteAsync>d__14 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDevicePidProxyAlertThreshold <>4__this;

			public BatteryMonitorAlertThreshold value;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0091: Expected O, but got Unknown
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyAlertThreshold logicalDevicePidProxyAlertThreshold = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						if (((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyAlertThreshold).IsReadOnly)
						{
							throw new LogicalDevicePidValueWriteNotSupportedException(((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyAlertThreshold).PropertyId);
						}
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyAlertThreshold).WriteValueAsync(Encode(value), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <WriteAsync>d__14>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const string LogTag = "LogicalDevicePidProxyBatteryInformation";

		private const int MinLowStateOfChargeAlertThresholdPosition = 1;

		private const int MaxLowStateOfChargeAlertThresholdPosition = 100;

		private const byte LowStateOfChargeAlertThresholdDefault = 50;

		private const byte IdleAlertTimeThresholdDefault = 144;

		internal const float IdleAlertTimeThresholdBitPerHour = 0.5f;

		internal const float MinutesInHour = 60f;

		internal static readonly BitPositionValue64 LowStateOfChargeAlertThresholdPosition = new BitPositionValue64(255uL, 0, 1);

		internal static readonly BitPositionValue64 IdleAlertTimeThresholdPosition = new BitPositionValue64(65280uL, 0, 1);

		public LogicalDevicePidProxyAlertThreshold(ILogicalDevicePidULong devicePid = null)
			: base(devicePid)
		{
		}

		public LogicalDevicePidProxyAlertThreshold(ILogicalDevice logicalDevice, Pid pid, LogicalDeviceSessionType writeAccess = (LogicalDeviceSessionType)0)
			: this((ILogicalDevicePidULong)new LogicalDevicePidULong(logicalDevice, PidExtension.ConvertToPid(pid), writeAccess, (Func<ulong, bool>)null, 72057594037927935uL))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_001d: Expected O, but got Unknown


		public static BatteryMonitorAlertThreshold Decode(ulong value)
		{
			//IL_0037: Unknown result type (might be due to invalid IL or missing references)
			//IL_003c: Unknown result type (might be due to invalid IL or missing references)
			//IL_003d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0042: Unknown result type (might be due to invalid IL or missing references)
			//IL_0043: Unknown result type (might be due to invalid IL or missing references)
			byte num = (byte)MathCommon.Clamp((float)((BitPositionValue64)(ref LowStateOfChargeAlertThresholdPosition)).DecodeValue(value), 1f, 100f);
			return new BatteryMonitorAlertThreshold(idleAlertTimeThreshold: new Nullable<TimeSpan>(TimeSpan.FromMinutes((double)((float)(int)(byte)((BitPositionValue64)(ref IdleAlertTimeThresholdPosition)).DecodeValue(value) * 0.5f * 60f))), lowStateOfChargeAlertThreshold: new Nullable<byte>(num));
		}

		public static ulong Encode(BatteryMonitorAlertThreshold alertThreshold)
		{
			//IL_000a: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0023: Unknown result type (might be due to invalid IL or missing references)
			//IL_0028: Unknown result type (might be due to invalid IL or missing references)
			//IL_0040: Unknown result type (might be due to invalid IL or missing references)
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			//IL_005c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0036: Unknown result type (might be due to invalid IL or missing references)
			//IL_003c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0061: Unknown result type (might be due to invalid IL or missing references)
			ulong num = 0uL;
			num = ((BitPositionValue64)(ref LowStateOfChargeAlertThresholdPosition)).EncodeValue((ulong)alertThreshold.LowStateOfChargeAlertThreshold.GetValueOrDefault((byte)50), num);
			Nullable<TimeSpan> idleAlertTimeThreshold = alertThreshold.IdleAlertTimeThreshold;
			? val;
			if (!idleAlertTimeThreshold.HasValue)
			{
				val = default(Nullable<double>);
			}
			else
			{
				TimeSpan valueOrDefault = idleAlertTimeThreshold.GetValueOrDefault();
				val = new Nullable<double>(((TimeSpan)(ref valueOrDefault)).TotalMinutes / 0.5 / 60.0);
			}
			Nullable<double> val2 = (Nullable<double>)val;
			return ((BitPositionValue64)(ref IdleAlertTimeThresholdPosition)).EncodeValue((ulong)val2.GetValueOrDefault(144.0), num);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<BatteryMonitorAlertThreshold> ReadAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ReadAsync>d__13 <ReadAsync>d__ = default(<ReadAsync>d__13);
			<ReadAsync>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorAlertThreshold>.Create();
			<ReadAsync>d__.<>4__this = this;
			<ReadAsync>d__.cancellationToken = cancellationToken;
			<ReadAsync>d__.<>1__state = -1;
			<ReadAsync>d__.<>t__builder.Start<<ReadAsync>d__13>(ref <ReadAsync>d__);
			return <ReadAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task WriteAsync(BatteryMonitorAlertThreshold value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<WriteAsync>d__14 <WriteAsync>d__ = default(<WriteAsync>d__14);
			<WriteAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<WriteAsync>d__.<>4__this = this;
			<WriteAsync>d__.value = value;
			<WriteAsync>d__.cancellationToken = cancellationToken;
			<WriteAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Start<<WriteAsync>d__14>(ref <WriteAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Task;
		}
	}
	public readonly struct BatteryMonitorBatteryInformation : ValueType
	{
		[field: CompilerGenerated]
		public Nullable<ushort> CapacityAmpHours
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public BatteryCondition Condition
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public BatteryChemistryType ChemistryType
		{
			[CompilerGenerated]
			get;
		}

		public BatteryMonitorBatteryInformation(Nullable<ushort> capacityAmpHours, BatteryCondition condition, BatteryChemistryType chemistryType)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			CapacityAmpHours = capacityAmpHours;
			Condition = condition;
			ChemistryType = chemistryType;
		}

		public static BatteryMonitorBatteryInformation MakeFactoryReset()
		{
			//IL_0005: Unknown result type (might be due to invalid IL or missing references)
			return new BatteryMonitorBatteryInformation(new Nullable<ushort>((ushort)65535), BatteryCondition.New, BatteryChemistryType.LeadAcid);
		}
	}
	public class LogicalDevicePidProxyBatteryInformation : LogicalDevicePidProxy<ILogicalDevicePidULong>, ILogicalDevicePid<BatteryMonitorBatteryInformation>, ILogicalDevicePid
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ReadAsync>d__9 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorBatteryInformation> <>t__builder;

			public LogicalDevicePidProxyBatteryInformation <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_0079: Expected O, but got Unknown
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyBatteryInformation logicalDevicePidProxyBatteryInformation = <>4__this;
				BatteryMonitorBatteryInformation result;
				try
				{
					TaskAwaiter<ulong> val;
					if (num != 0)
					{
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyBatteryInformation).ReadValueAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <ReadAsync>d__9>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ulong>);
						num = (<>1__state = -1);
					}
					result = Decode(val.GetResult());
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <WriteAsync>d__10 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDevicePidProxyBatteryInformation <>4__this;

			public BatteryMonitorBatteryInformation value;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0091: Expected O, but got Unknown
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyBatteryInformation logicalDevicePidProxyBatteryInformation = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						if (((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyBatteryInformation).IsReadOnly)
						{
							throw new LogicalDevicePidValueWriteNotSupportedException(((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyBatteryInformation).PropertyId);
						}
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyBatteryInformation).WriteValueAsync(Encode(value), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <WriteAsync>d__10>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const string LogTag = "LogicalDevicePidProxyBatteryInformation";

		internal const ushort UnknownBatteryCapacity = 65535;

		internal static readonly BitPositionValue64 BatteryCapacityPosition = new BitPositionValue64(65535uL, 0, 1);

		internal static readonly BitPositionValue64 BatteryConditionPosition = new BitPositionValue64(16711680uL, 0, 1);

		internal static readonly BitPositionValue64 BatteryChemistryTypePosition = new BitPositionValue64(4278190080uL, 0, 1);

		public LogicalDevicePidProxyBatteryInformation(ILogicalDevicePidULong devicePid = null)
			: base(devicePid)
		{
		}

		public LogicalDevicePidProxyBatteryInformation(ILogicalDevice logicalDevice, Pid pid, LogicalDeviceSessionType writeAccess = (LogicalDeviceSessionType)0)
			: this((ILogicalDevicePidULong)new LogicalDevicePidULong(logicalDevice, PidExtension.ConvertToPid(pid), writeAccess, (Func<ulong, bool>)null, 72057594037927935uL))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_001d: Expected O, but got Unknown


		public static BatteryMonitorBatteryInformation Decode(ulong value)
		{
			//IL_0013: Unknown result type (might be due to invalid IL or missing references)
			//IL_0014: Unknown result type (might be due to invalid IL or missing references)
			//IL_0032: Unknown result type (might be due to invalid IL or missing references)
			//IL_0021: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			//IL_0037: Unknown result type (might be due to invalid IL or missing references)
			//IL_008a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0056: Unknown result type (might be due to invalid IL or missing references)
			Nullable<ushort> val = default(Nullable<ushort>);
			val..ctor((ushort)((BitPositionValue64)(ref BatteryCapacityPosition)).DecodeValue(value));
			Nullable<ushort> val2 = val;
			Nullable<int> val3 = (val2.HasValue ? new Nullable<int>((int)val2.GetValueOrDefault()) : default(Nullable<int>));
			int num = 65535;
			if ((val3.GetValueOrDefault() == num) & val3.HasValue)
			{
				val = default(Nullable<ushort>);
			}
			BatteryCondition condition = Enum<BatteryCondition>.TryConvert((object)(byte)((BitPositionValue64)(ref BatteryConditionPosition)).DecodeValue(value));
			BatteryChemistryType chemistryType = Enum<BatteryChemistryType>.TryConvert((object)(byte)((BitPositionValue64)(ref BatteryChemistryTypePosition)).DecodeValue(value));
			return new BatteryMonitorBatteryInformation(val, condition, chemistryType);
		}

		public static ulong Encode(BatteryMonitorBatteryInformation batteryInfo)
		{
			//IL_000a: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			ulong num = 0uL;
			num = ((BitPositionValue64)(ref BatteryCapacityPosition)).EncodeValue((ulong)batteryInfo.CapacityAmpHours.GetValueOrDefault((ushort)65535), num);
			num = ((BitPositionValue64)(ref BatteryConditionPosition)).EncodeValue((ulong)((batteryInfo.Condition == BatteryCondition.Unknown) ? BatteryCondition.New : batteryInfo.Condition), num);
			return ((BitPositionValue64)(ref BatteryChemistryTypePosition)).EncodeValue((ulong)batteryInfo.ChemistryType, num);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<BatteryMonitorBatteryInformation> ReadAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ReadAsync>d__9 <ReadAsync>d__ = default(<ReadAsync>d__9);
			<ReadAsync>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorBatteryInformation>.Create();
			<ReadAsync>d__.<>4__this = this;
			<ReadAsync>d__.cancellationToken = cancellationToken;
			<ReadAsync>d__.<>1__state = -1;
			<ReadAsync>d__.<>t__builder.Start<<ReadAsync>d__9>(ref <ReadAsync>d__);
			return <ReadAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task WriteAsync(BatteryMonitorBatteryInformation value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<WriteAsync>d__10 <WriteAsync>d__ = default(<WriteAsync>d__10);
			<WriteAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<WriteAsync>d__.<>4__this = this;
			<WriteAsync>d__.value = value;
			<WriteAsync>d__.cancellationToken = cancellationToken;
			<WriteAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Start<<WriteAsync>d__10>(ref <WriteAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Task;
		}
	}
	public readonly struct BatteryMonitorChargeCounts : ValueType
	{
		[field: CompilerGenerated]
		public Nullable<byte> NumberOfFullDischarges
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public Nullable<ushort> NumberOfChargeCycles
		{
			[CompilerGenerated]
			get;
		}

		public BatteryMonitorChargeCounts(Nullable<byte> numberOfFullDischarges, Nullable<ushort> numberOfChargeCycles)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			//IL_0009: Unknown result type (might be due to invalid IL or missing references)
			NumberOfFullDischarges = numberOfFullDischarges;
			NumberOfChargeCycles = numberOfChargeCycles;
		}
	}
	public class LogicalDevicePidProxyChargeCounts : LogicalDevicePidProxy<ILogicalDevicePidULong>, ILogicalDevicePid<BatteryMonitorChargeCounts>, ILogicalDevicePid
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ReadAsync>d__11 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorChargeCounts> <>t__builder;

			public LogicalDevicePidProxyChargeCounts <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_0079: Expected O, but got Unknown
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyChargeCounts logicalDevicePidProxyChargeCounts = <>4__this;
				BatteryMonitorChargeCounts result;
				try
				{
					TaskAwaiter<ulong> val;
					if (num != 0)
					{
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyChargeCounts).ReadValueAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <ReadAsync>d__11>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ulong>);
						num = (<>1__state = -1);
					}
					result = Decode(val.GetResult());
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <WriteAsync>d__12 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDevicePidProxyChargeCounts <>4__this;

			public BatteryMonitorChargeCounts value;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0091: Expected O, but got Unknown
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyChargeCounts logicalDevicePidProxyChargeCounts = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						if (((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyChargeCounts).IsReadOnly)
						{
							throw new LogicalDevicePidValueWriteNotSupportedException(((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyChargeCounts).PropertyId);
						}
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyChargeCounts).WriteValueAsync(Encode(value), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <WriteAsync>d__12>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const string LogTag = "LogicalDevicePidProxyChargeCounts";

		private const byte InvalidNumberOfDischarges = 254;

		private const byte UnknownNumberOfDischarges = 255;

		private const ushort InvalidNumberOfChargeCycles = 65534;

		private const ushort UnknownNumberOfChargeCycles = 65535;

		private static readonly BitPositionValue64 NumberOfFullDischargesPosition = new BitPositionValue64(255uL, 0, 1);

		private static readonly BitPositionValue64 NumberOfChargeCyclesPosition = new BitPositionValue64(16776960uL, 0, 1);

		public LogicalDevicePidProxyChargeCounts(ILogicalDevicePidULong devicePid = null)
			: base(devicePid)
		{
		}

		public LogicalDevicePidProxyChargeCounts(ILogicalDevice logicalDevice, Pid pid, LogicalDeviceSessionType writeAccess = (LogicalDeviceSessionType)0)
			: this((ILogicalDevicePidULong)new LogicalDevicePidULong(logicalDevice, PidExtension.ConvertToPid(pid), writeAccess, (Func<ulong, bool>)null, 72057594037927935uL))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_001d: Expected O, but got Unknown


		public static BatteryMonitorChargeCounts Decode(ulong value)
		{
			//IL_0039: Unknown result type (might be due to invalid IL or missing references)
			//IL_0080: Unknown result type (might be due to invalid IL or missing references)
			//IL_0081: Unknown result type (might be due to invalid IL or missing references)
			//IL_007a: Unknown result type (might be due to invalid IL or missing references)
			Nullable<byte> numberOfFullDischarges = default(Nullable<byte>);
			numberOfFullDischarges..ctor((byte)((BitPositionValue64)(ref NumberOfFullDischargesPosition)).DecodeValue(value));
			bool flag;
			if (numberOfFullDischarges.HasValue)
			{
				byte valueOrDefault = numberOfFullDischarges.GetValueOrDefault();
				if ((uint)(valueOrDefault - 254) <= 1u)
				{
					flag = true;
					goto IL_0034;
				}
			}
			flag = false;
			goto IL_0034;
			IL_0034:
			if (flag)
			{
				numberOfFullDischarges = default(Nullable<byte>);
			}
			Nullable<ushort> numberOfChargeCycles = default(Nullable<ushort>);
			numberOfChargeCycles..ctor((ushort)((BitPositionValue64)(ref NumberOfChargeCyclesPosition)).DecodeValue(value));
			if (numberOfChargeCycles.HasValue)
			{
				ushort valueOrDefault2 = numberOfChargeCycles.GetValueOrDefault();
				if ((uint)(valueOrDefault2 - 65534) <= 1u)
				{
					flag = true;
					goto IL_0075;
				}
			}
			flag = false;
			goto IL_0075;
			IL_0075:
			if (flag)
			{
				numberOfChargeCycles = default(Nullable<ushort>);
			}
			return new BatteryMonitorChargeCounts(numberOfFullDischarges, numberOfChargeCycles);
		}

		public static ulong Encode(BatteryMonitorChargeCounts chargeCounts)
		{
			//IL_000a: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			//IL_002b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0030: Unknown result type (might be due to invalid IL or missing references)
			ulong num = 0uL;
			num = ((BitPositionValue64)(ref NumberOfFullDischargesPosition)).EncodeValue((ulong)chargeCounts.NumberOfFullDischarges.GetValueOrDefault((byte)255), num);
			return ((BitPositionValue64)(ref NumberOfChargeCyclesPosition)).EncodeValue((ulong)chargeCounts.NumberOfChargeCycles.GetValueOrDefault((ushort)65535), num);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<BatteryMonitorChargeCounts> ReadAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ReadAsync>d__11 <ReadAsync>d__ = default(<ReadAsync>d__11);
			<ReadAsync>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorChargeCounts>.Create();
			<ReadAsync>d__.<>4__this = this;
			<ReadAsync>d__.cancellationToken = cancellationToken;
			<ReadAsync>d__.<>1__state = -1;
			<ReadAsync>d__.<>t__builder.Start<<ReadAsync>d__11>(ref <ReadAsync>d__);
			return <ReadAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task WriteAsync(BatteryMonitorChargeCounts value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<WriteAsync>d__12 <WriteAsync>d__ = default(<WriteAsync>d__12);
			<WriteAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<WriteAsync>d__.<>4__this = this;
			<WriteAsync>d__.value = value;
			<WriteAsync>d__.cancellationToken = cancellationToken;
			<WriteAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Start<<WriteAsync>d__12>(ref <WriteAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Task;
		}
	}
	public readonly struct BatteryMonitorChargeTime : ValueType
	{
		[field: CompilerGenerated]
		public Nullable<TimeSpan> TimeSinceLastFullCharge
		{
			[CompilerGenerated]
			get;
		}

		public BatteryMonitorChargeTime(Nullable<TimeSpan> timeSinceLastFullCharge)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			TimeSinceLastFullCharge = timeSinceLastFullCharge;
		}
	}
	public class LogicalDevicePidProxyChargeTime : LogicalDevicePidProxy<ILogicalDevicePidULong>, ILogicalDevicePid<BatteryMonitorChargeTime>, ILogicalDevicePid
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ReadAsync>d__7 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorChargeTime> <>t__builder;

			public LogicalDevicePidProxyChargeTime <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_0079: Expected O, but got Unknown
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyChargeTime logicalDevicePidProxyChargeTime = <>4__this;
				BatteryMonitorChargeTime result;
				try
				{
					TaskAwaiter<ulong> val;
					if (num != 0)
					{
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyChargeTime).ReadValueAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <ReadAsync>d__7>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ulong>);
						num = (<>1__state = -1);
					}
					result = Decode(val.GetResult());
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <WriteAsync>d__8 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDevicePidProxyChargeTime <>4__this;

			public BatteryMonitorChargeTime value;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0091: Expected O, but got Unknown
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyChargeTime logicalDevicePidProxyChargeTime = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						if (((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyChargeTime).IsReadOnly)
						{
							throw new LogicalDevicePidValueWriteNotSupportedException(((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyChargeTime).PropertyId);
						}
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyChargeTime).WriteValueAsync(Encode(value), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <WriteAsync>d__8>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const string LogTag = "LogicalDevicePidProxyChargeTime";

		private const uint UnknownMinutesSinceLastFullCharge = 16777215u;

		private static readonly BitPositionValue64 MinutesSinceLastFullChargePosition = new BitPositionValue64(16777215uL, 0, 1);

		public LogicalDevicePidProxyChargeTime(ILogicalDevicePidULong devicePid = null)
			: base(devicePid)
		{
		}

		public LogicalDevicePidProxyChargeTime(ILogicalDevice logicalDevice, Pid pid, LogicalDeviceSessionType writeAccess = (LogicalDeviceSessionType)0)
			: this((ILogicalDevicePidULong)new LogicalDevicePidULong(logicalDevice, PidExtension.ConvertToPid(pid), writeAccess, (Func<ulong, bool>)null, 72057594037927935uL))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_001d: Expected O, but got Unknown


		public static BatteryMonitorChargeTime Decode(ulong value)
		{
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_002c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0018: Unknown result type (might be due to invalid IL or missing references)
			//IL_001d: Unknown result type (might be due to invalid IL or missing references)
			uint num = (uint)((BitPositionValue64)(ref MinutesSinceLastFullChargePosition)).DecodeValue(value);
			return new BatteryMonitorChargeTime((num == 16777215) ? default(Nullable<TimeSpan>) : new Nullable<TimeSpan>(TimeSpan.FromMinutes((double)num)));
		}

		public static ulong Encode(BatteryMonitorChargeTime chargeTime)
		{
			//IL_000a: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_002b: Unknown result type (might be due to invalid IL or missing references)
			ulong num = 0uL;
			Nullable<TimeSpan> timeSinceLastFullCharge = chargeTime.TimeSinceLastFullCharge;
			double num2;
			if (!timeSinceLastFullCharge.HasValue)
			{
				num2 = 16777215.0;
			}
			else
			{
				TimeSpan valueOrDefault = timeSinceLastFullCharge.GetValueOrDefault();
				num2 = ((TimeSpan)(ref valueOrDefault)).TotalMinutes;
			}
			return ((BitPositionValue64)(ref MinutesSinceLastFullChargePosition)).EncodeValue((ulong)num2, num);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<BatteryMonitorChargeTime> ReadAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ReadAsync>d__7 <ReadAsync>d__ = default(<ReadAsync>d__7);
			<ReadAsync>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorChargeTime>.Create();
			<ReadAsync>d__.<>4__this = this;
			<ReadAsync>d__.cancellationToken = cancellationToken;
			<ReadAsync>d__.<>1__state = -1;
			<ReadAsync>d__.<>t__builder.Start<<ReadAsync>d__7>(ref <ReadAsync>d__);
			return <ReadAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task WriteAsync(BatteryMonitorChargeTime value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<WriteAsync>d__8 <WriteAsync>d__ = default(<WriteAsync>d__8);
			<WriteAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<WriteAsync>d__.<>4__this = this;
			<WriteAsync>d__.value = value;
			<WriteAsync>d__.cancellationToken = cancellationToken;
			<WriteAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Start<<WriteAsync>d__8>(ref <WriteAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Task;
		}
	}
	public readonly struct BatteryMonitorHourMeter : ValueType
	{
		[field: CompilerGenerated]
		public Nullable<TimeSpan> HourMeterLifetime
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public Nullable<TimeSpan> HourMeterA
		{
			[CompilerGenerated]
			get;
		}

		public BatteryMonitorHourMeter(Nullable<TimeSpan> hourMeterLifetime, Nullable<TimeSpan> hourMeterA)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			//IL_0009: Unknown result type (might be due to invalid IL or missing references)
			HourMeterLifetime = hourMeterLifetime;
			HourMeterA = hourMeterA;
		}

		public static BatteryMonitorHourMeter MakeFactoryReset()
		{
			//IL_0009: Unknown result type (might be due to invalid IL or missing references)
			//IL_000e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0021: Unknown result type (might be due to invalid IL or missing references)
			return new BatteryMonitorHourMeter(new Nullable<TimeSpan>(TimeSpan.FromMinutes(0.0)), new Nullable<TimeSpan>(TimeSpan.FromMinutes(0.0)));
		}

		public static BatteryMonitorHourMeter MakeUnknown()
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0011: Unknown result type (might be due to invalid IL or missing references)
			return new BatteryMonitorHourMeter(default(Nullable<TimeSpan>), default(Nullable<TimeSpan>));
		}
	}
	public class LogicalDevicePidProxyHourMeter : LogicalDevicePidProxy<ILogicalDevicePidULong>, ILogicalDevicePid<BatteryMonitorHourMeter>, ILogicalDevicePid
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ReadAsync>d__8 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorHourMeter> <>t__builder;

			public LogicalDevicePidProxyHourMeter <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_0079: Expected O, but got Unknown
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyHourMeter logicalDevicePidProxyHourMeter = <>4__this;
				BatteryMonitorHourMeter result;
				try
				{
					TaskAwaiter<ulong> val;
					if (num != 0)
					{
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyHourMeter).ReadValueAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <ReadAsync>d__8>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ulong>);
						num = (<>1__state = -1);
					}
					result = Decode(val.GetResult());
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <WriteAsync>d__9 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDevicePidProxyHourMeter <>4__this;

			public BatteryMonitorHourMeter value;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0091: Expected O, but got Unknown
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyHourMeter logicalDevicePidProxyHourMeter = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						if (((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyHourMeter).IsReadOnly)
						{
							throw new LogicalDevicePidValueWriteNotSupportedException(((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyHourMeter).PropertyId);
						}
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyHourMeter).WriteValueAsync(Encode(value), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <WriteAsync>d__9>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const string LogTag = "LogicalDevicePidProxyBatteryInformation";

		public const int MinutesPerTick = 15;

		internal static readonly BitPositionValue64 HourMeterLifetimePosition = new BitPositionValue64(16777215uL, 0, 1);

		internal static readonly BitPositionValue64 HourMeterAPosition = new BitPositionValue64(281474959933440uL, 0, 1);

		public LogicalDevicePidProxyHourMeter(ILogicalDevicePidULong devicePid = null)
			: base(devicePid)
		{
		}

		public LogicalDevicePidProxyHourMeter(ILogicalDevice logicalDevice, Pid pid, LogicalDeviceSessionType writeAccess = (LogicalDeviceSessionType)0)
			: this((ILogicalDevicePidULong)new LogicalDevicePidULong(logicalDevice, PidExtension.ConvertToPid(pid), writeAccess, (Func<ulong, bool>)null, 72057594037927935uL))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_001d: Expected O, but got Unknown


		public static BatteryMonitorHourMeter Decode(ulong value)
		{
			//IL_000b: Unknown result type (might be due to invalid IL or missing references)
			//IL_001b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0020: Unknown result type (might be due to invalid IL or missing references)
			//IL_0023: Unknown result type (might be due to invalid IL or missing references)
			//IL_0028: Unknown result type (might be due to invalid IL or missing references)
			//IL_0032: Unknown result type (might be due to invalid IL or missing references)
			//IL_0037: Unknown result type (might be due to invalid IL or missing references)
			//IL_003a: Unknown result type (might be due to invalid IL or missing references)
			//IL_003f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0049: Unknown result type (might be due to invalid IL or missing references)
			//IL_004e: Unknown result type (might be due to invalid IL or missing references)
			//IL_004f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0054: Unknown result type (might be due to invalid IL or missing references)
			//IL_0055: Unknown result type (might be due to invalid IL or missing references)
			UInt24 val = (UInt24)((BitPositionValue64)(ref HourMeterLifetimePosition)).DecodeValue(value);
			UInt24 val2 = (UInt24)((BitPositionValue64)(ref HourMeterAPosition)).DecodeValue(value);
			TimeSpan val3 = TimeSpan.FromMinutes(UInt24.op_Implicit(val * UInt24.op_Implicit((byte)15)));
			return new BatteryMonitorHourMeter(hourMeterA: new Nullable<TimeSpan>(TimeSpan.FromMinutes(UInt24.op_Implicit(val2 * UInt24.op_Implicit((byte)15)))), hourMeterLifetime: new Nullable<TimeSpan>(val3));
		}

		public static ulong Encode(BatteryMonitorHourMeter alertThreshold)
		{
			//IL_0005: Unknown result type (might be due to invalid IL or missing references)
			//IL_000a: Unknown result type (might be due to invalid IL or missing references)
			//IL_004f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0054: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_001b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0032: Unknown result type (might be due to invalid IL or missing references)
			//IL_0042: Unknown result type (might be due to invalid IL or missing references)
			//IL_0060: Unknown result type (might be due to invalid IL or missing references)
			//IL_0065: Unknown result type (might be due to invalid IL or missing references)
			//IL_007c: Unknown result type (might be due to invalid IL or missing references)
			//IL_008c: Unknown result type (might be due to invalid IL or missing references)
			ulong num = 0uL;
			Nullable<TimeSpan> hourMeterLifetime = alertThreshold.HourMeterLifetime;
			if (hourMeterLifetime.HasValue)
			{
				TimeSpan valueOrDefault = hourMeterLifetime.GetValueOrDefault();
				num = UInt24.op_Implicit((UInt24)((BitPositionValue64)(ref HourMeterLifetimePosition)).EncodeValue(UInt24.op_Implicit((UInt24)(((TimeSpan)(ref valueOrDefault)).TotalMinutes / 15.0)), num));
			}
			hourMeterLifetime = alertThreshold.HourMeterA;
			if (hourMeterLifetime.HasValue)
			{
				TimeSpan valueOrDefault2 = hourMeterLifetime.GetValueOrDefault();
				num = UInt24.op_Implicit((UInt24)((BitPositionValue64)(ref HourMeterLifetimePosition)).EncodeValue(UInt24.op_Implicit((UInt24)(((TimeSpan)(ref valueOrDefault2)).TotalMinutes / 15.0)), num));
			}
			return num;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<BatteryMonitorHourMeter> ReadAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ReadAsync>d__8 <ReadAsync>d__ = default(<ReadAsync>d__8);
			<ReadAsync>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorHourMeter>.Create();
			<ReadAsync>d__.<>4__this = this;
			<ReadAsync>d__.cancellationToken = cancellationToken;
			<ReadAsync>d__.<>1__state = -1;
			<ReadAsync>d__.<>t__builder.Start<<ReadAsync>d__8>(ref <ReadAsync>d__);
			return <ReadAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task WriteAsync(BatteryMonitorHourMeter value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<WriteAsync>d__9 <WriteAsync>d__ = default(<WriteAsync>d__9);
			<WriteAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<WriteAsync>d__.<>4__this = this;
			<WriteAsync>d__.value = value;
			<WriteAsync>d__.cancellationToken = cancellationToken;
			<WriteAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Start<<WriteAsync>d__9>(ref <WriteAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Task;
		}
	}
	public class SoftwareVersion : Object
	{
		[field: CompilerGenerated]
		public byte Major
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public byte Minor
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public byte Revision
		{
			[CompilerGenerated]
			get;
		}

		public override string ToString()
		{
			return String.Format("{0}.{1}.{2}", (object)Major, (object)Minor, (object)Revision);
		}

		public SoftwareVersion(byte major, byte minor, byte revision)
		{
			Major = major;
			Minor = minor;
			Revision = revision;
		}
	}
	public class LogicalDevicePidProxySoftwareVersion : LogicalDevicePidProxy<ILogicalDevicePidULong>, ILogicalDevicePid<SoftwareVersion>, ILogicalDevicePid
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ReadAsync>d__9 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<SoftwareVersion> <>t__builder;

			public LogicalDevicePidProxySoftwareVersion <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_0079: Expected O, but got Unknown
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxySoftwareVersion logicalDevicePidProxySoftwareVersion = <>4__this;
				SoftwareVersion result;
				try
				{
					TaskAwaiter<ulong> val;
					if (num != 0)
					{
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxySoftwareVersion).ReadValueAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <ReadAsync>d__9>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ulong>);
						num = (<>1__state = -1);
					}
					result = Decode(val.GetResult());
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <WriteAsync>d__10 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDevicePidProxySoftwareVersion <>4__this;

			public SoftwareVersion value;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0091: Expected O, but got Unknown
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxySoftwareVersion logicalDevicePidProxySoftwareVersion = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						if (((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxySoftwareVersion).IsReadOnly)
						{
							throw new LogicalDevicePidValueWriteNotSupportedException(((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxySoftwareVersion).PropertyId);
						}
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxySoftwareVersion).WriteValueAsync(Encode(value), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <WriteAsync>d__10>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const string LogTag = "LogicalDevicePidProxySoftwareVersion";

		private const byte UnknownValue = 255;

		private static readonly BitPositionValue64 MajorPosition = new BitPositionValue64(255uL, 0, 1);

		private static readonly BitPositionValue64 MinorPosition = new BitPositionValue64(65280uL, 0, 1);

		private static readonly BitPositionValue64 RevisionPosition = new BitPositionValue64(16711680uL, 0, 1);

		public LogicalDevicePidProxySoftwareVersion(ILogicalDevicePidULong devicePid = null)
			: base(devicePid)
		{
		}

		public LogicalDevicePidProxySoftwareVersion(ILogicalDevice logicalDevice, Pid pid, LogicalDeviceSessionType writeAccess = (LogicalDeviceSessionType)0)
			: this((ILogicalDevicePidULong)new LogicalDevicePidULong(logicalDevice, PidExtension.ConvertToPid(pid), writeAccess, (Func<ulong, bool>)null, 72057594037927935uL))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_001d: Expected O, but got Unknown


		public static SoftwareVersion Decode(ulong value)
		{
			byte major = (byte)((BitPositionValue64)(ref MajorPosition)).DecodeValue(value);
			byte minor = (byte)((BitPositionValue64)(ref MinorPosition)).DecodeValue(value);
			byte revision = (byte)((BitPositionValue64)(ref RevisionPosition)).DecodeValue(value);
			return new SoftwareVersion(major, minor, revision);
		}

		public static ulong Encode(SoftwareVersion softwareVersion)
		{
			ulong num = 0uL;
			num = ((BitPositionValue64)(ref MajorPosition)).EncodeValue((ulong)softwareVersion.Major, num);
			num = ((BitPositionValue64)(ref MinorPosition)).EncodeValue((ulong)softwareVersion.Minor, num);
			return ((BitPositionValue64)(ref RevisionPosition)).EncodeValue((ulong)softwareVersion.Revision, num);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<SoftwareVersion> ReadAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ReadAsync>d__9 <ReadAsync>d__ = default(<ReadAsync>d__9);
			<ReadAsync>d__.<>t__builder = AsyncTaskMethodBuilder<SoftwareVersion>.Create();
			<ReadAsync>d__.<>4__this = this;
			<ReadAsync>d__.cancellationToken = cancellationToken;
			<ReadAsync>d__.<>1__state = -1;
			<ReadAsync>d__.<>t__builder.Start<<ReadAsync>d__9>(ref <ReadAsync>d__);
			return <ReadAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task WriteAsync(SoftwareVersion value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<WriteAsync>d__10 <WriteAsync>d__ = default(<WriteAsync>d__10);
			<WriteAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<WriteAsync>d__.<>4__this = this;
			<WriteAsync>d__.value = value;
			<WriteAsync>d__.cancellationToken = cancellationToken;
			<WriteAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Start<<WriteAsync>d__10>(ref <WriteAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Task;
		}
	}
	public readonly struct BatteryMonitorStateOfCharge : ValueType
	{
		[field: CompilerGenerated]
		public IBatteryMonitorStatsStateOfCharge BeforeChargingStarted
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public IBatteryMonitorStatsStateOfCharge AfterChargingStopped
		{
			[CompilerGenerated]
			get;
		}

		public BatteryMonitorStateOfCharge(IBatteryMonitorStatsStateOfCharge beforeChargingStarted, IBatteryMonitorStatsStateOfCharge afterChargingStopped)
		{
			BeforeChargingStarted = beforeChargingStarted;
			AfterChargingStopped = afterChargingStopped;
		}
	}
	public class LogicalDevicePidProxyStateOfCharge : LogicalDevicePidProxy<ILogicalDevicePidULong>, ILogicalDevicePid<BatteryMonitorStateOfCharge>, ILogicalDevicePid
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ReadAsync>d__13 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorStateOfCharge> <>t__builder;

			public LogicalDevicePidProxyStateOfCharge <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_0079: Expected O, but got Unknown
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyStateOfCharge logicalDevicePidProxyStateOfCharge = <>4__this;
				BatteryMonitorStateOfCharge result;
				try
				{
					TaskAwaiter<ulong> val;
					if (num != 0)
					{
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyStateOfCharge).ReadValueAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <ReadAsync>d__13>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ulong>);
						num = (<>1__state = -1);
					}
					result = Decode(val.GetResult());
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <WriteAsync>d__14 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDevicePidProxyStateOfCharge <>4__this;

			public BatteryMonitorStateOfCharge value;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0091: Expected O, but got Unknown
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyStateOfCharge logicalDevicePidProxyStateOfCharge = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						if (((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyStateOfCharge).IsReadOnly)
						{
							throw new LogicalDevicePidValueWriteNotSupportedException(((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyStateOfCharge).PropertyId);
						}
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyStateOfCharge).WriteValueAsync(Encode(value), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <WriteAsync>d__14>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const string LogTag = "LogicalDevicePidProxyStateOfCharge";

		private const byte UnknownValue = 255;

		private static readonly BitPositionValue64 BeforeChargingStartedStateOfChargePosition = new BitPositionValue64(255uL, 0, 1);

		private static readonly BitPositionValue64 BeforeChargingLifetimeAveragePosition = new BitPositionValue64(65280uL, 0, 1);

		private static readonly BitPositionValue64 BeforeChargingRecentMovingAveragePosition = new BitPositionValue64(16711680uL, 0, 1);

		private static readonly BitPositionValue64 AfterChargingStartedStateOfChargePosition = new BitPositionValue64(4278190080uL, 0, 1);

		private static readonly BitPositionValue64 AfterChargingLifetimeAveragePosition = new BitPositionValue64(1095216660480uL, 0, 1);

		private static readonly BitPositionValue64 AfterChargingRecentMovingAveragePosition = new BitPositionValue64(280375465082880uL, 0, 1);

		public LogicalDevicePidProxyStateOfCharge(ILogicalDevicePidULong devicePid = null)
			: base(devicePid)
		{
		}

		public LogicalDevicePidProxyStateOfCharge(ILogicalDevice logicalDevice, Pid pid, LogicalDeviceSessionType writeAccess = (LogicalDeviceSessionType)0)
			: this((ILogicalDevicePidULong)new LogicalDevicePidULong(logicalDevice, PidExtension.ConvertToPid(pid), writeAccess, (Func<ulong, bool>)null, 72057594037927935uL))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_001d: Expected O, but got Unknown


		public static Nullable<byte> MakeNullIfUnknownValue(byte value)
		{
			//IL_0011: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			//IL_0009: Unknown result type (might be due to invalid IL or missing references)
			if (value != 255)
			{
				return new Nullable<byte>(value);
			}
			return default(Nullable<byte>);
		}

		public static BatteryMonitorStateOfCharge Decode(ulong value)
		{
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_002c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0032: Unknown result type (might be due to invalid IL or missing references)
			//IL_0062: Unknown result type (might be due to invalid IL or missing references)
			//IL_0068: Unknown result type (might be due to invalid IL or missing references)
			//IL_006e: Unknown result type (might be due to invalid IL or missing references)
			byte value2 = (byte)((BitPositionValue64)(ref BeforeChargingStartedStateOfChargePosition)).DecodeValue(value);
			byte value3 = (byte)((BitPositionValue64)(ref BeforeChargingLifetimeAveragePosition)).DecodeValue(value);
			BatteryMonitorStatsStateOfCharge beforeChargingStarted = new BatteryMonitorStatsStateOfCharge(recentMovingPercent: MakeNullIfUnknownValue((byte)((BitPositionValue64)(ref BeforeChargingRecentMovingAveragePosition)).DecodeValue(value)), stateOfChargePercent: MakeNullIfUnknownValue(value2), lifetimeAveragePercent: MakeNullIfUnknownValue(value3));
			byte value4 = (byte)((BitPositionValue64)(ref AfterChargingStartedStateOfChargePosition)).DecodeValue(value);
			byte value5 = (byte)((BitPositionValue64)(ref AfterChargingLifetimeAveragePosition)).DecodeValue(value);
			BatteryMonitorStatsStateOfCharge afterChargingStopped = new BatteryMonitorStatsStateOfCharge(recentMovingPercent: MakeNullIfUnknownValue((byte)((BitPositionValue64)(ref AfterChargingRecentMovingAveragePosition)).DecodeValue(value)), stateOfChargePercent: MakeNullIfUnknownValue(value4), lifetimeAveragePercent: MakeNullIfUnknownValue(value5));
			return new BatteryMonitorStateOfCharge(beforeChargingStarted, afterChargingStopped);
		}

		public static ulong Encode(BatteryMonitorStateOfCharge soc)
		{
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0014: Unknown result type (might be due to invalid IL or missing references)
			//IL_0035: Unknown result type (might be due to invalid IL or missing references)
			//IL_003a: Unknown result type (might be due to invalid IL or missing references)
			//IL_005b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0060: Unknown result type (might be due to invalid IL or missing references)
			//IL_0081: Unknown result type (might be due to invalid IL or missing references)
			//IL_0086: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a7: Unknown result type (might be due to invalid IL or missing references)
			//IL_00ac: Unknown result type (might be due to invalid IL or missing references)
			//IL_00cd: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d2: Unknown result type (might be due to invalid IL or missing references)
			ulong num = 0uL;
			num = ((BitPositionValue64)(ref BeforeChargingStartedStateOfChargePosition)).EncodeValue((ulong)soc.BeforeChargingStarted.StateOfChargePercent.GetValueOrDefault((byte)255), num);
			num = ((BitPositionValue64)(ref BeforeChargingLifetimeAveragePosition)).EncodeValue((ulong)soc.BeforeChargingStarted.LifetimeAveragePercent.GetValueOrDefault((byte)255), num);
			num = ((BitPositionValue64)(ref BeforeChargingRecentMovingAveragePosition)).EncodeValue((ulong)soc.BeforeChargingStarted.RecentMovingAveragePercent.GetValueOrDefault((byte)255), num);
			num = ((BitPositionValue64)(ref AfterChargingStartedStateOfChargePosition)).EncodeValue((ulong)soc.AfterChargingStopped.StateOfChargePercent.GetValueOrDefault((byte)255), num);
			num = ((BitPositionValue64)(ref AfterChargingLifetimeAveragePosition)).EncodeValue((ulong)soc.AfterChargingStopped.LifetimeAveragePercent.GetValueOrDefault((byte)255), num);
			return ((BitPositionValue64)(ref AfterChargingRecentMovingAveragePosition)).EncodeValue((ulong)soc.AfterChargingStopped.RecentMovingAveragePercent.GetValueOrDefault((byte)255), num);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<BatteryMonitorStateOfCharge> ReadAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ReadAsync>d__13 <ReadAsync>d__ = default(<ReadAsync>d__13);
			<ReadAsync>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorStateOfCharge>.Create();
			<ReadAsync>d__.<>4__this = this;
			<ReadAsync>d__.cancellationToken = cancellationToken;
			<ReadAsync>d__.<>1__state = -1;
			<ReadAsync>d__.<>t__builder.Start<<ReadAsync>d__13>(ref <ReadAsync>d__);
			return <ReadAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task WriteAsync(BatteryMonitorStateOfCharge value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<WriteAsync>d__14 <WriteAsync>d__ = default(<WriteAsync>d__14);
			<WriteAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<WriteAsync>d__.<>4__this = this;
			<WriteAsync>d__.value = value;
			<WriteAsync>d__.cancellationToken = cancellationToken;
			<WriteAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Start<<WriteAsync>d__14>(ref <WriteAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Task;
		}
	}
	public readonly struct BatteryMonitorSummary : ValueType
	{
		public const string LogTag = "BatteryMonitorSummary";

		public static readonly IReadOnlyList<BatteryChemistryType> BatteryChemistryTypeDefaultV1;

		public static readonly IReadOnlyList<BatteryChemistryType> BatteryChemistryTypeDefaultV2;

		private const ushort BatteryChemistryTypeSupportedLeadAcidLiquidBitMask = 1;

		private const ushort BatteryChemistryTypeSupportedLeadAcidGelBitMask = 2;

		private const ushort BatteryChemistryTypeSupportedLeadAcidAbsorbentGlassMatBitMask = 4;

		private const ushort BatteryChemistryTypeSupportedLithiumBitMask = 8;

		[field: CompilerGenerated]
		public Nullable<byte> MinimumStateOfChargePercent
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		internal ushort SupportedChemistryTypesRaw
		{
			[CompilerGenerated]
			get;
		}

		public IReadOnlyList<BatteryChemistryType> SupportedChemistryTypes => (IReadOnlyList<BatteryChemistryType>)(object)new List<BatteryChemistryType>((IEnumerable<BatteryChemistryType>)(object)SupportedChemistryTypesToList(SupportedChemistryTypesRaw));

		public BatteryMonitorSummary()
			: this(default(Nullable<byte>), (IEnumerable<BatteryChemistryType>)(object)BatteryChemistryTypeDefaultV1)
		{
		}//IL_0003: Unknown result type (might be due to invalid IL or missing references)
		//IL_0009: Unknown result type (might be due to invalid IL or missing references)


		public BatteryMonitorSummary(Nullable<byte> minimumStateOfChargePercent, IEnumerable<BatteryChemistryType> supportedChemistryTypes)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			MinimumStateOfChargePercent = minimumStateOfChargePercent;
			SupportedChemistryTypesRaw = SupportedChemistryTypesToRawValue(new HashSet<BatteryChemistryType>(supportedChemistryTypes));
		}

		internal BatteryMonitorSummary(Nullable<byte> minimumStateOfChargePercent, ushort supportedChemistryTypesRaw)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			MinimumStateOfChargePercent = minimumStateOfChargePercent;
			SupportedChemistryTypesRaw = supportedChemistryTypesRaw;
		}

		private static HashSet<BatteryChemistryType> SupportedChemistryTypesToList(ushort supportedChemistryTypesRaw)
		{
			HashSet<BatteryChemistryType> val = new HashSet<BatteryChemistryType>();
			if ((supportedChemistryTypesRaw & 1) != 0)
			{
				val.Add(BatteryChemistryType.LeadAcidLiquid);
			}
			if ((supportedChemistryTypesRaw & 2) != 0)
			{
				val.Add(BatteryChemistryType.LeadAcidGel);
			}
			if ((supportedChemistryTypesRaw & 4) != 0)
			{
				val.Add(BatteryChemistryType.LeadAcidAbsorbentGlassMat);
			}
			if ((supportedChemistryTypesRaw & 8) != 0)
			{
				val.Add(BatteryChemistryType.Lithium);
			}
			if (val.Count == 0)
			{
				val.Add(BatteryChemistryType.LeadAcid);
			}
			return val;
		}

		public static ushort SupportedChemistryTypesToRawValue(HashSet<BatteryChemistryType> supportedChemistryTypes)
		{
			ushort num = 0;
			if (supportedChemistryTypes.Contains(BatteryChemistryType.Unknown))
			{
				TaggedLog.Warning("BatteryMonitorSummary", "Ignoring Unknown Battery Chemistry Type", Array.Empty<object>());
			}
			if (supportedChemistryTypes.Contains(BatteryChemistryType.LeadAcidLiquid))
			{
				num |= 1;
			}
			if (supportedChemistryTypes.Contains(BatteryChemistryType.LeadAcidGel))
			{
				num |= 2;
			}
			if (supportedChemistryTypes.Contains(BatteryChemistryType.LeadAcidAbsorbentGlassMat))
			{
				num |= 4;
			}
			if (supportedChemistryTypes.Contains(BatteryChemistryType.Lithium))
			{
				num |= 8;
			}
			return num;
		}

		static BatteryMonitorSummary()
		{
			List<BatteryChemistryType> obj = new List<BatteryChemistryType>();
			obj.Add(BatteryChemistryType.LeadAcid);
			BatteryChemistryTypeDefaultV1 = (IReadOnlyList<BatteryChemistryType>)(object)obj;
			List<BatteryChemistryType> obj2 = new List<BatteryChemistryType>();
			obj2.Add(BatteryChemistryType.LeadAcidLiquid);
			obj2.Add(BatteryChemistryType.LeadAcidGel);
			obj2.Add(BatteryChemistryType.LeadAcidAbsorbentGlassMat);
			obj2.Add(BatteryChemistryType.Lithium);
			BatteryChemistryTypeDefaultV2 = (IReadOnlyList<BatteryChemistryType>)(object)obj2;
		}
	}
	public class LogicalDevicePidProxySummary : LogicalDevicePidProxy<ILogicalDevicePidULong>, ILogicalDevicePid<BatteryMonitorSummary>, ILogicalDevicePid
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ReadAsync>d__8 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorSummary> <>t__builder;

			public LogicalDevicePidProxySummary <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_0079: Expected O, but got Unknown
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxySummary logicalDevicePidProxySummary = <>4__this;
				BatteryMonitorSummary result;
				try
				{
					TaskAwaiter<ulong> val;
					if (num != 0)
					{
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxySummary).ReadValueAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <ReadAsync>d__8>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ulong>);
						num = (<>1__state = -1);
					}
					result = Decode(val.GetResult());
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <WriteAsync>d__9 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDevicePidProxySummary <>4__this;

			public BatteryMonitorSummary value;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0091: Expected O, but got Unknown
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxySummary logicalDevicePidProxySummary = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						if (((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxySummary).IsReadOnly)
						{
							throw new LogicalDevicePidValueWriteNotSupportedException(((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxySummary).PropertyId);
						}
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxySummary).WriteValueAsync(Encode(value), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <WriteAsync>d__9>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const string LogTag = "LogicalDevicePidProxySummary";

		private const byte UnknownStateOfCharge = 255;

		private static readonly BitPositionValue64 MinimumStateOfChargePosition = new BitPositionValue64(255uL, 0, 1);

		private static readonly BitPositionValue64 SupportedChemistryTypesPosition = new BitPositionValue64(16776960uL, 0, 1);

		public LogicalDevicePidProxySummary(ILogicalDevicePidULong devicePid = null)
			: base(devicePid)
		{
		}

		public LogicalDevicePidProxySummary(ILogicalDevice logicalDevice, Pid pid, LogicalDeviceSessionType writeAccess = (LogicalDeviceSessionType)0)
			: this((ILogicalDevicePidULong)new LogicalDevicePidULong(logicalDevice, PidExtension.ConvertToPid(pid), writeAccess, (Func<ulong, bool>)null, 72057594037927935uL))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_001d: Expected O, but got Unknown


		public static BatteryMonitorSummary Decode(ulong value)
		{
			//IL_002c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0032: Unknown result type (might be due to invalid IL or missing references)
			//IL_0023: Unknown result type (might be due to invalid IL or missing references)
			byte b = (byte)((BitPositionValue64)(ref MinimumStateOfChargePosition)).DecodeValue(value);
			ushort supportedChemistryTypesRaw = (ushort)((BitPositionValue64)(ref SupportedChemistryTypesPosition)).DecodeValue(value);
			return new BatteryMonitorSummary((b == 255) ? default(Nullable<byte>) : new Nullable<byte>(b), supportedChemistryTypesRaw);
		}

		public static ulong Encode(BatteryMonitorSummary batteryMonitorSummary)
		{
			//IL_000a: Unknown result type (might be due to invalid IL or missing references)
			//IL_000f: Unknown result type (might be due to invalid IL or missing references)
			ulong num = 0uL;
			num = ((BitPositionValue64)(ref MinimumStateOfChargePosition)).EncodeValue((ulong)batteryMonitorSummary.MinimumStateOfChargePercent.GetValueOrDefault((byte)255), num);
			return ((BitPositionValue64)(ref SupportedChemistryTypesPosition)).EncodeValue((ulong)batteryMonitorSummary.SupportedChemistryTypesRaw, num);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<BatteryMonitorSummary> ReadAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ReadAsync>d__8 <ReadAsync>d__ = default(<ReadAsync>d__8);
			<ReadAsync>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorSummary>.Create();
			<ReadAsync>d__.<>4__this = this;
			<ReadAsync>d__.cancellationToken = cancellationToken;
			<ReadAsync>d__.<>1__state = -1;
			<ReadAsync>d__.<>t__builder.Start<<ReadAsync>d__8>(ref <ReadAsync>d__);
			return <ReadAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task WriteAsync(BatteryMonitorSummary value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<WriteAsync>d__9 <WriteAsync>d__ = default(<WriteAsync>d__9);
			<WriteAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<WriteAsync>d__.<>4__this = this;
			<WriteAsync>d__.value = value;
			<WriteAsync>d__.cancellationToken = cancellationToken;
			<WriteAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Start<<WriteAsync>d__9>(ref <WriteAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Task;
		}
	}
	public class LogicalDevicePidProxyTemperature : LogicalDevicePidProxy<ILogicalDevicePidULong>, ILogicalDevicePid<BatteryMonitorTemperatureStats>, ILogicalDevicePid
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ReadAsync>d__8 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorTemperatureStats> <>t__builder;

			public LogicalDevicePidProxyTemperature <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_0079: Expected O, but got Unknown
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyTemperature logicalDevicePidProxyTemperature = <>4__this;
				BatteryMonitorTemperatureStats result;
				try
				{
					TaskAwaiter<ulong> val;
					if (num != 0)
					{
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyTemperature).ReadValueAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <ReadAsync>d__8>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ulong>);
						num = (<>1__state = -1);
					}
					result = Decode(val.GetResult());
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <WriteAsync>d__9 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDevicePidProxyTemperature <>4__this;

			public BatteryMonitorTemperatureStats value;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0091: Expected O, but got Unknown
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyTemperature logicalDevicePidProxyTemperature = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						if (((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyTemperature).IsReadOnly)
						{
							throw new LogicalDevicePidValueWriteNotSupportedException(((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyTemperature).PropertyId);
						}
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyTemperature).WriteValueAsync(Encode(value), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <WriteAsync>d__9>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const string LogTag = "LogicalDevicePidProxyBatteryInformation";

		internal static readonly BitPositionValue64 TemperatureCurrentPosition = new BitPositionValue64(65535uL, 0, 1);

		internal static readonly BitPositionValue64 TemperatureMaxPosition = new BitPositionValue64(4294901760uL, 0, 1);

		internal static readonly BitPositionValue64 TemperatureMinPosition = new BitPositionValue64(281470681743360uL, 0, 1);

		public LogicalDevicePidProxyTemperature(ILogicalDevicePidULong devicePid = null)
			: base(devicePid)
		{
		}

		public LogicalDevicePidProxyTemperature(ILogicalDevice logicalDevice, Pid pid, LogicalDeviceSessionType writeAccess = (LogicalDeviceSessionType)0)
			: this((ILogicalDevicePidULong)new LogicalDevicePidULong(logicalDevice, PidExtension.ConvertToPid(pid), writeAccess, (Func<ulong, bool>)null, 72057594037927935uL))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_001d: Expected O, but got Unknown


		public static BatteryMonitorTemperatureStats Decode(ulong value)
		{
			ushort rawCelsiusFixedPointValue = (ushort)((BitPositionValue64)(ref TemperatureCurrentPosition)).DecodeValue(value);
			BatteryMonitorTemperature temperatureCurrent = new BatteryMonitorTemperature(rawCelsiusFixedPointValue);
			ushort rawCelsiusFixedPointValue2 = (ushort)((BitPositionValue64)(ref TemperatureMinPosition)).DecodeValue(value);
			BatteryMonitorTemperature temperatureLifetimeMin = new BatteryMonitorTemperature(rawCelsiusFixedPointValue2);
			ushort rawCelsiusFixedPointValue3 = (ushort)((BitPositionValue64)(ref TemperatureMaxPosition)).DecodeValue(value);
			BatteryMonitorTemperature temperatureLifetimeMax = new BatteryMonitorTemperature(rawCelsiusFixedPointValue3);
			return new BatteryMonitorTemperatureStats(temperatureCurrent, temperatureLifetimeMin, temperatureLifetimeMax);
		}

		public static ulong Encode(BatteryMonitorTemperatureStats batteryInfo)
		{
			ulong num = 0uL;
			num = ((BitPositionValue64)(ref TemperatureCurrentPosition)).EncodeValue((ulong)batteryInfo.TemperatureCurrent.ToRawCelsiusFixedPointValue, num);
			num = ((BitPositionValue64)(ref TemperatureMinPosition)).EncodeValue((ulong)batteryInfo.TemperatureLifetimeMin.ToRawCelsiusFixedPointValue, num);
			return ((BitPositionValue64)(ref TemperatureMaxPosition)).EncodeValue((ulong)batteryInfo.TemperatureLifetimeMax.ToRawCelsiusFixedPointValue, num);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<BatteryMonitorTemperatureStats> ReadAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ReadAsync>d__8 <ReadAsync>d__ = default(<ReadAsync>d__8);
			<ReadAsync>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorTemperatureStats>.Create();
			<ReadAsync>d__.<>4__this = this;
			<ReadAsync>d__.cancellationToken = cancellationToken;
			<ReadAsync>d__.<>1__state = -1;
			<ReadAsync>d__.<>t__builder.Start<<ReadAsync>d__8>(ref <ReadAsync>d__);
			return <ReadAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task WriteAsync(BatteryMonitorTemperatureStats value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<WriteAsync>d__9 <WriteAsync>d__ = default(<WriteAsync>d__9);
			<WriteAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<WriteAsync>d__.<>4__this = this;
			<WriteAsync>d__.value = value;
			<WriteAsync>d__.cancellationToken = cancellationToken;
			<WriteAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Start<<WriteAsync>d__9>(ref <WriteAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Task;
		}
	}
	public readonly struct BatteryMonitorVoltageStats : ValueType
	{
		[field: CompilerGenerated]
		public Nullable<float> MinimumBatteryVoltage
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public Nullable<float> MaximumBatteryVoltage
		{
			[CompilerGenerated]
			get;
		}

		public BatteryMonitorVoltageStats(Nullable<float> minimumBatteryVoltage, Nullable<float> maximumBatteryVoltage)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			//IL_0009: Unknown result type (might be due to invalid IL or missing references)
			MinimumBatteryVoltage = minimumBatteryVoltage;
			MaximumBatteryVoltage = maximumBatteryVoltage;
		}
	}
	public class LogicalDevicePidProxyVoltageStats : LogicalDevicePidProxy<ILogicalDevicePidULong>, ILogicalDevicePid<BatteryMonitorVoltageStats>, ILogicalDevicePid
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ReadAsync>d__9 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<BatteryMonitorVoltageStats> <>t__builder;

			public LogicalDevicePidProxyVoltageStats <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_0079: Expected O, but got Unknown
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_0013: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0036: Unknown result type (might be due to invalid IL or missing references)
				//IL_0037: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyVoltageStats logicalDevicePidProxyVoltageStats = <>4__this;
				BatteryMonitorVoltageStats result;
				try
				{
					TaskAwaiter<ulong> val;
					if (num != 0)
					{
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyVoltageStats).ReadValueAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <ReadAsync>d__9>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ulong>);
						num = (<>1__state = -1);
					}
					result = Decode(val.GetResult());
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <WriteAsync>d__10 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDevicePidProxyVoltageStats <>4__this;

			public BatteryMonitorVoltageStats value;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0091: Expected O, but got Unknown
				//IL_006c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0071: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0041: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0055: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDevicePidProxyVoltageStats logicalDevicePidProxyVoltageStats = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						if (((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyVoltageStats).IsReadOnly)
						{
							throw new LogicalDevicePidValueWriteNotSupportedException(((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyVoltageStats).PropertyId);
						}
						val = ((LogicalDevicePidProxy<ILogicalDevicePidULong>)logicalDevicePidProxyVoltageStats).WriteValueAsync(Encode(value), cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <WriteAsync>d__10>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const string LogTag = "LogicalDevicePidProxyVoltageStats";

		private const ushort UnknownVoltage = 65535;

		private const ushort InvalidVoltage = 65534;

		private static readonly BitPositionValue64 MinimumVoltagePosition = new BitPositionValue64(65535uL, 0, 1);

		private static readonly BitPositionValue64 MaximumVoltagePosition = new BitPositionValue64(4294901760uL, 0, 1);

		public LogicalDevicePidProxyVoltageStats(ILogicalDevicePidULong devicePid = null)
			: base(devicePid)
		{
		}

		public LogicalDevicePidProxyVoltageStats(ILogicalDevice logicalDevice, Pid pid, LogicalDeviceSessionType writeAccess = (LogicalDeviceSessionType)0)
			: this((ILogicalDevicePidULong)new LogicalDevicePidULong(logicalDevice, PidExtension.ConvertToPid(pid), writeAccess, (Func<ulong, bool>)null, 72057594037927935uL))
		{
		}//IL_0002: Unknown result type (might be due to invalid IL or missing references)
		//IL_0008: Unknown result type (might be due to invalid IL or missing references)
		//IL_0013: Unknown result type (might be due to invalid IL or missing references)
		//IL_001d: Expected O, but got Unknown


		public static BatteryMonitorVoltageStats Decode(ulong value)
		{
			//IL_002c: Unknown result type (might be due to invalid IL or missing references)
			//IL_005e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0064: Unknown result type (might be due to invalid IL or missing references)
			//IL_0065: Unknown result type (might be due to invalid IL or missing references)
			//IL_0067: Unknown result type (might be due to invalid IL or missing references)
			//IL_0068: Unknown result type (might be due to invalid IL or missing references)
			//IL_009c: Unknown result type (might be due to invalid IL or missing references)
			//IL_009d: Unknown result type (might be due to invalid IL or missing references)
			//IL_008e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0096: Unknown result type (might be due to invalid IL or missing references)
			ushort num = (ushort)((BitPositionValue64)(ref MinimumVoltagePosition)).DecodeValue(value);
			Nullable<float> val = default(Nullable<float>);
			val..ctor(FixedPointUnsignedBigEndian8X8.ToFloat(num));
			if (num == 65535 || num == 65534)
			{
				val = default(Nullable<float>);
			}
			ushort num2 = (ushort)((BitPositionValue64)(ref MaximumVoltagePosition)).DecodeValue(value);
			Nullable<float> val2 = default(Nullable<float>);
			val2..ctor(FixedPointUnsignedBigEndian8X8.ToFloat(num2));
			if (num2 == 65535 || num2 == 65534)
			{
				val2 = default(Nullable<float>);
			}
			Nullable<float> val3 = val;
			Nullable<float> val4 = val2;
			if ((val3.GetValueOrDefault() > val4.GetValueOrDefault()) & (val3.HasValue & val4.HasValue))
			{
				val = default(Nullable<float>);
				val2 = default(Nullable<float>);
			}
			return new BatteryMonitorVoltageStats(val, val2);
		}

		public static ulong Encode(BatteryMonitorVoltageStats voltageStats)
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0011: Unknown result type (might be due to invalid IL or missing references)
			//IL_003a: Unknown result type (might be due to invalid IL or missing references)
			//IL_003f: Unknown result type (might be due to invalid IL or missing references)
			//IL_001d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0022: Unknown result type (might be due to invalid IL or missing references)
			//IL_004b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0050: Unknown result type (might be due to invalid IL or missing references)
			ulong num = 0uL;
			ulong num2 = 65535uL;
			if (voltageStats.MinimumBatteryVoltage.HasValue)
			{
				num2 = FixedPointUnsignedBigEndian8X8.ToFixedPoint(voltageStats.MinimumBatteryVoltage.Value);
			}
			ulong num3 = 65535uL;
			if (voltageStats.MaximumBatteryVoltage.HasValue)
			{
				num3 = FixedPointUnsignedBigEndian8X8.ToFixedPoint(voltageStats.MaximumBatteryVoltage.Value);
			}
			num = ((BitPositionValue64)(ref MinimumVoltagePosition)).EncodeValue(num2, num);
			return ((BitPositionValue64)(ref MaximumVoltagePosition)).EncodeValue(num3, num);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<BatteryMonitorVoltageStats> ReadAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ReadAsync>d__9 <ReadAsync>d__ = default(<ReadAsync>d__9);
			<ReadAsync>d__.<>t__builder = AsyncTaskMethodBuilder<BatteryMonitorVoltageStats>.Create();
			<ReadAsync>d__.<>4__this = this;
			<ReadAsync>d__.cancellationToken = cancellationToken;
			<ReadAsync>d__.<>1__state = -1;
			<ReadAsync>d__.<>t__builder.Start<<ReadAsync>d__9>(ref <ReadAsync>d__);
			return <ReadAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task WriteAsync(BatteryMonitorVoltageStats value, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<WriteAsync>d__10 <WriteAsync>d__ = default(<WriteAsync>d__10);
			<WriteAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<WriteAsync>d__.<>4__this = this;
			<WriteAsync>d__.value = value;
			<WriteAsync>d__.cancellationToken = cancellationToken;
			<WriteAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Start<<WriteAsync>d__10>(ref <WriteAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <WriteAsync>d__.<>t__builder)).Task;
		}
	}
}
namespace OneControl.Devices.AwningSensor
{
	public class AwningSensorException : LogicalDeviceException
	{
		public AwningSensorException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}
	}
	public class AwningSensorNotSupportedBySpecifiedAwningException : AwningSensorException
	{
		public AwningSensorNotSupportedBySpecifiedAwningException(ILogicalDeviceRelayHBridge awningLogicalDevice, Exception? innerException = null)
			: base(String.Format("{0} doesn't support pairing with awning sensor", (object)awningLogicalDevice), innerException)
		{
		}
	}
	public class AwningSensorCircuitIdNotAvailableException : AwningSensorException
	{
		public AwningSensorCircuitIdNotAvailableException(ILogicalDevice logicalDevice, Exception? innerException = null)
			: base(String.Format("Unable to get CircuitId for {0}", (object)logicalDevice), innerException)
		{
		}
	}
	public class AwningSensorUnableToAutoMakeLinkIdException : AwningSensorException
	{
		public AwningSensorUnableToAutoMakeLinkIdException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}
	}
	public class AwningSensorNotSupportedByDeviceException : AwningSensorException
	{
		public AwningSensorNotSupportedByDeviceException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}
	}
	public class AwningLightNotSupportedByRelayDeviceException : AwningSensorException
	{
		public AwningLightNotSupportedByRelayDeviceException(string message, Exception? innerException = null)
			: base(message, innerException)
		{
		}
	}
	public class AwningDeviceIsNotLinkedToLightException : AwningSensorException
	{
		public AwningDeviceIsNotLinkedToLightException(ILogicalDeviceRelayHBridge awningLogicalDevice, ILogicalDeviceLight lightLogicalDevice, Exception? innerException = null)
			: base(String.Format("Light {0} is not linked with {1}", (object)lightLogicalDevice, (object)awningLogicalDevice), innerException)
		{
		}
	}
	[DefaultValue(AudibleAlertState.AlertNotSounding)]
	public enum AudibleAlertState : Enum
	{
		AlertNotSounding,
		PreMovementAlertActive,
		IntraMovementAlertActive,
		Reserved,
		Unknown
	}
	[DefaultValue(PerceivedAwningState.Unknown)]
	public enum PerceivedAwningState : Enum
	{
		Unknown,
		Extending,
		Retracting,
		Stationary
	}
	public interface IAwningSensor
	{
		bool IsLowBattery { get; }

		int LowBatteryAlertCount { get; }

		bool IsLowWindAlertActive { get; }

		bool IsMediumWindAlertActive { get; }

		bool IsHighWindAlertActive { get; }

		AudibleAlertState AudibleAlertActive { get; }

		bool IsDeviceBatteryPowered { get; }

		bool IsDeviceAwningMounted { get; }

		ValueTuple<AngleAvailability, Nullable<float>> Angle { get; }

		Nullable<int> SensorBatteryChargePercent { get; }

		uint TryGetLinkId();
	}
	public interface ILogicalDeviceAwningSensor : IAwningSensor, ILogicalDeviceWithStatus<LogicalDeviceAwningSensorStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceAccessory, IAccessoryDevice, ILogicalDeviceFirmwareUpdateDevice, ILocapOtaAccessoryDevice
	{
		Task<uint> LinkWithAwningRelayAsync(ILogicalDeviceRelayHBridge awningRelayLogicalDevice, CancellationToken cancellationToken);

		Task<uint> LinkWithAwningAndLightAsync(ILogicalDeviceRelayHBridge awningRelayLogicalDevice, ILogicalDeviceLight lightLogicalDevice, CancellationToken cancellationToken);

		Task UnlinkWithLightAsync(ILogicalDeviceRelayHBridge awningRelayLogicalDevice, ILogicalDeviceLight lightLogicalDevice, CancellationToken cancellationToken);

		ILogicalDeviceRelayHBridge? GetAssociatedRelay();

		Task<byte> GetAudibleAlertRemainingTime(CancellationToken cancellationToken);

		Task<byte> GetAutoTerminationEnabledAndDebounce(CancellationToken cancellationToken);

		Task PlayAudibleAlertAsync(byte durationInSeconds, CancellationToken cancellationToken);
	}
	public interface ILogicalDeviceAwningSensorDirect : ILogicalDeviceAwningSensor, IAwningSensor, ILogicalDeviceWithStatus<LogicalDeviceAwningSensorStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceAccessory, IAccessoryDevice, ILogicalDeviceFirmwareUpdateDevice, ILocapOtaAccessoryDevice, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public class LogicalDeviceAwningSensor : LogicalDevice<LogicalDeviceAwningSensorStatus, ILogicalDeviceAwningSensorCapability>, ILogicalDeviceAwningSensorDirect, ILogicalDeviceAwningSensor, IAwningSensor, ILogicalDeviceWithStatus<LogicalDeviceAwningSensorStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, ILogicalDeviceAccessory, IAccessoryDevice, ILogicalDeviceFirmwareUpdateDevice, ILocapOtaAccessoryDevice, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
		[CompilerGenerated]
		private sealed class <>c__DisplayClass50_0 : Object
		{
			public ILogicalDeviceRelayHBridge awningRelayLogicalDevice;

			public Func<ILogicalDeviceLight, bool> <>9__0;

			internal bool <SupportedAwningLights>b__0(ILogicalDeviceLight ld)
			{
				return IsAwningLightSupportedByRelayHBridge(awningRelayLogicalDevice, ld);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <GetAudibleAlertRemainingTime>d__59 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<byte> <>t__builder;

			public CancellationToken cancellationToken;

			public LogicalDeviceAwningSensor <>4__this;

			private TaskAwaiter<byte[]> <>u__1;

			private void MoveNext()
			{
				//IL_00a8: Expected O, but got Unknown
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0084: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Invalid comparison between Unknown and I4
				//IL_001e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				//IL_004f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0054: Unknown result type (might be due to invalid IL or missing references)
				//IL_0038: Unknown result type (might be due to invalid IL or missing references)
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				//IL_0069: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAwningSensor logicalDeviceAwningSensor = <>4__this;
				byte result;
				try
				{
					TaskAwaiter<byte[]> val;
					if (num != 0)
					{
						if (((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
						{
							throw new TaskCanceledException();
						}
						if ((int)((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)logicalDeviceAwningSensor).ActiveConnection != 1)
						{
							throw new PhysicalDeviceNotFoundException("LogicalDeviceAwningSensor", (ILogicalDevice)(object)logicalDeviceAwningSensor, "");
						}
						val = ((ILogicalDevicePid<byte[]>)(object)logicalDeviceAwningSensor.AudibleAlertPid).ReadAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<byte[]>, <GetAudibleAlertRemainingTime>d__59>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<byte[]>);
						num = (<>1__state = -1);
					}
					result = val.GetResult()[0];
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <GetAutoTerminationEnabledAndDebounce>d__61 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<byte> <>t__builder;

			public CancellationToken cancellationToken;

			public LogicalDeviceAwningSensor <>4__this;

			private TaskAwaiter<byte[]> <>u__1;

			private void MoveNext()
			{
				//IL_00a8: Expected O, but got Unknown
				//IL_007f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0084: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Invalid comparison between Unknown and I4
				//IL_001e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				//IL_004f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0054: Unknown result type (might be due to invalid IL or missing references)
				//IL_0038: Unknown result type (might be due to invalid IL or missing references)
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				//IL_0069: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAwningSensor logicalDeviceAwningSensor = <>4__this;
				byte result;
				try
				{
					TaskAwaiter<byte[]> val;
					if (num != 0)
					{
						if (((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
						{
							throw new TaskCanceledException();
						}
						if ((int)((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)logicalDeviceAwningSensor).ActiveConnection != 1)
						{
							throw new PhysicalDeviceNotFoundException("LogicalDeviceAwningSensor", (ILogicalDevice)(object)logicalDeviceAwningSensor, "");
						}
						val = ((ILogicalDevicePid<byte[]>)(object)logicalDeviceAwningSensor.AudibleAlertPid).ReadAsync(cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<byte[]>, <GetAutoTerminationEnabledAndDebounce>d__61>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<byte[]>);
						num = (<>1__state = -1);
					}
					result = val.GetResult()[1];
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <GetOrMakeLinkIdAsync>d__58 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<uint> <>t__builder;

			public CancellationToken cancellationToken;

			public LogicalDeviceAwningSensor <>4__this;

			private uint <awningLinkId>5__2;

			private TaskAwaiter<bool> <>u__1;

			private TaskAwaiter<LogicalDeviceCircuitIdWriteResult> <>u__2;

			private void MoveNext()
			{
				//IL_01b0: Expected O, but got Unknown
				//IL_009b: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a7: Unknown result type (might be due to invalid IL or missing references)
				//IL_0158: Unknown result type (might be due to invalid IL or missing references)
				//IL_015d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0165: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bf: Unknown result type (might be due to invalid IL or missing references)
				//IL_0176: Unknown result type (might be due to invalid IL or missing references)
				//IL_017b: Unknown result type (might be due to invalid IL or missing references)
				//IL_017d: Unknown result type (might be due to invalid IL or missing references)
				//IL_002f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0035: Invalid comparison between Unknown and I4
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0191: Unknown result type (might be due to invalid IL or missing references)
				//IL_0042: Unknown result type (might be due to invalid IL or missing references)
				//IL_0113: Unknown result type (might be due to invalid IL or missing references)
				//IL_0119: Unknown result type (might be due to invalid IL or missing references)
				//IL_0123: Unknown result type (might be due to invalid IL or missing references)
				//IL_0128: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				//IL_006d: Unknown result type (might be due to invalid IL or missing references)
				//IL_013d: Unknown result type (might be due to invalid IL or missing references)
				//IL_013f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0081: Unknown result type (might be due to invalid IL or missing references)
				//IL_0082: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAwningSensor logicalDeviceAwningSensor = <>4__this;
				uint result2;
				try
				{
					TaskAwaiter<LogicalDeviceCircuitIdWriteResult> val;
					TaskAwaiter<bool> val2;
					if (num != 0)
					{
						if (num == 1)
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<LogicalDeviceCircuitIdWriteResult>);
							num = (<>1__state = -1);
							goto IL_0174;
						}
						if (((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
						{
							throw new TaskCanceledException();
						}
						if ((int)((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)logicalDeviceAwningSensor).ActiveConnection != 1)
						{
							throw new PhysicalDeviceNotFoundException("LogicalDeviceAwningSensor", (ILogicalDevice)(object)logicalDeviceAwningSensor, "");
						}
						if (((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)logicalDeviceAwningSensor).CircuitId.HasValueBeenLoaded)
						{
							goto IL_00da;
						}
						val2 = TaskExtension.TryDelay(5000, cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <GetOrMakeLinkIdAsync>d__58>(ref val2, ref this);
							return;
						}
					}
					else
					{
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
					}
					if (!val2.GetResult())
					{
						throw new TaskCanceledException();
					}
					if (!((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)logicalDeviceAwningSensor).CircuitId.HasValueBeenLoaded)
					{
						throw new AwningSensorCircuitIdNotAvailableException((ILogicalDevice)(object)logicalDeviceAwningSensor);
					}
					goto IL_00da;
					IL_0174:
					LogicalDeviceCircuitIdWriteResult result = val.GetResult();
					if ((int)result != 0)
					{
						throw new AwningSensorUnableToAutoMakeLinkIdException(String.Format("Unable to write Circuit ID 0x{0:X} because of {1} for awning sensor for {2}", (object)<awningLinkId>5__2, (object)result, (object)logicalDeviceAwningSensor));
					}
					goto IL_01a5;
					IL_00da:
					<awningLinkId>5__2 = CIRCUIT_ID.op_Implicit(((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)logicalDeviceAwningSensor).CircuitId.Value);
					if (<awningLinkId>5__2 == 0)
					{
						<awningLinkId>5__2 = DefaultLinkId(logicalDeviceAwningSensor);
						val = ((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)logicalDeviceAwningSensor).CircuitId.WriteValueAsync(CIRCUIT_ID.op_Implicit(<awningLinkId>5__2), cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<LogicalDeviceCircuitIdWriteResult>, <GetOrMakeLinkIdAsync>d__58>(ref val, ref this);
							return;
						}
						goto IL_0174;
					}
					goto IL_01a5;
					IL_01a5:
					result2 = <awningLinkId>5__2;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <LinkWithAwningAndLightAsync>d__54 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<uint> <>t__builder;

			public ILogicalDeviceRelayHBridge awningRelayLogicalDevice;

			public ILogicalDeviceLight lightLogicalDevice;

			public CancellationToken cancellationToken;

			public LogicalDeviceAwningSensor <>4__this;

			private uint <awningLinkId>5__2;

			private TaskAwaiter<bool> <>u__1;

			private TaskAwaiter<uint> <>u__2;

			private TaskAwaiter<LogicalDeviceCircuitIdWriteResult> <>u__3;

			private void MoveNext()
			{
				//IL_0283: Expected O, but got Unknown
				//IL_00f2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ff: Unknown result type (might be due to invalid IL or missing references)
				//IL_017e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0183: Unknown result type (might be due to invalid IL or missing references)
				//IL_018b: Unknown result type (might be due to invalid IL or missing references)
				//IL_023a: Unknown result type (might be due to invalid IL or missing references)
				//IL_023f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0247: Unknown result type (might be due to invalid IL or missing references)
				//IL_0258: Unknown result type (might be due to invalid IL or missing references)
				//IL_025d: Unknown result type (might be due to invalid IL or missing references)
				//IL_025e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0117: Unknown result type (might be due to invalid IL or missing references)
				//IL_01cf: Unknown result type (might be due to invalid IL or missing references)
				//IL_01b8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0266: Unknown result type (might be due to invalid IL or missing references)
				//IL_007a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Invalid comparison between Unknown and I4
				//IL_013f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0149: Unknown result type (might be due to invalid IL or missing references)
				//IL_014e: Unknown result type (might be due to invalid IL or missing references)
				//IL_01f8: Unknown result type (might be due to invalid IL or missing references)
				//IL_01fe: Unknown result type (might be due to invalid IL or missing references)
				//IL_0208: Unknown result type (might be due to invalid IL or missing references)
				//IL_020d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0092: Unknown result type (might be due to invalid IL or missing references)
				//IL_0163: Unknown result type (might be due to invalid IL or missing references)
				//IL_0165: Unknown result type (might be due to invalid IL or missing references)
				//IL_0222: Unknown result type (might be due to invalid IL or missing references)
				//IL_0224: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bd: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAwningSensor logicalDeviceAwningSensor = <>4__this;
				uint result2;
				try
				{
					TaskAwaiter<bool> val3;
					TaskAwaiter<uint> val2;
					TaskAwaiter<LogicalDeviceCircuitIdWriteResult> val;
					uint result;
					switch (num)
					{
					default:
						if (!IsAwningSensorSupportedByRelayHBridge(awningRelayLogicalDevice))
						{
							throw new AwningSensorNotSupportedByDeviceException(String.Format("Awning Relay {0} doesn't support linking to awning sensor", (object)awningRelayLogicalDevice));
						}
						if (!IsAwningLightSupportedByRelayHBridge(awningRelayLogicalDevice, lightLogicalDevice))
						{
							throw new AwningLightNotSupportedByRelayDeviceException(String.Format("Awning Relay {0} can't control {1}", (object)awningRelayLogicalDevice, (object)lightLogicalDevice));
						}
						if ((int)((IDevicesCommon)lightLogicalDevice).ActiveConnection != 1)
						{
							throw new PhysicalDeviceNotFoundException("LogicalDeviceAwningSensor", (ILogicalDevice)lightLogicalDevice, "");
						}
						if (!((ILogicalDevice)lightLogicalDevice).CircuitId.HasValueBeenLoaded)
						{
							val3 = TaskExtension.TryDelay(5000, cancellationToken).GetAwaiter();
							if (!val3.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val3;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <LinkWithAwningAndLightAsync>d__54>(ref val3, ref this);
								return;
							}
							goto IL_010e;
						}
						goto IL_0137;
					case 0:
						val3 = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_010e;
					case 1:
						val2 = <>u__2;
						<>u__2 = default(TaskAwaiter<uint>);
						num = (<>1__state = -1);
						goto IL_019a;
					case 2:
						{
							val = <>u__3;
							<>u__3 = default(TaskAwaiter<LogicalDeviceCircuitIdWriteResult>);
							num = (<>1__state = -1);
							break;
						}
						IL_019a:
						result = val2.GetResult();
						<awningLinkId>5__2 = result;
						if (((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
						{
							throw new TaskCanceledException();
						}
						if (<awningLinkId>5__2 != CIRCUIT_ID.op_Implicit(((ILogicalDevice)lightLogicalDevice).CircuitId.Value))
						{
							val = ((ILogicalDevice)lightLogicalDevice).CircuitId.WriteValueAsync(CIRCUIT_ID.op_Implicit(<awningLinkId>5__2), cancellationToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 2);
								<>u__3 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<LogicalDeviceCircuitIdWriteResult>, <LinkWithAwningAndLightAsync>d__54>(ref val, ref this);
								return;
							}
							break;
						}
						result2 = <awningLinkId>5__2;
						goto end_IL_000e;
						IL_0137:
						val2 = logicalDeviceAwningSensor.LinkWithAwningRelayAsync(awningRelayLogicalDevice, cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<uint>, <LinkWithAwningAndLightAsync>d__54>(ref val2, ref this);
							return;
						}
						goto IL_019a;
						IL_010e:
						if (!val3.GetResult())
						{
							throw new TaskCanceledException();
						}
						if (!((ILogicalDevice)lightLogicalDevice).CircuitId.HasValueBeenLoaded)
						{
							throw new AwningSensorCircuitIdNotAvailableException((ILogicalDevice)(object)logicalDeviceAwningSensor);
						}
						goto IL_0137;
					}
					LogicalDeviceCircuitIdWriteResult result3 = val.GetResult();
					if ((int)result3 != 0)
					{
						throw new AwningSensorUnableToAutoMakeLinkIdException(String.Format("Problem updating associated light circuit id, returned result: {0}", (object)result3));
					}
					result2 = <awningLinkId>5__2;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <LinkWithAwningRelayAsync>d__53 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<uint> <>t__builder;

			public ILogicalDeviceRelayHBridge awningRelayLogicalDevice;

			public LogicalDeviceAwningSensor <>4__this;

			public CancellationToken cancellationToken;

			private uint <awningLinkId>5__2;

			private TaskAwaiter<uint> <>u__1;

			private TaskAwaiter<LogicalDeviceCircuitIdWriteResult> <>u__2;

			private void MoveNext()
			{
				//IL_01a9: Expected O, but got Unknown
				//IL_00a4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0160: Unknown result type (might be due to invalid IL or missing references)
				//IL_0165: Unknown result type (might be due to invalid IL or missing references)
				//IL_016d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_00de: Unknown result type (might be due to invalid IL or missing references)
				//IL_017e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0183: Unknown result type (might be due to invalid IL or missing references)
				//IL_0184: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				//IL_004b: Invalid comparison between Unknown and I4
				//IL_011e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0124: Unknown result type (might be due to invalid IL or missing references)
				//IL_012e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0133: Unknown result type (might be due to invalid IL or missing references)
				//IL_018c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0074: Unknown result type (might be due to invalid IL or missing references)
				//IL_005d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0148: Unknown result type (might be due to invalid IL or missing references)
				//IL_014a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAwningSensor logicalDeviceAwningSensor = <>4__this;
				uint result2;
				try
				{
					TaskAwaiter<LogicalDeviceCircuitIdWriteResult> val;
					TaskAwaiter<uint> val2;
					if (num != 0)
					{
						if (num == 1)
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<LogicalDeviceCircuitIdWriteResult>);
							num = (<>1__state = -1);
							goto IL_017c;
						}
						if (!IsAwningSensorSupportedByRelayHBridge(awningRelayLogicalDevice))
						{
							throw new AwningSensorNotSupportedByDeviceException(String.Format("Awning Relay {0} doesn't support linking to awning sensor", (object)awningRelayLogicalDevice));
						}
						if ((int)((IDevicesCommon)awningRelayLogicalDevice).ActiveConnection != 1)
						{
							throw new PhysicalDeviceNotFoundException("LogicalDeviceAwningSensor", (ILogicalDevice)awningRelayLogicalDevice, "");
						}
						val2 = logicalDeviceAwningSensor.GetOrMakeLinkIdAsync(cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<uint>, <LinkWithAwningRelayAsync>d__53>(ref val2, ref this);
							return;
						}
					}
					else
					{
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<uint>);
						num = (<>1__state = -1);
					}
					uint result = val2.GetResult();
					<awningLinkId>5__2 = result;
					if (((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
					{
						throw new TaskCanceledException();
					}
					if (<awningLinkId>5__2 != CIRCUIT_ID.op_Implicit(((ILogicalDevice)awningRelayLogicalDevice).CircuitId.Value))
					{
						val = ((ILogicalDevice)awningRelayLogicalDevice).CircuitId.WriteValueAsync(CIRCUIT_ID.op_Implicit(<awningLinkId>5__2), cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<LogicalDeviceCircuitIdWriteResult>, <LinkWithAwningRelayAsync>d__53>(ref val, ref this);
							return;
						}
						goto IL_017c;
					}
					result2 = <awningLinkId>5__2;
					goto end_IL_000e;
					IL_017c:
					LogicalDeviceCircuitIdWriteResult result3 = val.GetResult();
					if ((int)result3 != 0)
					{
						throw new AwningSensorUnableToAutoMakeLinkIdException(String.Format("Problem updating awning relay circuit id, returned result: {0}", (object)result3));
					}
					result2 = <awningLinkId>5__2;
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <PlayAudibleAlertAsync>d__60 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public byte durationInSeconds;

			public LogicalDeviceAwningSensor <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_0089: Expected O, but got Unknown
				//IL_0063: Unknown result type (might be due to invalid IL or missing references)
				//IL_0068: Unknown result type (might be due to invalid IL or missing references)
				//IL_006f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0029: Unknown result type (might be due to invalid IL or missing references)
				//IL_0033: Unknown result type (might be due to invalid IL or missing references)
				//IL_0038: Unknown result type (might be due to invalid IL or missing references)
				//IL_004c: Unknown result type (might be due to invalid IL or missing references)
				//IL_004d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAwningSensor logicalDeviceAwningSensor = <>4__this;
				try
				{
					TaskAwaiter val;
					if (num != 0)
					{
						byte[] array = (byte[])(object)new Byte[6]
						{
							durationInSeconds,
							default(Byte),
							default(Byte),
							default(Byte),
							default(Byte),
							default(Byte)
						};
						val = ((ILogicalDevicePid<byte[]>)(object)logicalDeviceAwningSensor.AudibleAlertPid).WriteAsync(array, cancellationToken).GetAwaiter();
						if (!((TaskAwaiter)(ref val)).IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <PlayAudibleAlertAsync>d__60>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter);
						num = (<>1__state = -1);
					}
					((TaskAwaiter)(ref val)).GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <UnlinkWithLightAsync>d__55 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public ILogicalDeviceLight lightLogicalDevice;

			public CancellationToken cancellationToken;

			public LogicalDeviceAwningSensor <>4__this;

			public ILogicalDeviceRelayHBridge awningRelayLogicalDevice;

			private TaskAwaiter<bool> <>u__1;

			private TaskAwaiter<LogicalDeviceCircuitIdWriteResult> <>u__2;

			private void MoveNext()
			{
				//IL_01aa: Expected O, but got Unknown
				//IL_0097: Unknown result type (might be due to invalid IL or missing references)
				//IL_009c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0168: Unknown result type (might be due to invalid IL or missing references)
				//IL_016d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0175: Unknown result type (might be due to invalid IL or missing references)
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Invalid comparison between Unknown and I4
				//IL_00bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_0186: Unknown result type (might be due to invalid IL or missing references)
				//IL_018b: Unknown result type (might be due to invalid IL or missing references)
				//IL_018c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0039: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00fb: Unknown result type (might be due to invalid IL or missing references)
				//IL_0194: Unknown result type (might be due to invalid IL or missing references)
				//IL_005a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				//IL_0069: Unknown result type (might be due to invalid IL or missing references)
				//IL_0126: Unknown result type (might be due to invalid IL or missing references)
				//IL_012c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0136: Unknown result type (might be due to invalid IL or missing references)
				//IL_013b: Unknown result type (might be due to invalid IL or missing references)
				//IL_007d: Unknown result type (might be due to invalid IL or missing references)
				//IL_007e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0150: Unknown result type (might be due to invalid IL or missing references)
				//IL_0152: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAwningSensor logicalDevice = <>4__this;
				try
				{
					TaskAwaiter<LogicalDeviceCircuitIdWriteResult> val;
					TaskAwaiter<bool> val2;
					if (num != 0)
					{
						if (num == 1)
						{
							val = <>u__2;
							<>u__2 = default(TaskAwaiter<LogicalDeviceCircuitIdWriteResult>);
							num = (<>1__state = -1);
							goto IL_0184;
						}
						if ((int)((IDevicesCommon)lightLogicalDevice).ActiveConnection != 1)
						{
							throw new PhysicalDeviceNotFoundException("LogicalDeviceAwningSensor", (ILogicalDevice)lightLogicalDevice, "");
						}
						if (((ILogicalDevice)lightLogicalDevice).CircuitId.HasValueBeenLoaded)
						{
							goto IL_00db;
						}
						val2 = TaskExtension.TryDelay(5000, cancellationToken).GetAwaiter();
						if (!val2.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val2;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <UnlinkWithLightAsync>d__55>(ref val2, ref this);
							return;
						}
					}
					else
					{
						val2 = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
					}
					if (!val2.GetResult())
					{
						throw new TaskCanceledException();
					}
					if (!((ILogicalDevice)lightLogicalDevice).CircuitId.HasValueBeenLoaded)
					{
						throw new AwningSensorCircuitIdNotAvailableException((ILogicalDevice)(object)logicalDevice);
					}
					goto IL_00db;
					IL_00db:
					if (CIRCUIT_ID.op_Implicit(((ILogicalDevice)awningRelayLogicalDevice).CircuitId.Value) != CIRCUIT_ID.op_Implicit(((ILogicalDevice)lightLogicalDevice).CircuitId.Value))
					{
						throw new AwningDeviceIsNotLinkedToLightException(awningRelayLogicalDevice, lightLogicalDevice);
					}
					val = ((ILogicalDevice)lightLogicalDevice).CircuitId.WriteValueAsync(CIRCUIT_ID.op_Implicit(0u), cancellationToken).GetAwaiter();
					if (!val.IsCompleted)
					{
						num = (<>1__state = 1);
						<>u__2 = val;
						((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<LogicalDeviceCircuitIdWriteResult>, <UnlinkWithLightAsync>d__55>(ref val, ref this);
						return;
					}
					goto IL_0184;
					IL_0184:
					LogicalDeviceCircuitIdWriteResult result = val.GetResult();
					if ((int)result != 0)
					{
						throw new AwningSensorUnableToAutoMakeLinkIdException(String.Format("Problem updating associated light circuit id, returned result: {0}", (object)result));
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <UpdateFirmwareAsync>d__66 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceAwningSensor <>4__this;

			public CancellationToken cancellationToken;

			public IReadOnlyList<byte> data;

			public Func<ILogicalDeviceTransferProgress, bool> progressAck;

			public Dictionary<FirmwareUpdateOption, object> options;

			private ILogicalDeviceFirmwareUpdateSession <firmwareUpdateSession>5__2;

			private TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice?> <>u__1;

			private TaskAwaiter <>u__2;

			private void MoveNext()
			{
				//IL_0142: Expected O, but got Unknown
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_0103: Unknown result type (might be due to invalid IL or missing references)
				//IL_0108: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00eb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ed: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAwningSensor logicalDeviceAwningSensor = <>4__this;
				try
				{
					TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice> val;
					if (num != 0)
					{
						if (num == 1)
						{
							goto IL_00a9;
						}
						val = FirmwareUpdateSupportEx.TryGetSupportedFirmwareUpdateDeviceSource(((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)logicalDeviceAwningSensor).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceAwningSensor, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>, <UpdateFirmwareAsync>d__66>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>);
						num = (<>1__state = -1);
					}
					ILogicalDeviceSourceDirectFirmwareUpdateDevice result = val.GetResult();
					if (result == null)
					{
						throw new FirmwareUpdateNotSupportedException((ILogicalDevice)(object)logicalDeviceAwningSensor, (FirmwareUpdateSupport)0, (Exception)null);
					}
					<firmwareUpdateSession>5__2 = ((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)logicalDeviceAwningSensor).DeviceService.FirmwareUpdateManager.StartFirmwareUpdateSession((ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceAwningSensor);
					goto IL_00a9;
					IL_00a9:
					try
					{
						TaskAwaiter val2;
						if (num != 1)
						{
							val2 = ((IFirmwareUpdateDevice)result).UpdateFirmwareAsync(<firmwareUpdateSession>5__2, data, progressAck, cancellationToken, (IReadOnlyDictionary<FirmwareUpdateOption, object>)(object)options).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <UpdateFirmwareAsync>d__66>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
					}
					finally
					{
						if (num < 0 && <firmwareUpdateSession>5__2 != null)
						{
							((IDisposable)<firmwareUpdateSession>5__2).Dispose();
						}
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<firmwareUpdateSession>5__2 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<firmwareUpdateSession>5__2 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private const string LogTag = "LogicalDeviceAwningSensor";

		private const int WaitTimeForCircuitIdToLoadMs = 5000;

		public const uint InvalidLinkId = 0u;

		private const int MacSize = 6;

		private const int MacOffsetForLinkId = 2;

		protected ILogicalDevicePidULong MetricsControlPid;

		protected ILogicalDevicePidArrayBytes AudibleAlertPid;

		protected const ushort ResetWindAlertCountsBitMask = 1;

		protected const ushort ResetLowBatteryCountsBitMask = 2;

		private const int RemainingTimeIndex = 0;

		private const int AutoTerminationEnabledIndex = 1;

		private const int PidBytesLength = 6;

		public const string LowWindSpeedAlertKey = "LowWindSpeedAlert";

		public const string MediumWindSpeedAlertKey = "MediumWindSpeedAlert";

		public const string HighWindSpeedAlertKey = "HighWindSpeedAlert";

		private readonly Dictionary<FirmwareUpdateOption, string> _defaultFirmwareUpdateOptions = new Dictionary<FirmwareUpdateOption, string>();

		private readonly ConcurrentDictionary<string, ILogicalDeviceAlert> _alertDict = new ConcurrentDictionary<string, ILogicalDeviceAlert>();

		public override bool IsLegacyDeviceHazardous => false;

		public bool IsLowWindAlertActive => ((LogicalDevice<LogicalDeviceAwningSensorStatus, ILogicalDeviceAwningSensorCapability>)(object)this).DeviceStatus.IsWindEventAlertActive(AwningWindStrength.High);

		public bool IsMediumWindAlertActive => ((LogicalDevice<LogicalDeviceAwningSensorStatus, ILogicalDeviceAwningSensorCapability>)(object)this).DeviceStatus.IsWindEventAlertActive(AwningWindStrength.Medium);

		public bool IsHighWindAlertActive => ((LogicalDevice<LogicalDeviceAwningSensorStatus, ILogicalDeviceAwningSensorCapability>)(object)this).DeviceStatus.IsWindEventAlertActive(AwningWindStrength.Low);

		public int LowWindSpeedAlertCount => ((LogicalDevice<LogicalDeviceAwningSensorStatus, ILogicalDeviceAwningSensorCapability>)(object)this).DeviceStatus.WindEventAlertCount(AwningWindStrength.High);

		public int MediumWindSpeedAlertCount => ((LogicalDevice<LogicalDeviceAwningSensorStatus, ILogicalDeviceAwningSensorCapability>)(object)this).DeviceStatus.WindEventAlertCount(AwningWindStrength.Medium);

		public int HighWindSpeedAlertCount => ((LogicalDevice<LogicalDeviceAwningSensorStatus, ILogicalDeviceAwningSensorCapability>)(object)this).DeviceStatus.WindEventAlertCount(AwningWindStrength.Low);

		public AudibleAlertState AudibleAlertActive => ((LogicalDevice<LogicalDeviceAwningSensorStatus, ILogicalDeviceAwningSensorCapability>)(object)this).DeviceStatus.AudibleAlertState;

		public bool IsDeviceBatteryPowered => ((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)this).DeviceCapability.IsDeviceBatteryPowered;

		public bool IsDeviceAwningMounted => ((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)this).DeviceCapability.IsDeviceAwningMounted;

		public ValueTuple<AngleAvailability, Nullable<float>> Angle => ((LogicalDevice<LogicalDeviceAwningSensorStatus, ILogicalDeviceAwningSensorCapability>)(object)this).DeviceStatus.Angle;

		public bool AllowAutoOfflineLogicalDeviceRemoval => false;

		public Nullable<int> SensorBatteryChargePercent => ((LogicalDevice<LogicalDeviceAwningSensorStatus, ILogicalDeviceAwningSensorCapability>)(object)this).DeviceStatus.BatteryChargePercent;

		public virtual bool IsLowBattery => ((LogicalDevice<LogicalDeviceAwningSensorStatus, ILogicalDeviceAwningSensorCapability>)(object)this).DeviceStatus.IsLowBattery;

		public int LowBatteryAlertCount => ((LogicalDevice<LogicalDeviceAwningSensorStatus, ILogicalDeviceAwningSensorCapability>)(object)this).DeviceStatus.LowBatteryAlertCount;

		public IReadOnlyDictionary<FirmwareUpdateOption, string> DefaultFirmwareUpdateOptions => (IReadOnlyDictionary<FirmwareUpdateOption, string>)(object)_defaultFirmwareUpdateOptions;

		public IEnumerable<ILogicalDeviceAlert> Alerts => (IEnumerable<ILogicalDeviceAlert>)(object)_alertDict.Values;

		public bool IsAccessoryGatewaySupported => true;

		public LogicalDeviceAwningSensor(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService deviceService, ILogicalDeviceAwningSensorCapability awningSensorCapability, bool isFunctionClassChangeable = false)
			: base(logicalDeviceId, new LogicalDeviceAwningSensorStatus(), awningSensorCapability, deviceService, isFunctionClassChangeable)
		{
			//IL_0052: Unknown result type (might be due to invalid IL or missing references)
			//IL_005c: Expected O, but got Unknown
			//IL_0065: Unknown result type (might be due to invalid IL or missing references)
			//IL_006f: Expected O, but got Unknown
			TaggedLog.Debug("LogicalDeviceAwningSensor", String.Format("Creating LogicalDeviceAwningSensor with AwningSensorCapability: {0}", (object)awningSensorCapability), Array.Empty<object>());
			MetricsControlPid = (ILogicalDevicePidULong)new LogicalDevicePidULong((ILogicalDevice)(object)this, PID.ACCESSORY_SETTING_01, (LogicalDeviceSessionType)2, (Func<ulong, bool>)null, 72057594037927935uL);
			AudibleAlertPid = (ILogicalDevicePidArrayBytes)new LogicalDevicePidArrayBytes((ILogicalDevice)(object)this, PID.ACCESSORY_SETTING_02, (LogicalDeviceSessionType)2, 6);
		}

		public override void OnDeviceStatusChanged()
		{
			base.OnDeviceStatusChanged();
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("SensorBatteryChargePercent", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsLowBattery", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("LowBatteryAlertCount", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsLowWindAlertActive", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsMediumWindAlertActive", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("IsHighWindAlertActive", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("LowWindSpeedAlertCount", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("MediumWindSpeedAlertCount", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("HighWindSpeedAlertCount", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("AudibleAlertActive", true);
			((CommonNotifyPropertyChanged)this).NotifyPropertyChanged("Angle", true);
		}

		public ILogicalDeviceRelayHBridge? GetAssociatedRelay()
		{
			ILogicalDeviceManager deviceManager = ((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)this).DeviceService.DeviceManager;
			List<ILogicalDeviceRelayHBridge> val = ((deviceManager != null) ? deviceManager.FindLogicalDevices<ILogicalDeviceRelayHBridge>((Func<ILogicalDeviceRelayHBridge, bool>)([CompilerGenerated] (ILogicalDeviceRelayHBridge ld) => GetRelayAssociation(ld) == DeviceAssociation.AssociatedToSelf)) : null);
			if (val != null && val.Count > 1)
			{
				TaggedLog.Error("LogicalDeviceAwningSensor", String.Format("{0} associated relays found for awning sensor, only 1 is expected.", (object)val.Count), Array.Empty<object>());
			}
			if (val == null)
			{
				return null;
			}
			return Enumerable.FirstOrDefault<ILogicalDeviceRelayHBridge>((IEnumerable<ILogicalDeviceRelayHBridge>)(object)val);
		}

		public DeviceAssociation GetRelayAssociation(ILogicalDeviceRelayHBridge relay)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0029: Unknown result type (might be due to invalid IL or missing references)
			//IL_0039: Unknown result type (might be due to invalid IL or missing references)
			if ((int)((IDevicesCommon)relay).ActiveConnection == 0)
			{
				return DeviceAssociation.Unknown;
			}
			if (!(relay is ILogicalDeviceRelayHBridgeWithAssociatedAwningSensor))
			{
				return DeviceAssociation.NotSupported;
			}
			if (!((ILogicalDevice)relay).CircuitId.HasValueBeenLoaded)
			{
				return DeviceAssociation.Supported;
			}
			if (CIRCUIT_ID.op_Implicit(((ILogicalDevice)relay).CircuitId.Value) == CIRCUIT_ID.op_Implicit(((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)this).CircuitId.Value))
			{
				return DeviceAssociation.AssociatedToSelf;
			}
			return DeviceAssociation.AssociatedToOther;
		}

		[IteratorStateMachine(/*Could not decode attribute arguments.*/)]
		public static IEnumerable<ILogicalDeviceRelayHBridge> SupportedAwningRelays(ILogicalDeviceManager? deviceManager, Func<ILogicalDeviceRelayHBridge, bool>? customFilter)
		{
			if (deviceManager == null || ((ICommonDisposable)deviceManager).IsDisposed)
			{
				yield break;
			}
			Enumerator<ILogicalDeviceRelayHBridge> enumerator = deviceManager.FindLogicalDevices<ILogicalDeviceRelayHBridge>((Func<ILogicalDeviceRelayHBridge, bool>)IsAwningSensorSupportedByRelayHBridge).GetEnumerator();
			try
			{
				while (enumerator.MoveNext())
				{
					ILogicalDeviceRelayHBridge current = enumerator.Current;
					if (customFilter?.Invoke(current) ?? true)
					{
						yield return current;
					}
				}
			}
			finally
			{
				((IDisposable)enumerator/*cast due to .constrained prefix*/).Dispose();
			}
		}

		[IteratorStateMachine(/*Could not decode attribute arguments.*/)]
		public static IEnumerable<ILogicalDeviceLight> SupportedAwningLights(ILogicalDeviceManager? deviceManager, ILogicalDeviceRelayHBridge awningRelayLogicalDevice, Func<ILogicalDeviceLight, bool>? customFilter)
		{
			<>c__DisplayClass50_0 CS$<>8__locals3 = new <>c__DisplayClass50_0();
			CS$<>8__locals3.awningRelayLogicalDevice = awningRelayLogicalDevice;
			if (deviceManager == null || ((ICommonDisposable)deviceManager).IsDisposed || !IsAwningSensorSupportedByRelayHBridge(CS$<>8__locals3.awningRelayLogicalDevice))
			{
				yield break;
			}
			Enumerator<ILogicalDeviceLight> enumerator = deviceManager.FindLogicalDevices<ILogicalDeviceLight>((Func<ILogicalDeviceLight, bool>)((ILogicalDeviceLight ld) => IsAwningLightSupportedByRelayHBridge(CS$<>8__locals3.awningRelayLogicalDevice, ld))).GetEnumerator();
			try
			{
				while (enumerator.MoveNext())
				{
					ILogicalDeviceLight current = enumerator.Current;
					if (customFilter?.Invoke(current) ?? true)
					{
						yield return current;
					}
				}
			}
			finally
			{
				((IDisposable)enumerator/*cast due to .constrained prefix*/).Dispose();
			}
		}

		public static bool IsAwningSensorSupportedByRelayHBridge(ILogicalDeviceRelayHBridge awningRelayLogicalDevice)
		{
			if (awningRelayLogicalDevice.DeviceCategory == DeviceCategory.Awning && awningRelayLogicalDevice.IsAwningSensorSupported)
			{
				return (PhysicalAddress)(object)((ILogicalDevice)awningRelayLogicalDevice).LogicalId.ProductMacAddress != (PhysicalAddress)null;
			}
			return false;
		}

		public static bool IsAwningLightSupportedByRelayHBridge(ILogicalDeviceRelayHBridge awningRelayLogicalDevice, ILogicalDeviceLight lightLogicalDevice)
		{
			if (IsAwningSensorSupportedByRelayHBridge(awningRelayLogicalDevice))
			{
				return (PhysicalAddress)(object)((ILogicalDevice)awningRelayLogicalDevice).LogicalId.ProductMacAddress == (PhysicalAddress)(object)((ILogicalDevice)lightLogicalDevice).LogicalId.ProductMacAddress;
			}
			return false;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<uint> LinkWithAwningRelayAsync(ILogicalDeviceRelayHBridge awningRelayLogicalDevice, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<LinkWithAwningRelayAsync>d__53 <LinkWithAwningRelayAsync>d__ = default(<LinkWithAwningRelayAsync>d__53);
			<LinkWithAwningRelayAsync>d__.<>t__builder = AsyncTaskMethodBuilder<uint>.Create();
			<LinkWithAwningRelayAsync>d__.<>4__this = this;
			<LinkWithAwningRelayAsync>d__.awningRelayLogicalDevice = awningRelayLogicalDevice;
			<LinkWithAwningRelayAsync>d__.cancellationToken = cancellationToken;
			<LinkWithAwningRelayAsync>d__.<>1__state = -1;
			<LinkWithAwningRelayAsync>d__.<>t__builder.Start<<LinkWithAwningRelayAsync>d__53>(ref <LinkWithAwningRelayAsync>d__);
			return <LinkWithAwningRelayAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<uint> LinkWithAwningAndLightAsync(ILogicalDeviceRelayHBridge awningRelayLogicalDevice, ILogicalDeviceLight lightLogicalDevice, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<LinkWithAwningAndLightAsync>d__54 <LinkWithAwningAndLightAsync>d__ = default(<LinkWithAwningAndLightAsync>d__54);
			<LinkWithAwningAndLightAsync>d__.<>t__builder = AsyncTaskMethodBuilder<uint>.Create();
			<LinkWithAwningAndLightAsync>d__.<>4__this = this;
			<LinkWithAwningAndLightAsync>d__.awningRelayLogicalDevice = awningRelayLogicalDevice;
			<LinkWithAwningAndLightAsync>d__.lightLogicalDevice = lightLogicalDevice;
			<LinkWithAwningAndLightAsync>d__.cancellationToken = cancellationToken;
			<LinkWithAwningAndLightAsync>d__.<>1__state = -1;
			<LinkWithAwningAndLightAsync>d__.<>t__builder.Start<<LinkWithAwningAndLightAsync>d__54>(ref <LinkWithAwningAndLightAsync>d__);
			return <LinkWithAwningAndLightAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task UnlinkWithLightAsync(ILogicalDeviceRelayHBridge awningRelayLogicalDevice, ILogicalDeviceLight lightLogicalDevice, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<UnlinkWithLightAsync>d__55 <UnlinkWithLightAsync>d__ = default(<UnlinkWithLightAsync>d__55);
			<UnlinkWithLightAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<UnlinkWithLightAsync>d__.<>4__this = this;
			<UnlinkWithLightAsync>d__.awningRelayLogicalDevice = awningRelayLogicalDevice;
			<UnlinkWithLightAsync>d__.lightLogicalDevice = lightLogicalDevice;
			<UnlinkWithLightAsync>d__.cancellationToken = cancellationToken;
			<UnlinkWithLightAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <UnlinkWithLightAsync>d__.<>t__builder)).Start<<UnlinkWithLightAsync>d__55>(ref <UnlinkWithLightAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <UnlinkWithLightAsync>d__.<>t__builder)).Task;
		}

		public static uint DefaultLinkId(ILogicalDeviceAwningSensor awningSensor)
		{
			if (awningSensor == null)
			{
				throw new AwningSensorUnableToAutoMakeLinkIdException("Awning sensor is null");
			}
			ILogicalDeviceId logicalId = ((ILogicalDevice)awningSensor).LogicalId;
			if ((PhysicalAddress)(object)logicalId.ProductMacAddress == (PhysicalAddress)null)
			{
				throw new AwningSensorUnableToAutoMakeLinkIdException(String.Format("Product Mac Address is NULL for {0}", (object)awningSensor));
			}
			byte[] array = Enumerable.ToArray<byte>((IEnumerable<byte>)(object)logicalId.ProductMacAddress);
			if (array.Length < 6)
			{
				throw new AwningSensorUnableToAutoMakeLinkIdException(String.Format("Product Mac Address is to small {0} for {1}", (object)ArrayExtension.DebugDump(array, " ", false), (object)awningSensor));
			}
			uint valueUInt = ArrayExtension.GetValueUInt32(array, 2, (Endian)0);
			if (valueUInt == 0)
			{
				throw new AwningSensorUnableToAutoMakeLinkIdException(String.Format("Product Mac Address resulted in {0} when auto creating LinkId {1} for {2}", (object)(UInt32)0, (object)ArrayExtension.DebugDump(array, " ", false), (object)awningSensor));
			}
			return valueUInt;
		}

		public uint TryGetLinkId()
		{
			//IL_0013: Unknown result type (might be due to invalid IL or missing references)
			//IL_0025: Unknown result type (might be due to invalid IL or missing references)
			if (((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)this).CircuitId.HasValueBeenLoaded && CIRCUIT_ID.op_Implicit(((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)this).CircuitId.Value) != 0)
			{
				return CIRCUIT_ID.op_Implicit(((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)this).CircuitId.Value);
			}
			try
			{
				return DefaultLinkId(this);
			}
			catch (Object)
			{
				return 0u;
			}
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task<uint> GetOrMakeLinkIdAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<GetOrMakeLinkIdAsync>d__58 <GetOrMakeLinkIdAsync>d__ = default(<GetOrMakeLinkIdAsync>d__58);
			<GetOrMakeLinkIdAsync>d__.<>t__builder = AsyncTaskMethodBuilder<uint>.Create();
			<GetOrMakeLinkIdAsync>d__.<>4__this = this;
			<GetOrMakeLinkIdAsync>d__.cancellationToken = cancellationToken;
			<GetOrMakeLinkIdAsync>d__.<>1__state = -1;
			<GetOrMakeLinkIdAsync>d__.<>t__builder.Start<<GetOrMakeLinkIdAsync>d__58>(ref <GetOrMakeLinkIdAsync>d__);
			return <GetOrMakeLinkIdAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<byte> GetAudibleAlertRemainingTime(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<GetAudibleAlertRemainingTime>d__59 <GetAudibleAlertRemainingTime>d__ = default(<GetAudibleAlertRemainingTime>d__59);
			<GetAudibleAlertRemainingTime>d__.<>t__builder = AsyncTaskMethodBuilder<byte>.Create();
			<GetAudibleAlertRemainingTime>d__.<>4__this = this;
			<GetAudibleAlertRemainingTime>d__.cancellationToken = cancellationToken;
			<GetAudibleAlertRemainingTime>d__.<>1__state = -1;
			<GetAudibleAlertRemainingTime>d__.<>t__builder.Start<<GetAudibleAlertRemainingTime>d__59>(ref <GetAudibleAlertRemainingTime>d__);
			return <GetAudibleAlertRemainingTime>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task PlayAudibleAlertAsync(byte durationInSeconds, CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<PlayAudibleAlertAsync>d__60 <PlayAudibleAlertAsync>d__ = default(<PlayAudibleAlertAsync>d__60);
			<PlayAudibleAlertAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<PlayAudibleAlertAsync>d__.<>4__this = this;
			<PlayAudibleAlertAsync>d__.durationInSeconds = durationInSeconds;
			<PlayAudibleAlertAsync>d__.cancellationToken = cancellationToken;
			<PlayAudibleAlertAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <PlayAudibleAlertAsync>d__.<>t__builder)).Start<<PlayAudibleAlertAsync>d__60>(ref <PlayAudibleAlertAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <PlayAudibleAlertAsync>d__.<>t__builder)).Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<byte> GetAutoTerminationEnabledAndDebounce(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<GetAutoTerminationEnabledAndDebounce>d__61 <GetAutoTerminationEnabledAndDebounce>d__ = default(<GetAutoTerminationEnabledAndDebounce>d__61);
			<GetAutoTerminationEnabledAndDebounce>d__.<>t__builder = AsyncTaskMethodBuilder<byte>.Create();
			<GetAutoTerminationEnabledAndDebounce>d__.<>4__this = this;
			<GetAutoTerminationEnabledAndDebounce>d__.cancellationToken = cancellationToken;
			<GetAutoTerminationEnabledAndDebounce>d__.<>1__state = -1;
			<GetAutoTerminationEnabledAndDebounce>d__.<>t__builder.Start<<GetAutoTerminationEnabledAndDebounce>d__61>(ref <GetAutoTerminationEnabledAndDebounce>d__);
			return <GetAutoTerminationEnabledAndDebounce>d__.<>t__builder.Task;
		}

		public Task<FirmwareUpdateSupport> TryGetFirmwareUpdateSupportAsync(CancellationToken cancelToken)
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			return FirmwareUpdateSupportEx.TryGetFirmwareUpdateSupportAsync(((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)this).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)this, cancelToken);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task UpdateFirmwareAsync(IReadOnlyList<byte> data, Func<ILogicalDeviceTransferProgress, bool> progressAck, CancellationToken cancellationToken, Dictionary<FirmwareUpdateOption, object>? options = null)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<UpdateFirmwareAsync>d__66 <UpdateFirmwareAsync>d__ = default(<UpdateFirmwareAsync>d__66);
			<UpdateFirmwareAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<UpdateFirmwareAsync>d__.<>4__this = this;
			<UpdateFirmwareAsync>d__.data = data;
			<UpdateFirmwareAsync>d__.progressAck = progressAck;
			<UpdateFirmwareAsync>d__.cancellationToken = cancellationToken;
			<UpdateFirmwareAsync>d__.options = options;
			<UpdateFirmwareAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Start<<UpdateFirmwareAsync>d__66>(ref <UpdateFirmwareAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Task;
		}

		public void UpdateAlert(string alertName, bool isActive, Nullable<int> count)
		{
			//IL_0003: Unknown result type (might be due to invalid IL or missing references)
			base.UpdateAlertDefaultImpl(alertName, isActive, count, _alertDict);
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)this).LastReceivedNetworkStatus;
		}
	}
	[Flags]
	public enum AwningSensorCapabilityFlag : Enum
	{
		None = 0,
		IsDeviceBatteryPowered = 1,
		IsDeviceAwningMounted = 2,
		Reserved1 = 4,
		Reserved2 = 8,
		Reserved3 = 0x10,
		Reserved4 = 0x20,
		Reserved5 = 0x40,
		Reserved6 = 0x80
	}
	public interface ILogicalDeviceAwningSensorCapability : ILogicalDeviceCapability, INotifyPropertyChanged
	{
		bool IsDeviceBatteryPowered { get; }

		bool IsDeviceAwningMounted { get; }
	}
	public class LogicalDeviceAwningSensorCapability : LogicalDeviceCapability, ILogicalDeviceAwningSensorCapability, ILogicalDeviceCapability, INotifyPropertyChanged
	{
		private AwningSensorCapabilityFlag _capabilityFlag => (AwningSensorCapabilityFlag)base.RawValue;

		public bool IsDeviceBatteryPowered => ((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)AwningSensorCapabilityFlag.IsDeviceBatteryPowered);

		public bool IsDeviceAwningMounted => ((Enum)(object)_capabilityFlag).HasFlag((Enum)(object)AwningSensorCapabilityFlag.IsDeviceAwningMounted);

		public LogicalDeviceAwningSensorCapability(Nullable<byte> rawCapability)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(rawCapability);
		}

		public LogicalDeviceAwningSensorCapability(AwningSensorCapabilityFlag capabilityFlags)
		{
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			((LogicalDeviceCapability)this).UpdateDeviceCapability(new Nullable<byte>((byte)capabilityFlags));
		}

		protected override void OnUpdateDeviceCapabilityChanged()
		{
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsDeviceBatteryPowered");
			((LogicalDeviceCapability)this).NotifyPropertyChanged("IsDeviceAwningMounted");
			((LogicalDeviceCapability)this).OnUpdateDeviceCapabilityChanged();
		}

		public override string ToString()
		{
			return String.Format("RawCapability: {0} IsDeviceBatteryPowered: {1} IsDeviceAwningMounted: {2}", (object)base.RawValue, (object)IsDeviceBatteryPowered, (object)IsDeviceAwningMounted);
		}
	}
	public class LogicalDeviceAwningSensorFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			//IL_002f: Unknown result type (might be due to invalid IL or missing references)
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 47)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceAwningSensor(logicalDeviceId, service, new LogicalDeviceAwningSensorCapability(rawCapability));
		}
	}
	public class LogicalDeviceAwningSensorSim : LogicalDeviceAwningSensor, ILogicalDeviceSimulated, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SimulatorAsync>d__10 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceAwningSensorSim <>4__this;

			public CancellationToken cancellationToken;

			private TaskAwaiter<bool> <>u__1;

			private void MoveNext()
			{
				//IL_0092: Expected O, but got Unknown
				//IL_005f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0064: Unknown result type (might be due to invalid IL or missing references)
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAwningSensorSim logicalDeviceAwningSensorSim = <>4__this;
				try
				{
					if (num != 0)
					{
						goto IL_0082;
					}
					TaskAwaiter<bool> val = <>u__1;
					<>u__1 = default(TaskAwaiter<bool>);
					num = (<>1__state = -1);
					goto IL_007a;
					IL_007a:
					val.GetResult();
					goto IL_0082;
					IL_0082:
					if (!((CancellationToken)(ref cancellationToken)).IsCancellationRequested)
					{
						logicalDeviceAwningSensorSim.UpdateBatteryChargePercentage();
						logicalDeviceAwningSensorSim.UpdateAlerts();
						val = TaskExtension.TryDelay(250, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <SimulatorAsync>d__10>(ref val, ref this);
							return;
						}
						goto IL_007a;
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		private const int TickIntervalDelayMs = 250;

		private const int BatteryPercentHighLimit = 100;

		private const int BatteryPercentLowLimit = 0;

		private readonly LogicalDeviceAwningSensorStatus _simStatus = new LogicalDeviceAwningSensorStatus();

		private readonly BackgroundOperation _simulator;

		private int _batteryPercentValue = 1;

		private int _alertTimeCount;

		private const uint DelayStatusChangedLogMessageThrottleTimeMs = 60000u;

		private readonly Stopwatch _delayStatusChangedLogMessageThrottleTimer = Stopwatch.StartNew();

		public override LogicalDeviceActiveConnection ActiveConnection => (LogicalDeviceActiveConnection)1;

		public override bool IsLowBattery
		{
			get
			{
				//IL_0006: Unknown result type (might be due to invalid IL or missing references)
				//IL_000b: Unknown result type (might be due to invalid IL or missing references)
				Nullable<int> batteryChargePercent = _simStatus.BatteryChargePercent;
				int num = 25;
				return (batteryChargePercent.GetValueOrDefault() <= num) & batteryChargePercent.HasValue;
			}
		}

		public LogicalDeviceAwningSensorSim(LogicalDeviceId deviceId, ILogicalDeviceService deviceService, ILogicalDeviceAwningSensorCapability awningSensorCapability)
			: base((ILogicalDeviceId)(object)deviceId, deviceService, awningSensorCapability)
		{
			//IL_003b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0045: Expected O, but got Unknown
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			//IL_0058: Unknown result type (might be due to invalid IL or missing references)
			//IL_006a: Unknown result type (might be due to invalid IL or missing references)
			//IL_0074: Expected O, but got Unknown
			//IL_006f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0079: Expected O, but got Unknown
			MetricsControlPid = (ILogicalDevicePidULong)new LogicalDevicePidSimULong(PID.ACCESSORY_SETTING_01, 0uL, (Action<ulong>)MetricsControlPidChanged);
			int num = new Random().Next(0, 255);
			((LogicalDevice<ILogicalDeviceAwningSensorCapability>)(object)this).UpdateCircuitId(CIRCUIT_ID.op_Implicit((uint)num));
			_simulator = new BackgroundOperation(new BackgroundOperationFunc(SimulatorAsync));
			_simulator.Start();
		}

		public override void UpdateDeviceOnline(bool canOnline)
		{
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task SimulatorAsync(CancellationToken cancellationToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<SimulatorAsync>d__10 <SimulatorAsync>d__ = default(<SimulatorAsync>d__10);
			<SimulatorAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<SimulatorAsync>d__.<>4__this = this;
			<SimulatorAsync>d__.cancellationToken = cancellationToken;
			<SimulatorAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Start<<SimulatorAsync>d__10>(ref <SimulatorAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <SimulatorAsync>d__.<>t__builder)).Task;
		}

		private void UpdateBatteryChargePercentage()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Unknown result type (might be due to invalid IL or missing references)
			//IL_002b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0019: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			//IL_0030: Unknown result type (might be due to invalid IL or missing references)
			//IL_0031: Unknown result type (might be due to invalid IL or missing references)
			//IL_0032: Unknown result type (might be due to invalid IL or missing references)
			//IL_005a: Unknown result type (might be due to invalid IL or missing references)
			//IL_005b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0089: Unknown result type (might be due to invalid IL or missing references)
			Nullable<int> sensorBatteryChargePercent = base.SensorBatteryChargePercent;
			int batteryPercentValue = _batteryPercentValue;
			Nullable<int> val = (sensorBatteryChargePercent.HasValue ? new Nullable<int>(sensorBatteryChargePercent.GetValueOrDefault() + batteryPercentValue) : default(Nullable<int>));
			sensorBatteryChargePercent = val;
			batteryPercentValue = 0;
			if ((sensorBatteryChargePercent.GetValueOrDefault() < batteryPercentValue) & sensorBatteryChargePercent.HasValue)
			{
				val..ctor(0);
				_batteryPercentValue = 1;
			}
			else
			{
				sensorBatteryChargePercent = val;
				batteryPercentValue = 100;
				if ((sensorBatteryChargePercent.GetValueOrDefault() > batteryPercentValue) & sensorBatteryChargePercent.HasValue)
				{
					val..ctor(100);
					_batteryPercentValue = -1;
				}
			}
			_simStatus.SetBatteryChargePercent(Convert.ToByte((object)val));
			((LogicalDevice<LogicalDeviceAwningSensorStatus, ILogicalDeviceAwningSensorCapability>)(object)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Size);
		}

		private void UpdateAlerts()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d2: Unknown result type (might be due to invalid IL or missing references)
			//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
			switch (new Random().Next(0, 100))
			{
			case 98:
				_alertTimeCount = 0;
				_simStatus.SetWindEventAlert(AwningWindStrength.Low, active: true, 0);
				_simStatus.SetAudibleAlert(AudibleAlertState.PreMovementAlertActive);
				break;
			case 99:
				_alertTimeCount = 0;
				_simStatus.SetWindEventAlert(AwningWindStrength.Medium, active: true, 0);
				_simStatus.SetAudibleAlert(AudibleAlertState.IntraMovementAlertActive);
				break;
			case 100:
				_alertTimeCount = 0;
				_simStatus.SetWindEventAlert(AwningWindStrength.High, active: true, 0);
				_simStatus.SetAudibleAlert(AudibleAlertState.PreMovementAlertActive);
				break;
			default:
				if (_alertTimeCount == 20)
				{
					_simStatus.SetWindEventAlert(AwningWindStrength.Low, active: false, 0);
					_simStatus.SetWindEventAlert(AwningWindStrength.Medium, active: false, 0);
					_simStatus.SetWindEventAlert(AwningWindStrength.High, active: false, 0);
					_simStatus.SetAudibleAlert(AudibleAlertState.AlertNotSounding);
				}
				break;
			}
			Nullable<int> sensorBatteryChargePercent = base.SensorBatteryChargePercent;
			int num = 25;
			if ((sensorBatteryChargePercent.GetValueOrDefault() <= num) & sensorBatteryChargePercent.HasValue)
			{
				_simStatus.SetLowBatteryAlert(active: true, 0);
			}
			else
			{
				_simStatus.SetLowBatteryAlert(active: false, 0);
			}
			_alertTimeCount++;
			((LogicalDevice<LogicalDeviceAwningSensorStatus, ILogicalDeviceAwningSensorCapability>)(object)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Size);
		}

		protected override void DebugUpdateDeviceStatusChanged(IReadOnlyList<byte> oldStatusData, IReadOnlyList<byte> statusData, uint dataLength, string optionalText = "")
		{
			if (_delayStatusChangedLogMessageThrottleTimer.ElapsedMilliseconds >= 60000)
			{
				((LogicalDevice<LogicalDeviceAwningSensorStatus, ILogicalDeviceAwningSensorCapability>)(object)this).DebugUpdateDeviceStatusChanged(oldStatusData, statusData, dataLength, String.Format("Skipped debug messages over {0}ms", (object)(UInt32)60000));
				_delayStatusChangedLogMessageThrottleTimer.Restart();
			}
		}

		private void MetricsControlPidChanged(ulong metricsControl)
		{
			if ((metricsControl & 1) != 0L)
			{
				_simStatus.SetWindEventAlert(AwningWindStrength.Low, active: false, 0);
				_simStatus.SetWindEventAlert(AwningWindStrength.Medium, active: false, 0);
				_simStatus.SetWindEventAlert(AwningWindStrength.High, active: false, 0);
			}
			if ((metricsControl & 2) != 0L)
			{
				_simStatus.SetLowBatteryAlert(active: false, 0);
			}
			((LogicalDevice<LogicalDeviceAwningSensorStatus, ILogicalDeviceAwningSensorCapability>)(object)this).UpdateDeviceStatus((IReadOnlyList<byte>)(object)((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Data, ((LogicalDeviceDataPacketMutableDoubleBuffer)_simStatus).Size);
		}

		public override void Dispose(bool disposing)
		{
			((LogicalDevice<LogicalDeviceAwningSensorStatus, ILogicalDeviceAwningSensorCapability>)(object)this).Dispose(disposing);
			_simulator.Stop();
		}
	}
	public enum AwningWindStrength : Enum
	{
		None = 0,
		Low = 1,
		Medium = 2,
		High = 3,
		Unknown = 255
	}
	public enum AngleAvailability : Enum
	{
		Unavailable,
		Invalid,
		Available
	}
	public class LogicalDeviceAwningSensorStatus : LogicalDeviceStatusPacketMutable, ILogicalDeviceStatus<LogicalDeviceAwningStatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		public const int MinimumStatusPacketSize = 8;

		private const byte AlertActiveFlag = 128;

		private const byte AlertActiveBitmask = 128;

		private const byte AlertCountBitmask = 127;

		private const byte AudibleAlertBitmask = 3;

		private const byte PerceivedAwningStateBitmask = 12;

		private const int AngleIndex = 0;

		private const int LowWindAlertIndex = 2;

		private const int MediumWindAlertIndex = 3;

		private const int HighWindAlertIndex = 4;

		private const int BatteryChargeLevelIndex = 5;

		private const int LowBatteryAlertIndex = 6;

		private const int MiscStatusIndex = 7;

		private const float AngleScaleFactorRaw = 128f;

		private const int AngleNotAvailableRaw = -32768;

		private const int AngleInvalidRaw = -32767;

		private const int MaxBatteryPercent = 100;

		public Nullable<int> BatteryChargePercent
		{
			get
			{
				//IL_0017: Unknown result type (might be due to invalid IL or missing references)
				//IL_001d: Unknown result type (might be due to invalid IL or missing references)
				//IL_000f: Unknown result type (might be due to invalid IL or missing references)
				byte b = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[5];
				if (b <= 100)
				{
					return new Nullable<int>((int)b);
				}
				return default(Nullable<int>);
			}
		}

		public bool IsLowBattery => (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[6] & 0x80) == 128;

		public int LowBatteryAlertCount => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[6] & 0x7F;

		public AudibleAlertState AudibleAlertState
		{
			get
			{
				int num = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[7] & 3;
				if (Enum.IsDefined(typeof(AudibleAlertState), (object)num))
				{
					return (AudibleAlertState)num;
				}
				return AudibleAlertState.Unknown;
			}
		}

		public PerceivedAwningState PerceivedAwningState
		{
			get
			{
				int num = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[7] & 0xC;
				if (Enum.IsDefined(typeof(PerceivedAwningState), (object)num))
				{
					return (PerceivedAwningState)num;
				}
				return PerceivedAwningState.Unknown;
			}
		}

		public ValueTuple<AngleAvailability, Nullable<float>> Angle
		{
			get
			{
				//IL_000b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0011: Unknown result type (might be due to invalid IL or missing references)
				//IL_0012: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0031: Unknown result type (might be due to invalid IL or missing references)
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_005b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0060: Unknown result type (might be due to invalid IL or missing references)
				//IL_0043: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_004a: Unknown result type (might be due to invalid IL or missing references)
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return new ValueTuple<AngleAvailability, Nullable<float>>(AngleAvailability.Unavailable, default(Nullable<float>));
				}
				short @int = ((LogicalDeviceDataPacketMutableDoubleBuffer)this).GetInt16(0u);
				switch (@int)
				{
				case -32768:
					return new ValueTuple<AngleAvailability, Nullable<float>>(AngleAvailability.Unavailable, default(Nullable<float>));
				case -32767:
					return new ValueTuple<AngleAvailability, Nullable<float>>(AngleAvailability.Invalid, default(Nullable<float>));
				default:
				{
					float num = (float)@int / 128f;
					return new ValueTuple<AngleAvailability, Nullable<float>>(AngleAvailability.Available, new Nullable<float>(num));
				}
				}
			}
		}

		public LogicalDeviceAwningSensorStatus()
			: base(8u)
		{
		}

		public LogicalDeviceAwningStatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceAwningStatusSerializable(this);
		}

		private static int GetWindStrengthAlertIndex(AwningWindStrength awningWindStrength)
		{
			//IL_0031: Unknown result type (might be due to invalid IL or missing references)
			//IL_003c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0047: Unknown result type (might be due to invalid IL or missing references)
			return awningWindStrength switch
			{
				AwningWindStrength.High => 4, 
				AwningWindStrength.Medium => 3, 
				AwningWindStrength.Low => 2, 
				AwningWindStrength.None => throw new ArgumentOutOfRangeException("awningWindStrength"), 
				AwningWindStrength.Unknown => throw new ArgumentOutOfRangeException("awningWindStrength"), 
				_ => throw new ArgumentOutOfRangeException("awningWindStrength"), 
			};
		}

		public bool IsWindEventAlertActive(AwningWindStrength awningWindStrength)
		{
			if (!((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
			{
				return false;
			}
			return awningWindStrength switch
			{
				AwningWindStrength.None => false, 
				AwningWindStrength.Unknown => false, 
				_ => (((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[GetWindStrengthAlertIndex(awningWindStrength)] & 0x80) == 128, 
			};
		}

		public int WindEventAlertCount(AwningWindStrength awningWindStrength)
		{
			if (!((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
			{
				return 0;
			}
			return awningWindStrength switch
			{
				AwningWindStrength.None => 0, 
				AwningWindStrength.Unknown => 0, 
				_ => ((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[GetWindStrengthAlertIndex(awningWindStrength)] & 0x7F, 
			};
		}

		public void SetAngle(float angle)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetFixedPoint((FixedPointType)2, angle, 0u);
		}

		public void SetWindEventAlert(AwningWindStrength awningWindStrength, bool active, byte count)
		{
			if (awningWindStrength != AwningWindStrength.None)
			{
				byte b = (byte)(count & 0x7F);
				if (active)
				{
					b |= 0x80;
				}
				int windStrengthAlertIndex = GetWindStrengthAlertIndex(awningWindStrength);
				((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b, windStrengthAlertIndex);
			}
		}

		public void SetBatteryChargePercent(byte chargePercent)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, chargePercent, 5);
		}

		public void SetLowBatteryAlert(bool active, byte count)
		{
			byte b = (byte)(count & 0x7F);
			if (active)
			{
				b |= 0x80;
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, b, 6);
		}

		public void SetAudibleAlert(AudibleAlertState audibleAlertState)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)3, (byte)audibleAlertState, 7);
		}

		public LogicalDeviceAwningSensorStatus(LogicalDeviceAwningSensorStatus originalStatus)
		{
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalStatus).Data;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(data, data.Length, false);
		}

		public override string ToString()
		{
			//IL_0018: Unknown result type (might be due to invalid IL or missing references)
			return String.Concat(String.Format("Device Status: {0} Battery {1}% BatteryLow {2}({3}) WindLow {4}({5}) WindMedium {6}({7}) WindHigh {8}({9}) ", (object[])(object)new Object[10]
			{
				(Object)((LogicalDeviceDataPacketMutableDoubleBuffer)this).ToString(),
				(object)BatteryChargePercent,
				(object)IsLowBattery,
				(object)LowBatteryAlertCount,
				(object)IsWindEventAlertActive(AwningWindStrength.High),
				(object)WindEventAlertCount(AwningWindStrength.High),
				(object)IsWindEventAlertActive(AwningWindStrength.Medium),
				(object)WindEventAlertCount(AwningWindStrength.Medium),
				(object)IsWindEventAlertActive(AwningWindStrength.Low),
				(object)WindEventAlertCount(AwningWindStrength.Low)
			}), String.Format("Audible Alert Active: {0}", (object)AudibleAlertState));
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceAwningStatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceAwningStatusSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceAwningStatusSerializable);
			}
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public AudibleAlertState AudibleAlertState
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public PerceivedAwningState PerceivedAwningState
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public AngleAvailability AngleAvailability
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public Nullable<float> Angle
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public Nullable<int> BatteryChargePercent
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public bool IsLowBattery
		{
			[CompilerGenerated]
			get;
		}

		[JsonProperty]
		public int LowBatteryAlertCount
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceAwningStatusSerializable(AudibleAlertState audibleAlertState, PerceivedAwningState perceivedAwningState, ValueTuple<AngleAvailability, Nullable<float>> angleData, Nullable<int> batteryChargePercent, bool isLowBattery, int lowBatteryAlertCount)
		{
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0008: Unknown result type (might be due to invalid IL or missing references)
			//IL_000d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0013: Unknown result type (might be due to invalid IL or missing references)
			//IL_002d: Unknown result type (might be due to invalid IL or missing references)
			//IL_002f: Unknown result type (might be due to invalid IL or missing references)
			Angle = angleData.Item2;
			AngleAvailability = angleData.Item1;
			AudibleAlertState = audibleAlertState;
			PerceivedAwningState = perceivedAwningState;
			BatteryChargePercent = batteryChargePercent;
			IsLowBattery = isLowBattery;
			LowBatteryAlertCount = lowBatteryAlertCount;
		}

		public LogicalDeviceAwningStatusSerializable(LogicalDeviceAwningSensorStatus awningSensorStatus)
			: this(awningSensorStatus.AudibleAlertState, awningSensorStatus.PerceivedAwningState, awningSensorStatus.Angle, awningSensorStatus.BatteryChargePercent, awningSensorStatus.IsLowBattery, awningSensorStatus.LowBatteryAlertCount)
		{
		}//IL_000e: Unknown result type (might be due to invalid IL or missing references)
		//IL_0014: Unknown result type (might be due to invalid IL or missing references)


		public override byte[] MakeRawData()
		{
			//IL_0013: Unknown result type (might be due to invalid IL or missing references)
			//IL_0018: Unknown result type (might be due to invalid IL or missing references)
			//IL_0037: Unknown result type (might be due to invalid IL or missing references)
			//IL_003c: Unknown result type (might be due to invalid IL or missing references)
			//IL_0024: Unknown result type (might be due to invalid IL or missing references)
			//IL_0029: Unknown result type (might be due to invalid IL or missing references)
			//IL_0048: Unknown result type (might be due to invalid IL or missing references)
			//IL_004d: Unknown result type (might be due to invalid IL or missing references)
			LogicalDeviceAwningSensorStatus logicalDeviceAwningSensorStatus = new LogicalDeviceAwningSensorStatus();
			logicalDeviceAwningSensorStatus.SetAudibleAlert(AudibleAlertState);
			if (Angle.HasValue)
			{
				logicalDeviceAwningSensorStatus.SetAngle(Angle.Value);
			}
			if (BatteryChargePercent.HasValue)
			{
				logicalDeviceAwningSensorStatus.SetBatteryChargePercent((byte)BatteryChargePercent.Value);
			}
			logicalDeviceAwningSensorStatus.SetLowBatteryAlert(IsLowBattery, (byte)LowBatteryAlertCount);
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceAwningSensorStatus).CopyCurrentData();
		}

		public static LogicalDeviceAwningStatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceAwningSensorStatus logicalDeviceAwningSensorStatus = new LogicalDeviceAwningSensorStatus();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceAwningSensorStatus).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceAwningSensorStatus).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceAwningSensorStatus).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceAwningSensorStatus).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceAwningSensorStatus).Update(rawData, rawData.Length, false);
			return new LogicalDeviceAwningStatusSerializable(logicalDeviceAwningSensorStatus);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceAwningStatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceAwningStatusSerializable>)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			//IL_0098: Unknown result type (might be due to invalid IL or missing references)
			//IL_009d: Unknown result type (might be due to invalid IL or missing references)
			//IL_00bf: Unknown result type (might be due to invalid IL or missing references)
			//IL_00c4: Unknown result type (might be due to invalid IL or missing references)
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("AudibleAlertState = ");
			builder.Append(((Object)AudibleAlertState/*cast due to .constrained prefix*/).ToString());
			builder.Append(", PerceivedAwningState = ");
			builder.Append(((Object)PerceivedAwningState/*cast due to .constrained prefix*/).ToString());
			builder.Append(", AngleAvailability = ");
			builder.Append(((Object)AngleAvailability/*cast due to .constrained prefix*/).ToString());
			builder.Append(", Angle = ");
			builder.Append(((Object)Angle/*cast due to .constrained prefix*/).ToString());
			builder.Append(", BatteryChargePercent = ");
			builder.Append(((Object)BatteryChargePercent/*cast due to .constrained prefix*/).ToString());
			builder.Append(", IsLowBattery = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<bool, Boolean>(ref IsLowBattery)/*cast due to .constrained prefix*/).ToString());
			builder.Append(", LowBatteryAlertCount = ");
			builder.Append(((Object)System.Runtime.CompilerServices.Unsafe.As<int, Int32>(ref LowBatteryAlertCount)/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			//IL_0057: Unknown result type (might be due to invalid IL or missing references)
			//IL_006e: Unknown result type (might be due to invalid IL or missing references)
			return ((((((base.GetHashCode() * -1521134295 + EqualityComparer<AudibleAlertState>.Default.GetHashCode(AudibleAlertState)) * -1521134295 + EqualityComparer<PerceivedAwningState>.Default.GetHashCode(PerceivedAwningState)) * -1521134295 + EqualityComparer<AngleAvailability>.Default.GetHashCode(AngleAvailability)) * -1521134295 + EqualityComparer<Nullable<float>>.Default.GetHashCode(Angle)) * -1521134295 + EqualityComparer<Nullable<int>>.Default.GetHashCode(BatteryChargePercent)) * -1521134295 + EqualityComparer<bool>.Default.GetHashCode(IsLowBattery)) * -1521134295 + EqualityComparer<int>.Default.GetHashCode(LowBatteryAlertCount);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceAwningStatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceAwningStatusSerializable(LogicalDeviceAwningStatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceAwningStatusSerializable>)original)
		{
			//IL_002d: Unknown result type (might be due to invalid IL or missing references)
			//IL_0032: Unknown result type (might be due to invalid IL or missing references)
			//IL_0039: Unknown result type (might be due to invalid IL or missing references)
			//IL_003e: Unknown result type (might be due to invalid IL or missing references)
			AudibleAlertState = original.AudibleAlertState;
			PerceivedAwningState = original.PerceivedAwningState;
			AngleAvailability = original.AngleAvailability;
			Angle = original.Angle;
			BatteryChargePercent = original.BatteryChargePercent;
			IsLowBattery = original.IsLowBattery;
			LowBatteryAlertCount = original.LowBatteryAlertCount;
		}
	}
}
namespace OneControl.Devices.AccessoryGateway
{
	internal enum AccessoryGatewayCommandType : Enum
	{
		AutoLinkMode,
		LinkDevice,
		UnlinkDevice,
		RebootIntoFlashLoader,
		ClearDevices
	}
	public abstract class LogicalDeviceAccessoryGatewayCommand : LogicalDeviceCommandPacket
	{
		internal LogicalDeviceAccessoryGatewayCommand(AccessoryGatewayCommandType commandByte, IReadOnlyList<byte> data, int commandResponseTimeMs = 200)
			: base((byte)commandByte, data, commandResponseTimeMs)
		{
		}

		internal LogicalDeviceAccessoryGatewayCommand(AccessoryGatewayCommandType commandByte, int commandResponseTimeMs = 200)
			: base((byte)commandByte, commandResponseTimeMs)
		{
		}

		public static LogicalDeviceAccessoryGatewayCommand MakeCommand(byte commandByte, IReadOnlyList<byte> data)
		{
			//IL_0054: Unknown result type (might be due to invalid IL or missing references)
			return (AccessoryGatewayCommandType)commandByte switch
			{
				AccessoryGatewayCommandType.AutoLinkMode => new LogicalDeviceAccessoryGatewayCommandSetAutoLinkMode(data), 
				AccessoryGatewayCommandType.LinkDevice => new LogicalDeviceAccessoryGatewayCommandLinkDevice(data), 
				AccessoryGatewayCommandType.UnlinkDevice => new LogicalDeviceAccessoryGatewayCommandUnLinkDevice(data), 
				AccessoryGatewayCommandType.RebootIntoFlashLoader => new LogicalDeviceAccessoryGatewayCommandRebootIntoFlashLoader(), 
				AccessoryGatewayCommandType.ClearDevices => new LogicalDeviceAccessoryGatewayCommandClearDevices(), 
				_ => throw new ArgumentOutOfRangeException("commandByte", String.Format("Unknown command type 0x{0:X}", (object)commandByte)), 
			};
		}
	}
	public class LogicalDeviceAccessoryGatewayCommandClearDevices : LogicalDeviceAccessoryGatewayCommand
	{
		public LogicalDeviceAccessoryGatewayCommandClearDevices()
			: base(AccessoryGatewayCommandType.ClearDevices)
		{
		}
	}
	public class LogicalDeviceAccessoryGatewayCommandLinkDevice : LogicalDeviceAccessoryGatewayCommand
	{
		private const int CommandPacketSize = 6;

		private const uint MacIndex = 0u;

		public MAC Mac => new MAC(((LogicalDeviceCommandPacket)this).Data);

		public LogicalDeviceAccessoryGatewayCommandLinkDevice(MAC mac)
			: base(AccessoryGatewayCommandType.LinkDevice, (IReadOnlyList<byte>)(object)new Byte[6])
		{
			//IL_0019: Unknown result type (might be due to invalid IL or missing references)
			ArrayExtension.SetValueUInt48(((LogicalDeviceCommandPacket)this).Data, UInt48.op_Implicit(MAC.op_Implicit(mac)), 0, (Endian)0);
		}

		public LogicalDeviceAccessoryGatewayCommandLinkDevice(IReadOnlyList<byte> data)
			: base(AccessoryGatewayCommandType.LinkDevice, (IReadOnlyList<byte>)(object)new Byte[6])
		{
			//IL_002b: Unknown result type (might be due to invalid IL or missing references)
			if (((IReadOnlyCollection<byte>)(object)data).Count != 6)
			{
				throw new ArgumentOutOfRangeException(String.Format("Expected data to be a {0} byte MAC address", (object)6));
			}
			for (int i = 0; i < 6; i++)
			{
				((LogicalDeviceCommandPacket)this).Data[i] = data[i];
			}
		}
	}
	public class LogicalDeviceAccessoryGatewayCommandRebootIntoFlashLoader : LogicalDeviceAccessoryGatewayCommand
	{
		public LogicalDeviceAccessoryGatewayCommandRebootIntoFlashLoader()
			: base(AccessoryGatewayCommandType.RebootIntoFlashLoader)
		{
		}
	}
	public class LogicalDeviceAccessoryGatewayCommandSetAutoLinkMode : LogicalDeviceAccessoryGatewayCommand
	{
		private const int CommandPacketSize = 2;

		private const byte LinkModeActiveBitmask = 1;

		private const int LinkModeActiveIndex = 0;

		private const int DeviceTypeIndex = 1;

		public bool IsLinkModeActive => (((LogicalDeviceCommandPacket)this).Data[0] & 1) != 0;

		public DEVICE_TYPE DeviceType => DEVICE_TYPE.op_Implicit(((LogicalDeviceCommandPacket)this).Data[1]);

		public LogicalDeviceAccessoryGatewayCommandSetAutoLinkMode(bool enableAutoLink, DEVICE_TYPE toDeviceType)
			: base(AccessoryGatewayCommandType.AutoLinkMode, (IReadOnlyList<byte>)(object)new Byte[2])
		{
			((LogicalDeviceCommandPacket)this).Data[0] = (enableAutoLink ? ((byte)1) : ((byte)0));
			((LogicalDeviceCommandPacket)this).Data[1] = DEVICE_TYPE.op_Implicit(toDeviceType);
		}

		public LogicalDeviceAccessoryGatewayCommandSetAutoLinkMode(IReadOnlyList<byte> data)
			: base(AccessoryGatewayCommandType.LinkDevice, (IReadOnlyList<byte>)(object)new Byte[2])
		{
			//IL_002b: Unknown result type (might be due to invalid IL or missing references)
			if (((IReadOnlyCollection<byte>)(object)data).Count != 2)
			{
				throw new ArgumentOutOfRangeException(String.Format("Expected data to be a {0} bytes", (object)2));
			}
			((LogicalDeviceCommandPacket)this).Data[0] = data[0];
			((LogicalDeviceCommandPacket)this).Data[1] = data[1];
		}

		public override string ToString()
		{
			return String.Format("[ClimateZoneCommand: IsLinkModeActive={0}, ForDeviceType={1}", (object)IsLinkModeActive, (object)DeviceType);
		}
	}
	public class LogicalDeviceAccessoryGatewayCommandUnLinkDevice : LogicalDeviceAccessoryGatewayCommand
	{
		private const int CommandPacketSize = 6;

		private const uint MacIndex = 0u;

		public MAC Mac => new MAC(((LogicalDeviceCommandPacket)this).Data);

		public LogicalDeviceAccessoryGatewayCommandUnLinkDevice(MAC mac)
			: base(AccessoryGatewayCommandType.UnlinkDevice, (IReadOnlyList<byte>)(object)new Byte[6])
		{
			//IL_0019: Unknown result type (might be due to invalid IL or missing references)
			ArrayExtension.SetValueUInt48(((LogicalDeviceCommandPacket)this).Data, UInt48.op_Implicit(MAC.op_Implicit(mac)), 0, (Endian)0);
		}

		public LogicalDeviceAccessoryGatewayCommandUnLinkDevice(IReadOnlyList<byte> data)
			: base(AccessoryGatewayCommandType.LinkDevice, (IReadOnlyList<byte>)(object)new Byte[6])
		{
			//IL_002b: Unknown result type (might be due to invalid IL or missing references)
			if (((IReadOnlyCollection<byte>)(object)data).Count != 6)
			{
				throw new ArgumentOutOfRangeException(String.Format("Expected data to be a {0} byte MAC address", (object)6));
			}
			for (int i = 0; i < 6; i++)
			{
				((LogicalDeviceCommandPacket)this).Data[i] = data[i];
			}
		}
	}
	public enum AccessoryGatewayMode : Enum
	{
		Accessory,
		Link,
		Writing,
		Clearing
	}
	public interface IAccessoryGateway
	{
		AccessoryGatewayMode Mode { get; }
	}
	public interface ILogicalDeviceAccessoryGateway : IAccessoryGateway, ILogicalDeviceWithStatus<LogicalDeviceAccessoryGatewayStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IDevicesActivation, ILogicalDeviceFirmwareUpdateDevice
	{
		Task<CommandResult> LinkDeviceAsync(MAC mac, CancellationToken token);

		Task<CommandResult> UnlinkDeviceAsync(MAC mac, CancellationToken token);

		Task<bool> IsDeviceLinkedAsync(MAC mac, CancellationToken token);

		Task<MAC> GetLinkedDeviceAtIndexAsync(ushort index, CancellationToken token);

		Task<IEnumerable<MAC>> GetLinkedDevicesAsync(CancellationToken token);

		Task<CommandResult> ClearAllDevicesAsync(CancellationToken token);

		Task<bool> ResyncDevicesAsync(CancellationToken token);
	}
	public interface ILogicalDeviceAccessoryGatewayDirect : ILogicalDeviceAccessoryGateway, IAccessoryGateway, ILogicalDeviceWithStatus<LogicalDeviceAccessoryGatewayStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IDevicesActivation, ILogicalDeviceFirmwareUpdateDevice, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
	}
	public interface ILogicalDeviceSourceDirectAccessoryGateway : ILogicalDeviceSourceDirectPid, ILogicalDeviceSourceDirect, ILogicalDeviceSource
	{
		Task<CommandResult> SendDirectCommandAccessoryGatewayAsync(ILogicalDeviceAccessoryGateway logicalDevice, LogicalDeviceAccessoryGatewayCommand command, CancellationToken cancelToken);
	}
	public class LogicalDeviceAccessoryGateway : LogicalDevice<LogicalDeviceAccessoryGatewayStatus, ILogicalDeviceCapability>, ILogicalDeviceAccessoryGatewayDirect, ILogicalDeviceAccessoryGateway, IAccessoryGateway, ILogicalDeviceWithStatus<LogicalDeviceAccessoryGatewayStatus>, ILogicalDeviceWithStatus, ILogicalDevice, IComparable, IEquatable<ILogicalDevice>, IComparable<ILogicalDevice>, ICommonDisposable, IDisposable, IDevicesCommon, INotifyPropertyChanged, IDevicesActivation, ILogicalDeviceFirmwareUpdateDevice, ILogicalDeviceIdsCan, ILogicalDeviceMyRvLink
	{
		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <<ClearAllDevicesAsync>b__36_0>d : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceAccessoryGateway <>4__this;

			public CancellationToken cancelToken;

			private TaskAwaiter<ulong> <>u__1;

			private void MoveNext()
			{
				//IL_007d: Expected O, but got Unknown
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0057: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0018: Unknown result type (might be due to invalid IL or missing references)
				//IL_0022: Unknown result type (might be due to invalid IL or missing references)
				//IL_0027: Unknown result type (might be due to invalid IL or missing references)
				//IL_003b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003c: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAccessoryGateway logicalDeviceAccessoryGateway = <>4__this;
				bool result;
				try
				{
					TaskAwaiter<ulong> val;
					if (num != 0)
					{
						val = ((LogicalDevicePid)logicalDeviceAccessoryGateway.AssociatedDeviceCountPid).ReadValueAsync(cancelToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <<ClearAllDevicesAsync>b__36_0>d>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ulong>);
						num = (<>1__state = -1);
					}
					result = val.GetResult() == 0;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass28_0 : Object
		{
			public int attemptCount;

			internal CommandControl <SendCommandAsync>b__0(ILogicalDevice _)
			{
				if (attemptCount++ < 3)
				{
					return (CommandControl)1;
				}
				return (CommandControl)0;
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass29_0 : Object
		{
			[StructLayout((LayoutKind)3)]
			private struct <<LinkDeviceAsync>b__0>d : ValueType, IAsyncStateMachine
			{
				public int <>1__state;

				public AsyncTaskMethodBuilder<bool> <>t__builder;

				public <>c__DisplayClass29_0 <>4__this;

				public CancellationToken cancelToken;

				private TaskAwaiter<bool> <>u__1;

				private void MoveNext()
				{
					//IL_007f: Expected O, but got Unknown
					//IL_0058: Unknown result type (might be due to invalid IL or missing references)
					//IL_005d: Unknown result type (might be due to invalid IL or missing references)
					//IL_0064: Unknown result type (might be due to invalid IL or missing references)
					//IL_001e: Unknown result type (might be due to invalid IL or missing references)
					//IL_0028: Unknown result type (might be due to invalid IL or missing references)
					//IL_002d: Unknown result type (might be due to invalid IL or missing references)
					//IL_0041: Unknown result type (might be due to invalid IL or missing references)
					//IL_0042: Unknown result type (might be due to invalid IL or missing references)
					int num = <>1__state;
					<>c__DisplayClass29_0 <>c__DisplayClass29_ = <>4__this;
					bool result;
					try
					{
						TaskAwaiter<bool> val;
						if (num != 0)
						{
							val = <>c__DisplayClass29_.<>4__this.AccessoryGatewayHasMac(<>c__DisplayClass29_.mac, cancelToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<LinkDeviceAsync>b__0>d>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
						}
						result = val.GetResult();
					}
					catch (Exception ex)
					{
						Exception exception = ex;
						<>1__state = -2;
						<>t__builder.SetException(exception);
						return;
					}
					<>1__state = -2;
					<>t__builder.SetResult(result);
				}

				[DebuggerHidden]
				private void SetStateMachine(IAsyncStateMachine stateMachine)
				{
					<>t__builder.SetStateMachine(stateMachine);
				}
			}

			public LogicalDeviceAccessoryGateway <>4__this;

			public MAC mac;

			[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
			internal Task<bool> <LinkDeviceAsync>b__0(ILogicalDevice _, CancellationToken cancelToken)
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				//IL_0016: Unknown result type (might be due to invalid IL or missing references)
				//IL_0017: Unknown result type (might be due to invalid IL or missing references)
				<<LinkDeviceAsync>b__0>d <<LinkDeviceAsync>b__0>d = default(<<LinkDeviceAsync>b__0>d);
				<<LinkDeviceAsync>b__0>d.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
				<<LinkDeviceAsync>b__0>d.<>4__this = this;
				<<LinkDeviceAsync>b__0>d.cancelToken = cancelToken;
				<<LinkDeviceAsync>b__0>d.<>1__state = -1;
				<<LinkDeviceAsync>b__0>d.<>t__builder.Start<<<LinkDeviceAsync>b__0>d>(ref <<LinkDeviceAsync>b__0>d);
				return <<LinkDeviceAsync>b__0>d.<>t__builder.Task;
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass30_0 : Object
		{
			[StructLayout((LayoutKind)3)]
			private struct <<UnlinkDeviceAsync>b__0>d : ValueType, IAsyncStateMachine
			{
				public int <>1__state;

				public AsyncTaskMethodBuilder<bool> <>t__builder;

				public <>c__DisplayClass30_0 <>4__this;

				public CancellationToken cancelToken;

				private TaskAwaiter<bool> <>u__1;

				private void MoveNext()
				{
					//IL_0082: Expected O, but got Unknown
					//IL_0058: Unknown result type (might be due to invalid IL or missing references)
					//IL_005d: Unknown result type (might be due to invalid IL or missing references)
					//IL_0064: Unknown result type (might be due to invalid IL or missing references)
					//IL_001e: Unknown result type (might be due to invalid IL or missing references)
					//IL_0028: Unknown result type (might be due to invalid IL or missing references)
					//IL_002d: Unknown result type (might be due to invalid IL or missing references)
					//IL_0041: Unknown result type (might be due to invalid IL or missing references)
					//IL_0042: Unknown result type (might be due to invalid IL or missing references)
					int num = <>1__state;
					<>c__DisplayClass30_0 <>c__DisplayClass30_ = <>4__this;
					bool result;
					try
					{
						TaskAwaiter<bool> val;
						if (num != 0)
						{
							val = <>c__DisplayClass30_.<>4__this.IsDeviceLinkedAsync(<>c__DisplayClass30_.mac, cancelToken).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<UnlinkDeviceAsync>b__0>d>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
						}
						result = !val.GetResult();
					}
					catch (Exception ex)
					{
						Exception exception = ex;
						<>1__state = -2;
						<>t__builder.SetException(exception);
						return;
					}
					<>1__state = -2;
					<>t__builder.SetResult(result);
				}

				[DebuggerHidden]
				private void SetStateMachine(IAsyncStateMachine stateMachine)
				{
					<>t__builder.SetStateMachine(stateMachine);
				}
			}

			public LogicalDeviceAccessoryGateway <>4__this;

			public MAC mac;

			[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
			internal Task<bool> <UnlinkDeviceAsync>b__0(ILogicalDevice _, CancellationToken cancelToken)
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				//IL_0016: Unknown result type (might be due to invalid IL or missing references)
				//IL_0017: Unknown result type (might be due to invalid IL or missing references)
				<<UnlinkDeviceAsync>b__0>d <<UnlinkDeviceAsync>b__0>d = default(<<UnlinkDeviceAsync>b__0>d);
				<<UnlinkDeviceAsync>b__0>d.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
				<<UnlinkDeviceAsync>b__0>d.<>4__this = this;
				<<UnlinkDeviceAsync>b__0>d.cancelToken = cancelToken;
				<<UnlinkDeviceAsync>b__0>d.<>1__state = -1;
				<<UnlinkDeviceAsync>b__0>d.<>t__builder.Start<<<UnlinkDeviceAsync>b__0>d>(ref <<UnlinkDeviceAsync>b__0>d);
				return <<UnlinkDeviceAsync>b__0>d.<>t__builder.Task;
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass31_0 : Object
		{
			[StructLayout((LayoutKind)3)]
			private struct <<AccessoryGatewayHasMac>b__0>d : ValueType, IAsyncStateMachine
			{
				public int <>1__state;

				public AsyncTaskMethodBuilder <>t__builder;

				public <>c__DisplayClass31_0 <>4__this;

				private TaskAwaiter<bool> <>u__1;

				private void MoveNext()
				{
					//IL_0110: Expected O, but got Unknown
					//IL_0060: Unknown result type (might be due to invalid IL or missing references)
					//IL_0065: Unknown result type (might be due to invalid IL or missing references)
					//IL_006c: Unknown result type (might be due to invalid IL or missing references)
					//IL_0090: Unknown result type (might be due to invalid IL or missing references)
					//IL_009a: Unknown result type (might be due to invalid IL or missing references)
					//IL_009f: Unknown result type (might be due to invalid IL or missing references)
					//IL_00ca: Unknown result type (might be due to invalid IL or missing references)
					//IL_00cf: Unknown result type (might be due to invalid IL or missing references)
					//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
					//IL_00b3: Unknown result type (might be due to invalid IL or missing references)
					//IL_00b4: Unknown result type (might be due to invalid IL or missing references)
					//IL_0023: Unknown result type (might be due to invalid IL or missing references)
					//IL_002d: Unknown result type (might be due to invalid IL or missing references)
					//IL_0032: Unknown result type (might be due to invalid IL or missing references)
					//IL_0046: Unknown result type (might be due to invalid IL or missing references)
					//IL_0047: Unknown result type (might be due to invalid IL or missing references)
					int num = <>1__state;
					<>c__DisplayClass31_0 <>c__DisplayClass31_ = <>4__this;
					try
					{
						TaskAwaiter<bool> val;
						if (num != 0)
						{
							if (num != 1)
							{
								goto IL_00f4;
							}
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<bool>);
							num = (<>1__state = -1);
							goto IL_00e5;
						}
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<bool>);
						num = (<>1__state = -1);
						goto IL_007b;
						IL_00e5:
						bool result = val.GetResult();
						<>c__DisplayClass31_.isPaired = result;
						goto IL_00f4;
						IL_00f4:
						if (!((CancellationToken)(ref <>c__DisplayClass31_.token)).IsCancellationRequested && !<>c__DisplayClass31_.isPaired)
						{
							val = TaskExtension.TryDelay(250, <>c__DisplayClass31_.token).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<AccessoryGatewayHasMac>b__0>d>(ref val, ref this);
								return;
							}
							goto IL_007b;
						}
						goto end_IL_000e;
						IL_007b:
						val.GetResult();
						val = <>c__DisplayClass31_.<>4__this.IsDeviceLinkedAsync(<>c__DisplayClass31_.mac, <>c__DisplayClass31_.token).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <<AccessoryGatewayHasMac>b__0>d>(ref val, ref this);
							return;
						}
						goto IL_00e5;
						end_IL_000e:;
					}
					catch (Exception ex)
					{
						Exception exception = ex;
						<>1__state = -2;
						((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
						return;
					}
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
				}

				[DebuggerHidden]
				private void SetStateMachine(IAsyncStateMachine stateMachine)
				{
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
				}
			}

			public CancellationToken token;

			public LogicalDeviceAccessoryGateway <>4__this;

			public MAC mac;

			public bool isPaired;

			[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
			internal Task <AccessoryGatewayHasMac>b__0()
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<AccessoryGatewayHasMac>b__0>d <<AccessoryGatewayHasMac>b__0>d = default(<<AccessoryGatewayHasMac>b__0>d);
				<<AccessoryGatewayHasMac>b__0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
				<<AccessoryGatewayHasMac>b__0>d.<>4__this = this;
				<<AccessoryGatewayHasMac>b__0>d.<>1__state = -1;
				((AsyncTaskMethodBuilder)(ref <<AccessoryGatewayHasMac>b__0>d.<>t__builder)).Start<<<AccessoryGatewayHasMac>b__0>d>(ref <<AccessoryGatewayHasMac>b__0>d);
				return ((AsyncTaskMethodBuilder)(ref <<AccessoryGatewayHasMac>b__0>d.<>t__builder)).Task;
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass32_0 : Object
		{
			public MAC mac;

			internal bool <IsDeviceLinkedAsync>b__0(MAC it)
			{
				return ((PhysicalAddress)it).Equals((PhysicalAddress)(object)mac);
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass34_0 : Object
		{
			[StructLayout((LayoutKind)3)]
			private struct <<GetLinkedDevicesAsync>b__0>d : ValueType, IAsyncStateMachine
			{
				public int <>1__state;

				public AsyncTaskMethodBuilder<List<MAC>> <>t__builder;

				public <>c__DisplayClass34_0 <>4__this;

				private int <numLinkedDevicesFound>5__2;

				private List<MAC> <devices>5__3;

				private int <index>5__4;

				private TaskAwaiter<MAC> <>u__1;

				private void MoveNext()
				{
					//IL_0116: Expected O, but got Unknown
					//IL_0098: Unknown result type (might be due to invalid IL or missing references)
					//IL_009d: Unknown result type (might be due to invalid IL or missing references)
					//IL_00a5: Unknown result type (might be due to invalid IL or missing references)
					//IL_0038: Unknown result type (might be due to invalid IL or missing references)
					//IL_003d: Unknown result type (might be due to invalid IL or missing references)
					//IL_0059: Unknown result type (might be due to invalid IL or missing references)
					//IL_0063: Unknown result type (might be due to invalid IL or missing references)
					//IL_0068: Unknown result type (might be due to invalid IL or missing references)
					//IL_007d: Unknown result type (might be due to invalid IL or missing references)
					//IL_007f: Unknown result type (might be due to invalid IL or missing references)
					int num = <>1__state;
					<>c__DisplayClass34_0 <>c__DisplayClass34_ = <>4__this;
					List<MAC> result2;
					try
					{
						if (num != 0)
						{
							<numLinkedDevicesFound>5__2 = 0;
							<devices>5__3 = new List<MAC>();
							<index>5__4 = 0;
							goto IL_00f0;
						}
						TaskAwaiter<MAC> val = <>u__1;
						<>u__1 = default(TaskAwaiter<MAC>);
						num = (<>1__state = -1);
						goto IL_00b4;
						IL_00b4:
						MAC result = val.GetResult();
						if (IsDeviceMacValid(result))
						{
							<numLinkedDevicesFound>5__2++;
							<devices>5__3.Add(result);
						}
						<index>5__4++;
						goto IL_00f0;
						IL_00f0:
						if (<index>5__4 < 42 && <numLinkedDevicesFound>5__2 < <>c__DisplayClass34_.numLinkedDevices)
						{
							CancellationToken token = <>c__DisplayClass34_.linkedCts.Token;
							((CancellationToken)(ref token)).ThrowIfCancellationRequested();
							val = <>c__DisplayClass34_.<>4__this.GetLinkedDeviceAtIndexAsync((ushort)<index>5__4, <>c__DisplayClass34_.linkedCts.Token).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<MAC>, <<GetLinkedDevicesAsync>b__0>d>(ref val, ref this);
								return;
							}
							goto IL_00b4;
						}
						result2 = <devices>5__3;
					}
					catch (Exception ex)
					{
						Exception exception = ex;
						<>1__state = -2;
						<devices>5__3 = null;
						<>t__builder.SetException(exception);
						return;
					}
					<>1__state = -2;
					<devices>5__3 = null;
					<>t__builder.SetResult(result2);
				}

				[DebuggerHidden]
				private void SetStateMachine(IAsyncStateMachine stateMachine)
				{
					<>t__builder.SetStateMachine(stateMachine);
				}
			}

			public CancellationTokenSource linkedCts;

			public LogicalDeviceAccessoryGateway <>4__this;

			public int numLinkedDevices;

			[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
			internal Task<List<MAC>> <GetLinkedDevicesAsync>b__0()
			{
				//IL_0002: Unknown result type (might be due to invalid IL or missing references)
				//IL_0007: Unknown result type (might be due to invalid IL or missing references)
				<<GetLinkedDevicesAsync>b__0>d <<GetLinkedDevicesAsync>b__0>d = default(<<GetLinkedDevicesAsync>b__0>d);
				<<GetLinkedDevicesAsync>b__0>d.<>t__builder = AsyncTaskMethodBuilder<List<MAC>>.Create();
				<<GetLinkedDevicesAsync>b__0>d.<>4__this = this;
				<<GetLinkedDevicesAsync>b__0>d.<>1__state = -1;
				<<GetLinkedDevicesAsync>b__0>d.<>t__builder.Start<<<GetLinkedDevicesAsync>b__0>d>(ref <<GetLinkedDevicesAsync>b__0>d);
				return <<GetLinkedDevicesAsync>b__0>d.<>t__builder.Task;
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass37_0 : Object
		{
			public bool databaseModified;
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass37_1 : Object
		{
			public ILogicalDeviceAccessory accessoryDevice;

			public <>c__DisplayClass37_0 CS$<>8__locals1;

			internal bool <ResyncDevicesAsync>b__1(MAC it)
			{
				return ((PhysicalAddress)it).Equals((PhysicalAddress)(object)((ILogicalDevice)accessoryDevice).LogicalId.ProductMacAddress);
			}

			internal void <ResyncDevicesAsync>b__3(ILogicalDeviceSourceDirect source)
			{
				if (((ILogicalDevice)accessoryDevice).IsAssociatedWithDeviceSource((ILogicalDeviceSource)(object)source))
				{
					((ILogicalDevice)accessoryDevice).RemoveDeviceSource((ILogicalDeviceSource)(object)source);
					CS$<>8__locals1.databaseModified = true;
				}
			}
		}

		[CompilerGenerated]
		private sealed class <>c__DisplayClass38_0 : Object
		{
			public Func<ILogicalDevice, CancellationToken, Task<bool>> verifyCommand;

			public CancellationToken token;

			public int attemptCount;

			public int maxAttempts;

			internal CommandControl <SendAndVerifyCommand>b__0(ILogicalDevice device)
			{
				//IL_0008: Unknown result type (might be due to invalid IL or missing references)
				//IL_001a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_0056: Unknown result type (might be due to invalid IL or missing references)
				//IL_003a: Unknown result type (might be due to invalid IL or missing references)
				try
				{
					if (verifyCommand.Invoke(device, token).Result)
					{
						return (CommandControl)0;
					}
					return (CommandControl)((attemptCount++ < maxAttempts) ? 1 : 3);
				}
				catch (Object)
				{
					return (CommandControl)((++attemptCount < 3) ? 1 : 3);
				}
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <AccessoryGatewayHasMac>d__31 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public CancellationToken token;

			public LogicalDeviceAccessoryGateway <>4__this;

			public MAC mac;

			private <>c__DisplayClass31_0 <>8__1;

			private TaskAwaiter<Task> <>u__1;

			private void MoveNext()
			{
				//IL_0119: Expected O, but got Unknown
				//IL_00e7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ec: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f3: Unknown result type (might be due to invalid IL or missing references)
				//IL_001f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0024: Unknown result type (might be due to invalid IL or missing references)
				//IL_0078: Unknown result type (might be due to invalid IL or missing references)
				//IL_0083: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bc: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				bool result;
				try
				{
					TaskAwaiter<Task> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<Task>);
						num = (<>1__state = -1);
						goto IL_0102;
					}
					<>8__1 = new <>c__DisplayClass31_0();
					<>8__1.token = token;
					<>8__1.<>4__this = <>4__this;
					<>8__1.mac = mac;
					if (IsDeviceMacValid(<>8__1.mac))
					{
						<>8__1.isPaired = false;
						val = Task.WhenAny((Task[])(object)new Task[2]
						{
							Task.Delay(PairWithRvTimeout, <>8__1.token),
							Task.Run((Func<Task>)([AsyncStateMachine(/*Could not decode attribute arguments.*/)] () =>
							{
								//IL_0002: Unknown result type (might be due to invalid IL or missing references)
								//IL_0007: Unknown result type (might be due to invalid IL or missing references)
								<>c__DisplayClass31_0.<<AccessoryGatewayHasMac>b__0>d <<AccessoryGatewayHasMac>b__0>d = default(<>c__DisplayClass31_0.<<AccessoryGatewayHasMac>b__0>d);
								<<AccessoryGatewayHasMac>b__0>d.<>t__builder = AsyncTaskMethodBuilder.Create();
								<<AccessoryGatewayHasMac>b__0>d.<>4__this = <>8__1;
								<<AccessoryGatewayHasMac>b__0>d.<>1__state = -1;
								((AsyncTaskMethodBuilder)(ref <<AccessoryGatewayHasMac>b__0>d.<>t__builder)).Start<<>c__DisplayClass31_0.<<AccessoryGatewayHasMac>b__0>d>(ref <<AccessoryGatewayHasMac>b__0>d);
								return ((AsyncTaskMethodBuilder)(ref <<AccessoryGatewayHasMac>b__0>d.<>t__builder)).Task;
							}), <>8__1.token)
						}).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<Task>, <AccessoryGatewayHasMac>d__31>(ref val, ref this);
							return;
						}
						goto IL_0102;
					}
					result = false;
					goto end_IL_0007;
					IL_0102:
					val.GetResult();
					result = <>8__1.isPaired;
					end_IL_0007:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>8__1 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ActivateSession>d__41 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceAccessoryGateway <>4__this;

			public CancellationToken cancelToken;

			private TaskAwaiter <>u__1;

			private void MoveNext()
			{
				//IL_007e: Expected O, but got Unknown
				//IL_00af: Expected O, but got Unknown
				//IL_0059: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_001b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0026: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_003f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0040: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAccessoryGateway logicalDeviceAccessoryGateway = <>4__this;
				try
				{
					try
					{
						TaskAwaiter val;
						if (num != 0)
						{
							val = logicalDeviceAccessoryGateway.IdsCanCommandRunner.CommandActivateSession(cancelToken, true).GetAwaiter();
							if (!((TaskAwaiter)(ref val)).IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <ActivateSession>d__41>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val)).GetResult();
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Error("LogicalDeviceAccessoryGateway", String.Format("Unable to ActiveSession for {0} with error ${1}\n{2}", (object)((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceAccessoryGateway).LogicalId, (object)ex2.Message, (object)ex2.StackTrace), Array.Empty<object>());
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ClearAllDevicesAsync>d__36 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceAccessoryGateway <>4__this;

			public CancellationToken token;

			private CancellationTokenSource <linkedCts>5__2;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0177: Expected O, but got Unknown
				//IL_018e: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ab: Expected O, but got Unknown
				//IL_01de: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_0053: Unknown result type (might be due to invalid IL or missing references)
				//IL_003a: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00df: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f5: Unknown result type (might be due to invalid IL or missing references)
				//IL_014f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0154: Unknown result type (might be due to invalid IL or missing references)
				//IL_015c: Unknown result type (might be due to invalid IL or missing references)
				//IL_016d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0172: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Unknown result type (might be due to invalid IL or missing references)
				//IL_011a: Unknown result type (might be due to invalid IL or missing references)
				//IL_011f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0093: Unknown result type (might be due to invalid IL or missing references)
				//IL_009d: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0134: Unknown result type (might be due to invalid IL or missing references)
				//IL_0136: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b9: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAccessoryGateway CS$<>8__locals8 = <>4__this;
				CommandResult result;
				try
				{
					if ((uint)num <= 1u)
					{
						goto IL_0063;
					}
					LogicalDeviceAccessoryGatewayCommandClearDevices command = default(LogicalDeviceAccessoryGatewayCommandClearDevices);
					if (!((CommonDisposableNotifyPropertyChanged)CS$<>8__locals8).IsDisposed)
					{
						command = new LogicalDeviceAccessoryGatewayCommandClearDevices();
						<linkedCts>5__2 = CancellationTokenSource.CreateLinkedTokenSource(token, CS$<>8__locals8._commandCancelSource.Token);
						goto IL_0063;
					}
					TaggedLog.Debug("LogicalDeviceAccessoryGateway", String.Concat(((LogicalDevice<ILogicalDeviceCapability>)(object)CS$<>8__locals8).DeviceName, " Accessory gateway ignored because its been disposed"), Array.Empty<object>());
					result = (CommandResult)7;
					goto end_IL_000e;
					IL_0063:
					try
					{
						_ = 1;
						try
						{
							TaskAwaiter<CommandResult> val;
							if (num == 0)
							{
								val = <>u__1;
								<>u__1 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								goto IL_00ee;
							}
							if (num != 1)
							{
								if (((LogicalDevice<ILogicalDeviceCapability>)(object)CS$<>8__locals8).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)CS$<>8__locals8) is ILogicalDeviceSourceDirectAccessoryGateway logicalDeviceSourceDirectAccessoryGateway)
								{
									val = logicalDeviceSourceDirectAccessoryGateway.SendDirectCommandAccessoryGatewayAsync(CS$<>8__locals8, command, <linkedCts>5__2.Token).GetAwaiter();
									if (!val.IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <ClearAllDevicesAsync>d__36>(ref val, ref this);
										return;
									}
									goto IL_00ee;
								}
								val = CS$<>8__locals8.SendAndVerifyCommand((IDeviceCommandPacket)(object)command, [AsyncStateMachine(/*Could not decode attribute arguments.*/)] [CompilerGenerated] (ILogicalDevice _, CancellationToken cancelToken) =>
								{
									//IL_0002: Unknown result type (might be due to invalid IL or missing references)
									//IL_0007: Unknown result type (might be due to invalid IL or missing references)
									//IL_0016: Unknown result type (might be due to invalid IL or missing references)
									//IL_0017: Unknown result type (might be due to invalid IL or missing references)
									<<ClearAllDevicesAsync>b__36_0>d <<ClearAllDevicesAsync>b__36_0>d = default(<<ClearAllDevicesAsync>b__36_0>d);
									<<ClearAllDevicesAsync>b__36_0>d.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
									<<ClearAllDevicesAsync>b__36_0>d.<>4__this = CS$<>8__locals8;
									<<ClearAllDevicesAsync>b__36_0>d.cancelToken = cancelToken;
									<<ClearAllDevicesAsync>b__36_0>d.<>1__state = -1;
									<<ClearAllDevicesAsync>b__36_0>d.<>t__builder.Start<<<ClearAllDevicesAsync>b__36_0>d>(ref <<ClearAllDevicesAsync>b__36_0>d);
									return <<ClearAllDevicesAsync>b__36_0>d.<>t__builder.Task;
								}, 3, <linkedCts>5__2.Token).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 1);
									<>u__1 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <ClearAllDevicesAsync>d__36>(ref val, ref this);
									return;
								}
							}
							else
							{
								val = <>u__1;
								<>u__1 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
							}
							result = val.GetResult();
							goto end_IL_0068;
							IL_00ee:
							result = val.GetResult();
							end_IL_0068:;
						}
						catch (Exception ex)
						{
							Exception ex2 = ex;
							TaggedLog.Error("LogicalDeviceAccessoryGateway", ex2.Message, Array.Empty<object>());
							result = (CommandResult)7;
						}
					}
					finally
					{
						if (num < 0 && <linkedCts>5__2 != null)
						{
							((IDisposable)<linkedCts>5__2).Dispose();
						}
					}
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<linkedCts>5__2 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<linkedCts>5__2 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <GetLinkedDeviceAtIndexAsync>d__33 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<MAC> <>t__builder;

			public LogicalDeviceAccessoryGateway <>4__this;

			public CancellationToken token;

			public ushort index;

			private CancellationTokenSource <linkedCts>5__2;

			private uint <macLow>5__3;

			private TaskAwaiter<uint> <>u__1;

			private TaskAwaiter<ushort> <>u__2;

			private void MoveNext()
			{
				//IL_0201: Expected O, but got Unknown
				//IL_0032: Unknown result type (might be due to invalid IL or missing references)
				//IL_003d: Unknown result type (might be due to invalid IL or missing references)
				//IL_002a: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d7: Unknown result type (might be due to invalid IL or missing references)
				//IL_00dc: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e4: Unknown result type (might be due to invalid IL or missing references)
				//IL_0116: Unknown result type (might be due to invalid IL or missing references)
				//IL_0120: Unknown result type (might be due to invalid IL or missing references)
				//IL_0125: Unknown result type (might be due to invalid IL or missing references)
				//IL_0155: Unknown result type (might be due to invalid IL or missing references)
				//IL_015a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0162: Unknown result type (might be due to invalid IL or missing references)
				//IL_01df: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e5: Expected O, but got Unknown
				//IL_013a: Unknown result type (might be due to invalid IL or missing references)
				//IL_013c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0098: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a2: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a7: Unknown result type (might be due to invalid IL or missing references)
				//IL_0080: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bc: Unknown result type (might be due to invalid IL or missing references)
				//IL_00be: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAccessoryGateway logicalDeviceAccessoryGateway = <>4__this;
				MAC result3;
				try
				{
					if ((uint)num > 1u)
					{
						if (((CommonDisposableNotifyPropertyChanged)logicalDeviceAccessoryGateway).IsDisposed)
						{
							throw new InvalidOperationException(String.Concat(((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceAccessoryGateway).DeviceName, " Accessory gateway ignored because its been disposed"));
						}
						<linkedCts>5__2 = CancellationTokenSource.CreateLinkedTokenSource(token, logicalDeviceAccessoryGateway._commandCancelSource.Token);
					}
					try
					{
						TaskAwaiter<ushort> val;
						TaskAwaiter<uint> val2;
						if (num != 0)
						{
							if (num == 1)
							{
								val = <>u__2;
								<>u__2 = default(TaskAwaiter<ushort>);
								num = (<>1__state = -1);
								goto IL_0171;
							}
							if (index >= 42)
							{
								throw new IndexOutOfRangeException(String.Format("Index ({0}) cannot be greater than the max number of linked devices ({1}).", (object)index, (object)42));
							}
							val2 = ((LogicalDevicePidArray<uint>)(object)logicalDeviceAccessoryGateway.AssociatedDeviceMacLowPid).ReadValueAsync(index, <linkedCts>5__2.Token).GetAwaiter();
							if (!val2.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<uint>, <GetLinkedDeviceAtIndexAsync>d__33>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter<uint>);
							num = (<>1__state = -1);
						}
						uint result = val2.GetResult();
						<macLow>5__3 = result;
						val = ((LogicalDevicePidArray<ushort>)(object)logicalDeviceAccessoryGateway.AssociatedDeviceMacHighPid).ReadValueAsync(index, <linkedCts>5__2.Token).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 1);
							<>u__2 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ushort>, <GetLinkedDeviceAtIndexAsync>d__33>(ref val, ref this);
							return;
						}
						goto IL_0171;
						IL_0171:
						ushort result2 = val.GetResult();
						Byte[] array = new Byte[6];
						array[5] = (byte)(<macLow>5__3 & 0xFF);
						array[4] = (byte)((<macLow>5__3 & 0xFF00) >> 8);
						array[3] = (byte)((<macLow>5__3 & 0xFF0000) >> 16);
						array[2] = (byte)((<macLow>5__3 & 0xFF000000u) >> 24);
						array[1] = (byte)(result2 & 0xFF);
						array[0] = (byte)((result2 & 0xFF00) >> 8);
						result3 = new MAC((byte[])(object)array);
					}
					finally
					{
						if (num < 0 && <linkedCts>5__2 != null)
						{
							((IDisposable)<linkedCts>5__2).Dispose();
						}
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<linkedCts>5__2 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<linkedCts>5__2 = null;
				<>t__builder.SetResult(result3);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <GetLinkedDevicesAsync>d__34 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<IEnumerable<MAC>> <>t__builder;

			public LogicalDeviceAccessoryGateway <>4__this;

			public CancellationToken token;

			private <>c__DisplayClass34_0 <>8__1;

			private TaskAwaiter<ulong> <>u__1;

			private TaskAwaiter<List<MAC>> <>u__2;

			private void MoveNext()
			{
				//IL_01b6: Expected O, but got Unknown
				//IL_0053: Unknown result type (might be due to invalid IL or missing references)
				//IL_005e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0046: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c8: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cd: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d5: Unknown result type (might be due to invalid IL or missing references)
				//IL_016c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0171: Unknown result type (might be due to invalid IL or missing references)
				//IL_0179: Unknown result type (might be due to invalid IL or missing references)
				//IL_0089: Unknown result type (might be due to invalid IL or missing references)
				//IL_0093: Unknown result type (might be due to invalid IL or missing references)
				//IL_0098: Unknown result type (might be due to invalid IL or missing references)
				//IL_012d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0137: Unknown result type (might be due to invalid IL or missing references)
				//IL_013c: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ad: Unknown result type (might be due to invalid IL or missing references)
				//IL_00af: Unknown result type (might be due to invalid IL or missing references)
				//IL_0151: Unknown result type (might be due to invalid IL or missing references)
				//IL_0153: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAccessoryGateway logicalDeviceAccessoryGateway = <>4__this;
				IEnumerable<MAC> result2;
				try
				{
					if ((uint)num > 1u)
					{
						<>8__1 = new <>c__DisplayClass34_0();
						<>8__1.<>4__this = <>4__this;
						if (((CommonDisposableNotifyPropertyChanged)logicalDeviceAccessoryGateway).IsDisposed)
						{
							throw new InvalidOperationException(String.Concat(((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceAccessoryGateway).DeviceName, " Accessory gateway ignored because its been disposed"));
						}
						<>8__1.linkedCts = CancellationTokenSource.CreateLinkedTokenSource(token, logicalDeviceAccessoryGateway._commandCancelSource.Token);
					}
					try
					{
						TaskAwaiter<List<MAC>> val;
						TaskAwaiter<ulong> val2;
						if (num != 0)
						{
							if (num == 1)
							{
								val = <>u__2;
								<>u__2 = default(TaskAwaiter<List<MAC>>);
								num = (<>1__state = -1);
								goto IL_0188;
							}
							val2 = ((LogicalDevicePid)logicalDeviceAccessoryGateway.AssociatedDeviceCountPid).ReadValueAsync(<>8__1.linkedCts.Token).GetAwaiter();
							if (!val2.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val2;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<ulong>, <GetLinkedDevicesAsync>d__34>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__1;
							<>u__1 = default(TaskAwaiter<ulong>);
							num = (<>1__state = -1);
						}
						ulong result = val2.GetResult();
						<>8__1.numLinkedDevices = (int)result;
						if (<>8__1.numLinkedDevices != 0)
						{
							val = Task.Run<List<MAC>>((Func<Task<List<MAC>>>)([AsyncStateMachine(/*Could not decode attribute arguments.*/)] () =>
							{
								//IL_0002: Unknown result type (might be due to invalid IL or missing references)
								//IL_0007: Unknown result type (might be due to invalid IL or missing references)
								<>c__DisplayClass34_0.<<GetLinkedDevicesAsync>b__0>d <<GetLinkedDevicesAsync>b__0>d = default(<>c__DisplayClass34_0.<<GetLinkedDevicesAsync>b__0>d);
								<<GetLinkedDevicesAsync>b__0>d.<>t__builder = AsyncTaskMethodBuilder<List<MAC>>.Create();
								<<GetLinkedDevicesAsync>b__0>d.<>4__this = <>8__1;
								<<GetLinkedDevicesAsync>b__0>d.<>1__state = -1;
								<<GetLinkedDevicesAsync>b__0>d.<>t__builder.Start<<>c__DisplayClass34_0.<<GetLinkedDevicesAsync>b__0>d>(ref <<GetLinkedDevicesAsync>b__0>d);
								return <<GetLinkedDevicesAsync>b__0>d.<>t__builder.Task;
							}), <>8__1.linkedCts.Token).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<List<MAC>>, <GetLinkedDevicesAsync>d__34>(ref val, ref this);
								return;
							}
							goto IL_0188;
						}
						result2 = (IEnumerable<MAC>)(object)new List<MAC>();
						goto end_IL_006e;
						IL_0188:
						result2 = (IEnumerable<MAC>)(object)val.GetResult();
						end_IL_006e:;
					}
					finally
					{
						if (num < 0 && <>8__1.linkedCts != null)
						{
							((IDisposable)<>8__1.linkedCts).Dispose();
						}
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>8__1 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <IsDeviceLinkedAsync>d__32 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public MAC mac;

			public LogicalDeviceAccessoryGateway <>4__this;

			public CancellationToken token;

			private <>c__DisplayClass32_0 <>8__1;

			private TaskAwaiter<IEnumerable<MAC>> <>u__1;

			private void MoveNext()
			{
				//IL_0103: Expected O, but got Unknown
				//IL_00c6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00cb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d2: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_006b: Unknown result type (might be due to invalid IL or missing references)
				//IL_008c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0096: Unknown result type (might be due to invalid IL or missing references)
				//IL_009b: Unknown result type (might be due to invalid IL or missing references)
				//IL_00af: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b0: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAccessoryGateway logicalDeviceAccessoryGateway = <>4__this;
				bool result;
				try
				{
					TaskAwaiter<IEnumerable<MAC>> val;
					if (num == 0)
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<IEnumerable<MAC>>);
						num = (<>1__state = -1);
						goto IL_00e1;
					}
					<>8__1 = new <>c__DisplayClass32_0();
					<>8__1.mac = mac;
					if (((CommonDisposableNotifyPropertyChanged)logicalDeviceAccessoryGateway).IsDisposed)
					{
						throw new InvalidOperationException(String.Concat(((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceAccessoryGateway).DeviceName, " Accessory gateway ignored because its been disposed"));
					}
					if ((PhysicalAddress)(object)<>8__1.mac == (PhysicalAddress)null)
					{
						throw new ArgumentException("MAC address is null", "mac");
					}
					if (IsDeviceMacValid(<>8__1.mac))
					{
						val = logicalDeviceAccessoryGateway.GetLinkedDevicesAsync(token).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<IEnumerable<MAC>>, <IsDeviceLinkedAsync>d__32>(ref val, ref this);
							return;
						}
						goto IL_00e1;
					}
					result = false;
					goto end_IL_000e;
					IL_00e1:
					result = Enumerable.Any<MAC>(val.GetResult(), (Func<MAC, bool>)((MAC it) => ((PhysicalAddress)it).Equals((PhysicalAddress)(object)<>8__1.mac)));
					end_IL_000e:;
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>8__1 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <LinkDeviceAsync>d__29 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceAccessoryGateway <>4__this;

			public MAC mac;

			public CancellationToken token;

			private <>c__DisplayClass29_0 <>8__1;

			private CancellationTokenSource <linkedCts>5__2;

			private TaskAwaiter<CommandResult> <>u__1;

			private TaskAwaiter<bool> <>u__2;

			private void MoveNext()
			{
				//IL_0272: Expected O, but got Unknown
				//IL_0289: Unknown result type (might be due to invalid IL or missing references)
				//IL_02a6: Expected O, but got Unknown
				//IL_02e7: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ab: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b6: Unknown result type (might be due to invalid IL or missing references)
				//IL_0092: Unknown result type (might be due to invalid IL or missing references)
				//IL_0140: Unknown result type (might be due to invalid IL or missing references)
				//IL_0145: Unknown result type (might be due to invalid IL or missing references)
				//IL_014d: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c2: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01cf: Unknown result type (might be due to invalid IL or missing references)
				//IL_024a: Unknown result type (might be due to invalid IL or missing references)
				//IL_024f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0257: Unknown result type (might be due to invalid IL or missing references)
				//IL_015e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0163: Unknown result type (might be due to invalid IL or missing references)
				//IL_0165: Unknown result type (might be due to invalid IL or missing references)
				//IL_0268: Unknown result type (might be due to invalid IL or missing references)
				//IL_026d: Unknown result type (might be due to invalid IL or missing references)
				//IL_020b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0215: Unknown result type (might be due to invalid IL or missing references)
				//IL_021a: Unknown result type (might be due to invalid IL or missing references)
				//IL_0101: Unknown result type (might be due to invalid IL or missing references)
				//IL_010b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Unknown result type (might be due to invalid IL or missing references)
				//IL_0183: Unknown result type (might be due to invalid IL or missing references)
				//IL_018d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0192: Unknown result type (might be due to invalid IL or missing references)
				//IL_0169: Unknown result type (might be due to invalid IL or missing references)
				//IL_016b: Unknown result type (might be due to invalid IL or missing references)
				//IL_022f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0231: Unknown result type (might be due to invalid IL or missing references)
				//IL_0125: Unknown result type (might be due to invalid IL or missing references)
				//IL_0127: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_01eb: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAccessoryGateway logicalDeviceAccessoryGateway = <>4__this;
				CommandResult result;
				try
				{
					if ((uint)num <= 2u)
					{
						goto IL_00c6;
					}
					<>8__1 = new <>c__DisplayClass29_0();
					<>8__1.<>4__this = <>4__this;
					<>8__1.mac = mac;
					LogicalDeviceAccessoryGatewayCommandLinkDevice command = default(LogicalDeviceAccessoryGatewayCommandLinkDevice);
					if (((CommonDisposableNotifyPropertyChanged)logicalDeviceAccessoryGateway).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceAccessoryGateway", String.Concat(((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceAccessoryGateway).DeviceName, " Accessory gateway ignored because its been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else
					{
						if (<>8__1.mac != null)
						{
							command = new LogicalDeviceAccessoryGatewayCommandLinkDevice(<>8__1.mac);
							<linkedCts>5__2 = CancellationTokenSource.CreateLinkedTokenSource(token, logicalDeviceAccessoryGateway._commandCancelSource.Token);
							goto IL_00c6;
						}
						TaggedLog.Error("LogicalDeviceAccessoryGateway", "Cannot link device because MAC address is null", Array.Empty<object>());
						result = (CommandResult)7;
					}
					goto end_IL_000e;
					IL_00c6:
					try
					{
						_ = 2;
						try
						{
							TaskAwaiter<CommandResult> val;
							TaskAwaiter<bool> val2;
							CommandResult result2;
							switch (num)
							{
							default:
								if (((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceAccessoryGateway).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceAccessoryGateway) is ILogicalDeviceSourceDirectAccessoryGateway logicalDeviceSourceDirectAccessoryGateway)
								{
									val = logicalDeviceSourceDirectAccessoryGateway.SendDirectCommandAccessoryGatewayAsync(logicalDeviceAccessoryGateway, command, <linkedCts>5__2.Token).GetAwaiter();
									if (!val.IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <LinkDeviceAsync>d__29>(ref val, ref this);
										return;
									}
									goto IL_015c;
								}
								val = logicalDeviceAccessoryGateway.SendAndVerifyCommand((IDeviceCommandPacket)(object)command, [AsyncStateMachine(/*Could not decode attribute arguments.*/)] (ILogicalDevice _, CancellationToken cancelToken) =>
								{
									//IL_0002: Unknown result type (might be due to invalid IL or missing references)
									//IL_0007: Unknown result type (might be due to invalid IL or missing references)
									//IL_0016: Unknown result type (might be due to invalid IL or missing references)
									//IL_0017: Unknown result type (might be due to invalid IL or missing references)
									<>c__DisplayClass29_0.<<LinkDeviceAsync>b__0>d <<LinkDeviceAsync>b__0>d = default(<>c__DisplayClass29_0.<<LinkDeviceAsync>b__0>d);
									<<LinkDeviceAsync>b__0>d.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
									<<LinkDeviceAsync>b__0>d.<>4__this = <>8__1;
									<<LinkDeviceAsync>b__0>d.cancelToken = cancelToken;
									<<LinkDeviceAsync>b__0>d.<>1__state = -1;
									<<LinkDeviceAsync>b__0>d.<>t__builder.Start<<>c__DisplayClass29_0.<<LinkDeviceAsync>b__0>d>(ref <<LinkDeviceAsync>b__0>d);
									return <<LinkDeviceAsync>b__0>d.<>t__builder.Task;
								}, 3, <linkedCts>5__2.Token).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 2);
									<>u__1 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <LinkDeviceAsync>d__29>(ref val, ref this);
									return;
								}
								break;
							case 0:
								val = <>u__1;
								<>u__1 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								goto IL_015c;
							case 1:
								val2 = <>u__2;
								<>u__2 = default(TaskAwaiter<bool>);
								num = (<>1__state = -1);
								goto IL_01de;
							case 2:
								{
									val = <>u__1;
									<>u__1 = default(TaskAwaiter<CommandResult>);
									num = (<>1__state = -1);
									break;
								}
								IL_01de:
								result = (CommandResult)(!val2.GetResult());
								goto end_IL_00cb;
								IL_015c:
								result2 = val.GetResult();
								if ((int)result2 == 0)
								{
									val2 = logicalDeviceAccessoryGateway.AccessoryGatewayHasMac(<>8__1.mac, <linkedCts>5__2.Token).GetAwaiter();
									if (!val2.IsCompleted)
									{
										num = (<>1__state = 1);
										<>u__2 = val2;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <LinkDeviceAsync>d__29>(ref val2, ref this);
										return;
									}
									goto IL_01de;
								}
								result = result2;
								goto end_IL_00cb;
							}
							result = val.GetResult();
							end_IL_00cb:;
						}
						catch (Exception ex)
						{
							Exception ex2 = ex;
							TaggedLog.Error("LogicalDeviceAccessoryGateway", ex2.Message, Array.Empty<object>());
							result = (CommandResult)7;
						}
					}
					finally
					{
						if (num < 0 && <linkedCts>5__2 != null)
						{
							((IDisposable)<linkedCts>5__2).Dispose();
						}
					}
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>8__1 = null;
					<linkedCts>5__2 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				<linkedCts>5__2 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <ResyncDevicesAsync>d__37 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<bool> <>t__builder;

			public LogicalDeviceAccessoryGateway <>4__this;

			public CancellationToken token;

			private <>c__DisplayClass37_0 <>8__1;

			private TaskAwaiter<IEnumerable<MAC>> <>u__1;

			private void MoveNext()
			{
				//IL_0188: Expected O, but got Unknown
				//IL_01ae: Expected O, but got Unknown
				//IL_0060: Unknown result type (might be due to invalid IL or missing references)
				//IL_0065: Unknown result type (might be due to invalid IL or missing references)
				//IL_006d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0021: Unknown result type (might be due to invalid IL or missing references)
				//IL_002b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0030: Unknown result type (might be due to invalid IL or missing references)
				//IL_0045: Unknown result type (might be due to invalid IL or missing references)
				//IL_0047: Unknown result type (might be due to invalid IL or missing references)
				//IL_00de: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e3: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAccessoryGateway logicalDeviceAccessoryGateway = <>4__this;
				bool result2;
				try
				{
					try
					{
						TaskAwaiter<IEnumerable<MAC>> val;
						if (num != 0)
						{
							<>8__1 = new <>c__DisplayClass37_0();
							val = logicalDeviceAccessoryGateway.GetLinkedDevicesAsync(token).GetAwaiter();
							if (!val.IsCompleted)
							{
								num = (<>1__state = 0);
								<>u__1 = val;
								<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<IEnumerable<MAC>>, <ResyncDevicesAsync>d__37>(ref val, ref this);
								return;
							}
						}
						else
						{
							val = <>u__1;
							<>u__1 = default(TaskAwaiter<IEnumerable<MAC>>);
							num = (<>1__state = -1);
						}
						IEnumerable<MAC> result = val.GetResult();
						List<ILogicalDeviceSourceDirect> val2 = ((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceAccessoryGateway).DeviceService.DeviceSourceManager.FindDeviceSources<ILogicalDeviceSourceDirect>((Func<ILogicalDeviceSourceDirect, bool>)((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceAccessoryGateway).IsAssociatedWithDeviceSource);
						<>8__1.databaseModified = false;
						Enumerator<ILogicalDeviceAccessory> enumerator = ((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceAccessoryGateway).DeviceService.DeviceManager.FindLogicalDevices<ILogicalDeviceAccessory>((Func<ILogicalDeviceAccessory, bool>)((ILogicalDeviceAccessory it) => (PhysicalAddress)(object)((ILogicalDevice)it).LogicalId.ProductMacAddress != (PhysicalAddress)null && ((IAccessoryDevice)it).IsAccessoryGatewaySupported)).GetEnumerator();
						try
						{
							while (enumerator.MoveNext())
							{
								<>c__DisplayClass37_1 CS$<>8__locals4 = new <>c__DisplayClass37_1
								{
									CS$<>8__locals1 = <>8__1,
									accessoryDevice = enumerator.Current
								};
								if (Enumerable.Any<MAC>(result, (Func<MAC, bool>)((MAC it) => ((PhysicalAddress)it).Equals((PhysicalAddress)(object)((ILogicalDevice)CS$<>8__locals4.accessoryDevice).LogicalId.ProductMacAddress))))
								{
									continue;
								}
								Enumerable.ToList<ILogicalDeviceSourceDirect>(Enumerable.Where<ILogicalDeviceSourceDirect>((IEnumerable<ILogicalDeviceSourceDirect>)(object)val2, (Func<ILogicalDeviceSourceDirect, bool>)((ILogicalDeviceSourceDirect source) => !(source is ILogicalDeviceSourceCloudConnection)))).ForEach((Action<ILogicalDeviceSourceDirect>)delegate(ILogicalDeviceSourceDirect source)
								{
									if (((ILogicalDevice)CS$<>8__locals4.accessoryDevice).IsAssociatedWithDeviceSource((ILogicalDeviceSource)(object)source))
									{
										((ILogicalDevice)CS$<>8__locals4.accessoryDevice).RemoveDeviceSource((ILogicalDeviceSource)(object)source);
										CS$<>8__locals4.CS$<>8__locals1.databaseModified = true;
									}
								});
							}
						}
						finally
						{
							if (num < 0)
							{
								((IDisposable)enumerator/*cast due to .constrained prefix*/).Dispose();
							}
						}
						result2 = <>8__1.databaseModified;
					}
					catch (Exception ex)
					{
						Exception ex2 = ex;
						TaggedLog.Warning("LogicalDeviceAccessoryGateway", String.Concat("Unable to Resync Devices ", ex2.Message), Array.Empty<object>());
						result2 = false;
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result2);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendAndVerifyCommand>d__38 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public Func<ILogicalDevice, CancellationToken, Task<bool>> verifyCommand;

			public CancellationToken token;

			public int maxAttempts;

			public LogicalDeviceAccessoryGateway <>4__this;

			public IDeviceCommandPacket command;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_00c3: Expected O, but got Unknown
				//IL_009b: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a0: Unknown result type (might be due to invalid IL or missing references)
				//IL_00a8: Unknown result type (might be due to invalid IL or missing references)
				//IL_0028: Unknown result type (might be due to invalid IL or missing references)
				//IL_002d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0052: Unknown result type (might be due to invalid IL or missing references)
				//IL_0069: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b9: Unknown result type (might be due to invalid IL or missing references)
				//IL_00be: Unknown result type (might be due to invalid IL or missing references)
				//IL_0083: Unknown result type (might be due to invalid IL or missing references)
				//IL_0085: Unknown result type (might be due to invalid IL or missing references)
				//IL_00e8: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAccessoryGateway logicalDeviceAccessoryGateway = <>4__this;
				CommandResult result;
				try
				{
					TaskAwaiter<CommandResult> val;
					if (num != 0)
					{
						<>c__DisplayClass38_0 CS$<>8__locals6 = new <>c__DisplayClass38_0
						{
							verifyCommand = verifyCommand,
							token = token,
							maxAttempts = maxAttempts,
							attemptCount = 1
						};
						val = logicalDeviceAccessoryGateway.IdsCanCommandRunner.SendCommandAsync(command, CS$<>8__locals6.token, (Func<ILogicalDevice, CommandControl>)delegate(ILogicalDevice device)
						{
							//IL_0008: Unknown result type (might be due to invalid IL or missing references)
							//IL_001a: Unknown result type (might be due to invalid IL or missing references)
							//IL_0059: Unknown result type (might be due to invalid IL or missing references)
							//IL_0056: Unknown result type (might be due to invalid IL or missing references)
							//IL_003a: Unknown result type (might be due to invalid IL or missing references)
							try
							{
								if (CS$<>8__locals6.verifyCommand.Invoke(device, CS$<>8__locals6.token).Result)
								{
									return (CommandControl)0;
								}
								return (CommandControl)((CS$<>8__locals6.attemptCount++ < CS$<>8__locals6.maxAttempts) ? 1 : 3);
							}
							catch (Object)
							{
								return (CommandControl)((++CS$<>8__locals6.attemptCount < 3) ? 1 : 3);
							}
						}, (CommandSendOption)1).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendAndVerifyCommand>d__38>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<CommandResult>);
						num = (<>1__state = -1);
					}
					result = val.GetResult();
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <SendCommandAsync>d__28 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceAccessoryGateway <>4__this;

			public LogicalDeviceAccessoryGatewayCommand command;

			private TaskAwaiter<CommandResult> <>u__1;

			private void MoveNext()
			{
				//IL_0169: Expected O, but got Unknown
				//IL_0180: Unknown result type (might be due to invalid IL or missing references)
				//IL_0185: Expected O, but got Unknown
				//IL_01aa: Unknown result type (might be due to invalid IL or missing references)
				//IL_003a: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00bb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c3: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d4: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0141: Unknown result type (might be due to invalid IL or missing references)
				//IL_0146: Unknown result type (might be due to invalid IL or missing references)
				//IL_014e: Unknown result type (might be due to invalid IL or missing references)
				//IL_015f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0164: Unknown result type (might be due to invalid IL or missing references)
				//IL_00f8: Unknown result type (might be due to invalid IL or missing references)
				//IL_010f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0114: Unknown result type (might be due to invalid IL or missing references)
				//IL_0077: Unknown result type (might be due to invalid IL or missing references)
				//IL_0081: Unknown result type (might be due to invalid IL or missing references)
				//IL_0086: Unknown result type (might be due to invalid IL or missing references)
				//IL_0129: Unknown result type (might be due to invalid IL or missing references)
				//IL_012b: Unknown result type (might be due to invalid IL or missing references)
				//IL_009b: Unknown result type (might be due to invalid IL or missing references)
				//IL_009d: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAccessoryGateway logicalDeviceAccessoryGateway = <>4__this;
				CommandResult result;
				try
				{
					if ((uint)num > 1u && ((CommonDisposableNotifyPropertyChanged)logicalDeviceAccessoryGateway).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceAccessoryGateway", String.Concat(((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceAccessoryGateway).DeviceName, " Accessory gateway ignored because its been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else
					{
						try
						{
							TaskAwaiter<CommandResult> val;
							if (num == 0)
							{
								val = <>u__1;
								<>u__1 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								goto IL_00d2;
							}
							if (num != 1)
							{
								<>c__DisplayClass28_0 CS$<>8__locals2 = new <>c__DisplayClass28_0();
								if (((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceAccessoryGateway).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceAccessoryGateway) is ILogicalDeviceSourceDirectAccessoryGateway logicalDeviceSourceDirectAccessoryGateway)
								{
									val = logicalDeviceSourceDirectAccessoryGateway.SendDirectCommandAccessoryGatewayAsync(logicalDeviceAccessoryGateway, command, logicalDeviceAccessoryGateway._commandCancelSource.Token).GetAwaiter();
									if (!val.IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandAsync>d__28>(ref val, ref this);
										return;
									}
									goto IL_00d2;
								}
								CS$<>8__locals2.attemptCount = 1;
								val = logicalDeviceAccessoryGateway.IdsCanCommandRunner.SendCommandAsync((IDeviceCommandPacket)(object)command, logicalDeviceAccessoryGateway._commandCancelSource.Token, (Func<ILogicalDevice, CommandControl>)((ILogicalDevice _) => (CS$<>8__locals2.attemptCount++ < 3) ? ((CommandControl)1) : ((CommandControl)0)), (CommandSendOption)1).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 1);
									<>u__1 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <SendCommandAsync>d__28>(ref val, ref this);
									return;
								}
							}
							else
							{
								val = <>u__1;
								<>u__1 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
							}
							result = val.GetResult();
							goto end_IL_0041;
							IL_00d2:
							result = val.GetResult();
							end_IL_0041:;
						}
						catch (Exception ex)
						{
							Exception ex2 = ex;
							TaggedLog.Error("LogicalDeviceAccessoryGateway", ex2.Message, Array.Empty<object>());
							result = (CommandResult)7;
						}
					}
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <UnlinkDeviceAsync>d__30 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder<CommandResult> <>t__builder;

			public LogicalDeviceAccessoryGateway <>4__this;

			public MAC mac;

			public CancellationToken token;

			private <>c__DisplayClass30_0 <>8__1;

			private LogicalDeviceAccessoryGatewayCommandUnLinkDevice <command>5__2;

			private CancellationTokenSource <linkedCts>5__3;

			private ILogicalDeviceSourceDirectAccessoryGateway <directManager>5__4;

			private int <retryAttempt>5__5;

			private TaskAwaiter<CommandResult> <>u__1;

			private TaskAwaiter<bool> <>u__2;

			private void MoveNext()
			{
				//IL_0335: Expected O, but got Unknown
				//IL_034c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0369: Expected O, but got Unknown
				//IL_03b8: Unknown result type (might be due to invalid IL or missing references)
				//IL_006a: Unknown result type (might be due to invalid IL or missing references)
				//IL_00b6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_0098: Unknown result type (might be due to invalid IL or missing references)
				//IL_016e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0173: Unknown result type (might be due to invalid IL or missing references)
				//IL_017b: Unknown result type (might be due to invalid IL or missing references)
				//IL_01dc: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e1: Unknown result type (might be due to invalid IL or missing references)
				//IL_01e9: Unknown result type (might be due to invalid IL or missing references)
				//IL_0251: Unknown result type (might be due to invalid IL or missing references)
				//IL_0256: Unknown result type (might be due to invalid IL or missing references)
				//IL_025e: Unknown result type (might be due to invalid IL or missing references)
				//IL_030d: Unknown result type (might be due to invalid IL or missing references)
				//IL_0312: Unknown result type (might be due to invalid IL or missing references)
				//IL_031a: Unknown result type (might be due to invalid IL or missing references)
				//IL_018c: Unknown result type (might be due to invalid IL or missing references)
				//IL_019d: Unknown result type (might be due to invalid IL or missing references)
				//IL_01a7: Unknown result type (might be due to invalid IL or missing references)
				//IL_01ac: Unknown result type (might be due to invalid IL or missing references)
				//IL_0212: Unknown result type (might be due to invalid IL or missing references)
				//IL_021c: Unknown result type (might be due to invalid IL or missing references)
				//IL_0221: Unknown result type (might be due to invalid IL or missing references)
				//IL_032b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0330: Unknown result type (might be due to invalid IL or missing references)
				//IL_02ce: Unknown result type (might be due to invalid IL or missing references)
				//IL_02d8: Unknown result type (might be due to invalid IL or missing references)
				//IL_02dd: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_01c3: Unknown result type (might be due to invalid IL or missing references)
				//IL_0236: Unknown result type (might be due to invalid IL or missing references)
				//IL_0238: Unknown result type (might be due to invalid IL or missing references)
				//IL_0277: Unknown result type (might be due to invalid IL or missing references)
				//IL_02f2: Unknown result type (might be due to invalid IL or missing references)
				//IL_02f4: Unknown result type (might be due to invalid IL or missing references)
				//IL_02a9: Unknown result type (might be due to invalid IL or missing references)
				//IL_012f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0139: Unknown result type (might be due to invalid IL or missing references)
				//IL_013e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0153: Unknown result type (might be due to invalid IL or missing references)
				//IL_0155: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAccessoryGateway logicalDeviceAccessoryGateway = <>4__this;
				CommandResult result;
				try
				{
					if ((uint)num <= 3u)
					{
						goto IL_00d1;
					}
					<>8__1 = new <>c__DisplayClass30_0();
					<>8__1.<>4__this = <>4__this;
					<>8__1.mac = mac;
					if (((CommonDisposableNotifyPropertyChanged)logicalDeviceAccessoryGateway).IsDisposed)
					{
						TaggedLog.Debug("LogicalDeviceAccessoryGateway", String.Concat(((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceAccessoryGateway).DeviceName, " Accessory gateway ignored because its been disposed"), Array.Empty<object>());
						result = (CommandResult)7;
					}
					else
					{
						if (!((PhysicalAddress)(object)<>8__1.mac == (PhysicalAddress)null))
						{
							<command>5__2 = new LogicalDeviceAccessoryGatewayCommandUnLinkDevice(<>8__1.mac);
							<linkedCts>5__3 = CancellationTokenSource.CreateLinkedTokenSource(token, logicalDeviceAccessoryGateway._commandCancelSource.Token);
							goto IL_00d1;
						}
						TaggedLog.Error("LogicalDeviceAccessoryGateway", "Cannot unlink device because MAC address is null", Array.Empty<object>());
						result = (CommandResult)7;
					}
					goto end_IL_000e;
					IL_00d1:
					try
					{
						_ = 3;
						try
						{
							TaskAwaiter<CommandResult> val;
							TaskAwaiter<bool> val2;
							switch (num)
							{
							default:
							{
								ILogicalDeviceSourceDirect primaryDeviceSourceDirect = ((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceAccessoryGateway).DeviceService.GetPrimaryDeviceSourceDirect((ILogicalDevice)(object)logicalDeviceAccessoryGateway);
								<directManager>5__4 = primaryDeviceSourceDirect as ILogicalDeviceSourceDirectAccessoryGateway;
								if (<directManager>5__4 != null)
								{
									<retryAttempt>5__5 = 0;
									goto IL_028f;
								}
								val = logicalDeviceAccessoryGateway.SendAndVerifyCommand((IDeviceCommandPacket)(object)<command>5__2, [AsyncStateMachine(/*Could not decode attribute arguments.*/)] (ILogicalDevice _, CancellationToken cancelToken) =>
								{
									//IL_0002: Unknown result type (might be due to invalid IL or missing references)
									//IL_0007: Unknown result type (might be due to invalid IL or missing references)
									//IL_0016: Unknown result type (might be due to invalid IL or missing references)
									//IL_0017: Unknown result type (might be due to invalid IL or missing references)
									<>c__DisplayClass30_0.<<UnlinkDeviceAsync>b__0>d <<UnlinkDeviceAsync>b__0>d = default(<>c__DisplayClass30_0.<<UnlinkDeviceAsync>b__0>d);
									<<UnlinkDeviceAsync>b__0>d.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
									<<UnlinkDeviceAsync>b__0>d.<>4__this = <>8__1;
									<<UnlinkDeviceAsync>b__0>d.cancelToken = cancelToken;
									<<UnlinkDeviceAsync>b__0>d.<>1__state = -1;
									<<UnlinkDeviceAsync>b__0>d.<>t__builder.Start<<>c__DisplayClass30_0.<<UnlinkDeviceAsync>b__0>d>(ref <<UnlinkDeviceAsync>b__0>d);
									return <<UnlinkDeviceAsync>b__0>d.<>t__builder.Task;
								}, 3, <linkedCts>5__3.Token).GetAwaiter();
								if (!val.IsCompleted)
								{
									num = (<>1__state = 3);
									<>u__1 = val;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <UnlinkDeviceAsync>d__30>(ref val, ref this);
									return;
								}
								break;
							}
							case 0:
								val = <>u__1;
								<>u__1 = default(TaskAwaiter<CommandResult>);
								num = (<>1__state = -1);
								goto IL_018a;
							case 1:
								val2 = <>u__2;
								<>u__2 = default(TaskAwaiter<bool>);
								num = (<>1__state = -1);
								goto IL_01f8;
							case 2:
								val2 = <>u__2;
								<>u__2 = default(TaskAwaiter<bool>);
								num = (<>1__state = -1);
								goto IL_026d;
							case 3:
								{
									val = <>u__1;
									<>u__1 = default(TaskAwaiter<CommandResult>);
									num = (<>1__state = -1);
									break;
								}
								IL_018a:
								val.GetResult();
								val2 = TaskExtension.TryDelay(200, <linkedCts>5__3.Token).GetAwaiter();
								if (!val2.IsCompleted)
								{
									num = (<>1__state = 1);
									<>u__2 = val2;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <UnlinkDeviceAsync>d__30>(ref val2, ref this);
									return;
								}
								goto IL_01f8;
								IL_028f:
								if (<retryAttempt>5__5 < 3 && !<linkedCts>5__3.IsCancellationRequested)
								{
									val = <directManager>5__4.SendDirectCommandAccessoryGatewayAsync(logicalDeviceAccessoryGateway, <command>5__2, <linkedCts>5__3.Token).GetAwaiter();
									if (!val.IsCompleted)
									{
										num = (<>1__state = 0);
										<>u__1 = val;
										<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<CommandResult>, <UnlinkDeviceAsync>d__30>(ref val, ref this);
										return;
									}
									goto IL_018a;
								}
								result = (CommandResult)7;
								goto end_IL_00d6;
								IL_01f8:
								val2.GetResult();
								val2 = logicalDeviceAccessoryGateway.IsDeviceLinkedAsync(<>8__1.mac, <linkedCts>5__3.Token).GetAwaiter();
								if (!val2.IsCompleted)
								{
									num = (<>1__state = 2);
									<>u__2 = val2;
									<>t__builder.AwaitUnsafeOnCompleted<TaskAwaiter<bool>, <UnlinkDeviceAsync>d__30>(ref val2, ref this);
									return;
								}
								goto IL_026d;
								IL_026d:
								if (val2.GetResult())
								{
									<retryAttempt>5__5++;
									goto IL_028f;
								}
								result = (CommandResult)0;
								goto end_IL_00d6;
							}
							result = val.GetResult();
							end_IL_00d6:;
						}
						catch (Exception ex)
						{
							Exception ex2 = ex;
							TaggedLog.Error("LogicalDeviceAccessoryGateway", ex2.Message, Array.Empty<object>());
							result = (CommandResult)7;
						}
					}
					finally
					{
						if (num < 0 && <linkedCts>5__3 != null)
						{
							((IDisposable)<linkedCts>5__3).Dispose();
						}
					}
					end_IL_000e:;
				}
				catch (Exception ex3)
				{
					Exception exception = ex3;
					<>1__state = -2;
					<>8__1 = null;
					<command>5__2 = null;
					<linkedCts>5__3 = null;
					<>t__builder.SetException(exception);
					return;
				}
				<>1__state = -2;
				<>8__1 = null;
				<command>5__2 = null;
				<linkedCts>5__3 = null;
				<>t__builder.SetResult(result);
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				<>t__builder.SetStateMachine(stateMachine);
			}
		}

		[StructLayout((LayoutKind)3)]
		[CompilerGenerated]
		private struct <UpdateFirmwareAsync>d__44 : ValueType, IAsyncStateMachine
		{
			public int <>1__state;

			public AsyncTaskMethodBuilder <>t__builder;

			public LogicalDeviceAccessoryGateway <>4__this;

			public CancellationToken cancellationToken;

			public IReadOnlyList<byte> data;

			public Func<ILogicalDeviceTransferProgress, bool> progressAck;

			public Dictionary<FirmwareUpdateOption, object> options;

			private ILogicalDeviceFirmwareUpdateSession <firmwareUpdateSession>5__2;

			private TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice?> <>u__1;

			private TaskAwaiter <>u__2;

			private void MoveNext()
			{
				//IL_0142: Expected O, but got Unknown
				//IL_0062: Unknown result type (might be due to invalid IL or missing references)
				//IL_0067: Unknown result type (might be due to invalid IL or missing references)
				//IL_006e: Unknown result type (might be due to invalid IL or missing references)
				//IL_0025: Unknown result type (might be due to invalid IL or missing references)
				//IL_002f: Unknown result type (might be due to invalid IL or missing references)
				//IL_0034: Unknown result type (might be due to invalid IL or missing references)
				//IL_008b: Unknown result type (might be due to invalid IL or missing references)
				//IL_0048: Unknown result type (might be due to invalid IL or missing references)
				//IL_0049: Unknown result type (might be due to invalid IL or missing references)
				//IL_0103: Unknown result type (might be due to invalid IL or missing references)
				//IL_0108: Unknown result type (might be due to invalid IL or missing references)
				//IL_0110: Unknown result type (might be due to invalid IL or missing references)
				//IL_00c1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d1: Unknown result type (might be due to invalid IL or missing references)
				//IL_00d6: Unknown result type (might be due to invalid IL or missing references)
				//IL_00eb: Unknown result type (might be due to invalid IL or missing references)
				//IL_00ed: Unknown result type (might be due to invalid IL or missing references)
				int num = <>1__state;
				LogicalDeviceAccessoryGateway logicalDeviceAccessoryGateway = <>4__this;
				try
				{
					TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice> val;
					if (num != 0)
					{
						if (num == 1)
						{
							goto IL_00a9;
						}
						val = FirmwareUpdateSupportEx.TryGetSupportedFirmwareUpdateDeviceSource(((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceAccessoryGateway).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceAccessoryGateway, cancellationToken).GetAwaiter();
						if (!val.IsCompleted)
						{
							num = (<>1__state = 0);
							<>u__1 = val;
							((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>, <UpdateFirmwareAsync>d__44>(ref val, ref this);
							return;
						}
					}
					else
					{
						val = <>u__1;
						<>u__1 = default(TaskAwaiter<ILogicalDeviceSourceDirectFirmwareUpdateDevice>);
						num = (<>1__state = -1);
					}
					ILogicalDeviceSourceDirectFirmwareUpdateDevice result = val.GetResult();
					if (result == null)
					{
						throw new FirmwareUpdateNotSupportedException((ILogicalDevice)(object)logicalDeviceAccessoryGateway, (FirmwareUpdateSupport)0, (Exception)null);
					}
					<firmwareUpdateSession>5__2 = ((LogicalDevice<ILogicalDeviceCapability>)(object)logicalDeviceAccessoryGateway).DeviceService.FirmwareUpdateManager.StartFirmwareUpdateSession((ILogicalDeviceFirmwareUpdateDevice)(object)logicalDeviceAccessoryGateway);
					goto IL_00a9;
					IL_00a9:
					try
					{
						TaskAwaiter val2;
						if (num != 1)
						{
							val2 = ((IFirmwareUpdateDevice)result).UpdateFirmwareAsync(<firmwareUpdateSession>5__2, data, progressAck, cancellationToken, (IReadOnlyDictionary<FirmwareUpdateOption, object>)(object)options).GetAwaiter();
							if (!((TaskAwaiter)(ref val2)).IsCompleted)
							{
								num = (<>1__state = 1);
								<>u__2 = val2;
								((AsyncTaskMethodBuilder)(ref <>t__builder)).AwaitUnsafeOnCompleted<TaskAwaiter, <UpdateFirmwareAsync>d__44>(ref val2, ref this);
								return;
							}
						}
						else
						{
							val2 = <>u__2;
							<>u__2 = default(TaskAwaiter);
							num = (<>1__state = -1);
						}
						((TaskAwaiter)(ref val2)).GetResult();
					}
					finally
					{
						if (num < 0 && <firmwareUpdateSession>5__2 != null)
						{
							((IDisposable)<firmwareUpdateSession>5__2).Dispose();
						}
					}
				}
				catch (Exception ex)
				{
					Exception exception = ex;
					<>1__state = -2;
					<firmwareUpdateSession>5__2 = null;
					((AsyncTaskMethodBuilder)(ref <>t__builder)).SetException(exception);
					return;
				}
				<>1__state = -2;
				<firmwareUpdateSession>5__2 = null;
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetResult();
			}

			[DebuggerHidden]
			private void SetStateMachine(IAsyncStateMachine stateMachine)
			{
				((AsyncTaskMethodBuilder)(ref <>t__builder)).SetStateMachine(stateMachine);
			}
		}

		public const string LogTag = "LogicalDeviceAccessoryGateway";

		public const int MaxSendCommandAttempts = 3;

		private const int RvLinkCommandRetryDelayMs = 200;

		public const int MaxLinkedDevices = 42;

		public const int LinkCheckDelayMs = 250;

		public static readonly TimeSpan PairWithRvTimeout = TimeSpan.FromSeconds(90.0);

		protected ILogicalDeviceCommandRunnerIdsCan IdsCanCommandRunner;

		private CancellationTokenSource _commandCancelSource = new CancellationTokenSource();

		private readonly IReadOnlyDictionary<FirmwareUpdateOption, string> _defaultFirmwareUpdateOptions;

		public virtual uint MsCommandTimeout => 5000u;

		public virtual uint MsSessionTimeout => 0u;

		[field: CompilerGenerated]
		public LogicalDevicePidByte AssociatedDeviceCountPid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LogicalDevicePidArrayUInt16 AssociatedDeviceMacHighPid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LogicalDevicePidArrayUInt32 AssociatedDeviceMacLowPid
		{
			[CompilerGenerated]
			get;
		}

		[field: CompilerGenerated]
		public LogicalDevicePidArrayDeviceType AssociatedDeviceTypePid
		{
			[CompilerGenerated]
			get;
		}

		public AccessoryGatewayMode Mode => ((LogicalDevice<LogicalDeviceAccessoryGatewayStatus, ILogicalDeviceCapability>)this).DeviceStatus.Mode;

		public bool CommandSessionActivated => IdsCanCommandRunner.CommandSessionActivated;

		public IReadOnlyDictionary<FirmwareUpdateOption, string> DefaultFirmwareUpdateOptions => _defaultFirmwareUpdateOptions;

		public LogicalDeviceAccessoryGateway(ILogicalDeviceId logicalDeviceId, ILogicalDeviceService service, bool isFunctionClassChangeable = false)
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			//IL_000b: Expected O, but got Unknown
			//IL_0038: Unknown result type (might be due to invalid IL or missing references)
			//IL_0044: Expected O, but got Unknown
			//IL_0046: Unknown result type (might be due to invalid IL or missing references)
			//IL_004b: Unknown result type (might be due to invalid IL or missing references)
			//IL_0057: Expected O, but got Unknown
			//IL_0057: Unknown result type (might be due to invalid IL or missing references)
			//IL_0063: Expected O, but got Unknown
			//IL_0068: Expected O, but got Unknown
			//IL_0070: Unknown result type (might be due to invalid IL or missing references)
			//IL_007a: Expected O, but got Unknown
			//IL_0086: Unknown result type (might be due to invalid IL or missing references)
			//IL_0090: Expected O, but got Unknown
			//IL_009c: Unknown result type (might be due to invalid IL or missing references)
			//IL_00a6: Expected O, but got Unknown
			//IL_00b2: Unknown result type (might be due to invalid IL or missing references)
			//IL_00bc: Expected O, but got Unknown
			Dictionary<FirmwareUpdateOption, string> obj = new Dictionary<FirmwareUpdateOption, string>();
			obj.Add((FirmwareUpdateOption)1, String.Format("{0}", (object)(UInt32)3276800));
			_defaultFirmwareUpdateOptions = (IReadOnlyDictionary<FirmwareUpdateOption, string>)(object)obj;
			base..ctor(logicalDeviceId, new LogicalDeviceAccessoryGatewayStatus(), (ILogicalDeviceCapability)new LogicalDeviceCapability(), service, isFunctionClassChangeable);
			LogicalDeviceCommandRunnerIdsCan val = new LogicalDeviceCommandRunnerIdsCan((ILogicalDevice)(object)this);
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).CommandProcessingTime = MsCommandTimeout;
			((LogicalDeviceCommandRunnerIdsCan<ILogicalDevice>)val).SessionKeepAliveTime = MsSessionTimeout;
			IdsCanCommandRunner = (ILogicalDeviceCommandRunnerIdsCan)val;
			AssociatedDeviceCountPid = new LogicalDevicePidByte((ILogicalDevice)(object)this, PID.ACC_GW_NUM_DEVICES, (LogicalDeviceSessionType)0);
			AssociatedDeviceMacHighPid = new LogicalDevicePidArrayUInt16((ILogicalDevice)(object)this, PID.ACC_GW_MAC_HIGH, (LogicalDeviceSessionType)0, (ushort)0, (ushort)42, (Func<ulong, bool>)null);
			AssociatedDeviceMacLowPid = new LogicalDevicePidArrayUInt32((ILogicalDevice)(object)this, PID.ACC_GW_MAC_LOW, (LogicalDeviceSessionType)0, (ushort)0, (ushort)42, (Func<ulong, bool>)null);
			AssociatedDeviceTypePid = new LogicalDevicePidArrayDeviceType((ILogicalDevice)(object)this, PID.DEVICE_TYPE_AT_INDEX, (LogicalDeviceSessionType)0, (ushort)0, (ushort)42, (Func<ulong, bool>)null);
		}

		public override void OnDeviceStatusChanged()
		{
			base.OnDeviceStatusChanged();
			TaggedLog.Information("LogicalDeviceAccessoryGateway", String.Format("Data Changed {0}: Mode = {1}", (object)((LogicalDevice<ILogicalDeviceCapability>)(object)this).LogicalId, (object)((LogicalDevice<LogicalDeviceAccessoryGatewayStatus, ILogicalDeviceCapability>)this).DeviceStatus.Mode), Array.Empty<object>());
			((CommonNotifyPropertyChanged)this).OnPropertyChanged("Mode");
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> SendCommandAsync(LogicalDeviceAccessoryGatewayCommand command)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			<SendCommandAsync>d__28 <SendCommandAsync>d__ = default(<SendCommandAsync>d__28);
			<SendCommandAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendCommandAsync>d__.<>4__this = this;
			<SendCommandAsync>d__.command = command;
			<SendCommandAsync>d__.<>1__state = -1;
			<SendCommandAsync>d__.<>t__builder.Start<<SendCommandAsync>d__28>(ref <SendCommandAsync>d__);
			return <SendCommandAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> LinkDeviceAsync(MAC mac, CancellationToken token)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<LinkDeviceAsync>d__29 <LinkDeviceAsync>d__ = default(<LinkDeviceAsync>d__29);
			<LinkDeviceAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<LinkDeviceAsync>d__.<>4__this = this;
			<LinkDeviceAsync>d__.mac = mac;
			<LinkDeviceAsync>d__.token = token;
			<LinkDeviceAsync>d__.<>1__state = -1;
			<LinkDeviceAsync>d__.<>t__builder.Start<<LinkDeviceAsync>d__29>(ref <LinkDeviceAsync>d__);
			return <LinkDeviceAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> UnlinkDeviceAsync(MAC mac, CancellationToken token)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<UnlinkDeviceAsync>d__30 <UnlinkDeviceAsync>d__ = default(<UnlinkDeviceAsync>d__30);
			<UnlinkDeviceAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<UnlinkDeviceAsync>d__.<>4__this = this;
			<UnlinkDeviceAsync>d__.mac = mac;
			<UnlinkDeviceAsync>d__.token = token;
			<UnlinkDeviceAsync>d__.<>1__state = -1;
			<UnlinkDeviceAsync>d__.<>t__builder.Start<<UnlinkDeviceAsync>d__30>(ref <UnlinkDeviceAsync>d__);
			return <UnlinkDeviceAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task<bool> AccessoryGatewayHasMac(MAC mac, CancellationToken token)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<AccessoryGatewayHasMac>d__31 <AccessoryGatewayHasMac>d__ = default(<AccessoryGatewayHasMac>d__31);
			<AccessoryGatewayHasMac>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<AccessoryGatewayHasMac>d__.<>4__this = this;
			<AccessoryGatewayHasMac>d__.mac = mac;
			<AccessoryGatewayHasMac>d__.token = token;
			<AccessoryGatewayHasMac>d__.<>1__state = -1;
			<AccessoryGatewayHasMac>d__.<>t__builder.Start<<AccessoryGatewayHasMac>d__31>(ref <AccessoryGatewayHasMac>d__);
			return <AccessoryGatewayHasMac>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> IsDeviceLinkedAsync(MAC mac, CancellationToken token)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<IsDeviceLinkedAsync>d__32 <IsDeviceLinkedAsync>d__ = default(<IsDeviceLinkedAsync>d__32);
			<IsDeviceLinkedAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<IsDeviceLinkedAsync>d__.<>4__this = this;
			<IsDeviceLinkedAsync>d__.mac = mac;
			<IsDeviceLinkedAsync>d__.token = token;
			<IsDeviceLinkedAsync>d__.<>1__state = -1;
			<IsDeviceLinkedAsync>d__.<>t__builder.Start<<IsDeviceLinkedAsync>d__32>(ref <IsDeviceLinkedAsync>d__);
			return <IsDeviceLinkedAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<MAC> GetLinkedDeviceAtIndexAsync(ushort index, CancellationToken token)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_001e: Unknown result type (might be due to invalid IL or missing references)
			//IL_001f: Unknown result type (might be due to invalid IL or missing references)
			<GetLinkedDeviceAtIndexAsync>d__33 <GetLinkedDeviceAtIndexAsync>d__ = default(<GetLinkedDeviceAtIndexAsync>d__33);
			<GetLinkedDeviceAtIndexAsync>d__.<>t__builder = AsyncTaskMethodBuilder<MAC>.Create();
			<GetLinkedDeviceAtIndexAsync>d__.<>4__this = this;
			<GetLinkedDeviceAtIndexAsync>d__.index = index;
			<GetLinkedDeviceAtIndexAsync>d__.token = token;
			<GetLinkedDeviceAtIndexAsync>d__.<>1__state = -1;
			<GetLinkedDeviceAtIndexAsync>d__.<>t__builder.Start<<GetLinkedDeviceAtIndexAsync>d__33>(ref <GetLinkedDeviceAtIndexAsync>d__);
			return <GetLinkedDeviceAtIndexAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<IEnumerable<MAC>> GetLinkedDevicesAsync(CancellationToken token)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<GetLinkedDevicesAsync>d__34 <GetLinkedDevicesAsync>d__ = default(<GetLinkedDevicesAsync>d__34);
			<GetLinkedDevicesAsync>d__.<>t__builder = AsyncTaskMethodBuilder<IEnumerable<MAC>>.Create();
			<GetLinkedDevicesAsync>d__.<>4__this = this;
			<GetLinkedDevicesAsync>d__.token = token;
			<GetLinkedDevicesAsync>d__.<>1__state = -1;
			<GetLinkedDevicesAsync>d__.<>t__builder.Start<<GetLinkedDevicesAsync>d__34>(ref <GetLinkedDevicesAsync>d__);
			return <GetLinkedDevicesAsync>d__.<>t__builder.Task;
		}

		private static bool IsDeviceMacValid(MAC deviceMac)
		{
			if (PhysicalAddress.op_Implicit((PhysicalAddress)(object)deviceMac) != 0L)
			{
				return PhysicalAddress.op_Implicit((PhysicalAddress)(object)deviceMac) < 281474976710655L;
			}
			return false;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<CommandResult> ClearAllDevicesAsync(CancellationToken token)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ClearAllDevicesAsync>d__36 <ClearAllDevicesAsync>d__ = default(<ClearAllDevicesAsync>d__36);
			<ClearAllDevicesAsync>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<ClearAllDevicesAsync>d__.<>4__this = this;
			<ClearAllDevicesAsync>d__.token = token;
			<ClearAllDevicesAsync>d__.<>1__state = -1;
			<ClearAllDevicesAsync>d__.<>t__builder.Start<<ClearAllDevicesAsync>d__36>(ref <ClearAllDevicesAsync>d__);
			return <ClearAllDevicesAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task<bool> ResyncDevicesAsync(CancellationToken token)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ResyncDevicesAsync>d__37 <ResyncDevicesAsync>d__ = default(<ResyncDevicesAsync>d__37);
			<ResyncDevicesAsync>d__.<>t__builder = AsyncTaskMethodBuilder<bool>.Create();
			<ResyncDevicesAsync>d__.<>4__this = this;
			<ResyncDevicesAsync>d__.token = token;
			<ResyncDevicesAsync>d__.<>1__state = -1;
			<ResyncDevicesAsync>d__.<>t__builder.Start<<ResyncDevicesAsync>d__37>(ref <ResyncDevicesAsync>d__);
			return <ResyncDevicesAsync>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		private Task<CommandResult> SendAndVerifyCommand(IDeviceCommandPacket command, Func<ILogicalDevice, CancellationToken, Task<bool>> verifyCommand, int maxAttempts = 3, CancellationToken token = default(CancellationToken))
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_002e: Unknown result type (might be due to invalid IL or missing references)
			//IL_0030: Unknown result type (might be due to invalid IL or missing references)
			<SendAndVerifyCommand>d__38 <SendAndVerifyCommand>d__ = default(<SendAndVerifyCommand>d__38);
			<SendAndVerifyCommand>d__.<>t__builder = AsyncTaskMethodBuilder<CommandResult>.Create();
			<SendAndVerifyCommand>d__.<>4__this = this;
			<SendAndVerifyCommand>d__.command = command;
			<SendAndVerifyCommand>d__.verifyCommand = verifyCommand;
			<SendAndVerifyCommand>d__.maxAttempts = maxAttempts;
			<SendAndVerifyCommand>d__.token = token;
			<SendAndVerifyCommand>d__.<>1__state = -1;
			<SendAndVerifyCommand>d__.<>t__builder.Start<<SendAndVerifyCommand>d__38>(ref <SendAndVerifyCommand>d__);
			return <SendAndVerifyCommand>d__.<>t__builder.Task;
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public Task ActivateSession(CancellationToken cancelToken)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0016: Unknown result type (might be due to invalid IL or missing references)
			//IL_0017: Unknown result type (might be due to invalid IL or missing references)
			<ActivateSession>d__41 <ActivateSession>d__ = default(<ActivateSession>d__41);
			<ActivateSession>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<ActivateSession>d__.<>4__this = this;
			<ActivateSession>d__.cancelToken = cancelToken;
			<ActivateSession>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Start<<ActivateSession>d__41>(ref <ActivateSession>d__);
			return ((AsyncTaskMethodBuilder)(ref <ActivateSession>d__.<>t__builder)).Task;
		}

		public void DeactivateSession()
		{
			IdsCanCommandRunner.CommandDeactivateSession(true);
		}

		public virtual Task<FirmwareUpdateSupport> TryGetFirmwareUpdateSupportAsync(CancellationToken cancelToken)
		{
			//IL_000c: Unknown result type (might be due to invalid IL or missing references)
			return FirmwareUpdateSupportEx.TryGetFirmwareUpdateSupportAsync(((LogicalDevice<ILogicalDeviceCapability>)(object)this).DeviceService.DeviceSourceManager, (ILogicalDeviceFirmwareUpdateDevice)(object)this, cancelToken);
		}

		[AsyncStateMachine(/*Could not decode attribute arguments.*/)]
		public virtual Task UpdateFirmwareAsync(IReadOnlyList<byte> data, Func<ILogicalDeviceTransferProgress, bool> progressAck, CancellationToken cancellationToken, Dictionary<FirmwareUpdateOption, object>? options = null)
		{
			//IL_0002: Unknown result type (might be due to invalid IL or missing references)
			//IL_0007: Unknown result type (might be due to invalid IL or missing references)
			//IL_0026: Unknown result type (might be due to invalid IL or missing references)
			//IL_0027: Unknown result type (might be due to invalid IL or missing references)
			<UpdateFirmwareAsync>d__44 <UpdateFirmwareAsync>d__ = default(<UpdateFirmwareAsync>d__44);
			<UpdateFirmwareAsync>d__.<>t__builder = AsyncTaskMethodBuilder.Create();
			<UpdateFirmwareAsync>d__.<>4__this = this;
			<UpdateFirmwareAsync>d__.data = data;
			<UpdateFirmwareAsync>d__.progressAck = progressAck;
			<UpdateFirmwareAsync>d__.cancellationToken = cancellationToken;
			<UpdateFirmwareAsync>d__.options = options;
			<UpdateFirmwareAsync>d__.<>1__state = -1;
			((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Start<<UpdateFirmwareAsync>d__44>(ref <UpdateFirmwareAsync>d__);
			return ((AsyncTaskMethodBuilder)(ref <UpdateFirmwareAsync>d__.<>t__builder)).Task;
		}

		public override void Dispose(bool disposing)
		{
			CancellationTokenSource commandCancelSource = _commandCancelSource;
			if (commandCancelSource != null)
			{
				CancellationTokenSourceExtension.CancelAndDispose(commandCancelSource);
			}
			_commandCancelSource = null;
			ILogicalDeviceCommandRunnerIdsCan idsCanCommandRunner = IdsCanCommandRunner;
			if (idsCanCommandRunner != null)
			{
				((ICommonDisposable)idsCanCommandRunner).TryDispose();
			}
			base.Dispose(disposing);
		}

		NETWORK_STATUS ILogicalDeviceIdsCan.get_LastReceivedNetworkStatus()
		{
			//IL_0001: Unknown result type (might be due to invalid IL or missing references)
			return ((LogicalDevice<ILogicalDeviceCapability>)(object)this).LastReceivedNetworkStatus;
		}
	}
	public class LogicalDeviceAccessoryGatewayFactory : DefaultLogicalDeviceFactory
	{
		public override ILogicalDevice MakeLogicalDevice(ILogicalDeviceService service, ILogicalDeviceId logicalDeviceId, Nullable<byte> rawCapability)
		{
			if (!logicalDeviceId.ProductId.IsValid || !logicalDeviceId.DeviceType.IsValid)
			{
				return null;
			}
			if (DEVICE_TYPE.op_Implicit(logicalDeviceId.DeviceType) != 44)
			{
				return null;
			}
			return (ILogicalDevice)(object)new LogicalDeviceAccessoryGateway(logicalDeviceId, service);
		}
	}
	public class LogicalDeviceAccessoryGatewayStatus : LogicalDeviceStatusPacketMutable, ILogicalDeviceStatus<LogicalDeviceAccessoryGatewayStatusSerializable>, ILogicalDeviceStatus, IDeviceDataPacketMutable, IDeviceDataPacket, INotifyPropertyChanged
	{
		public const int MinimumStatusPacketSize = 1;

		private const int ModeIndex = 0;

		public AccessoryGatewayMode Mode
		{
			get
			{
				if (!((LogicalDeviceDataPacketMutableDoubleBuffer)this).HasData)
				{
					return AccessoryGatewayMode.Accessory;
				}
				return (AccessoryGatewayMode)((LogicalDeviceDataPacketMutableDoubleBuffer)this).Data[0];
			}
		}

		public LogicalDeviceAccessoryGatewayStatus()
			: base(1u)
		{
		}

		public void SetMode(AccessoryGatewayMode mode)
		{
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).SetByte((byte)255, (byte)mode, 0);
		}

		public LogicalDeviceAccessoryGatewayStatus(LogicalDeviceAccessoryGatewayStatus originalStatus)
		{
			byte[] data = ((LogicalDeviceDataPacketMutableDoubleBuffer)originalStatus).Data;
			((LogicalDeviceDataPacketMutableDoubleBuffer)this).Update(data, data.Length, false);
		}

		public LogicalDeviceAccessoryGatewayStatusSerializable CopyAsSerializable()
		{
			return new LogicalDeviceAccessoryGatewayStatusSerializable(Mode);
		}
	}
	[JsonObject(/*Could not decode attribute arguments.*/)]
	public record LogicalDeviceAccessoryGatewayStatusSerializable : LogicalDeviceStatusSerializableBase<LogicalDeviceAccessoryGatewayStatusSerializable>
	{
		[CompilerGenerated]
		protected override Type EqualityContract
		{
			[CompilerGenerated]
			get
			{
				return typeof(LogicalDeviceAccessoryGatewayStatusSerializable);
			}
		}

		[JsonProperty]
		[JsonConverter(/*Could not decode attribute arguments.*/)]
		public AccessoryGatewayMode Mode
		{
			[CompilerGenerated]
			get;
		}

		[JsonConstructor]
		public LogicalDeviceAccessoryGatewayStatusSerializable(AccessoryGatewayMode mode)
		{
			Mode = mode;
		}

		public LogicalDeviceAccessoryGatewayStatusSerializable(LogicalDeviceAccessoryGatewayStatus status)
			: this(status.Mode)
		{
		}

		public override byte[] MakeRawData()
		{
			LogicalDeviceAccessoryGatewayStatus logicalDeviceAccessoryGatewayStatus = new LogicalDeviceAccessoryGatewayStatus();
			logicalDeviceAccessoryGatewayStatus.SetMode(Mode);
			return ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceAccessoryGatewayStatus).CopyCurrentData();
		}

		public static LogicalDeviceAccessoryGatewayStatusSerializable MakeStatusSerializable(byte[] rawData)
		{
			//IL_0045: Unknown result type (might be due to invalid IL or missing references)
			int num = rawData.Length;
			LogicalDeviceAccessoryGatewayStatus logicalDeviceAccessoryGatewayStatus = new LogicalDeviceAccessoryGatewayStatus();
			if (num < ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceAccessoryGatewayStatus).MinSize || num > ((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceAccessoryGatewayStatus).MaxSize)
			{
				throw new ArgumentOutOfRangeException("rawData", String.Format("Data size must be between {0} and {1}", (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceAccessoryGatewayStatus).MinSize, (object)((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceAccessoryGatewayStatus).MaxSize));
			}
			((LogicalDeviceDataPacketMutableDoubleBuffer)logicalDeviceAccessoryGatewayStatus).Update(rawData, rawData.Length, false);
			return new LogicalDeviceAccessoryGatewayStatusSerializable(logicalDeviceAccessoryGatewayStatus.Mode);
		}

		[CompilerGenerated]
		public override string ToString()
		{
			//IL_0000: Unknown result type (might be due to invalid IL or missing references)
			//IL_0006: Expected O, but got Unknown
			StringBuilder val = new StringBuilder();
			val.Append("LogicalDeviceAccessoryGatewayStatusSerializable");
			val.Append(" { ");
			if (((LogicalDeviceStatusSerializableBase<LogicalDeviceAccessoryGatewayStatusSerializable>)(object)this).PrintMembers(val))
			{
				val.Append(' ');
			}
			val.Append('}');
			return ((Object)val).ToString();
		}

		[CompilerGenerated]
		protected override bool PrintMembers(StringBuilder builder)
		{
			if (base.PrintMembers(builder))
			{
				builder.Append(", ");
			}
			builder.Append("Mode = ");
			builder.Append(((Object)Mode/*cast due to .constrained prefix*/).ToString());
			return true;
		}

		[CompilerGenerated]
		public override int GetHashCode()
		{
			return base.GetHashCode() * -1521134295 + EqualityComparer<AccessoryGatewayMode>.Default.GetHashCode(Mode);
		}

		[CompilerGenerated]
		public sealed override bool Equals(LogicalDeviceStatusSerializableBase<LogicalDeviceAccessoryGatewayStatusSerializable>? other)
		{
			return ((Object)this).Equals((object)other);
		}

		[CompilerGenerated]
		protected LogicalDeviceAccessoryGatewayStatusSerializable(LogicalDeviceAccessoryGatewayStatusSerializable original)
			: base((LogicalDeviceStatusSerializableBase<LogicalDeviceAccessoryGatewayStatusSerializable>)(object)original)
		{
			Mode = original.Mode;
		}
	}
}
